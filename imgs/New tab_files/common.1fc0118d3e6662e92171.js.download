(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["common"],{36777:function(e,t,n){"use strict";n.d(t,{Fv:function(){return o},_t:function(){return r},gQ:function(){return i}});const i="selectedNavItemClicked",r="navRefreshButtonEvent";class o{constructor(){this.supports3DContent=!1}attemptNavItemChange(e){return!!this.superNavChangeCallback&&(this.superNavChangeCallback(e),!0)}disconnectSuperNav(){this.superNavChangeCallback=void 0}getForceSelectedNavItemId(){return this.forceSelectedNavItemId}getSupports3DContent(){return this.supports3DContent}static getInstance(e){return o.instance||(o.instance=new o),e&&(o.instance.superNavChangeCallback=e),o.instance}registerForceSelectedNavItemId(e){this.forceSelectedNavItemId=e}registerSupports3DContent(e){this.supports3DContent=e}}},2437:function(e,t,n){"use strict";n.r(t),n.d(t,{BackgroundImageWC:function(){return Me},BackgroundImageWCInlineStyles:function(){return Et},BackgroundImageWCStyles:function(){return Mt},BackgroundImageWCTemplate:function(){return ft},EventName:function(){return s},ToolingInfo:function(){return Lt},getEventToggleButtonProps:function(){return xt}});var i=n(33940),r=n(7476),o=n(26181);const a=o.K.Dialog.toString();var s;!function(e){e.Secondary="backgroundImageWCSecondary",e.Edit="backgroundImageWCEdit",e.Toggle="backgroundImageWCToggle",e.StatesSync="backgroundImageWCStatesSync",e.StatesSyncAsk="backgroundImageWCStatesSyncAsk",e.EventToggle="eventToggle"}(s||(s={}));var c=n(98106),d=n(25598),l=n(79545),u=n(12756),p=n(85205),h=n(19233),g=n(31499),m=n(91046),f=n(34551),v=n(21789),y=n(21931),S=n(40762),C=n(13334),w=n(20089),b=n(86522),T=n(71486),k=n(92100),P=n(54297),A=n(20758),I=n(52817),E=n(87095),M=n(71568),x=n(63815),L=n(51683),R=n(23549),D=n(82898),F=n(944),O=n(66963);const B=()=>{};var N=n(31558),_=n(67044),U=n(85663),W=n(43356);var H;!function(e){e.alert="Alert",e.edit="Edit",e.globe="Globe",e.lightbulb="Lightbulb",e.meetNow="MeetNow",e.news="News",e.search="Search"}(H||(H={}));class ${constructor(e,t,n,i,o){this.fallbackImageURL="",this.museumBarText="",this.likeClickButtonHandler=()=>{const{actTelemetry:e}=this.irisStateInfo||{};this.sendIrisActionTelemetry(e,I.M.Like)},this.dislikeClickButtonHandler=()=>{const{actTelemetry:e}=this.irisStateInfo||{};if(this.dislikeCountWasIncremented=L.Vv.addImageCreativeToDislikeList(),this.dislikeCountWasIncremented||this.newIrisSurfaceInfo)return this.sendIrisActionTelemetry(e,I.M.Dislike),this.getNewIrisContent()},this.hotSpotClickHandler=(e,t)=>{t&&t.preventDefault&&t.preventDefault();const{creativeId:n,placementId:i,actTelemetry:r,impTelemetry:o}=this.irisStateInfo||{},a={ctaType:e.cta_type,ctaMetaData:e.cta,delayInMs:void 0,irisTelemetryActionId:e.hs,irisTelemetryActionString:r},s=this.hotSpotCtaHandler(a,t);s&&s().then((e=>{if(e&&e.actionCompleted&&a.ctaType===E.W.executeAction&&a.ctaMetaData===A.uS.setDefaultBrowser){const e={actionUrl:r,impressionUrl:o};this.fireIrisBeacon(i,n,I.R.Action,e,I.M.Conversion),this.irisDataConnector.resetImageLastUpdateTime()}}))},this.hotSpotMouseEnterHandler=e=>{R.M0.sendActionEvent(null==e?void 0:e.currentTarget,D.Aw.Hover,D.wu.View)},this.hotSpotCtaHandler=(e,t)=>{if(e)if(e.ctaType&&e.ctaMetaData){if(t)return async()=>{const n=M._.formatTelemetryActionUrl(e.irisTelemetryActionString,I.M.Click+e.irisTelemetryActionId);x.c.sendActionUpdate(n),R.M0.sendActionEvent(t.currentTarget,D.Aw.Click,D.wu.Navigate);const i=this.getCtaCallback(e);return i?await i():null};B({...r.OeS,message:"Event is not defined"})}else B({...r.jSE,message:"Either of call to action type or metadata is not defined",pb:{...r.jSE.pb,customMessage:`ctaType: ${e.ctaType||""} and ctaMetaData: ${e.ctaMetaData||""}`}});else B({...r.drd,message:"HotSpot call to action state not defined"})},this.getCtaCallback=e=>{switch(e.ctaType){case E.W.offPageNavigation:return V(e.ctaType,e.ctaMetaData)?(0,A.$y)(e.ctaMetaData):void B({...r.MaG,message:"Invalid CTA Offpage Nav Data",pb:{...r.MaG.pb,customMessage:`ctaType: ${e.ctaType||""} and ctaMetaData: ${e.ctaMetaData||""}`}});case E.W.inPageNavigation:return(0,A.U$)(e.ctaMetaData,e.delayInMs);case E.W.executeAction:return(0,A.jo)(e.ctaMetaData)}},this.fireIrisBeacon=(e,t,n,i,r)=>{(0,_.oU)(p.z.IrisData).then((o=>{o&&o.sendActionUpdate(e,t,n,i,r)}))},this.sendIrisActionTelemetry=(e,t)=>{if(e){const n=M._.formatTelemetryActionUrl(e,t);x.c.sendActionUpdate(n)}},this.getNewIrisContent=async()=>{this.getImageHotSpotsData(!0)},(0,N.N)()&&(this.connector=e,this.fallbackImageURL=t,this.dislikeCountWasIncremented=!0,this.updatedImageCallback=n,this.notifyOnCallCompletion=i,this.irisFallbackTitle=o,this.newIrisSurfaceInfo=void 0,this.getImageHotSpotsData())}loadImageHotSpots(){return this.irisFetchPromise}updateImageMetadata(e,t,n){e&&t&&n&&(this.irisImageURL=e,this.museumCard=t,this.irisStateInfo=n,this.updatedImageCallback())}async getImageHotSpotsData(e){this.irisFetchPromise=new Promise((async(t,n)=>{const i=!(0,U.isNullOrUndefined)(e)&&e,o={credits:null,irisButtons:{likeClicked:!1,dislikeClicked:!1},isDisplayed:!1,title:null,titleURL:null},a={};let s,c;if(this.irisDataConnector=await(0,_.oU)(p.z.IrisData),!this.irisDataConnector)return O.i.trackAppErrorEvent({...r._c7,message:"No Iris data connector for background image"}),void n();if(i){if(!L.Vv.addImageCreativeToDislikeList()&&!this.newIrisSurfaceInfo)return void t()}if(c=e?await this.handleDislike():await this.populateSurfaceInfo(),(0,U.isNullOrUndefined)(c)||(0,U.isNullOrUndefined)(c.creatives)||c.creatives.length<=0)return s=this.fallbackImageURL,o.title=this.museumBarText,a.disableMuseumCard=!0,O.i.trackAppErrorEvent({...r.sd_,message:`No creative in surface info. Triggered by dislike: ${i}. Surface info: ${c}`}),this.updateImageMetadata(s,o,a),this.notifyOnCallCompletion&&F.f.irisImageUpdated.getActionSender(this.connector).send(),void n();const d=c.creatives[0],l={title:d.content.title||"",credits:d.content.copyright||"",titleURL:d.content.cta},u={titleLink:d.content.cta,ctaType:d.content.cta_type,creativeId:d.content.creativeId,placementId:c.placement,impTelemetry:d.telemetry?d.telemetry.impressionUrl:null,actTelemetry:d.telemetry?d.telemetry.actionUrl:null,hsList:q(d)};s=d.content.LANDSCAPE,Object.assign(o,l),Object.assign(a,u),(0,U.isNullOrUndefined)(a.impTelemetry)||(i?x.c.sendActionUpdate(a.impTelemetry):((0,W.F_)().then((()=>{this.irisDataConnector.fetchedNewImage()&&x.c.sendActionUpdate(a.impTelemetry)})),this.updateImageMetadata(s,o,a)),this.updateImageMetadata(s,o,a),this.notifyOnCallCompletion&&F.f.irisImageUpdated.getActionSender(this.connector).send()),t()})),this.irisFetchPromise}async populateSurfaceInfo(){if(!window.isSSREnabled)return await this.irisDataConnector.getImagePayload();let e;const t=await this.irisDataConnector.tryGetPreviousImagePayload();return t?(e=t,this.newIrisSurfaceInfo=await this.irisDataConnector.getImagePayload()):e=await this.irisDataConnector.getImagePayload(),e}async handleDislike(){if(!window.isSSREnabled||!this.newIrisSurfaceInfo)return await this.irisDataConnector.getImagePayload(!0);const e=this.newIrisSurfaceInfo;return this.newIrisSurfaceInfo=void 0,this.irisDataConnector.clearPreviousImagePayload(),e}getNewImageUrl(){const e=this.newIrisSurfaceInfo.creatives;if(!e||!e.length)return"";return(e[0]&&e[0].content).LANDSCAPE}}const q=e=>{if((0,U.isNullOrUndefined)(e)||(0,U.isNullOrUndefined)(e.content)||(0,U.isNullOrUndefined)(e.content.hs)||0===e.content.hs.length)return null;const t=[];return e.content.hs.forEach((e=>{t.push(e)})),t},G=e=>{let t="",n="";switch(e){case H.alert:t="-8 -8 40 40",n="M12,1.99622391 C16.0499218,1.99622391 19.3566662,5.19096617 19.4958079,9.24527692 L19.5,9.49622391 L19.5,13.5931945 L20.8800025,16.7492056 C20.949058,16.9071328 20.9847056,17.0776351 20.9847056,17.25 C20.9847056,17.9403559 20.4250615,18.5 19.7347056,18.5 L15,18.5014962 C15,20.1583504 13.6568542,21.5014962 12,21.5014962 C10.4023191,21.5014962 9.09633912,20.2525762 9.00509269,18.6777689 L8.99954674,18.4992239 L4.27486429,18.5 C4.10352557,18.5 3.93401618,18.4647755 3.7768624,18.3965139 C3.14366026,18.121475 2.85331154,17.3852002 3.1283504,16.7519981 L4.5,13.594148 L4.50000001,9.4961162 C4.50059668,5.34132493 7.85208744,1.99622391 12,1.99622391 Z M13.4995467,18.4992239 L10.5,18.5014962 C10.5,19.3299233 11.1715729,20.0014962 12,20.0014962 C12.7796961,20.0014962 13.4204487,19.4066081 13.4931334,18.6459562 L13.4995467,18.4992239 Z M12,3.49622391 C8.67983848,3.49622391 6.00047762,6.17047646 6,9.49622391 L6,13.905852 L4.65602014,17 L19.3525351,17 L18,13.9068055 L18.0001102,9.5090803 L17.9963601,9.28387824 C17.8853006,6.05040449 15.2415749,3.49622391 12,3.49622391 Z";break;case H.edit:t="-8 -8 40 40",n="M21.0303301,2.96966991 C22.4277928,4.36713263 22.4277928,6.63286737 21.0303301,8.03033009 L9.06200371,19.9986565 C8.78512854,20.2755316 8.44079112,20.4753584 8.06302761,20.5783848 L2.94733805,21.9735729 C2.38746387,22.1262658 1.87373417,21.6125361 2.02642713,21.0526619 L3.4216152,15.9369724 C3.52464161,15.5592089 3.72446837,15.2148715 4.00134354,14.9379963 L15.9696699,2.96966991 C17.3671326,1.5722072 19.6328674,1.5722072 21.0303301,2.96966991 Z M15.0001717,6.06057288 L5.06200371,15.9986565 C4.96971199,16.0909482 4.90310306,16.2057273 4.86876093,16.3316485 L3.81891446,20.1810855 L7.6683515,19.1312391 C7.79427267,19.0968969 7.90905181,19.030288 8.00134354,18.9379963 L17.9391717,8.99957288 L15.0001717,6.06057288 Z M17.0303301,4.03033009 L16.0601717,4.99957288 L18.9991717,7.93957288 L19.9696699,6.96966991 C20.7813462,6.15799363 20.7813462,4.84200637 19.9696699,4.03033009 C19.1579936,3.21865381 17.8420064,3.21865381 17.0303301,4.03033009 Z";break;case H.globe:t="-5 -5 26 26",n="M7.93868 0H8.06132C10.6629 0 12.8409 1.14472 14.5951 3.43415C15.5317 4.87619 16 6.3777 16 7.93868V8.06132C16 10.6629 14.8553 12.8409 12.5659 14.5951C11.1238 15.5317 9.6223 16 8.06132 16H7.93868C5.33705 16 3.15912 14.8553 1.40488 12.5659C0.468293 11.1312 0 9.62973 0 8.06132V7.93868C0 5.33705 1.14472 3.15912 3.43415 1.40488C4.86876 0.468293 6.37027 0 7.93868 0ZM4.89477 5.32962H11.1052C10.9268 4.46736 10.715 3.72404 10.4697 3.09965C9.74123 1.47921 8.90871 0.66899 7.97213 0.66899C7.08757 0.66899 6.28478 1.46806 5.56376 3.0662C5.29617 3.66829 5.07317 4.42276 4.89477 5.32962ZM1.20418 5.32962H4.17003C4.21463 5.32962 4.31498 4.93194 4.47108 4.13659C4.90221 2.72427 5.43368 1.65761 6.06551 0.936585H6.03206C4.11429 1.56098 2.69082 2.62764 1.76167 4.13659C1.39001 4.82044 1.20418 5.21812 1.20418 5.32962ZM9.93449 0.936585C10.7001 1.79884 11.2985 3.14053 11.7296 4.96167C11.7296 5.20697 11.7631 5.32962 11.83 5.32962H14.7958C14.164 3.64971 12.997 2.36376 11.2948 1.47178C10.8636 1.24878 10.4102 1.07038 9.93449 0.936585ZM0.936585 5.99861C0.758188 6.79396 0.66899 7.47038 0.66899 8.02787C0.66899 8.5259 0.758188 9.18374 0.936585 10.0014H4.10314C4.03624 9.22091 4.00279 8.60767 4.00279 8.16167V7.83833C4.00279 7.39233 4.03624 6.77909 4.10314 5.99861H0.936585ZM4.80557 5.99861C4.71638 6.77909 4.67178 7.45552 4.67178 8.02787C4.67178 8.54077 4.71638 9.19861 4.80557 10.0014H11.2056C11.2873 9.22091 11.3282 8.54448 11.3282 7.97213C11.3282 7.45923 11.2873 6.80139 11.2056 5.99861H4.80557ZM11.8969 5.99861C11.9638 6.77909 11.9972 7.39233 11.9972 7.83833V8.16167C11.9972 8.60767 11.9638 9.22091 11.8969 10.0014H15.0634C15.2418 9.20604 15.331 8.52962 15.331 7.97213C15.331 7.4741 15.2418 6.81626 15.0634 5.99861H11.8969ZM1.20418 10.6704C1.82857 12.3503 2.99559 13.6362 4.70523 14.5282C5.06945 14.7364 5.52288 14.9148 6.06551 15.0634C5.23299 14.1343 4.61231 12.6699 4.20348 10.6704H1.20418ZM4.89477 10.6704C5.07317 11.5326 5.28502 12.276 5.53031 12.9003C6.25877 14.5208 7.09129 15.331 8.02787 15.331C9.03879 15.331 9.93078 14.3089 10.7038 12.2648C10.793 11.9972 10.9268 11.4657 11.1052 10.6704H4.89477ZM9.93449 15.0634H9.96794C11.7816 14.4911 13.1494 13.5024 14.0711 12.0976C14.4056 11.5995 14.6472 11.1238 14.7958 10.6704H11.83C11.7854 10.6704 11.6962 11.0235 11.5624 11.7296C11.1461 13.1791 10.6035 14.2904 9.93449 15.0634Z";break;case H.lightbulb:t="-8 -8 40 40",n="M12.000008,2.00139734 C16.0040628,2.00139734 19.249992,5.24733208 19.249992,9.25139734 C19.249992,11.3474567 18.3493333,13.2711054 16.5869535,14.9933011 C16.5100054,15.0685004 16.450441,15.1590617 16.4118457,15.2586031 L16.380373,15.3609016 L15.2492957,20.256497 C15.0265913,21.2204195 14.2034707,21.9187611 13.2302558,21.9933796 L13.0570456,22 L10.9432689,22 C9.95374997,22 9.08791486,21.3549492 8.79629808,20.4232534 L8.75088874,20.2559339 L7.62132399,15.3611533 C7.58904306,15.2212595 7.51728321,15.0935695 7.41456824,14.9932517 C5.73516207,13.3530399 4.83779011,11.5301519 4.75613429,9.54965138 L4.750008,9.25139734 L4.75388322,9.01208292 C4.88014853,5.11879041 8.07602134,2.00139734 12.000008,2.00139734 Z M14.115008,18.4993973 L9.884008,18.4993973 L10.2124755,19.9186446 C10.2831529,20.2249131 10.5356676,20.4507962 10.8400612,20.4929101 L10.9432689,20.5 L13.0570456,20.5 C13.3712985,20.5 13.6481364,20.3048226 13.757662,20.0177756 L13.7877956,19.9188323 L14.115008,18.4993973 Z M12.000008,3.50139734 C8.89821922,3.50139734 6.37007083,5.95741111 6.25416008,9.03084139 L6.250008,9.25139734 L6.25672343,9.52840679 C6.33286953,11.0917695 7.05722352,12.5475342 8.46263227,13.9201432 C8.72676013,14.1781068 8.92266257,14.4964075 9.03423135,14.8463815 L9.08291336,15.0238752 L9.538008,16.9993973 L14.461008,16.9993973 L14.9188729,15.023237 C15.0019011,14.6638694 15.1717664,14.3313677 15.4124215,14.0542893 L15.5385739,13.9205009 C16.9431998,12.547902 17.6671738,11.0920338 17.7432801,9.5284475 L17.749992,9.25139734 L17.7458399,9.03084154 C17.6299293,5.9574132 15.1017833,3.50139734 12.000008,3.50139734 Z";break;case H.meetNow:break;case H.news:t="-5 -5 25 25",n="M16 4V11C16 11.276 15.9453 11.5365 15.8359 11.7812C15.7318 12.0208 15.5885 12.2318 15.4062 12.4141C15.2292 12.5911 15.0182 12.7344 14.7734 12.8438C14.5286 12.9479 14.2708 13 14 13H1.94531C1.67969 13 1.42708 12.9479 1.1875 12.8438C0.953125 12.7396 0.747396 12.6016 0.570312 12.4297C0.398438 12.2526 0.260417 12.0469 0.15625 11.8125C0.0520833 11.5729 0 11.3203 0 11.0547V2H14V4H16ZM15 5H14V10.5C14 10.6354 13.9505 10.7526 13.8516 10.8516C13.7526 10.9505 13.6354 11 13.5 11C13.3646 11 13.2474 10.9505 13.1484 10.8516C13.0495 10.7526 13 10.6354 13 10.5V3H1V11.0547C1 11.1849 1.02344 11.3073 1.07031 11.4219C1.1224 11.5365 1.1901 11.638 1.27344 11.7266C1.36198 11.8099 1.46354 11.8776 1.57812 11.9297C1.69271 11.9766 1.8151 12 1.94531 12H14C14.1406 12 14.2708 11.974 14.3906 11.9219C14.5104 11.8698 14.6146 11.7995 14.7031 11.7109C14.7969 11.6172 14.8698 11.5104 14.9219 11.3906C14.974 11.2708 15 11.1406 15 11V5ZM12 5H2V4H12V5ZM12 11H8V10H12V11ZM12 9H8V8H12V9ZM12 7H8V6H12V7ZM7 11H2V5.97656H7V11ZM3 10H6V6.97656H3V10Z";break;default:t="-12 -12 40 40",n="M10.5 0C11.0052 0 11.4922 0.0651042 11.9609 0.195312C12.4297 0.325521 12.8672 0.510417 13.2734 0.75C13.6797 0.989583 14.0495 1.27865 14.3828 1.61719C14.7214 1.95052 15.0104 2.32031 15.25 2.72656C15.4896 3.13281 15.6745 3.57031 15.8047 4.03906C15.9349 4.50781 16 4.99479 16 5.5C16 6.00521 15.9349 6.49219 15.8047 6.96094C15.6745 7.42969 15.4896 7.86719 15.25 8.27344C15.0104 8.67969 14.7214 9.05208 14.3828 9.39062C14.0495 9.72396 13.6797 10.0104 13.2734 10.25C12.8672 10.4896 12.4297 10.6745 11.9609 10.8047C11.4922 10.9349 11.0052 11 10.5 11C9.84896 11 9.22396 10.8906 8.625 10.6719C8.03125 10.4531 7.48438 10.138 6.98438 9.72656L0.851562 15.8516C0.752604 15.9505 0.635417 16 0.5 16C0.364583 16 0.247396 15.9505 0.148438 15.8516C0.0494792 15.7526 0 15.6354 0 15.5C0 15.3646 0.0494792 15.2474 0.148438 15.1484L6.27344 9.01562C5.86198 8.51562 5.54688 7.96875 5.32812 7.375C5.10938 6.77604 5 6.15104 5 5.5C5 4.99479 5.0651 4.50781 5.19531 4.03906C5.32552 3.57031 5.51042 3.13281 5.75 2.72656C5.98958 2.32031 6.27604 1.95052 6.60938 1.61719C6.94792 1.27865 7.32031 0.989583 7.72656 0.75C8.13281 0.510417 8.57031 0.325521 9.03906 0.195312C9.50781 0.0651042 9.99479 0 10.5 0ZM10.5 10C11.1198 10 11.7031 9.88281 12.25 9.64844C12.7969 9.40885 13.2734 9.08594 13.6797 8.67969C14.0859 8.27344 14.4062 7.79688 14.6406 7.25C14.8802 6.70312 15 6.11979 15 5.5C15 4.88021 14.8802 4.29688 14.6406 3.75C14.4062 3.20312 14.0859 2.72656 13.6797 2.32031C13.2734 1.91406 12.7969 1.59375 12.25 1.35938C11.7031 1.11979 11.1198 1 10.5 1C9.88021 1 9.29688 1.11979 8.75 1.35938C8.20312 1.59375 7.72656 1.91406 7.32031 2.32031C6.91406 2.72656 6.59115 3.20312 6.35156 3.75C6.11719 4.29688 6 4.88021 6 5.5C6 6.11979 6.11719 6.70312 6.35156 7.25C6.59115 7.79688 6.91406 8.27344 7.32031 8.67969C7.72656 9.08594 8.20312 9.40885 8.75 9.64844C9.29688 9.88281 9.88021 10 10.5 10Z"}return{viewBoxString:t,svgString:n}},V=(e,t)=>!(!e||!t)&&(e===E.W.offPageNavigation&&z(t)),z=e=>/^((microsoft-edge:)?https:\/\/((www)|(cn)|(go))\.((msn)|(bing)|(skype)|(microsoft))\.com)|(edge:\/\/)/.test(e);var j,K=n(70280),Q=n(58968),J=n(99452),Y=n(42590),Z=n(84515),X=n(66415),ee=n(88762);!function(e){e.offPageNavigation="nav-newtab",e.inPageNavigation="nav-inpage",e.executeAction="execute-action"}(j||(j={}));var te=n(88826),ne=n(21930),ie=n(87574),re=n(95153),oe=n(78672),ae=n(32614),se=n(95063),ce=n(40860),de=n(64726);class le{constructor(e,t){if(this.dayNow=(new Date).getDay(),this.firstFrameHidden=!1,this.isEnergySaverMode=!1,this.isGalleryEnabled=!1,this.isPlaying=!1,this.isReducedMotionActive=!1,this.isTomorrowsVideoCached=!1,this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion)"),this.showVideo=!1,this.showToast=!1,this.storageKey="bkgdV",this.timeNow=(new Date).getTime(),this.batteryChargingChange=()=>{this.battery.charging&&(this.currentTrigger?this.playVideo("Battery"):this.playVideo("Timer"))},this.playVideo=async e=>{!this.config.isTest&&this.showVideo&&e&&"Button"===e&&(await this.batteryPromise,e!==this.currentTrigger&&"Button"!==e||this.battery&&!this.battery.charging&&"Button"!==e||this.isPlaying||this.isReducedMotionActive&&"Button"!==e?this.battery.charging||(this.currentTrigger="Battery"):(0,de.eC)().then((()=>{const e=1e3*this.config.pauseTime;this.videoTimer&&this.videoTimer.timer&&clearTimeout(this.videoTimer.timer),this.isGalleryEnabled&&this.isEnergySaverMode&&!this.isBandwidthAdequateForVideo()?this.pauseVideo("Network"):(this.videoTimer.remainingTime<=0&&(this.videoTimer.remainingTime=e),this.videoTimer.startTime=Date.now(),this.videoTimer.timer=n.g.setTimeout((()=>{(this.isGalleryEnabled||!this.battery.charging)&&(!this.isGalleryEnabled||this.isEnergySaverMode)?this.pauseVideo("Timer"):this.playVideo("Timer")}),this.videoTimer.remainingTime),this.handleVideoPlay())})))},this.handleVideoPlay=()=>{this.isPlaying=!1,requestAnimationFrame((()=>{this.isReducedMotionActive=!1,this.backgroundImageWC.ref_video.play().then((()=>{this.isPlaying=!0})).catch((e=>{(0,te.OO)(e,r.N1Y,"Failed to trigger play.","Timer: "+JSON.stringify(this.videoTimer)+". Current trigger: "+this.currentTrigger+". Show video: "+this.showVideo),this.isPlaying=!1})).finally((()=>{this.backgroundImageWC.updateProperties()}))}))},this.pauseVideo=e=>{if(this.isPlaying&&this.showVideo){this.currentTrigger=e,this.videoTimer&&this.videoTimer.timer&&(clearTimeout(this.videoTimer.timer),this.videoTimer.remainingTime-=Date.now()-this.videoTimer.startTime),this.isPlaying=!1,this.backgroundImageWC.updateProperties();try{this.backgroundImageWC.ref_video.pause()}catch(e){(0,te.OO)(e,r.FtH,"Failed to trigger pause.","Timer: "+JSON.stringify(this.videoTimer)+". Current trigger: "+this.currentTrigger+". Show video: "+this.showVideo)}}},this.reducedMotionChange=()=>{this.isReducedMotionActive=this.prefersReducedMotion.matches},this.showToastMessage=(e,t)=>{this.showToast=!0,this.toastMessage=e,t&&this.pauseVideo("Battery"),this.shouldSkipShowToast()?this.hideToastMessage():(this.backgroundImageWC.updateProperties(),n.g.setTimeout((()=>{this.hideToastMessage()}),5e3))},this.hideToastMessage=()=>{this.showToast=!1,this.toastMessage=null,this.backgroundImageWC.updateProperties()},this.shouldSkipShowToast=()=>{var e;const t="off"===(null===(e=this.backgroundImageWC.chromiumPageSettingsState)||void 0===e?void 0:e.selectedQuickLinksDisplaySetting);return"always"===this.backgroundImageWC.chromiumPageSettingsState.selectedFeedDisplaySetting&&t},this.config=e,this.backgroundImageWC=t,!(0,N.N)())return;if(this.topSitesLayoutDataConnector=(0,_.K0)(p.z.TopSitesLayoutData),this.isGalleryEnabled=!t.config.disableBackgroundGallery&&se.p.getBackgroundGalleryEligibility(),this.isGalleryEnabled){this.backgroundDataConnector=(0,_.K0)(p.z.BackgroundData);const e=this.backgroundDataConnector.getCurrentState();this.isEnergySaverMode=!(0,U.isNullOrUndefined)(e)&&"energySaver"===e.selectedVideoSetting,F.f.videoSettingsUpdated.registerObserver((e=>{const t=e&&e.params;if(!t||!t.length)return;const n=t[0];this.isEnergySaverMode="energySaver"===n}))}this.videoTimer={remainingTime:-1,startTime:-1,timer:null},this.assignVideoSchedule();const i=window&&window.navigator;this.deviceLogicalProcessors=i?i.hardwareConcurrency:-1,this.deviceMemoryGB=i?i.deviceMemory:-1,this.batteryPromise=i.getBattery().then((e=>{this.battery=e})),this.deviceLogicalProcessors<=2||this.deviceMemoryGB<4?this.showVideo=!1:(this.showVideo=this.shouldShowVideo(),this.showVideo&&this.setVideoAndMuseumCardProperties(),this.config.isTest||Promise.all([(0,ne.e3)(),(0,W.F_)()]).then((()=>{this.cacheNextVideo()})))}setVideoAndMuseumCardProperties(){this.defineResolution(),this.videoSource=this.getVideoURL(this.videoId),this.firstFrameSource=this.getFirstFrameURL(this.videoId);const e="video"+this.videoId;this.videoSource&&this.firstFrameSource&&(this.museumCard={credits:this.config.data[this.videoId].attribution,isDisplayed:!0,irisButtons:{likeClicked:!1,dislikeClicked:!1},title:this.backgroundImageWC.config.localizedStrings.video_titles[e],titleURL:null})}assignBackgroundUsingIndex(e){window.isSSREnabled&&this.defineResolution(),this.videoId=Number(e),this.setVideoAndMuseumCardProperties()}getCurrentBackgroundVideoId(){return this.videoId}assignVideoSchedule(){const e=this.getVideoData();e&&e.schedule?(this.schedule=e.schedule,this.scheduleFixed=e.scheduleFixed,this.checkAndGenerateVideoSchedule(),this.reRandomizeSchedule(e)):this.isGalleryEnabled?this.generateFilteredVideoSchedule():this.generateVideoSchedule()}checkAndGenerateVideoSchedule(){for(let e=0;e<this.schedule.length;e++){const t=this.schedule[e];if(this.config.data[t]&&this.config.data[t].removeContent||t>-1&&!this.validateCurrentIndex(t,!0)){this.isGalleryEnabled?this.generateFilteredVideoSchedule():this.generateVideoSchedule();break}}}validateCurrentIndex(e,t=!1){const n=!(0,U.isNullOrUndefined)(e)&&e<this.config.data.length&&!!this.config.data[e];return!n&&t&&(0,te.H)(r.FEC,"Error validating video configuration index: "+e),n}cacheNextVideo(){const e=new Date;e.setDate(e.getDate()+1);const t=e.getDay(),n=this.getVideoData();if(!(n&&n.cachedVideoId===this.schedule[t]||se.p.getDailyRotationOnlySimpleImages()&&this.backgroundImageWC.config.simpleImages)&&this.schedule[t]>=0&&this.config.enableFeature){const e=this.schedule[t];try{const t=this.getVideoURL(e),i=this.getFirstFrameURL(e);if(!t||!i)return;fetch(t),fetch(i),this.isTomorrowsVideoCached=!0,this.storeVideoData({cachedVideoId:e,lastUpdatedTime:null==n?void 0:n.lastUpdatedTime,schedule:null==n?void 0:n.schedule,scheduleFixed:null==n?void 0:n.scheduleFixed})}catch(t){(0,te.H)(r.LWq,"Video caching failed. Video url: "+this.getVideoURL(e)+" First frame url: "+this.getFirstFrameURL(e),"Error: "+t)}}}defineResolution(){const e=new re.fH,t=(0,re.Nd)(e.data.innerHeight,"innerHeight"),n=(0,re.Nd)(e.data.innerWidth,"innerWidth"),i=(0,oe.x_)()||1,r=(window.screen&&window.screen.height?window.screen.height:t+150)*i,o=(window.screen&&window.screen.width?window.screen.width:n)*i;this.currentResolution=r<=720||o<=1280?"720":720<r&&r<=1080||1280<o&&o<=1920?"1080":1080<r&&r<2e3||1920<o&&o<3e3?"1440":r>=2e3||o>=3e3?"2160":"1440"}error(){this.showVideo=!1}generateVideoSchedule(){const e=[];for(let t=0;t<this.config.data.length;t++)e[t]=!1;this.schedule=[-1,-1,-1,-1,-1,-1,-1],this.scheduleFixed=[-1,-1,-1,-1,-1,-1,-1];for(let t=0;t<this.config.videosPerWeek;t++){let n=Math.floor(Math.random()*this.config.data.length);if(e[n]||!this.config.data[n]||this.config.data[n].skipRotation||this.config.data[n].removeContent)do{n===this.config.data.length-1?n=0:n++}while(e[n]||!this.config.data[n]||this.config.data[n].skipRotation||this.config.data[n].removeContent);this.schedule[t]=n,e[n]=!0}(0,ce.Z)(this.schedule),this.scheduleFixed=this.schedule;const t=this.getVideoData();this.storeVideoData({cachedVideoId:null!=t&&t.cachedVideoId?t.cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed})}generateFilteredVideoSchedule(){const e=[],t=se.p.getLikeAndDislikeCacheByType(ie.wI.videoDislikes);for(let n=0;n<this.config.data.length;n++)t.has(String(n))||e.push(n);const n=[];for(let t=0;t<e.length;t++)n[t]=!1;this.schedule=[-1,-1,-1,-1,-1,-1,-1],this.scheduleFixed=[-1,-1,-1,-1,-1,-1,-1];const i=Math.min(e.length,this.config.videosPerWeek);for(let t=0;t<i;t++){let i=Math.floor(Math.random()*e.length);if(n[i]||!this.config.data[i]||this.config.data[i].skipRotation||this.config.data[i].removeContent)do{i===e.length-1?i=0:i++}while(n[i]||!this.config.data[i]||this.config.data[i].skipRotation||this.config.data[i].removeContent);this.schedule[t]=e[i],n[i]=!0}(0,ce.Z)(this.schedule),this.scheduleFixed=this.schedule;const r=this.getVideoData();this.storeVideoData({cachedVideoId:null!=r&&r.cachedVideoId?r.cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed})}getFirstFrameURL(e){var t;if(!this.config.data[e])return null;let n;switch(this.currentResolution){case"720":n=this.config.data[e].firstFrame.i720;break;case"1080":n=this.config.data[e].firstFrame.i1080;break;case"1440":n=this.config.data[e].firstFrame.i1440;break;case"2160":n=this.config.data[e].firstFrame.i2160}return(0,N.N)()&&(this.isGalleryEnabled?this.isGalleryEnabled&&(n=this.isEnergySaverMode?this.config.data[e].firstFrame.i720:n):n=this.shouldReduceTo1080()?this.config.data[e].firstFrame.i1080:n),n=null!==(t=this.backgroundImageWC.config)&&void 0!==t&&t.useImgGenerator?(0,ae.zz)(n,{width:0,height:0,enableDpiScaling:!1}):ie.qR+n+".img",n}getVideoData(){try{return(0,P.$o)().getObject(this.storageKey)}catch(e){return(0,te.H)(r.eEQ,"Local storage for video data failed."),null}}getVideoURL(e){var t;if(!this.config.data[e])return null;let n;switch(this.currentResolution){case"720":n=this.config.data[e].video.v720;break;case"1080":n=this.config.data[e].video.v1080;break;case"1440":n=this.config.data[e].video.v1440;break;case"2160":n=this.config.data[e].video.v2160}return(0,N.N)()&&(this.isGalleryEnabled?this.isGalleryEnabled&&(n=this.isEnergySaverMode?this.config.data[e].video.v720:n):n=this.shouldReduceTo1080()?this.config.data[e].video.v1080:n),n=null!==(t=this.backgroundImageWC.config)&&void 0!==t&&t.useImgGenerator?(0,ae.QG)(n):ie.Od+n+".mp4",n}removeVideoForToday(){const e=this.getVideoData();e&&e.schedule&&(e.schedule[this.dayNow]=-1,this.showVideo=!1,this.storeVideoData(e))}removeVideoFromLocalStorage(e){const t=this.getVideoData(),n=Number(e);let i=!1;if(t&&t.schedule){for(let e=0;e<t.schedule.length;e++)t.schedule[e]===n&&(t.schedule[e]=-1,i=e===this.dayNow);this.storeVideoData(t)}return i}reRandomizeSchedule(e){e.lastUpdatedTime<this.timeNow-6048e5&&(this.isGalleryEnabled?this.generateFilteredVideoSchedule():this.generateVideoSchedule())}shouldShowVideo(){const e=se.p.getBackgroundSettingsPreferencesCache(),t=this.backgroundImageWC.dailyRotationEnabled(e);if(this.backgroundImageWC.ssrRotationMismatch&&t&&"Video"===this.backgroundImageWC.ssrBackgroundMetadata.provider)return!0;if(e&&!e.includeVideoBackgroundsInRotation)return!1;const n=this.schedule&&this.schedule[this.dayNow];return!!(n>-1&&this.validateCurrentIndex(n)&&this.config.enableFeature&&this.config.data)&&(this.videoId=this.schedule[this.dayNow],!0)}shouldReduceTo1080(){const e=this.isBandwidthAdequateForVideo(),t=this.deviceMemoryGB>=4;return(!e||!t)&&(this.currentResolution="1080",!0)}isBandwidthAdequateForVideo(){return"4g"===window.navigator.connection.effectiveType}storeVideoData(e){try{(0,P.$o)().setObject(this.storageKey,e)}catch(e){return void(0,te.H)(r.ybt,"Local storage for video data failed.")}}unloadVideo(){this.batteryPromise.then((()=>{this.battery.removeEventListener("chargingchange",this.batteryChargingChange)})),this.prefersReducedMotion.removeEventListener("change",this.reducedMotionChange)}videoLoaded(){this.firstFrameHidden=!0,this.backgroundImageWC.updateProperties();const e=this.getVideoData();e&&e.cachedVideoId<0&&R.M0.addOrUpdateTmplString("videoFirstLoad"),this.isReducedMotionActive=this.prefersReducedMotion.matches,!this.isReducedMotionActive&&this.deviceMemoryGB>=4&&(this.isPlaying=!1,this.playVideo("Timer")),this.batteryPromise.then((()=>{this.battery.addEventListener("chargingchange",this.batteryChargingChange)})),this.prefersReducedMotion.addEventListener("change",this.reducedMotionChange)}}var ue=n(47266),pe=n(10754),he=n(20009),ge=n(98619),me=n(50632),fe=n(40378),ve=n(15420),ye=n(59952),Se=n(68963);class Ce{constructor(e,t){this.showImageInRotation=!1,this.dayNow=(new Date).getDay(),this.darkModeQuery=window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)"),this.config=e,this.backgroundImageWC=t,(0,N.N)()&&(this.cmsSize=se.p.getCMSImageSize(),this.showImageInRotation=!(!this.backgroundImageWC.config.simpleImages||!se.p.getDailyRotationOnlySimpleImages())&&this.shouldShowImageInRotation(),this.showImageInRotation&&this.setImageAndMuseumCardProperties())}shouldShowImageInRotation(){if(this.backgroundImageWC.simpleSchedule){const e=this.backgroundImageWC.simpleSchedule,t=e&&e[this.dayNow];if(t>-1&&this.validateCurrentIndex(t)&&this.config.data)return this.imageId=e[this.dayNow],!0}return!1}setImageAndMuseumCardProperties(){if(this.defineResolution(),this.imageSource=this.getImageURL(this.imageId),!this.imageSource)return;const e=this.imageId<this.cmsSize?"image"+this.imageId:"simple";this.museumCard={credits:this.config.data[this.imageId].attribution,isDisplayed:!0,irisButtons:{likeClicked:!1,dislikeClicked:!1},title:this.backgroundImageWC.config.localizedStrings.cmsimage_titles[e]||"",titleURL:null}}assignBackgroundUsingIndex(e){this.imageId=Number(e),this.setImageAndMuseumCardProperties()}assignHolidayBackground(e){this.defineResolution();const{enableEventGleamImage:t}=this.backgroundImageWC.config;this.imageSource=t?this.getEventImageURL(e):this.getHolidayImageURL(),this.imageSource&&(this.museumCard={credits:this.backgroundImageWC.config.holidayImage.attribution,isDisplayed:!0,irisButtons:{likeClicked:!1,dislikeClicked:!1},title:null,titleURL:null})}getHolidayImageURL(){if(!this.backgroundImageWC.config.holidayImage)return null;let e;switch(this.currentResolution){case"720":e=this.darkModeQuery.matches?this.backgroundImageWC.config.holidayImage.dark.i720:this.backgroundImageWC.config.holidayImage.light.i720;break;case"1080":e=this.darkModeQuery.matches?this.backgroundImageWC.config.holidayImage.dark.i1080:this.backgroundImageWC.config.holidayImage.light.i1080;break;case"1440":e=this.darkModeQuery.matches?this.backgroundImageWC.config.holidayImage.dark.i1440:this.backgroundImageWC.config.holidayImage.light.i1440;break;case"2160":e=this.darkModeQuery.matches?this.backgroundImageWC.config.holidayImage.dark.i2160:this.backgroundImageWC.config.holidayImage.light.i2160}return e=ie.qR+e+".img",e}getEventImageURL(e){const t=e?{DarkGleamUrl:this.backgroundImageWC.ssrBackgroundMetadata.dark,LightGleamUrl:this.backgroundImageWC.ssrBackgroundMetadata.light}:this.backgroundImageWC.eventGleam;return t?this.darkModeQuery.matches?t.DarkGleamUrl:t.LightGleamUrl:null}getImageURL(e){if(!this.config.data[e])return null;let t;switch(this.currentResolution){case"720":t=this.config.data[e].image.i720;break;case"1080":t=this.config.data[e].image.i1080;break;case"1440":t=this.config.data[e].image.i1440;break;case"2160":t=this.config.data[e].image.i2160}return t=ie.qR+t+".img",t}defineResolution(){const e=new re.fH,t=(0,re.Nd)(e.data.innerHeight,"innerHeight"),n=(0,re.Nd)(e.data.innerWidth,"innerWidth"),i=(0,oe.x_)()||1,r=(window.screen&&window.screen.height?window.screen.height:t+150)*i,o=(window.screen&&window.screen.width?window.screen.width:n)*i;this.currentResolution=r<=720||o<=1280?"720":720<r&&r<=1080||1280<o&&o<=1920?"1080":1080<r&&r<2e3||1920<o&&o<3e3?"1440":r>=2e3||o>=3e3?"2160":"1440"}validateCurrentIndex(e,t=!1){var n,i,o;null!==(n=this.backgroundImageWC)&&void 0!==n&&n.config&&this.backgroundImageWC.config.simpleImages&&(null===(i=this.config)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.length)!=(null===(o=this.backgroundImageWC.config.cmsImage)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.length)&&(this.config.data=this.backgroundImageWC.config.cmsImage.data);const a=!(0,U.isNullOrUndefined)(e)&&e<this.config.data.length&&!!this.config.data[e];return!a&&t&&(0,te.H)(r.FEC,"Error validating CMS Image configuration index: "+e),a}}var we=n(82486),be=n(67213),Te=n(62929),ke=n(16614),Pe=n(77195),Ae=n(88672),Ie=n(53629);const Ee="vp"===(0,m.L)().get("reqsrc")||!!(0,m.L)().get("vptest");class Me extends ue.l{constructor(){super(...arguments),this.hotSpots=[],this.eventLocalStorage=f.Q.getInstance(),this.imageOverrideStyles="",this.isFeedDisplayAlwaysOn=!1,this.isFRE=v.jG.IsFrePage,this.isTestRunning=!1,this.isReducedMotionActive=!1,this.isTTVRFired=!1,this.isLoadComplete=!1,this.hasFeedDisplayChanged=!1,this.museumCreditsCardIsShown=!1,this.isChinaCompliance=(0,v.Yq)().IsChinaCompliance,this.telemetryTags={},this.videoPlaying=!1,this.spaceHolderHeight=null,this.bgBlurSize="0px",this.displayMarqueeAd=!1,this.marqueeAdTopHeight=null,this.marqueeAdHeight=null,this.marqueeAdOverlayHeight=null,this.loadImageHotSpotsErrorFired=!1,this.shouldUpdateMuseumCardVisibility=!0,this.shouldUpdateMarqueeAdDismissButtonVisibility=!0,this.renderHotSpots=!0,this.storageKey="bkgdV",this.timeNow=(new Date).getTime(),this.backgroundGalleryEligibility=!1,this.includeVideoBackgroundsInRotation=!1,this.isDarkMode=!1,this.imageEmptyChecked=!1,this.dayNow=(new Date).getDay(),this.holidayKey="holidayBkgd",this.darkModeQuery=window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)"),this.currentProviderChanged=(e,t)=>{var n,i;switch(this.imageOverrideStyles="",this.isLoadComplete=!1,"NoBackground"===t?(0,y.j3)("backgroundImage","hidden"):(0,y.j3)("backgroundImage","displayed"),t){case"Iris":this.checkAndCreateIrisProvider();break;case"Video":if(this.checkAndCreateVideoProvider(),(0,N.N)()&&this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"Video"===this.galleryBackgroundSelectionMetadata.provider&&(this.videoProvider.showVideo=this.videoProvider.validateCurrentIndex(Number(this.galleryBackgroundSelectionMetadata.configIndex),!0),!this.videoProvider.showVideo)){se.p.clearCachedBackground().then((()=>{this.defineCurrentProviderAndSync()}));break}this.videoProvider&&(this.videoProvider.showVideo||this.shouldOverrideWithPreviousRotation())?(window.addEventListener("blur",this.onWindowBlur,!1),window.addEventListener("focus",this.onWindowFocus,!1)):(0,N.N)()&&this.setProviderForRotation();break;case"CMSImage":if(this.checkAndCreateCMSImageProvider(),!(0,N.N)())return;this.holidayBackground&&this.config.holidayImage||this.cmsImageProvider.showImageInRotation||this.cmsImageProvider.validateCurrentIndex(Number(null===(n=this.galleryBackgroundSelectionMetadata)||void 0===n?void 0:n.configIndex),!0)||se.p.clearCachedBackground().then((()=>{this.defineCurrentProviderAndSync()}))}("Video"!==this.currentProvider&&this.videoProvider&&(this.videoProvider.isPlaying=!1),"Video"===e)&&((0,N.N)()&&(null===(i=this.videoProvider)||void 0===i||i.unloadVideo()),window.removeEventListener("blur",this.onWindowBlur,!1),window.removeEventListener("focus",this.onWindowFocus,!1));this.updateProperties()},this.animationComplete=()=>{this.calcMuseumBottom()},this.calcMuseumBottom=()=>{if(this.config.lazyMuseumCardPosition&&!0!==this.displayMarqueeAd&&!0!==this.museumCreditsCardIsShown)return;if(this.ref_museumCardContainer&&this.ref_museumCardContainer.classList.remove("museumCard_hide"),this.museumCreditsCardIsShown){var e,t,n,i,r,o;this.ref_floatButtonGroup=this.ref_floatButtonGroup??(null===(e=document)||void 0===e||null===(e=e.body)||void 0===e||null===(t=e.querySelector)||void 0===t||null===(t=t.call(e,"edge-chromium-page"))||void 0===t||null===(t=t.shadowRoot)||void 0===t||null===(n=t.querySelector)||void 0===n?void 0:n.call(t,"float-button-group"));const a=null===(i=this.ref_floatButtonGroup)||void 0===i||null===(i=i.shadowRoot)||void 0===i||null===(r=i.querySelector)||void 0===r?void 0:r.call(i,"div"),s=null!=a&&null!==(o=a.getBoundingClientRect())&&void 0!==o&&o.bottom?window.innerHeight-a.getBoundingClientRect().bottom-18:0;return void(this.museumBottom=s>0?7+s:7)}const a=this.getHeaderSpaceHolderHeight();null!==a&&(this.marqueeAdBottom=window.innerHeight-a+7,this.museumBottom=40)},this.createTelemetryTags=()=>{(0,U.isNullOrUndefined)(this.telemetryObject)?(0,te.H)(r.CgS,"Telemetry object is undefined"):(this.telemetryTags.hotSpots={},this.telemetryTags.video=this.telemetryObject.addOrUpdateChild({name:"BackgroundVideo"}).getMetadataTag(),this.backgroundGalleryEligibility&&(this.telemetryTags.backgroundGalleryButton=this.telemetryObject.addOrUpdateChild({name:"BackgroundGalleryButton",type:D.c9.Interaction,behavior:D.wu.Navigate,content:{headline:"Edit Background"}}).getMetadataTag()),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}]),this.imageEditButtonTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"ImageEditButtonButton",type:D.c9.Interaction,behavior:D.wu.More,content:{headline:"Edit Background"}}).getMetadataTag(),this.turnOnHolidaySwitchButtonTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"HolidaySwitchButton>TurnOn",type:D.c9.Interaction,behavior:D.wu.Follow,content:{headline:"Turn On Holiday Switch Background"}}).getMetadataTag(),this.turnOffHolidaySwitchButtonTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"HolidaySwitchButton>TurnOff",type:D.c9.Interaction,behavior:D.wu.Unfollow,content:{headline:"Turn Off Holiday Switch Background"}}).getMetadataTag())},this.defineCurrentProvider=()=>{var e,t,n,i;if(this.holidayBackground=(0,N.N)()?this.getHolidayBkgdData():this.ssrBackgroundMetadata.holiday,!(0,N.N)()||this.shouldOverrideWithPreviousRotation()){if(this.displayMarqueeAd)return void(this.currentProvider="MarqueeAd");if(this.holidayBackground&&this.config.holidayImage&&!this.config.enableEventGleamImage)return void(this.currentProvider="CMSImage");const e="off"===this.chromiumPageSettingsState.currentBackgroundImageType;return this.holidayBackground&&this.config.enableEventGleamImage&&this.ssrBackgroundMetadata.gleam&&"focused"!==this.chromiumPageSettingsState.currentLayout&&!e?void(this.currentProvider="CMSImage"):void(this.currentProvider=this.ssrBackgroundMetadata.provider)}if(null!==(e=this.config.video)&&void 0!==e&&e.isTest)return void(this.currentProvider="Video");if(null!==(t=this.config.simpleImages)&&void 0!==t&&t.isTest)return void(this.currentProvider="CMSImage");if(this.backgroundGalleryEligibility&&(this.galleryBackgroundSelectionMetadata=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.backgroundSelectionMetadata),this.includeVideoBackgroundsInRotation=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.includeVideoBackgroundsInRotation)),this.currentBackgroundMetadata=se.p.getCurrentBackgroundPreferenceCache(),this.holidayBackground&&this.config.holidayImage&&!this.config.enableEventGleamImage)return void(this.currentProvider="CMSImage");const o="off"===this.chromiumPageSettingsState.currentBackgroundImageType;if(this.holidayBackground&&this.config.enableEventGleamImage&&this.eventGleam&&"focused"!==this.chromiumPageSettingsState.currentLayout&&!o)this.currentProvider="CMSImage";else if("bing"!==this.chromiumPageSettingsState.currentBackgroundImageType&&"imageAndVideo"!==this.chromiumPageSettingsState.currentBackgroundImageType||!this.isTestRunning)switch(this.chromiumPageSettingsState.currentBackgroundImageType){case"bing":case"enterprise":case"imageAndVideo":case"iris":if(this.displayMarqueeAd){this.currentProvider="MarqueeAd";break}if(this.isFRE&&!this.config.turnOffFREImage){this.currentProvider="FREBackground";break}if(!this.isSSRBkgd&&null!==(n=this.config.event)&&void 0!==n&&n.enableEvent){var a;const e=this.config.event.showImageIndefinitely?S.vC:void 0;this.eventLocalStorage.shouldShowEvent(this.config.event.eventId,l.x.backgroundImageWC,this.config.event.creatives,e,null===(a=this.config.event.cmsContent)||void 0===a?void 0:a.url,r.LXY).then((e=>{this.showEvent=e,this.showEvent&&0===this.chromiumPageSettingsState.backgroundImageTypePolicy?this.currentProvider="Event":(this.config.event.enableEvent=!1,this.defineCurrentProviderAndSync())}));break}if("informational"==this.chromiumPageSettingsState.currentLayout&&(0,be.I9)()){this.currentProvider="NoBackground",R.M0.addOrUpdateTmplProperty("LowEndDeviceBkgdOff","1"),window.dispatchEvent(new CustomEvent("LowEndDeviceBkgd",{detail:{isLowEndDevice:!0}}));break}if(window.dispatchEvent(new CustomEvent("LowEndDeviceBkgd",{detail:{isLowEndDevice:!1}})),this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata){if("CMSImage"===this.galleryBackgroundSelectionMetadata.provider){this.currentProvider="CMSImage";break}if("Video"===this.galleryBackgroundSelectionMetadata.provider){this.videoProvider&&!this.videoProvider.showVideo?this.currentProvider="Iris":this.currentProvider="Video";break}if("Iris"===this.galleryBackgroundSelectionMetadata.provider){this.currentProvider="Iris";break}if("BrowserLocal"===this.galleryBackgroundSelectionMetadata.provider&&this.chromiumPageSettingsState.customBackgroundImageInfo&&this.chromiumPageSettingsState.customBackgroundImageInfo.hasImage){this.currentProvider="BrowserLocal";break}if("Theme"===this.galleryBackgroundSelectionMetadata.provider){this.currentProvider="Iris";break}}if(null!==(i=this.config.video)&&void 0!==i&&i.enableFeature&&0===this.chromiumPageSettingsState.backgroundImageTypePolicy&&"bing"!==this.chromiumPageSettingsState.currentBackgroundImageType){if(!this.videoProvider||this.videoProvider.showVideo&&this.videoProvider.shouldShowVideo()&&(!this.backgroundGalleryEligibility||this.includeVideoBackgroundsInRotation)){this.config.simpleImages&&this.cmsImageProvider&&!this.includeVideoBackgroundsInRotation&&this.cmsImageProvider.showImageInRotation&&se.p.getDailyRotationOnlySimpleImages()?this.currentProvider="CMSImage":this.config.setBkgdOffInformational&&this.checkInformataionalFlight()?this.currentProvider="NoBackground":this.currentProvider="Video";break}this.setProviderForRotation();break}this.setProviderForRotation();break;case"custom":this.chromiumPageSettingsState.customBackgroundImageInfo&&this.chromiumPageSettingsState.customBackgroundImageInfo.hasImage?this.currentProvider="BrowserLocal":this.currentProvider="Iris";break;case"off":this.currentProvider="NoBackground";break;case"theme":{var s;const e=this.chromiumPageSettingsState.configData,t=e&&e.enabledFeatures&&e.enabledFeatures.includes("msAllowThemeInstallationFromChromeStore"),n=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.usingDefaultTheme,i=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.imageUrl,r=this.chromiumPageSettingsState.ntpTheme&&(null===(s=this.chromiumPageSettingsState.ntpTheme.backgroundColorRgba)||void 0===s?void 0:s.length)>3;this.currentProvider=t&&!n&&(i||r)?"Theme":"Iris";break}default:this.currentProvider="Iris"}else this.isFRE&&!this.config.turnOffFREImage?this.currentProvider="FREBackground":this.displayMarqueeAd?this.currentProvider="MarqueeAd":this.currentProvider="Iris"},this.newDefineCurrentProvider=()=>{var e,t;if(this.holidayBackground=(0,N.N)()?this.getHolidayBkgdData():this.ssrBackgroundMetadata.holiday,!(0,N.N)()||this.shouldOverrideWithPreviousRotation()){if(this.displayMarqueeAd)return void(this.currentProvider="MarqueeAd");if(this.holidayBackground&&this.config.holidayImage&&!this.config.enableEventGleamImage)return void(this.currentProvider="CMSImage");const e="off"===this.chromiumPageSettingsState.currentBackgroundImageType;return this.holidayBackground&&this.config.enableEventGleamImage&&this.ssrBackgroundMetadata.gleam&&"focused"!==this.chromiumPageSettingsState.currentLayout&&!e?void(this.currentProvider="CMSImage"):void(this.currentProvider=this.ssrBackgroundMetadata.provider)}if(null!==(e=this.config.video)&&void 0!==e&&e.isTest)return void(this.currentProvider="Video");if(null!==(t=this.config.simpleImages)&&void 0!==t&&t.isTest)return void(this.currentProvider="CMSImage");this.backgroundGalleryEligibility&&(this.galleryBackgroundSelectionMetadata=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.backgroundSelectionMetadata),this.includeVideoBackgroundsInRotation=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.includeVideoBackgroundsInRotation)),this.currentBackgroundMetadata=se.p.getCurrentBackgroundPreferenceCache();const n="off"===this.chromiumPageSettingsState.currentBackgroundImageType;if(this.holidayBackground&&this.config.enableEventGleamImage&&this.eventGleam&&"focused"!==this.chromiumPageSettingsState.currentLayout&&!n)this.currentProvider="CMSImage";else if("bing"!==this.chromiumPageSettingsState.currentBackgroundImageType&&"imageAndVideo"!==this.chromiumPageSettingsState.currentBackgroundImageType||!this.isTestRunning)switch(this.chromiumPageSettingsState.currentBackgroundImageType){case"bing":case"enterprise":case"imageAndVideo":case"iris":if(this.displayMarqueeAd){this.currentProvider="MarqueeAd";break}if(this.isFRE&&!this.config.turnOffFREImage){this.currentProvider="FREBackground";break}if("informational"==this.chromiumPageSettingsState.currentLayout&&(0,be.I9)()){this.currentProvider="NoBackground",window.dispatchEvent(new CustomEvent("LowEndDeviceBkgd",{detail:{isLowEndDevice:!0}}));break}if(window.dispatchEvent(new CustomEvent("LowEndDeviceBkgd",{detail:{isLowEndDevice:!1}})),this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata){if("CMSImage"===this.galleryBackgroundSelectionMetadata.provider){this.currentProvider="CMSImage";break}if("Video"===this.galleryBackgroundSelectionMetadata.provider){this.videoProvider&&!this.videoProvider.showVideo?this.setProviderForRotation():this.currentProvider="Video";break}if("BrowserLocal"===this.galleryBackgroundSelectionMetadata.provider&&this.chromiumPageSettingsState.customBackgroundImageInfo&&this.chromiumPageSettingsState.customBackgroundImageInfo.hasImage){this.currentProvider="BrowserLocal";break}}this.setProviderForRotation();break;case"custom":this.chromiumPageSettingsState.customBackgroundImageInfo&&this.chromiumPageSettingsState.customBackgroundImageInfo.hasImage?this.currentProvider="BrowserLocal":this.setProviderForRotation();break;case"off":this.currentProvider="NoBackground";break;case"theme":{var i;const e=this.chromiumPageSettingsState.configData,t=e&&e.enabledFeatures&&e.enabledFeatures.includes("msAllowThemeInstallationFromChromeStore"),n=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.usingDefaultTheme,r=this.chromiumPageSettingsState.ntpTheme&&this.chromiumPageSettingsState.ntpTheme.imageUrl,o=this.chromiumPageSettingsState.ntpTheme&&(null===(i=this.chromiumPageSettingsState.ntpTheme.backgroundColorRgba)||void 0===i?void 0:i.length)>3;t&&!n&&(r||o)?this.currentProvider="Theme":this.setProviderForRotation();break}default:this.setProviderForRotation()}else this.isFRE&&!this.config.turnOffFREImage?this.currentProvider="FREBackground":this.displayMarqueeAd?this.currentProvider="MarqueeAd":this.currentProvider="CMSImage"},this.defineCurrentProviderAndSync=()=>{this.config.noIrisBackgrounds?this.newDefineCurrentProvider():this.defineCurrentProvider(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])},this.error=e=>{if(this.isTTVRFired||(this.isTTVRFired=!0,this.markVisuallyReady(),(0,N.N)()&&(0,de.eC)().then((()=>(0,Te.f)(60,C.Al.IsPrerender)))),(0,te.H)(r.yb9,"Error fetching source","Source: "+e),"Video"===this.currentProvider)this.videoProvider.error(),this.defineCurrentProviderAndSync();else this.currentProvider="Error",this.updateProperties(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])},this.loadComplete=()=>{this.isTTVRFired||(this.isTTVRFired=!0,this.markVisuallyReady(),(0,N.N)()&&(0,de.eC)().then((()=>(0,Te.f)(60,C.Al.IsPrerender))))},this.playVideo=()=>{this.videoPlaying||this.videoProvider.videoLoaded()},this.toggleMuseumCardOpen=()=>{const e=this.getStyleForElementKey(Z._.backgroundOuterHolder);this.museumCreditsCardIsShown?(window.removeEventListener("click",this.onClick_outsideMuseumCard),window.removeEventListener("keydown",this.onKeyDown_closeMuseumCard)):window.setTimeout((()=>{window.addEventListener("click",this.onClick_outsideMuseumCard),window.addEventListener("keydown",this.onKeyDown_closeMuseumCard)}),100),this.museumCreditsCardIsShown?e.zIndex="":(e.zIndex=a,this.getStyleForElementKey(Z._.backgroundInnerHolder).height=window.innerHeight+"px"),this.museumCreditsCardIsShown=!this.museumCreditsCardIsShown,this.backgroundImageFixedWCStateSyncEventEmit([{key:"museumCreditsCardIsShown",value:this.museumCreditsCardIsShown}]),(0,w.Gg)(w.tk.museumCard,this.museumCreditsCardIsShown),this.calcMuseumBottom(),"Video"===this.currentProvider&&this.museumCreditsCardIsShown&&this.videoProvider.playVideo("Timer")},this.syncWithStateChange=()=>{const e=this.chromiumPageSettingsConnector.getCurrentState(),t=e.selectedFeedDisplaySetting!==this.chromiumPageSettingsState.selectedFeedDisplaySetting,n=e.quickLinksEnabled!==this.chromiumPageSettingsState.quickLinksEnabled;if((t||n)&&(this.museumBottom=0,this.marqueeAdBottom=0,this.hasFeedDisplayChanged=t),t&&this.displayMarqueeAd&&"always"!==e.selectedFeedDisplaySetting&&(this.displayMarqueeAd=!1,this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1)),this.displayMarqueeAd){e.currentBackgroundImageType!==this.chromiumPageSettingsState.currentBackgroundImageType&&"imageAndVideo"!==e.currentBackgroundImageType&&"bing"!==e.currentBackgroundImageType&&(this.displayMarqueeAd=!1,this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1))}if(this.config.enableEventGleamImage&&this.backgroundGalleryEligibility&&this.backgroundDataConnector&&this.backgroundDataConnector.updateEventGleam(this.eventGleam),this.chromiumPageSettingsState=e,this.isSSRBkgd&&!this.backgroundGalleryEligibility&&(this.ssrModifiedMismatchBackgroundType=this.chromiumPageSettingsState.currentBackgroundImageType),this.holidayBackground&&!this.config.enableEventGleamImage&&"focused"==this.chromiumPageSettingsState.currentLayout&&this.updateHolidayBackground(!1),this.defineCurrentProviderAndSync(),this.updateProperties(),this.calcMuseumBottom(),this.config.noBckImgOnNavSticky&&0===window.scrollY){const e="off"===this.chromiumPageSettingsState.currentBackgroundImageType;this.updatebackgroundImageOp(e)}},this.togglesChanged=()=>{this.noSSRMismatch=!0,se.p.setSSRBackgroundMetadata(void 0),this.syncWithStateChange()},this.updateProperties=()=>{switch(this.isFeedDisplayAlwaysOn="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting,this.currentProvider){case"BrowserLocal":this.updateProperties_customImage();break;case"FREBackground":this.updateProperties_fre();break;case"Event":this.updateProperties_event();break;case"Iris":this.updateProperties_iris();break;case"NoBackground":this.updateProperties_noBackground();break;case"Theme":this.updateProperties_theme();break;case"Video":this.updateProperties_video();break;case"CMSImage":this.updateProperties_cmsImage();break;case"MarqueeAd":this.updateProperties_marqueeAd();break;default:this.updateProperties_error()}this.isCurrentBackgroundMetadataLoaded=!0,this.shouldOverrideWithPreviousRotation()?this.setCorrectRotationBackground():this.saveBackgroundPref(this.currentProvider)},this.updateProperties_customImage=()=>{this.imageSourceAgent=(0,N.N)()?this.chromiumPageSettingsState.customBackgroundImageInfo.resourceUrl:this.ssrBackgroundMetadata.imageUrl,this.museumCard=null,this.imageOverrideStyles=""},this.updateProperties_error=()=>{const e=this.config.freImages.informational,t=this.config.freImages.inspirational;this.imageSourceAgent="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting?(0,ae.zz)(e,{width:0,height:0,enableDpiScaling:!1}):(0,ae.zz)(t,{width:0,height:0,enableDpiScaling:!1}),this.museumCard=null,this.imageOverrideStyles=""},this.updateProperties_event=async()=>{var e,t;const n=this.config.event.eventId,i=this.config.event.showImageIndefinitely?S.vC:void 0;let o,a;if(this.currentEventCreative=await this.eventLocalStorage.getCurrentCreativeId(n,l.x.backgroundImageWC,this.config.event.creatives,i,null===(e=this.config.event.cmsContent)||void 0===e?void 0:e.url,r.LXY),null!==(t=this.config.event)&&void 0!==t&&t.cmsContent){if(o=this.eventLocalStorage.getCMSContent(n,l.x.backgroundImageWC,this.config.event.creatives,r.LXY),!o)return this.config.event=null,void this.defineCurrentProviderAndSync();this.config.event.imageData.CMS.attribution=o.attribution,this.config.event.imageData.CMS.imageSource=o.imageSource,this.config.event.imageData.CMS.imageHref=o.imageHref}if(a="VpTest"===n?"Test image":this.config.event.cmsContent?o.title:this.strings.events[this.config.event.useCommonIdForLocString?this.config.event.eventId:this.currentEventCreative],this.imageSourceAgent=this.config.event.imageData[this.currentEventCreative].imageSource,this.museumCard={credits:this.config.event.imageData[this.currentEventCreative].attribution,isDisplayed:!0,irisButtons:{likeClicked:!1,dislikeClicked:!1},title:a,titleURL:(0,b.h_)(this.config.event.imageData[this.currentEventCreative].imageHref)},this.imageOverrideStyles="",!this.telemetryObject)return void(0,te.H)(r.CgS,"Telemetry object is undefined on Iris update");this.telemetryTags.cardTitle=this.telemetryObject.addOrUpdateChild({name:"CopyrightLink",behavior:D.wu.Navigate,content:{headline:a,id:S.YO+this.config.event.eventId},overrideDestinationUrl:this.config.event.imageData[this.currentEventCreative].imageHref}).getMetadataTag(),this.telemetryTags.dismissButton=this.telemetryObject.addOrUpdateChild({name:"DismissEvent",behavior:D.wu.Dislike,content:{headline:this.museumCard.title,id:S.YO+this.config.event.eventId}}).getMetadataTag(),this.telemetryTags.title_cardHidden=this.telemetryObject.addOrUpdateChild({name:"LikeBackground",behavior:D.wu.Show,content:{headline:"LikeBackground",id:S.YO+this.config.event.eventId}}).getMetadataTag(),this.telemetryTags.title_cardShown=this.telemetryObject.addOrUpdateChild({name:"ExitFullView",behavior:D.wu.Close,content:{headline:"ExitFullView",id:S.YO+this.config.event.eventId}}).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}]);const s=this.config.event.imageData[this.currentEventCreative].secondaryButton;s&&(this.secondaryButtonTelemetryTag=this.telemetryObject.addOrUpdateChild({name:"SecondaryButton",behavior:D.wu.Navigate,content:{headline:this.museumCard.title,id:S.YO+this.config.event.eventId},overrideDestinationUrl:s.href}).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"secondaryButtonTelemetryTag",value:this.secondaryButtonTelemetryTag}]))},this.updateProperties_fre=()=>{const e=this.config.freImages.informational,t=this.config.freImages.inspirational,n="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting?(0,ae.zz)(e,{width:0,height:0,enableDpiScaling:!1}):(0,ae.zz)(t,{width:0,height:0,enableDpiScaling:!1});this.imageSourceAgent=n,this.museumCard=null,this.imageOverrideStyles=""},this.updateProperties_iris=async()=>{var e;if(!(0,N.N)())return void(this.imageSourceAgent=this.ssrBackgroundMetadata.imageUrl);if(Ee)await this.irisProvider.loadImageHotSpots();else try{await this.irisProvider.loadImageHotSpots()}catch(e){this.loadImageHotSpotsErrorFired||((0,te.H)(r.W91,"irisProvider.loadImageHotSpots failed. Mark load complete.",e&&e.message),this.loadImageHotSpotsErrorFired=!0)}const t=this.irisProvider.irisStateInfo;this.imageSourceAgent=this.irisProvider.irisImageURL,this.museumCard={...this.irisProvider.museumCard,irisButtons:{...null===(e=this.museumCard)||void 0===e?void 0:e.irisButtons}},this.shouldOverrideWithPreviousRotation()||this.saveBackgroundPref("Iris"),this.imageOverrideStyles="";const n=this.config.iris.disableHotSpots||this.isFeedDisplayAlwaysOn||!t||!t.hsList||0===t.hsList.length;if(this.hotSpots=[],!n){let e,n;const i=(0,X.b_)(Z._.topSites);this.config.topSitesCloserToSearchBox?(e=i,n=(0,X.b_)(Z._.navBar)):(e=(0,X.b_)(Z._.searchBox),n=i);let r=e?e.getBoundingClientRect().bottom:0,o=n?n.getBoundingClientRect().top:0;r=i?i.getBoundingClientRect().bottom:0;const a=(0,X.b_)(Z._.recommendedSites);if(a&&(o=a.getBoundingClientRect().top),0==o||!a){const e=(0,X.b_)(Z._.headerGrid);o=e?e.getBoundingClientRect().bottom:0}this.config.hasPulse&&(o-=125);const s=Math.max(o-r-32,0),c=Math.max(window.outerWidth-64,0);t.hsList.forEach((e=>{if(!e||!e.landscape)return;const t=s*parseFloat(e.landscape.y_percent),n=c*parseFloat(e.landscape.x_percent);if(t+32+16+20<=s&&n+32+8+256<=c){const i={marginTop:r+16+"px",marginLeft:"16px",marginRight:"32px",height:s+"px",width:c+"px",widthOffset:Math.floor(n)+"px",heightOffset:Math.floor(t)+"px"};this.hotSpots.push({data:e,styles:i,icon:G(e.icon),telemetryTags:this.telemetryTags.hotSpots[e.title],onClickHandler:this.irisProvider.hotSpotClickHandler,onMouseEnterHandler:this.irisProvider.hotSpotMouseEnterHandler})}}))}if(!this.telemetryObject||!t)return void(0,te.H)(r.CgS,"Telemetry object is undefined on Iris update");const i=this.museumCard.title?this.museumCard.title:"",o=t.titleLink?t.titleLink:"";this.telemetryTags.cardTitle=this.telemetryObject.addOrUpdateChild({name:"CopyrightLink",behavior:D.wu.Navigate,content:{headline:i},overrideDestinationUrl:o}).getMetadataTag(),this.telemetryTags.dislikeButton=this.telemetryObject.addOrUpdateChild({name:"DisLike",behavior:D.wu.Dislike,content:{headline:i}}).getMetadataTag(),this.telemetryTags.likeButton=this.telemetryObject.addOrUpdateChild({name:"Like",behavior:D.wu.Like,content:{headline:i}}).getMetadataTag(),this.telemetryTags.title_cardHidden=this.telemetryObject.addOrUpdateChild({name:"IrisMuseumCard",behavior:D.wu.Show,content:{headline:"Like this Background?",type:D.uH.Image}}).getMetadataTag(),this.telemetryTags.title_cardShown=this.telemetryObject.addOrUpdateChild({name:"IrisMuseumCard",behavior:D.wu.Close,content:{headline:"Exit Full View",type:D.uH.Image}}).getMetadataTag();const{hsList:a,creativeId:s}=t;a&&a.forEach((e=>{const t=this.telemetryObject.addOrUpdateChild({name:"HotSpot",content:{headline:(e.cta_type===j.offPageNavigation?`HotSpot_${s}_${e.hs}`:`HotSpot_${e.cta}_${s}_${e.hs}`)+" - "+e.title},type:D.c9.Module,behavior:D.wu.Navigate,action:D.Aw.Click,overrideDestinationUrl:e.cta}).getMetadataTag();this.telemetryTags.hotSpots&&(this.telemetryTags.hotSpots[e.title]=t)})),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}])},this.updateProperties_noBackground=()=>{this.imageSourceAgent=null,this.museumCard=null,this.imageOverrideStyles="",this.loadComplete()},this.updateProperties_theme=()=>{var e;(this.ntpTheme=this.chromiumPageSettingsState.ntpTheme,this.imageSourceAgent=null,this.museumCard=null,(0,N.N)())?this.imageOverrideStyles=`background-position: ${this.ntpTheme.imageHorizontalAlignment} ${this.ntpTheme.imageVerticalAlignment}; background-repeat: ${this.ntpTheme.imageTiling}; background-image: ${this.ntpTheme.imageUrl}; background-color: ${(0,ve.X)(this.chromiumPageSettingsState)}`:null!==(e=this.ssrBackgroundMetadata)&&void 0!==e&&e.imageUrl&&"#"!=this.ssrBackgroundMetadata.imageUrl.charAt(0)?this.imageOverrideStyles=`background-image: ${this.ssrBackgroundMetadata.imageUrl};`:this.imageOverrideStyles=`background-color: ${this.ssrBackgroundMetadata.imageUrl}`;this.ntpTheme&&"repeat"===this.ntpTheme.imageTiling&&(this.imageOverrideStyles+="background-size: auto;"),this.loadComplete()},this.updateProperties_video=()=>{!(0,N.N)()||this.shouldOverrideWithPreviousRotation()?this.videoProvider&&this.videoProvider.assignBackgroundUsingIndex(this.ssrBackgroundMetadata.configIndex.toString()):this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"Video"===this.galleryBackgroundSelectionMetadata.provider?this.videoProvider&&this.videoProvider.assignBackgroundUsingIndex(this.galleryBackgroundSelectionMetadata.configIndex):this.videoProvider&&this.videoProvider.setVideoAndMuseumCardProperties(),this.imageSourceAgent=this.videoProvider.firstFrameSource,this.museumCard={...this.videoProvider.museumCard},this.isReducedMotionActive=this.videoProvider.isReducedMotionActive,this.showToast=this.videoProvider.showToast,this.toastMessage=this.videoProvider.toastMessage,this.videoPlaying=this.videoProvider.isPlaying,this.backgroundImageFixedWCStateSyncEventEmit([{key:"videoPlaying",value:this.videoProvider.isPlaying}]),this.videoSource=this.videoProvider.videoSource,this.loadComplete(),this.telemetryObject?(0,N.N)()&&(this.setVideoSecondaryButtonTelemetry(),this.telemetryTags.dislikeButton=this.telemetryObject.addOrUpdateChild({name:"DisLike",behavior:D.wu.Dislike,content:{headline:this.videoProvider.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.telemetryTags.likeButton=this.telemetryObject.addOrUpdateChild({name:"Like",behavior:D.wu.Like,content:{headline:this.videoProvider.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.telemetryTags.title_cardHidden=this.telemetryObject.addOrUpdateChild({name:"LikeBackground",behavior:D.wu.Show,content:{headline:"LikeBackground",id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.telemetryTags.title_cardShown=this.telemetryObject.addOrUpdateChild({name:"ExitFullView",behavior:D.wu.Close,content:{headline:"ExitFullView",id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"telemetryTags",value:this.telemetryTags}])):(0,te.H)(r.CgS,"Telemetry object is undefined on Iris update")},this.updateProperties_cmsImage=()=>{if(this.holidayBackground&&this.config.holidayImage&&!this.config.enableEventGleamImage)this.cmsImageProvider.assignHolidayBackground();else if(this.holidayBackground&&this.config.enableEventGleamImage&&this.eventGleam)this.cmsImageProvider.assignHolidayBackground(),R.M0.addOrUpdateTmplProperty("evtBkg","1");else if((0,N.N)())this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&"CMSImage"===this.galleryBackgroundSelectionMetadata.provider?(this.cmsImageProvider.assignBackgroundUsingIndex(this.galleryBackgroundSelectionMetadata.configIndex),this.config.enableEventGleamImage&&R.M0.addOrUpdateTmplProperty("evtBkg","0")):this.config.simpleImages&&this.cmsImageProvider&&this.cmsImageProvider.shouldShowImageInRotation()&&this.cmsImageProvider.setImageAndMuseumCardProperties();else{const e=this.ssrBackgroundMetadata.gleam&&this.ssrBackgroundMetadata.holiday;e?this.cmsImageProvider.assignHolidayBackground(!0):this.cmsImageProvider.assignBackgroundUsingIndex(this.ssrBackgroundMetadata.configIndex.toString()),this.config.enableEventGleamImage&&R.M0.addOrUpdateTmplProperty("evtBkg",e?"1":"0")}this.imageSourceAgent=this.cmsImageProvider.imageSource,this.museumCard={...this.cmsImageProvider.museumCard}},this.updateProperties_marqueeAd=()=>{if(this.marqueeAd){var e,t,n,i,o,a;let s;const c=(window.screen&&window.screen.height?window.screen.height:window.innerHeight)*window.devicePixelRatio,d=(window.screen&&window.screen.width?window.screen.width:window.innerWidth)*window.devicePixelRatio>=3840||c>=2160,l=(0,ge.Bn)().currentColumnArrangement;if(l===me.K$.c5&&d)s=this.marqueeAd.images.find((e=>e.type===u.r.HighResolution4K));else{const e={[me.K$.c1]:u.r.C1,[me.K$.c2]:u.r.C2,[me.K$.c3]:u.r.C3,[me.K$.c4]:u.r.C4,[me.K$.c5]:u.r.C5};s=this.marqueeAd.images.find((t=>t.type===e[l]))}if(this.imageSourceAgent=s?s.url:this.marqueeAd.images[0].url,this.museumCard=null,!this.telemetryObject)return void(0,te.H)(r.CgS,"Telemetry object is undefined for bespoke ads update");this.telemetryTags.marqueeAdDismissButton=this.telemetryObject.addOrUpdateChild({name:"MarqueeAdDismissButton",behavior:D.wu.Hide,content:{headline:null===(e=this.marqueeAd)||void 0===e?void 0:e.title,id:null===(t=this.marqueeAd)||void 0===t?void 0:t.clickThroughUrl}}).getMetadataTag(),this.telemetryTags.marqueeAdCTAButton=this.telemetryObject.addOrUpdateChild({name:"MarqueeAdCTAButton",type:D.c9.Interaction,behavior:D.wu.Navigate,content:{headline:null===(n=this.marqueeAd)||void 0===n?void 0:n.ctaText,id:null===(i=this.marqueeAd)||void 0===i?void 0:i.clickThroughUrl}}).getMetadataTag(),this.telemetryTags.marqueeAdSponsorLogo=this.telemetryObject.addOrUpdateChild({name:"MarqueeAdSponsorLogo",type:D.c9.Interaction,behavior:D.wu.Navigate,content:{headline:null===(o=this.marqueeAd)||void 0===o?void 0:o.providerName,id:null===(a=this.marqueeAd)||void 0===a?void 0:a.clickThroughUrl}}).getMetadataTag()}},this.handleGalleryDispositionButtonClick=async()=>{const e=this.backgroundDataConnector.getCurrentState(),t=null==e?void 0:e.backgroundDispositionMetadata;switch(null==t?void 0:t.actionType){case"like":await this.handleGalleryLike(null==t?void 0:t.provider);break;case"dislike":await this.handleGalleryDislike(null==t?void 0:t.provider,null==t?void 0:t.configIndex)}},this.handleGalleryLike=async e=>{if("Iris"===e)this.irisProvider.likeClickButtonHandler()},this.handleGalleryDislike=async(e,t)=>{let n;switch(e){case"Video":n=this.videoProvider&&this.videoProvider.removeVideoFromLocalStorage(t),n&&this.shouldOverrideWithPreviousRotation()&&this.setCorrectRotationBackground();break;case"CMSImage":this.config.simpleImages&&this.simpleSchedule&&this.simpleSchedule[this.dayNow].toString()==t&&this.generateFilteredImageSchedule();break;case"Iris":if(!this.irisProvider){const e=(0,ae.zz)(this.config.fallbackImageId,{width:0,height:0,enableDpiScaling:!1});this.irisProvider=new $(this.backgroundDataConnector,e,this.updateProperties,!0,this.strings.irisFallbackTitle)}await this.irisProvider.dislikeClickButtonHandler()}},this.onClick_secondaryButton=()=>{"Video"===this.currentProvider?this.videoProvider?(this.videoProvider.isPlaying?this.videoProvider.pauseVideo("Button"):this.videoProvider.playVideo("Button"),this.setVideoSecondaryButtonTelemetry(!0)):(0,te.H)(r.$qz,"Video provider not available. Attempted play/pause video"):"Event"===this.currentProvider&&window.open(this.config.event.imageData[this.currentEventCreative].secondaryButton.href)},this.onClick_outsideMuseumCard=e=>{var t,n,i;const r=e.composedPath();this.ref_floatButtonGroup=this.ref_floatButtonGroup??(null===(t=document)||void 0===t||null===(t=t.body)||void 0===t||null===(n=t.querySelector)||void 0===n||null===(n=n.call(t,"edge-chromium-page"))||void 0===n||null===(n=n.shadowRoot)||void 0===n||null===(i=n.querySelector)||void 0===i?void 0:i.call(n,"float-button-group")),r.includes(this.ref_museumCardContainer)||this.ref_floatButtonGroup&&r.includes(this.ref_floatButtonGroup)||(R.M0.sendActionEvent(this.ref_museumCardButton,D.Aw.Click,D.wu.Close),this.toggleMuseumCardOpen())},this.onClick_openGalleryButton=()=>{this.backgroundDataConnector&&this.galleryBroadcastChannel&&(this.galleryBroadcastChannel.postMessage("galleryOpened"),this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!0),this.toggleMuseumCardOpen())},this.onClick_imageEditButton=()=>{this.backgroundDataConnector&&this.galleryBroadcastChannel&&(this.galleryBroadcastChannel.postMessage("galleryOpened"),this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!0))},this.onClick_pickMessageItem=e=>{(e||" "===e)&&window.chrome.edgeMarketingPagePrivate.sendNtpQuery("summarize the page",e,"https://www.msn.com/en-us/money/markets/biden-saved-the-economy-and-launched-a-new-age-of-prosperity-why-isn-t-he-getting-any-credit-opinion/ar-AA1eUYUo?ocid=entnewsntp&pc=U531&cvid=f91d7332657f4f8d849065750a18721c&ei=17")},this.onClick_marqueeAdClose=()=>{this.displayMarqueeAd=!1,this.defineCurrentProviderAndSync(),this.backgroundDataConnector&&this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1),this.marqueeAd&&this.marqueeAd.optOutUrl&&Pe.o.sendBeacons([this.marqueeAd.optOutUrl]),R.M0.sendActionEvent(this.ref_marqueeAdDismissButton,D.Aw.Click,D.wu.Close)},this.onKeyDown_closeMuseumCard=e=>{"Escape"===e.code&&(R.M0.sendActionEvent(this.ref_museumCardButton,D.Aw.Click,D.wu.Close),this.toggleMuseumCardOpen())},this.onFocusLeave_museumCardButton=()=>{this.museumCreditsCardIsShown&&this.ref_backgroundGalleryButton&&this.ref_backgroundGalleryButton.focus()},this.onFocusLeave_backgroundGalleryButton=()=>{this.museumCreditsCardIsShown&&this.ref_museumCardButton&&this.ref_museumCardButton.focus()},this.onResize=()=>{this.museumCard&&this.calcMuseumBottom(),"Iris"===this.currentProvider&&this.updateProperties(),this.backgroundGalleryEligibility&&this.checkMinimumWidthForGallery()},this.onScroll=(0,T.k)((()=>{this.museumCreditsCardIsShown&&this.toggleMuseumCardOpen();const e=0===window.scrollY;this.museumCard&&(e?(this.ref_hotSpotsContainer&&this.ref_hotSpotsContainer.classList.remove("hotSpotContainer_hide"),this.calcMuseumBottom(),this.shouldUpdateMuseumCardVisibility=!0):!e&&this.shouldUpdateMuseumCardVisibility&&(this.ref_hotSpotsContainer&&this.ref_hotSpotsContainer.classList.add("hotSpotContainer_hide"),this.shouldUpdateMuseumCardVisibility=!1)),this.displayMarqueeAd&&(e?(this.ref_marqueeAdDismissButtonContainer&&this.ref_marqueeAdDismissButtonContainer.classList.remove("museumCard_hide"),this.calcMuseumBottom(),this.shouldUpdateMarqueeAdDismissButtonVisibility=!0):!e&&this.shouldUpdateMarqueeAdDismissButtonVisibility&&(this.ref_marqueeAdDismissButtonContainer&&this.ref_marqueeAdDismissButtonContainer.classList.add("museumCard_hide"),this.shouldUpdateMarqueeAdDismissButtonVisibility=!1)),"Video"===this.currentProvider&&(e?this.videoProvider.playVideo("Scroll"):this.videoProvider.pauseVideo("Scroll"));const t=window.scrollY>c.FT;if(this.config.noBckImgOnNavSticky){const e="off"===this.chromiumPageSettingsState.currentBackgroundImageType||t;this.updatebackgroundImageOp(e)}}),350),this.onWindowBlur=()=>{this.videoProvider.pauseVideo("Focus")},this.onWindowFocus=()=>{this.videoProvider.playVideo("Focus")},this.updatebackgroundImageOp=e=>{var t,n;const i=null===(t=this.shadowRoot)||void 0===t||null===(n=t.getElementById)||void 0===n?void 0:n.call(t,"backgroundImage");(0,N.N)()&&i&&(i.style.opacity=e?"0":"1")},this.dailyRotationEnabled=e=>{var t,n;if(!this.backgroundGalleryEligibility)return"imageAndVideo"===(null===(t=this.chromiumPageSettingsState)||void 0===t?void 0:t.currentBackgroundImageType)||"bing"===(null===(n=this.chromiumPageSettingsState)||void 0===n?void 0:n.currentBackgroundImageType);const i=this.ssrBackgroundMetadata?this.ssrBackgroundMetadata.provider:this.currentProvider;return(null==e?void 0:e.changeBackgroundDaily)||void 0===this.galleryBackgroundSelectionMetadata&&("Video"===i||"Iris"===i)},this.videoBackgroundsIncludedInRotation=e=>this.backgroundGalleryEligibility?null==e?void 0:e.includeVideoBackgroundsInRotation:"imageAndVideo"===this.chromiumPageSettingsState.currentBackgroundImageType,this.isPotentiallyMismatchedForRotation=e=>this.backgroundGalleryEligibility?this.dailyRotationEnabled(e)&&this.videoBackgroundsIncludedInRotation(e)||void 0!==this.config.simpleImages:this.dailyRotationEnabled(e),this.themeChanged=()=>{Q.H.enqueue((()=>{this.isDarkMode=(0,fe.Y)()}))},this.handleImageEditEmitListener=()=>{this.onClick_imageEditButton()},this.handleSecondaryEmitListener=()=>{this.onClick_secondaryButton()},this.handleToggleEmitListener=()=>{this.toggleMuseumCardOpen()},this.handleEventToggleEmitListener=()=>{const e=this.getHolidayBkgdData();this.updateHolidayBackground(e,!0),this.defineCurrentProviderAndSync(),"CMSImage"===this.currentProvider&&this.updateProperties()},this.statesSyncInit=()=>{const e=[];["backgroundGalleryButtonEnabled","currentProvider","museumCreditsCardIsShown","secondaryButtonTelemetryTag","telemetryTags","videoPlaying"].forEach((t=>{e.push({key:t,value:this[t]})})),window.dispatchEvent(new CustomEvent("backgroundImageWCStatesSync",{detail:{states:e,init:!0}}))},this.setMarqueeExtraClassName=e=>{e===me.K$.c1||e===me.K$.c2?this.marqueeAdExtraClass="marqueeAdSmall":this.marqueeAdExtraClass="marqueeAdLarge"}}set imageSourceAgent(e){if(!e&&!this.imageEmptyChecked&&!Ee)switch(this.currentProvider){case"NoBackground":case"Theme":break;default:this.imageEmptyChecked=!0,this.error("No image source")}this.imageSource=e}afterHydration(){this.canRenderNonSsrElements=!0,this.loadComplete(),this.ref_video&&"Video"===this.currentProvider&&this.playVideo()}async prerenderRefreshCritical(){if(this.displayMarqueeAd){await Pe.o.initializeMarqueeAd(!0);await Pe.o.getMarqueeAdEligibilityAsync()&&(this.marqueeAd=Pe.o.getMarqueeAd())}}async experienceConnected(){if((0,N.N)()?this.canRenderNonSsrElements=!this.isSSRRendered:this.canRenderNonSsrElements=!1,this.config.enableEventGleamImage&&(this.eventGleam=function(){try{var e;const t=Ie.k.getWpoTreatmentsWithType(Ae._h.eventGleam,!0),n=null===(e=t[0])||void 0===e?void 0:e.properties;if((null==t?void 0:t.length)>0&&n)return n}catch(e){const t="Error in getting wpo event gleam data";(0,te.H)(r.Od5,t,`error:${e}`)}return null}()),this.chromiumPageSettingsConnector=(0,_.K0)(p.z.ChromiumPageSettings),this.isDarkMode=(0,fe.Y)(),this.darkModeQuery.addEventListener("change",this.themeChanged),(0,U.isNullOrUndefined)(this.chromiumPageSettingsConnector)){const e=(0,U.isNullOrUndefined)(this.chromiumPageSettingsConnector);return(0,te.H)(r.B5f,"Data connector missing: ChromiumSettings-"+e),void this.error("Data connectors missing")}let e=se.p.getBackgroundGalleryEligibility();if(void 0!==e||this.config.disableBackgroundGallery||v.jG.IsFrePage||(await se.p.initState(F.f.backgroundDataStateLoaded.getActionSender((0,_.K0)(p.z.BackgroundData))),e=se.p.getBackgroundGalleryEligibility()),this.backgroundGalleryEligibility=!this.config.disableBackgroundGallery&&!this.isFRE&&se.p&&e,this.backgroundGalleryEligibility&&(this.checkMinimumWidthForGallery(),this.backgroundDataConnector=(0,_.K0)(p.z.BackgroundData),this.galleryBroadcastChannel=new BroadcastChannel(ye.fZ)),this.backgroundGalleryEligibility&&(0,U.isNullOrUndefined)(this.backgroundDataConnector))return(0,te.H)(r.B5f,"Data connector missing: BackgroundData"),void this.error("Data connectors missing");if(this.config.simpleImages){if(se.p.setSimpleImagesandCMSSize(!0,this.config.cmsImage.data.length),this.config.cmsImage.data=this.config.cmsImage.data.concat(this.config.simpleImages.data),(0,N.N)()){await se.p.checkAndUpdateRotation();const e=this.getVideoData();e&&e.schedule||this.checkAndCreateVideoProvider(),this.checkAndGenerateSimpleImageOnlySchedule(),window.addEventListener("simpleImageBkgdToggle",this.togglesChanged)}this.checkAndCreateCMSImageProvider()}let t=!1;const n=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.backgroundSelectionMetadata);if(n&&n.configIndex){var i,o;("Video"===n.provider&&(null===(i=this.config.video.data[n.configIndex])||void 0===i?void 0:i.removeContent)||"CMSImage"===n.provider&&(null===(o=this.config.cmsImage.data[n.configIndex])||void 0===o?void 0:o.removeContent))&&(se.p.setBackgroundPreferenceByKey(ie.wI.backgroundSelectionMetadata,void 0),se.p.setBackgroundPreferenceByKey(ie.wI.changeBackgroundDaily,!0),se.p.updateLayoutBasedOnBackgroundType()),t="CMSImage"===n.provider||"Video"===n.provider||"Iris"===n.provider}if(this.config.noIrisBackgrounds&&(se.p.setBackgroundPreferenceByKey(ie.wI.includeVideoBackgroundsInRotation,!1),se.p.setRemoveIris(this.config.noIrisBackgrounds),n&&"Iris"===n.provider&&(se.p.setBackgroundPreferenceByKey(ie.wI.backgroundSelectionMetadata,void 0),se.p.setBackgroundPreferenceByKey(ie.wI.changeBackgroundDaily,!0),se.p.updateLayoutBasedOnBackgroundType())),this.config.enableEventGleamImage&&void 0===this.getHolidayBkgdData()&&(n&&!t||this.updateHolidayBackground(!0)),this.chromiumPageSettingsState=this.chromiumPageSettingsConnector.getCurrentState(),this.isTestRunning="1"===k.c.getQueryParameterByName("forceImageTest",(0,oe.zp)()),this.config.enableMarqueeAd){await Pe.o.initializeMarqueeAd();await Pe.o.getMarqueeAdEligibilityAsync()&&(this.marqueeAd=Pe.o.getMarqueeAd(),this.backgroundDataConnector=(0,_.K0)(p.z.BackgroundData),this.displayMarqueeAd=!0,this.setMarqueeExtraClassName((0,ge.Bn)().currentColumnArrangement),(0,ge.Bn)().subscribe((e=>{this.setMarqueeExtraClassName(e),this.syncWithStateChange()})))}if(!(0,N.N)())return this.ssrBackgroundMetadata={provider:C.Al.EdgeNTPHeader.backgroundImage.provider,configIndex:C.Al.EdgeNTPHeader.backgroundImage.configIndex,imageUrl:C.Al.EdgeNTPHeader.backgroundImage.imageUrl,holiday:C.Al.EdgeNTPHeader.backgroundImage.holiday,dark:C.Al.EdgeNTPHeader.backgroundImage.dark,light:C.Al.EdgeNTPHeader.backgroundImage.light,gleam:C.Al.EdgeNTPHeader.backgroundImage.gleam},se.p.setSSRBackgroundMetadata(this.ssrBackgroundMetadata),se.p.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata),void this.defineCurrentProviderAndSync();if(this.isSSRBkgd=window.isSSREnabled&&C.Al&&C.Al.CurrentFlightSet&&!C.Al.CurrentFlightSet.has("prg-ssrheader-c"),this.isSSRBkgd){const e=this.backgroundGalleryEligibility&&await se.p.getBackgroundPreferences();this.galleryBackgroundSelectionMetadata=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.backgroundSelectionMetadata),this.ssrBackgroundMetadata=await se.p.getCurrentBackgroundMetadata(),this.holidayBackground=this.getHolidayBkgdData(),this.holidayBackground&&this.ssrBackgroundMetadata&&!this.ssrBackgroundMetadata.holiday&&!this.ssrBackgroundMetadata.gleam&&this.updateHolidayBackground(!1),se.p.setCurrentBackgroundPreferenceCache(this.ssrBackgroundMetadata),this.isPotentiallyMismatchedForRotation(e)&&(this.data=this.getVideoData(),this.checkForSSRRotationMismatch(this.data))}if(this.defineCurrentProviderAndSync(),this.config.holidayImage&&window.setTimeout((()=>{this.$emit("holidayBgChanged",this.holidayBackground)}),0),!this.holidayBackground&&this.isSSRBkgd&&void 0!==this.ssrBackgroundMetadata&&!this.displayMarqueeAd&&void 0!==this.ssrBackgroundMetadata.provider&&this.ssrBackgroundMetadata.provider!==this.currentProvider){"true"===(0,m.L)().get("mock-ntp-header")||(0,te.H)(r.sFk,"SSR - Edge header mismatch.",void 0,{...r.sFk.pb,customMessage:`key: backgroundImage, header: ${this.ssrBackgroundMetadata.provider}, state: ${this.currentProvider}, userSelected: ${this.ssrBackgroundMetadata.userSelected}`})}this.createTelemetryTags(),d.J.updateLayout.registerObserver((()=>{this.ref_hotSpotsContainer&&this.ref_hotSpotsContainer.classList.add("hotSpotContainer_hide"),window.setTimeout((()=>{this.ref_hotSpotsContainer&&this.ref_hotSpotsContainer.classList.remove("hotSpotContainer_hide"),this.syncWithStateChange()}),500)})),ee.V.updateNtpTheme.registerObserver((()=>{this.syncWithStateChange()})),g.I.layoutAnimationComplete.registerObserver((()=>{this.animationComplete()})),this.backgroundGalleryEligibility&&(F.f.backgroundDispositionUpdated.registerObserver((()=>{this.handleGalleryDispositionButtonClick()})),F.f.updateGallerySelectedBackground.registerObserver((()=>{this.handleGalleryBackgroundSelection()})),F.f.refreshBackgroundMetadata.registerObserver((()=>{this.handleBackgroundRefresh()})),(0,Se.Uo)(p.z.BackgroundData,(e=>{this.renderHotSpots=e.shouldRenderHotSpots}))),this.isFeedDisplayAlwaysOn="always"===this.chromiumPageSettingsState.selectedFeedDisplaySetting,window.addEventListener("resize",this.onResize),window.addEventListener("scroll",this.onScroll),window.addEventListener("backgroundImageWCEdit",this.handleImageEditEmitListener),window.addEventListener("backgroundImageWCSecondary",this.handleSecondaryEmitListener),window.addEventListener("backgroundImageWCToggle",this.handleToggleEmitListener),window.addEventListener("backgroundImageWCStatesSyncAsk",this.statesSyncInit),this.config.enableEventGleamImage&&window.addEventListener("eventToggle",this.handleEventToggleEmitListener),window.setTimeout((()=>this.statesSyncInit()),0)}disconnectedCallback(){var e,t;if(super.disconnectedCallback(),removeEventListener("resize",this.onResize),removeEventListener("scroll",this.onScroll),window.removeEventListener("backgroundImageWCEdit",this.handleImageEditEmitListener),window.removeEventListener("backgroundImageWCSecondary",this.handleSecondaryEmitListener),window.removeEventListener("backgroundImageWCToggle",this.handleToggleEmitListener),window.removeEventListener("backgroundImageWCStatesSyncAsk",this.statesSyncInit),null!==(e=this.config)&&void 0!==e&&e.enableEventGleamImage&&window.removeEventListener("eventToggle",this.handleEventToggleEmitListener),null!==(t=this.config)&&void 0!==t&&t.simpleImages&&window.removeEventListener("simpleImageBkgdToggle",this.togglesChanged),"Video"===this.currentProvider)window.removeEventListener("blur",this.onWindowBlur,!1),window.removeEventListener("focus",this.onWindowFocus,!1);this.darkModeQuery.removeEventListener("change",this.themeChanged)}getExperienceType(){return l.x.backgroundImageWC}shadowDomPopulated(){this.syncWithStateChange(),(0,X.h_)(Z._.headerSpaceHolder).then((e=>{var t;(t=this.syncWithStateChange,new ResizeObserver(t)).observe(e),this.calcMuseumBottom(),this.displayMarqueeAd&&((0,we.TR)()&&("hidden"===document.visibilityState||Ee)&&(0,ne.su)(h.Q4.TimeToPrerenderAd,(0,pe.UE)()),(0,de.eC)().then((()=>{const e=!0===C.Al.IsPrerender?performance.now()-(0,ne.TZ)(he.DB):0;(0,ne.su)(h.Q4.TimeToRenderAd,performance.now()-e),Pe.o.sendBeacons(this.marqueeAd.adViewedUrls),R.M0.sendContentViewEvent(this.ref_marqueeAdTemplate,K.NS.View),R.M0.sendClientLogEvent({message:"Marquee Ad viewed",type:"information"})})))})),this.config.holidayImage&&window.setTimeout((()=>{this.$emit("holidayBgChanged",this.holidayBackground)}),0)}checkAndGenerateSimpleImageOnlySchedule(){const e=this.getVideoData();e&&e.schedule&&(this.schedule=e.schedule,this.scheduleFixed=e.scheduleFixed,e.simpleSchedule?(this.simpleSchedule=e.simpleSchedule,this.checkSimpleImageBounds()):(this.simpleSchedule=[-1,-1,-1,-1,-1,-1,-1],this.backgroundGalleryEligibility?this.generateFilteredImageSchedule():this.generateImageSchedule()))}checkSimpleImageBounds(){const e=this.config.cmsImage.data.length,t=se.p.getCMSImageSize();for(let n=0;n<this.simpleSchedule.length;n++)if(this.simpleSchedule[n]<t||e-1<this.simpleSchedule[n]){const i=Math.floor(Math.random()*(e-t)+t);this.simpleSchedule[n]=i}this.storeVideoData({cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed,simpleSchedule:this.simpleSchedule})}generateImageSchedule(){const e=this.config.cmsImage.data.length,t=se.p.getCMSImageSize(),n=[];for(let e=0;e<this.config.cmsImage.data.length;e++)n[e]=!1;for(let i=0;i<this.simpleSchedule.length;i++){let r=Math.floor(Math.random()*(e-t)+t);if(n[r]||!this.config.cmsImage.data[r]||this.config.cmsImage.data[r].removeContent)do{r===this.config.cmsImage.data.length-1?r=t:r++}while(n[r]||!this.config.cmsImage.data[r]||this.config.cmsImage.data[r].removeContent);this.simpleSchedule[i]=r,n[r]=!0}this.storeVideoData({cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed,simpleSchedule:this.simpleSchedule})}generateFilteredImageSchedule(){const e=[],t=se.p.getLikeAndDislikeCacheByType(ie.wI.imageDislikes),n=this.config.cmsImage.data.length;for(let i=se.p.getCMSImageSize();i<n;i++)t.has(String(i))||e.push(i);const i=[];for(let t=0;t<e.length;t++)i[t]=!1;for(let t=0;t<this.simpleSchedule.length;t++){let n=Math.floor(Math.random()*e.length);if(i[n]||!this.config.cmsImage.data[n]||this.config.cmsImage.data[n].removeContent)do{n===e.length-1?n=0:n++}while(i[n]||!this.config.cmsImage.data[n]||this.config.cmsImage.data[n].removeContent);this.simpleSchedule[t]=e[n],i[n]=!0}this.storeVideoData({cachedVideoId:-1,lastUpdatedTime:this.timeNow,schedule:this.schedule,scheduleFixed:this.scheduleFixed,simpleSchedule:this.simpleSchedule})}getVideoData(){try{return(0,P.$o)().getObject(this.storageKey)}catch(e){return(0,te.H)(r.eEQ,"Local storage for video data failed."),null}}storeVideoData(e){this.data=e;try{(0,P.$o)().setObject(this.storageKey,e)}catch(e){return void(0,te.H)(r.ybt,"Local storage for video data failed.")}}getHolidayBkgdData(){try{return(this.config.holidayImage||this.config.enableEventGleamImage)&&(0,P.$o)().getObject(this.holidayKey)}catch(e){return(0,te.H)(r.eEQ,"Local storage for holiday background failed."),!1}}storeHolidayBkgdData(e){try{(0,P.$o)().setObject(this.holidayKey,e)}catch(e){return void(0,te.H)(r.ybt,"Local storage for holiday background failed.")}}storeUserToggleStatus(e){try{(0,P.$o)().setObject(this.holidayKey+"User",e)}catch(e){return void(0,te.H)(r.ybt,"Local storage for holiday background triggered by user failed.")}}getHeaderSpaceHolderHeight(){const e=(0,X.b_)(Z._.headerSpaceHolder);return e?e.offsetHeight:this.spaceHolderHeight}checkMinimumWidthForGallery(){this.backgroundGalleryButtonEnabled=window.innerWidth>ie.Gb,this.backgroundImageFixedWCStateSyncEventEmit([{key:"backgroundGalleryButtonEnabled",value:this.backgroundGalleryButtonEnabled}])}updateHolidayBackground(e,t){this.holidayBackground=e,this.storeHolidayBkgdData(this.holidayBackground),t&&this.storeUserToggleStatus(this.holidayBackground),this.$emit("holidayBgChanged",e)}setVideoSecondaryButtonTelemetry(e){!e||this.telemetryObject?(this.secondaryButtonTelemetryTag=this.videoPlaying?this.telemetryObject.addOrUpdateChild({name:"Pause",behavior:D.wu.Pause,content:{headline:this.videoProvider.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag():this.telemetryObject.addOrUpdateChild({name:"Play",behavior:D.wu.Play,content:{headline:this.videoProvider.museumCard.title,id:this.videoProvider.videoId+" - "+this.videoProvider.currentResolution}}).getMetadataTag(),this.backgroundImageFixedWCStateSyncEventEmit([{key:"secondaryButtonTelemetryTag",value:this.secondaryButtonTelemetryTag}])):(0,te.H)(r.CgS,"Telemetry object is undefined on Iris update")}saveBackgroundPref(e,t){if(!(0,N.N)()||this.displayMarqueeAd||"Error"===e||"Event"===e)return;let n;const i="NoBackground"===this.currentProvider;if(this.config.enableEventGleamImage&&this.isSSRBkgd){const e=()=>{if(!this.eventGleam&&this.ssrBackgroundMetadata.gleam)return this.ssrBackgroundMetadata={...this.ssrBackgroundMetadata,dark:"",light:"",gleam:!1,holiday:!1},void this.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata);if(this.eventGleam&&!this.ssrBackgroundMetadata.gleam&&!i){const e=(0,P.$o)().getObject(this.holidayKey+"User");n=void 0===e;let t=!1;const i=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.backgroundSelectionMetadata);i&&i.configIndex&&(t="CMSImage"===i.provider||"Video"===i.provider||"Iris"===i.provider),n&&!t&&(this.ssrBackgroundMetadata={...this.ssrBackgroundMetadata,dark:this.eventGleam.DarkGleamUrl,light:this.eventGleam.LightGleamUrl,gleam:!0,holiday:!0},this.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata),this.storeHolidayBkgdData(!0))}};window.addEventListener("beforeunload",e,{once:!0})}if(this.holidayBackground&&!i){if(!this.isSSRBkgd)return;return this.ssrBackgroundMetadata={provider:this.ssrBackgroundMetadata.provider,configIndex:this.ssrBackgroundMetadata.configIndex,imageUrl:this.ssrBackgroundMetadata.imageUrl,holiday:this.holidayBackground},this.config.enableEventGleamImage&&this.eventGleam&&(this.ssrBackgroundMetadata={...this.ssrBackgroundMetadata,dark:this.eventGleam.DarkGleamUrl,light:this.eventGleam.LightGleamUrl,gleam:!0}),void this.setCurrentBackgroundMetadata(this.ssrBackgroundMetadata)}const r=this.backgroundGalleryEligibility&&this.galleryBackgroundSelectionMetadata&&("Video"==e||"Iris"==e);switch(e){case"Iris":this.setCurrentBackgroundMetadata({provider:e,userSelected:r,imageUrl:this.irisProvider.newIrisSurfaceInfo&&this.isSSRBkgd?this.irisProvider.getNewImageUrl():this.irisProvider.irisImageURL});break;case"Video":this.setCurrentBackgroundMetadata({provider:e,userSelected:r,configIndex:t||this.videoProvider.videoId});break;case"BrowserLocal":this.setCurrentBackgroundMetadata({provider:e,userSelected:!0,imageUrl:this.chromiumPageSettingsState.customBackgroundImageInfo.resourceUrl});break;case"Theme":this.setCurrentBackgroundMetadata({provider:e,userSelected:!0,imageUrl:this.getThemeBackgroundInfo(this.ntpTheme),darkIcons:!this.ntpTheme.isNtpBackgroundDark});break;case"CMSImage":this.setCurrentBackgroundMetadata({provider:e,userSelected:!0,configIndex:this.cmsImageProvider.imageId});break;case"NoBackground":this.setCurrentBackgroundMetadata({provider:e,userSelected:!0});break;default:this.setCurrentBackgroundMetadata({provider:e})}se.p.getCurrentBackgroundMetadata()}handleGalleryBackgroundSelection(){const e=this.backgroundDataConnector.getCurrentState();if(!e)return;const t=this.currentProvider;switch(this.galleryBackgroundSelectionMetadata=e.backgroundSelectionMetadata,this.galleryBackgroundSelectionMetadata.provider){case"Video":this.currentProvider="Video";break;case"Iris":this.currentProvider="Iris";break;case"BrowserLocal":this.currentProvider="BrowserLocal";break;case"CMSImage":this.currentProvider="CMSImage"}this.videoProvider&&"Video"===this.currentProvider&&(this.videoProvider.isPlaying=!1),this.config.holidayImage&&(this.holidayBackground=(0,N.N)()?this.getHolidayBkgdData():this.ssrBackgroundMetadata.holiday),t===this.currentProvider&&(this.isLoadComplete=!1,this.updateProperties()),this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])}handleBackgroundRefresh(){this.defineCurrentProviderAndSync(),"Video"===this.currentProvider&&(this.videoProvider.setVideoAndMuseumCardProperties(),this.videoProvider.isPlaying=!1,this.isLoadComplete=!1),this.updateProperties()}async onClick_dislikeButton(){if(this.museumCard={...this.museumCard,irisButtons:{...this.museumCard.irisButtons,dislikeClicked:!0}},window.setTimeout((()=>{this.museumCard={...this.museumCard,irisButtons:{...this.museumCard.irisButtons,dislikeClicked:!1,likeClicked:!1}}}),3e3),"Video"===this.currentProvider)this.videoProvider.removeVideoForToday(),this.currentProvider="Iris";else await this.irisProvider.dislikeClickButtonHandler();this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])}onClick_dismissButton(){this.eventLocalStorage.dismissCreative(this.config.event.eventId,l.x.backgroundImageWC,this.currentEventCreative,r.LXY),this.defineCurrentProviderAndSync()}onClick_likeButton(){if(this.museumCard={...this.museumCard,irisButtons:{...this.museumCard.irisButtons,likeClicked:!0}},"Video"===this.currentProvider);else this.irisProvider.likeClickButtonHandler()}async onClick_MarqueeAdCTAButton(){await this.onClick_MarqueeAd(this.ref_marqueeAdCTAButton)}async onClick_MarqueeAdSponsorLogo(){await this.onClick_MarqueeAd(this.ref_marqueeAdSponsorLogo)}async onClick_MarqueeAd(e){window.open(this.marqueeAd.clickThroughUrl,"_blank").focus(),await Pe.o.sendBeacons(this.marqueeAd.adClickedUrls),R.M0.sendActionEvent(e,D.Aw.Click,D.wu.Navigate)}getStyleForElementKey(e){var t;return null===(t=(0,X.b_)(e))||void 0===t?void 0:t.style}checkInformataionalFlight(){return this.config.informationalFlightOnly&&"informational"==this.chromiumPageSettingsState.currentLayout}setProviderForRotation(){this.config.noIrisBackgrounds||this.config.simpleImages&&this.cmsImageProvider&&!this.includeVideoBackgroundsInRotation&&this.cmsImageProvider.showImageInRotation&&se.p.getDailyRotationOnlySimpleImages()?this.currentProvider="CMSImage":this.currentProvider="Iris",this.backgroundImageFixedWCStateSyncEventEmit([{key:"currentProvider",value:this.currentProvider}])}getThemeBackgroundInfo(e){return e?e.backgroundColorRgba&&!e.imageUrl?(0,ve.X)(this.chromiumPageSettingsState):e.imageUrl?e.imageUrl:void 0:""}checkAndCreateIrisProvider(){if(!this.irisProvider){const e=(0,ae.zz)(this.config.fallbackImageId,{width:0,height:0,enableDpiScaling:!1});this.irisProvider=this.backgroundGalleryEligibility?new $(this.backgroundDataConnector,e,this.updateProperties,!0,this.strings.irisFallbackTitle):new $(this.chromiumPageSettingsConnector,e,this.updateProperties)}}checkAndCreateVideoProvider(){this.videoProvider||(this.videoProvider=new le(this.config.video,this))}checkAndCreateCMSImageProvider(){this.cmsImageProvider||(this.cmsImageProvider=new Ce(this.config.cmsImage,this)),this.config.simpleImages&&this.checkAndGenerateSimpleImageOnlySchedule()}async setCurrentBackgroundMetadata(e){e&&!e.imageUrl&&"Iris"===e.provider||this.isCurrentBackgroundMetadataLoaded&&!(0,ke.Z)(this.currentBackgroundMetadata,e)&&(this.currentBackgroundMetadata=e,se.p.setCurrentBackgroundMetadata(this.currentBackgroundMetadata))}setCorrectRotationBackground(){const e=this.backgroundGalleryEligibility?se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.includeVideoBackgroundsInRotation):"imageAndVideo"===this.chromiumPageSettingsState.currentBackgroundImageType;this.data=this.getVideoData();const t=this.data.schedule[this.dayNow];this.config.simpleImages&&!e?(this.checkAndCreateCMSImageProvider(),this.saveBackgroundPref("CMSImage",this.data.simpleSchedule[this.dayNow])):e&&-1!=t?(this.checkAndCreateVideoProvider(),this.saveBackgroundPref("Video",t)):(this.checkAndCreateIrisProvider(),this.saveBackgroundPref("Iris"))}shouldOverrideWithPreviousRotation(){if(!this.isSSRBkgd||this.displayMarqueeAd||this.noSSRMismatch||this.config.noIrisBackgrounds&&this.ssrBackgroundMetadata&&"Iris"===this.ssrBackgroundMetadata.provider)return!1;if(!this.backgroundGalleryEligibility)return this.ssrRotationMismatch&&this.dailyRotationEnabled()&&this.ssrPageLoadMismatchBackgroundType===this.ssrModifiedMismatchBackgroundType;const e=this.chromiumPageSettingsState&&"off"===this.chromiumPageSettingsState.currentBackgroundImageType,t=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.changeBackgroundDaily)||void 0===this.galleryBackgroundSelectionMetadata&&("Video"===this.ssrBackgroundMetadata.provider||"Iris"===this.ssrBackgroundMetadata.provider),n=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.includeVideoBackgroundsInRotation);return this.ssrRotationMismatch&&!e&&t&&(n||void 0!==this.config.simpleImages)}checkForSSRRotationMismatch(e){if(e&&e.schedule&&(!this.config.simpleImages||e.simpleSchedule))if(!this.backgroundGalleryEligibility&&this.isRotationMismatchWithoutGallery())se.p.setSSRBackgroundMetadata(this.ssrBackgroundMetadata),this.ssrRotationMismatch=!0,this.ssrPageLoadMismatchBackgroundType=this.chromiumPageSettingsState.currentBackgroundImageType,this.ssrModifiedMismatchBackgroundType=this.chromiumPageSettingsState.currentBackgroundImageType;else{const e=se.p.getPreferenceByKeyFromFromPreferencesCache(ie.wI.includeVideoBackgroundsInRotation);("Video"===this.ssrBackgroundMetadata.provider&&this.data.schedule[this.dayNow]!==this.ssrBackgroundMetadata.configIndex||"Iris"===this.ssrBackgroundMetadata.provider&&-1!==this.data.schedule[this.dayNow]||this.config.simpleImages&&!e&&("Video"===this.ssrBackgroundMetadata.provider||"Iris"===this.ssrBackgroundMetadata.provider)||this.config.simpleImages&&"CMSImage"===this.ssrBackgroundMetadata.provider&&this.data.simpleSchedule[this.dayNow]!==this.ssrBackgroundMetadata.configIndex)&&(se.p.setSSRBackgroundMetadata(this.ssrBackgroundMetadata),this.ssrRotationMismatch=!0)}}isRotationMismatchWithoutGallery(){return"Video"===this.ssrBackgroundMetadata.provider?"imageAndVideo"!==this.chromiumPageSettingsState.currentBackgroundImageType||this.data.schedule[this.dayNow]!==this.ssrBackgroundMetadata.configIndex:"Iris"===this.ssrBackgroundMetadata.provider&&("imageAndVideo"===this.chromiumPageSettingsState.currentBackgroundImageType&&-1!==this.data.schedule[this.dayNow])}get backgroundMuseumCarddBtnMoveToBottom(){return!this.museumCreditsCardIsShown}backgroundImageFixedWCStateSyncEventEmit(e){window.dispatchEvent(new CustomEvent("backgroundImageWCStatesSync",{detail:{states:e}}))}}(0,i.gn)([J.LO],Me.prototype,"currentProvider",void 0),(0,i.gn)([J.LO],Me.prototype,"hotSpots",void 0),(0,i.gn)([J.LO],Me.prototype,"imageOverrideStyles",void 0),(0,i.gn)([J.LO],Me.prototype,"imageSource",void 0),(0,i.gn)([J.LO],Me.prototype,"isReducedMotionActive",void 0),(0,i.gn)([J.LO],Me.prototype,"isTTVRFired",void 0),(0,i.gn)([J.LO],Me.prototype,"isLoadComplete",void 0),(0,i.gn)([J.LO],Me.prototype,"museumBottom",void 0),(0,i.gn)([J.LO],Me.prototype,"marqueeAdBottom",void 0),(0,i.gn)([J.LO],Me.prototype,"museumCard",void 0),(0,i.gn)([J.LO],Me.prototype,"museumCreditsCardIsShown",void 0),(0,i.gn)([J.LO],Me.prototype,"isChinaCompliance",void 0),(0,i.gn)([J.LO],Me.prototype,"showToast",void 0),(0,i.gn)([J.LO],Me.prototype,"telemetryTags",void 0),(0,i.gn)([J.LO],Me.prototype,"toastMessage",void 0),(0,i.gn)([J.LO],Me.prototype,"videoPlaying",void 0),(0,i.gn)([J.LO],Me.prototype,"videoSource",void 0),(0,i.gn)([(0,Y.Lj)({converter:Y.Id})],Me.prototype,"spaceHolderHeight",void 0),(0,i.gn)([(0,Y.Lj)({mode:"boolean"})],Me.prototype,"showFullPageBlur",void 0),(0,i.gn)([Y.Lj],Me.prototype,"bgBlurSize",void 0),(0,i.gn)([(0,Y.Lj)({mode:"boolean"})],Me.prototype,"displayMarqueeAd",void 0),(0,i.gn)([(0,Y.Lj)({converter:Y.Id})],Me.prototype,"marqueeAdTopHeight",void 0),(0,i.gn)([(0,Y.Lj)({converter:Y.Id})],Me.prototype,"marqueeAdHeight",void 0),(0,i.gn)([(0,Y.Lj)({converter:Y.Id})],Me.prototype,"marqueeAdOverlayHeight",void 0),(0,i.gn)([J.LO],Me.prototype,"marqueeAd",void 0),(0,i.gn)([J.LO],Me.prototype,"marqueeAdExtraClass",void 0),(0,i.gn)([J.LO],Me.prototype,"secondaryButtonTelemetryTag",void 0),(0,i.gn)([J.LO],Me.prototype,"imageEditButtonTelemetryTag",void 0),(0,i.gn)([J.LO],Me.prototype,"turnOnHolidaySwitchButtonTelemetryTag",void 0),(0,i.gn)([J.LO],Me.prototype,"turnOffHolidaySwitchButtonTelemetryTag",void 0),(0,i.gn)([J.LO],Me.prototype,"copilotShowCard",void 0),(0,i.gn)([J.LO],Me.prototype,"renderHotSpots",void 0),(0,i.gn)([J.LO],Me.prototype,"backgroundGalleryButtonEnabled",void 0),(0,i.gn)([J.LO],Me.prototype,"canRenderNonSsrElements",void 0),(0,i.gn)([J.LO],Me.prototype,"isDarkMode",void 0),(0,i.gn)([J.LO],Me.prototype,"holidayBackground",void 0);const xe=()=>`https://assets.msn.${v.jG.topDomain}/staticsb/statics/latest/common/icons/`;var Le=n(49218),Re=n(41472),De=n(93703),Fe=n(89150),Oe=n(56618),Be=n.n(Oe),Ne=n(41990),_e=n.n(Ne),Ue=n(14289),We=n.n(Ue),He=n(1591),$e=n(88070);He.Z;const qe=Le.dy`<p class="irisResponse">${e=>e.strings.irisResponse}</p>`,Ge=Le.dy`<img class="picture" id="backgroundImagePicture" src=${e=>e.imageSource} style=${e=>e.imageOverrideStyles} @load=${e=>e.loadComplete()} @error=${e=>e.error(e.imageSource)}></img>`,Ve=Le.dy`<div class="museumButtonContainer" ${(0,Re.i)("ref_museumButtonContainer")}><fluent-button appearance="stealth" class="irisButton" data-t="${e=>e.telemetryTags&&e.telemetryTags.dismissButton}" id="like" @click="${e=>e.onClick_dismissButton()}"><span slot="start">${Le.dy.partial(Be())}</span><div class="irisButtonTitle">${e=>e.strings.dismissTitle}</div></fluent-button></div>`,ze=Le.dy`<div class="museumButtonContainer" ${(0,Re.i)("ref_museumButtonContainer")}><fluent-button appearance="stealth" class="irisButton" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.likeButton}}" id="like" @click="${e=>e.onClick_likeButton()}"><span slot="start">${Le.dy.partial(We())}</span><div><div class="irisButtonTitle">${e=>e.strings.irisLikeTitle}</div><div class="irisButtonSubtitle">${e=>e.strings.irisLikeSubTitle}</div></div></fluent-button><fluent-button appearance="stealth" class="irisButton" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.dislikeButton}}" id="dislike" @click="${e=>e.onClick_dislikeButton()}"><span slot="start">${Le.dy.partial(_e())}</span><div class="irisButtonTitle">${e=>e.strings.irisDislikeTitle}</div><div class="irisButtonSubtitle">${e=>e.strings.irisDislikeSubTitle}</div></fluent-button></div>`,je=Le.dy`<div class="backgroundGalleryButtonContainer"><fluent-button appearance="outline" class="backgroundGalleryButton" @click=${e=>e.onClick_openGalleryButton()} @focusout=${e=>e.onFocusLeave_backgroundGalleryButton()} title="${e=>e.backgroundGalleryButtonEnabled?e.strings.backgroundGalleryButtonText:e.strings.backgroundGalleryBelowMinimumWidthTooltip}" ?disabled=${e=>!e.backgroundGalleryButtonEnabled} data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.backgroundGalleryButton}}" ${(0,Re.i)("ref_backgroundGalleryButton")}><span class="backgroundGalleryButtonText">${e=>e.strings.backgroundGalleryButtonText}</span></fluent-button></div>`,Ke=Le.dy`<div class="museumCardCreditsContainer" ${(0,Re.i)("ref_museumCreditsContainer")}><div class="museumCardTitleContainer">${(0,De.g)((e=>e.museumCard.titleURL),Le.dy`<a class="museumCardTitle museumCardTitleAnchor" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.cardTitle}}" href="${e=>e.museumCard.titleURL}" target="_blank">${e=>e.museumCard.title}</a>`)} ${(0,De.g)((e=>!e.museumCard.titleURL),Le.dy`<p class="museumCardTitle">${e=>e.museumCard.title}</p>`)}<p class="museumCardCredits ${e=>e.backgroundGalleryEligibility&&"Event"!==e.currentProvider?"backgroundGallery":""}">${e=>e.museumCard.credits}</p></div>${(0,De.g)((e=>!e.backgroundGalleryEligibility||"Event"===e.currentProvider),Le.dy`<div class="museumCardDivider"></div>${(0,De.g)((e=>"Event"!==e.currentProvider&&!e.museumCard.irisButtons.likeClicked&&!e.museumCard.irisButtons.dislikeClicked),ze)} ${(0,De.g)((e=>"Event"!==e.currentProvider&&e.museumCard.irisButtons.likeClicked||e.museumCard.irisButtons.dislikeClicked),qe)} ${(0,De.g)((e=>"Event"===e.currentProvider),Ve)}</div>`)} ${(0,De.g)((e=>e.backgroundGalleryEligibility&&"Event"!==e.currentProvider),Le.dy`<div class="copyrightContainer">${e=>`© ${e.strings.copyrightText}`}</div>${je} `)}
`,Qe=(0,De.g)((e=>e.museumCard&&e.museumBottom>0&&e.canRenderNonSsrElements),Le.dy`<div class="museumCard ${e=>e.museumCreditsCardIsShown?"museumCardVertical":"museumCardVerticalHide"} ${e=>e.holidayBackground&&e.config.holidayImage&&!e.isDarkMode?"holidayLight":""} " style="${e=>`bottom:${e.museumBottom}px; right:50px`}" ${(0,Re.i)("ref_museumCardContainer")}>${(0,De.g)((e=>e.museumCreditsCardIsShown),Ke)}</div>`),Je=Le.dy`<span class="${e=>e.config&&e.config.wholePageOpacity?"overlayTranslucent":"overlay"} ${e=>e.museumCreditsCardIsShown||"Theme"===e.currentProvider&&e.config&&!e.config.wholePageOpacity?"overlay_hide":""} ${e=>e.showFullPageBlur&&!e.museumCreditsCardIsShown?"windowsBlur":""}" data-mscc-ic="false" id="backgroundImageOverlay" ${(0,Re.i)("ref_backgroundOverlay")}></span>${(0,De.g)((e=>e.config&&!e.config.removeOverlayGradient&&!e.museumCreditsCardIsShown&&"Theme"!==e.currentProvider&&!(e.holidayBackground&&e.config.holidayImage&&!e.config.enableEventGleamImage)),Le.dy`<span class="overlayGradient ${e=>e.showFullPageBlur?"overlayGradientTranslucent":""}"></span>`)}
`,Ye=Le.dy`<fluent-button class="backgroundButton opaqueOnRest" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.marqueeAdDismissButton}}" id="marqueeAdDismissButton" @click="${e=>e.onClick_marqueeAdClose()}" title="${e=>e.strings.dismissMarqueeAdText}" aria-label="${e=>e.strings.dismissMarqueeAdText}" ${(0,Re.i)("ref_marqueeAdDismissButton")}><span slot="start"><img src="${(0,v.Yq)().StaticsUrl}/latest/icons-wc/CloseButton.svg" alt="Close button" aria-hidden="true" /></span><p class="backgroundButtonText">${e=>e.strings.dismissMarqueeAdText}</p></fluent-button>`,Ze=Le.dy`<div class="marqueeAdDismissButtonContainer" style="${e=>`bottom:${e.marqueeAdBottom}px`}" ${(0,Re.i)("ref_marqueeAdDismissButtonContainer")}>${Ye}</div>`,Xe=(0,De.g)((e=>e.marqueeAd),Le.dy`<div ${(0,Re.i)("ref_marqueeAdTemplate")} data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.marqueeAdTemplate}}" class="${e=>`marqueeAdOverlay ${e.marqueeAdExtraClass}`}" style="${e=>`height: ${e.marqueeAdOverlayHeight}px; top: ${e.marqueeAdTopHeight}px;`}"><div class="marqueeAdContainer" id="marqueeAdContainer" style="${e=>`height: ${e.marqueeAdHeight}px;`}"><div class="marqueeAdSponsor"><div>${e=>e.strings.marqueeAdSponsorText}</div><fluent-button @click=${e=>e.onClick_MarqueeAdSponsorLogo()} class="marqueeAdSponsorLogo" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.marqueeAdSponsorLogo}}" title="${e=>e.marqueeAd.providerName}" aria-label="${e=>e.marqueeAd.providerName}" ${(0,Re.i)("ref_marqueeAdSponsorLogo")}><img class="marqueeAdSponsorLogoImage" src="${e=>e.marqueeAd.sponsorLogoImageUrl}" /></fluent-button></div><div class="marqueeAdContent"><div class="marqueeAdTitle">${e=>e.marqueeAd.title}</div><div class="marqueeAdCTAButtonContainer"><fluent-button @click=${e=>e.onClick_MarqueeAdCTAButton()} class="marqueeAdCTA" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.marqueeAdCTAButton}}" title="${e=>e.marqueeAd.ctaText}" aria-label="${e=>e.marqueeAd.ctaText}" ${(0,Re.i)("ref_marqueeAdCTAButton")}>${e=>e.marqueeAd.ctaText}</fluent-button></div></div></div></div>`),et=e=>e.museumCreditsCardIsShown,tt=Le.dy` ${Ge} ${Je}
`,nt=Le.dy` ${Ge} ${Je}
`,it=Le.dy` ${Ge} ${Je}
`,rt=Le.dy` ${Ge} ${Je} ${(0,De.g)(et,Le.dy`${Qe}`)}
`,ot=Le.dy` ${Ge} ${Je}
`,at=Le.dy` ${Ge} ${Je} ${Xe} ${Ze}
`,st=Le.dy`<svg role="img" viewBox="${e=>e.icon.viewBoxString}" xmlns="http://www.w3.org/2000/svg"><path d="${e=>e.icon.svgString}" fill="#fff" /></svg>`,ct=Le.dy`<div class="hotSpotRenderRegion" id = "hotspots" style="margin-top:${e=>e.styles.marginTop}; margin-left:${e=>e.styles.marginLeft}; margin-right:${e=>e.styles.marginRight}; height:${e=>e.styles.height}; width:${e=>e.styles.width};"><div class="hotSpot" data-t="${e=>e.telemetryTags}" style="left: ${e=>e.styles.widthOffset}; top: ${e=>e.styles.heightOffset};" @mouseenter="${(e,t)=>null==e?void 0:e.onMouseEnterHandler(null==t?void 0:t.event)}"><a class="hotSpot hotSpotAccess" href="${e=>e.data.cta}" target="_blank" @click="${(e,t)=>e.onClickHandler&&e.onClickHandler(e.data,t)}"><div class="hotSpotSpot hotSpotClickable">${e=>""===e.icon.svgString?Le.dy`<img src="${`${xe()}HotSpotIconMeetNow.svg`}" alt="Hot spot icon meet now" aria-hidden="true">`:st}</div><div class="hotSpotTextArea hotSpotClickable">${e=>e.data.title}<div class="hotSpotSubTextArea">${e=>e.data.text}</div></div></a></div></div>`,dt=Le.dy` ${Ge} ${Je} ${(0,De.g)(et,Le.dy`${Qe}`)} ${(0,De.g)((e=>!e.museumCreditsCardIsShown&&e.renderHotSpots&&e.canRenderNonSsrElements),Le.dy`<div class="hotSpotContainer" ${(0,Re.i)("ref_hotSpotsContainer")}>${(0,Fe.rx)((e=>e.hotSpots),ct)}</div>`)}`,lt=Le.dy` ${Ge} ${Je}
`,ut=Le.dy`<msn-toast class="toast" style="${e=>`bottom:${e.museumBottom}px`}">${e=>e.toastMessage}</msn-toast>`,pt=Le.dy`<video class="video" loop muted src="${e=>e.videoSource}" poster="${e=>e.imageSource}" @canplaythrough=${e=>e.playVideo()} @error=${e=>e.error(e.videoSource)} ${(0,Re.i)("ref_video")}></video>`,ht=Le.dy` ${(0,De.g)((e=>e.imageSource||e.videoSource),Le.dy` ${pt} ${Je} ${(0,De.g)(et,Le.dy`${Qe}`)} ${(0,De.g)((e=>e.showToast&&e.canRenderNonSsrElements),ut)} `)}
`,gt=Le.dy` ${Ge} ${Je} ${(0,De.g)(et,Le.dy`${Qe}`)}
`,mt=(0,$e.M)("TTSR.BackgroundImageWC"),ft=Le.dy`<div class="backgroundImage" id="backgroundImage">${e=>{switch(e.currentProvider){case"BrowserLocal":return tt;case"FREBackground":return it;case"Event":return rt;case"Iris":return dt;case"NoBackground":return null;case"Theme":return lt;case"Video":return ht;case"CMSImage":return gt;case"MarqueeAd":return e.config.enableMarqueeAdV3?ot:at;default:return nt}}}</div>${(0,De.g)((()=>window.isSSREnabled),mt)}
`;var vt=n(22674),yt=n(78923),St=n(81239),Ct=n(29717);const wt=v.jG.getStaticUrls("latest/windowsShell/svgs/toggle-dark-on.svg"),bt=v.jG.getStaticUrls("latest/windowsShell/svgs/toggle-dark-off.svg"),Tt=v.jG.getStaticUrls("latest/windowsShell/svgs/toggle-light-on.svg"),kt=v.jG.getStaticUrls("latest/windowsShell/svgs/toggle-light-off.svg"),Pt=yt.i` .backgroundButton{float:right}.backgroundGalleryButtonContainer{padding-left:12px}.marqueeAdDismissButtonContainer{left:initial;right:12px}.copyrightContainer{padding-left:12px}.museumCard{left:initial;right:12px}.secondaryButton{float:right;margin-right:8px}`,At=yt.i` .backgroundButton{float:left}.backgroundGalleryButtonContainer{padding-right:12px}.marqueeAdDismissButtonContainer{left:initial;right:12px}.copyrightContainer{padding-right:12px}.museumCard{left:12px;right:initial}.secondaryButton{float:left;margin-left:8px}`,It=yt.i` .windowsBlur{background:rgba(31,31,31,0.7)}.backgroundButton.blurbg{color:#FFFFFF}.backgroundButton.blurbg:hover{background:rgba(0,0,0,.6)}.backgroundButton_active.blurbg{background:rgba(0,0,0,.6)}.backgroundButton_active.blurbg:hover{background:rgba(0,0,0,.9)}fluent-switch.backgroundHolidaySwitch.turnOn::part(switch),fluent-switch.backgroundHolidaySwitch.turnOn::part(switch):hover{background:#4DACF5;border:1px solid #4DACF5}fluent-switch.backgroundHolidaySwitch.turnOn::part(checked-indicator){background:var(--dark-turn-on-icon-url) center center / cover no-repeat}fluent-switch.backgroundHolidaySwitch.turnOff::part(checked-indicator){background:var(--dark-turn-off-icon-url) center center / cover no-repeat}`.withBehaviors(new St.w("isChinaCompliance",!0,yt.i` fluent-switch.backgroundHolidaySwitch::part(checked-indicator){--dark-turn-on-icon-url:url(${wt.cn});--dark-turn-off-icon-url:url(${bt.cn})}`),new St.w("isChinaCompliance",!1,yt.i` fluent-switch.backgroundHolidaySwitch::part(checked-indicator){--dark-turn-on-icon-url:url(${wt.com});--dark-turn-off-icon-url:url(${bt.com})}`)),Et=yt.i`:not(:defined){visibility:hidden}.backgroundButton{background:transparent;border-radius:12px;border:none;color:white;cursor:pointer;display:inline-block;font-size:12px;height:24px;overflow:hidden;white-space:nowrap;fill:currentColor}.backgroundButton svg{display:flex}.backgroundButton:hover{background:rgba(0,0,0,.6)}.backgroundButton span[slot="start"]{margin-inline:0px}.backgroundButton::part(control){padding:0 8px}.backgroundButton_active{background:rgba(0,0,0,.6)}.backgroundButton_active:hover{background:rgba(0,0,0,.9)}.holidayLight .backgroundButton,.backgroundButton.blurbg{color:#262626}.holidayLight .backgroundButton:hover,.backgroundButton.blurbg:hover{background:rgba(255,255,255,.6)}.holidayLight .backgroundButton_active,.backgroundButton_active.blurbg{background:rgba(255,255,255,.6)}.holidayLight .backgroundButton_active:hover,.backgroundButton_active.blurbg:hover{background:rgba(255,255,255,.9)}.backgroundButtonText{font-size:12px;margin-inline-start:8px;padding:0}.backgroundGalleryButtonContainer{padding-bottom:4px;width:362px}.backgroundGalleryButtonText{color:white}.marqueeAdDismissButtonContainer{position:absolute}.copyrightContainer{color:rgba(255,255,255,0.54);padding-bottom:10px}fluent-button.backgroundGalleryButton::part(control){border-radius:16px}.white-icon svg{fill:white}.backgroundImage{height:100%;width:100%}.backgroundHolidaySwitch{float:right;display:inline-block}.hotSpot{height:max-content;position:absolute;width:max-content;z-index:290}.hotSpotAccess{animation-fill-mode:forwards;animation:"backgroundFadeInAnimation 0.5s linear";cursor:default;display:flex;text-decoration:none;z-index:292}.hotSpotClickable{cursor:pointer !important}.hotSpotContainer{opacity:1;transition:opacity 0.2s}.hotSpotContainer_hide{opacity:0;transition:opacity 0.2s}.hotSpotRenderRegion{opacity:1;position:absolute}.hotSpotSpot{background-color:rgba(0,0,0,0.64);border-radius:16px;cursor:default;height:32px;margin-inline-end:8px;width:32px}.hotSpotSubTextArea{color:rgba(255,255,255,0.74);font-size:12px;line-height:16px;opacity:0}.hotSpotSubTextArea:hover{opacity:1}.hotSpotTextArea{border-radius:4px;color:#FFFFFF;font-size:14px;line-height:20px;max-width:256px;padding:4px 12px 10px 12px}.hotSpotTextArea:hover{background-color:rgba(0,0,0,0.64);cursor:pointer;z-index:292}.hotSpotTextArea:hover .hotSpotSubTextArea{opacity:1}.irisButton{background:none;border:none;color:#fff;cursor:pointer;height:auto;width:100%;fill:currentColor}.irisButton:hover{background:rgba(0,0,0,.9)}.irisButton::part(control){align-items:flex-start;justify-content:unset;padding:10px 15px}.irisButtonTitle{font-size:14px;line-height:16px;margin-bottom:4px;text-align:start;user-select:none;width:100%}.irisButtonSubtitle{color:rgba(255,255,255,0.54);font-size:12px;line-height:14px;text-align:start;user-select:none;white-space:normal}.irisResponse{padding:0px 12px;user-select:none}.museumCard{color:#fff;opacity:1;position:absolute;transition:opacity 0.2s;z-index:100}.museumCard_hide{opacity:0;transition:opacity 0.2s}.museumCardCredits{color:rgba(255,255,255,0.54);font-size:13px;margin:10px 0px 16px 0px;user-select:none}.museumCardCredits.backgroundGallery{margin:10px 0px 12px 0px}.museumCardCreditsContainer{background:rgba(0,0,0,.77);border-bottom:1px solid transparent;border-radius:4px;font-family:inherit;font-size:12px;font-weight:400;margin-bottom:10px;max-width:384px;padding:8px 4px}.museumCardDivider{background-color:rgba(255,255,255,0.54);height:1px;margin:4px 12px;width:350px}.museumCardIcon{display:inline;fill:#fff;font-size:20px;height:14px;position:relative;top:1px;width:20px}.museumCardTextContainer{background:none;border:none;color:#fff;display:inline;height:auto;padding-left:12px;padding-right:12px;position:relative;text-decoration:none;width:auto}.museumCardTextContainer:hover,.irisButton:hover{cursor:pointer}.museumCardTitle{color:#fff;font-family:inherit;font-size:20px;font-weight:400;line-height:24px;margin:4px 0px;text-decoration:none;user-select:none}.museumCardTitleAnchor:hover{cursor:pointer;text-decoration:underline}.museumCardTitleContainer{padding:0px 12px}.overlayGradient{width:120%;height:100%;position:absolute;top:0;background-image:radial-gradient(rgba(0,0,0,0) 0%,rgba(0,0,0,0.5) 100%),radial-gradient(rgba(0,0,0,0) 33%,rgba(0,0,0,0.3) 166%);transform:translateZ(0px);backface-visibility:hidden;perspective:1000px;transition:all 0.07s ease-out 0s}.overlayGradient.overlayGradientTranslucent{opacity:0}.overlayGradientWhiteGradient{background-image:linear-gradient(89.98deg,rgba(255,255,255,0.9) 0.02%,rgba(255,255,255,0.54) 59.36%,rgba(255,255,255,0) 99.98%)}.overlay{top:0;backdrop-filter:blur(60px);transition:all 0.4s ease-out 0s;position:absolute;width:100%;height:100%;opacity:0}.overlayTranslucent{background:#00000052;height:100%;opacity:0.5;position:absolute;top:0;transition:opacity 0.4s ease-in-out,background 0.4s ease-in-out,backdrop-filter 0.4s ease-in-out;width:100%}.overlay_hide{opacity:0}.picture{background-position:center;background-repeat:no-repeat;background-size:cover;height:101%;margin:-1px 0px 0px -1px;object-fit:cover;padding:0;position:absolute;width:101%}.resizeFadeInAnimation{animation:opacityFadeInAnimation 0.5s ease-in-out;animation-fill-mode:forwards}.resizeFadeOutAnimation{animation:opacityFadeOutAnimation 0.02s linear;animation-fill-mode:forwards}.secondaryButtonAnchor{color:#fff;text-decoration:none}.secondaryButtonAnchor:hover{text-decoration:underline}.scrollFadeInAnimation{animation:opacityFadeInAnimation 0.5s ease-in-out;animation-fill-mode:forwards}.scrollFadeOutAnimation{animation:opacityFadeOutAnimation 0.5s ease-in-out;animation-fill-mode:forwards}.toast{bottom:32px;left:50%;position:fixed;transform:translate(-50%,0);width:fit-content;z-index:${String(o.K.Over)}}.video{height:100%;margin:0;object-fit:cover;padding:0;position:absolute;width:100%}.windowsBlur{background:rgba(255,255,255,.55);height:100%;position:absolute;width:120%;z-index:1;transform:translateZ(0px);backface-visibility:hidden;perspective:1000px;opacity:1}#backgroundImage{transition:opacity 0.3s}.marqueeAdOverlay{position:absolute;width:100%;user-select:none;font-style:normal;color:#FFF}.marqueeAdContainer{display:flex;box-sizing:border-box}.marqueeAdLarge .marqueeAdContainer{padding:24px 0 0 47px;width:612px}.marqueeAdSmall .marqueeAdContainer{padding:50px 0 0 47px;width:306px;flex-direction:column}.marqueeAdSponsor{display:flex;flex-direction:column;align-items:center;font-size:12px}.marqueeAdLarge .marqueeAdSponsor{margin-right:32px}.marqueeAdSmall .marqueeAdSponsor{align-items:flex-start;margin-bottom:16px}.marqueeAdSponsorLogo{margin-top:8px;background:none;height:auto}.marqueeAdSponsorLogo::part(control){padding:0;border:0}.marqueeAdSponsorLogoImage{display:block;width:100%;height:100%}.marqueeAdLarge .marqueeAdSponsorLogoImage{max-width:160px;max-height:44px}.marqueeAdSmall .marqueeAdSponsorLogoImage{max-width:120px;max-height:32px}.marqueeAdContent{flex:1;display:flex;flex-direction:column;align-items:flex-start}.marqueeAdTitle{font-weight:600}.marqueeAdLarge .marqueeAdTitle{font-size:16px;line-height:22px}.marqueeAdSmall .marqueeAdTitle{font-size:14px;line-height:20px}.marqueeAdCTA{height:auto;display:flex;align-items:center;justify-content:center;font-weight:600;border-radius:4px;border:1px solid #FFF;cursor:pointer;text-decoration:none;color:#FFF;background-color:#ffffff0f;padding:5px 10px}.marqueeAdCTA:hover{background-color:#ffffff1f}.marqueeAdCTA::part(control){padding:0;border:0}.marqueeAdLarge .marqueeAdCTA{margin-top:12px;padding:5px 16px}.marqueeAdLarge .marqueeAdCTA::part(control){font-size:16px;line-height:22px}.marqueeAdSmall .marqueeAdCTA{margin-top:16px;padding:2px 12px 4px 12px}.marqueeAdSmall .marqueeAdCTA::part(control){font-size:14px;font-weight:600;line-height:20px}.marqueeAdCloseButton{padding:4px 8px;position:absolute;right:12px;bottom:12px;font-size:12px;line-height:16px;border-radius:999px;background:rgba(0,0,0,0.54);cursor:pointer}fluent-switch.backgroundHolidaySwitch.turnOn::part(switch),fluent-switch.backgroundHolidaySwitch.turnOn::part(switch):hover{background:#0E17C4;border:1px solid #0E17C4}fluent-switch.backgroundHolidaySwitch.turnOn::part(checked-indicator){top:1px;margin-inline-start:-4px}fluent-switch.backgroundHolidaySwitch.turnOff::part(checked-indicator){top:1.5px}fluent-switch.backgroundHolidaySwitch::part(checked-indicator){height:15px;width:15px}fluent-switch.backgroundHolidaySwitch.turnOn::part(checked-indicator){background:var(--light-turn-on-icon-url) center center / cover no-repeat}fluent-switch.backgroundHolidaySwitch.turnOff::part(checked-indicator){background:var(--light-turn-off-icon-url) center center / cover no-repeat}.event_toggle_container{display:inline-block;float:right;cursor:pointer;position:relative;transition:.4s;top:2px;margin-left:2px}.event_toggle_container input{cursor:pointer;display:block;height:20px;margin:0;position:relative;width:40px;border:1.5px solid;-webkit-appearance:none;border-radius:20px;border-color:#52595f}.event_toggle_container input:checked + span{left:22px}.event_toggle_img{align-items:center;display:flex;height:20px;left:3px;position:absolute;top:0px;transition:all .1s ease}.event_toggle_img img{width:15px;height:15px;border-radius:50%}.event_toggle{position:absolute;top:3px;left:3px;display:inline-block;width:15px;height:15px;background:white;border-radius:50%}`.withBehaviors((0,Ct.Uu)(It),new St.w("isChinaCompliance",!0,yt.i` fluent-switch.backgroundHolidaySwitch::part(checked-indicator){--light-turn-on-icon-url:url(${Tt.cn});--light-turn-off-icon-url:url(${kt.cn})}`),new St.w("isChinaCompliance",!1,yt.i` fluent-switch.backgroundHolidaySwitch::part(checked-indicator){--light-turn-on-icon-url:url(${Tt.com});--light-turn-off-icon-url:url(${kt.com})}`)),Mt=Et.withBehaviors(new vt.O(Pt,At));function xt(e){return e?{dark:{toggleOffUrl:e.DarkToggleIconUrlOff||e.DarkToggleIconUrl,toggleOnUrl:e.DarkToggleIconUrl},light:{toggleOffUrl:e.LightToggleIconUrlOff||e.LightToggleIconUrl,toggleOnUrl:e.LightToggleIconUrl},offBgColor:e.OffIconBackgroundColor,onBgColor:e.OnIconBackgroundColor}:null}const Lt={experienceConfigSchema:undefined}},89762:function(e,t,n){"use strict";n.r(t),n.d(t,{CommonSearchBoxEdgeNext:function(){return E},CommonSearchBoxEdgeNextStyles:function(){return W},CommonSearchBoxEdgeNextTemplate:function(){return O},ToolingInfo:function(){return H}});var i=n(10255);var r=n(77615),o=n(33940),a=n(50176),s=n(85205),c=n(79545),d=n(23549),l=n(78951),u=n(91046),p=n(21789),h=n(66415),g=n(84515),m=n(10754),f=n(19995),v=n(21930),y=n(36926),S=n(76733),C=n(47266),w=n(31558),b=n(99452),T=n(68963),k=n(67044),P=n(43356),A=n(82486);const I=["pc","pcmpc","ucpdpc","adppc"];class E extends C.l{constructor(){super(...arguments),this.enableSearchAutoSuggestion=!1,this.enableWarmBingUrl=!1,this.options=null,this.commonSearchBoxRef=null,this.inputElementHasInput=!1,this.voiceSearchButtonTelemetryTag="",this.openVoiceSearchDialog=!1,this.isVoiceSearchLoaded=!1,this.searchVisible=!0,this.placeholderText="",this.showBingLogo=!1,this.canShowCodexBingUpsellByPolicy=!1,this.canShowCodexBingButton=!1,this.isDefaultSearchBing="0"!==(0,u.L)().get("dsp"),this.codexBingChatTelemetryTags="",this.enableCodexBingIconStyles=!1,this.enableContextualSuggest=!1,this.handleFocusEvent=()=>{this.fakeFocused=!0,this.searchboxApiHandle&&this.searchboxApiHandle.startCapturingKeyStrokes()},this.handleMouseDownEvent=e=>{this.commonSearchBoxRef&&this.commonSearchBoxRef!==e.target&&this.fakeFocused&&(this.fakeFocused=!1,this.searchboxApiHandle&&this.searchboxApiHandle.stopCapturingKeyStrokes())},this.onInputStart=()=>{this.fakeFocused&&(this.fakeFocused=!1,this.searchVisible=!1)},this.onInputCancel=()=>{this.searchVisible=!0},this.onKeyCaptureChange=()=>{this.searchboxApiHandle&&(this.fakeFocused=this.searchboxApiHandle.isKeyCaptureEnabled)},this.handInputEvent=e=>{const t=e.target.value;this.inputElementHasInput=!!t}}placeholderTextChanged(e,t){var n;t!==e&&(this.options=this.options&&{...this.options,localizedStrings:{...this.options.localizedStrings,placeholderText:this.placeholderText,contextualSuggestHintText:null===(n=this.strings)||void 0===n?void 0:n.trendingSearchHintText}})}experienceConnected(){var e,t,n,i,r;const o=null===(e=(0,k.K0)(s.z.ChromiumPageSettings))||void 0===e?void 0:e.getCurrentState();this.enableFocusRedirect=(null==o||null===(t=o.configData)||void 0===t?void 0:t.inPageSearchBoxType)===a.HT.redirect,this.isProjectEqual=null==o||null===(n=o.configData)||void 0===n?void 0:n.isEnrolledInProjectEqual,this.enableCodexBingIconStyles=!!this.config.showCodexBingIcon&&o&&"always"===o.selectedFeedDisplaySetting,this.enableContextualSuggest=!!this.config.enableContextualSuggest&&(!this.config.csOnlyInContentOn||["always","peek"].includes((null==o?void 0:o.selectedFeedDisplaySetting)||"")),this.config.enableOpenInNewTab&&(this.searchTarget=null!=o&&o.openInNewTab?"_blank":"_self"),this.canShowCodexBingUpsellByPolicy=!(0,p.Yq)().isAadAccountUser||((null==o?void 0:o.isCodexBingUpsellEnabledByPolicy)??!1),this.canShowCodexBingButton=!(null===(i=this.config.childExperienceReferencesWC)||void 0===i||!i.CodexBingChat)&&this.canShowCodexBingUpsellByPolicy;const c=window;c.chrome&&c.chrome.embeddedSearch&&(this.ntpApiHandle=c.chrome.embeddedSearch.newTabPage,this.searchboxApiHandle=c.chrome.embeddedSearch.searchBox),this.showBingLogo=!(this.isDefaultSearchBing||this.enableFocusRedirect||null!==(r=this.config)&&void 0!==r&&null!==(r=r.childExperienceReferencesWC)&&void 0!==r&&r.CodexBingChat),this.canShowCodexBingButton&&(this.codexBingChatTelemetryTags=new l.D({name:"headersearch"}).getMetadataTag()),this.populateCommonSearchBoxOptions(),this.setTelemetryPersonalizationParam(),(0,w.N)()&&window.searchFormSubmitListener&&window.requestAnimationFrame((()=>{var e;null!==(e=this.commonSearchBoxRef)&&void 0!==e&&e.formElement&&this.commonSearchBoxRef.formElement.removeEventListener("submit",window.searchFormSubmitListener)})),this.config.enableOpenInNewTab&&(0,T.Uo)(s.z.ChromiumPageSettings,(e=>{const t=e.openInNewTab?"_blank":"_self";this.searchTarget!==t&&(this.searchTarget=t,this.options=this.options&&{...this.options,target:this.searchTarget})})),this.config.enableContextualSuggest&&this.config.csOnlyInContentOn&&(0,T.Uo)(s.z.ChromiumPageSettings,(e=>{const t=["always","peek"].includes(e.selectedFeedDisplaySetting||"");this.enableContextualSuggest!==t&&(this.enableContextualSuggest=t,this.options=this.options&&{...this.options,enableContextualSuggest:this.enableContextualSuggest})}))}shadowDomPopulated(){var e,t,n,i;if((0,w.N)()){const e=(0,m.Ou)();(0,f.c)((()=>{const t=e[v.nz+"SearchBox"],n=t&&void 0===e.isSSRAborted;this.markVisuallyReady(n?t:void 0,!n)}))}else(0,y.hf)("SSR.SearchBoxRendered",(0,m.UE)());!this.config.enableClarity&&(0,p.Yq)().ClarityEnabled&&(this.options=this.options&&{...this.options,enableClarity:!0}),this.setPlaceholderText(),(0,h.FY)(g._.searchBox,this);const r=this.commonSearchBoxRef&&this.commonSearchBoxRef.shadowRoot&&(null===(e=(t=this.commonSearchBoxRef.shadowRoot).querySelector)||void 0===e?void 0:e.call(t,"#q"));r&&(this.inputElement=r,this.canShowCodexBingButton&&this.inputElement.addEventListener("input",this.handInputEvent),(0,h.FY)(g._.searchBoxInput,this.inputElement));const o=this.commonSearchBoxRef&&this.commonSearchBoxRef.shadowRoot&&(null===(n=(i=this.commonSearchBoxRef.shadowRoot).querySelector)||void 0===n?void 0:n.call(i,"#voice_srch_go"));var a;(o&&(0,h.FY)(g._.searchBoxVoiceButton,o),this.enableFocusRedirect?this.registerFocusRedirectHandler():this.config.enableDelayASAfterReveal?(0,A.lr)().then((()=>{this.enableSearchAutoSuggestion=!0})):this.enableSearchAutoSuggestion=!0,Promise.all([(0,P.F_)(),(0,A.lr)()]).then((()=>{this.enableWarmBingUrl=!0})).catch((()=>{S.k.logError("Failed to wait for ATF visually ready and reveal")})),this.config.stampSideBarSupported)&&(null!==(a=window)&&void 0!==a&&null!==(a=a.chrome)&&void 0!==a&&null!==(a=a.edgeMarketingPagePrivate)&&void 0!==a&&a.showFeatures?d.M0.addOrUpdateTmplProperty("CodexBingChatSidebarSupported"):d.M0.addOrUpdateTmplProperty("CodexBingChatSidebarNotAvailable"))}getExperienceType(){return c.x.commonSearchBoxEdgeNext}setPlaceholderText(){var e;if(!this.config.localizedStrings)return;const{placeholderText:t,placeholderTextMSNntp:n,placeholderTextMSNntpv2:i,tenantMissingEnterprisePlaceholderText:r,tenantAvailableEnterprisePlaceholderText:o}=this.config.localizedStrings;if(!(0,p.Yq)().isAadAccountUser)return this.placeholderText=t,void(this.config&&!0===this.config.enableWebAPISuggetion&&this.config.enableMSNSuggestions&&(1===this.config.enableMSNSuggestions&&n?this.placeholderText=n:2===this.config.enableMSNSuggestions&&i&&(this.placeholderText=i)));let a=!1;const c=null===(e=(0,k.K0)(s.z.AdminPortalData))||void 0===e?void 0:e.getCurrentState();c&&(a=!0,this.setEnterprisePlaceholderTextWithAdminSettings(c)),(0,T.Uo)(s.z.AdminPortalData,(e=>{a=!0,this.setEnterprisePlaceholderTextWithAdminSettings(e)})),a||(this.placeholderText=r)}setEnterprisePlaceholderTextWithAdminSettings(e){if(!this.config.localizedStrings)return;const{tenantMissingEnterprisePlaceholderText:t,tenantAvailableEnterprisePlaceholderText:n}=this.config.localizedStrings;if(this.placeholderText)return;if(!e.settingsDataRecieved)return;const{company:i,isMsbEnabled:r}=e.settings||{};this.placeholderText=r&&i?n.replace(/\{0\}/g,i):t}getFormParameters(){const e={...this.config.additionalFormParamMap};e.refig=d.M0.getRequestId();const{formCodes:t}=this.config;return e.form=this.isDefaultSearchBing?t.bingSearchEngine:t.nonBingSearchEngine,I.forEach((t=>{const n=(0,u.L)().get(t.toUpperCase())||(0,u.L)().get(t)||"";n&&(e[t]=n)})),e}populateCommonSearchBoxOptions(){var e;this.options={...this.config,target:this.searchTarget,showCodexBingASUpsell:this.canShowCodexBingUpsellByPolicy&&this.config.showCodexBingASUpsell,enableCodexBingIconStyles:this.enableCodexBingIconStyles,enableContextualSuggest:this.enableContextualSuggest,localizedStrings:{...this.strings,placeholderText:this.placeholderText,inputTitle:null===(e=this.strings)||void 0===e?void 0:e.inputTitle},additionalFormParamMap:this.getFormParameters(),showVoiceSearchButton:this.config.showVoiceSearchButton&&this.isDefaultSearchBing&&!this.canShowCodexBingButton,childExperienceReferencesWC:this.config.childExperienceReferencesWC?{...this.config.childExperienceReferencesWC,ImageSearchWC:this.isDefaultSearchBing&&!this.canShowCodexBingButton?this.config.childExperienceReferencesWC.ImageSearchWC:null}:void 0}}registerFocusRedirectHandler(){this.ntpApiHandle&&(this.ntpApiHandle.oninputstart=this.onInputStart,this.ntpApiHandle.oninputcancel=this.onInputCancel,this.ntpApiHandle.isInputInProgress&&this.onInputStart()),this.searchboxApiHandle&&(this.searchboxApiHandle.onkeycapturechange=this.onKeyCaptureChange,this.fakeFocused=this.searchboxApiHandle.isKeyCaptureEnabled,this.searchboxApiHandle.isKeyCaptureEnabled&&this.searchboxApiHandle.startCapturingKeyStrokes()),this.commonSearchBoxRef&&this.commonSearchBoxRef.addEventListener("focus",this.handleFocusEvent),document.body.addEventListener("mousedown",this.handleMouseDownEvent)}setTelemetryPersonalizationParam(){const e={page:{has3PSearch:!this.isDefaultSearchBing,isSearchAB:this.enableFocusRedirect}};d.M0.updatePageMetadata(e)}clickBingIcon(){this.commonSearchBoxRef&&this.commonSearchBoxRef.onSubmit()}disconnectedCallback(){var e;(super.disconnectedCallback(),this.canShowCodexBingButton)&&(null===(e=this.inputElement)||void 0===e||e.removeEventListener("input",this.handInputEvent));this.enableFocusRedirect&&(this.commonSearchBoxRef&&this.commonSearchBoxRef.removeEventListener("focus",this.handleFocusEvent),document.body.removeEventListener("mousedown",this.handleMouseDownEvent))}}(0,o.gn)([b.LO],E.prototype,"enableSearchAutoSuggestion",void 0),(0,o.gn)([b.LO],E.prototype,"enableWarmBingUrl",void 0),(0,o.gn)([b.LO],E.prototype,"options",void 0),(0,o.gn)([b.LO],E.prototype,"inputElementHasInput",void 0),(0,o.gn)([b.LO],E.prototype,"openVoiceSearchDialog",void 0),(0,o.gn)([b.LO],E.prototype,"isVoiceSearchLoaded",void 0),(0,o.gn)([b.LO],E.prototype,"fakeFocused",void 0),(0,o.gn)([b.LO],E.prototype,"searchVisible",void 0),(0,o.gn)([b.LO],E.prototype,"placeholderText",void 0),(0,o.gn)([b.LO],E.prototype,"showBingLogo",void 0),(0,o.gn)([b.LO],E.prototype,"canShowCodexBingUpsellByPolicy",void 0),(0,o.gn)([b.LO],E.prototype,"canShowCodexBingButton",void 0);var M=n(49218),x=n(41472),L=n(93703),R=n(7275);const D=M.dy`<div slot=${e=>e.config.searchButtonOnRight?"search-options-left":"search-options"} class="bing-logo-container"><fluent-button class="bing-logo-btn bing-logo-o" ${e=>e.config.searchButtonOnRight?"bing-logo-left":""}" part="button" title=${e=>e.strings&&e.strings.bingIconText} aria-label=${e=>e.strings&&e.strings.bingIconText} appearance="stealth" @click="${e=>e.clickBingIcon()}" @keypress="${e=>e.clickBingIcon()}" data-t="${e=>{var t;return null===(t=e.commonSearchBoxRef)||void 0===t?void 0:t.buttonTelemetryTag}}" data-customhandled="true"><img src=${()=>`${(0,p.Yq)().StaticsUrl}/latest/icons/BingLogo.svg`}></fluent-button></div>`,F=M.dy`<div slot="${e=>e.config&&e.config.showCodexButtonInBox?"search-options":"codex-bing-chat"}" data-t="${e=>e.codexBingChatTelemetryTags}">${e=>{var t;return e.options&&(null===(t=e.options.childExperienceReferencesWC)||void 0===t?void 0:t.CodexBingChat)&&(0,R.Ot)(e.options.childExperienceReferencesWC.CodexBingChat,{properties:{showCodexButtonInBox:e.config.showCodexButtonInBox,target:e.searchTarget}})}}</div>`,O=M.dy`<cs-common-search-box ${(0,x.i)("commonSearchBoxRef")} :options=${e=>e.options} :enableAutoSuggestion=${e=>e.enableSearchAutoSuggestion} :enableWarmBingUrl=${e=>e.enableWarmBingUrl} :fakeFocused=${e=>e.fakeFocused} :disableSubmit=${e=>e.enableFocusRedirect} :searchVisible=${e=>e.searchVisible} exportparts="root, searchcore" ?usePageBreakpoints=${e=>!!e.config.usePageBreakpoints}>${(0,L.g)((e=>{var t;return null===(t=e.config)||void 0===t?void 0:t.enableCodexBundlePrefetch}),M.dy`<div><iframe src="https://www.bing.com/wpt/prefetchcib" style="display: none;"></iframe></div>`)} ${(0,L.g)((e=>e.canShowCodexBingButton&&!e.inputElementHasInput),F)} ${(0,L.g)((e=>e.showBingLogo),D)}</cs-common-search-box>`;var B=n(78923),N=n(22674);const _=B.i`
.bing-logo-btn{border-radius:0 var(--search-box-radius) var(--search-box-radius) 0}`,U=B.i`
.bing-logo-btn{border-radius:var(--search-box-radius) 0 0 var(--search-box-radius)}`,W=B.i` .bing-logo-btn{height:46px;background:transparent;padding:0;border:none}.bing-logo-o::part(control){padding-inline-end:11px}.bing-logo-left::part(control){padding-inline-end:0px}.bing-logo-btn > img{margin:12px 2px;height:22px;width:22px;vertical-align:bottom}`.withBehaviors(new N.O(_,U)),H={experienceConfigSchema:undefined};i.il.define(r.s.registry)},73242:function(e,t,n){"use strict";n.r(t),n.d(t,{EdgeChromiumPageWC:function(){return En},EdgeChromiumPageWCCommonTemplate:function(){return ci},EdgeChromiumPageWCInlineStyles:function(){return Pi},EdgeChromiumPageWCStyles:function(){return Ai},EdgeChromiumPageWCTemplate:function(){return di},EdgeChromiumPageWCWithJSDependencyStyles:function(){return ki},OverlapState:function(){return Y},ToolingInfo:function(){return Ii}});var i=n(61421),r=n(33940),o=n(85205);const a=new Map([["en",["en-xl","en-ae","en-au","en-ca","en-gb","en-ie","en-in","en-my","en-nz","en-ph","en-sg","en-us","en-za"]],["ja",["ja-jp"]],["ko",["ko-kr"]],["ru",["ru-ru","ru-xl"]],["de",["de-de","de-ch","de-at"]],["fr",["fr-xl","fr-be","fr-ca","fr-ch","fr-fr"]],["es",["es-xl","es-us","es-mx","es-ar","es-cl","es-co","es-es"]],["it",["it-it"]],["pl",["pl-pl"]],["ar",["ar-eg","ar-sa","ar-ae"]],["sv",["sv-se"]],["nl",["nl-nl","nl-be"]],["tr",["tr-tr"]],["bn",["bn-in"]],["te",["te-in"]],["hi",["hi-in"]],["mr",["mr-in"]],["nb",["nb-no"]],["pt",["pt-pt","pt-br"]],["id",["id-id"]]]);var s=n(79545),c=n(46986),d=n(58980),l=n(83102),u=n(93388);const p=new Set(["AD","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BW","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CO","CR","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GT","GU","GW","GY","HK","HN","HR","HT","HU","ID","IE","IM","IN","IO","IQ","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PR","PT","PW","PY","QA","RE","RO","RS","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW","EN-US","JA-JP","DE-DE"]);var h=n(88249),g=n(13334),m=n(71486),f=n(21931),v=n(54297),y=n(20089),S=n(26181),C=n(21789),w=n(95153),b=n(91046),T=n(8780),k=n(77036),P=n(48204),A=n(3104),I=n(84231),E=n(86522),M=n(92100),x=n(98106),L=n(45266),R=n(56591),D=n(25598),F=n(88762),O=n(88456),B=n(50176),N=n(59489),_=n(45870),U=n(40378),W=n(98619),H=n(50632),$=n(49155),q=n(72322);const G="background",V="solidHeader",z="top",j="scrollToFeed",K="launchChannelStore",Q="ntps",J={[q.IY.ENUS]:"Y_993301dc-ad41-46da-b9ee-85cd71d083b7",[q.IY.ENIN]:"Y_7b280bce-7a91-4a7a-b3f8-72012a43944d"};var Y;!function(e){e[e.NoOverlap=0]="NoOverlap",e[e.PartialOverlap=1]="PartialOverlap",e[e.CompleteOverlap=2]="CompleteOverlap"}(Y||(Y={}));const Z=138,X=240,ee={off:{Small:150,Medium:88,Large:102},top:{Small:150,Medium:88,Large:102},onerow:{Small:160,Medium:88,Large:102},tworows:{Small:160,Medium:88,Large:102}},te={off:{Small:204,Medium:122,Large:136},top:{Small:184,Medium:122,Large:136},onerow:{Small:204,Medium:132,Large:146},tworows:{Small:204,Medium:132,Large:146}},ne="MarqueeAdSeen-ShoppingTuesdayDeals",ie="hasSSRBasePageFeatureBeenCleanedUp";var re=n(19464),oe=n(56117),ae=n(23549),se=n(82898),ce=n(7476),de=n(88826),le=n(21930),ue=n(10754),pe=n(20009),he=n(59450),ge=n(90215),me=n(40015);var fe=n(87172),ve=n(74161),ye=n(67213),Se=n(62929),Ce=n(36867);async function we(){var e;const t="vp"===(0,b.L)().get("reqsrc")||!!(0,b.L)().get("vptest");if(!window.caches||-1!=(null===(e=location.href)||void 0===e?void 0:e.indexOf("enableForceCache=true"))||t)return;const n=Date.now(),i=await async function(){let e="";const t=await Te("edgenext-base-V1");t&&t.length>0||(e="edgenext-base-v1-empty.");const n=e?[]:t.filter((e=>e.url&&function(e,t){if(!e||!t)return!1;const n=Pe(new URL(e)),i=Pe(new URL(t));if(!n||!i)return!1;return n.href==i.href}(e.url,location.href)));e||n&&0!=n.length||(e="edgenext-base-v1-missing.");const i=await caches.open("edgenext-base-fallback-V1");if(e){const t=ke(new URL(location.href));try{return await i.add(t),e+" NetworkCall"}catch(t){return e+" "+t}}const r=n[0],o=await caches.match(r.url);if(!o)return"Empty cache entry.";const a=ke(new URL(r.url));return await i.put(a,o),"saved."}(),r=Date.now(),o={r:i,ic:await be(),te:r-n};(0,v.$o)().setObject("FallbackNavigationResult",o)}async function be(){const e=await Te("edgenext-base-fallback-V1");if(!(e&&e.length>0))return!1;const t=ke(new URL(location.href)),n=e.filter((e=>e.url&&e.url===t.toString()));return!!(n&&n.length>0)}async function Te(e){if(!window.caches)return[];const t=await caches.open(e);return t&&await t.keys()||[]}function ke(e){return(e=Pe(e)).searchParams.append("enableForceCache","true"),e}function Pe(e){return e.searchParams.delete("prerender"),e.searchParams.delete("startpage"),e.searchParams.delete("PC"),e.searchParams.delete("dsp"),e.searchParams.delete("sp"),e.searchParams.delete("adppc"),e.searchParams.delete("ucpdpc"),e.searchParams.delete("fre"),e.searchParams.delete("isFREModalBackground"),e.searchParams.delete("firstlaunch"),e}var Ae=n(74450);const Ie={SSRBasePageNetworkRequestFailed:ce.kTw,PrerenderBasePageNetworkRequestFailed:ce.n3q};var Ee=n(78324),Me=n(81949),xe=n(47266),Le=n(88070),Re=n(16844),De=n(66794),Fe=n(7124),Oe=n(16614),Be=n(52965),Ne=n(66415),_e=n(84515);var Ue=n(43356);function We(e,t,n=!1,i,r,o){if(e)if("serviceWorker"in navigator){if(e=function(e,t){const n=t.indexOf("?")>-1?"&":"?",i=n+function(e){const t=(0,b.L)().getAll("item"),n=t?t.find((e=>e&&0===e.indexOf("spalink:"))):void 0;let i=function(e){const t=(0,b.L)().get("bundles");let n;if(t&&(n=He("bundles",t),n))return n;if(n=He("bundles",e.bundlesOverride),n)return n;return He("bundles",g.Al.ClientSettings&&g.Al.ClientSettings.bundleInfo.alias)}(e);n&&(i=He("item",n.replace("/mobile","")));return i}(e)+((null===g.Al||void 0===g.Al||null===(r=g.Al.ClientSettings)||void 0===r?void 0:r.audienceMode)===c.F.Enterprise?He("enableOfficeRoutes","true"):"")+function(e){return isNaN(e.riverAgeMinutes)?"":He("riverAgeMinutes",e.riverAgeMinutes.toString())}(e)+function(e){return isNaN(e.navAgeMinutes)?"":He("navAgeMinutes",e.navAgeMinutes.toString())}(e)+function(e){return isNaN(e.networkTimeoutSeconds)?"":He("networkTimeoutSeconds",e.networkTimeoutSeconds.toString())}(e)+function(e,t=[]){return t.map((t=>e[t]||(0,b.L)().get(t)?He(t,"true"):"")).join("")}(e,["enableNetworkFirst","enableEmptySectionRoute","enableNavPreload","enableFallbackVerticalsFeed","enableExternalCssPrecache","useWebLayoutEndPoint","noCacheLayoutTemplates","cacheSSRBasePageResponse","enableFinanceRoutes","enableTopicPublisherRoutes","enableStaticRouting"]);var r;i!==n&&(t=function(e,t){if(!e||!e.endsWith(t))return e;return e.slice(0,-1)}(t+=i,"&"));return t}(i,e),o){const t=(e=o(e,"serviceWorkerUrlPolicy"))&&e.toString();if(!t||"about:blank#error"===t)return void(0,de.H)(ce.a6r,"Service Worker script Url is not trusted type compliant")}n?qe(e,t,r):(0,Ue.F_)().then((()=>{qe(e,t,r)}))}else(0,de.H)(ce.a6r,"Service Worker is not in navigator.");else(0,de.H)(ce.a6r,"No scriptUrl provided")}function He(e,t){return t?e+"="+t+"&":""}async function $e(e="/"){try{const t=await navigator.serviceWorker.getRegistration(e);if(!t)return;await t.unregister()||(0,de.H)(ce.Fst,"ServiceWorker unregistration failed.")}catch(e){(0,de.OO)(e,ce.Fst,"Failed to unregister ServiceWorker:"+e.message)}}async function qe(e,t,n){try{await navigator.serviceWorker.register(e,{scope:t}),n&&n()}catch(e){(0,de.OO)(e,ce.a6r,"ServiceWorker registration failed.")}}var Ge=n(78672),Ve=n(48503);function ze(e,t,n,i,r,o){if(!t||"true"!==t.enabled)return;const a=g.Al.ClientSettings.deviceFormFactor;if("false"===t.mobileEnabled&&("phone"===a||"tablet"===a))return;if(!function(e){const t=g.Al.ClientSettings.browser;if(!t&&"false"===e.mobileEnabled)return!1;const n=e.unsupportedBrowsers;if(!n||!n.length)return!0;if(n.findIndex((e=>e.toLowerCase()===t.browserType.toLowerCase()))>-1)return!1;return!0}(t))return;if(!(0,v.$o)().supported)return;const s=t.isLowEndDevice&&t.disableOnLowEndDevices;if("true"===t.registrationEnabled&&!s){const a=function(){const e=(0,Ge.zp)(),t=M.c.getQueryParameterByName("swimmediateregistration",e);if(t)return"true"===t.toLocaleLowerCase();return!1}();i=i||a,Ve.U.setIsServiceWorkerEnabled(!0),We(e,n,i,t,r,o)}("true"===t.unregistrationEnabled||s)&&(!function(e="/",t=!1){if(!e||!("serviceWorker"in navigator))return null;t||"complete"===document.readyState?$e(e):window.addEventListener("load",(()=>{$e(e)}),{once:!0})}(n),Ve.U.setIsServiceWorkerEnabled(!1))}var je=n(84424),Ke=n(20300),Qe=n(64902),Je=n(94746),Ye=n(96531);var Ze=n(56401),Xe=n(47741),et=n(31558),tt=n(75776);var nt,it=n(91735),rt=n(82486),ot=n(64726),at=n(59997),st=n(31499),ct=n(70280);let dt;!function(e){e.topStories="topstory",e.breakingNews="breakingnews",e.socialReplies="socialreplies",e.socialReactions="socialreactions",e.socialFollowers="socialfollowers",e.socialAchievements="socialachievements",e.socialAlerts="socialalerts"}(nt||(nt={}));class lt{constructor(e){this.resolvePushNotificationsSubscription=async(e,t,n,i,r,o,a)=>{const s=await this.swRegistration.pushManager.getSubscription();if("denied"===Notification.permission)return;if(o.size<1&&(!s||"granted"!==Notification.permission))return;if(s)return void lt.updateSubscriptions(s,e,o);let c="granted"===Notification.permission;const d=c;let l="";const{defaultNotification:u,defaultNotificationPromptAllow:p,defaultNotificationPromptBlock:h,defaultNotificationPromptDefault:m}=lt.buildDefaultNotificationPermissionPromptTelemetryElement(a);if(!c){let e;switch(ae.M0.sendContentViewEvent(u,ct.NS.View),l=await Notification.requestPermission(),l){case"granted":e=p,c=!0;break;case"denied":e=h;break;default:e=m}ae.M0.sendActionEvent(e,se.Aw.Click,se.wu.Undefined)}if(!c)return;if(fetch(e+"/webpush/key").then((async t=>{if(t.ok){const n=await this.swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:lt.urlB64ToUint8Array((await t.json()).key)});lt.updateSubscriptions(n,e,o)}else ae.M0.sendAppErrorEvent({...ce.fcE,message:"Error fetching key for subscribing to push notifications endpoint",pb:{...ce.fcE.pb,customMessage:`HTTP Status: ${t.status}`}})})),!d){const e={body:n,tag:"web-notification",icon:r,data:{url:M.c.getAbsoluteUrl(i)}};"edge"===g.Al.ClientSettings.browser.browserType?this.swRegistration.showNotification(t,e):new Notification(t,e)}},this.swRegistration=e}static getInstance(){return dt}static initializePushSubscriptionManager(e){"string"==typeof e?this.initializeFromScope(e):this.initializeFromRegistration(e)}static initializeFromRegistration(e){dt=new lt(e)}static async initializeFromScope(e){await navigator.serviceWorker.ready,lt.initializePushSubscriptionManager(await navigator.serviceWorker.getRegistration(e))}static urlB64ToUint8Array(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let e=0;e<n.length;++e)i[e]=n.charCodeAt(e);return i}static addTelemetryTagsToElement(e,t,n){const i={name:n},r=t?t.addOrUpdateChild(i):null,o=r.render();return Object.keys(o).forEach((t=>{e.setAttribute(t,o[t])})),r}static buildDefaultNotificationPermissionPromptTelemetryElement(e){const t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");t.appendChild(n),t.appendChild(i),t.appendChild(r);const o=lt.addTelemetryTagsToElement(t,e,"browserNativeNotificationPermissionPrompt");return lt.addTelemetryTagsToElement(n,o,"Accept"),lt.addTelemetryTagsToElement(i,o,"Block"),lt.addTelemetryTagsToElement(r,o,"Default"),{defaultNotification:t,defaultNotificationPromptAllow:n,defaultNotificationPromptBlock:i,defaultNotificationPromptDefault:r}}static async updateSubscriptions(e,t,n){const i=Object.values(nt).filter((e=>!n.has(e)));[{segment:"subscribe",tags:[...n]},{segment:"unsubscribe",tags:i}].forEach((async n=>{if(n.tags.length<1)return;const i=n.tags.join(";"),r=t+"/webpush/news/"+g.Al.Locale+"/v1/webpush/"+n.segment+"?scn=MSNRPSAuth",o=await fetch(r,{credentials:"include",method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Tags:i},body:JSON.stringify({subscription:e})});o.ok?o.json().then((e=>{"Success"!==e.message&&ae.M0.sendAppErrorEvent({...ce.M7L,message:"Response contained unexpected value when subscribing or unsubscribing from push notifications endpoint",pb:{...ce.M7L.pb,customMessage:`Expected response message to be 'Success' but instead was ${e.message} when receiving response from endpoint at ${r}`}})})):ae.M0.sendAppErrorEvent({...ce.M7L,message:"HTTP error when making subscribe or unsubscribe call from push notifications endpoint",pb:{...ce.M7L.pb,customMessage:`Response status was ${o.status} when attempting to communicate with the endpoint at ${r}`}})}))}}var ut=n(39100),pt=n(41074);const ht=(0,m.k)((function(){window.pageYOffset>0&&mt()}),0);let gt=!1;function mt(){const e=(0,Ue.S0)();e&&pt.g.updateBelowTheFoldTransitionStart.getActionSender(e).send(!0),gt=!0,window.removeEventListener("scroll",ht)}const ft={initialize:function(){window.addEventListener("scroll",ht,{passive:!0})},handleSettingUpdate:function(e){gt||"always"!==e&&"headingsonly"!==e&&"peek"!==e||mt()}};var vt=n(55524),yt=n(339),St=n(99452),Ct=n(68963),wt=n(67044),bt=n(944),Tt=n(95063),kt=n(548),Pt=n(54155),At=n(69734),It=n(59044),Et=n(19547),Mt=n(37922),xt=n(60189),Lt=n(2186),Rt=n(36941),Dt=n(87574),Ft=n(45539),Ot=n(39409),Bt=n(77195),Nt=n(36777),_t=n(35114),Ut=n(93893),Wt=n(26488),Ht=n(94409),$t=n(76040),qt=n(23234),Gt=n(48278),Vt=n(12912);const zt=6048e5,jt=2;const Kt=6048e5,Qt=3;var Jt=n(78617);function Yt(e,t,n,i=[1,3,6]){var r;if(!n||0===n.length)return!1;const o=n.length,a=null==t||null===(r=t[e])||void 0===r?void 0:r.reduce(((e,t)=>"Viewed"===t.type&&(!e||t.ts>e.ts)?t:e),null),s=null==a?void 0:a.ts;if(!s||o>=i[i.length-1])return!0;let c=0,d=n.length-1,l=-1,u=-1;for(;c<=d;){const e=Math.floor((c+d)/2);n[e].ts<=s?(l=n[e].ts,u=e+1,c=e+1):d=e-1}if(-1===u)return!1;for(const e of i)if(u<e&&e<=o)return!0;return!1}const Zt=2592e5;async function Xt(e,t,n,i,r){const o=await Ce.L.getPreferenceSetting(ve.nc.layout_mode);if((null==o?void 0:o.value)===ve.Uq.informational)return;const a=await Ce.L.getPreferenceSetting(ve._9.feeds);if("always"===(null==a?void 0:a.value))return;const s={feedName:"filteredChannels",fcl:!0},c=await(null===Lt.yg||void 0===Lt.yg?void 0:Lt.yg.fetchChannelFilter("Channel Store",s));if(0!==(c&&c.subCards||[]).length&&(ae.M0.addOrUpdateTmplProperty("newLayoutReviewCoachmarkCM","1"),e.lockScreenUserJourney)){if("1"!==M.c.getQueryParameterByName("newLayoutTestMode",(0,Ge.zp)())){var d;const e=null==i||null===(d=i[Gt.B.LockScreenPersonalizeCoachmark])||void 0===d?void 0:d.find((e=>"Engaged"===e.type)),t=e?function(e,t=864e5){const n=new Date(e),i=((new Date).getTime()-n.getTime())/t;return i}(e.ts):null;if(!t||t<3)return}if(Yt(Gt.B.NewLayoutReviewCoachmark,i,r)){!async function(e,t,n){var i;const{title:r,description:o,engageContentActionLabel:a,dismissContentActionLabel:s}=e.localizedStrings.LockScreenNewLayoutCM,c={id:Gt.B.NewLayoutReviewCoachmark,group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:Wt.dm.Medium,position:Wt.pY.BottomEnd},contentModel:{contentType:Ht.J.CallToAction,title:r,description:o,contentImage:{url:`${C.jG.StaticsUrl}/pr-4566482/nurturing/img/review_layout.png`,altText:e.localizedStrings.lockScreenNewLayoutAltText??"New Layout Review Coachmark Image"},dismissContentAction:{label:s},engageContentAction:{label:a,actionDelegate:()=>{t.updateLayout(n)}}}},d=[(0,$t.H)("Viewed",Zt),(0,qt.l)("Viewed",3),(0,qt.l)("Engaged",1)];null===(i=(0,Vt.$0)())||void 0===i||i.sendInternalPlacement(c,d)}(e,n,{...t,currentLayout:"informational"})}}}const en=2592e5;async function tn(e,t,n){const i=await(null===Lt.yg||void 0===Lt.yg?void 0:Lt.yg.fetchChannelFilter("Channel Store",{feedName:"filteredChannels"}));!i||i.subCards&&(null==i?void 0:i.subCards.length)>0||(ae.M0.addOrUpdateTmplProperty("lockScreenPersonalizeCM","1"),e.lockScreenUserJourney&&Yt(Gt.B.LockScreenPersonalizeCoachmark,t,n)&&async function(e){var t;const n=await(0,Ne.h_)(_e._.personalizeButton);if(!n)return;const i=[(0,$t.H)("Viewed",en),(0,qt.l)("Viewed",3),(0,qt.l)("Engaged",1)],r={id:Gt.B.LockScreenPersonalizeCoachmark,group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:Wt.dm.Medium,position:Wt.pY.BottomEnd},contentModel:{title:e.localizedStrings.LockScreenPersonalizeCM.title,description:e.localizedStrings.LockScreenPersonalizeCM.description,contentType:Ht.J.CallToAction,engageContentAction:{label:e.localizedStrings.LockScreenPersonalizeCM.engageContentActionLabel,actionDelegate:()=>{null==n||n.click()}},dismissContentAction:{label:e.localizedStrings.LockScreenPersonalizeCM.dismissContentActionLabel}}};null===(t=(0,Vt.$0)())||void 0===t||t.sendInternalPlacement(r,i)}(e))}var nn=n(88672),rn=n(53629);var on=n(20758);const an=(e,t)=>{const{currentLayout:n,selectedFeedDisplaySetting:i}=t,{optInFeedLayoutCMConfig:r}=e;if("informational"===n||"custom"===n&&"always"===i)return;if("custom"===n&&"off"===i)return;const o=((e,t)=>{const{currentLayout:n,selectedFeedDisplaySetting:i}=t;let r=0;const o=(0,Re.Nu)(z)-8;var a,s;return r="focused"===n||"custom"===n&&"headingsonly"===i?(null==e||null===(a=e.scrollDistanceInPx)||void 0===a?void 0:a.focused)||o:(null==e||null===(s=e.scrollDistanceInPx)||void 0===s?void 0:s.inspirational)||o,r})(r,t),a=t=>{var n;t.type!==j||"weatherOneLinerHero"!==t.detail.source?(t.type===j||"scroll"===t.type&&((null===(n=window)||void 0===n?void 0:n.scrollY)??0)>=o)&&(ae.M0.addOrUpdateTmplProperty("triggerOptInFeedLayoutCMElg",t.type===j?"1":"2"),r.canTrigger&&sn(e.localizedStrings.optInFeedLayoutCMStrings||{}),window.removeEventListener("scroll",a)):window.removeEventListener("scroll",a)};return window.addEventListener("scroll",a),window.addEventListener(j,a,{once:!0}),()=>{window.removeEventListener("scroll",a),window.removeEventListener(j,a)}},sn=e=>{var t;const n=matchMedia("(prefers-color-scheme:dark)"),i=`${C.jG.StaticsUrl}latest/nurturing/img/layout_promotion_dark.png`,r=`${C.jG.StaticsUrl}latest/nurturing/img/layout_promotion_light.png`,o=null!=n&&n.matches?i:r,a={id:Gt.B.OptInFeedLayout,group:"FeedLayout",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:Wt.dm.Large,position:Wt.pY.BottomEnd},contentModel:{title:(null==e?void 0:e.title)||"",description:(null==e?void 0:e.description)||"",contentType:Ht.J.CallToAction,contentImage:{url:o,altText:"Opt-in feed layout"},dismissContentAction:{label:(null==e?void 0:e.dismBtnLabel)||""},engageContentAction:{label:(null==e?void 0:e.engageBtnLabel)||"",actionDelegate:()=>{(0,on.Rc)()()}}}},s=[(0,qt.l)("Viewed",1)];null===(t=(0,Vt.$0)())||void 0===t||t.sendInternalPlacement(a,s)},cn="new_device_experimentation.ntp_feed_below_the_fold_should_show_withdrawal_dialog";const dn=1728e5;var ln=n(42809);let un;const pn=6048e5,hn=864e5;async function gn(e){var t,n;const{config:i,isSignedOutPromise:r,isFromWidgetLockScreen:a,newYearV2Anchor:s,onScrollPromise:c,onSocialPromise:d,layoutState:l,pageSettingsDataConnector:u}=e,p=[];if(!i)return;i.enableLangExpBanner&&function(){var e;const t={id:"LanguageExplainingBanner",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"HorizontalBanner",position:"Top"},contentModel:{title:"Language Explaining Banner",description:"Почему мой канал на английском языке? Вы видите наш международный канал, так как каналы на русском языке больше не доступны.",contentType:Ht.J.CallToAction,dismissContentAction:{label:"Понятно."}}},n=[(0,$t.H)("Dismissed",dn),(0,qt.l)("Dismissed",3)];null===(e=(0,Vt.$0)())||void 0===e||e.sendInternalPlacement(t,n)}(),i.enableEdgeFeedCoachmark&&async function(e){var t,n,i;if(!e.enableEdgeFeedCoachmark||null==e||null===(t=e.localizedStrings)||void 0===t||!t.edgeFeedBelowTheFoldCoachmark||null===(n=window)||void 0===n||null===(n=n.chrome)||void 0===n||!n.ntpSettingsPrivate)return;const r=new _.o;if(window.chrome.ntpSettingsPrivate.getPref(cn,(e=>r.set(null==e?void 0:e.value))),!await r.getResultAsync())return;const{title:o,description:a}=e.localizedStrings.edgeFeedBelowTheFoldCoachmark,s={id:"edgeFeedBelowTheFoldCoachmark",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:Wt.dm.Large,position:{coachmarkAnchor:_e._.settingsButton,anchoringPosition:Wt.RC.Below,hasPointer:!0,pointerPosition:Wt.Jt.Opposite},displaySurfaceAction:{actionDelegate:()=>{window.chrome.ntpSettingsPrivate.setPref(cn,!1)}}},contentModel:{contentType:Ht.J.CallToAction,title:o,description:a}},c=[(0,qt.l)("Viewed",1)];null===(i=(0,Vt.$0)())||void 0===i||i.sendInternalPlacement(s,c)}(i),null!==(t=i.termOfUseBannerConfig)&&void 0!==t&&t.enabled&&await r&&function(e){var t,n,i,r,o,a,s,c,d,l;const u=!(null===(t=this.config.termOfUseBannerConfig)||void 0===t||!t.isSecondBanner),p=(null==e||null===(n=e.termOfUseBannerConfig)||void 0===n?void 0:n.termOfUseBanner1Description)||(null==e||null===(i=e.localizedStrings)||void 0===i?void 0:i.termOfUseBanner1Description)||"We're updating our Terms of Use",h=(null==e||null===(r=e.termOfUseBannerConfig)||void 0===r?void 0:r.termOfUseBanner2Description)||(null==e||null===(o=e.localizedStrings)||void 0===o?void 0:o.termOfUseBanner2Description)||"We've updated our Terms of Use",g=u?h:p,m={id:u?"TermOfUseBanner2":"TermOfUseBanner1",group:"Promotional",placementSource:"Internal",surfaceModel:{surfaceType:"HorizontalBanner",position:"Top",bannerType:"LegalCompliance",displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}},closeSurfaceAction:{label:"Close"}},contentModel:{title:g,description:g,contentType:Ht.J.CallToAction,logoImage:{url:`${C.jG.StaticsUrl}/latest/nurturing/img/i-logo.png`,altText:"Image Alt Text"},dismissContentAction:{label:(null==e||null===(a=e.termOfUseBannerConfig)||void 0===a?void 0:a.termOfUseBannerDismBtnLabel)||(null==e||null===(s=e.localizedStrings)||void 0===s?void 0:s.termOfUseBannerDismBtnLabel)||"Dismiss"},engageContentAction:{label:(null==e||null===(c=e.termOfUseBannerConfig)||void 0===c?void 0:c.termOfUseBannerEngageBtnLabel)||(null==e||null===(d=e.localizedStrings)||void 0===d?void 0:d.termOfUseBannerEngageBtnLabel)||"Learn more",actionDelegate:()=>{window.open("https://go.microsoft.com/fwlink/?LinkID=2092201","_blank")}}}},f=u?hn:pn,v=[(0,$t.H)("Viewed",f),(0,qt.l)("Dismissed",1),(0,qt.l)("Closed",1),(0,qt.l)("Engaged",1)];null===(l=(0,Vt.$0)())||void 0===l||l.sendInternalPlacement(m,v)}(i),(i.enableNewYearThemeCoachMark||i.enableNewYearThemeCoachMarkV2)&&await new Promise((e=>{window.chrome&&window.chrome.edgeMarketingPagePrivate&&window.chrome.edgeMarketingPagePrivate.showFeatures&&window.chrome.edgeMarketingPagePrivate.showFeatures("open_hub_app_store_theme_dry_run",(t=>{e("SUCCESS"===t)}))}))&&function(e,t){var n;const i=e.localizedStrings,r={id:Gt.B.NewYearThemeStore,group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:Wt.dm.Large,position:Wt.pY.BottomEnd},contentModel:{title:i.lunarNewYearCoachMarkTitle,description:i.lunarNewYearCoachMarkContent,contentType:Ht.J.CallToAction,contentImage:{url:`${C.jG.StaticsUrl}/latest/lunar-new-year/LunarNewYear.png`,altText:"Lunar New Year "},dismissContentAction:{label:i.lunarNewYearCoachMarkCancel},engageContentAction:{label:i.lunarNewYearCoachMarkConfirm,actionDelegate:()=>{window.chrome.edgeMarketingPagePrivate.showFeatures("open_hub_app_store_theme")}}}};t&&(r.surfaceModel.position={coachmarkAnchor:t,anchoringPosition:Wt.RC.Above,hasPointer:!1});const o=[(0,$t.H)("Viewed",zt),(0,qt.l)("Viewed",jt)];null===(n=(0,Vt.$0)())||void 0===n||n.sendInternalPlacement(r,o)}(i,s);const h=function(){try{var e;const t=rn.k.getWpoTreatmentsWithType(nn._h.pinProngCoachMark),n=(null==t?void 0:t.length)>0&&(null===(e=t[0])||void 0===e||null===(e=e.properties)||void 0===e?void 0:e.showCoachMark);if(n)return{showCoachMark:n}}catch(e){const t="Error in getting pin prong promotion data";(0,de.H)(ce.Od5,t,`error:${e}`)}return null}();if(h&&(null!=h&&h.showCoachMark?(ae.M0.addOrUpdateTmplProperty("coachmarkToPinProng1","1"),i.enableCoachMarkToPinProng&&await async function(){var e,t;const n=null===(e=window)||void 0===e?void 0:e.navigator;if(!n)return!1;const i=null===(t=window)||void 0===t||null===(t=t.screen)||void 0===t?void 0:t.availWidth;if(!i||i<1024)return!1;const r=await n.userAgentData.getHighEntropyValues(["platformVersion"]);if("Windows"!==(null==r?void 0:r.platformVersion))return!1;const o=parseInt(r.platformVersion.split(".")[0]);return o>0&&o<13}()&&function(e,t){var n;const i=e.localizedStrings,r=e.onlyEnableCoachmarkHeading?null==i?void 0:i.pinProng1BannerDescription1:null==i?void 0:i.pinProng1CoachmarkHeadingText,o=e.onlyEnableCoachmarkHeading?" ":null==i?void 0:i.pinProng1CoachmarkBodyText,a={id:Gt.B.PinProng1Flyout,group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:Wt.dm.Large,position:Wt.pY.BottomEnd},contentModel:{title:(null==e?void 0:e.pinProng1CoachmarkHeadingText)||r||"Open Windows News and Interests to see your weather, sports, finance, and so much more!",description:(null==e?void 0:e.pinProng1CoachmarkBodyText)||o||" ",contentType:Ht.J.CallToAction,contentImage:{url:`${C.jG.StaticsUrl}/latest/windowsShell/images/pin-over-v2.png`,altText:"Image Alt Text"},dismissContentAction:{label:(null==e?void 0:e.pinProngCloseBtnLabel)||(null==i?void 0:i.pinProngCloseBtnLabel)||"No thanks"},engageContentAction:{label:(null==e?void 0:e.pinProngEngageBtnLabel)||(null==i?void 0:i.pinProngEngageBtnLabel)||"Try it now",actionDelegate:()=>{window.open(t,"_self")}}}},s=[(0,$t.H)("Viewed",Kt),(0,qt.l)("Viewed",Qt),(0,qt.l)("Dismissed",1),(0,qt.l)("Closed",1),(0,qt.l)("Engaged",1)];null===(n=(0,Vt.$0)())||void 0===n||n.sendInternalPlacement(a,s)}(i,"ms-newsandinterests:?pc=ntp_repin")):ae.M0.removeTmplProperty("coachmarkToPinProng1")),null!=i&&null!==(n=i.optInFeedLayoutCMConfig)&&void 0!==n&&n.enabled){const e=an(i,l);p.push(e)}return a&&await async function(e){var t;const{config:n,isFromWidgetLockScreen:i,onScrollPromise:r,onSocialPromise:a,layoutState:s,pageSettingsDataConnector:c}=e;await(0,ye.hK)();const d=await(0,ye.y3)();if(!d||!d.length)return;const l=await(null===(t=(0,Jt.Un)())||void 0===t?void 0:t.getInteractions());ae.M0.addOrUpdateTmplProperty("lsUserJourney_Coachmarks","1"),Promise.any([r,a]).then((()=>{ae.M0.addOrUpdateTmplProperty("lsPersonalize_NewLayoutCM","1"),tn(n,l,d),Xt(n,s,c,l,d)})),await async function(e){var t;let n=!1;const i=new URLSearchParams(window.location.search);null!=i&&i.get("forceLocationCoachmark")&&(n=!0);const r=await(0,Ne.h_)(_e._.weatherHeroExperience);if(!r)return;if(un=(0,wt.K0)(o.z.WeatherCardData),!un)return;const a=un.getCurrentState();if(a&&1==(null==a?void 0:a.locationDetectionSetting))ae.M0.addOrUpdateTmplProperty("LockScreenLocationTypeRevIp","1");else if(!n)return;const{title:s,engageContentActionLabel:c,dismissContentActionLabel:d}=e.localizedStrings.LockScreenLocationCoachmark,l={id:Gt.B.LockScreenLocationCoachmark,group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:Wt.dm.Small,position:{coachmarkAnchor:r,anchoringPosition:Wt.RC.Above,hasPointer:!0,pointerPosition:Wt.Jt.Adjacent}},contentModel:{title:s||"Did we get your location right?",description:"",contentType:Ht.J.CallToAction,engageContentAction:{label:c,actionDelegate:()=>{}},dismissContentAction:{label:d,actionDelegate:()=>{window.dispatchEvent(new CustomEvent("openWeatherHeroLocationEdit"))}}}},u=[(0,qt.l)("Viewed",3),(0,$t.H)("Viewed",3*ln.y),(0,qt.l)("Dismissed",1),(0,qt.l)("Closed",3),(0,qt.l)("Engaged",1)];null===(t=(0,Vt.$0)())||void 0===t||t.sendInternalPlacement(l,u)}(n)}(e),()=>{p.forEach((e=>{e()}))}}const mn=e=>{const{selectedQuickLinksDisplaySetting:t}=e.layoutState,n=!e.childRefs.recommendedSites||"off"===e.recommendedSitesDisplaySetting;return e.isFeedAlways&&n&&"off"!==t},fn=e=>{var t;const{selectedFeedDisplaySetting:n,selectedQuickLinksDisplaySetting:i}=e.layoutState;let r=16;var o;if(e.childRefs.newsHeadlineBelowSearchbox&&-1===(null===(t=e.notSupportLayout)||void 0===t?void 0:t.indexOf(n))&&(r=32),e.isFeedAlways&&"off"!==i)e.childRefs.newsHeadlineBelowSearchbox&&-1===(null===(o=e.notSupportLayout)||void 0===o?void 0:o.indexOf(n))?r-=32:r-=16;else if("off"===i&&(e.marqueeAdActive&&e.config.enableMarqueeAdV3||e.childRefs.recommendedSites&&e.config.enableReducedTSMarginInRS&&"off"!==e.recommendedSitesDisplaySetting))return 10;return r},vn=e=>{let t=e.edgeHeaderTopMarin+e.topBannerOffsetHeight;return e.enableOneColumn&&(t=32),t},yn=e=>{const{isTwoRowTopSites:t,isOneRowTopSites:n}=(e=>{const{layoutState:t,topSitesLayoutState:n}=e,{selectedQuickLinksDisplaySetting:i}=t;let r,o;return void 0!==(null==n?void 0:n.actualRowCount)?(r=2===(null==n?void 0:n.actualRowCount),o=1===(null==n?void 0:n.actualRowCount)):(r="tworows"==i,o="onerow"==i),{isTwoRowTopSites:r,isOneRowTopSites:o}})(e);return n?60:t?130:0},Sn=e=>mn(e)?10:(e=>{const{selectedQuickLinksDisplaySetting:t}=e.layoutState,n=!e.childRefs.recommendedSites||"off"===e.recommendedSitesDisplaySetting;return e.isFeedAlways&&n&&"off"===t})(e)?6:e.childRefs.recommendedSites?"off"!==e.layoutState.currentBackgroundImageType&&e.childRefs.weatherOneLiner&&"off"===e.layoutState.selectedFeedDisplaySetting?80:"headingsonly"===e.layoutState.selectedFeedDisplaySetting&&e.childRefs.scrollDownButton?60:0:30,Cn=e=>e.marqueeAdActive?e.marqueeAdPlaceholderHeight:0,wn=e=>{const t=[vn(e),46,fn(e)],n={searchRow:(e.searchRow,2),topSitesRow:e.topSitesRow,marqueeAdRow:e.marqueeAdRow,recommendedSitesRow:e.recommendedSitesRow,logoRow:(e.logoRow,0)};if("off"!==e.layoutState.selectedQuickLinksDisplaySetting){const i=(e=>{let t=16;return mn(e)&&(t=10),e.marqueeAdActive&&!e.config.enableMarqueeAdV3&&(t+=e.marqueeAdHeight),t})(e);if(t.push(i,yn(e),Sn(e)),n.topSitesRow=5,e.config.enableMarqueeAdV3&&t.splice(t.length-1,0,Cn(e)),n.marqueeAdRow=6,e.childRefs.recommendedSites){const i=8;t.splice(n.topSitesRow,0,i,e.recommendedSitesHeight),n.recommendedSitesRow=7}}else{if(e.recommendedSitesHeight>0){const i=e.config.enableReducedTSMarginInRS?12:16;t.push(Cn(e),i,e.recommendedSitesHeight,Sn(e)),n.recommendedSitesRow=6}else t.push(Cn(e),Sn(e));n.marqueeAdRow=4}return e.config.feedPushDownForNonDAU&&function(){try{var e,t;const n=rn.k.getWpoTreatmentsWithType(nn._h.uxMessage),i=(null==n?void 0:n.length)>0&&null!==(e=n[0])&&void 0!==e&&e.properties?null===(t=n[0])||void 0===t?void 0:t.properties:null;if(i&&i.featUX)return ae.M0.addOrUpdateTmplProperty("wpopromuxmsg",i.featUX),!0}catch(e){const t="Error in getting wpo uxmessge promotion data";(0,de.H)(ce.Od5,t,`error:${e}`)}return!1}()&&(0,et.N)()&&!window.isSSRCompleted&&(ae.M0.addOrUpdateTmplProperty("featuxaffecting",`${e.config.feedPushDownForNonDAU}`),(0,v.$o)().setItem("featuxaffected",`${e.config.feedPushDownForNonDAU}`),t.push(e.config.feedPushDownForNonDAU)),{rows:t,rowIndexes:n}},bn="localhost.msn.com"===(0,Ge.Td)(),Tn=300,kn="gaming",Pn=(0,me.AF)("feedManager",(()=>Promise.all([n.e("common-others"),n.e("common-windows-widget-shared"),n.e("common-feed-libs"),n.e("common-cscore"),n.e("common-fast-msft-web-components"),n.e("libs_experiences-telemetry_dist_object-creation_overloads_content-telemetry_ContentObjectOver-93ee98"),n.e("libs_sports-data-service_dist_SportsDataMapper_js"),n.e("nas-highlight-v1"),n.e("libs_feed-layout_dist_card-templates_top-stories-card_TopStoriesCardDataMapper_js-libs_feed-l-0915c9"),n.e("libs_super-feed_dist_feed-manager_FeedManagerWithClientAd_js-libs_wpo_dist_promotions_FeedCFH-c8a1de"),n.e("weather-card-wc-ntp")]).then(n.bind(n,38595)).then((e=>e.FeedManagerWithClientAd)))),An=(0,me.AF)("layoutTemplates",(()=>n.e("feedDependencies").then(n.bind(n,29772)).then((e=>e.AnaheimLayoutTemplateMap)))),In=(0,me.AF)("feedDependenciesGaming",(()=>Promise.all([n.e("common-others"),n.e("common-windows-widget-shared"),n.e("common-feed-libs"),n.e("common-cscore"),n.e("common-fast-msft-web-components"),n.e("libs_experiences-telemetry_dist_object-creation_overloads_content-telemetry_ContentObjectOver-93ee98"),n.e("libs_sports-data-service_dist_SportsDataMapper_js"),n.e("nas-highlight-v1"),n.e("libs_feed-layout_dist_card-templates_top-stories-card_TopStoriesCardDataMapper_js-libs_feed-l-0915c9"),n.e("libs_super-feed_dist_feed-manager_FeedManagerWithClientAd_js-libs_wpo_dist_promotions_FeedCFH-c8a1de"),n.e("experiences_edge-chromium-page-wc_dist_feedDependenciesGaming_js")]).then(n.bind(n,1272))));class En extends xe.l{constructor(){super(...arguments),this.isWeatherOneLinerMapped=!1,this.showWeatherOneLiner=!1,this.isPersonalizedTopicsInOneLiner=!0,this.isWpoOptimizationAdded=!1,this.showFeedTranslucent=!0,this.showDarkIcon=!1,this.needDarkThemeIcons=!1,this.enableHiddenRecommendedSitesStyles=!1,this.isTtvrFiredAndCanUseDom=!1,this.edgeHeaderTopMarin=10,this.hideComplianceLink=!1,this.isNotificationEnabledByAdmin=!0,this.isShowMSRewardsAllowedByPolicy=!0,this.isShowRewardsAllowedByLocation=!1,this.isAppLauncherAllowedByPolicy=!0,this.onScrollSettablePromise=new _.o,this.onSocialBarReactedSettablePromise=new _.o,this.className="",this.canaryFlightEnabled=!1,this.holidayEffectsPosition="display: none;",this.displayConditionalBanner=!1,this.isOnPersonalizeOrM365Page=!1,this.nowPivotId="",this.hideQuickLinks=!1,this.isNewTabPageContentManagedByPolicy=!1,this.pulseData=[],this.pulseOnHover=!1,this.hideSearchHistory=!1,this.headerCoreOffset=0,this.stickyHeaderHeight=x.FQ,this.navHeight=x.A$,this.enableNotificationAnimation=!1,this.searchStickyBreakpoint=0,this.copilotMuseumCardIsShown=!1,this.copilotCoachMarkIsShown=!1,this.messages=[],this.isScrollDownButtonDismissed=!1,this.scrollCanTrigChannelStoreCoachmark=!0,this.numInfopaneTabChangeClicks=0,this.topSitesQuickLinkEndMarginUsedPadding=0,this.museumCardShown=!1,this.scrollIsPastStyleThreshold=!0,this.invisibleTopSites=!1,this.invisibleSearchBox=!1,this.invisibleRecommendedSites=!1,this.msNtpExpBitmask="",this.headingsOnlyHeightReduction=0,this.overriddenFeedConfig=null,this.overlapState={state:0,feedbackState:0},this.isFeedRendered=!1,this.feedHasLoaded=!1,this.shouldRenderToastWC=!1,this.telemetryTags={},this.marqueeAdActive=!1,this.marqueeAdOverlayHeight=0,this.marqueeAdHeight=0,this.marqueeAdPlaceholderHeight=0,this.pageHiddenStartTime=null,this.pageHiddenStartAnalyzeTime=null,this.pageVisiblyChangeAnalyzeStartTime=null,this.headerGridHidden=!1,this.pageHiddenAnalyzeStatusVisible=null,this.pageHiddenAnalyzeIsPreRender=!1,this.pageVisiblyChangeAnalyzeIsPreRender=!1,this.shouldAutoScroll=!1,this.shouldShrinkHeader=!1,this.documentHasBeenViewed=!1,this.handleDocumentVisibilityChange=()=>{"always"===this.layoutState.selectedFeedDisplaySetting&&this.documentVibilityState!=document.visibilityState&&(this.documentVibilityState=document.visibilityState,"visible"===document.visibilityState&&(this.documentHasBeenViewed?(this._scrollToShowFeed({withRefresh:!1,scrollOnlyAboveTheTargetPosition:!0,withAnimation:!1}),ae.M0.addOrUpdateTmplProperty("ScrollToShowFeedAfterBack","1")):this.documentHasBeenViewed=!0))},this.skeletonObserverCallback=()=>{var e;this.isFeedContentDisplayed()&&(this.showSkeleton=!1,this.skeletonEleFromSSR&&(this.skeletonEleFromSSR.remove(),this.skeletonEleFromSSR=null),null===(e=this.skeletonObserver)||void 0===e||e.disconnect())},this.recommendedSitesSelection=e=>{null!=e&&e.detail&&(this.recommendedSitesDisplaySetting=(null==e?void 0:e.detail.key)??this.recommendedSitesDisplaySetting,this.updateHeaderGrid(),this.refreshHeaderHeight(),this.calculateTopAndBackgroundStickyBreakpoints())},this.checkThemeColorIcons=()=>{if(this.needDarkThemeIcons=!1,!(0,et.N)()){var e;const t=null===(e=g.Al.EdgeNTPHeader)||void 0===e?void 0:e.backgroundImage;return void(t&&"Theme"==t.provider&&t.darkIcons&&(this.needDarkThemeIcons=t.darkIcons))}if("theme"!=this.layoutState.currentBackgroundImageType||!this.layoutState.ntpTheme)return;const t=this.layoutState.configData,n=t&&t.enabledFeatures&&t.enabledFeatures.includes("msAllowThemeInstallationFromChromeStore"),i=this.layoutState.ntpTheme&&this.layoutState.ntpTheme.usingDefaultTheme;n&&!i&&(this.needDarkThemeIcons=!this.layoutState.ntpTheme.isNtpBackgroundDark)},this.updateDarkIconValue=e=>{e&&(this.showDarkIcon=!(!e.detail||!this.config.enableHolidayBg||(0,U.Y)()))},this.displayQuickLinks=()=>{this.hideQuickLinks=!1,this.topSitesHolder.style.visibility="",this.updateAfterWheelingToDisplayMore()},this.updateFeedLayoutFromDropdown=e=>{var t;const n=e.detail,i=this.layoutState?this.layoutState.currentLayout:L.L_.currentLayout,r=null===(t=this.layoutState)||void 0===t?void 0:t.selectedFeedDisplaySetting;let o=(0,R.j)(n,this.layoutState.currentBackgroundImageType,this.layoutState.greetingEnabled,this.layoutState.hideDefaultTopSites);if(this.backgroundGalleryEligibility&&"off"!==this.layoutState.currentBackgroundImageType&&(o=Tt.p.shouldOverrideLayoutToCustomCache()?"custom":o),i!==o){var a;let e;if("custom"!==o){const t=L.Wi[o];e={currentBackgroundImageType:t.current_background_image_type,originalLayout:i,currentLayout:o,greetingEnabled:t.greeting,imageOfTheDayEnabled:"off"!==t.current_background_image_type,quickLinksEnabled:t.quick_links,hideDefaultTopSites:t.hide_promoted_links,selectedFeedDisplaySetting:n}}else e={...this.layoutState,originalLayout:i,currentLayout:o,selectedFeedDisplaySetting:n};null===(a=this.pageSettingsDataConnector)||void 0===a||a.updateLayout(e)}else{var s;null===(s=this.pageSettingsDataConnector)||void 0===s||s.updateFeeds(n,r)}},this.updateAfterWheelingToDisplayMore=()=>{this.calculateStickyBreakpoints(),this.hideSearchHistory=!1,this.updateHeaderCoreBelowSearchData(),this.refreshHeaderHeight(),window.removeEventListener("wheel",this.quickLinksToggle)},this.updatePulseOnHover=e=>{this.pulseOnHover=e.detail},this.quickLinksToggle=e=>{if("always"!==this.layoutState.selectedFeedDisplaySetting)return;const{selectedQuickLinksDisplaySetting:t}=this.layoutState;if(!["onerow","tworows"].includes(t))return;0===(document.documentElement?document.documentElement:document.body).scrollTop&&e.deltaY<0&&this.hideQuickLinks&&this.displayQuickLinks()},this.dismissNotificationMiniCard=(e="manual")=>{It.u.dismissNotificationMiniCard(e)},this.areNavTopSitesOverlapping=(0,Fe.Z)((()=>{if("hidden"===document.visibilityState||!this.nav||!this.topSitesHolder||"hidden"===this.topSitesHolder.style.visibility||!this.topSitesHolder.children.length||"1"!==this.topSitesHolder.style.opacity&&""!==this.topSitesHolder.style.opacity)return;if(this.topSitesHolder.children[0]&&0===this.topSitesHolder.children[0].offsetHeight)return;const e=this.nav.getBoundingClientRect(),t=this.topSitesHolder.getBoundingClientRect();this.checkAndLogRectsOverlapping(e,t)}),500),this.initFeedDependencies=e=>{e===kn?this.getFeedDependencyPromise=In().then((({FeedManagerWithClientAd:e,GamingLayoutTemplateMap:t})=>{const n=t,i=new e({disablePreloadLikelyExperiences:"informational"!==this.layoutState.currentLayout});return this.msNtpExpBitmask&&(i.edgExpMask=this.msNtpExpBitmask),{feedManager:i,layoutTemplateMap:n}})):this.config.layout3LazyTemplates&&this.isWaterfallFeed(e)?this.getFeedDependencyPromise=Pn().then((e=>{const t=new e({disablePreloadLikelyExperiences:"informational"!==this.layoutState.currentLayout});return(0,et.N)()&&this.config.enableChannelFiltering&&Lt.yg.setFeedManager(t),this.msNtpExpBitmask&&(t.edgExpMask=this.msNtpExpBitmask),{feedManager:t,importLayoutTemplateMap:An,layoutTemplateMap:void 0}})):this.getFeedDependencyPromise=Promise.all([Pn(),An()]).then((([e,t])=>{const n=t,i=new e({disablePreloadLikelyExperiences:"informational"!==this.layoutState.currentLayout});return(0,et.N)()&&this.config.enableChannelFiltering&&Lt.yg.setFeedManager(i),this.msNtpExpBitmask&&(i.edgExpMask=this.msNtpExpBitmask),{feedManager:i,layoutTemplateMap:n}})),this.getFeedDependencyPromise.catch((t=>{const n={...ce.dp6.pb,stack:t.stack};(0,Ft.Y)(ce.dp6.id),(0,de.H)(ce.dp6,`Failed to load feedDependencies bundle for ${e}. ${t.message||""}`,void 0,n)}))},this._scrollToShowFeed=async(e={withRefresh:!1,scrollOnlyAboveTheTargetPosition:!1,withAnimation:!0,disableScroll:!1,showRefreshLoading:!1})=>{var t;e={withRefresh:!1,scrollOnlyAboveTheTargetPosition:!1,withAnimation:!0,disableScroll:!1,showRefreshLoading:!1,...e??{}};const n=(0,Re.Nu)(z);if(n&&!e.disableScroll){var i,r,o;if(!(null!==(i=e)&&void 0!==i&&i.scrollOnlyAboveTheTargetPosition&&document.documentElement.scrollTop>n-8))window.scrollTo({top:n-8,behavior:null!==(o=e)&&void 0!==o&&o.withAnimation?"smooth":"auto"});null!==(r=this.config)&&void 0!==r&&null!==(r=r.optInFeedLayoutCMConfig)&&void 0!==r&&r.enabled&&window.dispatchEvent(new CustomEvent(j,{detail:{source:e.source}}))}if(null!==(t=e)&&void 0!==t&&t.withRefresh){e.showRefreshLoading&&(this.showPivotRefreshButton=!0);const{feedManager:t}=await this.getFeedDependencyPromise,n=t.callRefreshRegionsData({invalidateCache:!0,scrollToTop:!1});e.showRefreshLoading&&n.finally((()=>this.showPivotRefreshButton=!1)),ae.M0.sendPageView({page:{name:"IAR",isAutoRefresh:!1}}),window.dispatchEvent(new CustomEvent("RefreshPillResetAbsoluteTimer"))}},this.scrollToShowFeed=()=>{this._scrollToShowFeed()},this.scrollToShowFeedWithRefresh=()=>{this._scrollToShowFeed({withRefresh:!0})},this.changeContentOffToVisible=()=>{const e=(0,wt.K0)(o.z.ChromiumPageSettings);e&&e.updateFeeds("always","off","scrollDownButton")},this.getExperienceConfigInfo=(e,t=e,n="default")=>({instanceId:e,configRef:{experienceType:t,instanceSrc:n}}),this.copilotShowCard=e=>{this.removeEventListener(),e&&(this.close_CoachMarkTelemetry(),this.onClick_openCopilotButton())},this.setShowWeatherOneLiner=(e,t)=>{this.showWeatherOneLiner=e,this.isPersonalizedTopicsInOneLiner=t},this.setIsWeatherOneLinerMapped=e=>{this.isWeatherOneLinerMapped=e},this.onClick_openCopilotButton=()=>{this.copilotMuseumCardIsShown=!0,this.copilotMuseumCardIsShown&&window.setTimeout((()=>{this.initEventListener()}),0)},this.close_CopilotCardTelemetry=()=>{this.copilotMuseumCardIsShown&&(this.copilotMuseumCardIsShown=!1,this.removeEventListener())},this.close_CoachMarkTelemetry=()=>{this.copilotCoachMarkIsShown&&(this.copilotCoachMarkIsShown=!1)},this.onClick_pickMessageItem=async e=>{await window.chrome.edgeMarketingPagePrivate.showFeatures(`hub_apps_cd4688a9-e888-48ea-ad81-76193d56b1be?scope=chat&form=f123&prompt=${e}`),this.close_CopilotCardTelemetry(),this.close_CoachMarkTelemetry()},this.onHover_coachMark=()=>{this.close_CoachMarkTelemetry(),this.onClick_openCopilotButton()},this.onClick_coachMark=async()=>{this.close_CoachMarkTelemetry(),this.onClick_openCopilotButton(),await window.chrome.edgeMarketingPagePrivate.showFeatures(`hub_apps_cd4688a9-e888-48ea-ad81-76193d56b1be?scope=chat&form=f123&prompt=${this.messages[0].content}`)},this.initEventListener=()=>{document.addEventListener("click",this.handleDocumentClick)},this.onClick_marqueeAdClose=()=>{this.marqueeAdActive=!1,this.marqueeAd&&this.marqueeAd.optOutUrl&&Bt.o.sendBeacons([this.marqueeAd.optOutUrl]),this.backgroundDataConnector&&this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1)},this.handleDocumentClick=e=>{const t=e.composedPath()[0];this.copilotMuseumCardIsShown&&!this.isClickInsideElement(t)&&this.close_CopilotCardTelemetry()},this.isClickInsideElement=e=>{var t,n;const i=null===(t=this.shadowRoot)||void 0===t||null===(n=t.getElementById)||void 0===n?void 0:n.call(t,"copilotMuseumTemplate");return i&&i.contains(e)},this.removeEventListener=()=>{document.removeEventListener("click",this.handleDocumentClick)},this.topSitesIntersectionObserverCallback=e=>{if(this.topSitesHolder&&(!this.layoutState.quickLinksEnabled||"off"===this.layoutState.selectedQuickLinksDisplaySetting))return this.topSitesHolder.style.opacity="0",void(this.topSitesHolder.style.visibility="hidden");this.topSitesHolder.style.opacity="1",this.topSitesHolder.style.pointerEvents="",this.topSitesHolder.style.zIndex=""},this.setupTopSitesIntersectionObserver=()=>{const e={root:null,rootMargin:"-117px 0px 0px 0px",threshold:[.99]};this.topSitesObserver=new IntersectionObserver(this.topSitesIntersectionObserverCallback,e),this.topSitesObserver.observe(this.topSitesHolder)},this.onResize=()=>{this.refreshHeaderHeight(),this.config.cssImageHeight||this.refreshImageHeight(),this.calculateStickyBreakpointsDebounced(),this.renderBackgroundGallery&&this.checkGalleryPageFitAndDisplayToast(),this.renderMarketLanguageToggle&&this.checkMarketToggleFitOnPage(),this.overlapStateChange()},this.onScroll=(0,m.k)((()=>{if(this.onScrollSettablePromise.set(),this.marqueeAdActive){var e,t;this.isFeedAlways?this.updateMarqueeAdHeightsForFeedAlways():this.updateHeaderGrid();const n=0===window.scrollY,i=null===(e=this.shadowRoot)||void 0===e||null===(t=e.querySelector)||void 0===t?void 0:t.call(e,"cs-header-core");i&&(n?(i.start.classList.remove("header_hidden"),i.end.classList.remove("header_hidden")):(i.start.classList.add("header_hidden"),i.end.classList.add("header_hidden")))}const n=window.scrollY<100,i=window.scrollY>x.FT;if(n==this.scrollIsPastStyleThreshold&&i==this.navIsSticky||(this.scrollIsPastStyleThreshold=n,this.navIsSticky=i,this.refreshTranslucentMode()),this.scrollCanTrigChannelStoreCoachmark){const e=620;window.scrollY>e&&this.triggerChannelStoreCoachmark()}window.scrollY,x.FT,this.recommendedSitesHeight;if(this.navIsSticky&&ae.M0.addOrUpdateTmplProperty("StickyBreakpointTriggered","1"),this.config.translucentFeed&&"off"!==this.layoutState.currentBackgroundImageType&&"theme"!==this.layoutState.currentBackgroundImageType&&(0,f.j3)("backgroundImage","displayed"),this.config.complianceHyperlink&&this.updateComplianceLinkStyleOnScroll(),this.config.noBckImgOnNavSticky){const e="off"===this.layoutState.currentBackgroundImageType||this.navIsSticky;this.showBackplate=e,(0,f.j3)("backgroundImage",e?"hidden":"displayed")}var r,o;(this.updateHeaderCoreOffset(),"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&this.childRefs.scrollDownButton)&&(this.scrollDownButton=null===(r=(o=this.shadowRoot).querySelector)||void 0===r?void 0:r.call(o,"#scrollDownBtnHolder"),this.scrollDownButton&&(this.scrollDownButton.style.display=0!==scrollY?"none":"flex"));this.config.showCodexBingIcon&&this.updateHeaderCoreSearchData(),("focused"===this.layoutState.currentLayout||"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&"custom"===this.layoutState.currentLayout&&"off"===this.layoutState.currentBackgroundImageType)&&this.focusFeedBorderScrollFade()})),this.onClickForTrigChannelStoreCoachmark=e=>{if(this.dwellTimerForChannelStoreCoachmark&&(window.clearTimeout(this.dwellTimerForChannelStoreCoachmark),this.dwellTimerForChannelStoreCoachmark=null),this.scrollCanTrigChannelStoreCoachmark){e.composedPath().find((e=>"A"===e.tagName))&&(window.removeEventListener("click",this.onClickForTrigChannelStoreCoachmark),this.scrollCanTrigChannelStoreCoachmark=!1)}},this.onClickInfopaneFlipperTab=()=>{this.numInfopaneTabChangeClicks+=1,2===this.numInfopaneTabChangeClicks&&this.triggerChannelStoreCoachmark()},this.onClickInfopaneAnchor=()=>{window.removeEventListener("infopaneFlipperTabClicked",this.onClickInfopaneFlipperTab),window.removeEventListener("infopaneAnchorTagClicked",this.onClickInfopaneAnchor)},this.buildFocusBorderStyleClasses=()=>"focused"===this.layoutState.currentLayout||"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&"custom"===this.layoutState.currentLayout&&"off"===this.layoutState.currentBackgroundImageType?"navAndContent_border_shadow "+(0!=window.scrollY?"navAndContent_noshadow":""):"",this.updateComplianceLinkStyleOnScroll=()=>{const e=window.scrollY>0;e!==this.hideComplianceLink&&(this.hideComplianceLink=e,this.hideComplianceLink?this.complianceHyperlink&&this.complianceHyperlink.classList.add("complianceHyperlink_hide"):this.complianceHyperlink&&this.complianceHyperlink.classList.remove("complianceHyperlink_hide"))},this.calculateStickyBreakpointsDebounced=(0,Fe.Z)(this.calculateStickyBreakpoints,Tn),this.getCompanyLogoFromLocalStorage=()=>{const e=(0,v.$o)().supported&&(0,v.$o)().getObject("companyLogo",null);if(!e||!e.default_logo)return"";return!this.layoutState.imageOfTheDayEnabled||!e.light_logo?e.default_logo||"":e.light_logo||""},this.onFlyoutEvent=(e,t)=>{var n,i,r,o,a,s,c,d;let l;switch(e){case y.tk.settings:case y.tk.feedSettings:case y.tk.msRewards:case y.tk.notificationBell:case y.tk.signInControl:case y.tk.mobileAppUpsell:l=null===(n=this.headerCoreRef)||void 0===n?void 0:n.end;break;case y.tk.search:case y.tk.imageSearch:case y.tk.voiceSearchWC:l=null===(i=this.headerCoreRef)||void 0===i?void 0:i.core;break;case y.tk.searchHistoryMoreOptions:case y.tk.newsHeadlineBelowSearchboxMoreOptions:l=null===(r=this.headerCoreRef)||void 0===r?void 0:r.belowSearch;break;case y.tk.waffle:case y.tk.editWelcomeGreeting:l=null===(o=this.headerCoreRef)||void 0===o?void 0:o.start;break;case y.tk.addTopSite:case y.tk.editTopSite:case y.tk.topSiteOverflowPanel:l=this.topSitesHolder;break;case y.tk.museumCard:this.museumCardShown=t;break;case y.tk.locationMarkerCard:l=null===(a=this.shadowRoot)||void 0===a||null===(s=a.getElementById)||void 0===s?void 0:s.call(a,"locationMarkerHolder");break;case y.tk.recommendedSitesSetting:l=null===(c=this.shadowRoot)||void 0===c||null===(d=c.getElementById)||void 0===d?void 0:d.call(c,"recommendedSites")}if(l&&(l.style.zIndex=t?S.K.Flyout.toString():null),l&&e===y.tk.settings&&(l.style.zIndex=t?S.K.Flyout.toString():null),e===y.tk.topSiteOverflowPanel&&(l.style.zIndex=t?(S.K.Flyout+1).toString():null),e!==y.tk.hamburgerMenu&&e!==y.tk.navOverflow||this.headerCoreRef&&(this.headerCoreRef.style.zIndex=t?"302":(S.K.Nav+2).toString()),e===y.tk.toast&&(this.topSitesHolder.style.zIndex=t?(S.K.Nav+1).toString():(S.K.Over+3).toString()),e===y.tk.actionMenuOpen){var u,p;const e=null===(u=this.shadowRoot)||void 0===u||null===(p=u.getElementById)||void 0===p?void 0:p.call(u,"g_nav");null!=e&&e.style&&(e.style.zIndex=t?"0":"")}},this.switchListenerCallback=e=>{var t;if(ae.M0.addOrUpdateTmplProperty("fl","1"),this.isOnPersonalizeOrM365Page=!1,this.isOnM365Page=!1,this.nowPivotId=(null==e||null===(t=e.newSelection)||void 0===t?void 0:t.pivotId)||"",e&&e.newSelection){const t=e.newSelection;ae.M0.addOrUpdateTmplProperty("fl","2"),this.config.enableGridViewFeed||ae.M0.addOrUpdateTmplProperty("pagepivot_selectedPivot",JSON.stringify(t.pivotId)),this.startContentLoad(t.configIndexRef,t.context,void 0,t.pivotId),this.isOnM365Page="productivityhub"===t.pivotId.toLocaleLowerCase(),this.isOnPersonalizeOrM365Page="myInterests"===t.pivotId||this.isOnM365Page||"navigationPage"===t.pivotId}e.oldSelection&&!this.transitionFromContentOff&&this.scrollToShowFeed(),this.transitionFromContentOff=!1},this.handleColumnArrangementChange=e=>{if(this.columnArrangement=e,this.enableOneColumn=this.config.enableOneColumn&&"c1"===this.columnArrangement,ae.M0.addOrUpdateTmplProperty("pageColumn",this.columnArrangement),this.config.enableMarqueeAd&&this.updateMarqueeAdHeightByColumn(e),(0,et.N)()){var t,n;const e=null===(t=this.shadowRoot)||void 0===t||null===(n=t.querySelector)||void 0===n?void 0:n.call(t,"background-image");e&&(e.recommendedSitesHeight=this.recommendedSitesHeight)}ae.M0.updatePageMetadata({page:{viewType:(0,W.vi)()}},!0),this.config.companyLogo&&(this.showCompanyLogo=!("c1"===this.columnArrangement||"c2"===this.columnArrangement)),this.updateHeaderGrid(),this.refreshHeaderHeight(),this.updateHeaderCoreData()},this.onHeaderSpaceHolderTransitionEnd=()=>{st.I.headerTransitionEnd.getActionSender(this.pageSettingsDataConnector).send()},this.onMarketValueChange=async e=>{var t;(this.pageSettingsDataConnector||(this.pageSettingsDataConnector=(0,wt.K0)(o.z.ChromiumPageSettings)),e&&this.pageSettingsDataConnector)&&(null===(t=F.V.marketUpdated.getActionSender(this.pageSettingsDataConnector))||void 0===t||t.send(e),(0,it.yV)(2))},this.updateLanguageToggle=()=>{if("language"==C.jG.MarketMismatchDetail.type){const e=this.targetLanguageOnMismatch(a);e&&(this.renderMarketLanguageToggle=!0,this.localeMarket=e,"marketmismatch"===C.jG.LanguageRegionMismatchExplicit?ae.M0.addOrUpdateTmplProperty("marketMismatchToggleForExplicitMismatch","1"):"marketmismatch"===C.jG.LanguageRegionMismatch&&ae.M0.addOrUpdateTmplProperty("marketMismatchForToggle","1"))}},this.setOverriddenFeedConfig=e=>{this.overriddenFeedConfig={...e}},this.saveViewportInPref=()=>{if((0,et.N)()){const{innerWidth:e,innerHeight:t}=window;fe.U.savePreferenceSetting(ve.Xm.viewport,{width:e,height:t},!1)}},this.focusControlOnWheel=e=>{this.blurGridViewWhenActive(e.target)},this.focusControlOnScrollKeyUp=e=>{"PageDown"!=e.key&&"PageUp"!=e.key||this.blurGridViewWhenActive(e.target)},this.handleSocialBarReaction=e=>{const{id:t,reactionType:n}=e.detail;t&&n&&[oe.FE.upvote,oe.FE.downvote].includes(n)&&this.onSocialBarReactedSettablePromise.set()},this.openChannelStore=e=>{this.renderChannelStoreEvent=e,window.removeEventListener(K,this.openChannelStore)},this.updateMarqueeAdHeightByColumn=e=>{const{selectedQuickLinksDisplaySetting:t}=this.layoutState;if(this.config.enableMarqueeAdV3)switch(e){case H.K$.c1:case H.K$.c2:this.marqueeAdHeight=ee[t].Small,this.marqueeAdPlaceholderHeight=te[t].Small;break;case H.K$.c3:this.marqueeAdHeight=ee[t].Medium,this.marqueeAdPlaceholderHeight=te[t].Medium;break;case H.K$.c4:case H.K$.c5:this.marqueeAdHeight=ee[t].Large,this.marqueeAdPlaceholderHeight=te[t].Large}else e===H.K$.c1||e===H.K$.c2?this.marqueeAdHeight=X:this.marqueeAdHeight=Z},this.overlapStateChange=(0,Fe.Z)((async()=>{if(!(0,et.N)()||!this.navAndContentFeedRef)return void(this.overlapState={state:0,feedbackState:0});const e=((0,w.Nd)((new w.fH).data.innerWidth,"innerWidth")-this.navAndContentFeedRef.getBoundingClientRect().width)/2,t=await(0,Ne.h_)(_e._.floatButtonGroupWC);let n,i;i=e>=(t?t.getBoundingClientRect().width+12:42)?0:e<=0?2:1,n=e>=42?0:e<=0?2:1,this.overlapState={state:n,feedbackState:i}}),10),this.lowEndDeviceHandler=e=>{var t;this.isLowEndDevice=(null==e||null===(t=e.detail)||void 0===t?void 0:t.isLowEndDevice)??!1},this.setMarqueeV3ExtraClassName=e=>{switch(e){case H.K$.c1:case H.K$.c2:this.marqueeAdExtraClass="marqueeAdSmallV3";break;case H.K$.c3:this.marqueeAdExtraClass="marqueeAdMediumV3";break;case H.K$.c4:case H.K$.c5:this.marqueeAdExtraClass="marqueeAdLargeV3"}},this.wpoOptimizationAddedHandler=()=>{this.isWpoOptimizationAdded=!0,window.removeEventListener("wpoOptimizationAdded",this.wpoOptimizationAddedHandler)},this.handleFeedRefreshWhenPageHiddenVisibilityChange=()=>{if("hidden"===document.visibilityState&&null===this.pageHiddenStartTime)this.pageHiddenStartTime=Date.now();else if("visible"===document.visibilityState&&this.pageHiddenStartTime){const e=Date.now()-this.pageHiddenStartTime;this.config.enableAddRefreshTmpl&&ae.M0.addOrUpdateTmplProperty("FRTel1","1"),this.config.enableRefreshWhenPageHidden&&this.config.pageRefreshIntervalTimeMin&&"headingsonly"!==this.layoutState.selectedFeedDisplaySetting&&"off"!==this.layoutState.selectedFeedDisplaySetting&&e>=6e4*this.config.pageRefreshIntervalTimeMin&&(ae.M0.addOrUpdateTmplProperty("FeedROF",[1,e,this.headerGridHidden?1:0].join("|")),this._scrollToShowFeed({withRefresh:!0,disableScroll:!this.headerGridHidden,showRefreshLoading:!0})),this.pageHiddenStartTime=null}},this.handleFeedRefreshWhenPageHasFocus=()=>{const e=Date.now();if(this.pageHiddenStartTime){const t=e-this.pageHiddenStartTime;this.config.enableAddRefreshTmpl&&ae.M0.addOrUpdateTmplProperty("FRTel2","1"),this.config.enableRefreshWhenPageFocus&&this.config.pageRefreshIntervalTimeMin&&"headingsonly"!==this.layoutState.selectedFeedDisplaySetting&&"off"!==this.layoutState.selectedFeedDisplaySetting&&t>=6e4*this.config.pageRefreshIntervalTimeMin&&(ae.M0.addOrUpdateTmplProperty("FeedROF",[2,t,this.headerGridHidden?1:0].join("|")),this._scrollToShowFeed({withRefresh:!0,disableScroll:!this.headerGridHidden,showRefreshLoading:!0})),this.pageHiddenStartTime=null}},this.handleFeedRefreshWhenPageBlur=()=>{null===this.pageHiddenStartTime&&(this.pageHiddenStartTime=Date.now())},this.handlePageHiddenAnalyzeVisibilityChange=()=>{"hidden"===document.visibilityState?(this.pageHiddenAnalyzeStatusVisible=!1,null===this.pageVisiblyChangeAnalyzeStartTime&&(this.pageVisiblyChangeAnalyzeStartTime=Date.now())):"visible"===document.visibilityState&&this.pageVisiblyChangeAnalyzeStartTime&&((0,de.H)(ce.OaZ,"",void 0,{interval:Date.now()-this.pageVisiblyChangeAnalyzeStartTime,prerender:this.pageVisiblyChangeAnalyzeIsPreRender,shouldSampleErrorsForTreatement1:!0}),this.pageVisiblyChangeAnalyzeStartTime=null,this.pageVisiblyChangeAnalyzeIsPreRender=!1)},this.handlePageHiddenAnalyzeFocus=()=>{if(this.pageHiddenStartAnalyzeTime&&null!==this.pageHiddenAnalyzeStatusVisible){const e=Date.now();(0,de.H)(ce.c1s,"",void 0,{visible:this.pageHiddenAnalyzeStatusVisible,interval:e-this.pageHiddenStartAnalyzeTime,prerender:this.pageHiddenAnalyzeIsPreRender,shouldSampleErrorsForTreatement1:!0}),this.pageHiddenStartAnalyzeTime=null,this.pageHiddenAnalyzeStatusVisible=null,this.pageHiddenAnalyzeIsPreRender=!1}},this.handlePageHiddenAnalyzeBlur=()=>{null===this.pageHiddenStartAnalyzeTime&&(this.pageHiddenStartAnalyzeTime=Date.now(),this.pageHiddenAnalyzeStatusVisible??(this.pageHiddenAnalyzeStatusVisible=!0))},this.isFullPageBlur=()=>{var e,t,n,i;return!!(null!==(e=this.config.translucentFeed)&&void 0!==e&&e.enableBlur&&this.showFeedTranslucent&&["always","peek","headingsonly"].includes(null===(t=this.layoutState)||void 0===t?void 0:t.selectedFeedDisplaySetting)&&(this.navIsSticky||"always"==(null===(n=this.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&["load","all"].includes(null===(i=this.config.translucentFeed)||void 0===i?void 0:i.infoBlurEnabledScene)))||this.showDarkIcon},this.getTheme=()=>{var e;return this.needDarkThemeIcons?"lightTitle":null!==(e=this.layoutState)&&void 0!==e&&e.imageOfTheDayEnabled&&!this.isFullPageBlur()?"darkOnBackgroundImage":(0,U.Y)()?"darkTitle":"lightTitle"}}get isFeedAlways(){var e,t;return"always"===(null===(e=this.layoutState)||void 0===e?void 0:e.selectedFeedDisplaySetting)&&!(null!==(t=this.config)&&void 0!==t&&t.disableFeed)}get topBannerOffsetHeight(){return this.displayConditionalBanner?46:0}get responsiveSupported(){return this.config.enableResponsiveFeed&&"myFeed"===this.getSelectedPivot(this.layoutState)}get topSitesHeightBelowSearchBoxForPeekMode(){const{selectedQuickLinksDisplaySetting:e}=this.layoutState,t="tworows"==e;return"off"==e?0:this.columnArrangement>=H.K$.c3&&!t?90:174}get recommendedSitesHeight(){if(!this.childRefs.recommendedSites||"off"===this.recommendedSitesDisplaySetting)return 0;switch(this.recommendedSitesDisplaySetting){case"onerow":return 52;case"tworows":return 88;case"threerows":return 124;default:return 0}}get isFromWidgetLockScreen(){return(0,Ge.zp)().includes("ocid=widgetonlockscreen")}get isWeatherHeroExperience(){var e;return this.isFromWidgetLockScreen&&(null===(e=(0,Ge.zp)())||void 0===e?void 0:e.toLowerCase().includes("segment=weather"))}get showScrollDownButton(){return!this.config.noScrollDownBtn&&"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&!!this.childRefs.scrollDownButton&&!this.isScrollDownButtonDismissed&&(!this.childRefs.weatherOneLiner||this.childRefs.weatherOneLiner&&this.isWeatherOneLinerMapped&&!this.showWeatherOneLiner)&&0===window.scrollY}get showNavAndContentTemplate(){return"off"!==this.layoutState.selectedFeedDisplaySetting&&!this.config.disableFeed}async experienceConnected(){var e,t,n,i,r,a,u,p,h,m;if(this.messages=[{content:"What's happening in the news?",onClickHandlerMessage:this.onClick_pickMessageItem},{content:"Enable dark mode",onClickHandlerMessage:this.onClick_pickMessageItem},{content:"Enable light mode",onClickHandlerMessage:this.onClick_pickMessageItem},{content:"Manage my password",onClickHandlerMessage:this.onClick_pickMessageItem},{content:"Informational mode",onClickHandlerMessage:this.onClick_pickMessageItem},{content:"Inspirational mode",onClickHandlerMessage:this.onClick_pickMessageItem}],this.config.cssImageHeight&&(this.imageHeight="100vh"),this.config.earlyLoadSuperComponentConfig&&await Ut.L.initConfig(),(0,b.L)().get("takeabreak")&&(this.copilotCoachMarkIsShown=!0),(0,et.N)()){const{oneSvcUniTunMode:e}=this.config;e?((0,v.$o)().setItem("oneSvcUniTunMode",e.toString()),vt.Gq.set("oneSvcUniTunMode",e)):((0,v.$o)().removeItem("oneSvcUniTunMode"),vt.Gq.delete("oneSvcUniTunMode"))}if(this.shouldAutoScroll=this.isFromWidgetLockScreen&&this.config.shouldAutoScrollHero,window.shouldResetDwellTimer=this.isFromWidgetLockScreen,this.notSupportLayout=["always","peek"],this.updateStickyHeaderHeight(),(0,le.hy)(!g.Al.IsPrerender,"Header"),"marketmismatch"===C.jG.LanguageRegionMismatch){"language"==C.jG.MarketMismatchDetail.type&&(0,le.YJ)(s.x.marketLanguageToggleWC)}if(this.config.enableWpoTopSitesConfigOverride){const e=(0,je.R)();e&&(this.config.topSitesCollapsibleControlConfig=e)}if(this.config.evaluateMarqueeEligibility&&Bt.o.initializeMarqueeAd(),this.config.enableLoaderFlight)if((0,et.N)()){var S,w;this.skeletonEleFromSSR=null===(S=document)||void 0===S||null===(S=S.body)||void 0===S||null===(S=S.querySelector("edge-chromium-page").shadowRoot)||void 0===S||null===(w=S.querySelector)||void 0===w?void 0:w.call(S,"#skeleton-loader");const e=this.isFeedContentDisplayed();this.skeletonEleFromSSR&&e&&(this.skeletonEleFromSSR.remove(),this.skeletonEleFromSSR=null),e||(this.skeletonEleFromSSR||(this.showSkeleton=!0),this.skeletonObserver=new MutationObserver(this.skeletonObserverCallback),this.skeletonObserver.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0}))}else this.showSkeleton=!0;if(Et.SI.setShouldUsePromiseForEarlyFeed(!!this.config.enableEarlyMainFeedV2),this.childRefs=this.config.childRefs,this.updateHeaderCoreSearchData(),this.pageSettingsDataConnector=(0,wt.K0)(o.z.ChromiumPageSettings),this.topSitesLayoutDataConnector=(0,wt.K0)(o.z.TopSitesLayoutData),(0,et.N)()){this.marketLanguageConsolidation(),this.initializeDevTools();const e=((e=2)=>{let t="/";const n=window.location.pathname.split("/");if(n.length>e&&n[e]){t+=n[1];for(let i=2;i<=e;i++)t+="/"+n[i]}return t})(2);ze(bn?"service-worker.js":"./ntp/service-worker.js",this.config.serviceWorker,e,!1,(async()=>{lt.initializePushSubscriptionManager(e)}),ye.nz),this.reportPerfMarkers()}if(function(e){if(!e.useEnterpriseCompliance)return;const t=Ye._.getInstance().rootReducer.connector(o.z.SharedState),n=Je.s.useEnterpriseCompliance.getActionSender(t);n&&n.send(!0)}(this.config),this.config.preloadFeed){const{viewFeedConfig:e}=this.getViewFeedConfigAndPivot();(0,Qe.Fg)(e)}this.checkIPLocationForRewardsMedallion(),(0,le.b1)().then((e=>{if(this.isTtvrFiredAndCanUseDom=(0,et.N)(),(0,et.N)()&&this.shouldAutoScroll&&(this.shouldAutoScroll=!1,window.setTimeout((()=>{window.addEventListener("scroll",(()=>{this.invisibleTopSites=!1,this.recommendedSitesHolder&&(this.invisibleRecommendedSites=!1,this.updateNavFeedBorderRadius()),this.invisibleSearchBox=!1,this.headerCoreRef.classList.remove("hide-search-box")}),{once:!0})}),0)),g.Al.IsPrerender)(0,rt.lr)().then((()=>{const e=(0,ue.Ou)().TTVR+(0,le.TZ)(pe.DB);(0,Se.f)(62,g.Al.IsPrerender,!isNaN(e)&&e||performance.now())}));else{var t;const n=null===(t=e.find((e=>"TTVR"===e[0])))||void 0===t?void 0:t[1];(0,Se.f)(62,g.Al.IsPrerender,n)}this.renderMarketLanguageToggle&&ae.M0.addOrUpdateTmplProperty("marketToggleLoaded",this.checkMarketToggleFitOnPage()?"1":"0")})),(0,y.WW)(this.onFlyoutEvent),this.columnArrangement=(0,W.Bn)().currentColumnArrangement,this.enableOneColumn=this.config.enableOneColumn&&"c1"===this.columnArrangement,ae.M0.addOrUpdateTmplProperty("pageColumn",this.columnArrangement),(0,W.Bn)().subscribe(this.handleColumnArrangementChange),ft.initialize(),this.recommendedSitesDisplaySetting=this.childRefs.recommendedSites&&await(0,Ke.P6)({enableRecommendedSitesSelection:!0,enableWpoRecommededSitesConfigOverride:!!this.config.enableWpoRecommededSitesConfigOverride});let I=!1;const E=new _.o;let M=!1;(0,Ct.Uo)(o.z.ChromiumPageSettings,(async e=>{var t;if(!e.isLoadCompleted)return;E.set();const n=this.layoutState;this.layoutState=e;const i=vt.Gq.get("__hydrationPromise__");var r;(g.Al.CurrentFlightSet.has("prg-usessrlayout")&&(0,et.N)()&&window.isSSREnabled&&window.ssrLayoutState&&!window.isHydrationCompleted&&i&&(this.layoutState=window.ssrLayoutState,i.getResultAsync().then((()=>{(0,Ct.T3)(o.z.ChromiumPageSettings,e)}))),n||M||null===(t=window.ssrLayoutState)||void 0===t||!t.selectedFeedDisplaySetting||window.ssrLayoutState.selectedFeedDisplaySetting===e.selectedFeedDisplaySetting)||((0,de.H)(ce.XDw,"SSR Layout mismatch CSR Layout",void 0,{...ce.XDw.pb,customMessage:`SSR Layout:${null===(r=window.ssrLayoutState)||void 0===r?void 0:r.selectedFeedDisplaySetting}; CSR Layout:${e.selectedFeedDisplaySetting}; edgeHeader: ${JSON.stringify(window.edgeNTPHeader)}`}),M=!0);this.config.disableFeed&&(this.layoutState.selectedFeedDisplaySetting="off",this.layoutState.currentLayout="custom"),"off"===e.selectedFeedDisplaySetting&&(this.isFeedRendered=!1),this.shouldRenderToastWC="off"===e.selectedFeedDisplaySetting||"headingsonly"===e.selectedFeedDisplaySetting&&!this.isFeedRendered,this.isAlwaysMode="always"===e.selectedFeedDisplaySetting,this.config.showCodexBingIcon&&this.updateHeaderCoreSearchData(),!this.isAlwaysMode&&this.hideQuickLinks&&this.displayQuickLinks(),this.quickLinksDisplaySetting=e.selectedQuickLinksDisplaySetting,this.shouldShrinkHeader="onerow"===this.quickLinksDisplaySetting||"tworows"===this.quickLinksDisplaySetting||"off"!==this.recommendedSitesDisplaySetting,this.shouldAutoScroll&&this.shouldShrinkHeader&&((0,et.N)()||"off"===this.quickLinksDisplaySetting||(this.invisibleSearchBox=!0),this.invisibleTopSites=!0,"off"!==this.recommendedSitesDisplaySetting&&(this.invisibleRecommendedSites=!0,this.updateNavFeedBorderRadius()));let a=!1,s=!1,c=!1,d=!1,l=!1;if(n){if(a=n.selectedQuickLinksDisplaySetting!==e.selectedQuickLinksDisplaySetting,s=n.selectedFeedDisplaySetting!==e.selectedFeedDisplaySetting,c=n.imageOfTheDayEnabled!==e.imageOfTheDayEnabled,d=n.currentLayout!==e.currentLayout,l=n.sponsoredContentEnabled!==e.sponsoredContentEnabled,this.transitionFromContentOff="off"===n.selectedFeedDisplaySetting&&"off"!==e.selectedFeedDisplaySetting,a){const t="onerow"===e.selectedQuickLinksDisplaySetting||"tworows"===e.selectedQuickLinksDisplaySetting;this.handleTopSitesEnableChange(t,e)}s&&(ae.M0.addOrUpdateTmplProperty("feedChanged","1"),window.setTimeout((()=>{ft.handleSettingUpdate(e.selectedFeedDisplaySetting)}),0),this.marqueeAdActive&&"always"!==e.selectedFeedDisplaySetting&&(this.marqueeAdActive=!1,window.setTimeout((()=>{this.backgroundDataConnector&&this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1)})))),d&&ae.M0.addOrUpdateTmplProperty("layoutChanged","1"),l&&!e.sponsoredContentEnabled&&(this.marqueeAdActive=!1,window.requestAnimationFrame((()=>{this.backgroundDataConnector&&this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1)}))),this.config.enableMarqueeAd&&d&&"informational"!==e.currentLayout&&(this.marqueeAdActive=!1,window.requestAnimationFrame((()=>{this.backgroundDataConnector&&this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!1)})))}if(this.updateHeaderGrid(),this.refreshHeaderHeight(),this.refreshTranslucentMode(),this.updateHeaderCoreData(),this.updateHeaderCoreOffset(),this.checkThemeColorIcons(),(0,et.N)()){if((0,De.Vo)(I),I=!0,n){if((a||s||c)&&(this.fireLayoutAnimationComplete(),scrollTo(0,0),await(0,T.rh)(400),this.config.noBckImgOnNavSticky&&0===window.scrollY)){const e="off"===this.layoutState.currentBackgroundImageType;(0,f.j3)("backgroundImage",e?"hidden":"displayed")}await(0,Le.y)(),this.calculateStickyBreakpoints()}this.config.companyLogo&&this.layoutState.isCompanyLogoEnabledByPolicy&&this.getCompanyLogo(),"headingsonly"===this.layoutState.selectedFeedDisplaySetting&&this.childRefs.scrollDownButton&&(this.isScrollDownButtonDismissed=this.layoutState.isScrollDownButtonDismissed),await(0,Le.y)(),window.setTimeout((()=>this.overlapStateChange()))}})),this.hideQuickLinks=(null===(e=this.config)||void 0===e?void 0:e.autoHideQuickLinksInAlways)&&"always"===(null===(t=this.layoutState)||void 0===t?void 0:t.selectedFeedDisplaySetting),this.hideQuickLinks&&window.addEventListener("wheel",this.quickLinksToggle),window.addEventListener("LowEndDeviceBkgd",this.lowEndDeviceHandler),window.addEventListener("trigger-user-journey-coachmark",this.handleSocialBarReaction),await E.getResultAsync(),!(0,et.N)()||null!==(n=window.ssrAdData)&&void 0!==n&&n.length||window.isSSREnabled||g.Al.IsPrerender||(0,kt.j)(k.U,this.layoutState,this.isWaterfallFeed((0,P.$z)())),ae.M0.addOrUpdateTmplProperty("csrLayout",null===(i=this.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting),ae.M0.addOrUpdateTmplProperty("ssrLayout",null===(r=window.ssrLayoutState)||void 0===r?void 0:r.selectedFeedDisplaySetting);const x=await(0,ye.aT)((null===(a=this.layoutState.configData)||void 0===a?void 0:a.enabledFeatures)||[]);let L;this.msNtpExpBitmask=(0,ye._W)(x),x.length&&ae.M0.addOrUpdateTmplProperty("edgExpMask",x.join("-")),(0,Ct.Uo)(o.z.TopSitesLayoutData,(e=>{this.topSitesLayoutState=e,this.updateMarqueeAdHeightByColumn(this.columnArrangement),this.updateHeaderGrid(),this.refreshHeaderHeight(),this.hideSearchHistory=!1,this.updateHeaderCoreBelowSearchData(),(0,Le.y)().then((()=>{this.calculateStickyBreakpoints(),this.shouldAutoScroll&&(0,et.N)()&&this.scrollDownOnLoad(),!this.shouldAutoScroll&&this.invisibleTopSites&&(0,et.N)()&&(this.invisibleTopSites=!1)}))})),window.isSSREnabled&&(L=await Ce.L.getPreferenceSetting("tscollapsed"));let R="",N="";const U=await(0,ye.H1)();let H;if(null!=U&&U.promotion&&(R=U.promotion),null!=U&&U.selection&&(N=U.selection),this.config.enableEventBkgSignal){const e=await(0,ye.Zb)(),t=await Tt.p.getCurrentBackgroundMetadata(),n=null==t?void 0:t.provider;H=!!e||"NoBackground"===n,ae.M0.addOrUpdateTmplProperty("backgroundImageIsSet",H?"1":"0")}const q=await(0,ye.Nd)(),G=await(0,ye.Qw)(),V=(0,ye.Kr)();var z;this.config.enablePersonalizedOneliner&&(window.addEventListener("wpoOptimizationAdded",this.wpoOptimizationAddedHandler),this.personalizedTelemetryObject=null===(z=this.telemetryObject)||void 0===z?void 0:z.addOrUpdateChild({type:se.c9.Module,name:"PersonalizedOneLiner"}));const j=e=>"productivityHub"===(0,P.$z)()||"headingsonly"===e.selectedFeedDisplaySetting||"off"===e.selectedFeedDisplaySetting;(0,et.N)()&&this.config.useTreatmentsFromFeedResponse&&j(this.layoutState)&&!Et.SI.isOptimizationDataReceived()&&Promise.all([(0,Ue.F_)(),(0,rt.lr)()]).then((()=>{j(this.layoutState)&&this.fetchAndStoreWpoTreatments(L,R,N,q,G,V,H)}));const Q=(!((null===C.jG||void 0===C.jG||null===(u=C.jG.CurrentRequestTargetScope)||void 0===u?void 0:u.audienceMode)===c.F.Enterprise)||this.config.enableEarlyMainFeedV2)&&(!(0,ye.Tr)()||this.config.noDisablePrerenderFeed),Y=!(0,et.N)()&&this.config.enableEarlyFeedSSR;if(this.config.enableEarlyMainFeedRequest&&!Y&&(null===g.Al||void 0===g.Al||!g.Al.IsPrerender||Q)){const e=void 0;this.fetchAndStoreMainFeed(R,N,q,G,V,H,e),e&&await e.getResultAsync(),await async function(e){}(g.Al.CurrentFlightSet)}if((0,et.N)()){if(window.addEventListener("resize",this.saveViewportInPref),window.addEventListener("beforeunload",this.saveViewportInPref),"gaming"===(0,P.$z)()&&C.jG.CurrentRequestTargetScope.audienceMode!==c.F.Enterprise){const e=J[C.jG.CurrentMarket];if(e&&!(0,v.$o)().getItem(d.d.VideoGameInterestFollowed)){const t="Video Games";(0,wt.K0)(o.z.TopicData).followTopic(e,t).then((e=>{e&&(0,v.$o)().setItem(d.d.VideoGameInterestFollowed,"true")}))}}this.attachListenerForKeyDownScrollOnFocus(),(0,v.$o)().setItem("LastKnownPV",(new Date).getTime().toString()),Promise.all([(0,Ue.F_)(),(0,rt.lr)()]).then((()=>{if((0,v.$o)().setItem("LastVisuallyReadyMarker",(new Date).getTime().toString()),window.navigator.serviceWorker&&void 0!==window.navigator.serviceWorker.controller)we();else{const e={sw:window.navigator.serviceWorker&&void 0!==window.navigator.serviceWorker.controller};(0,v.$o)().setObject("FallbackNavigationResult",e)}}))}if((0,et.N)())(0,Ct.Uo)(o.z.SignInData,(e=>{void 0!==e.isUserSignedIn&&(this.renderSignInControls=!e.isUserSignedIn,this.updateHeaderCoreData())}));else{var Z;const e=(0,wt.K0)(o.z.SharedState);this.renderSignInControls=(null==e||null===(Z=e.getCurrentState())||void 0===Z?void 0:Z.signedIn)===l.Hy.NotSignedIn}!this.childRefs.backgroundGallery||this.config.disableBackgroundGallery||C.jG.IsFrePage&&!this.config.turnOffFREImage||(this.backgroundGalleryEligibility=!0,this.backgroundDataConnector=(0,wt.K0)(o.z.BackgroundData),this.backgroundDataConnector&&await Tt.p.initState(bt.f.backgroundDataStateLoaded.getActionSender(this.backgroundDataConnector)),(0,Ct.Uo)(o.z.BackgroundData,(e=>{this.renderBackgroundGallery=e.backgroundGalleryDisplayed}))),this.isNewTabPageContentManagedByPolicy=this.layoutState.isContentFeedManagedByPolicy,this.isAppLauncherAllowedByPolicy=!1!==this.layoutState.isAppLauncherEnabledByPolicy;let X=this.layoutState&&this.layoutState.configData;const ee=(0,wt.K0)(o.z.ChromiumPageSettings);if(ee){var te,ie;const e=await ee.getConfigDataAsync();if(void 0===X&&(X=await ee.getConfigDataAsync()),(0,et.N)()){var re;if((null==e||null===(re=e.enabledFeatures)||void 0===re?void 0:re.includes("msUndersideAutoOpenForMsnTopQuestion"))?((0,v.$o)().setItem("enableUndersideAutoOpenFromEdge","true"),ae.M0.addOrUpdateTmplProperty("enableUndersideAutoOpenFromEdge","1")):(0,v.$o)().setItem("enableUndersideAutoOpenFromEdge","false"),this.config.enableUserTopics){const e=(await(0,O.O3)()).toString();(0,v.$o)().setItem("userTopics",e),fe.U.savePreferenceSetting("userTopics",e)}}const t=null==e||null===(te=e.enabledFeatures)||void 0===te?void 0:te.includes("msNtpExp1"),n=null==e||null===(ie=e.enabledFeatures)||void 0===ie?void 0:ie.includes("msNtpExp2");t?(ae.M0.addOrUpdateTmplProperty("TopSitesDedupeFeatureActive","1"),ae.M0.addOrUpdateTmplProperty("TopSitesDedupeTreatmentActive","1")):n&&(ae.M0.addOrUpdateTmplProperty("TopSitesDedupeFeatureActive","1"),ae.M0.addOrUpdateTmplProperty("TopSitesDedupeControlActive","1")),ae.M0.addOrUpdateTmplProperty("headingsOnlyNoBackground",String("headingsonly"===this.layoutState.selectedFeedDisplaySetting&&"custom"===this.layoutState.currentLayout&&"off"===this.layoutState.currentBackgroundImageType))}if(this.isShowMSRewardsAllowedByPolicy=void 0===(null===(p=X)||void 0===p?void 0:p.isShowMicrosoftRewardsEnabled)||X.isShowMicrosoftRewardsEnabled,this.config.enableSignInControl&&(0,et.N)()&&this.checkSignInStatusAndSetup(X),(0,le.b1)().then((async()=>{var e,t;(0,et.N)()&&(this.nurturingCleanUp=await gn({config:this.config,isSignedOutPromise:this.checkIsSignedOut(),isFromWidgetLockScreen:this.isFromWidgetLockScreen,newYearV2Anchor:this.config.enableNewYearThemeCoachMarkV2&&(null===(e=this.shadowRoot)||void 0===e||null===(t=e.getElementById)||void 0===t?void 0:t.call(e,"g_nav")),onScrollPromise:this.onScrollSettablePromise.getResultAsync(),onSocialPromise:this.onSocialBarReactedSettablePromise.getResultAsync(),layoutState:this.layoutState,pageSettingsDataConnector:this.pageSettingsDataConnector}))})),this.config.evaluateMarqueeEligibility){const e=await Bt.o.getMarqueeAdEligibilityAsync(),t=this.config.enableMarqueeAdV3;let n=!1;var oe,he,ge,me,ve,be;if((0,et.N)()&&(n=!!(0,v.$o)().getItem(ne)),e&&ae.M0.addOrUpdateTmplProperty("MarqueeAdEligibleActualView","1"),(e||n)&&ae.M0.addOrUpdateTmplProperty("MarqueeAdEligiblePerpetual","1"),(0,et.N)()&&e&&(0,v.$o)().setItem(ne,"1"),e&&this.config.enableMarqueeAd)this.marqueeAdActive=!0,t&&(this.setMarqueeV3ExtraClassName((0,W.Bn)().currentColumnArrangement),this.marqueeAd=Bt.o.getMarqueeAd()),this.backgroundDataConnector&&this.backgroundDataConnector.marqueAdDisplayStatusUpdated(!0),this.updateMarqueeAdHeightByColumn(this.columnArrangement),this.updateHeaderGrid(),this.refreshHeaderHeight(),t&&(this.calculateStickyBreakpoints(),this.refreshTranslucentMode(),(0,W.Bn)().subscribe((e=>{this.setMarqueeV3ExtraClassName(e)}))),(0,ot.eC)().then((()=>{const e=Bt.o.getMarqueeAd();ae.M0.addOrUpdateTmplProperty(e.isUpdated?"MarqueeAdUpdate":"MarqueeAdVisible","1"),Bt.o.sendBeacons(e.adServedUrls),Bt.o.sendVerificationToIas()})),this.telemetryTags.marqueeAdDismissButton=this.telemetryObject.addOrUpdateChild({name:"MarqueeAdDismissButton",behavior:se.wu.Hide,content:{headline:null===(oe=this.marqueeAd)||void 0===oe?void 0:oe.title,id:null===(he=this.marqueeAd)||void 0===he?void 0:he.clickThroughUrl}}).getMetadataTag(),this.telemetryTags.marqueeAdCTAButton=this.telemetryObject.addOrUpdateChild({name:"MarqueeAdCTAButton",type:se.c9.Interaction,behavior:se.wu.Navigate,content:{headline:null===(ge=this.marqueeAd)||void 0===ge?void 0:ge.ctaText,id:null===(me=this.marqueeAd)||void 0===me?void 0:me.clickThroughUrl}}).getMetadataTag(),this.telemetryTags.marqueeAdSponsorLogo=this.telemetryObject.addOrUpdateChild({name:"MarqueeAdSponsorLogo",type:se.c9.Interaction,behavior:se.wu.Navigate,content:{headline:null===(ve=this.marqueeAd)||void 0===ve?void 0:ve.providerName,id:null===(be=this.marqueeAd)||void 0===be?void 0:be.clickThroughUrl}}).getMetadataTag();bt.f.updateMarqueeAdDisplayStatus.registerObserver((e=>{const t=e&&e.params;t&&t.length>0&&(this.marqueeAdActive=e.params[0]),this.updateHeaderGrid(),this.refreshHeaderHeight()}))}this.focusRedirectEnabled=X&&X.inPageSearchBoxType===B.HT.redirect,F.V.updateConfigDataChanged.registerObserver((e=>{const t=e&&e.params;if(!t||t.length<1)return;t[0]===B.HT.redirect!==this.focusRedirectEnabled&&(0,$.Z)()})),Object.keys(this.childRefs).filter((e=>e&&(0,A.oO)(this.childRefs[e])&&this.filterFeedExperiencesToSkip(e))).forEach((e=>(0,Qe.Fg)(this.childRefs[e]))),D.J.updateLayout.registerObserver((async e=>{var t;null!==(t=this.config)&&void 0!==t&&null!==(t=t.childRefs)&&void 0!==t&&t.holidayEffects&&this.updateHolidayEffectsPostion();const n=e&&e.params;n&&n.length<1||this.updateFeedLayoutTelemetry()})),window.addEventListener("feedDropdownChange",this.updateFeedLayoutFromDropdown),this.config.enableHolidayBg&&window.addEventListener("holidayBgChanged",this.updateDarkIconValue),this.childRefs.recommendedSites&&window.addEventListener("recommendedSitesSelection",this.recommendedSitesSelection),this.config.showPulseOffPartially&&window.addEventListener("hoverPulse",this.updatePulseOnHover),this.pageSettingsDataConnector&&this.pageSettingsDataConnector.getLayoutStateAsync().then((e=>this.isAlwaysMode="always"===e.selectedFeedDisplaySetting));const Te=(0,wt.K0)(o.z.AdminPortalData),ke=Te&&Te.getCurrentState();if(ke&&ke.settings&&(this.isNotificationEnabledByAdmin=!!ke.settings.isShowCompanyAndIndustry),"marketmismatch"!==C.jG.LanguageRegionMismatch&&"marketmismatch"!==C.jG.LanguageRegionMismatchExplicit||this.updateLanguageToggle(),(0,et.N)()||(await this.initSSRContentConfigInfo(),await this.tryLoadFeedModuleBundle()),this.updateHeaderCoreData(),this.updateHeaderCoreBelowSearchData(),(0,et.N)()&&this.config.compressionDictionaryEnabled&&document.createElement("link").relList.supports("dictionary")){ae.M0.addOrUpdateTmplProperty("sbr","1");const e=performance.getEntriesByType("resource").find((e=>{var t;return"script"===e.initiatorType&&(null===(t=e.name)||void 0===t?void 0:t.includes("/common."))}));e&&e.encodedBodySize&&ae.M0.addOrUpdateTmplProperty("sbrc",e.encodedBodySize),Promise.all([(0,rt.lr)(),(0,le.b1)()]).then((()=>(0,ye.x5)())).then((e=>e&&ae.M0.sendLoadTimeEvent({markers:{size:e.headers.get("content-length"),url:e.url}})))}if(this.config.enableKidsModeTmpl&&ae.M0.addOrUpdateTmplProperty("kidsModeConfigsActive","true"),ae.M0.addOrUpdateTmplProperty("audienceMode",null!==g.Al&&void 0!==g.Al&&null!==(h=g.Al.ClientSettings)&&void 0!==h&&h.audienceMode?g.Al.ClientSettings.audienceMode:"undefined"),this.config.enableScrollToTopWhenBack&&(document.addEventListener("visibilitychange",this.handleDocumentVisibilityChange),this.documentVibilityState=document.visibilityState,"visible"===document.visibilityState&&(this.documentHasBeenViewed=!0)),void 0!==this.config.feedPushDownForNonDAU){const e=(0,v.$o)().getItem("featuxaffected");null!==e&&ae.M0.addOrUpdateTmplProperty("featuxaffected",e)}(0,et.N)()&&null!==(m=this.childRefs)&&void 0!==m&&m.channelStore&&window.addEventListener(K,this.openChannelStore)}disconnectedCallback(){var e,t,n,i,r,o,a;(0,et.N)()&&!this.isConnected||(super.disconnectedCallback(),(0,y.St)(this.onFlyoutEvent),(0,W.Bn)().unsubscribe(this.handleColumnArrangementChange),this.pivotManager&&(this.pivotManager.removeSwitchListener(ut.D.onPivotSwitch),this.pivotManager.removeSwitchListener(this.switchListenerCallback)),removeEventListener("scroll",this.areNavTopSitesOverlapping),removeEventListener("resize",this.onResize),removeEventListener("scroll",this.onScroll),window.removeEventListener("wheel",this.quickLinksToggle),window.removeEventListener("LowEndDeviceBkgd",this.lowEndDeviceHandler),removeEventListener("recommendedSitesSelection",this.recommendedSitesSelection),window.removeEventListener(Nt.gQ,this.scrollToShowFeed),window.removeEventListener(Nt._t,this.scrollToShowFeedWithRefresh),window.removeEventListener("resize",this.saveViewportInPref),window.removeEventListener("beforeunload",this.saveViewportInPref),window.removeEventListener("keyup",this.focusControlOnScrollKeyUp),window.removeEventListener("wheel",this.focusControlOnWheel),window.removeEventListener("trigger-user-journey-coachmark",this.handleSocialBarReaction),window.removeEventListener(K,this.openChannelStore),this.onScrollSettablePromise.set(),this.headerSpaceHolder&&this.headerSpaceHolder.removeEventListener("transitionend",this.onHeaderSpaceHolderTransitionEnd),window.removeEventListener("click",this.onClickForTrigChannelStoreCoachmark),window.removeEventListener("infopaneFlipperTabClicked",this.onClickInfopaneFlipperTab),window.removeEventListener("infopaneAnchorTagClicked",this.onClickInfopaneAnchor),null===(e=this.nurturingCleanUp)||void 0===e||e.call(this),window.removeEventListener("feedDropdownChange",this.updateFeedLayoutFromDropdown),null!==(t=this.config)&&void 0!==t&&t.enableLoaderFlight&&this.skeletonObserver&&this.skeletonObserver.disconnect(),null!==(n=this.config)&&void 0!==n&&n.enableHolidayBg&&window.removeEventListener("holidayBgChanged",this.updateDarkIconValue),null!==(i=this.config)&&void 0!==i&&i.enableScrollToTopWhenBack&&document.removeEventListener("visibilitychange",this.handleDocumentVisibilityChange),null!==(r=this.config)&&void 0!==r&&r.enablePersonalizedOneliner&&window.removeEventListener("wpoOptimizationAdded",this.wpoOptimizationAddedHandler),(null!==(o=this.config)&&void 0!==o&&o.enableRefreshWhenPageHidden||this.config.enableAddRefreshTmpl)&&window.removeEventListener("visibilitychange",this.handleFeedRefreshWhenPageHiddenVisibilityChange),this.config.showPulseOffPartially&&window.removeEventListener("hoverPulse",this.updatePulseOnHover),(null!==(a=this.config)&&void 0!==a&&a.enableRefreshWhenPageFocus||this.config.enableAddRefreshTmpl)&&(window.removeEventListener("focus",this.handleFeedRefreshWhenPageHasFocus),window.removeEventListener("blur",this.handleFeedRefreshWhenPageBlur)),this.config.enablePageFocusAnalyze&&(window.removeEventListener("visibilitychange",this.handlePageHiddenAnalyzeVisibilityChange),window.removeEventListener("focus",this.handlePageHiddenAnalyzeFocus),window.removeEventListener("blur",this.handlePageHiddenAnalyzeBlur)))}async marketLanguageConsolidation(){var e;const t=null===g.Al||void 0===g.Al||null===(e=g.Al.ClientSettings)||void 0===e||null===(e=e.market)||void 0===e?void 0:e.detection;if(!window.navigator.cookieEnabled||!t||"cm"===t.type)return;const n=(0,re.ej)(Q),i=await Ce.L.getPreferenceSetting(Q,!1);if(!n||i&&n===i.value||await Ce.L.savePreferenceSetting(Q,{setting:Q,source:"ntp",timestamp:(new Date).getTime(),value:n}),!n&&i&&i.value){const e=JSON.parse(i.value);e.m&&(await this.onMarketValueChange(e.m),(0,de.H)(ce.v7z,"Edge Next page refresh due to market cookie missing.",void 0,{...ce.v7z.pb,customMessage:`market: ${e.m}`}))}(0,rt.lr)().then((async()=>{await(0,Ot.l_)(this.onMarketValueChange),n||i||"true"===g.Al.ClientSettings.static_page||async function(e=!1){var t;const n=(0,re.ej)(ve.Xm.sptmarket),i=await fe.U.getPreferenceSetting(ve.Xm.sptmarket,!1);if(ae.M0.addOrUpdateTmplProperty("ImplicitMarketRestoredSync","1"),!n)return;const r=g.Al.ClientSettings&&g.Al.ClientSettings.market&&(null===(t=g.Al.ClientSettings.market.detection)||void 0===t?void 0:t.type);if(i&&i.value&&i.value.value){const t=i.value.value;"implicitExisting"!=r&&"implicitReset"!=r||await fe.U.savePreferenceSetting(ve.Xm.sptmarket,{setting:ve.Xm.sptmarket,source:"ntp",timestamp:(new Date).getTime(),value:n}),"implicitNew"==r&&!e&&(a=t,(null==(o=n)||null===(s=o.split("|",5))||void 0===s?void 0:s[4])!=(null==a||null===(c=a.split("|",5))||void 0===c?void 0:c[4]))&&((0,re.sq)(ve.Xm.sptmarket,void 0,-1),(0,re.sq)(ve.Xm.sptmarket,void 0,-1,void 0,"/edge"),(0,re.sq)(ve.Xm.sptmarket,t,365,C.jG.HostPage.hostName,"/"),(0,de.H)(ce.y5G,`Edge Next page refresh due to implicit market cookie restored. market: ${t}`),(0,$.Z)())}else"implicitExisting"!=r&&"implicitNew"!=r||await fe.U.savePreferenceSetting(ve.Xm.sptmarket,{setting:ve.Xm.sptmarket,source:"ntp",timestamp:(new Date).getTime(),value:n});var o,a,s,c}(this.config.disableImplicitRestore)}))}async beforeHydration(){switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":break;default:{const{viewFeedConfig:e,selectedPivot:t}=this.getViewFeedConfigAndPivot(),n=t===kn?{gamingPivotSwitched:!0}:void 0;await this.startContentLoad(e,n,!0,t)}}}async afterHydration(){var e;switch(this.isFeedAlways&&(this.updateHeaderGridRowsForFeedAlways(),this.headerGrid.style&&(this.headerGrid.style.gridTemplateRows=this.gridRows)),this.refreshHeaderHeight(),this.headerGrid.style&&(this.headerGrid.style.height=this.headerHeight+"px",this.config.enableFixOverlap&&(this.headerGrid.style["grid-template-rows"]=this.gridRows)),this.headerSpaceHolder.style&&(this.headerSpaceHolder.style.height=this.headerHeight+"px"),this.config.enableFixOverlap&&this.topSitesHolder.style&&(this.topSitesHolder.style["grid-row"]=this.topSitesRow+"px"),this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":{const{viewFeedConfig:e,selectedPivot:t}=this.getViewFeedConfigAndPivot();await this.startContentLoad(e,void 0,!0,t);break}}if(void 0!==(null===(e=window)||void 0===e?void 0:e.ssrSizes)&&!window.isResized){const e=this.columnArrangement+"",t=new w.fH,n=(0,w.Nd)(t.data.innerWidth,"innerWidth"),i=(0,w.Nd)(t.data.innerHeight,"innerHeight");window.ssrSizes.ssrCol!==e&&(0,de.H)(ce.v8K,"SSR - Column count mismatch after hydration.",void 0,{...ce.v8K.pb,customMessage:`ssrSizes: {ssrCol: ${window.ssrSizes.ssrCol}, ssrWidth: ${window.ssrSizes.ssrWidth} px, ssrHeight: ${window.ssrSizes.ssrHeight} px},csrSizes: {csrCol: ${e}, csrWidth: ${n} px, csrHeight: ${i} px},breakpoints: ${JSON.stringify((0,W.Bn)().breakpoints)}`})}}logCriticalException(){const e="Fatal web component experience exception encountered in EdgeChromiumPageWC.",t=new Error(e);(0,Ft.Y)(ce.aFk.id),(0,de.OO)(t,ce.aFk,e)}isFeedContentDisplayed(){var e,t,n,i,r,o,a,s,c,d,l,u,p,h,g;const m=(0,Ne.b_)(_e._.gridViewFeed)||(null===(e=document)||void 0===e||null===(e=e.body)||void 0===e||null===(t=e.querySelector)||void 0===t||null===(t=t.call(e,"edge-chromium-page"))||void 0===t||null===(t=t.shadowRoot)||void 0===t||null===(n=t.querySelector)||void 0===n?void 0:n.call(t,"grid-view-feed")),f=(0,Ne.b_)(_e._.waterfallViewFeed)||(null===(i=document)||void 0===i||null===(i=i.body)||void 0===i||null===(r=i.querySelector)||void 0===r||null===(r=r.call(i,"edge-chromium-page"))||void 0===r||null===(r=r.shadowRoot)||void 0===r||null===(o=r.querySelector)||void 0===o?void 0:o.call(r,"waterfall-view-feed"));return!!(null!=m&&null!==(a=m.shadowRoot)&&void 0!==a&&null!==(s=a.querySelector)&&void 0!==s&&null!==(s=s.call(a,"cs-super-container"))&&void 0!==s&&null!==(s=s.shadowRoot)&&void 0!==s&&null!==(c=s.querySelector)&&void 0!==c&&c.call(s,"cs-personalized-feed")||null!=m&&null!==(d=m.shadowRoot)&&void 0!==d&&null!==(l=d.querySelector)&&void 0!==l&&l.call(d,".heading-group-error")||null!=f&&null!==(u=f.shadowRoot)&&void 0!==u&&null!==(p=u.querySelector)&&void 0!==p&&p.call(u,"cs-super-container")||null!=f&&null!==(h=f.shadowRoot)&&void 0!==h&&null!==(g=h.querySelector)&&void 0!==g&&g.call(h,".heading-group-error"))}async initSSRContentConfigInfo(){switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":return}const{viewFeedConfig:e,selectedPivot:t}=this.getViewFeedConfigAndPivot();this.initFeedDependencies(t),await this.getFeedDependencyPromise,this.contentConfigInfo=e,this.context={},await(0,Qe.Fg)(e)}isWaterfallFeed(e){return!this.config.enableGridViewFeed&&(0,ye.$5)(e)}getViewFeedConfigAndPivot(){const e=(0,P.$z)(),t=this.isWaterfallFeed(e);this.config.enableGridViewFeed||(ae.M0.addOrUpdateTmplProperty("page_selectedPivot",JSON.stringify(e)),ae.M0.addOrUpdateTmplProperty("page_shouldUseWaterfallFeed",JSON.stringify(t)));const n=e===kn,i=this.getExperienceConfigInfo("GamingGridViewFeed","GridViewFeed","index_GamingGridViewFeed"),r=t?this.getExperienceConfigInfo("WaterfallViewFeed"):this.getExperienceConfigInfo("GridViewFeed");let o;return o=n?i:r,{viewFeedConfig:o,selectedPivot:e}}async fetchAndStoreWpoTreatments(e,t,n,i,r,o,a){var s;(0,ue.Ou)()[Et.C5.Request]=Math.round(performance.now());const c=(null===(s=ae.M0.getPageMetadata())||void 0===s||null===(s=s.contract)||void 0===s||null===(s=s.page)||void 0===s?void 0:s.name)===kn,d=this.isWaterfallFeed((0,P.$z)());let l={isXFeed:!1,ocid:"anaheim-ntp-feeds",timeoutMs:1e3,feedName:c?kn:"default",pageScenario:"ntp",pageConfiguration:(0,xt.y)(this.layoutState,!1),requestId:ae.M0.getRequestId(),disableContent:!0,shouldUseNewWpoEndpoint:!0,wpoSchema:"byregion",column:this.columnArrangement,anaheimLayoutPromotion:t,anaheimContentSelection:n,inEdgeFeatures:i,revertTimes:r,adminDisabled:o,backgroundImageIsSet:a,useWebLayoutEndpoint:!!d};if(this.isWaterfallFeed((0,P.$z)())){const e={c1:_t.Kx.C1,c2:_t.Kx.C2,c3:_t.Kx.C3,c4:_t.Kx.C4,c5:_t.Kx.C5},t=this.config.enableOneColumn||this.columnArrangement!==H.K$.c1?this.columnArrangement:H.K$.c2,n=(0,Pt.Qf)(e[t],void 0,void 0,this.config);l={...l,...n}}new Mt.fy({auctionRidOverride:this.config.auctionRidOverride,initialRequest:{timeoutMs:1e3}},!1).fetchFromWpoService(l,!0).then((t=>{t&&((0,ue.Ou)()[Et.C5.Response]=Math.round(performance.now()),Et.SI.addWpoOptimizationDataToLocalStorage(t.pageContext,C.jG.AppType,C.jG.CurrentRequestTargetScope,!1,this.config.enbWpoPromotionFromPSL,e,this.config.enableWpoOpenTopSites),It.u.storeWpoNotificationPreviewData(t),this.pulseData=t.pulseData)}))}isFeedDisabled(){var e;const t=null===(e=this.layoutState)||void 0===e?void 0:e.selectedFeedDisplaySetting;return"headingsonly"===t||"off"===t}async fetchAndStoreMainFeed(e,t,n,i,r,o,a){var c,d,l;const u=()=>{a&&a.set()},p=(0,P.$z)();if([kn,"productivityHub","following"].includes(p))return this.isOnM365Page="productivityHub"===p,this.isOnPersonalizeOrM365Page=this.isOnM365Page,void u();if(this.isFeedDisabled())return void u();const h={experienceType:this.isWaterfallFeed(p)?s.x.waterfallViewFeed:s.x.gridViewFeed,instanceSrc:"default"},g=await k.U.getConfig(h);let m=null==g||null===(c=g.properties)||void 0===c||null===(c=c.riverSectionCardProviderConfig)||void 0===c?void 0:c.initialRequest;if(!m)return void u();var f;this.config.auctionRidOverride&&(m.adRefreshVariant="",m.gdpr=!!window.__tcfapi,m.anaheimPageLayout=this.layoutState.currentLayout,m.verticalName=null===C.jG||void 0===C.jG||null===(f=C.jG.HostPage)||void 0===f?void 0:f.verticalKey);if(m.anaheimLayoutPromotion=e,m.anaheimContentSelection=t,m.inEdgeFeatures=n,m.revertTimes=i,m.adminDisabled=r,m.backgroundImageIsSet=o,this.columnArrangement&&(m.column=this.columnArrangement),this.isWaterfallFeed(p)){const e={c1:_t.Kx.C1,c2:_t.Kx.C2,c3:_t.Kx.C3,c4:_t.Kx.C4,c5:_t.Kx.C5},t=this.config.enableOneColumn||this.columnArrangement!==H.K$.c1?this.columnArrangement:H.K$.c2,n=(0,Pt.Qf)(e[t],void 0,void 0,this.config);m={...m,...n}}if(m.pageConfiguration=null===(d=ae.M0.getPageMetadata())||void 0===d||null===(d=d.contract)||void 0===d||null===(d=d.page)||void 0===d?void 0:d.config,!m.pageConfiguration&&this.layoutState){const e=await this.getPrimaryAccountInfo();m.pageConfiguration=(0,xt.y)(this.layoutState,(null==e?void 0:e.accountType)===N.l.MSA)}let v;this.msNtpExpBitmask&&(m.edgExpMask=this.msNtpExpBitmask),m.skipRetry=this.config.enableSkipRetry;const y=null==g||null===(l=g.properties)||void 0===l?void 0:l.preloadLikelyExperiences,S=(0,I.x)(y)?void 0:()=>(0,At.P)(y,(()=>!!v));Et.SI.enableEarlyMainFeedRequest=!0;const w=(0,Mt.eW)();if(w)v=w,vt.Gq.set("__isSSRWpoFeedConsumed__",!0);else{const e=new Mt.fy({auctionRidOverride:this.config.auctionRidOverride,initialRequest:{timeoutMs:m.timeoutInMs}},!1);v=await e.fetchFromWpoService(m,!0,S,!1,a),v&&(v.responseStatus=e.getResponseStatus())}Et.SI.storeEarlyWpoFeedData(v),v&&v.pulseData&&(this.pulseData=v.pulseData),this.isWaterfallFeed(p)&&(0,Pt.s2)(m,v),(0,et.N)()||Et.SI.setSSRInitialFeedResponse(v)}async checkSignInStatusAndSetup(e){var t,n;const i=await(null===(t=this.pageSettingsDataConnector)||void 0===t?void 0:t.getPrimaryAccountInfoAsync(!0)),r=i&&""===i.accountId,o=void 0!==e.isEdgeSignInAllowed&&e.isEdgeSignInAllowed;let a;a=void 0===e.isEdgeSignInAllowed?"-1":!1===e.isEdgeSignInAllowed?"0":"1",ae.M0.addOrUpdateTmplProperty("signInPolicy",a);return r&&(null===(n=this.pageSettingsDataConnector)||void 0===n?void 0:n.checkAuthApiIsAvailable())&&o?(this.renderSignInControls=!0,this.updateHeaderGrid(),this.refreshHeaderHeight()):this.renderSignInControls=!1,this.updateHeaderCoreData(),r}async checkIsSignedOut(){const e=await this.getPrimaryAccountInfo();return e&&""===e.accountId}async getPrimaryAccountInfo(){var e;return null===(e=this.pageSettingsDataConnector)||void 0===e?void 0:e.getPrimaryAccountInfoAsync(!1)}get shouldShowNotificationMiniCard(){return!(this.config.notificationHeadingsOnly&&!this.isFeedDisabled())&&(!1!==this.layoutState.showQuickBrief&&this.config.childRefs.notificationMiniCard&&this.wpoNotificationPreviewData&&(this.columnArrangement===H.K$.c4||this.columnArrangement===H.K$.c5)&&"onerow"===this.quickLinksDisplaySetting&&!It.u.notificationMiniCardDismissed)}get showWeatherInFeedOff(){return!this.config.childRefs.notificationMiniCard||"c1"===this.columnArrangement||"c2"===this.columnArrangement||"c3"===this.columnArrangement}shadowDomPopulated(){var e,t,n,i,r,o,a,s,c,d,l,u,p,h,m,y,S,C,w,b,T,k,P,A;if(this.tryLoadFeedModuleBundle(),!(0,et.N)())return;if((this.config.childRefs.notificationMiniCard&&(this.config.notificationAnimation&&(g.Al.IsPrerender?(0,rt.lr)().then((()=>{this.enableNotificationAnimation=!0})):this.enableNotificationAnimation=!0),It.u.subscribe((e=>{this.wpoNotificationPreviewData=e}))),this.markVisuallyReadyRaf(),(0,Ne.FY)(_e._.headerSpaceHolder,null===(e=this.shadowRoot)||void 0===e||null===(t=e.getElementById)||void 0===t?void 0:t.call(e,"headerSpaceHolder")),this.backgroundOuterHolder=null===(n=this.shadowRoot)||void 0===n||null===(i=n.getElementById)||void 0===i?void 0:i.call(n,"bgOuterHolder"),(0,Ne.FY)(_e._.backgroundOuterHolder,this.backgroundOuterHolder),(0,Ne.FY)(_e._.backgroundInnerHolder,null===(r=this.shadowRoot)||void 0===r||null===(o=r.getElementById)||void 0===o?void 0:o.call(r,"bgInnerHolder")),(0,Ne.FY)(_e._.navBar,null===(a=this.shadowRoot)||void 0===a||null===(s=a.getElementById)||void 0===s?void 0:s.call(a,"g_nav")),(0,Ne.FY)(_e._.searchHistory,this.headerCoreRef.belowSearch),(0,Ne.FY)(_e._.headerGrid,null===(c=this.shadowRoot)||void 0===c||null===(d=c.getElementById)||void 0===d?void 0:d.call(c,"headerGrid")),this.topSitesHolder=null===(l=this.shadowRoot)||void 0===l||null===(u=l.getElementById)||void 0===u?void 0:u.call(l,"topSitesHolder"),this.recommendedSitesHolder=null===(p=this.shadowRoot)||void 0===p||null===(h=p.getElementById)||void 0===h?void 0:h.call(p,"recommendedSites"),"off"===this.layoutState.selectedQuickLinksDisplaySetting?(this.topSitesHolder.style.visibility="hidden",this.hideSearchHistory=!0):this.hideSearchHistory=!1,this.updateHeaderCoreBelowSearchData(),this.enableOneColumn)&&(this.conditionalBanner=null===(P=this.shadowRoot)||void 0===P||null===(A=P.querySelector)||void 0===A?void 0:A.call(P,".conditionalBannerHolder"),this.conditionalBanner)){new IntersectionObserver((e=>{const t=e[e.length-1];this.conditionalBannerShown=t.intersectionRatio>.5}),{root:null,rootMargin:"-10px 0px 0px 0px",threshold:.5}).observe(this.conditionalBanner)}if(this.config.cssImageHeight||this.refreshImageHeight(),this.calculateStickyBreakpoints(),this.setupTopSitesIntersectionObserver(),this.headerGrid=null===(m=this.shadowRoot)||void 0===m||null===(y=m.getElementById)||void 0===y?void 0:y.call(m,"headerGrid"),this.headerGrid){var I,E;const e=null===(I=this.shadowRoot)||void 0===I||null===(E=I.getElementById)||void 0===E?void 0:E.call(I,"translucentFeedSentinel"),t={root:null,rootMargin:-1*this.stickyHeaderHeight+"px 0px 0px",threshold:[.1,1]};new IntersectionObserver((t=>{if(!e||"off"===this.layoutState.selectedFeedDisplaySetting)return;1===t[t.length-1].intersectionRatio||window.innerHeight<this.headerHeight?(this.headerGrid.style.zIndex="1",this.headerGrid.classList.add("headerGrid_visible"),this.headerGrid.classList.remove("headerGrid_hidden"),(0,f.j3)("headerGrid","displayed"),window.setTimeout((()=>{this.headerGrid.style.zIndex=null}),200),this.headerGridHidden=!1):(this.headerGrid.classList.remove("headerGrid_visible"),this.headerGrid.classList.add("headerGrid_hidden"),(0,f.j3)("headerGrid","hidden"),this.headerGridHidden=!0)}),t).observe(e)}if(this.nav=null===(S=this.shadowRoot)||void 0===S||null===(C=S.getElementById)||void 0===C?void 0:C.call(S,"g_nav"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResize),(this.config.enableRefreshWhenPageHidden||this.config.enableAddRefreshTmpl)&&window.addEventListener("visibilitychange",this.handleFeedRefreshWhenPageHiddenVisibilityChange),this.isFromWidgetLockScreen&&window.addEventListener("telemetryviewportupdated",this.observeRiverVisibility),this.config.enableTrigChannelStoreCm&&(window.addEventListener("click",this.onClickForTrigChannelStoreCoachmark),window.addEventListener("infopaneFlipperTabClicked",this.onClickInfopaneFlipperTab),window.addEventListener("infopaneAnchorTagClicked",this.onClickInfopaneAnchor),this.dwellTimerForChannelStoreCoachmark=window.setTimeout((()=>{this.triggerChannelStoreCoachmark()}),1e4)),(this.config.enableRefreshWhenPageFocus||this.config.enableAddRefreshTmpl)&&(window.addEventListener("focus",this.handleFeedRefreshWhenPageHasFocus),window.addEventListener("blur",this.handleFeedRefreshWhenPageBlur)),this.config.enablePageFocusAnalyze&&(g.Al.IsPrerender&&(this.pageHiddenAnalyzeIsPreRender=!0,this.pageVisiblyChangeAnalyzeIsPreRender=!0,this.handlePageHiddenAnalyzeBlur(),this.handlePageHiddenAnalyzeVisibilityChange()),window.addEventListener("visibilitychange",this.handlePageHiddenAnalyzeVisibilityChange),window.addEventListener("focus",this.handlePageHiddenAnalyzeFocus),window.addEventListener("blur",this.handlePageHiddenAnalyzeBlur)),this.headerSpaceHolder.addEventListener("transitionend",this.onHeaderSpaceHolderTransitionEnd),this.initializePivotManager(),(0,Ne.FY)(_e._.complianceHyperlink,null===(w=this.shadowRoot)||void 0===w||null===(b=w.querySelector)||void 0===b?void 0:b.call(w,"#complianceHyperlink")),this.complianceHyperlink=(0,Ne.b_)(_e._.complianceHyperlink),(0,Ne.FY)(_e._.recommendedSites,null===(T=this.shadowRoot)||void 0===T||null===(k=T.querySelector)||void 0===k?void 0:k.call(T,"#recommendedSites")),this.recommendedSites=(0,Ne.b_)(_e._.recommendedSites),this.childRefs.recommendedSites){const e={root:null,rootMargin:-1*this.stickyHeaderHeight+"px 0px 0px",threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,.95,.99,1]};new IntersectionObserver((e=>{e[e.length-1].intersectionRatio>.99?(this.invisibleRecommendedSites=!1,this.updateNavFeedBorderRadius()):(this.invisibleRecommendedSites=!0,this.updateNavFeedBorderRadius())}),e).observe(this.recommendedSites)}(0,Ue.F_)().then((()=>window.requestAnimationFrame((()=>window.setTimeout((()=>{var e,t,n,i,r,o;null!==(e=this.config)&&void 0!==e&&null!==(e=e.childRefs)&&void 0!==e&&e.holidayEffects&&this.updateHolidayEffectsPostion(),this.updateTopSitesQuickLinkEndMarginUsedPadding(),(0,Ne.FY)(_e._.personalizeButton,null===(t=this.shadowRoot)||void 0===t||null===(n=t.getElementById)||void 0===n||null===(n=n.call(t,"g_nav"))||void 0===n||null===(i=n.querySelector)||void 0===i||null===(i=i.call(n,"super-nav"))||void 0===i||null===(i=i.shadowRoot)||void 0===i||null===(r=i.querySelector)||void 0===r||null===(r=r.call(i,"cs-super-nav-bar"))||void 0===r||null===(o=r.querySelector)||void 0===o?void 0:o.call(r,".settings-link"))}),10))))),(0,rt.lr)().then((()=>{this.areNavTopSitesOverlapping(),window.addEventListener("scroll",this.areNavTopSitesOverlapping)})),(0,Ue.F_)().then((()=>{var e;const t=null===(e=this.config)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.cacheSSRBasePageResponse;t&&async function(){const e=await(0,Ae.T)({type:"SW_ERROR_DATA"});if(e&&e.length){for(const t of e){const e=Ie[t.id];if(!e)continue;const n={...e,message:t.message};t.data&&(n.pb={...n.pb,...t.data}),ae.M0.sendAppErrorEvent(n)}ae.M0.addOrUpdateTmplProperty("swerr",e.length.toString())}}();const n=!!(0,v.$o)().getItem(ie);t&&n&&(0,v.$o)().removeItem(ie),t||n||(0,ye.w4)(ye.$j).then((e=>!!e&&(0,ye.w4)(ye.$u))).then((e=>{e&&(0,v.$o)().setItem(ie,"true")}))})),this.config.enableScrollPerfMetrics&&(0,et.N)()&&Promise.all([(0,le.b1)(),(0,le.e3)(),(0,rt.lr)()]).then((()=>{var e,t;return ae.M0.initScrollPerformanceTrackers({enableScrollInputTracking:this.config.enableScrollInputTracking&&((null===(e=ae.M0.getRequestId())||void 0===e?void 0:e.startsWith("1"))||(null===(t=(0,Ge.zp)())||void 0===t?void 0:t.includes("scrolltest=1"))),enableMissedScrollTracking:this.config.enableMissedScrollTracking,enableSectionScrollTracking:this.config.enableSectionScrollTracking})}));(window&&window.navigator).getBattery().then((e=>{ae.M0.addOrUpdateTmplProperty("userOnBatteryPower:",String(!e.charging))})),(0,le.b1)().then((()=>this.overlapStateChange()))}checkAndLogRectsOverlapping(e,t){if(0===e.height||0===e.width||0===t.height||0===t.width)return;!(e.top>t.bottom||e.right<t.left||e.bottom<t.top||e.left>t.right)&&((0,de.H)(ce.RtG,"Nav and top sites are overlapping",void 0,{...ce.RtG.pb,customMessage:`{"nav": ${JSON.stringify(e)}, "top sites": ${JSON.stringify(t)}, "selectedQuickLinksDisplaySetting": ${this.layoutState.selectedQuickLinksDisplaySetting}}`}),removeEventListener("scroll",this.areNavTopSitesOverlapping))}initializePivotManager(){this.pivotManager=(0,Ee.l)(null),this.pivotManager&&(ae.M0.addOrUpdateTmplProperty("fl","0"),this.pivotManager.addSwitchListener(ut.D.onPivotSwitch,Me.I.Telemetry),this.pivotManager.addSwitchListener(this.switchListenerCallback)),window.addEventListener(Nt.gQ,this.scrollToShowFeed),this.config.enableNavRefreshButton&&window.addEventListener(Nt._t,this.scrollToShowFeedWithRefresh)}observeRiverVisibility(){var e,t,n;const i=null===(e=(t=document).querySelector)||void 0===e||null===(e=e.call(t,"edge-chromium-page"))||void 0===e||null===(e=e.shadowRoot)||void 0===e||null===(n=e.querySelector)||void 0===n?void 0:n.call(e,".navAndContent");if(!i)return;new IntersectionObserver(((e,t)=>{window.shouldResetDwellTimer&&e&&"hidden"!==document.visibilityState&&e.map((e=>{if(e.intersectionRatio>=.01)return ae.M0.resetDwellTime(),ae.M0.startDwellTime(),i.focus(),(0,ue.Ou)().HeroRiverVisible=Math.round(performance.now()),(0,ue.Ou)().DocumentFocused=document.hasFocus()?1:0,window.shouldResetDwellTimer=!1,void window.setTimeout((()=>{t.unobserve(i),window.removeEventListener("telemetryviewportupdated",this.observeRiverVisibility)}),0)}))}),{root:null,rootMargin:"0px",threshold:.01}).observe(i)}filterFeedExperiencesToSkip(e){return"devTools"!==e&&("msRewards"===e?this.isShowRewardsAllowedByLocation:"channelStore"!==e)}async startContentLoad(e,t,n,i){ae.M0.addOrUpdateTmplProperty("fl","3");const r=this.isWaterfallFeed(i)?this.getExperienceConfigInfo("WaterfallViewFeed"):e;if(!(0,Oe.Z)(this.lastPivotSelection,{configInfo:r,context:t})){switch(this.lastPivotSelection={configInfo:r,context:t},this.layoutState.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":await(0,Ue.Qm)()}if((0,et.N)()&&this.config.enableChannelFiltering){if(null===Lt.yg||void 0===Lt.yg||!Lt.yg.overrideFeedConfig){const{properties:e}=(0,Be.Z)(await k.U.getConfig(r.configRef)||{});e&&Lt.yg.setFeedConfigOverrider((t=>this.setOverriddenFeedConfig(t(e))))}this.overriddenFeedConfig=null}n||(ae.M0.addOrUpdateTmplProperty("fl","4"),(0,Qe.Fg)(r)),this.initFeedDependencies(i),this.contentConfigInfo=r,this.context=t,this.isFeedRendered=!0,this.feedHasLoaded=!0,(0,rt.lr)().then((()=>{(0,ye.w$)("FEED_VISIBLE")}))}}fireLayoutAnimationComplete(){window.setTimeout((()=>{st.I.layoutAnimationComplete.getActionSender(this.pageSettingsDataConnector).send({height:100})}),0)}async onClick_MarqueeAd(e){window.open(this.marqueeAd.clickThroughUrl,"_blank").focus(),await Bt.o.sendBeacons(this.marqueeAd.adClickedUrls)}async onClick_MarqueeAdCTAButton(){await this.onClick_MarqueeAd(this.ref_marqueeAdCTAButton)}async onClick_MarqueeAdSponsorLogo(){await this.onClick_MarqueeAd(this.ref_marqueeAdSponsorLogo)}async reportPerfMarkers(){const e=(0,wt.K0)(o.z.ExperienceTrackerEdgeNextData);if((0,le.b1)().then((e=>{var t;const n=null===(t=e.find((e=>"TTVR"===e[0])))||void 0===t?void 0:t[1],i=(0,Ue.S0)();n&&pt.g.updatePageComplete.getActionSender(i).send(n)})),await(0,Ze.f)({incompleteVisualDependencyCallback:e&&e.getIncompleteVisualDependencies||null,contentViewTimeoutOverride:2e3,timeoutOverride:35e3,onBeforeNotifyCallback:()=>{(0,he.o)([["TTVR.BingImage",["TTVR.BackgroundImageWC"]],["TTVR.QuickLinks",["TTVR.TopSitesEdgeNextWC"]],["TTVR.Feed",["TTVR"]]]);const e=(0,ue.Ou)();g.Al.IsPrerender||((0,ue.zp)("reload")?e["TTVR.E2E"]=e.TTVR:e.tabStartToNavigationStart&&(e["TTVR.E2E"]=e.TTVR+e.tabStartToNavigationStart)),e.timeToSendPrimaryPerfMarkers=performance.now()}}),g.Al.IsPrerender){let e=!1;(0,ot.eC)().then((()=>{window.setTimeout((()=>{e||(0,de.H)(ce.aay,"Prerender Reveal not completed before timeout")}),3e3)})),await(0,rt.lr)(),e=!0}this.addE2ETtvrToSecondaryPageTimings();!async function(e){if(!(0,et.N)())return;e=e||{},g.Al.IsPrerender&&((0,ue.Y9)()[tt.C7]=1);let t=!1;new Promise((n=>{const i=setTimeout((()=>{n(),t=!0,(0,Xe.If)(r,le.oN.Secondary,e.incompleteVisualDependencyCallback)}),e.timeoutOverride||2e4);async function r(t){i&&clearTimeout(i);const n=!!e.pageLoadEventsAvailableCallback&&!e.pageLoadEventsAvailableCallback();(0,Xe.ql)(t,e.onBeforeNotifyCallback&&(()=>{e.onBeforeNotifyCallback(t)}),n)}(0,le.e3)().then((e=>{n(),t||r(e)}))}))}({incompleteVisualDependencyCallback:e&&e.getIncompleteVisualDependencies||null,timeoutOverride:35e3})}addE2ETtvrToSecondaryPageTimings(){var e;const t=(0,ue.Ou)(),n=(0,ue.Y9)();if(!t||!n)return;const i=t[pe.MV],r=t[`${pe.MV}.SearchBox`],o=t[pe.zJ],a=`${pe.MV}.${pe.T8}`,s=`${pe.MV}.SearchBox.${pe.T8}`,c=`${pe.zJ}.${pe.T8}`,d=(e,i,r,o)=>{t[e]=n[e]=i,(0,ge.QP)({name:e,startTime:r,endTime:o})},l=(e,i)=>{t[e]=n[e]=i,(0,ge.zI)({name:e,duration:i})};if((0,ue.zp)("reload"))return d(a,i,0,i),d(s,r,0,r),void d(c,o,0,o);if(null===(e=window)||void 0===e||null===(e=e.chrome)||void 0===e||null===(e=e.embeddedSearch)||void 0===e||null===(e=e.newTabPage)||void 0===e||!e.getTabTimings)return void(0,de.H)(ce.IfP,"window.chrome.embeddedSearch.newTabPage.getTabTimings does not exist.");const u=e=>{g.Al.IsPrerender&&(e+=t[pe.U4]),i&&l(a,e+i),r&&l(s,e+r),o&&l(c,e+o)},p=t.tabStartToNavigationStart;if(p)u(p);else{const e=Math.round(performance.now());window.chrome.embeddedSearch.newTabPage.getTabTimings(((t,n)=>{if(!t)return void(0,de.H)(ce.tkb,"chrome.embeddedSearch.newTabPage.getTabTimings returned false.");if(!n||!n.tabStartToNavigationStart)return void(0,de.H)(ce.OWM,"chrome.embeddedSearch.newTabPage.getTabTimings returned invalid timing object.");u(n.tabStartToNavigationStart);const i=Math.round(performance.now()),r=i-e;d(pe.OM,r,e,i)}))}}getExperienceType(){return s.x.edgeChromiumPageWC}updateHeaderGrid(){if(this.isFeedAlways)return void this.updateHeaderGridRowsForFeedAlways();const{selectedFeedDisplaySetting:e,selectedQuickLinksDisplaySetting:t}=this.layoutState,n=this.layoutState.imageOfTheDayEnabled;let i=16;this.childRefs.newsHeadlineBelowSearchbox&&this.notSupportLayout&&-1===this.notSupportLayout.indexOf(e)&&(i=32);const r=this.recommendedSitesHeight,o=this.childRefs.recommendedSites?`${r}px`:"",a="off"===this.layoutState.selectedQuickLinksDisplaySetting?"0":"auto";let s=`${Sn(this)}px`;const c=this.isTopsitesNeedPadding(this.layoutState.selectedQuickLinksDisplaySetting)?"8px":"0px";if(n){let e;var d;if(this.layoutState.selectedQuickLinksDisplaySetting)e="tworows"===this.layoutState.selectedQuickLinksDisplaySetting;else e=(null===(d=this.topSitesLayoutState)||void 0===d?void 0:d.maxTiles)>10;this.weatherOneLinerRow=6;const t="onerow"===this.layoutState.selectedQuickLinksDisplaySetting||"off"===this.layoutState.selectedQuickLinksDisplaySetting||this.config.disableFeed,n=this.enableOneColumn?"minmax(32px, 15%)":"minmax(78px, 15%)";if(this.layoutState.configData&&this.layoutState.configData.maxQuickLinks&&this.layoutState.configData.maxQuickLinks>=29&&this.layoutState.configData.enabledFeatures&&this.layoutState.configData.enabledFeatures.includes("msNtpExp1")&&t&&"off"===this.layoutState.selectedFeedDisplaySetting)this.gridRows=`${n} 46px ${i}px 1fr auto 20%`,this.childRefs.recommendedSites&&("off"===this.recommendedSitesDisplaySetting&&(s="20%"),this.gridRows=`${n} 46px ${i}px 1fr ${a} ${s} auto ${o}`,this.weatherOneLinerRow=6,this.scrollDownBtnRow=7,this.recommendedSitesRow=8);else{const t=e?"20%":"12%";if(this.gridRows=`${n} 46px ${i}px auto 1fr ${t}`,this.childRefs.recommendedSites){const t="0px"!==o&&""!==o?"18px":"";"off"===this.recommendedSitesDisplaySetting?s=e?"20%":"12%":"peek"===this.layoutState.selectedFeedDisplaySetting&&(s="50px"),this.gridRows=`${n} 46px ${i}px ${a} 1fr ${c} ${s} auto ${o}`,this.showNavAndContentTemplate||(this.gridRows=`${this.gridRows} ${t}`),this.weatherOneLinerRow=7,this.scrollDownBtnRow=8,this.recommendedSitesRow=9}}this.logoRow=1,this.searchRow=2,this.topSitesRow=4}else this.childRefs.recommendedSites&&"off"!==this.layoutState.selectedQuickLinksDisplaySetting||!this.childRefs.recommendedSites&&(this.layoutState.quickLinksEnabled||"off"!==this.layoutState.selectedQuickLinksDisplaySetting)?(this.gridRows=`1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px 46px ${i}px auto 32px 1fr`,this.weatherOneLinerRow=8,this.childRefs.recommendedSites&&(this.gridRows=`1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px 46px ${i}px ${a} 32px ${c} ${o} 1fr`,this.recommendedSitesRow=9,this.weatherOneLinerRow=10),this.logoRow=2,this.searchRow=4,this.topSitesRow=6):(this.gridRows=`1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px 46px ${i}px 1fr`,this.logoRow=2,this.searchRow=4,this.topSitesRow=6,this.weatherOneLinerRow=7,this.childRefs.recommendedSites&&(this.gridRows=`1fr ${this.enableOneColumn?"minmax(0px, auto)":"auto"} 72px 46px ${i}px 32px ${a} ${o} 1fr`,this.topSitesRow=7,this.weatherOneLinerRow=9,this.recommendedSitesRow=8))}updateHeaderGridRowsForFeedAlways(){const{rows:e,rowIndexes:t}=wn(this);this.gridRowHeights=e,this.gridRows=e.map((e=>`${e}px`)).join(" "),this.searchRow=t.searchRow,this.topSitesRow=t.topSitesRow,this.marqueeAdRow=t.marqueeAdRow,this.recommendedSitesRow=t.recommendedSitesRow,this.logoRow=t.logoRow,this.marqueeAdActive&&e.length&&this.updateMarqueeAdHeightsForFeedAlways()}updateMarqueeAdHeightsForFeedAlways(){if(this.gridRowHeights.length){const[e,t,n]=this.gridRowHeights;this.marqueeAdTopHeight=e+t+n-window.scrollY,this.marqueeAdOverlayHeight=this.headerHeight-this.marqueeAdTopHeight}else this.marqueeAdTopHeight=0,this.marqueeAdOverlayHeight=0}getHeaderHeightForPeekMode(){const e=this.getMinimumHeaderHeightForPeekMode();let t=window.innerHeight-this.navHeight-(this.config.maxPeekViewport??262);return t<e&&(t=e),t}refreshHeaderHeight(){if(!(0,et.N)()&&this.shouldAutoScroll&&this.shouldShrinkHeader)return void(this.headerHeight=78);if(!this.topSitesLayoutState||!this.layoutState)return;if(this.contentOffHeaderHeight=void 0,this.config.disableFeed)return void(this.headerHeight=window.innerHeight);let e;switch(this.layoutState.selectedFeedDisplaySetting){case"headingsonly":e=window.innerHeight-this.navHeight-this.headingsOnlyHeightReduction;break;case"peek":e=this.getHeaderHeightForPeekMode();break;case"onscroll":e=window.innerHeight;break;case"off":e=window.innerHeight,this.contentOffHeaderHeight="100vh";break;default:e=this.getHeaderHeightForFeedAlways()}this.headerHeight=e}getMinimumHeaderHeightForPeekMode(){let e=0;return this.layoutState.imageOfTheDayEnabled?(e+=78,e+=46,e+=32,e+=this.topSitesHeightBelowSearchBoxForPeekMode,this.childRefs.recommendedSites&&"off"!==this.recommendedSitesDisplaySetting&&("off"!==this.layoutState.selectedQuickLinksDisplaySetting&&(e+=16),e+=this.recommendedSitesHeight),e+=30):(e+=64,e+=48,e+=72,e+=46,e+=32,e+=32,e+=this.topSitesHeightBelowSearchBoxForPeekMode,this.childRefs.recommendedSites&&"off"!==this.recommendedSitesDisplaySetting&&("off"!==this.layoutState.selectedQuickLinksDisplaySetting&&(e+=16),e+=this.recommendedSitesHeight),e+=30),e}refreshImageHeight(){this.imageHeight=window.innerHeight+"px"}refreshTranslucentMode(){if(this.config.translucentFeed&&"off"!==this.layoutState.currentBackgroundImageType){var e,t,n,i,r,o,a,s,c,d,l,u,p,h,g,m,v,y,S;this.showFeedTranslucent=!0,this.stickyOverrideStyles="",null!==(e=this.config.translucentFeed)&&void 0!==e&&e.translucentStickyHeader&&(this.stickyOverrideStyles="background-color: "+((0,U.Y)()?"#242424e6":"#F7F7F7e6")+";");const T=(null===(t=this.config.translucentFeed)||void 0===t?void 0:t.enableBlur)&&["always","peek","headingsonly"].includes(null===(n=this.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&(this.navIsSticky||"always"==(null===(i=this.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&["load","all"].includes(null===(r=this.config.translucentFeed)||void 0===r?void 0:r.infoBlurEnabledScene)&&!(null!==(o=this.config.translucentFeed)&&void 0!==o&&o.enableFeedBackplate)),k=(null===(a=this.config.translucentFeed)||void 0===a?void 0:a.enableBlur)&&!this.navIsSticky&&["peek","headingsonly"].includes(null===(s=this.layoutState)||void 0===s?void 0:s.selectedFeedDisplaySetting)&&["load","all"].includes(null===(c=this.config.translucentFeed)||void 0===c?void 0:c.inspBlurEnabledScene);var C;if(this.feedOverrideStyles="",k)this.feedOverrideStyles+="backdrop-filter: blur("+(null===(C=this.config.translucentFeed)||void 0===C?void 0:C.bgBlurSize)+");";if(T)this.feedOverrideStyles+="";else if(null!==(d=this.config.translucentFeed)&&void 0!==d&&d.feedOpacity&&(0,U.Y)()){var w;this.feedOverrideStyles+="background-color: rgb(36 36 36 / "+(k?"0.5":null===(w=this.config.translucentFeed)||void 0===w?void 0:w.feedOpacity)+");"}else if(null!==(l=this.config.translucentFeed)&&void 0!==l&&l.feedOpacity&&!(0,U.Y)()){var b;this.feedOverrideStyles+="background-color: rgb(247 247 247 /"+(k?"0.5":null===(b=this.config.translucentFeed)||void 0===b?void 0:b.feedOpacity)+");"}return this.feedOverrideStyles+=null!==(u=this.config.translucentFeed)&&void 0!==u&&u.feedSidePadding?`padding-left: ${null===(p=this.config.translucentFeed)||void 0===p?void 0:p.feedSidePadding}; padding-right: ${null===(h=this.config.translucentFeed)||void 0===h?void 0:h.feedSidePadding};`:"",this.feedOverrideStyles+=null===(g=this.config.translucentFeed)||void 0===g||!g.feedBorderRadius||null!==(m=this.childRefs)&&void 0!==m&&m.recommendedSites&&!this.invisibleRecommendedSites?"":`border-radius: ${null===(v=this.config.translucentFeed)||void 0===v?void 0:v.feedBorderRadius};`,this.feedOverrideStyles+=!T&&null!==(y=this.config.translucentFeed)&&void 0!==y&&y.feedBoxShadow?`box-shadow: ${null===(S=this.config.translucentFeed)||void 0===S?void 0:S.feedBoxShadow};`:"",void(0,f.j3)("backgroundImage","displayed")}this.feedOverrideStyles="",this.stickyOverrideStyles="",this.showFeedTranslucent=this.scrollIsPastStyleThreshold&&this.layoutState.imageOfTheDayEnabled&&("headingsonly"===this.layoutState.selectedFeedDisplaySetting||"peek"===this.layoutState.selectedFeedDisplaySetting),(0,f.j3)("backgroundImage",this.showFeedTranslucent?"displayed":"hidden")}handleTopSitesEnableChange(e,t){if(this.topSitesHolder){if("always"===t.selectedFeedDisplaySetting&&!e)return this.topSitesHolder.style.opacity="0",void(this.topSitesHolder.style.visibility="hidden");e?(this.topSitesHolder.style.visibility="",this.topSitesHolder.style.opacity="1"):this.topSitesHolder.style.opacity="0",window.setTimeout((()=>{e||(this.topSitesHolder.style.visibility="hidden"),this.topSitesHolder.style.transition=null}),Tn)}}getHeaderHeightForFeedAlways(){return this.gridRowHeights.length||this.updateHeaderGridRowsForFeedAlways(),this.gridRowHeights.reduce(((e,t)=>e+t),0)}getTopBreakpointForFeedAlways(){this.gridRowHeights.length||this.updateHeaderGridRowsForFeedAlways();let e=this.gridRowHeights;return this.marqueeAdActive&&this.marqueeAdHeight>0&&this.marqueeAdRow>0&&(e=this.gridRowHeights.slice(0,this.marqueeAdRow-1),e.push(8)),e.reduce(((e,t)=>e+t),0)}isTopsitesNeedPadding(e){return"off"!==e&&this.recommendedSitesHeight>0}checkMarketToggleOverlap(e,t,n){const i=e.getBoundingClientRect();let r=!1;if(i){const e=!(i.right<t.left||i.left>t.right),o=n?i.bottom>t.top:i.top<t.bottom;r=e&&o}return r}checkMarketToggleFitOnPage(){var e,t,n,i,r,o,a,s,c,d,l,u;if(!this.shadowRoot)return!0;let p=null===(e=this.shadowRoot)||void 0===e||null===(t=e.querySelector)||void 0===t?void 0:t.call(e,"market-language-toggle");const h=null===(n=this.shadowRoot)||void 0===n||null===(i=n.querySelector)||void 0===i?void 0:i.call(n,"cs-header-core");if(!p){var g,m;if(!h)return!0;p=null===(g=h.shadowRoot)||void 0===g||null===(m=g.querySelector)||void 0===m?void 0:m.call(g,"market-language-toggle")}if(!p||!p.shadowRoot||null===(r=p.shadowRoot)||void 0===r||!r.children)return!0;const f=null===(o=p.shadowRoot)||void 0===o?void 0:o.children[0];if(!f)return!0;null===(a=p.classList)||void 0===a||a.remove("overflow");const v=f.getBoundingClientRect(),y=null===(s=this.headerCoreRef)||void 0===s?void 0:s.search;var S;if(y&&this.checkMarketToggleOverlap(y,v,!1))return null===(S=p.classList)||void 0===S||S.add("overflow"),!1;const C=null===(c=this.shadowRoot)||void 0===c||null===(d=c.querySelector)||void 0===d?void 0:d.call(c,"background-image");if(C){var w,b;const e=null===(w=C.shadowRoot)||void 0===w||null===(b=w.querySelector)||void 0===b?void 0:b.call(w,".museumCard");var T;if(e)if(this.checkMarketToggleOverlap(e,v,!1))return null===(T=p.classList)||void 0===T||T.add("overflow"),!1}const k=null===(l=this.shadowRoot)||void 0===l||null===(u=l.querySelector)||void 0===u?void 0:u.call(l,"top-sites-edgenext");var P;if(k&&this.checkMarketToggleOverlap(k,v,!1))return null===(P=p.classList)||void 0===P||P.add("overflow"),!1;return!0}triggerChannelStoreCoachmark(){window.dispatchEvent(new CustomEvent(u.g.launchChannelStoreCoachmark)),this.scrollCanTrigChannelStoreCoachmark=!1,window.clearTimeout(this.dwellTimerForChannelStoreCoachmark),this.dwellTimerForChannelStoreCoachmark=null,window.removeEventListener("click",this.onClickForTrigChannelStoreCoachmark),window.removeEventListener("infopaneFlipperTabClicked",this.onClickInfopaneFlipperTab),window.removeEventListener("infopaneAnchorTagClicked",this.onClickInfopaneAnchor)}focusFeedBorderScrollFade(){var e,t;const n=null===(e=this.shadowRoot)||void 0===e||null===(t=e.querySelector)||void 0===t?void 0:t.call(e,".navAndContent_feed");n&&(0!=window.scrollY?n.classList.add("navAndContent_noshadow"):0==window.scrollY&&n.classList.remove("navAndContent_noshadow"))}checkGalleryPageFitAndDisplayToast(){window.requestAnimationFrame((()=>{innerWidth<Dt.Gb&&(this.backgroundDataConnector.updateBackgroundGalleryDisplayed(!1),this.renderGalleryMinimumWidthToast())}))}renderGalleryMinimumWidthToast(){this.displayGalleryMinimumWidthToast=!0,window.setTimeout((()=>{this.displayGalleryMinimumWidthToast=!1}),5e3)}getSelectedPivot(e){return e&&e.selectedFeedPivot?e.selectedFeedPivot:(0,v.$o)().getItem("switchedPivot")}calculateStickyBreakpoints(){0===window.scrollY&&this.calculateSearchStickyBreakpoint(),this.calculateTopAndBackgroundStickyBreakpoints()}calculateSearchStickyBreakpoint(){const e=this.headerCoreRef;if(!e)return;let t=this.edgeHeaderTopMarin;t+=this.topBannerOffsetHeight;const n=e.offsetTop;this.searchStickyBreakpoint=n-t+(this.enableOneColumn?this.stickyHeaderHeight:0),(0,Re.Fc)("search",this.searchStickyBreakpoint)}calculateTopAndBackgroundStickyBreakpoints(){const{selectedFeedDisplaySetting:e}=this.layoutState;let t;switch(e){case"always":t=this.getTopBreakpointForFeedAlways()-this.stickyHeaderHeight-this.topBannerOffsetHeight;break;case"peek":t=this.getHeaderHeightForPeekMode()-this.stickyHeaderHeight-this.topBannerOffsetHeight;break;case"headingsonly":t=window.innerHeight-this.stickyHeaderHeight-this.navHeight-this.topBannerOffsetHeight-this.headingsOnlyHeightReduction;break;default:t=window.innerHeight-this.stickyHeaderHeight-this.topBannerOffsetHeight}const n=t,i=t;(0,Re.Fc)(G,-1),(0,Re.Fc)(z,n+this.stickyHeaderHeight),(0,x.cN)(n+this.stickyHeaderHeight),"off"!==this.layoutState.currentBackgroundImageType?(0,Re.Fc)(V,i):(0,Re.Fc)(V,-1),this.navIsSticky=window.scrollY>n,this.updateHeaderCoreOffset()}scrollDownOnLoad(){this.shouldShrinkHeader&&window.scroll(0,this.headerHeight-78)}updateNavFeedBorderRadius(){var e,t,n,i;null!==(e=this.navAndContentFeedRef)&&void 0!==e&&e.style&&(null===(t=this.config.translucentFeed)||void 0===t||!t.feedBorderRadius||null!==(n=this.childRefs)&&void 0!==n&&n.recommendedSites&&!this.invisibleRecommendedSites?this.navAndContentFeedRef.style.borderRadius="0px":this.navAndContentFeedRef.style.borderRadius=null===(i=this.config.translucentFeed)||void 0===i?void 0:i.feedBorderRadius)}getCompanyLogo(){const e=this.layoutState.currentLayout;this.showBackplate="focused"===e||"custom"===e&&!this.layoutState.imageOfTheDayEnabled||"informational"===e&&this.config.turnOffBkgdForInformational&&this.layoutState.imageOfTheDayEnabled||"informational"===e&&this.isLowEndDevice,this.showCompanyLogo=!("c1"===this.columnArrangement||"c2"===this.columnArrangement),this.companyLogoImage=this.getCompanyLogoFromLocalStorage(),this.updateHeaderCoreData()}updateHolidayEffectsPostion(){this.holidayEffectsPosition="display: none;",window.setTimeout((()=>{var e,t,n;const i=getComputedStyle(this).getPropertyValue("--direction")===at.N.ltr,r=null===(e=this.shadowRoot)||void 0===e||null===(t=e.querySelector)||void 0===t||null===(t=t.call(e,"background-image"))||void 0===t||null===(t=t.shadowRoot)||void 0===t||null===(n=t.querySelector)||void 0===n?void 0:n.call(t,".museumCard");if(r&&r.clientWidth){const e=r.clientWidth+162;this.holidayEffectsPosition=i?`left: calc(100% - ${e}px);`:`right: calc(100% - ${e}px);`}else this.holidayEffectsPosition=i?"left: calc(100% - 300px);":"right: calc(100% - 300px);"}),Tn)}updateTopSitesQuickLinkEndMarginUsedPadding(){var e,t,n,i;const r=!(null===(e=this.config)||void 0===e||null===(e=e.childRefs)||void 0===e||!e.holidayEffects),o=null===(t=this.shadowRoot)||void 0===t||null===(n=t.querySelector)||void 0===n||null===(n=n.call(t,"background-image"))||void 0===n||null===(n=n.shadowRoot)||void 0===n||null===(i=n.querySelector)||void 0===i?void 0:i.call(n,".museumCard");(r||o)&&window.setTimeout((()=>{"off"===this.layoutState.selectedQuickLinksDisplaySetting&&(r&&(this.topSitesQuickLinkEndMarginUsedPadding+=124),o&&o.clientWidth&&(this.topSitesQuickLinkEndMarginUsedPadding+=o.clientWidth),this.pageSettingsDataConnector&&this.pageSettingsDataConnector.updateTopSitesQuickLinkEndMarginUsedPadding(this.topSitesQuickLinkEndMarginUsedPadding))}),Tn)}async initializeDevTools(){this.config.childRefs.devTools&&Promise.all([(0,le.b1)(),(0,le.e3)(),(0,rt.lr)()]).then((()=>(0,T.rh)(2e3))).then((()=>{var e,t;const n=g.Al.ClientSettings,i=(null==n||null===(e=n.detection)||void 0===e?void 0:e.isMsft)||(null==n||null===(t=n.detection)||void 0===t?void 0:t.isCorpNet)||C.jG.IsDebug||"int"===n.env;i&&(0,Qe.Fg)(this.config.childRefs.devTools),this.enableDevTools=i}))}updateFeedLayoutTelemetry(){ae.M0.updatePageMetadata({feed:{layout:"multicol"}})}checkIPLocationForRewardsMedallion(){var e;if(null===(e=this.config)||void 0===e||!e.enableCountryCheckForRewards||!C.jG.CountryCode)return void(this.isShowRewardsAllowedByLocation=!1);const t=C.jG.CountryCode.toUpperCase();this.isShowRewardsAllowedByLocation=null==p?void 0:p.has(t)}async tryLoadFeedModuleBundle(){this.feedModuleImportPromise||(this.feedModuleImportPromise=(0,yt.n)(this.config),await this.feedModuleImportPromise)}updateHeaderCoreData(){const e=this.layoutState.greetingEnabled&&this.childRefs.welcomeGreeting&&!this.isNewTabPageContentManagedByPolicy&&!this.isWeatherHeroExperience,t=this.isAppLauncherAllowedByPolicy,n=this.renderSignInControls,i=this.childRefs.msRewards&&this.isShowRewardsAllowedByLocation&&this.isShowMSRewardsAllowedByPolicy,r=this.childRefs.notificationBell&&"off"!==this.layoutState.selectedFeedDisplaySetting&&this.isNotificationEnabledByAdmin,o=this.layoutState.isCompanyLogoEnabledByPolicy&&this.showCompanyLogo&&this.config.companyLogo&&!!this.companyLogoImage;this.headerCoreTopStartData={waffleRef:t?this.childRefs.waffle:null,enableMSBranding:!this.config.companyLogo,brandingTitle:this.config.logoRedirectionUrl?this.strings.logoSeeMoreTitleText:this.strings.logoTitleText,brandingHref:this.config.logoRedirectionUrl?(0,E.h_)(this.config.logoRedirectionUrl):"",backgroundImageOn:this.layoutState.imageOfTheDayEnabled,enableCompanyLogo:o,companyLogoImage:this.companyLogoImage,showcompanyLogoBackplate:this.showBackplate,enableClickableCompanyLogo:o&&this.config.enableClickableCompanyLogo},this.headerCoreTopEndData={rewardsHideFirst:this.config.rewardsHideFirst,addMobOrRwdsHiddenTMPL:this.config.addMobOrRwdsHiddenTMPL,signInControlRef:n&&!this.config.useNewSignInButtonStyles?this.childRefs.signInControl:null,signInControlAtTheEndRef:n&&this.config.useNewSignInButtonStyles?this.childRefs.signInControl:null,mobileAppUpsellRef:this.childRefs.mobileAppUpsell,rewardsRef:i?this.childRefs.msRewards:null,welcomeGreetingRef:e?this.childRefs.welcomeGreeting:null,notificationBellRef:r?this.childRefs.notificationBell:null,settingsRef:this.childRefs.settings,themePickerRef:this.childRefs.themePicker,marketLanguageToggleRef:this.renderMarketLanguageToggle?this.childRefs.marketLanguageToggleWC:null,localeMarket:this.localeMarket,onMarketValueChange:this.onMarketValueChange,languageToggleHorizontalAlignment:!1,delayNonVisibleComponents:this.config.delayNonVisibleComponents}}updateHeaderCoreSearchData(){var e,t,n;this.headerCoreSearchData={searchConfigRef:this.childRefs.search,showCodexBingIcon:null===(e=this.config)||void 0===e?void 0:e.showCodexBingIcon,enableCodexBingStyles:(null===(t=this.config)||void 0===t?void 0:t.showCodexBingIcon)&&(this.isAlwaysMode||0!=(null===(n=window)||void 0===n?void 0:n.scrollY))}}updateHeaderCoreBelowSearchData(){this.headerCoreBelowSearchData={searchHistoryRef:this.childRefs.searchHistory,newsHeadlineBelowSearchboxRef:this.isNewTabPageContentManagedByPolicy?null:this.childRefs.newsHeadlineBelowSearchbox}}targetLanguageOnMismatch(e){const t=g.Al.ClientSettings&&g.Al.ClientSettings.market&&g.Al.ClientSettings.market.requestInput,n=C.jG.CurrentMarket.split("-"),i={language:(t.language??"").toLowerCase(),market:(t.region??"").toLowerCase()};if(t&&i&&"zh"!==i.language){const t={language:i.language,market:n[n.length-1]},r=h.$n.find((e=>e.id==(0,Rt.p)(t)));if(r)return r;const o=i.market&&h.$n.find((e=>e.id==(0,Rt.p)(i)));if(o)return o;{const t=e.get(i.language);if(t)return h.$n.find((e=>e.id==t[0]))}}}async onConditionalBannerDisplayChange(e){this.displayConditionalBanner=e,this.updateStickyHeaderHeight(),this.updateHeaderCoreOffset(),this.updateHeaderGrid(),this.refreshHeaderHeight(),await(0,Le.y)().then((()=>this.calculateStickyBreakpoints()))}updateStickyHeaderHeight(){this.stickyHeaderHeight=x.FQ,this.enableOneColumn||(this.stickyHeaderHeight+=this.topBannerOffsetHeight)}updateHeaderCoreOffset(){this.headerCoreOffset=0,this.enableOneColumn||(this.headerCoreOffset+=this.topBannerOffsetHeight)}attachListenerForKeyDownScrollOnFocus(){window.addEventListener("keyup",this.scrollOnKeyUp,{once:!0}),window.addEventListener("keyup",this.focusControlOnScrollKeyUp),window.addEventListener("wheel",this.focusControlOnWheel)}scrollOnKeyUp(e){if("PageDown"==e.key||"ArrowDown"==e.key){var t;const n=null===(t=document)||void 0===t?void 0:t.activeElement;if(!n||"EDGE-CHROMIUM-PAGE"===n.tagName)return;window.setTimeout((()=>{if(0==window.scrollY){const t="PageDown"==e.key?window.innerHeight:window.innerHeight/5;window.scrollBy({top:t,behavior:"smooth"})}}),1)}}blurGridViewWhenActive(e){var t,n,i;e&&e.shadowRoot&&null!==(t=e.shadowRoot)&&void 0!==t&&t.activeElement&&"gridViewFeed"==(null===(n=e.shadowRoot)||void 0===n?void 0:n.activeElement.elementKey)&&(null===(i=e.shadowRoot)||void 0===i||i.activeElement.blur())}isVpTest(){return"1"===M.c.getQueryParameterByName("vptest",location.href)}}(0,r.gn)([St.LO],En.prototype,"isLowEndDevice",void 0),(0,r.gn)([St.LO],En.prototype,"layoutState",void 0),(0,r.gn)([St.LO],En.prototype,"columnArrangement",void 0),(0,r.gn)([St.LO],En.prototype,"quickLinksDisplaySetting",void 0),(0,r.gn)([St.LO],En.prototype,"headerHeight",void 0),(0,r.gn)([St.LO],En.prototype,"contentOffHeaderHeight",void 0),(0,r.gn)([St.LO],En.prototype,"imageHeight",void 0),(0,r.gn)([St.LO],En.prototype,"gridRows",void 0),(0,r.gn)([St.LO],En.prototype,"enableOneColumn",void 0),(0,r.gn)([St.LO],En.prototype,"showPivotRefreshButton",void 0),(0,r.gn)([St.LO],En.prototype,"closeRefreshAnimation",void 0),(0,r.gn)([St.LO],En.prototype,"logoRow",void 0),(0,r.gn)([St.LO],En.prototype,"searchRow",void 0),(0,r.gn)([St.LO],En.prototype,"topSitesRow",void 0),(0,r.gn)([St.LO],En.prototype,"marqueeAdRow",void 0),(0,r.gn)([St.LO],En.prototype,"recommendedSitesRow",void 0),(0,r.gn)([St.LO],En.prototype,"weatherOneLinerRow",void 0),(0,r.gn)([St.LO],En.prototype,"scrollDownBtnRow",void 0),(0,r.gn)([St.LO],En.prototype,"isWeatherOneLinerMapped",void 0),(0,r.gn)([St.LO],En.prototype,"showWeatherOneLiner",void 0),(0,r.gn)([St.LO],En.prototype,"isPersonalizedTopicsInOneLiner",void 0),(0,r.gn)([St.LO],En.prototype,"isWpoOptimizationAdded",void 0),(0,r.gn)([St.LO],En.prototype,"showFeedTranslucent",void 0),(0,r.gn)([St.LO],En.prototype,"showDarkIcon",void 0),(0,r.gn)([St.LO],En.prototype,"needDarkThemeIcons",void 0),(0,r.gn)([St.LO],En.prototype,"stickyOverrideStyles",void 0),(0,r.gn)([St.LO],En.prototype,"feedOverrideStyles",void 0),(0,r.gn)([St.LO],En.prototype,"enableHiddenRecommendedSitesStyles",void 0),(0,r.gn)([St.LO],En.prototype,"recommendedSitesDisplaySetting",void 0),(0,r.gn)([St.LO],En.prototype,"navIsSticky",void 0),(0,r.gn)([St.LO],En.prototype,"isTtvrFiredAndCanUseDom",void 0),(0,r.gn)([St.LO],En.prototype,"edgeHeaderTopMarin",void 0),(0,r.gn)([St.LO],En.prototype,"pivotManager",void 0),(0,r.gn)([St.LO],En.prototype,"conditionalBannerShown",void 0),(0,r.gn)([St.LO],En.prototype,"isAlwaysMode",void 0),(0,r.gn)([St.LO],En.prototype,"bottomRightCornerClassName",void 0),(0,r.gn)([St.LO],En.prototype,"className",void 0),(0,r.gn)([St.LO],En.prototype,"canaryFlightEnabled",void 0),(0,r.gn)([St.LO],En.prototype,"holidayEffectsPosition",void 0),(0,r.gn)([St.LO],En.prototype,"displayConditionalBanner",void 0),(0,r.gn)([St.LO],En.prototype,"isOnPersonalizeOrM365Page",void 0),(0,r.gn)([St.LO],En.prototype,"isOnM365Page",void 0),(0,r.gn)([St.LO],En.prototype,"nowPivotId",void 0),(0,r.gn)([St.LO],En.prototype,"isNewTabPageContentManagedByPolicy",void 0),(0,r.gn)([St.LO],En.prototype,"contentConfigInfo",void 0),(0,r.gn)([St.LO],En.prototype,"context",void 0),(0,r.gn)([St.LO],En.prototype,"getFeedDependencyPromise",void 0),(0,r.gn)([St.LO],En.prototype,"pulseData",void 0),(0,r.gn)([St.LO],En.prototype,"pulseOnHover",void 0),(0,r.gn)([St.LO],En.prototype,"renderBackgroundGallery",void 0),(0,r.gn)([St.LO],En.prototype,"displayGalleryMinimumWidthToast",void 0),(0,r.gn)([St.LO],En.prototype,"headerCoreTopStartData",void 0),(0,r.gn)([St.LO],En.prototype,"headerCoreTopEndData",void 0),(0,r.gn)([St.LO],En.prototype,"headerCoreSearchData",void 0),(0,r.gn)([St.LO],En.prototype,"headerCoreBelowSearchData",void 0),(0,r.gn)([St.LO],En.prototype,"headerCoreOffset",void 0),(0,r.gn)([St.LO],En.prototype,"stickyHeaderHeight",void 0),(0,r.gn)([St.LO],En.prototype,"wpoNotificationPreviewData",void 0),(0,r.gn)([St.LO],En.prototype,"enableNotificationAnimation",void 0),(0,r.gn)([St.LO],En.prototype,"notSupportLayout",void 0),(0,r.gn)([St.LO],En.prototype,"gameContainerRef",void 0),(0,r.gn)([St.LO],En.prototype,"copilotMuseumCardIsShown",void 0),(0,r.gn)([St.LO],En.prototype,"copilotCoachMarkIsShown",void 0),(0,r.gn)([St.LO],En.prototype,"messages",void 0),(0,r.gn)([St.LO],En.prototype,"isScrollDownButtonDismissed",void 0),(0,r.gn)([St.lk],En.prototype,"topBannerOffsetHeight",null),(0,r.gn)([St.LO],En.prototype,"enableDevTools",void 0),(0,r.gn)([St.LO],En.prototype,"showSkeleton",void 0),(0,r.gn)([St.LO],En.prototype,"invisibleTopSites",void 0),(0,r.gn)([St.LO],En.prototype,"invisibleSearchBox",void 0),(0,r.gn)([St.LO],En.prototype,"invisibleRecommendedSites",void 0),(0,r.gn)([St.LO],En.prototype,"overriddenFeedConfig",void 0),(0,r.gn)([St.LO],En.prototype,"overlapState",void 0),(0,r.gn)([St.LO],En.prototype,"feedHasLoaded",void 0),(0,r.gn)([St.LO],En.prototype,"shouldRenderToastWC",void 0),(0,r.gn)([St.LO],En.prototype,"telemetryTags",void 0),(0,r.gn)([St.LO],En.prototype,"marqueeAdActive",void 0),(0,r.gn)([St.LO],En.prototype,"marqueeAd",void 0),(0,r.gn)([St.LO],En.prototype,"marqueeAdExtraClass",void 0),(0,r.gn)([St.LO],En.prototype,"marqueeAdOverlayHeight",void 0),(0,r.gn)([St.LO],En.prototype,"marqueeAdHeight",void 0),(0,r.gn)([St.LO],En.prototype,"marqueeAdPlaceholderHeight",void 0),(0,r.gn)([St.LO],En.prototype,"personalizedTelemetryObject",void 0),(0,r.gn)([St.LO],En.prototype,"renderChannelStoreEvent",void 0),(0,r.gn)([St.lk],En.prototype,"showScrollDownButton",null),(0,r.gn)([St.lk],En.prototype,"showNavAndContentTemplate",null),(0,r.gn)([St.lk],En.prototype,"shouldShowNotificationMiniCard",null),(0,r.gn)([St.lk],En.prototype,"showWeatherInFeedOff",null);var Mn=n(7275),xn=n(49218);var Ln=n(89150),Rn=n(93703),Dn=n(41472),Fn=n(36362),On=n.n(Fn);const Bn=()=>`https://assets.msn.${C.jG.topDomain}/staticsb/statics/latest/common/icons/chatIcon.svg`,Nn=xn.dy`
    <div class="heading-container">
        <h1 class="title">${e=>e.strings.openCopilotTitleText}</h1>
        <div class="openCopilotIconBox">
            <fluent-button
                class="openCopilot-close-button"
                role="button"
                @click="${e=>e.close_CopilotCardTelemetry()}"
            >
                <span class="close-button-glyph">
                    ${xn.dy.partial(On())}</span
                >
            </fluent-button>
        </div>
    </div>
`,_n=xn.dy`
    <div class="copilotCoachMark ${e=>e.copilotCoachMarkIsShown?"copilotMuseumCard_show":"copilotMuseumCard_hide"}"
        @mouseenter=${e=>e.onHover_coachMark()}    
    >
    <img src="${Bn()}"> 
    <span>${e=>e.strings.copilotCoachmarkText}</span>
    </div>
`,Un=xn.dy`
<div class="copilotCoachMark ${e=>e.copilotCoachMarkIsShown?"copilotMuseumCard_show":"copilotMuseumCard_hide"}"
    @click=${e=>e.onClick_coachMark()}    
>
    <img src="${Bn()}">
    <span>${e=>e.strings.copilotCoachmarkText}</span>
</div>
`,Wn=xn.dy`
    <div class="copilotMuseumCard"> 
        <div class="message-box" @click="${e=>e.onClickHandlerMessage&&e.onClickHandlerMessage(e.content)}">
            ${e=>e.content}
         </div>
    </div>
`,Hn=xn.dy`
  <div class="copilotContainer">
    <div
    id="copilotMuseumTemplate"
    ${(0,Dn.i)("copilotMuseumTemplate")}
    class="
    ${e=>e.copilotCoachMarkIsShown?"copilotMuseumTemplateHasCoachMark":"copilotMuseumTemplate"}
    ${e=>e.copilotMuseumCardIsShown?"copilotMuseumCard_show":"copilotMuseumCard_hide"}"
    >
    ${Nn} 
    <div class="messageBigBox">${(0,Ln.rx)((e=>e.messages),Wn)}</div>
    <div class="requestAnythingBox" @click="${e=>e.onClick_pickMessageItem("")}">
        <div class="copilotRequestAnything">
            <img src="${Bn()}">
            <span> ${e=>e.strings.copilotRequestText}</span>
        </div>
    </div>
    </div>
    ${(0,Rn.g)((e=>e.copilotCoachMarkIsShown&&e.config.copilotCoachmarkHoverEnable),_n)}   
    ${(0,Rn.g)((e=>e.copilotCoachMarkIsShown&&!e.config.copilotCoachmarkHoverEnable),Un)}       
  </div>
`;var $n=n(47507),qn=n(1591);$n.q,qn.Z;const Gn=(0,Le.M)("TTSR.TopSitesTag",!0),Vn=(0,Le.M)("TTSR.HeaderTag",!0),zn=(0,Le.M)(`${le.nz}Complete`),jn=(0,Le.M)(`${le.nz}SearchBox`,!0),Kn=e=>`--sticky-height:${e.stickyHeaderHeight||108}px;--search-sticky-extra-height:${e.topBannerOffsetHeight}px`,Qn=xn.dy`<div class="refreshPage ${e=>e.closeRefreshAnimation?"hide":""}"><fluent-progress-ring></fluent-progress-ring></div>`,Jn=(xn.dy`<div class="doubleWideRiverCard"></div>`,xn.dy`<div class="singleWideRiverCard"></div>`,xn.dy`<div class="fixed-size-card"><div class="card-img skeleton"></div><div class="card-label skeleton"></div><div class="card-text skeleton"></div><div class="card-text skeleton"></div><div class="card-text skeleton" style="width: 70%;"></div></div>`),Yn=xn.dy`<div class="skeleton-container" id="skeleton-loader"><div class="skeleton-feed fixed-size-feed ${e=>e.config.enableShimmerForSkeleton?"shimmer":""}">${(0,Ln.rx)((e=>new Array(19)),Jn)}</div></div>`,Zn=xn.dy`<div id="scrollDownButtonContainer">${e=>(0,Mn.Ot)(e.childRefs.scrollDownButton,{properties:{scrollToShowFeed:e.scrollToShowFeed,isOnBackgroundImage:!!e.layoutState.imageOfTheDayEnabled}})}</div>`,Xn=xn.dy`<div class="navAndContent ${e=>e.showFeedTranslucent?"navAndContent_tb":""} navAndContent_nb">${(0,Rn.g)((e=>!e.layoutState.imageOfTheDayEnabled&&e.showScrollDownButton),Zn)}<div class="navAndContent_feed ${e=>"play"===e.nowPivotId?"navAndContent_feed_fullpage":""} ${e=>e.responsiveSupported?"nav-feed-size-responsive":""}  ${e=>e.buildFocusBorderStyleClasses()}" style="${e=>e.feedOverrideStyles}; ${e=>(e=>`--nav-height:${e.navHeight||50}px;`)(e)} ${e=>Kn(e)}" ${(0,Dn.i)("navAndContentFeedRef")}><div class="g_nav_container"><div id="g_nav" style="${e=>e.isOnM365Page?"position:relative;--m365-column-width:fit-content;justify-content:flex-start":""}" class="nav ${e=>e.className} ${e=>e.config.enableOneColumn?"navStickyOneColumn":""} ${e=>e.conditionalBannerShown?"conditionalBannerShown":""} ${e=>e.config.translucentFeed&&e.config.translucentFeed.translucentStickyHeader&&e.showFeedTranslucent?"translucentHeader":""}" ${(0,Re.Fl)({stickyClassName:"nav_sticky",breakpointName:"pivot"})}><div class="contentSized navSized ${e=>e.config.enableOneColumn?"contentSizedOneColumn":""} ${e=>e.responsiveSupported?"nav-size-responsive":""} ">${e=>{var t,n,i,r;return(0,Mn.Ot)(e.childRefs.superNav,{attributes:{showFullPageBlur:!!(null!==(t=e.config.translucentFeed)&&void 0!==t&&t.enableBlur&&e.showFeedTranslucent&&["always","peek","headingsonly"].includes(null===(n=e.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&(e.navIsSticky||"always"==(null===(i=e.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&["load","all"].includes(null===(r=e.config.translucentFeed)||void 0===r?void 0:r.infoBlurEnabledScene)))},ttvrMarkerAggregate:"Header"})}}</div></div></div>${(0,Rn.g)((e=>e.showPivotRefreshButton),Qn)}<div style="${e=>e.isOnM365Page?"margin-top:0;":""}" class="contentBelowNav ${e=>e.isOnM365Page?"":"contentSized"} ${e=>!e.isOnM365Page&&e.config.enableOneColumn?"contentSizedOneColumn":""} ${e=>"play"===e.nowPivotId?"contentSizedFullScreen":""} contentPlaceHolder ${e=>e.responsiveSupported?"content-size-responsive":""} ">${(0,Rn.g)((e=>e.config.enableLoaderFlight&&e.showSkeleton&&!e.isOnM365Page&&("headingsonly"===e.layoutState.selectedFeedDisplaySetting&&e.contentConfigInfo||"headingsonly"!==e.layoutState.selectedFeedDisplaySetting)),Yn)} ${(0,Rn.g)((e=>!e.isOnPersonalizeOrM365Page&&e.config.childRefs.superBreakingNews),xn.dy`${e=>(0,Mn.Ot)(e.childRefs.superBreakingNews,{attributes:{style:"display: grid; justify-items: center;"},ttvrMarkerAggregate:"Header"})}`)} ${(0,Rn.g)((e=>e.config.enableChannelFiltering&&"following"===e.nowPivotId),xn.dy`${e=>(0,Mn.Ot)(e.getExperienceConfigInfo("ChannelFilterCard"),{memoize:!1})}`)} ${(0,Rn.g)((e=>e.contentConfigInfo),xn.dy` ${(0,Rn.g)((()=>window.isSSREnabled),xn.dy`${()=>xn.dy`${xn.dy.partial((0,me.yC)())}`}`)} ${(0,Rn.g)((e=>window.isSSREnabled),(e=>{return t=e.contentConfigInfo,xn.dy`<script nonce="${()=>window.NONCE_ID}">window.ssrLoadedExperience.publish(${xn.dy.partial(JSON.stringify(t))})</script>`;var t}))} ${e=>{var t;return(0,Mn.Ot)(e.contentConfigInfo,{includeTelemetryTag:!1,properties:{gamingPivotSwitched:null===(t=e.context)||void 0===t?void 0:t.gamingPivotSwitched,context:e.context,getFeedDependencyPromise:e.getFeedDependencyPromise,overriddenConfig:e.config.enableChannelFiltering?e.overriddenFeedConfig:null},memoize:!1})}} `)}</div></div></div>`,ei=xn.dy`<msn-toast class="backgroundGalleryMinimumWidthToast">${e=>e.strings.backgroundGalleryBelowMinimumWidthToastText}</msn-toast>`,ti=xn.dy`<cs-header-core :startSection=${e=>e.headerCoreTopStartData} :endSection=${e=>e.headerCoreTopEndData} :searchSection=${e=>e.headerCoreSearchData} :belowSearchSection=${e=>e.headerCoreBelowSearchData} :chromiumPageSettingsState=${e=>e.layoutState} :headerCoreTTVRTemplate=${jn} :showFullPageBlur=${e=>{var t,n,i,r;return!!(null!==(t=e.config.translucentFeed)&&void 0!==t&&t.enableBlur&&e.showFeedTranslucent&&["always","peek","headingsonly"].includes(null===(n=e.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&(e.navIsSticky||"always"==(null===(i=e.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&["load","all"].includes(null===(r=e.config.translucentFeed)||void 0===r?void 0:r.infoBlurEnabledScene)))||e.showDarkIcon}} :needDarkThemeIcons=${e=>e.needDarkThemeIcons} class="translucent ${e=>{var t;return null!==(t=e.headerCoreSearchData)&&void 0!==t&&t.enableCodexBingStyles?"bing-chat":""}}" style="grid-row:${e=>e.searchRow};${e=>(e=>`--header-offset:${e.invisibleTopSites?0:e.headerCoreOffset||0}px;--header-top-margin:${e.edgeHeaderTopMarin}px;`)(e)}" ${(0,Dn.i)("headerCoreRef")}></cs-header-core>`,ni=xn.dy` ${(0,Rn.g)((e=>e.topSitesLayoutState&&e.childRefs.topSites&&"off"!==e.quickLinksDisplaySetting),(e=>(0,Mn.Ot)(e.childRefs.topSites,{attributes:{selectedQuickLinksDisplaySetting:e.quickLinksDisplaySetting,quickLinksToggleSpacingForBanner:!!e.displayConditionalBanner,showFullPageBlur:e.isFullPageBlur(),needDarkThemeIcons:e.needDarkThemeIcons,quickBriefVisible:!!e.shouldShowNotificationMiniCard},ttvrMarkerAggregate:"Header"})))} ${(0,Rn.g)((()=>!(0,et.N)()),Gn)}
`,ii=xn.dy`<fluent-button id="marqueeAdDismissButton" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.marqueeAdDismissButton}}" @click="${e=>e.onClick_marqueeAdClose()}" title="${e=>e.strings.dismissMarqueeAdText}" aria-label="${e=>e.strings.dismissMarqueeAdText}" ${(0,Dn.i)("ref_marqueeAdDismissButton")}></fluent-button>`,ri=(0,Rn.g)((e=>e.marqueeAd),xn.dy`<div ${(0,Dn.i)("ref_marqueeAdTemplate")}  class="${e=>`marqueeAdOverlayV3 ${e.marqueeAdExtraClass}`}" style="grid-row: ${e=>e.marqueeAdRow};"><div class="marqueeAdContainerV3" id="marqueeAdContainer"><div class="marqueeAdSponsor" style="${e=>`background-color: ${e.marqueeAd.sponsorBackgroundColor}`}"><div>${e=>e.strings.marqueeAdSponsorText}</div><fluent-button @click=${e=>e.onClick_MarqueeAdSponsorLogo()} class="marqueeAdSponsorLogo" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.marqueeAdSponsorLogo}}" title="${e=>e.marqueeAd.providerName}" aria-label="${e=>e.marqueeAd.providerName}" ${(0,Dn.i)("ref_marqueeAdSponsorLogo")}><img class="marqueeAdSponsorLogoImage" src="${e=>e.marqueeAd.sponsorLogoImageUrl}" /></fluent-button></div><div class="marqueeAdContent"><div class="marqueeAdTitle">${e=>e.marqueeAd.title}</div><div class="marqueeAdCTAButtonContainer"><fluent-button @click=${e=>e.onClick_MarqueeAdCTAButton()} class="marqueeAdCTA" data-t="${e=>{var t;return null===(t=e.telemetryTags)||void 0===t?void 0:t.marqueeAdCTAButton}}" title="${e=>e.marqueeAd.ctaText}" aria-label="${e=>e.marqueeAd.ctaText}" ${(0,Dn.i)("ref_marqueeAdCTAButton")}>${e=>e.marqueeAd.ctaText}</fluent-button></div></div>${ii}</div></div>`),oi=xn.dy`${xn.dy.partial('<svg viewBox="0 0 226 48" height="48" width="225"><path key="MicrosoftLogo1" id="microsoft" d="M93.6 9.6v28.8h-5V15.8h-.1l-8.9 22.6h-3.3l-9.1-22.6h-.1v22.6h-4.6V9.6h7.2L78 30.9h.1l8.7-21.3h6.8zm4.1 2.2c0-.8.3-1.5.9-2 .6-.5 1.3-.8 2.1-.8.9 0 1.6.3 2.1.9.5.5.9 1.2.9 2s-.3 1.5-.9 2c-.6.5-1.3.8-2.1.8-.9 0-1.5-.3-2.1-.8-.5-.7-.9-1.4-.9-2.1zm5.4 5.9v20.7h-4.9V17.7h4.9zm14.8 17.2a9.2 9.2 0 0 0 4.8-1.8v4.5c-.8.5-1.7.8-2.7 1-1 .2-2.1.3-3.3.3-3.1 0-5.5-.9-7.4-2.9-1.9-1.9-2.9-4.4-2.9-7.3 0-3.3 1-6.1 2.9-8.2 1.9-2.1 4.7-3.2 8.3-3.2.9 0 1.8.1 2.7.3.9.3 1.7.5 2.2.8v4.7c-.7-.5-1.5-1-2.3-1.3-.8-.3-1.6-.5-2.4-.5-1.9 0-3.5.6-4.7 1.9-1.2 1.3-1.8 2.9-1.8 5.1 0 2.1.5 3.7 1.7 4.9 1.4 1.1 2.9 1.7 4.9 1.7zm18.6-17.5c.4 0 .7 0 1.1.1.3.1.6.1.8.2v4.9c-.3-.2-.6-.3-1.1-.5-.5-.2-1.1-.3-1.8-.3-1.2 0-2.2.5-3 1.5-.8 1-1.3 2.5-1.3 4.7v10.4h-4.9V17.7h4.9V21h.1c.5-1.1 1.1-2 2-2.7.8-.6 1.9-.9 3.2-.9zm2.1 11c0-3.4.9-6.1 2.9-8.1 1.9-2 4.6-3 8.1-3 3.2 0 5.7.9 7.5 2.9 1.8 1.9 2.7 4.5 2.7 7.8s-.9 6-2.9 8c-1.9 2-4.5 3-7.9 3-3.2 0-5.7-.9-7.6-2.8-1.9-2-2.8-4.6-2.8-7.8zm5.1-.2c0 2.1.5 3.8 1.5 4.9 1 1.1 2.4 1.7 4.2 1.7 1.8 0 3.1-.6 4.1-1.7.9-1.1 1.4-2.8 1.4-5.1 0-2.2-.5-3.9-1.5-5-.9-1.1-2.3-1.7-4-1.7-1.8 0-3.1.6-4.1 1.8-1.2 1.2-1.6 2.9-1.6 5.1zm23.3-5c0 .7.2 1.3.7 1.7.5.4 1.4.9 2.9 1.5 1.9.8 3.3 1.7 4.1 2.6.8 1 1.2 2.1 1.2 3.5 0 1.9-.7 3.5-2.3 4.7-1.5 1.2-3.5 1.8-6.1 1.8-.9 0-1.8-.1-2.9-.3-1.1-.2-1.9-.5-2.7-.8V33c.9.6 1.9 1.1 2.9 1.5 1 .3 1.9.5 2.8.5 1.1 0 1.9-.1 2.4-.5.5-.3.8-.8.8-1.5s-.3-1.3-.8-1.7c-.5-.5-1.6-1-3.1-1.6-1.8-.7-3.1-1.6-3.8-2.5s-1.1-2.1-1.1-3.6c0-1.9.7-3.4 2.2-4.6 1.5-1.2 3.4-1.8 5.7-1.8.7 0 1.5.1 2.4.3.9.1 1.7.4 2.3.6v4.6c-.7-.4-1.4-.8-2.3-1.1-.9-.3-1.7-.5-2.5-.5-.9 0-1.7.2-2.1.5-.4.5-.7.9-.7 1.6zm10.9 5.2c0-3.4.9-6.1 2.9-8.1s4.6-3 8.1-3c3.2 0 5.7.9 7.5 2.9 1.8 1.9 2.7 4.5 2.7 7.8s-.9 6-2.9 8c-1.9 2-4.5 3-7.9 3-3.2 0-5.7-.9-7.6-2.8-1.8-2-2.8-4.6-2.8-7.8zm5.1-.2c0 2.1.5 3.8 1.5 4.9 1 1.1 2.4 1.7 4.2 1.7 1.8 0 3.1-.6 4.1-1.7.9-1.1 1.4-2.8 1.4-5.1 0-2.2-.5-3.9-1.5-5-.9-1.1-2.3-1.7-4-1.7-1.8 0-3.1.6-4.1 1.8-1.1 1.2-1.6 2.9-1.6 5.1zm32.3-6.5H208v16.7h-4.9V21.7h-3.5v-4h3.5v-2.9c0-2.2.7-3.9 2.1-5.3 1.4-1.4 3.2-2.1 5.4-2.1.6 0 1.1 0 1.6.1s.9.1 1.2.3V12c-.1-.1-.5-.2-.9-.3-.4-.1-.9-.2-1.4-.2-1 0-1.8.3-2.3.9-.5.7-.8 1.6-.8 2.8v2.5h7.3V13l4.9-1.5v6.1h4.9v4h-4.9v9.7c0 1.3.2 2.2.7 2.7.5.5 1.2.8 2.2.8.3 0 .6-.1 1-.2s.7-.3 1.1-.5v4c-.3.2-.8.3-1.5.5-.7.1-1.4.2-2.1.2-2.1 0-3.6-.5-4.6-1.7-1-1.1-1.5-2.7-1.5-4.9V21.7h-.2z"/><path key="MicrosoftLogo2" id="blue" d="M22.8 25.2H0V48h22.8V25.2z" fill="#00A4EF"/><path key="MicrosoftLogo3" id="yellow" d="M48 25.2H25.2V48H48V25.2z" fill="#FFB900"/><path key="MicrosoftLogo4" id="green" d="M48 0H25.2v22.8H48V0z" fill="#7FBA00"/><path key="MicrosoftLogo5" id="red" d="M22.8 0H0v22.8h22.8V0z" fill="#F25022"/></svg>')}`,ai=xn.dy`<div id="notificationMiniCardWrapper">${(0,Rn.g)((e=>e.shouldShowNotificationMiniCard),(e=>(0,Mn.Ot)(e.childRefs.notificationMiniCard,{properties:{data:e.wpoNotificationPreviewData,onDismiss:e.dismissNotificationMiniCard,showNotificationSettingsOption:"off"!==e.layoutState.selectedFeedDisplaySetting,theme:e.getTheme()}})))}</div>`,si=xn.dy` ${(0,Rn.g)((e=>!e.config.notificationOnRight),ai)} ${ni} ${(0,Rn.g)((e=>e.config.notificationOnRight),ai)}
`,ci=xn.dy`
${(0,Rn.g)((e=>e.childRefs.conditionalBanner),xn.dy`<div class="conditionalBannerHolder">${e=>(0,Mn.Ot)(e.childRefs.conditionalBanner,{properties:{onDisplayChange:e.onConditionalBannerDisplayChange.bind(e)}})}</div>`)}
${(0,Rn.g)((e=>e.childRefs.superCoachMark),xn.dy`<div class="superCoachMarkHolder">${e=>(0,Mn.Ot)(e.childRefs.superCoachMark)}</div>`)}
${(0,Rn.g)((e=>e.childRefs.nurturingCoachMark&&e.isTtvrFiredAndCanUseDom),xn.dy`<div>${e=>(0,Mn.Ot)(e.childRefs.nurturingCoachMark,{includeTelemetryTag:!1})}</div>`)}
${(0,Rn.g)((e=>e.childRefs.superNavCoachMark),xn.dy`${e=>(0,Mn.Ot)(e.childRefs.superNavCoachMark,{attributes:{style:"display: none"}})}`)}
${(0,Rn.g)((e=>e.childRefs.stickyPeek),xn.dy`<div class="stickyPeekHolder">${e=>(0,Mn.Ot)(e.childRefs.stickyPeek)}</div>`)}
${(0,Rn.g)((e=>e.childRefs.officeCoachmark),xn.dy`<div class="officeCoachmarkHolder">${e=>(0,Mn.Ot)(e.childRefs.officeCoachmark)}</div>`)}
${(0,Rn.g)((e=>e.displayGalleryMinimumWidthToast),ei)}
${(0,Rn.g)((e=>e.config.copilotTemplateEnable),Hn)}<div id="headerGrid" style="grid-template-rows: ${e=>e.gridRows}; height:${e=>e.contentOffHeaderHeight??e.headerHeight+"px"};" role="${e=>"off"===e.layoutState.selectedFeedDisplaySetting?"main":"banner"}"><div class="companyLogoHolder_aboveSearch" ${e=>e.logoRow?"grid-row: ${x => x.logoRow};":""} ${(0,De.XJ)()}>${(0,Rn.g)((e=>"always"!==e.layoutState.selectedFeedDisplaySetting&&!e.layoutState.imageOfTheDayEnabled),oi)}</div>${ti} ${(0,Rn.g)((e=>!(0,et.N)()),Vn)}<div id="topSitesHolder" class=" ${e=>"off"===e.quickLinksDisplaySetting?"hide":""} ${e=>e.childRefs.notificationMiniCard?"enable-notification":""} ${e=>e.enableNotificationAnimation?"notification-anime":""} ${e=>e.config.notificationOnRight?"notification-right":"notification-left"} " style="grid-row: ${e=>e.topSitesRow}; ${e=>(e=>`--top-banner-offset-height:${e.topBannerOffsetHeight||0}px;`)(e)}; ${e=>(e=>e.invisibleTopSites?"visibility:hidden":"")(e)}" ${(0,De.XJ)()}>${(0,Rn.g)((e=>e.childRefs.notificationMiniCard),si,ni)}</div>${(0,Rn.g)((e=>e.marqueeAdActive&&e.config.enableMarqueeAdV3),xn.dy`${ri}`)} ${(0,Rn.g)((e=>!e.config.enablePersonalizedOneliner&&e.showWeatherInFeedOff&&!e.childRefs.pulseEdgenext&&e.layoutState.greetingEnabled&&!e.shouldShowNotificationMiniCard&&e.childRefs.weatherOneLiner&&("headingsonly"===e.layoutState.selectedFeedDisplaySetting||"off"===e.layoutState.selectedFeedDisplaySetting)&&!e.feedHasLoaded),xn.dy`<div id="weatherOneLinerHolder" style="grid-row: ${e=>e.weatherOneLinerRow};" class="oneline-weather-holder-margin ${e=>"off"===e.layoutState.selectedFeedDisplaySetting&&"oneline-weather-holder-content-off"} ${e=>"off"===e.layoutState.selectedFeedDisplaySetting&&"off"!==e.layoutState.currentBackgroundImageType&&"oneline-weather-holder-content-off-bg"}">${e=>(0,Mn.Ot)(e.childRefs.weatherOneLiner,{properties:{setShowWeatherOneLiner:e.setShowWeatherOneLiner,setIsWeatherOneLinerMapped:e.setIsWeatherOneLinerMapped}})}</div>`)} ${(0,Rn.g)((e=>e.config.enablePersonalizedOneliner&&e.showWeatherInFeedOff&&!e.childRefs.pulseEdgenext&&e.isTtvrFiredAndCanUseDom&&!e.shouldShowNotificationMiniCard&&e.isWpoOptimizationAdded&&e.layoutState.greetingEnabled&&e.childRefs.weatherOneLiner&&("headingsonly"===e.layoutState.selectedFeedDisplaySetting||"off"===e.layoutState.selectedFeedDisplaySetting||"peek"===e.layoutState.selectedFeedDisplaySetting)&&(!e.feedHasLoaded||e.isPersonalizedTopicsInOneLiner)),xn.dy`<div id="weatherOneLinerHolder" style="grid-row: ${e=>e.weatherOneLinerRow};" class="oneline-weather-holder-margin ${e=>"off"===e.layoutState.selectedFeedDisplaySetting&&"oneline-weather-holder-content-off"} ${e=>"off"===e.layoutState.selectedFeedDisplaySetting&&"off"!==e.layoutState.currentBackgroundImageType&&"oneline-weather-holder-content-off-bg"}">${e=>(0,Mn.Ot)(e.childRefs.weatherOneLiner,{properties:{setShowWeatherOneLiner:e.setShowWeatherOneLiner,setIsWeatherOneLinerMapped:e.setIsWeatherOneLinerMapped},telemetryObject:e.personalizedTelemetryObject})}</div>`)} ${(0,Rn.g)((e=>e.layoutState.imageOfTheDayEnabled&&e.showScrollDownButton),xn.dy`<div id="scrollDownBtnHolder" style="grid-row: ${e=>e.scrollDownBtnRow};">${e=>(0,Mn.Ot)(e.childRefs.scrollDownButton,{properties:{scrollToShowFeed:e.scrollToShowFeed,isOnBackgroundImage:!!e.layoutState.imageOfTheDayEnabled}})}</div>`)} ${(0,Rn.g)((e=>e.childRefs.pulseEdgenext&&(e.layoutState.pulseEnabled&&e.pulseData.length>0||e.isVpTest())&&e.config.showPulseOffPartially&&("off"===e.layoutState.selectedFeedDisplaySetting||"headingsonly"===e.layoutState.selectedFeedDisplaySetting||"peek"===e.layoutState.selectedFeedDisplaySetting)),xn.dy`<div id="pulse" style="grid-row: ${e=>e.weatherOneLinerRow};" class="${e=>e.pulseOnHover&&"off"!==e.layoutState.currentBackgroundImageType?"pulseHoverHolder":"pulseHolder"}">${e=>(0,Mn.Ot)(e.childRefs.pulseEdgenext,{properties:{pulseData:e.pulseData}})}</div>`)} ${(0,Rn.g)((e=>e.childRefs.recommendedSites),xn.dy`<div id="recommendedSites" class=" ${e=>"off"===e.recommendedSitesDisplaySetting?"hide":""} unified " style="grid-row: ${e=>e.recommendedSitesRow};${e=>(e=>e.invisibleRecommendedSites?"visibility:hidden":"")(e)}" ${(0,De.XJ)()}>${(0,Rn.g)((e=>!e.enableHiddenRecommendedSitesStyles),xn.dy` ${e=>{var t,n,i,r,o,a;return(0,Mn.Ot)(e.childRefs.recommendedSites,{properties:{narrowed:!e.layoutState.imageOfTheDayEnabled&&["peek","headingsonly","off"].includes(e.layoutState.selectedFeedDisplaySetting),isOnBackgroundImage:!(!e.layoutState.imageOfTheDayEnabled||e.config.turnOffBkgdForInformational&&"informational"==e.layoutState.currentLayout),showFullPageBlur:!!(null!==(t=e.config.translucentFeed)&&void 0!==t&&t.enableBlur&&e.showFeedTranslucent&&["always","peek","headingsonly"].includes(null===(n=e.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&(e.navIsSticky||"always"==(null===(i=e.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&["load","all"].includes(null===(r=e.config.translucentFeed)||void 0===r?void 0:r.infoBlurEnabledScene)))||e.showDarkIcon,needDarkThemeIcons:e.needDarkThemeIcons,recommendedSitesWidthAdded:(e.showNavAndContentTemplate||["always","peek"].includes(null===(o=e.layoutState)||void 0===o?void 0:o.selectedFeedDisplaySetting))&&"off"!==(null===(a=e.layoutState)||void 0===a?void 0:a.currentBackgroundImageType)},ttvrMarkerAggregate:"Header"})}} `)}</div>`)} ${(0,Rn.g)((e=>e.config.complianceHyperlink),xn.dy`<a href=${e=>(0,E.h_)(e.config.complianceHyperlink.url)} id="complianceHyperlink" class="${e=>e.layoutState.imageOfTheDayEnabled?"complianceHyperlink_imageEnabled":null}" ${(0,De.XJ)()}>${e=>e.config.complianceHyperlink.text}</a>`)} ${(0,Rn.g)((e=>e.childRefs.holidayEffects&&"off"!==e.layoutState.selectedFeedDisplaySetting&&"focused"!==e.layoutState.currentLayout),xn.dy`<div class="holidayEffectsHolder ${e=>"off"!==e.layoutState.currentBackgroundImageType?"darkMode":""}" id="holidayEffects" style="${e=>e.holidayEffectsPosition}">${e=>(0,Mn.Ot)(e.childRefs.holidayEffects,{ttvrMarkerAggregate:"Header"})}</div>`)} ${(0,Rn.g)((e=>e.childRefs.backgroundGallery&&e.renderBackgroundGallery),xn.dy`<div id="backgroundGalleryContainer">${e=>(0,Mn.Ot)(e.childRefs.backgroundGallery,{memoize:!1,ttvrMarkerAggregate:"Header"})}</div>`)}</div><div ${(0,Dn.i)("headerSpaceHolder")} id="headerSpaceHolder" style="height:${e=>e.contentOffHeaderHeight??e.headerHeight+"px"};${e=>Kn(e)}"><div id="bgOuterHolder" class="bgOuterHolder" ${(0,Re.Fl)({stickyClassName:"bgOuterHolder_sticky",breakpointName:G})}><div id="bgInnerHolder" style="height:${e=>e.imageHeight};">${e=>{var t,n,i,r,o,a;return(0,Mn.Ot)(e.childRefs.backgroundImage,{attributes:{spaceHolderHeight:e.headerHeight,showFullPageBlur:!!(null!==(t=e.config.translucentFeed)&&void 0!==t&&t.enableBlur&&e.showFeedTranslucent&&["always","peek","headingsonly"].includes(null===(n=e.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&(e.navIsSticky||"always"==(null===(i=e.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&["load","all"].includes(null===(r=e.config.translucentFeed)||void 0===r?void 0:r.infoBlurEnabledScene))),bgBlurSize:null!==(o=e.config.translucentFeed)&&void 0!==o&&o.bgBlurSize?null===(a=e.config.translucentFeed)||void 0===a?void 0:a.bgBlurSize:"0px",displayMarqueeAd:e.marqueeAdActive,marqueeAdTopHeight:e.marqueeAdTopHeight,marqueeAdHeight:e.marqueeAdHeight,marqueeAdOverlayHeight:e.marqueeAdOverlayHeight},ttvrMarkerAggregate:"Header"})}}</div></div></div><div id="translucentFeedSentinel"></div>${(0,Rn.g)((e=>e.showNavAndContentTemplate),Xn)}
${(0,Rn.g)((e=>"off"===e.layoutState.selectedFeedDisplaySetting&&e.config.enableBtnForContentOff&&!!e.childRefs.scrollDownButton&&!e.isScrollDownButtonDismissed),xn.dy`<div id="scrollDownButtonContainer" class="exploreMoreBtn">${e=>(0,Mn.Ot)(e.childRefs.scrollDownButton,{properties:{scrollToShowFeed:e.changeContentOffToVisible,isOnBackgroundImage:!!e.layoutState.imageOfTheDayEnabled}})}</div>`)}
${(0,Rn.g)((e=>e.childRefs.topSites),xn.dy`${e=>(0,Mn.Ot)(e.childRefs.edgeShopping)}`)}
${(0,Rn.g)((e=>e.enableDevTools),xn.dy`${e=>(0,Mn.Ot)(e.childRefs.devTools)}`)}
${e=>(0,Mn.Ot)(e.childRefs.sharedLinks,{ttvrMarkerAggregate:"Header"})}
${e=>(0,Mn.Ot)(e.childRefs.topSitesBookmarks,{ttvrMarkerAggregate:"Header"})}
${e=>(0,Mn.Ot)(e.childRefs.floatButtonGroupWC,{properties:{overlapState:e.overlapState,copilotShowCard:e.copilotShowCard},attributes:{class:"floatButtonGroup"}})}
${(0,Rn.g)((e=>e.childRefs.dailyBrief),(e=>(0,Mn.Ot)(e.childRefs.dailyBrief)))}
${(0,Rn.g)((e=>e.config.feedbackOldStyle&&e.childRefs.feedback),xn.dy`${e=>{var t,n,i,r;return(0,Mn.Ot)(e.childRefs.feedback,{properties:{isAutoHide:e.config.feedbackOldStyle&&!e.isAlwaysMode},attributes:{showFullPageBlur:!!(null!==(t=e.config.translucentFeed)&&void 0!==t&&t.enableBlur&&e.showFeedTranslucent&&["always","peek","headingsonly"].includes(null===(n=e.layoutState)||void 0===n?void 0:n.selectedFeedDisplaySetting)&&(e.navIsSticky||"always"==(null===(i=e.layoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting)&&["load","all"].includes(null===(r=e.config.translucentFeed)||void 0===r?void 0:r.infoBlurEnabledScene)))||e.showDarkIcon},ttvrMarkerAggregate:e.config.delayNonVisibleComponents?"":"Header"})}}`)}
${e=>e.renderChannelStoreEvent&&e.childRefs.channelStore&&(0,Mn.Ot)(e.childRefs.channelStore,{properties:{showOverlay:!1,renderChannelStoreEvent:e.renderChannelStoreEvent}})}
${(0,Rn.g)((e=>e.childRefs.toastWC&&e.shouldRenderToastWC),(e=>(0,Mn.Ot)(e.childRefs.toastWC)))}
`,di=xn.dy` ${ci} ${(0,Rn.g)((()=>!(0,et.N)()),zn)}
`;var li=n(97030),ui=n(78923),pi=n(74449),hi=n(39238),gi=n(32572),mi=n(35680),fi=n(29717);const vi=(S.K.Over+2).toString(),yi=(S.K.Over+3).toString(),Si=(S.K.Nav+2).toString(),Ci="https://assets.msn.com/staticsb/statics/pr-4464804/icons-wc/icons/marquee-ad/CloseButtonBlack.svg",wi="https://assets.msn.com/staticsb/statics/pr-4464804/icons-wc/icons/marquee-ad/CloseButtonHoverBlack.svg",bi="https://assets.msn.com/staticsb/statics/pr-4464804/icons-wc/icons/marquee-ad/CloseButtonHoverWhite.svg",Ti=ui.i`
.companyLogoHolder_aboveSearch > svg{fill:white}.navAndContent,.nav.nav_sticky,.bgOuterHolder_sticky{background:#242424}.translucentHeader.nav.nav_sticky{background:#242424e6}.translucentSticky{background:#242424}.navAndContent_wb{background:rgba(0,0,0,.5) !important}.doubleWideRiverCard,.singleWideRiverCard{background:#656565}.skeleton{background:#4a4a4a}.copilotRequestAnything{border:1px solid #69A1FA}.copilotRequestAnything span{color:#69A1FA}.copilotCoachMark{border:1px solid #69A1FA}.copilotCoachMark span{color:#69A1FA}.marqueeAdContainerV3 .marqueeAdContent{background-color:#292929}.marqueeAdContainerV3 .marqueeAdTitle{color:#FFF}.marqueeAdContainerV3 .marqueeAdCTA{border:1px solid #FFF;color:#FFF;background-color:#292929}.marqueeAdContainerV3 .marqueeAdCTA:hover{background-color:#3D3D3D}.marqueeAdContainerV3 .marqueeAdCTA:focus{background-color:#1F1F1F}.marqueeAdContainerV3 #marqueeAdDismissButton{background:url(${"https://assets.msn.com/staticsb/statics/pr-4464804/icons-wc/icons/marquee-ad/CloseButtonWhite.svg"})}.marqueeAdContainerV3 #marqueeAdDismissButton:hover,.marqueeAdContainerV3 #marqueeAdDismissButton:focus{background:url(${bi})}.marqueeAdContainerV3 #marqueeAdDismissButton::part(content){visibility:hidden;background:url(${bi})}`,ki=ui.i`${(0,H.vW)(null,H.K$.c2)}{.contentSized{width:${li._3.toString()}px}#topSitesHolder{height:100%}.skeleton-container{width:${li._3.toString()}px}}${(0,H.eH)(H.K$.c3)}{.contentSized{width:${li.Xn.toString()}px}.skeleton-container{width:${li.Xn.toString()}px}}${(0,H.eH)(H.K$.c4)}{.contentSized{width:${li.xX.toString()}px}.skeleton-container{width:${li.xX.toString()}px}}${(0,H.vW)(H.K$.c5,null)}{.contentSized{width:var(--m365-column-width,${li.sc.toString()}px)}.skeleton-container{width:${li.sc.toString()}px}}${(0,H.vW)(null,H.K$.c1)}{.contentSizedOneColumn{width:${li.xs.toString()}px}.nav.navStickyOneColumn{top:0}.navStickyOneColumn.conditionalBannerShown{top:30px}.skeleton-container{width:${li.xs.toString()}px}}`,Pi=ui.i`
:host(){--breaking-news-height-offset:0}#backgroundGalleryContainer{position:relative;z-index:${S.K.Flyout.toString()}}#scrollDownButtonContainer{position:fixed;z-index:${(S.K.Over+3).toString()}}#scrollDownBtnHolder{min-width:234px;position:relative;bottom:-22px;z-index:${(S.K.Over+3).toString()}}.gameTemplateContainer{position:relative;z-index:${S.K.Nav.toString()};margin:14px auto}.exploreMoreBtn{width:100vw;display:flex;justify-content:center}.backgroundGalleryMinimumWidthToast{bottom:25px;left:50%;position:fixed;transform:translateX(-50%);width:fit-content;z-index:${S.K.Overlay.toString()}}.bgOuterHolder{height:100%;overflow:hidden;position:fixed;width:100%}.bgOuterHolder_sticky{background:#F7F7F7;height:calc(var(--sticky-height,108px) + var(--search-sticky-extra-height,0px));z-index:${S.K.Over.toString()}}#bgInnerHolder{height:100%;opacity:1;overflow:hidden;top:0px;transform:scale(1);width:100%}.coachMarkHolder{left:initial;position:fixed;z-index:${S.K.Flyout.toString()}}.companyLogoHolder_aboveSearch{align-self:end;height:48px;opacity:1;width:225px}.companyLogoHolder_aboveSearch > svg{fill:#737373}#complianceHyperlink{bottom:8px;color:${pi.Q};font-size:10px;justify-self:self-start;padding:0 8px;opacity:1;position:absolute;text-decoration:none;transition:opacity 0.2s;z-index:${vi}}#complianceHyperlink.complianceHyperlink_imageEnabled,#complianceHyperlink.translucentFeed{color:white;opacity:0.64}#complianceHyperlink.onScroll{transform:translate(-50%,-60px)}.complianceHyperlink_hide{opacity:0 !important}.doubleWideRiverCard,.singleWideRiverCard{background:#dadada;border-radius:8px;height:304px}.doubleWideRiverCard{width:612px}.singleWideRiverCard{width:300px}.blankRiverContainer{display:flex;gap:12px}.blankRiverContainer.fadeOut{opacity:0;transition:opacity 0.5s}.location-marker{bottom:5px;color:white;justify-self:self-start;padding:0 8px;opacity:1;position:absolute;left:36px;text-decoration:none;transition:opacity 0.2s;z-index:${S.K.Nav.toString()}}.conditionalBannerHolder{max-height:200px;position:fixed;top:0;width:100%;z-index:${S.K.Overlay.toString()}}#headerGrid{display:grid;justify-items:center;width:100%}.headerGrid_hidden{visibility:hidden}.headerGrid_visible{opacity:1}.headerSpaceHolder{transition:height .3s ease-out,visibility 0.3s}#headerSpaceHolder{position:absolute;top:0}.holidayEffectsHolder{position:absolute;bottom:7px;opacity:1}.holidayEffectsHolder.darkMode{--border:none;--bg-color:#0000008A;--flipper-color:#fff}.holidayEffectsSticky{--menu-opacity:0}.nav{display:flex;height:var(--nav-height);justify-content:center;z-index:${S.K.Nav.toString()}}.navAndContent{align-items:center;background:#F7F7F7;display:flex;flex-direction:column;min-height:100vh;position:relative;transition:background-color 0.4s ease-in-out}.navAndContent.navAndContent_tb{background:#00000051}.navAndContent.navAndContent_nb{background:#00000000}.navAndContent_wb{background:rgba(255,255,255,.5) !important;backdrop-filter:blur(10px);transition:unset !important}.navAndContent.navAndContent_nwb{transition:unset}#recommendedSites{align-items:center;display:flex;flex-direction:column}#recommendedSites.hide{display:none}#recommendedSites.unified{z-index:${vi}}.navAndContent_feed{align-items:center;display:flex;flex-direction:column;transition:background-color 0.4s ease-in-out,opacity 0.4s ease-in-out}.navAndContent_feed_fullpage{width:100%}.navAndContent_border_shadow{border-radius:12px;padding-left:20px;padding-right:20px;box-shadow:rgba(0,0,0,0.35) 0px 0px 15px;transition:1s box-shadow ease}.navAndContent_border_shadow.navAndContent_noshadow{box-shadow:rgb(0 0 0 / 0%) 0px 0px 0px 0px}@media ((min-width:632px) and (max-width:675px)){.navAndContent_border_shadow{width:93%}}@media ((min-width:944px) and (max-width:990px)){.navAndContent_border_shadow{width:95%}}@media ((min-width:1256px) and (max-width:1300px)){.navAndContent_border_shadow{width:96.5%}}@media ((min-width:1568px) and (max-width:1613px)){.navAndContent_border_shadow{width:97%}}.g_nav_container{position:relative;display:flex;justify-content:center;width:100%}.navAndContent_feed > .contentBelowNav{margin-top:var(--nav-height)}.navAndContent_feed_hidden_rs{background:#00000051}.nav{position:absolute;top:0px;width :100%}.nav.nav_sticky{background:#F7F7F7;position:fixed;top:calc(var(--sticky-height,108px) + var(--search-sticky-extra-height,0px));width:100%}.translucentHeader.nav.nav_sticky{background:#F7F7F7e6}.navSized{align-items:center;display:flex;gap:5px}.translucentSticky{background:#F7F7F7;height:108px;position:fixed;top:0px;width:100%;z-index:${S.K.Over.toString()}}#weatherOneLinerHolder{min-width:0;z-index:302;opacity:1}.oneline-weather-holder-margin{margin-top:auto;margin-bottom:15px}.oneline-weather-holder-content-off{margin-bottom:40px}.oneline-weather-holder-content-off-bg{margin-bottom:20px}#pulse{z-index:302}.pulseHoverHolder{margin-bottom:50px}.pulseHolder{margin-top:auto;margin-bottom:15px}#topSitesHolder{--notification-mini-card-width:208px;--notification-mini-card-height:58px;--notification-mini-card-vertical-gap:0;--notification-mini-card-gap:30px;height:100%;min-width:0;z-index:${yi};opacity:1}#topSitesHolder.hide{visibility:hidden;opacity:0}#topSitesHolder.move-upward{z-index:${Si}}#topSitesHolder.enable-notification{display:flex;justify-content:center}#topSitesHolder.enable-notification top-sites-edgenext{max-width:fit-content}#notificationMiniCardWrapper{width:0;margin-top:var(--notification-mini-card-vertical-gap)}#topSitesHolder.notification-anime #notificationMiniCardWrapper{transition:all 0.3s ease-in}#topSitesHolder.notification-left #notificationMiniCardWrapper:has(notification-mini-card:defined){width:var(--notification-mini-card-width);margin-inline-end:var(--notification-mini-card-gap)}#topSitesHolder.notification-left #notificationMiniCardWrapper notification-mini-card{float:right}#topSitesHolder.notification-right #notificationMiniCardWrapper:has(notification-mini-card:defined){width:var(--notification-mini-card-width);margin-inline-start:var(--notification-mini-card-gap)}#topSitesHolder.notification-right #notificationMiniCardWrapper notification-mini-card{float:left}.topSitesZoomHidden{visibility:hidden}.headerGrid_hidden cs-header-core::part(core){top:calc(-1 * var(--header-height));display:none}cs-header-core{z-index:${Si}}@media (max-width:1097px){#topSitesHolder{height:100%}}.contentSizedFullScreen{width:100%!important}.refreshPage{height:50px;width:50px;margin-top:50px;margin-bottom:-50px}.refreshPage.hide{animation:hideRefreshBtn ease-in both 1s}@keyframes hideRefreshBtn{from{height:50px;opacity:1}to{height:0px;opacity:0}}.refreshPage fluent-progress-ring{margin:8px auto}.weather-current-precipitation-glyph{margin-inline-start:auto;margin-inline-end:4px;fill:currentcolor;filter:invert(var(--iconInvert))}.nocolor-img-aqi,.nocolor-img-nm-aqi{filter:invert(var(--iconInvert))}.nocolor-img-aqi{width:20px !important;height:20px !important}.marqueeAdOverlayV3{width:100%;user-select:none;font-style:normal;z-index:${vi}}.marqueeAdLargeV3,.marqueeAdMediumV3{margin:22px 0;margin-top:8px}.marqueeAdSmallV3{margin-top:12px;margin-bottom:22px}.marqueeAdContainerV3{display:flex;box-sizing:border-box;border-radius:12px;border:1px solid rgba(0,0,0,0.05);overflow:hidden;position:relative}.marqueeAdSmallV3{width:338px;min-height:180px}.marqueeAdMediumV3{width:612px;min-height:88px}.marqueeAdLargeV3{width:612px;min-height:100px}.marqueeAdMediumV3.alighWith2ColumnWidth{width:652px}.marqueeAdSmallV3 .marqueeAdContainerV3{flex-direction:column}.marqueeAdContainerV3 .marqueeAdSponsor{width:159px;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:12px;color:gray;font-weight:400;line-height:16px;margin:0;background-color:#D3F2FF;}.marqueeAdSmallV3 .marqueeAdSponsor{width:100%;height:82px;padding:16px;box-sizing:border-box;align-items:center}.marqueeAdSponsorLogo{margin-top:8px;background:none;height:auto}.marqueeAdSponsorLogo::part(control){padding:0;border:0}.marqueeAdSponsorLogoImage{display:block;width:100%;height:100%;max-width:127px;max-height:36px}.marqueeAdContent{flex:1;display:flex;flex-direction:column;align-items:flex-start}.marqueeAdContainerV3 .marqueeAdContent{background-color:#FFF;padding:16px;box-sizing:border-box}.marqueeAdTitle{font-weight:600}.marqueeAdSmallV3 .marqueeAdTitle{font-size:14px;line-height:20px}.marqueeAdLargeV3 .marqueeAdContainerV3 .marqueeAdTitle{font-size:16px;line-height:22px;width:380px}.marqueeAdMediumV3 .marqueeAdContainerV3 .marqueeAdTitle{font-size:14px;line-height:20px;width:380px}.marqueeAdSmallV3 .marqueeAdContainerV3 .marqueeAdTitle{font-size:14px;line-height:20px}.marqueeAdContainerV3 .marqueeAdCTA{height:auto;display:flex;align-items:center;justify-content:center;border-radius:1000px;border:1px solid #242424;cursor:pointer;text-decoration:none;color:#2F2F2F;background-color:#FFFFFF;padding:5px 10px}.marqueeAdContainerV3 .marqueeAdCTA:hover{background-color:#F5F5F5}.marqueeAdContainerV3 .marqueeAdCTA:focus{background-color:#E0E0E0}.marqueeAdContainerV3 .marqueeAdCTA::part(control){padding:0;border:0;font-size:16px;font-weight:600;line-height:22px}.marqueeAdLargeV3 .marqueeAdCTA{padding:5px 16px}.marqueeAdMediumV3 .marqueeAdCTA{padding:3px 12px}.marqueeAdMediumV3 .marqueeAdCTA::part(control){font-size:12px;font-weight:600;line-height:16px}.marqueeAdLargeV3 .marqueeAdCTA,.marqueeAdMediumV3 .marqueeAdCTA{margin-top:12px}.marqueeAdSmallV3 .marqueeAdCTA{margin-top:12px;padding:3px 12px}.marqueeAdSmallV3 .marqueeAdCTA::part(control){font-size:12px;font-weight:600;line-height:16px}.marqueeAdContainerV3 #marqueeAdDismissButton{position:absolute;right:16px;top:16px;width:20px;height:20px;min-width:0;background:url(${Ci})}.marqueeAdContainerV3 #marqueeAdDismissButton:hover,.marqueeAdContainerV3 #marqueeAdDismissButton:focus{background:url(${wi})}.marqueeAdContainerV3 #marqueeAdDismissButton::part(control){padding:0;border:0}.marqueeAdContainerV3 #marqueeAdDismissButton::part(content){visibility:hidden;background:url(${wi})}.marqueeAdSmallV3 .marqueeAdContainerV3 #marqueeAdDismissButton{background:url(${Ci})}${ki} .contentPlaceHolder{min-height:100vh}.content-size-responsive{min-width:100%;width:100%}.nav-size-responsive{width:100%;min-width:100%}.nav-feed-size-responsive{margin:0px 80px;min-width:70%}@media (min-width:${li.gf.toString()}px){.nav-feed-size-responsive{margin:0px 24px;min-width:1588px;max-width:2088px}}.skeleton-container{height:100%;position:absolute;top:43px;z-index:9;background:${hi._B}}.skeleton-channel{display:flex;position:relative;padding:20px 20px;box-sizing:border-box;overflow:hidden}.skeleton-feed{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:12px;position:relative;padding-top:8px;box-sizing:border-box;overflow:hidden}.skeleton-header{padding:12px 20px 0}.skeleton-header .card-label{height:15px;width:95px;border-radius:5px}.fixed-size-card{display:flex;flex-direction:column;height:304px;border-radius:5px}.fixed-size-card .card-img{width:100%;height:157px;border-radius:5px}.fixed-size-card .card-label{margin:10px 16px 8px 16px;height:16px;width:100px;border-radius:5px}.fixed-size-card .card-text{margin:5px 16px 0 16px;height:20px;border-radius:5px}.fixed-size-card:first-of-type{grid-column:span 2}.fixed-size-card:first-of-type .card-img{height:100%}.fixed-size-card:first-of-type .card-label,.fixed-size-card:first-of-type .card-text{display:none}.skeleton{display:block;background:#e0e0e0;position:relative;overflow:hidden}.shimmer .skeleton:before{content:"";display:block;position:absolute;top:0;left:-80px;height:100%;width:80px;opacity:0.3;background-image:linear-gradient(to right,transparent,#f5f5f5,transparent);animation:shine 1s infinite}@keyframes shine{to{left:calc(100% + 80px)}}.fixed-size-feed{margin:0 auto}.floatButtonGroup{position:relative}.copilotContainer{bottom:145px;left:initial;right:42px;position:relative}.copilotMuseumTemplateHasCoachMark{display:block;position:fixed;bottom:145px;left:initial;right:42px;width:0px;height:0px;width:173px;overflow:hidden;transition:all 0.3s ease-in-out}.copilotMuseumTemplate{display:block;position:fixed;bottom:145px;left:initial;right:42px;width:285px;max-height:500px;padding:8px 16px 16px 16px;border-radius:6px;background:var(--neutral-layer-floating);box-shadow:0px 4px 20px 0px #00000029;z-index:1000;overflow:hidden;transition:all 0.3s ease-in-out}.copilotMuseumCard_show{visibility:visible;transition:opacity 0.2s,visibility 0s;opacity:1}.copilotMuseumCard_hide{opacity:0;visibility:hidden;transition:opacity 0.2s,visibility 0s 0.2s}span[slot="start"]{margin-inline:0px}.copilotMuseumTemplate .messageBigBox{overflow-x:hidden;overflow-y:auto;padding-bottom:10px}.heading-container{border-radius:2px 2px 0px 0px;display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.heading-container .title{font-size:${gi.P};line-height:${gi.b};color:var(--neutral-foreground-rest);font-weight:600;font-weight:700;letter-spacing:0em;text-align:left;margin-top:0;margin-bottom:0;transition:all 0.2s ease-in-out;display:inline-block;user-select:none}.openCopilot-close-button{background:transparent}.openCopilot-close-button:hover{background-color:${mi.Xi}}.openCopilot-close-button:active{background-color:${mi.Gy}}.close-button-glyph{display:flex}.close-button-glyph svg{item-align:center;fill:inherit}.openCopilotIcon{height:16px;width:16px;transform:scale(2);fill:inherit}.openCopilotIconBox{display:flex}.copilotMuseumCard{display:flex;flex-direction:column;align-items:flex-end;overflow:hidden;width:100%;max-height:78%;gap:8px;overflow-y:auto}.copilotMuseumCard .message-box{max-width:90%;height:25px;display:flex;align-items:center;padding:4px 12px 6px 12px;border-radius:12px;border:1px solid var(--neutral-stroke-rest);background:var(--neutral-fill-rest);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-bottom:8px;cursor:pointer;color:var(--neutral-foreground-rest);font-weight:400}.copilotMuseumCard .message-box:hover{background:var(--neutral-fill-hover)}.copilotMuseumCard .message-box .framesSlideIn{animation:slide-top 1s cubic-bezier(0.25,0.46,0.45,0.94) forwards}@keyframes slide-top{0%{transform:translateY(0)}100%{transform:translateY(-100%)}}@keyframes slide-in{0%{opacity:0;transform:translateY(20px)}100%{opacity:1;transform:translateY(0)}}.copilotRequestAnything{width:173px;padding:4px 10px 4px 10px;border-radius:10px;border:1px solid #036ac4;text-align:center;display:flex;align-items:center;justify-content:center;margin:auto;cursor:pointer}.copilotRequestAnything span{color:#036ac4;font-size:16px;font-weight:600;line-height:28px;letter-spacing:0em;text-align:left;margin-left:5px}.requestAnythingBox{}.copilotCoachMark{width:173px;padding:2px;border-radius:10px;border:1px solid #036AC4;display:block;position:fixed;bottom:140px;left:initial;right:42px;background:var(--neutral-layer-floating);box-shadow:0px 4px 20px 0px #00000029;z-index:1000;overflow:hidden;text-align:center;display:flex;align-items:center;justify-content:center;margin:auto;cursor:pointer}.copilotCoachMark span{color:#036ac4;font-size:16px;font-weight:600;line-height:28px;letter-spacing:0em;text-align:left;margin-left:5px}.copilotCoachMark,.copilotMuseumTemplate{transition:all 0.3s ease-in-out}.copilotMuseumCard_hide{opacity:0;visibility:hidden;transform:scale(0.9)}`.withBehaviors((0,fi.Uu)(Ti)),Ai=Pi,Ii={experienceConfigSchema:undefined};(0,i.W)()},95824:function(e,t,n){"use strict";n.r(t),n.d(t,{AdLabelType:function(){return U},BlockedDomainAndTitles:function(){return _},BlockedHosts:function(){return N},DragDropType:function(){return c},GroupPolicySettings:function(){return a},TileSource:function(){return s},TileSourceString:function(){return G},ToolingInfo:function(){return Hi},TopSitesClassNameConstants:function(){return B},TopSitesDataHelper:function(){return li},TopSitesEdgeNextWC:function(){return fi},TopSitesEdgeNextWCInlineStyles:function(){return Ui},TopSitesEdgeNextWCStyles:function(){return Wi},TopSitesEdgeNextWCTemplate:function(){return ei},TopSitesEdgeNextWCWithCarouselStyles:function(){return _i},TopSitesEdgeNextWCWithJSDependencyStyles:function(){return Fi},TopSitesElementConstants:function(){return O},TopSitesNextStyles:function(){return Di},TopSitesResponsiveStyles:function(){return Ri},WEB_APPS_GET_INFO_LOADING_ACTION_ID:function(){return ce},addDialogHeight:function(){return h},addDialogWithSubSectionHeight:function(){return g},blockedDomainsPair:function(){return W},carouselColsPerSlideMap:function(){return se},carouselTilesxColxRowsMap:function(){return ae},carouselTopSiteListTemplate:function(){return Zn},closeButtonSvg:function(){return qn},contextMenuWidth:function(){return m},defaultMaxTileForFirstRow:function(){return S},defaultMaxTileForSixteenTopSites:function(){return v},defaultMaxTileForThreeRowsTopSites:function(){return C},defaultMaxTileForTwentyTopSites:function(){return y},defaultMaxTiles:function(){return f},defaultOverrideIconsList:function(){return H},defaultTopSiteIcon:function(){return w},dialogWidth:function(){return b},displayPinIconTopSitesBindingSource:function(){return Jn},editDialogHeight:function(){return T},errorInstallingWebAppToastTemplate:function(){return jn},feeds3T1SearchBoxWidthTilesxColxRowsMap:function(){return re},feeds3T1SearchBoxWidthWithNotificationMiniCardTilesxColxRowsMap:function(){return oe},installingWebAppToastTemplate:function(){return zn},normalTopSiteListTemplate:function(){return Xn},notificationToastDefaultDisplayMs:function(){return k},openWebAppToastTemplate:function(){return Kn},pinToastDefaultDisplayMs:function(){return P},pinToastTemplate:function(){return Vn},tileDialogMargin:function(){return A},tileSourceToTopSiteDataCollections:function(){return ie},titleOverrides:function(){return $},topSiteAddDialogTemplate:function(){return Hn},topSiteEditDialogTemplate:function(){return $n},topSiteShell:function(){return q},topSiteTileHeight:function(){return I},topSiteTileWidth:function(){return E},topSitesBindingSource:function(){return Qn},topSitesCollapsedStorageKey:function(){return M},topSitesDragDropStorageKey:function(){return L},topSitesDragDropUnpinStorageKey:function(){return R},topSitesUndoToastMessageMargin:function(){return D},topSitesUnpinnedStorageKey:function(){return x},undoToastTemplate:function(){return Gn},validQueryParameterPrefix:function(){return F}});var i=n(45900),r=n(63070),o=n(64888);var a,s,c,d=n(83816),l=n(23335),u=n(33940),p=n(50632);!function(e){e.Enforced="ENFORCED",e.Recommended="RECOMMENDED"}(a||(a={})),function(e){e[e.CuratedTileSource=-5]="CuratedTileSource",e[e.UserAddedTileSource=4]="UserAddedTileSource",e[e.UserAddedTileSourceNewVal=3]="UserAddedTileSourceNewVal",e[e.AlgoGeneratedTileSource=0]="AlgoGeneratedTileSource",e[e.WPOPromotedTileSource=-4]="WPOPromotedTileSource",e[e.PromotedCuratedTileSource=-6]="PromotedCuratedTileSource",e[e.SponsoredPromotedCuratedTileSource=-7]="SponsoredPromotedCuratedTileSource",e[e.SponsoredCuratedTileSource=-8]="SponsoredCuratedTileSource",e[e.AffiliateAutoAppendTileSource=2]="AffiliateAutoAppendTileSource"}(s||(s={})),function(e){e[e.DragDrop=1]="DragDrop",e[e.DragDropUnpin=-1]="DragDropUnpin"}(c||(c={}));const h=282,g=386,m="130px",f=8,v=16,y=20,S=10,C=30,w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrsl7EJADAIBGPIEO4/nVt8SCFkgijhvhCsPNQHNUmjWnM0EBCpdYK7i07cSUTYy+I5ARaz705UuQR34A4ggAACCCCA4LL6qhPGV94JYgswAGXGEhq663zFAAAAAElFTkSuQmCC",b=320,T=176,k=1e4,P=1200,A=8,I=84,E=108,M="tsCollapsed",x="tsUnpinned",L="tsDragDrop",R="tsDragDropUnpin",D=32,F=/^(\/\?|\?|&|)/,O={topSitesContainerId:"TopSitesContainer",topSitesId:"TopSitesCommon",topSitesClassSelector:"topSitesCommon",topSiteActionMenuId:"tsam"},B={topSitesDarkOnBackgroundImage:"topSitesDarkOnBackgroundImage",topSitesLightOnBackgroundImage:"topSitesLightOnBackgroundImage",topSitesDark:"topSitesDark",topSitesLight:"topSitesLight",tenSites:"ten-sites",nineSites:"nine-sites",eightSites:"eight-sites",sixSites:"six-sites",twoRowSites:"two-row-sites",feeds3T1SearchBoxWidth:"f3t1tsb",feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled:"qbf3t1tsb",carouselSites:"all-one-line-sites",large:"Large"},N=["ntp.msn.com","ntp.msn.cn","microsoftedgewelcome.microsoft.com"],_={"go.microsoft.com":["Welcome to Microsoft Edge"],"msn.com":["MSN","Microsoft Start"]};var U;!function(e){e[e.topSiteAdLabelBig=0]="topSiteAdLabelBig",e[e.topSiteAdLabelSmall=1]="topSiteAdLabelSmall",e[e.topSiteAdTxtBig=2]="topSiteAdTxtBig",e[e.topSiteAdTxtSmall=3]="topSiteAdTxtSmall"}(U||(U={}));const W=[{url:"https://www.bing.com",exc:["maps"]},{url:"https://www2.bing.com",exc:["maps"]},{url:"https://bing.com",exc:["maps"]},{url:"https://chat.bing.com"},{url:"https://www.google.co.jp",exc:["maps","photos","flights"]},{url:"https://google.com",exc:["maps","photos","flights","mail"]},{url:"https://www.google.com",exc:["maps","photos","flights"]},{url:"https://www.google.com.au",exc:["maps","photos","flights"]},{url:"https://www.google.com.br",exc:["maps","photos","flights"]},{url:"https://www.google.com.fr",exc:["maps","photos","flights"]},{url:"https://www.google.co.uk",exc:["maps","photos","flights"]},{url:"https://www.google.de",exc:["maps","photos","flights"]},{url:"https://www.yahoo.com"},{url:"https://search.yahoo.com"},{url:"https://uk.yahoo.com "},{url:"https://uk.search.yahoo.com"},{url:"https://de.yahoo.com"},{url:"https://de.search.yahoo.com"},{url:"https://fr.yahoo.com"},{url:"https://fr.search.yahoo.com"},{url:"https://ca.yahoo.com"},{url:"https://ca.search.yahoo.com"},{url:"https://au.yahoo.com"},{url:"https://www.yahoo.co.jp"},{url:"https://search.yahoo.co.jp"},{url:"https://www.baidu.com"},{url:"https://www.duckduckgo.com"},{url:"https://yandex.com"},{url:"https://www.yandex.com"},{url:"https://www.yandex.ru"},{url:"https://www.naver.com"},{url:"https://www.microsoft.com/en-us/edge/update"}],H={"https://www.office.com":"AA13Q6AL","https://www.office.com/":"AA13Q6AL"},$={"https://www.office.com":"Microsoft 365","https://www.office.com/":"Microsoft 365"},q={rid:1,dataGenerationTime:null,faviconUrl:"",domain:"",enforcement:void 0,title:"          ",tileSource:0,tileTitleSource:0,url:"",direction:"ltr"},G={0:"AlgoGenerated",[-5]:"CuratedTileSource",4:"UserAddedTileSource",3:"UserAddedTileSourceNewVal"},V=new Set,z=new Set,j=new Set,K=new Set,Q=new Set,J=new Set,Y=new Set,Z=new Set,X=new Set,ee=new Set,te=new Set,ne=new Set,ie=new Map([[0,[ee,te,ne]],[-5,[V,z,j]],[4,[K,Q,J]],[3,[Y,Z,X]]]),re={onerow:{[p.K$.c1]:{default:{tile:4,class:B.feeds3T1SearchBoxWidth,maxRowTileCount:4}},[p.K$.c2]:{default:{tile:5,class:B.feeds3T1SearchBoxWidth,maxRowTileCount:5}},[p.K$.c3]:{default:{tile:6,class:B.feeds3T1SearchBoxWidth,maxRowTileCount:6}},[p.K$.c4]:{default:{tile:9,class:B.feeds3T1SearchBoxWidth,maxRowTileCount:9}},[p.K$.c5]:{default:{tile:9,class:B.feeds3T1SearchBoxWidth,maxRowTileCount:9}}},tworows:{[p.K$.c1]:{default:{tile:8,class:B.feeds3T1SearchBoxWidth,maxRowTileCount:4}},[p.K$.c2]:{default:{tile:10,class:B.feeds3T1SearchBoxWidth,maxRowTileCount:5}},[p.K$.c3]:{default:{tile:12,class:B.feeds3T1SearchBoxWidth,maxRowTileCount:6}},[p.K$.c4]:{default:{tile:18,class:B.feeds3T1SearchBoxWidth,maxRowTileCount:9}},[p.K$.c5]:{default:{tile:18,class:B.feeds3T1SearchBoxWidth,maxRowTileCount:9}}}},oe={onerow:{[p.K$.c1]:{default:{tile:8,class:B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:4}},[p.K$.c2]:{default:{tile:10,class:B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:5}},[p.K$.c3]:{default:{tile:3,class:B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:3}},[p.K$.c4]:{default:{tile:6,class:B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:6}},[p.K$.c5]:{default:{tile:6,class:B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:6}}},tworows:{[p.K$.c1]:{default:{tile:8,class:B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:4}},[p.K$.c2]:{default:{tile:10,class:B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:5}},[p.K$.c3]:{default:{tile:6,class:B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:3}},[p.K$.c4]:{default:{tile:12,class:B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:6}},[p.K$.c5]:{default:{tile:12,class:B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled,maxRowTileCount:6}}}},ae={onerow:{[p.K$.c1]:{default:{tile:20,class:B.carouselSites,maxRowTileCount:20}},[p.K$.c2]:{default:{tile:20,class:B.carouselSites,maxRowTileCount:20}},[p.K$.c3]:{default:{tile:20,class:B.carouselSites,maxRowTileCount:20}},[p.K$.c4]:{default:{tile:20,class:B.carouselSites,maxRowTileCount:20}},[p.K$.c5]:{default:{tile:20,class:B.carouselSites,maxRowTileCount:20}}},tworows:{[p.K$.c1]:{default:{tile:20,class:B.carouselSites,maxRowTileCount:20}},[p.K$.c2]:{default:{tile:20,class:B.carouselSites,maxRowTileCount:20}},[p.K$.c3]:{default:{tile:20,class:B.carouselSites,maxRowTileCount:20}},[p.K$.c4]:{default:{tile:20,class:B.carouselSites,maxRowTileCount:20}},[p.K$.c5]:{default:{tile:20,class:B.carouselSites,maxRowTileCount:20}}}},se={[p.K$.c1]:2,[p.K$.c2]:3,[p.K$.c3]:4,[p.K$.c4]:7,[p.K$.c5]:7},ce="WEB_APPS_GET_INFO_LOADING_ACTION_ID";var de=n(54297),le=n(21789),ue=n(22140);const pe=/www\d*\./i,he=/^https?:/i;class ge{constructor(e){if(!ue.b.isNotNullOrUndefined(e))return;let t;try{t=new URL(e.trim())}catch{t=void 0}if(!t||!e.toLocaleLowerCase().startsWith(t.origin.toLocaleLowerCase()))try{t=new URL("http://"+e)}catch{t=void 0}if(!t||!t.host||!he.test(t.protocol))return;const n=t.hostname.replace(pe,"");this.url=t.href.replace(/\/$/,""),this.domain=n,this.domainAndPath=this.domain+t.pathname.replace(/[\s/]+$/g,""),this.domainPathAndQuery=this.domainAndPath+t.search,this.hasQuery=!!t.search}}const me="//img-s-msn-com.akamaized.net/tenant/amp/entityid/",fe="//img-s.msn.cn/tenant/amp/entityid/",ve="removedTopSiteUrls",ye={};let Se,Ce,we,be;function Te(e){if(e){return null!=le.jG&&le.jG.IsChinaCompliance?`${fe}${e}.img`:`${me}${e}.img`}return w}function ke(e){if(e){return(e&&e.match(/cms\/api\/amp\/image\/([a-z0-9]+)$/i)||{})[1]}return null}function Pe(e,t){t&&!e[t]&&(e[t]=!0)}be=(0,de.$o)(),we=be.getObject(ve)||{},Ce={};var Ae=n(45266),Ie=n(71486),Ee=n(20089),Me=n(13334),xe=n(20196),Le=n(96329),Re=n(72322),De=n(98619),Fe=n(45870),Oe=n(40378),Be=n(85205),Ne=n(79545),_e=n(62929),Ue=n(28496),We=n(87172),He=n(67213),$e=n(7476),qe=n(10754),Ge=n(21930),Ve=n(88826),ze=n(23549),je=n(82898),Ke=n(78951);const Qe="curated_topsite",Je="user_topsite",Ye="frequent_topsite",Ze="promotedcurated_topsite",Xe="promotedcurated_topsite_sponsored",et="wpopromoted_topsite",tt="curatedleadgen_topsite",nt="autoappend_topsite",it="tile",rt="url",ot="context_menu",at="topsite_remove_toast",st="remove",ct="undoremove",dt="close",lt="cancel",ut="rename",pt="save",ht="suggestedlink",gt="edit_dialog",mt="add_dialog",ft="topsiteaddtile",vt="topsite",yt="turnonpreview",St="turnoffpreview",Ct="topsitePinToTaskBar",wt="unpin",bt="pin",Tt="action_menu",kt="carousel",Pt="nextflipperclick",At="preflipperclick";var It;!function(e){e.tsn="tsn",e.moreOption="More Options",e.remove="Remove",e.undoRemove="Undo Remove",e.close="Close",e.rename="Rename",e.save="Save",e.cancel="Cancel",e.addSite="Add a site",e.add="Add",e.show="Show",e.suggestedLink="Add a suggested link",e.turnOnPreview="Turn On Preview",e.turnOffPreview="Turn Off Preview",e.container="Container",e.unpin="Unpin",e.pin="Pin",e.topsiteTaskbarpin="TopSite Pin to TaskBar",e.ActionMenu="Action Menu",e.Impression="Impression",e.carouselClick="Carousel click"}(It||(It={}));const Et="tsu";var Mt;!function(e){e.CLICK_INSTALL_OPTION="CLICK_INSTALL_OPTION",e.CLICK_OPEN_OPTION="CLICK_OPEN_OPTION",e.INSTALLING_APP_TOAST_DISMISS="INSTALLING_APP_TOAST_DISMISS",e.OPEN_APP_TOAST_DISMISS="OPEN_APP_TOAST_DISMISS",e.OPEN_APP_TOAST_OPEN_APP="OPEN_APP_TOAST_OPEN_APP",e.ERROR_INSTALLING_APP_TOAST_DISMISS="ERROR_INSTALLING_APP_TOAST_DISMISS",e.DISMISS_THREE_DOT_MENU_BEFORE_FINISH_LOAD="DISMISS_THREE_DOT_MENU_BEFORE_FINISH_LOAD"}(Mt||(Mt={}));const xt=e=>{var t;return void 0!==(null===(t=window)||void 0===t||null===(t=t.chrome)||void 0===t||null===(t=t.edgeWebAppsPrivate)||void 0===t||null===(t=t.WebAppsOnNTPAction)||void 0===t?void 0:t[e])&&void 0!==window.chrome.edgeWebAppsPrivate.recordWebAppsOnNtpAction&&(window.chrome.edgeWebAppsPrivate.recordWebAppsOnNtpAction(e),!0)},Lt=e=>{let t,n=!1;switch(e.tileSource){case 4:case 3:t=Je;break;case-5:t=Qe,n=!0;break;case-6:t=Ze,n=!0;break;case-7:t=Xe,n=!0;break;case-4:t=et,n=!0;break;case-8:t=tt,n=!0;break;case 2:t=nt,n=!0;break;default:t=Ye}return{tileSourcePrefix:t,isCuratedOrPromoted:n}};var Rt=n(99452),Dt=n(42590),Ft=n(7522);function Ot(e,t){const n=[];let i=0,r=0;const o=(0,Ft.Z)(t,"slot"),a=e.length+t.length;for(let t=0;t<a;t++){var s;t>=(null===(s=o[r])||void 0===s?void 0:s.slot)?n.push(o[r++]):i<e.length&&n.push(e[i++])}for(;r<o.length;)n.push(o[r++]);return n}var Bt=n(99528);const Nt=[-5,-8,-4,-6,-7];function _t(e,t,n){var i;const r={props:{notificationDurationMs:t,closeToastNotificationHandler:n},timerId:null,startTime:t,remainingTime:t,paused:!1};(null===(i=e.currentToastTimerHandle)||void 0===i?void 0:i.timerId)&&window.clearTimeout(e.currentToastTimerHandle.timerId),e.currentToastTimerHandle=r,e.currentToastTimerHandle.startTime=Date.now(),t&&t!==1/0&&(e.currentToastTimerHandle.timerId=window.setTimeout((()=>{e.currentToastTimerHandle.props.closeToastNotificationHandler(!0)}),t))}function Ut(e){(0,Ve.H)($e.pqC,e)}function Wt(e,t,n,i,r,o){if(e){const{left:a,right:s,bottom:c,top:d}=e.getBoundingClientRect(),l=t.getBoundingClientRect(),u=i-s>b,p=u?a-l.left:s-b-l.left,h=u?l.right-a-b:l.right-s,g=r-c-A>n,m=d>=n;let f="auto";g&&(f=c-l.bottom+A+"px"),g||m||(f=-d+"px");const v=g?"auto":l.bottom-c+I+A+"px";return o?`--dialog-left:${p}px;--dialog-top:${f};--dialog-bottom:${v};`:`--dialog-right:${h}px;--dialog-top:${f};--dialog-bottom:${v};`}return o?`--dialog-left:0px; --dialog-top:${A}px;`:`--dialog-right:0px; --dialog-top:${A}px;`}function Ht(e,t){if(null==e||!e.mostVisitedAvailable)return[];const n=[],i=new Set,r=new Set,o=new Set,a=new Set;return e.mostVisited.forEach((s=>{const c=e.getMostVisitedItemData(s.rid),d={rid:s.rid,dataGenerationTime:c.dataGenerationTime,faviconUrl:s.faviconUrl,domain:c.domain,title:c.title,tileSource:c.tileSource,tileTitleSource:c.tileTitleSource,url:c.url,direction:c.direction,enforcement:s.enforcement,customImagePart:s.customImagePart};if(0!=c.tileSource)return n.push(d),!o.has(d.url)&&o.add(d.url),!r.has(d.domain)&&r.add(d.domain),void(!a.has(d.title)&&a.add(d.title));const l=(c.domain??Vt(c.url)).replace("www.","");!i.has(l)&&i.add(l),(!t||0!=c.tileSource||"https://www.office.com/"!=c.url&&"https://www.office.com"!=c.url)&&(N.includes(l)||function(e,t){if(_&&_[e])for(let n=0;n<_[e].length;n++)if(0===_[e][n].localeCompare(t,{sensitivity:"accent"}))return!0;return!1}(l,c.title)||o.has(d.url)||(r.has(d.domain)||i.has(l))&&a.has(d.title)||n.push(d))})),i.clear(),r.clear(),o.clear(),n}function $t(e,t,n){const i=e.recommendedSites,r=we||{},o=Ce||{},a=new Set,s=n.map((e=>e.url)),c=i.filter((e=>{const t=Vt(e.url);if(!(o[t]||r[e.url]||s.includes(e.url)||a.has(e.url)))return a.add(e.url),e})),d=t-n.filter((e=>4===e.tileSource||3===e.tileSource)).length;return c.splice(0,d)}function qt(e,t,n,i,r,o){if(n){if((a=n.url)&&(we[a]=!0,be.setObject(ve,we)),o&&r(),Nt.includes(n.tileSource))return void t();i&&n.rid&&(i.deleteMostVisitedItem(n.rid),(0,_e.f)(53,!!Me.Al.IsPrerender))}var a}function Gt(e,t,n,i,r){if(Nt.includes(i))return(o=r)&&(delete we[o],be.setObject(ve,we)),void e();var o;if(t&&n){const e=t.getMostVisitedItemData(n),i=e?e.tileSource:null;4===i||3===i?t.undoCustomLinkAction(n):0!==i&&2!==i||t.undoMostVisitedDeletion(n)}}function Vt(e){try{return new URL(e).hostname}catch{return""}}function zt(e,t){t&&null!=e&&e.mostVisitedAvailable&&e.mostVisited.forEach((t=>{const n=e.getMostVisitedItemData(t.rid),i=(n.domain??Vt(n.url)).replace("www.",""),r=ie.get(n.tileSource);!r||r.length<3||(r[0].add(n.url),r[1].add(n.domain),r[2].add(i),0!==n.tileSource&&jt(n,0),-5!==n.tileSource&&jt(n,-5),4!==n.tileSource&&jt(n,4),3!==n.tileSource&&jt(n,3),async function(e){const t=["sign in","signin","working","loading","log in","login","logging in","interstitial","redirect"];for(let n=0;n<t.length;n++)await(0,Bt.R)(),null!=e&&e.toLocaleLowerCase().includes(t[n])&&(0,Ve.H)($e.lqy,"Interstitial title appears which includes:"+t[n])}(n.title))}))}function jt(e,t){const n=G[e.tileSource],i=G[t],r=ie.get(t),o=e.url,a=e.domain,s=(e.domain??Vt(e.url)).replace("www.",""),c=r[0],d=r[1],l=r[2];c.has(o)&&Ut("Urls match of types: "+n+" and "+i+" "+o),d.has(a)&&Ut("Domains match of types: "+n+" and "+i+" "+a),l.has(s)&&Ut("Hosts match of types: "+n+" and "+i+" "+s)}const Kt=new Set(["index","welcome","working","loading","interstitial","redirect","continue","https","access denied","sign in","signin","sign in to your account","signup","signing in","sign up","log in","login","logging in","home","monitored access"]);var Qt=n(52965),Jt=n(70430),Yt=n(66415),Zt=n(84515),Xt=n(64726),en=n(82486),tn=n(91735),nn=n(68963),rn=n(92100),on=n(11974);function an(e){if(!e)return;let t=sn(e=(0,on.Z)(e).replace(/^[\b\n\r]*/,""));return t&&t.href.toLocaleUpperCase().startsWith(e.toLocaleUpperCase())||he.test(e)||(t=sn("https://"+e)),t&&t.host&&he.test(t.protocol)&&rn.c.isValidUrl(t.href,!0)?t:void 0}function sn(e){try{return new URL(e)}catch{return}}var cn=n(83726),dn=n.n(cn),ln=n(54678),un=n.n(ln),pn=n(59997),hn=n(44070),gn=n(49218),mn=n(93703),fn=n(89150),vn=n(41472),yn=n(11310),Sn=n.n(yn),Cn=n(53095),wn=n.n(Cn),bn=n(43730),Tn=n(23865),kn=n(65815),Pn=n(1591),An=n(16818),In=n(34009),En=n.n(In),Mn=n(7137),xn=n.n(Mn);bn.v,Tn.S,Pn.Z,An.X,kn.Oj;const Ln=gn.dy`<span class="badge">${e=>e.badge.children}</span>`,Rn=gn.dy` ${e=>"topSiteAdLabelSmall"!==e.adLabelType?gn.dy`<span class="dot-separator"> · </span>`:null}<msn-native-ad-ad-label class="${e=>"topSiteAdLabelSmall"===e.adLabelType?"top-site-ad-label":" "}" type="${e=>e.adLabelType}"></msn-native-ad-ad-label>`,Dn=(e,t)=>{const n=[];return n.push("top-site-f3v1b"),n.push("top-site-s2ts"),n.join(" ")},Fn=gn.dy`<fluent-button class="start-button" appearance="stealth" title="${(e,t)=>{var n;return null!==(n=t.parent)&&void 0!==n&&null!==(n=n.config)&&void 0!==n&&n.enablePinIconUnclickable?null:e.pinLabel}}" aria-lable="${e=>e.pinLabel}" role="button" @click=${(e,t)=>{var n;return t.parent.pinAction&&!(null!==(n=t.parent)&&void 0!==n&&null!==(n=n.config)&&void 0!==n&&n.enablePinIconUnclickable)&&t.parent.pinAction(e,t.event)}} data-t="${e=>e.pinActionButtonTelemetryTag}" icon-only>${(0,mn.g)(((e,t)=>{var n;return!(null!==(n=t.parent.config)&&void 0!==n&&n.enableAllPin)}),gn.dy`${gn.dy.partial(xn())}`)} ${(0,mn.g)(((e,t)=>{var n;return null===(n=t.parent.config)||void 0===n?void 0:n.enableAllPin}),gn.dy` ${(0,mn.g)((e=>1===e.dragDropType),gn.dy`${gn.dy.partial(xn())}`)} ${(0,mn.g)(((e,t)=>{var n;return 1!==e.dragDropType&&!(null!==(n=t.parent)&&void 0!==n&&null!==(n=n.config)&&void 0!==n&&n.enablePinIconUnclickable)}),gn.dy`${gn.dy.partial(En())}`)} `)}</fluent-button>`,On=gn.dy`<fluent-button class="end-button" appearance="stealth" title="${e=>e.contextMenuLabel}" aria-label="${e=>e.contextMenuLabel}" role="button" @click=${(e,t)=>t.parent.toggleActionMenu&&t.parent.toggleActionMenu(e,t.event)} data-t="${e=>e.toggleActionMenuButtonTelemetryTag}" icon-only>${gn.dy.partial(Sn())}</fluent-button>`,Bn=gn.dy`<div class="top-site-title ${e=>e.textShadowEnabled?"top-site-shadow":""}"><span class="top-site-title-text">${e=>e.title}</span>${(0,mn.g)((e=>e.adLabelType&&e.isSponsored&&2!==e.tileSource),Rn)} ${(0,mn.g)((e=>e.badge),Ln)}</div>`,Nn=gn.dy`<a class="control" href="${(e,t)=>t.parent.getTopSiteTemplateUrl(e)}" data-t="${e=>e.anchorTelemetryTag}" target="${(e,t)=>t.parent.config.enableOpenInNewTab?t.parent.linkTarget:void 0}">${Bn}</a>`,_n=gn.dy`<a class="control" href="${(e,t)=>t.parent.getTopSiteTemplateUrl(e)}" data-t="${e=>e.anchorTelemetryTag}" @click=${(e,t)=>t.parent.preventClickOnTopSite(t.event)}>${Bn}</a>`,Un=gn.dy`<div title="${e=>e.title}" aria-label="${e=>e.title}" class="top-site-next small-top-sites pill-top-site ${(e,t)=>t.parent.config.enablePinIconUnclickable?"pinned-top-site":" "} ${(e,t)=>t.parent.config.enableHoverTitle?"uses-hover-title":""} ${Dn} ${(e,t)=>t.parent.topSitesClassName}" href="${(e,t)=>t.parent.getTopSiteTemplateUrl(e)}" data-t="${e=>e.contentViewTelemetryTag}">${(0,mn.g)(((e,t)=>{var n,i;return t.parent.renderTopSiteStartAndEnd&&(null===(n=t.parent.config)||void 0===n?void 0:n.enableAllPin)&&!(null!==(i=t.parent)&&void 0!==i&&i.config.enablePinIconUnclickable&&1!==e.dragDropType)||e.promote}),gn.dy`<span class="start"><div class="top-site-next-g">${Fn}</div></span>`)}<div class="content-container ${(e,t)=>t.parent.topSitesClassName}"><div class="image-container"><div class="image"><img src="${e=>e.faviconUrl}" /></div></div><div class="title-container">${(0,mn.g)((e=>e.disableHref),_n,Nn)}</div></div>${(0,mn.g)(((e,t)=>t.parent.renderTopSiteStartAndEnd),gn.dy`<span class="end"><div class="top-site-next-g">${On}</div></span>`)}</div>`,Wn=gn.dy`<div class="top-site-next small-top-sites pill-top-site drag-locked add-placeholder ${(e,t)=>t.parent.config.enableHoverTitle?"uses-hover-title":""} ${Dn} ${(e,t)=>t.parent.topSitesClassName}"><div class="content-container ${(e,t)=>t.parent.topSitesClassName}"><div class="image-container"><div class="image new-add-image"><svg width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M12 5.625V6.375H6.375V12H5.625V6.375H0V5.625H5.625V0H6.375V5.625H12Z" /></svg></div></div><div class="title-container"><a class="control" href="#" @click=${(e,t)=>e.onAddTopSiteClick(t.event)} data-t="${e=>e.addTopSiteButtonTelemetryTag}" aria-label="${(e,t)=>t.parent.strings.ariaLabel_addTile}" title="${(e,t)=>t.parent.strings.ariaLabel_addTile}"><div class="top-site-title"><span class="top-site-title-text">${(e,t)=>t.parent.getAddShortcutTitle()}</span></div></a></div></div></div>`,Hn=gn.dy`<msn-top-site-dialog id="topSiteAddDialog" cancelText="${e=>e.topSiteAddDialog.cancelText}" headerTitle="${e=>e.topSiteAddDialog.headerTitle}" saveText="${e=>e.topSiteAddDialog.saveText}" closeText="${e=>e.topSiteAddDialog.closeText}" :nameInputData="${e=>e.topSiteAddDialog.nameInputBox}" :urlInputData="${e=>e.topSiteAddDialog.urlInputBox}" :newOrUpdatedTopSite="${e=>e.topSiteAddDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${e=>e.topSiteAddDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${e=>e.topSiteAddDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${e=>e.topSiteAddDialog.closeButtonTelemetryTag}" @focus="${(e,t)=>e.topSiteAddDialog.addInputListener(t.event)}" @close="${(e,t)=>e.topSiteAddDialog.onClose(t.event)}" @save="${(e,t)=>e.topSiteAddDialog.saveHandler(t.event)}" style="${e=>e.topSiteAddDialogContainerPosition}">${(0,mn.g)((e=>e.config.suggestedTopSiteList&&e.config.suggestedTopSiteList.length>0),gn.dy`<div slot="subSection"><h3 class="suggestion-title">${e=>e.strings.addDialogSubHeading}</h3><div class="suggestion-body">${(0,fn.rx)((e=>e.config.suggestedTopSiteList),gn.dy`<div tabIndex="0" class="suggested-top-site"><div class="top-site-next" href="${e=>e.url}" title="${e=>e.title}" aria-label="${e=>e.title}" tabIndex="-1" @click=${(e,t)=>t.parent.topSiteAddDialog.saveHandler&&t.parent.topSiteAddDialog.saveHandler(t.event,e)} @keydown=${(e,t)=>t.parent.topSiteAddDialog.saveHandler&&t.parent.topSiteAddDialog.saveHandler(t.event,e)}><div class="content-container"><div class="image"><img src="${e=>Te(e.faviconId)}" alt="${e=>e.title}" /></div><div class="title-container"><div class="control" data-t="${e=>e.suggestedLinkTelemetryTag}"><div class="top-site-title"><span class="top-site-title-text">${e=>e.title}</span>${(0,mn.g)((e=>e.adLabelType&&e.isSponsored),Rn)} ${(0,mn.g)((e=>e.badge),Ln)}</div></div></div></div></div></div>`)}</div></div>`)}</msn-top-site-dialog>`,$n=gn.dy`<msn-top-site-dialog id="topSiteEditDialog" cancelText="${e=>e.topSiteEditDialog.cancelText}" headerTitle="${e=>e.topSiteEditDialog.headerTitle}" saveText="${e=>e.topSiteEditDialog.saveText}" closeText="${e=>e.topSiteEditDialog.closeText}" :nameInputData="${e=>e.topSiteEditDialog.nameInputBox}" :newOrUpdatedTopSite="${e=>e.topSiteEditDialog.newOrUpdatedTopSite}" :saveButtonTelemetryTag="${e=>e.topSiteEditDialog.saveButtonTelemetryTag}" :cancelButtonTelemetryTag="${e=>e.topSiteEditDialog.cancelButtonTelemetryTag}" :closeButtonTelemetryTag="${e=>e.topSiteEditDialog.closeButtonTelemetryTag}" @focus="${(e,t)=>e.topSiteEditDialog.addInputListener(t.event)}" @close="${(e,t)=>e.topSiteEditDialog.onClose(t.event)}" @save="${(e,t)=>e.topSiteEditDialog.saveHandler(t.event)}" style="${e=>e.topSiteEditDialogContainerPosition}"></msn-top-site-dialog>`,qn=gn.dy`<svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M6.84961 6L12 11.1504L11.1504 12L6 6.84961L0.849609 12L0 11.1504L5.15039 6L0 0.849609L0.849609 0L6 5.15039L11.1504 0L12 0.849609L6.84961 6Z"/></svg>`,Gn=gn.dy`<msn-toast id="undo-toast">${(0,fn.rx)((e=>e.undoToast.removedText),gn.dy`<span>${e=>e}</span>`)}<fluent-button ${(0,vn.i)("undoButton")} appearance=${e=>e.enableWebAppsOnNTP?"accent":"lightweight"} slot="actions" class=${e=>e.enableWebAppsOnNTP?"toast-navigation-button-accent":"toast-navigation-button"} title=${e=>e.undoToast.undoButtonLabel} @click=${(e,t)=>e.undoToast.undoTopSiteHandler(t.event)} data-t="${e=>e.undoToast.undoButtonTelemetryTag}">${e=>e.undoToast.undoButtonLabel}</fluent-button><fluent-button apperance="stealth" slot="close-button" class="toast-close-button" title=${e=>e.undoToast.closeButtonLabel} @click=${(e,t)=>e.undoToast.closeHandler(t.event)} data-t="${e=>e.undoToast.closeButtonTelemetryTag}">${qn}</fluent-button></msn-toast>`,Vn=gn.dy`<msn-toast id="pin-toast">${(0,fn.rx)((e=>e.pinToast.pinText),gn.dy`<span>${e=>e}</span>`)}<fluent-button apperance="stealth" slot="close-button" class="toast-close-button" title=${e=>e.pinToast.closeButtonLabel} @click=${(e,t)=>e.pinToast.closeHandler(t.event)} data-t="${e=>e.pinToast.closeButtonTelemetryTag}">${qn}</fluent-button></msn-toast>`,zn=gn.dy`<msn-toast id="installing-web-app-toast" role="alert"><span>${e=>e.installingWebAppToastProps.displayText}</span><fluent-progress class="install-web-app-toast-progress"></fluent-progress><fluent-button apperance="stealth" slot="close-button" class="toast-close-button" type="button" title=${e=>e.installingWebAppToastProps.closeButtonLabel} aria-label=${e=>e.installingWebAppToastProps.closeButtonLabel} @click=${(e,t)=>e.installingWebAppToastProps.closeHandler(t.event)} data-t="${e=>e.installingWebAppToastProps.closeButtonTelemetryTag}">${qn}</fluent-button></msn-toast>`,jn=gn.dy`<msn-toast id="error-installing-web-app-toast" role="alert"><fluent-button apperance="stealth" slot="close-button" class="toast-close-button" type="button" title=${e=>e.errorInstallingWebAppToastProps.closeButtonLabel} aria-label=${e=>e.errorInstallingWebAppToastProps.closeButtonLabel} @click=${(e,t)=>e.errorInstallingWebAppToastProps.closeHandler(t.event)} data-t="${e=>e.errorInstallingWebAppToastProps.closeButtonTelemetryTag}">${qn}</fluent-button><span>${e=>e.errorInstallingWebAppToastProps.displayText}</span></msn-toast>`,Kn=gn.dy`<msn-toast id="open-web-app-toast" ${(0,vn.i)("openWebAppToastRef")} role="alert">${(0,fn.rx)((e=>e.openWebAppToastProps.displayText),gn.dy`<span>${e=>e}</span>`)}<fluent-button appearance="accent" slot="actions" class="toast-navigation-button-accent" type="button" title=${e=>e.openWebAppToastProps.openButtonLabel} @click=${(e,t)=>e.openWebAppToastProps.openButtonHandler(t.event)} data-t="${e=>e.openWebAppToastProps.openButtonTelemetryTag}">${e=>e.openWebAppToastProps.openButtonLabel}</fluent-button><fluent-button apperance="stealth" slot="close-button" class="toast-close-button" type="button" aria-label=${e=>e.openWebAppToastProps.closeButtonLabel} title=${e=>e.openWebAppToastProps.closeButtonLabel} @click=${(e,t)=>e.openWebAppToastProps.closeHandler(t.event)} data-t="${e=>e.openWebAppToastProps.closeButtonTelemetryTag}">${qn}</fluent-button></msn-toast>`,Qn=e=>e.topSites,Jn=e=>e.topSites.map((e=>({...e,displayPinIcon:!0}))),Yn=gn.dy`<div class="fliper">${gn.dy.partial(wn())}</div>`;const Zn=gn.dy`<msft-stripe speed="3600" part="msft-stripe" ${(0,vn.i)("ref_stripe")} class="${e=>`${e.enableQuickBrief?"strip-with-quick-brief":""}${e.config.enableShowFlipperOpacity?"strip-with-opacity-flipper":""}`}"><div slot="previous-flipper">${gn.dy`<div class="pre-fliper" role="button" @click="${e=>e.onFlipperClick(!1)}" aria-label=${e=>{var t;return null===(t=e.carouselProps)||void 0===t?void 0:t.preFlipperText}} title=${e=>{var t;return null===(t=e.carouselProps)||void 0===t?void 0:t.preFlipperText}} data-t="${e=>{var t;return null===(t=e.carouselProps)||void 0===t?void 0:t.clickCarouselPreButtonTag}}">${Yn}</div>`}</div><div slot="next-flipper">${gn.dy`<div class="next-fliper" role="button" @click="${e=>e.onFlipperClick(!0)}" aria-label=${e=>{var t;return null===(t=e.carouselProps)||void 0===t?void 0:t.nextFlipperText}} title=${e=>{var t;return null===(t=e.carouselProps)||void 0===t?void 0:t.nextFlipperText}} data-t="${e=>{var t;return null===(t=e.carouselProps)||void 0===t?void 0:t.clickCarouselNextButtonTag}}">${Yn}</div>`}</div><div class="top-sites ${e=>e.twoRowSitesClassName}" role="status"><div id=${O.topSitesId} class="sites ${e=>e.sitesClassName} ${e=>e.topSitesClassName}" data-t="${e=>e.topSiteCommonTelemetryTag}" ${(0,vn.i)("topSitesContainer")}>${gn.dy`${(0,fn.rx)(Qn,Un)}`}</div></div></msft-stripe><div class="top-sites ${e=>e.twoRowSitesClassName}"><div class="sites">${gn.dy`${(0,fn.rx)((e=>e.topSitesPlaceHolders),Wn)}`}</div></div>`,Xn=gn.dy`<div class="top-sites ${e=>e.twoRowSitesClassName}" role="status"><div id=${O.topSitesId} class="sites ${e=>e.sitesClassName} ${e=>e.topSitesClassName}" data-t="${e=>e.topSiteCommonTelemetryTag}" ${(0,vn.i)("topSitesContainer")}>${gn.dy`${(0,fn.rx)(Qn,Un)}`} ${gn.dy`${(0,fn.rx)((e=>e.topSitesPlaceHolders),Wn)}`}</div></div>`,ei=gn.dy`<div class="root ${e=>e.extraAddedSitesClassName} ${e=>e.className}  ${e=>e.moveUpward?"move-upward":""}" id="${O.topSitesClassSelector}" ${(0,vn.i)("topSitesRoot")}>${(0,mn.g)((e=>e.config.enableCarouselTopSite),Zn)} ${(0,mn.g)((e=>!e.config.enableCarouselTopSite),Xn)}</div><div ${(0,vn.i)("dialogRoot")}>${(0,mn.g)((e=>e.isAddDialogOpen),Hn)} ${(0,mn.g)((e=>e.topSiteAddedSuccessfully),gn.dy`<div class="top-site-add-success" aria-live="polite">${e=>e.lastAddedTopSite} added successfully</div>`)} ${(0,mn.g)((e=>e.isEditDialogOpen),$n)} ${(0,mn.g)((e=>e.isActionMenuOpen),gn.dy`<div data-t=${e=>e.topsiteItemContainerTelemetry()}><msn-actions-menu id="actions-menu" :referrerButton=${e=>e.activeContextMenuButtonElement} class="${e=>e.config.enableAllPin?"long-width-menu":""}" :menuItems=${e=>{var t;return null===(t=e.actionsMenuProps)||void 0===t?void 0:t.menuItems}} ${(0,vn.i)("topSiteActionsMenu")} @dismiss-menu=${e=>e.isActionMenuOpen=!1} :isGlyphUrlsPicture=${!0} data-t=${e=>e.actionsMenuTelemetry()}>x</msn-actions-menu></div>`)}<div ${(0,vn.i)("toastContainer")} class="toast-root">${(0,mn.g)((e=>"undo"===e.currentToastTag),Gn)} ${(0,mn.g)((e=>"pin"===e.currentToastTag),Vn)} ${(0,mn.g)((e=>"installing-web-app"===e.currentToastTag),zn)} ${(0,mn.g)((e=>"error-installing-web-app"===e.currentToastTag),jn)} ${(0,mn.g)((e=>"open-web-app"===e.currentToastTag),Kn)}</div></div>`;class ti{constructor(e,t){this.onTouchStart=()=>{this.sortableService&&this.sortableService.destroy(),this.sortableService=null,document.addEventListener("mousemove",this.onMouseMove)},this.onMouseMove=()=>{this.initializeService(),document.removeEventListener("mousemove",this.onMouseMove)},this.onUnloadPage=()=>{this.clearTopsiteByUnpinnedSites(),this.clearUnpinStorage()},this.component=e,this.container=t.container,this.disableDragDrop=t.disableDragDrop,this.webStorage=(0,de.$o)(),this.bindEvents()}bindEvents(){window.addEventListener("beforeunload",this.onUnloadPage),document.addEventListener("touchstart",this.onTouchStart),document.addEventListener("mousemove",this.onMouseMove)}unBindEvents(){window.removeEventListener("beforeunload",this.onUnloadPage),document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("mousemove",this.onMouseMove)}getDataFromStorage(e){try{const t=this.webStorage.getItem(e);if(t){return JSON.parse(t)}}catch(e){ze.M0.sendAppErrorEvent({...$e.OF8,message:"Cannot read/write storage for topsite drag drop service",pb:{...$e.OF8.pb,customMessage:`Cannot get drag drop service data, msg: ${e.message||JSON.stringify(e)}`}})}}saveDataToStorage(e,t){try{this.webStorage.setItem(e,JSON.stringify(t))}catch(e){ze.M0.sendAppErrorEvent({...$e.OF8,message:"Cannot read/write storage for topsite drag drop service",pb:{...$e.OF8.pb,customMessage:`Cannot save data to topsites, msg: ${e.message||JSON.stringify(e)}`}})}}reorderItems(e,t,n){Array.isArray(e)&&e.splice(t,0,e.splice(n,1)[0])}getValidTopSitesFromStorageData(){const e=this.getDataFromStorage(L)||{},t=(e.data??[]).filter((e=>e.slot>=0)).sort(((e,t)=>e.slot-t.slot)).reduce(((e,t)=>"rid"in t||"url"in t||"faviconUrl"in t?((0===e.length||e[e.length-1].slot!==t.slot)&&e.push(t),e):e),[]);return{...e,data:t}}getFixedTopSites(){const{data:e}=this.getValidTopSitesFromStorageData();return e||[]}getTopSites(e,t){let n=e;const{data:i}=this.getValidTopSitesFromStorageData();if(!i)return e;const r=i.filter((e=>e.slot<t));return n=[...Ot((0,Jt.Z)(e,r,"url"),r)],n=n.filter((e=>e)).slice(0,t),n}removeTopSiteFromStorage(e,t){const n=this.getDataFromStorage(e)||{},i=n.data;i&&(n.data=i.filter((e=>e.rid!==t.rid)),this.saveDataToStorage(e,n))}clearUnpinStorage(){this.saveDataToStorage(R,{})}clearTopsiteByUnpinnedSites(){const e=(this.getDataFromStorage(R)||{}).data;e&&e.forEach((e=>{this.removeTopSite(e)}))}addTopSite(e,t){let n=this.getValidTopSitesFromStorageData(),i=n.data;if(i||(i=[],n={data:i}),t){i.filter((t=>t.rid!==e.rid&&t.slot>=Math.min(e.fromIndex,e.toIndex)&&t.slot<=Math.max(e.fromIndex,e.toIndex))).forEach((t=>e.fromIndex>e.toIndex?t.slot++:t.slot--))}const r=i.find((t=>t.rid===e.rid));r?Object.assign(r,e):i.push(e),n.data=(0,hn.Z)(i,"rid"),this.saveDataToStorage(L,n),this.removeUnpinnedTopSite(e)}removeTopSite(e){this.removeTopSiteFromStorage(L,e)}addUnpinnedTopSite(e){let t=this.getDataFromStorage(R)||{},n=t.data;n||(n=[],t={data:n}),n.push(e),this.saveDataToStorage(R,t)}removeUnpinnedTopSite(e){this.removeTopSiteFromStorage(R,e)}updateTopSites(e){const t=this.getValidTopSitesFromStorageData(),n=t.data;if(!n)return;const i=n.find((t=>t.rid===e.rid));i&&Object.assign(i,e),this.saveDataToStorage(L,t)}async initializeService(){if(this.sortableService||this.disableDragDrop)return;let e;if(e=this.container instanceof Promise?await this.container:this.container,!e)return;const{Sortable:t}=await n.e("node_modules_sortablejs_modular_sortable_esm_js").then(n.bind(n,54958)),i=new Image;i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==",this.sortableService=t.create(e,{animation:150,chosenClass:"drag-chosen",dragClass:"drag-dragged",delay:100,touchStartThreshold:5,delayOnTouchOnly:!0,filter:".drag-locked",setData:e=>{e.setDragImage(i,0,0)},onMove:e=>{if(e.related||e.dragged)return!e.related.classList.contains("drag-locked")&&!e.dragged.classList.contains("drag-locked")&&(e.related.classList.add("drag-chosen__no-hover"),!0)},onEnd:t=>{var n;const{oldIndex:i,newIndex:r}=t;null===(n=Array.from(e.children))||void 0===n||n.forEach((e=>{var t;null===(t=e.classList)||void 0===t||t.remove("drag-chosen__no-hover")}));const o=this.component.topSites;if(o&&0!==o.length&&-1!==i&&-1!==r&&i!==r){var a;ze.M0.addOrUpdateTmplProperty("tpsdrag","1");if(!this.component.getUserSelectedSetting())return;const e={...o[i],slot:r,fromIndex:i,toIndex:r,dragDropType:1};this.addTopSite(e,!0);const n=null===(a=this.component.$fastController.subscribers)||void 0===a?void 0:a.topSites;if(n){const e=[...this.component.topSites];this.reorderItems(e,r,i);let o=[];if(n.spillover)o=n.spillover;else{const{sub1:e,sub2:t}=n;o=[e,t].filter((e=>e))}const a=o.filter((e=>e.subject===Qn))[0];if(a){const e=a.sub1.views,n=e[i].firstChild.parentNode;if(r<i)n.insertBefore(e[r].firstChild,t.item.nextSibling),n.insertBefore(e[i].firstChild,t.item),n.insertBefore(e[i].lastChild,t.item.nextSibling);else{const o=e[r+1];o&&n.insertBefore(o.firstChild,t.item.nextSibling),n.insertBefore(e[i].firstChild,t.item),n.insertBefore(e[i].lastChild,t.item.nextSibling)}this.reorderItems(e,r,i),this.component.getOrUpdateTopSites()}}ze.M0.sendActionEvent(t.item)}},onChange:e=>{this.component.setActiveTopSiteElement(e.item)}})}destroy(){this.sortableService&&this.sortableService.destroy(),this.sortableService=null,this.unBindEvents()}}var ni=n(851),ii=n.n(ni),ri=n(25158),oi=n.n(ri),ai=n(91104),si=n.n(ai),ci=n(45927);const di="TSNP1.topsites";class li{constructor(){try{this.storage=window.localStorage}catch(e){}}write(e,t){if(this.storage)try{this.storage[e]=t}catch(e){}}writeJsonKey(e,t){return this.write(e,JSON.stringify(t))}readJsonKey(e,t=void 0){var n;const i=null===(n=this.storage)||void 0===n?void 0:n[e];return i?JSON.parse(i):t}getTopSites(){return this.readJsonKey(di,[])}writeTopSites(e){this.writeJsonKey(di,e)}}var ui=n(47266),pi=n(31558),hi=n(67044),gi=n(84424);const mi="removedTopSiteUrls";class fi extends ui.l{constructor(){super(...arguments),this.dataHelper=new li,this.hoverTelemtryTimer=null,this.linkTarget="_self",this.enableQuickBrief=!1,this.widthPerPage=90,this.carouselPageIndex=0,this.carouselColsPerSlide=0,this.scrollDirection=window.document.dir===pn.N.rtl?-1:1,this.marqueeAdActive=!1,this.extraAddedSitesClassName="",this.topSitesEndMarginUsedPadding=0,this.enableOfficeComCurated=!1,this.enableWebAppsOnNTP=!1,this.actionMenuOpenTime=void 0,this.isActionMenuOpen=!1,this.isEditDialogOpen=!1,this.isUndoToastOpen=!1,this.isPinToastOpen=!1,this.topSiteMapper=new Map,this.topSites=[],this.currentToastTag=void 0,this.toastExpirationTimerHost={currentToastTimerHandle:null},this.moveUpward=!1,this.topSiteAddedSuccessfully=!1,this.addTopSiteDialogListener=!1,this.editTopSiteDialogListener=!1,this.numberPromotedSites=0,this.disablePromoteTopSites=!1,this.isWindowsIndexerFeatureActive=!1,this.isMinVisitAffiliateSitesFeatureActive=!1,this.isDisableDefaultInProgress=!1,this.getUserSelectedSetting=()=>this.userSelectedSetting,this.setActiveTopSiteElement=e=>{this.activeTopSiteElement=e},this.renderTopSiteStartAndEnd=!1,this.closeFlyouts=(0,Ie.k)((()=>{this.isActionMenuOpen&&this.toggleActionMenu(null),this.isAddDialogOpen&&this.toggleAddDialog(),this.isEditDialogOpen&&this.toggleEditDialog()}),400),this.closeToast=(e=!1)=>{var t;this.currentToastTag=null,e&&(0,Ee.Gg)(Ee.tk.toast,!1),this.isAddDialogOpen&&this.toggleAddDialog(),this.isEditDialogOpen&&this.toggleEditDialog(),null===(t=this.activeContextMenuButtonElement)||void 0===t||t.focus(),this.toastContainer.removeEventListener("focus",this.handleToastFocus,!0),this.toastContainer.removeEventListener("blur",this.handleToastBlur,!0)},this.getOrUpdateTopSites=()=>{var e;this.topSites=this.getTopSites(),this.currentTilesNumber=(null===(e=this.topSites)||void 0===e?void 0:e.length)??0,this.topSitesPlaceHolders=this.getTopSitesPlaceHolders()},this.handleClick=e=>{this.isActionMenuOpen&&(!this.topSiteActionsMenu||this.topSiteActionsMenu.contains(e.target)||this.activeContextMenuButtonElement.contains(e.target)||!e.composedPath()||e.composedPath().includes(this.activeContextMenuButtonElement)||this.toggleActionMenu(this.activeTopSiteItem,e)),this.topSites&&this.topSites.length>0&&this.ShowPinningWizardCampaign()},this.lowEndDeviceHandler=e=>{var t;this.isLowEndDevice=(null==e||null===(t=e.detail)||void 0===t?void 0:t.isLowEndDevice)??!1},this.onMostVisitedHandler=()=>{this.getOrUpdateTopSites()},this.pinAction=(e,t)=>{var n,i;if(1===e.dragDropType&&(null!==(i=this.config)&&void 0!==i&&i.enableAllPin||this.dragDropService&&"slot"in e))return e.dragDropType=-1,this.togglePinToast({toastText:this.strings.unpinConfirmationMessage,toastDisplayMs:P,tileTitle:e.title}),this.dragDropService.updateTopSites(e),this.getOrUpdateTopSites(),void this.dragDropService.addUnpinnedTopSite(e);if(this.activeTopSiteItem=e,null!==(n=this.config)&&void 0!==n&&n.enableAllPin){e.dragDropType=1;let t={...e};t={...e,slot:this.findActiveSiteIndex(e)},this.dragDropService.addTopSite(t),this.togglePinToast({toastText:this.strings.pinConfirmationMessage,toastDisplayMs:P,tileTitle:e.title}),this.getOrUpdateTopSites()}},this.toggleActionMenu=(e,t)=>{var n;(this.activeTopSiteElement=!this.isActionMenuOpen&&t?t.currentTarget.parentElement.parentElement:this.activeTopSiteElement,this.activeTopSiteItem=e,this.isActionMenuOpen)?(window.removeEventListener("scroll",this.closeFlyouts),this.actionsMenuProps=void 0):(this.actionMenuOpenTime=null===(n=performance)||void 0===n?void 0:n.now(),window.addEventListener("scroll",this.closeFlyouts),t&&t.currentTarget&&ci.u.addElement(t.currentTarget),this.topSiteActionTelemetryContext&&this.activeTopSiteItem&&(this.topSiteActionTelemetryContext=((e,t)=>{const{tileSourcePrefix:n,isCuratedOrPromoted:i}=Lt(t),{removeTopSite:r,editDialog:o,closeEditDialog:a,saveEdit:s,cancelEdit:c,turnOffPreview:d,turnOnPreview:l,pinningTopSiteInQuickLinks:u,undoRemoveTopSite:p,closeRemoveToast:h,pinningTopSite:g}=e;return r.contract.name=`${n}_${st}`,p.contract.name=`${n}_${ct}`,h.contract.name=`${n}_${at}`,o.contract.name=`${n}_${ut}`,a.contract.name=`${n}_${gt}_${dt}`,s.contract.name=`${n}_${gt}_${pt}`,c.contract.name=`${n}_${gt}_${lt}`,d.contract.name=`${n}_${St}`,l.contract.name=`${n}_${yt}`,g.contract.name=`${n}_${bt}`,u.contract.name=`${n}_${Ct}`,i&&(r.contract.content.headline=`${It.remove}_${t.title}`,p.contract.content.headline=`${It.undoRemove}_${t.title}`,h.contract.content.headline=`${It.close}_${t.title}`,o.contract.content.headline=`${It.rename}_${t.title}`,a.contract.content.headline=`${It.close}_${t.title}`,s.contract.content.headline=`${It.save}_${t.title}`,c.contract.content.headline=`${It.cancel}_${t.title}`,d.contract.content.headline=`${It.turnOffPreview}_${t.title}`,l.contract.content.headline=`${It.turnOnPreview}_${t.title}`,g.contract.content.headline=`${It.topsiteTaskbarpin}_${t.title}`,u.contract.content.headline=`${It.pin}_${t.title}`,r.contract.destinationUrl=`${t.url}`,p.contract.destinationUrl=`${t.url}`,h.contract.destinationUrl=`${t.url}`,o.contract.destinationUrl=`${t.url}`,a.contract.destinationUrl=`${t.url}`,s.contract.destinationUrl=`${t.url}`,c.contract.destinationUrl=`${t.url}`,d.contract.destinationUrl=`${t.url}`,l.contract.destinationUrl=`${t.url}`,g.contract.destinationUrl=`${t.url}`,u.contract.destinationUrl=`${t.url}`),e})(this.topSiteActionTelemetryContext,this.activeTopSiteItem)),this.actionsMenuProps=this.generateActionsMenuProps(),this.activeContextMenuButtonElement=t.currentTarget);this.isActionMenuOpen=!this.isActionMenuOpen,(0,Ee.Gg)(Ee.tk.actionMenuOpen,this.isActionMenuOpen)},this.toggleAddDialog=e=>{if(this.activeTopSitePlaceholderElement=!this.isAddDialogOpen&&e?e.currentTarget.parentElement.parentElement:null,this.isAddDialogOpen)window.removeEventListener("scroll",this.closeFlyouts);else{window.addEventListener("scroll",this.closeFlyouts),e&&e.currentTarget&&ci.u.addElement(e.currentTarget);const t=document.dir===pn.N.ltr,n=this.config.suggestedTopSiteList&&this.config.suggestedTopSiteList.length>0?g:h,i=this.topSitesRoot,r=Wt(this.activeTopSitePlaceholderElement,i,n,document.documentElement.clientWidth,document.documentElement.clientHeight,t);this.topSiteAddDialogContainerPosition=r}this.isAddDialogOpen=!this.isAddDialogOpen,this.isAddDialogOpen||(this.isEditDialogOpen&&this.toggleEditDialog(),"undo"===this.currentToastTag&&this.toggleUndoToast()),(0,Ee.Gg)(Ee.tk.addTopSite,this.isAddDialogOpen),this.topSiteAddDialog.newOrUpdatedTopSite={name:"",url:""}},this.handleToastFocus=e=>{var t;this.toastContainer.contains(e.target)&&((t=this.toastExpirationTimerHost).currentToastTimerHandle&&(t.currentToastTimerHandle.paused||(t.currentToastTimerHandle.timerId&&(window.clearTimeout(t.currentToastTimerHandle.timerId),t.currentToastTimerHandle.remainingTime-=Date.now()-t.currentToastTimerHandle.startTime),t.currentToastTimerHandle.paused=!0)),window.addEventListener("keydown",this.handleToastKeyDown,!0))},this.handleToastBlur=e=>{var t;this.toastContainer.contains(e.relatedTarget)||((t=this.toastExpirationTimerHost).currentToastTimerHandle&&t.currentToastTimerHandle.paused&&t.currentToastTimerHandle.remainingTime&&(t.currentToastTimerHandle.props.notificationDurationMs&&t.currentToastTimerHandle.props.notificationDurationMs!==1/0&&(t.currentToastTimerHandle.startTime=Date.now(),t.currentToastTimerHandle.timerId=window.setTimeout((()=>{t.currentToastTimerHandle.props.closeToastNotificationHandler(!0)}),t.currentToastTimerHandle.remainingTime)),t.currentToastTimerHandle.paused=!1),window.removeEventListener("keydown",this.handleToastKeyDown,!0))},this.handleToastKeyDown=e=>{this.toastContainer&&"Escape"===e.key&&this.closeToast()},this.saveTopSitesTP1Data=()=>{this.dataHelper.writeTopSites(this.topSites)},this.onBreakpointCallback=e=>{this.columnArrangement=e,this.carouselColsPerSlide=se[e],this.carouselPageIndex=0,this.scrollToPosition(),this.reRenderTopsite()},this.getCurrentLayoutConfig=()=>{var e;const t=null===(e=this.chromiumPageSettingState)||void 0===e?void 0:e.selectedFeedDisplaySetting,n=this.userSelectedSetting&&"off"!==this.userSelectedSetting?this.userSelectedSetting:"onerow",i=this.tilesxColxRowsMap[n];var r;if(!i)return ze.M0.sendAppErrorEvent({...$e.A$C,message:"Can't find layout config for topsites",pb:{...$e.A$C.pb,userSelectedSetting:this.userSelectedSetting,chromiumPageSettingStatePresent:!!this.chromiumPageSettingState,selectedQuickLinksDisplaySetting:null===(r=this.chromiumPageSettingState)||void 0===r?void 0:r.selectedQuickLinksDisplaySetting}}),null;const o=i[this.columnArrangement];return o[t]??o.default},this.onResize=()=>{this.closeFlyouts()}}async experienceConnected(){var e,t,n;(0,qe.Ou)().TopSitesConnected=null===(e=performance)||void 0===e?void 0:e.now();const i=!Me.Al.IsPrerender;if(this.config.enableWpoTopSitesConfigOverride){const e=(0,gi.DU)();if(e){var r,o,a;const t=e.recommendedSites.filter((e=>!e.isSponsored));if(null!==(r=this.config.recommendedSites)&&void 0!==r&&r.length&&this.config.enableRecommendedSites&&null!==(o=e.recommendedSites)&&void 0!==o&&o.length){const n=this.config.recommendedSites.concat(t);n.sort(((e,t)=>e.locationIndex-t.locationIndex));const i=this.config.overrideIconsList;var s;if(this.config={...this.config,...e,recommendedSites:n},null!=i&&i.length)this.config={...this.config,overrideIconsList:null!==(s=this.config.overrideIconsList)&&void 0!==s&&s.length?this.config.overrideIconsList.concat(i):i}}else this.config={...this.config,...e,recommendedSites:t};if(null!==(a=e.recommendedSites)&&void 0!==a&&a.length&&this.config.enableWpoTopSitesAdsOverride){const t=function(e,t){const n=e.filter((e=>e.isSponsored));if(0===n.length)return t;const i=n.map((e=>({faviconUrl:e.faviconUrl??Te(e.faviconId),title:e.title,url:e.url,isSponsored:e.isSponsored}))),r=t.filter((e=>e.isSponsored)),o=i.concat(r);o.filter(((e,t,n)=>t===n.findIndex((t=>t.title===e.title&&t.url===e.url))));let a=0;for(let e=0;e<t.length;e++)t[e].isSponsored&&o[a]&&(t[e]=o[a],a++);return t}(e.recommendedSites,this.config.curatedSites);this.config={...this.config,curatedSites:t}}}}var c;(this.topSitesContainerPromise=new Promise((e=>this.topSitesContainerPromiseResolver=e)),this.dragDropService||this.initializeDragDropService(),i&&(this.topSites=this.dataHelper.getTopSites()),this.isTP1DataUsed=i&&this.topSites.length>0,this.isTP1DataUsed)?(await this.waitForSelectedQuickLinksReady(),this.chromiumPageSettingState=(0,hi.K0)(Be.z.ChromiumPageSettings).getCurrentState(),this.userSelectedSetting=this.chromiumPageSettingState.selectedQuickLinksDisplaySetting||this.selectedQuickLinksDisplaySetting,this.processWindowsIndexerFeatureStatus(),(0,qe.Ou)().TopSitesConnectedFirstGetTopSites=null===(c=performance)||void 0===c?void 0:c.now(),(0,pi.N)()&&(0,Xt.eC)().then((()=>(0,_e.f)(11,Me.Al.IsPrerender)))):await this.subscribeToChromiumPageState();this.columnArrangement=(0,De.Bn)().currentColumnArrangement,this.numberPromotedSites=this.config.promoteCurated;const d=(0,de.$o)().getItem(x),l=Number(null==d?void 0:d);if(this.disablePromoteTopSites=!isNaN(l)&&0===l,!this.disablePromoteTopSites&&this.numberPromotedSites>l&&(this.numberPromotedSites=l),this.enableSixteenTopSites?(this.maxTiles=v,this.extraAddedSitesClassName="tworows"===this.userSelectedSetting&&this.columnArrangement>="c4"?null:B.tenSites):(this.maxTiles=f,this.extraAddedSitesClassName=B.eightSites),this.config.enableOneColumn&&this.columnArrangement===p.K$.c1&&(this.extraAddedSitesClassName=B.sixSites),this.topSitesLayoutDataConnector=(0,hi.K0)(Be.z.TopSitesLayoutData),(0,nn.Uo)(Be.z.TopSitesLayoutData,(e=>{this.topSitesLayoutState=e})),null===(t=this.topSitesLayoutDataConnector)||void 0===t||null===(n=t.updateMaxTiles)||void 0===n||n.call(t,this.maxTiles),this.pageSettingsConnector=(0,hi.K0)(Be.z.ChromiumPageSettings),this.isTP1DataUsed){const e=this.getCurrentLayoutConfig();e&&(this.maxTiles=e.tile,this.extraAddedSitesClassName=e.class),this.topSites.length>=this.maxTiles&&(this.topSites=this.topSites.slice(0,this.maxActualTile))}const u=window;u.chrome&&u.chrome.embeddedSearch&&(this.ntpApiHandle=u.chrome.embeddedSearch.newTabPage),u.chrome&&u.chrome.ntpSettingsPrivate&&(this.ntpSettingsPrivateApiHandle=u.chrome.ntpSettingsPrivate),this.ntpApiHandle&&(this.ntpApiHandle.onmostvisitedchange=this.onMostVisitedHandler);const h=this.getOverrideIconList();if(h&&h.length>0&&h.forEach((e=>{e.identifierHosts.forEach((t=>{this.topSiteMapper.set(t,e.faviconUrl??Te(e.faviconId))}))})),this.config.suggestedTopSiteList&&this.config.suggestedTopSiteList.length>0&&(this.config.suggestedTopSiteList=((e,t)=>{if(!e)return t;for(const n of t){const t=e.addOrUpdateChild({name:`${vt}_${mt}_${ht}`,behavior:je.wu.Save,content:{headline:It.suggestedLink,type:je.uH.TopSites},overrideDestinationUrl:Et,type:je.c9.ActionButton});n.suggestedLinkTelemetryTag=t.getMetadataTag()}return t})(this.telemetryObject,this.config.suggestedTopSiteList)),this.initializeTopSitesState(),this.minimumTopSites=f-1,!(0,pi.N)()){const e=this.getCurrentLayoutConfig();return this.maxTiles=e.tile,this.extraAddedSitesClassName=e.class,void this.getOrUpdateTopSites()}var g,m;this.isTP1DataUsed?(this.currentTilesNumber=(null===(g=this.topSites)||void 0===g?void 0:g.length)??0,this.topSitesPlaceHolders=this.getTopSitesPlaceHolders()):(this.getOrUpdateTopSites(),(0,qe.Ou)().TopSitesConnectedFirstGetTopSites=null===(m=performance)||void 0===m?void 0:m.now(),(0,pi.N)()&&(0,Xt.eC)().then((()=>(0,_e.f)(11,Me.Al.IsPrerender))));this.topSiteAddDialog=this.generateTopSiteAddDialogProps(),this.topSiteAddedSuccessfully=!1,this.topSiteEditDialog=this.generateTopSiteEditDialogProps(),this.actionsMenuProps=this.generateActionsMenuProps(),this.carouselProps=this.generateCarouselProps(),(0,Yt.FY)(Zt._.topSites,this),Promise.all([(0,Ge.b1)(),(0,en.lr)()]).then((()=>{zt(this.ntpApiHandle,this.config.enableTelemetryTopSite)})),this.processMinimumVisitAffiliateFeatureState(),this.isMinVisitAffiliateSitesFeatureActive&&this.persistMinVisitAffiliateInfo()}async subscribeToChromiumPageState(){const e=new Fe.o;(0,nn.Uo)(Be.z.ChromiumPageSettings,(t=>{if(!t.isLoadCompleted)return;e.set(),this.chromiumPageSettingState=t,t&&t.configData&&t.configData.enabledFeatures&&(this.enableOfficeComCurated=t.configData.enabledFeatures.includes("msNtpNoClientCuratedSites"),this.enableWebAppsOnNTP=t.configData.enabledFeatures.includes("msWebAppsOnNTP")),this.processWindowsIndexerFeatureStatus();const n=t&&t.selectedQuickLinksDisplaySetting;this.enableSixteenTopSites&&this.userSelectedSetting!==n&&(this.userSelectedSetting&&(this.userSelectedSettingCheck=!0,this.userSelectedSetting=n,"tworows"===this.userSelectedSetting&&(this.maxTiles=v),this.getOrUpdateTopSites()),this.userSelectedSetting=n),this.chromiumPageSettingLayoutState&&this.chromiumPageSettingLayoutState!=t&&this.reRenderTopsite(),this.chromiumPageSettingLayoutState=t,this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding&&this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding!=this.topSitesEndMarginUsedPadding&&(this.topSitesEndMarginUsedPadding=this.chromiumPageSettingState.topSitesQuickLinkEndMarginUsedPadding),ze.M0.addOrUpdateTmplProperty("tsLayout",`${this.userSelectedSetting}`),ze.M0.addOrUpdateTmplProperty("tsHideDefault",""+(t.hideDefaultTopSites?1:0)),this.config.enableOpenInNewTab&&(this.linkTarget=t.openInNewTab?"_blank":"_self")})),window.isSSREnabled&&await e.getResultAsync()}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.dragDropService)||void 0===e||e.destroy(),this.dragDropService=null,window.removeEventListener("resize",this.onResize),window.removeEventListener("mouseup",this.handleClick,!1),window.removeEventListener("LowEndDeviceBkgd",this.lowEndDeviceHandler)}async prerenderRefreshCritical(){return this.initializeTopSitesState()}getApproxTTVRValue(e){const t=(0,qe.Ou)();if(t.isSSRCompleted)return t[Ge.nz+(e||this.getExperienceType())]||t[Ge.nz+"Complete"]}shadowDomPopulated(){if((0,pi.N)()){if(window.addEventListener("resize",this.onResize),window.addEventListener("mouseup",this.handleClick,!1),window.addEventListener("LowEndDeviceBkgd",this.lowEndDeviceHandler),(0,De.Bn)().subscribe(this.onBreakpointCallback),this.isTP1DataUsed?window.requestAnimationFrame((()=>{this.markVisuallyReady(),ze.M0.observeSingleElement(this.topSitesRoot)})):window.requestAnimationFrame((()=>{window.setTimeout((()=>{this.markVisuallyReady(),ze.M0.observeSingleElement(this.topSitesRoot)}))})),this.columnArrangement=(0,De.Bn)().currentColumnArrangement,this.renderTopSiteStartAndEnd=!0,this.carouselColsPerSlide=se[this.columnArrangement],this.isTP1DataUsed){var e;const t=(null===(e=this.topSites)||void 0===e?void 0:e.length)??0;(0,xe.C)((()=>{var e;this.subscribeToChromiumPageState(),this.getOrUpdateTopSites();((null===(e=this.topSites)||void 0===e?void 0:e.length)??0)-t>1&&(0,Ve.H)($e.VKG,"TopSites don't get enough data from TP1",void 0,{...$e.VKG.pb,tp1DataLength:this.topSites.length,maxTiles:this.maxTiles,columnArrangement:this.columnArrangement})}))}else this.reRenderTopsite();this.registerElements(),window.addEventListener("beforeunload",this.saveTopSitesTP1Data,{once:!0})}}registerElements(){if((0,le.Yq)().ClarityEnabled){var e,t;const n=null===(e=this.shadowRoot)||void 0===e||null===(t=e.getElementById)||void 0===t?void 0:t.call(e,O.topSitesId);n&&n.setAttribute("data-clarity-mask","true")}this.topSitesContainerPromiseResolver(this.topSitesContainer)}quickBriefVisibleChanged(){this.enableQuickBrief=this.quickBriefVisible,this.$fastController.isConnected&&this.reRenderTopsite(!0)}get shouldHidePlaceholders(){var e;return(null===(e=this.config)||void 0===e?void 0:e.qbHideAdd)&&this.quickBriefVisible}get maxActualTile(){return this.shouldHidePlaceholders?this.maxTiles:this.maxTiles-1}get tilesxColxRowsMap(){return this.config.enableCarouselTopSite?ae:this.quickBriefVisible?oe:re}getExperienceType(){return Ne.x.topSitesEdgeNextWC}get className(){var e,t,n,i;return this.config.enableMarqueeAd&&(0,nn.Uo)(Be.z.BackgroundData,(e=>{this.marqueeAdActive!==e.displayMarqueeAd&&(this.marqueeAdActive=e.displayMarqueeAd)})),!this.marqueeAdActive&&this.isLowEndDevice&&"informational"==(null===(e=this.chromiumPageSettingState)||void 0===e?void 0:e.currentLayout)||this.config.setBkgdOffInformational&&null!==(t=this.chromiumPageSettingState)&&void 0!==t&&t.imageOfTheDayEnabled&&"informational"==(null===(n=this.chromiumPageSettingState)||void 0===n?void 0:n.currentLayout)?(0,Oe.Y)()?B.topSitesDark:B.topSitesLight:this.needDarkThemeIcons?B.topSitesLight:null!==(i=this.chromiumPageSettingState)&&void 0!==i&&i.imageOfTheDayEnabled&&!this.showFullPageBlur?(0,Oe.Y)()?B.topSitesDarkOnBackgroundImage:B.topSitesLightOnBackgroundImage:(0,Oe.Y)()?B.topSitesDark:B.topSitesLight}get enableSixteenTopSites(){var e;return!(null===(e=this.chromiumPageSettingState)||void 0===e||!e.ntpPrefOptionApiAvailability)}get twoRowSitesClassName(){var e;return this.selectedQuickLinksDisplaySetting&&"tworows"==this.selectedQuickLinksDisplaySetting?(null===(e=this.topSites)||void 0===e?void 0:e.length)<=this.minimumTopSites?"":B.twoRowSites:""}get topSitesClassName(){return this.isInformationalLayout?"information-layout":""}get isInformationalLayout(){var e;return!("always"!=(null===(e=this.chromiumPageSettingState)||void 0===e?void 0:e.selectedFeedDisplaySetting))}generateActionsMenuProps(){return{menuItems:this.getActionMenuItem(),onDismiss:this.toggleActionMenu}}generateTopSiteAddDialogProps(){return{addInputListener:e=>{var t,n;this.addTopSiteDialogElement=null===(t=this.shadowRoot)||void 0===t||null===(n=t.getElementById)||void 0===n?void 0:n.call(t,"topSiteAddDialog"),this.addTopSiteDialogListener||(this.addTopSiteDialogListener=!0,this.addTopSiteDialogElement.addEventListener("keydown",(e=>{"Escape"===e.key&&this.addTopSiteDialogElement.closeTopSiteDialog()}))),this.addTopSiteDialogElement.nameInputControl.addEventListener("keydown",(e=>{"Tab"!==e.key&&"Shift"!==e.key||this.addTopSiteDialogElement.nameInputKeyHandler(e)}))},onClose:e=>{this.toggleAddDialog()},saveHandler:(e,t)=>{const n=t||e.detail,i=an(n.url),r=t?t.title:n.name,o=function(e,t,n){if(e&&t){const i=e.fixupAndValidateUrl(t.href);if(i)return e.updateCustomLink(-1,i,n||t.hostname),(0,_e.f)(58,!!Me.Al.IsPrerender),!0}return!1}(this.ntpApiHandle,i,r);this.lastAddedTopSite=r,o?(this.topSiteAddedSuccessfully=!0,this.toggleAddDialog()):(this.topSiteAddedSuccessfully=!1,this.lastAddedTopSite="")},headerTitle:this.strings.addDialogHeadingText,saveText:this.strings.addText,cancelText:this.strings.cancelText,closeText:this.strings.closeButtonText,dialogAnchor:this.activeTopSiteElement,nameInputBox:{name:this.strings.nameLabelText,value:"",ariaLabel:this.strings.ariaLabel_addNameInput||"",id:"nameInputControl"},urlInputBox:{name:this.strings.urlLabelText,value:"",ariaLabel:this.strings.ariaLabel_addUrlInput||"",id:"urlInputControl"},newOrUpdatedTopSite:{name:"",url:""},saveButtonTelemetryTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.saveAdd&&this.topSitesTelemetryContext.saveAdd.getMetadataTag(),cancelButtonTelemetryTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.cancelAdd&&this.topSitesTelemetryContext.cancelAdd.getMetadataTag(),closeButtonTelemetryTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.closeAddDialog&&this.topSitesTelemetryContext.closeAddDialog.getMetadataTag()}}generateTopSiteEditDialogProps(){return{addInputListener:e=>{var t,n;this.editTopSiteDialogElement=null===(t=this.shadowRoot)||void 0===t||null===(n=t.getElementById)||void 0===n?void 0:n.call(t,"topSiteEditDialog"),this.editTopSiteDialogListener||(this.editTopSiteDialogListener=!0,this.editTopSiteDialogElement.addEventListener("keydown",(e=>{"Escape"===e.key&&this.editTopSiteDialogElement.closeTopSiteDialog()}))),this.editTopSiteDialogElement.nameInputControl.addEventListener("keydown",(e=>{"Tab"!==e.key&&"Shift"!==e.key||this.editTopSiteDialogElement.nameInputKeyHandler(e)}))},onClose:e=>{this.toggleEditDialog(e)},saveHandler:e=>{const t=e.detail,n=an(t.url),i=t.name;if(this.dragDropService&&"slot"in this.activeTopSiteItem)return this.activeTopSiteItem.title=i,this.dragDropService.updateTopSites(this.activeTopSiteItem),this.toggleEditDialog(e),void this.getOrUpdateTopSites();const r=function(e,t,n,i,r,o){if(t&&i){let a=t.fixupAndValidateUrl(i.href);if(a&&r)return t.getMostVisitedItemData(r)?(a=t.getMostVisitedItemData(r).url!==a?a:"",t.updateCustomLink(r,a,o||i.hostname),(0,_e.f)(59,!!Me.Al.IsPrerender)):(t.onmostvisitedchange=n,t.updateCustomLink(-1,a,o||i.hostname),e()),!0}return!1}(this.getOrUpdateTopSites,this.ntpApiHandle,this.onMostVisitedHandler,n,this.activeTopSiteItem.rid,i);r&&this.toggleEditDialog(e)},headerTitle:this.strings.renameDialogHeadingText,saveText:this.strings.saveText,cancelText:this.strings.cancelText,closeText:this.strings.closeButtonText,dialogAnchor:this.activeTopSiteElement,nameInputBox:{name:this.strings.nameLabelText,value:"",ariaLabel:this.strings.ariaLabel_addNameInput||"",id:"nameInputControl"},saveButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.saveEdit&&this.topSiteActionTelemetryContext.saveEdit.getMetadataTag(),cancelButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.cancelEdit&&this.topSiteActionTelemetryContext.cancelEdit.getMetadataTag(),closeButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.closeEditDialog&&this.topSiteActionTelemetryContext.closeEditDialog.getMetadataTag()}}generateUndoTopSiteHandler(){return this.isDisableDefaultInProgress?(this.disableCurated(),void(this.isDisableDefaultInProgress=!1)):this.dragDropService&&"slot"in this.activeTopSiteItem?(this.dragDropService.addTopSite(this.activeTopSiteItem),this.toggleUndoToast(),void this.getOrUpdateTopSites()):(-6!=this.activeTopSiteItem.tileSource&&-7!=this.activeTopSiteItem.tileSource||(this.numberPromotedSites++,(0,de.$o)().setItem(x,this.numberPromotedSites.toString())),Gt(this.getOrUpdateTopSites,this.ntpApiHandle,this.activeTopSiteItem.rid,this.activeTopSiteItem.tileSource,this.activeTopSiteItem.url),void this.toggleUndoToast(!0))}generateUndoToastProps(){const e=this.activeTopSiteItem.title,t=e.length>20?`${e.substring(0,20)}…`:e,n=this.strings.undoRemovedFormat;let i=(0,Le.Z)(n,t);return this.isDisableDefaultInProgress&&(i=[this.strings.undoDisableDefault]),{closeButtonLabel:this.strings.closeButtonText,closeButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.closeRemoveToast?this.topSiteActionTelemetryContext.closeRemoveToast.getMetadataTag():null,closeHandler:()=>{this.closeToast()},notificationDurationMs:this.config.undoToastNotificationDurationMs||k,removedText:i,undoButtonLabel:this.strings.undoLabelText,undoButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.undoRemoveTopSite?this.topSiteActionTelemetryContext.undoRemoveTopSite.getMetadataTag():null,undoTopSiteHandler:()=>{this.generateUndoTopSiteHandler()}}}generatePinToastProps(e){const{toastText:t,toastDisplayMs:n,tileTitle:i=this.activeTopSiteItem.title}=e,r=i.length>20?`${i.substring(0,20)}…`:i,o=(0,Le.Z)(t,r);return{closeButtonLabel:this.strings.closeButtonText,closeButtonTelemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.closeRemoveToast?this.topSiteActionTelemetryContext.closeRemoveToast.getMetadataTag():null,closeHandler:()=>{this.closeToast()},notificationDurationMs:n||this.config.undoToastNotificationDurationMs||k,pinText:o}}generateInstallingWebAppToastProps(){return{displayText:this.strings.installingWebAppToastMessage,notificationDurationMs:1/0,closeButtonLabel:this.strings.toastDismissButtonLabel,closeHandler:()=>{xt(Mt.INSTALLING_APP_TOAST_DISMISS),this.closeToast()}}}generateErrorInstallingWebAppToastProps(){return{displayText:this.strings.errInstallWebAppToastMsg,notificationDurationMs:k,closeButtonLabel:this.strings.toastDismissButtonLabel,closeHandler:()=>{xt(Mt.ERROR_INSTALLING_APP_TOAST_DISMISS),this.closeToast()}}}generateOpenWebAppToastProps(e,t){const n=e.length>20?`${e.substring(0,20)}…`:e;return{displayText:(0,Le.Z)(this.strings.openWebAppToastMessage,n),notificationDurationMs:k,closeButtonLabel:this.strings.toastDismissButtonLabel,closeHandler:()=>{xt(Mt.OPEN_APP_TOAST_DISMISS),this.closeToast()},openButtonLabel:this.strings.openWebAppToastAction,openButtonHandler:()=>{xt(Mt.OPEN_APP_TOAST_OPEN_APP),this.openWebApp(t),this.closeToast()}}}generateCarouselProps(){return{preFlipperText:this.strings&&this.strings.preFlipper||"Previous sites",nextFlipperText:this.strings&&this.strings.nextFlipper||"Next sites",clickCarouselNextButtonTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.clickCarouselNextButton&&this.topSitesTelemetryContext.clickCarouselNextButton.getMetadataTag(),clickCarouselPreButtonTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.clickCarouselPreButton&&this.topSitesTelemetryContext.clickCarouselPreButton.getMetadataTag()}}checkTopsitesTail(e){var t;const n=null===(t=this.topSites)||void 0===t?void 0:t.length;if(n)for(let t=n-1;t>e&&"slot"in this.topSites[t];t--)this.topSites[t].slot--,this.dragDropService.addTopSite(this.topSites[t])}getActionMenuItem(){var e,t;const n=this.activeTopSiteItem&&[-5,-6].includes(this.activeTopSiteItem.tileSource),i=this.activeTopSiteItem&&(-8===this.activeTopSiteItem.tileSource||-7===this.activeTopSiteItem.tileSource),r=le.jG.CurrentMarket===Re.IY.ENUS,o={id:"Remove",title:this.strings.removeLabelText,glyph:un(),onClick:e=>{this.checkTopsitesTail(this.findActiveSiteIndex(this.activeTopSiteItem)),"https://www.office.com"==this.activeTopSiteItem.url&&(this.deletedUrlLookup[this.activeTopSiteItem.url]=!0,this.webStorage.setObject(mi,this.deletedUrlLookup)),-6!=this.activeTopSiteItem.tileSource&&-7!=this.activeTopSiteItem.tileSource||(this.numberPromotedSites--,(0,de.$o)().setItem(x,this.numberPromotedSites.toString())),this.dragDropService&&"slot"in this.activeTopSiteItem&&this.dragDropService.removeTopSite(this.activeTopSiteItem),qt(0,this.getOrUpdateTopSites,this.activeTopSiteItem,this.ntpApiHandle,this.toggleUndoToast.bind(this,!0),!0),this.onMostVisitedHandler()},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.removeTopSite?this.topSiteActionTelemetryContext.removeTopSite.getMetadataTag():""},a={id:"Rename",title:this.strings.renameLabelText,glyph:ii(),onClick:e=>{this.toggleEditDialog(e)},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.editDialog?this.topSiteActionTelemetryContext.editDialog.getMetadataTag():""},s={id:"Hide",title:r?this.strings.hidePromotedCuratedLabelText:this.strings.hideCuratedLabelText,glyph:oi(),onClick:e=>{this.disableCurated()},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.removeCurated?this.topSiteActionTelemetryContext.removeCurated.getMetadataTag():""},c={id:"Hide",title:r?this.strings.hideSponsoredCuratedLabelText:this.strings.hideCuratedLabelText,glyph:oi(),onClick:e=>{this.disableCurated()},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.removeCurated?this.topSiteActionTelemetryContext.removeCurated.getMetadataTag():""},d={id:"PinToTaskBar",title:this.strings.pinToTaskBar,glyph:si(),onClick:e=>{this.pinToTaskBar(),this.togglePinToast()},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.pinningTopSite?this.topSiteActionTelemetryContext.pinningTopSite.getMetadataTag():""},l={id:"Pin",title:1===(null===(e=this.activeTopSiteItem)||void 0===e?void 0:e.dragDropType)?this.strings.unpinSite:this.strings.pinSite,glyph:1===(null===(t=this.activeTopSiteItem)||void 0===t?void 0:t.dragDropType)?xn():En(),onClick:e=>{this.pinAction(this.activeTopSiteItem)},telemetryTag:this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.pinningTopSite?this.topSiteActionTelemetryContext.pinningTopSiteInQuickLinks.getMetadataTag():""},u=[a,o];if(n&&u.push(s),i&&u.push(c),this.config.enableAllPin&&u.push(l),this.config.enablePinningTopSite&&u.push(d),this.showWebAppInstall()){u.push({id:ce,isLoading:!0});const e=(e,t)=>({id:"installWebApp",title:this.strings.installWebApp||"",glyph:dn(),onClick:n=>{xt(Mt.CLICK_INSTALL_OPTION),this.installWebApp(e,t)}}),t=(e,t)=>({id:"openWebApp",title:this.strings.openWebApp||"",glyphUrls:{lightMode:t,darkMode:t},onClick:t=>{xt(Mt.CLICK_OPEN_OPTION),this.openWebApp(e)}}),n=this.actionMenuOpenTime;window.chrome.edgeWebAppsPrivate.getWebAppLaunchOrInstallInfo(this.activeTopSiteItem.url,(i=>{var r;if(!this.actionsMenuProps)return void xt(Mt.DISMISS_THREE_DOT_MENU_BEFORE_FINISH_LOAD);if(!this.activeTopSiteItem)return;const o=u.findIndex((e=>e.id===ce));var a,s,c;i?(i.appId?u.splice(o,1,t(i.appId,i.iconUrl||this.activeTopSiteItem.faviconUrl)):u.splice(o,1,e(i.url,this.activeTopSiteItem.title)),void 0!==n&&void 0!==(null===(r=performance)||void 0===r?void 0:r.now)&&(a=performance.now()-n,s=void 0!==i.appId,void 0!==(null===(c=window)||void 0===c||null===(c=c.chrome)||void 0===c||null===(c=c.edgeWebAppsPrivate)||void 0===c?void 0:c.recordTimeToShowMenuItem)&&window.chrome.edgeWebAppsPrivate.recordTimeToShowMenuItem(a,s))):u.splice(o,1)}))}return u}getOrderedTopSites(){var e,t,n;let i,r=[];const o=this.config.enableIndexerPrefTest||this.isWindowsIndexerFeatureActive,a=[];if(!(0,pi.N)())return Array(this.maxActualTile).fill(q).map(((e,t)=>({...e,rid:t+1})));r=Ht(this.ntpApiHandle,this.config.disableOfficeSite),o&&(i=(0,Qt.Z)(r)),r=this.removeBlockedSites(r);let s=1;const c=new Map,d=this.numberPromotedSites;let l=d>0&&!this.disablePromoteTopSites;const u=[];this.updateAffiliateAutoAppendTileSource(r),o&&this.processAffiliateLinksForWindowsIndexer(a);let h=this.maxTiles?this.maxTiles-1:f-1;const g=this.getCurrentLayoutConfig();h=this.shouldHidePlaceholders?g.tile:g.tile-1;const m=null===(e=this.chromiumPageSettingState)||void 0===e?void 0:e.hideDefaultTopSites;!m&&l&&this.config.curatedSites&&this.config.reduceFrequentSite&&r.splice(h-this.config.reduceFrequentSite);let v=r.length>=h;if(!m&&r&&this.config&&(r.length<h||l)&&this.config.curatedSites){!function(e,t){if(t&&t.forEach((e=>{const t=ye[e.url]??new ge(e.url);Ce[t.domain]=!0,we[e.url]=!0,!ye[e.url]&&(ye[e.url]=t)})),Se=[],!e.curatedSites)return;const n={};for(const e in Ce)Pe(n,e);for(const e in we){if(!e||n[e])return;const t=ye[e]??new ge(e);!ye[e]&&(ye[e]=t),Pe(n,t.domainAndPath),n[e]=!0}Se=new Array,e.curatedSites.forEach((e=>{const i=e.faviconId||ke(e.faviconUrl),r={...e,faviconUrl:i?Te(i):e.faviconUrl},o=new ge(r.url);n[o.domain]||n[o.domainAndPath]||n[r.url]||Se.push(r),r.isSponsored&&t.forEach((e=>{if(e.url===r.url&&0==e.tileSource){const t=r.faviconId||ke(r.faviconUrl);e.title=r.title,e.faviconUrl=t?Te(t):r.faviconUrl}}))}))}(this.config,r),r.length<h&&(l=!1,v=!1);const e=r.length;e>0&&(s=r[e-1].rid+1e3);const t=Se;let n=this.maxActualTile-r.length;l&&(n=d,t.sort(((e,t)=>(e.isSponsored=e.isSponsored??!1,t.isSponsored=t.isSponsored??!1,Number(t.isSponsored)-Number(e.isSponsored)))));const i=t.slice(0,n).map((e=>(c.set(s,e),{rid:s++,dataGenerationTime:void 0,faviconUrl:e.faviconUrl??Te(e.faviconId),domain:void 0,title:e.title,tileSource:this.getTileSource(l,e.isSponsored),tileTitleSource:void 0,url:e.url,direction:e.direction,enforcement:void 0,isSponsored:e.isSponsored})));if(this.webStorage=(0,de.$o)(),this.deletedUrlLookup=this.webStorage.getObject(mi)||{},this.enableOfficeComCurated&&!this.deletedUrlLookup["https://www.office.com"]){const e={rid:s++,dataGenerationTime:void 0,faviconUrl:Te("BBMzZlJ"),domain:void 0,title:"Office",tileSource:-5,tileTitleSource:void 0,url:"https://www.office.com",direction:"ltr",enforcement:void 0};i.unshift(e)}l?u.push(...i):r.push(...i)}this.config.enableRecommendedSites&&!m&&(r=function(e,t,n,i,r){const o=$t(e,t,n),a=o.map((e=>e.url));let s;return n=n.filter((e=>{if(!a.includes(e.url))return e})),s=0===n.length&&0===r.length?1:r.length>0?r[r.length-1].rid+1:n[n.length-1].rid+1e3,function(e,t){const n=e.length+t.length,i=[];let r=0,o=0,a=0;for(let s=0;s<n;s++)o<t.length&&t[o].locationIndex===a?i[a++]=t[o++]:r<e.length?i[a++]=e[r++]:i[a++]=t[o++];return i}(n,o.map((e=>{i.set(s,e);const t=e.faviconId??ke(e.faviconUrl);return{...e,faviconUrl:Te(t),tileSource:-4,rid:s++,customImagePart:e.customImagePart??"image"}})))}(this.config,this.maxTiles,r,c,u),o&&function(e,t,n){const i=$t(e,e.numIndexerTopSites,t),r=new Set(t.map((e=>e.url))),o={key:"wpo",value:i.filter((e=>{if(!r.has(e.url)&&!e.publisherId)return e})).map((e=>({url:e.url,title:e.title})))};n.push(o)}(this.config,i,a)),o&&this.processWindowsIndexerPromotedSites(a);const y=new Map;if(l&&u.length>0)for(let e=d,t=0;e>0&&t<u.length;e--,t++)y.set(h-e,u[t]);const S=new Set([0,2,-5,-8,-4]),C=new Set([4,3]);let w=g.tile;const b=(0,pi.N)()?(null===(t=this.dragDropService)||void 0===t||null===(n=t.getFixedTopSites)||void 0===n?void 0:n.call(t))??[]:[];let T=b.filter((e=>e.slot<w)),k=(0,Jt.Z)(r,T,"url"),P=k.filter((e=>C.has(e.tileSource)));P.length+b.filter((e=>e.slot<g.tile)).length<g.tile&&!this.shouldHidePlaceholders&&(w=g.tile-1,T=b.filter((e=>e.slot<w)),k=(0,Jt.Z)(r,T,"url"),P=k.filter((e=>C.has(e.tileSource))));const A=T.length,I=Math.min(w-A,P.length),E=w-A-I;let M=0,x=0,L=k.reduce(((e,t)=>(S.has(t.tileSource)&&x<E&&(t.title=function(e,t){let n=e.toLowerCase().trim();if(n.endsWith("...")&&(n=n.slice(0,-3)),Kt.has(n)){if((t.startsWith("https://")||t.startsWith("http://"))&&(t=new URL(t).hostname),t.startsWith("www.")){const e="www.";t=t.slice(e.length)}return t}return e}(t.title,t.domain??t.url),e.push(t),x+=1),C.has(t.tileSource)&&M<I&&(e.push(t),M+=1),e)),[]);if("onerow"===this.userSelectedSetting&&I>0&&(this.columnArrangement===p.K$.c1||this.columnArrangement===p.K$.c2)&&(L=this.getOneColOrTwoColTopSites(k,I,E,w,u)),r=[...Ot(L,T)],l&&0===I&&y.size>0&&y.forEach(((e,t)=>{r.splice(t,0,e),r.pop()})),v&&ze.M0.addOrUpdateTmplString("promotedTopSites"),this.config.enableCarouselTopSite&&l&&0===I&&y.size>0){const e=[-6,-7],t=r.length;for(let n=this.numberPromotedSites;n>=1;n--)e.includes(r[t-n].tileSource)&&([r[this.carouselColsPerSlide-n],r[t-n]]=[r[t-n],r[this.carouselColsPerSlide-n]])}return r}getOneColOrTwoColTopSites(e,t,n,i,r){const o=new Set([-5,-4,0,2]),a=new Set([-8,-7]),s=new Set([4,3]);let c=[];const d=[],l=[];let u=[],h=0;for(const n of e)a.has(n.tileSource)?u.push(n):o.has(n.tileSource)?d.push(n):s.has(n.tileSource)&&h<t&&(l.push(n),h+=1);this.columnArrangement===p.K$.c1&&u.length<1?u=r.slice(0,1):this.columnArrangement===p.K$.c2&&u.length<2&&(u=r.length>u.length?r.slice(0,2):u);const g=u.length+d.length-n;g>0&&d.splice(0,g);const m=d.slice(0,i-(l.length+u.length));return c=[...l,...u,...m],c}getTopSites(){const e=this.getOrderedTopSites();if(null==e||!e.length)return this.userSelectedSetting&&"off"==this.userSelectedSetting||this.zeroTopSitesErrorHandler(),[];this.userSelectedSettingCheck=!1;const t=[],n=this.maxActualTile;return e.forEach(((e,i)=>{var r,o;if(n<i)return;if((null===(r=this.config.overrideIconsList)||void 0===r?void 0:r.length)>0&&this.topSiteMapper.size>0)if(this.topSiteMapper.get(e.url))e.faviconUrl=this.topSiteMapper.get(e.url);else{const t=Vt(e.url);this.topSiteMapper.get(t)&&(e.faviconUrl=this.topSiteMapper.get(t))}H&&H[e.url]&&(e.faviconUrl=Te(H[e.url])),$&&$[e.url]&&(e.title=$[e.url]);const a=new ge(e.url),{topSitesAffiliates:s,affiliateLinkOverrides:c}=this.config;s&&s[a.domainPathAndQuery]&&"/"!==s[a.domainPathAndQuery]&&2===e.tileSource&&F.test(s[a.domainPathAndQuery])&&(e.url=e.url.replace(/\/$/,"")+s[a.domainPathAndQuery]),c&&this.handleAffiliateOverrides(a,e);const d={...e,adLabelType:this.config.adLabelType},l=this.selectedQuickLinksDisplaySetting?null===(o=this.tilesxColxRowsMap[this.selectedQuickLinksDisplaySetting][this.columnArrangement])||void 0===o||null===(o=o.default)||void 0===o?void 0:o.maxRowTileCount:null,u=((e,t,n,i)=>{if(!e)return;const{tileSourcePrefix:r,isCuratedOrPromoted:o}=Lt(t),a=je.uH.TopSites;let s=It.tsn,c=Et;o&&(s=t.title,c=t.url);const d=i?Math.floor(n/i)+1:null,l=i?n%i+1:null;return{topSiteTile:e.addOrUpdateChild({name:`${r}_${it}`,content:{headline:s,type:a},overrideDestinationUrl:c,ext:{hl:s,row:d,col:l}}),destination:e.addOrUpdateChild({name:`${r}_${rt}${"https://www.bing.com/work"===t.url?">top-sites-bookmarks-tile-click":""}`,behavior:je.wu.Navigate,content:{headline:s,type:a},overrideDestinationUrl:c}),moreOption:e.addOrUpdateChild({name:`${r}_${ot}`,behavior:je.wu.More,content:{headline:`${It.moreOption}_${s}`,type:a},overrideDestinationUrl:c}),unpin:e.addOrUpdateChild({name:`${r}_${wt}`,behavior:je.wu.Unpin,content:{headline:`${It.unpin}_${s}`,type:a},overrideDestinationUrl:c}),pin:e.addOrUpdateChild({name:`${r}_${bt}`,behavior:je.wu.Pin,content:{headline:`${It.pin}_${s}`,type:a},overrideDestinationUrl:c})}})(this.telemetryObject,d,i,l);let p=(-6===d.tileSource||-7===d.tileSource)&&u&&u.unpin&&u.unpin.getMetadataTag();this.config.enableAllPin&&1===d.dragDropType&&(p=u&&u.pin&&u.pin.getMetadataTag()),t.push({...d,contextMenuLabel:this.strings.contextMenuLabel,contentViewTelemetryTag:u&&u.topSiteTile&&u.topSiteTile.getMetadataTag(),anchorTelemetryTag:u&&u.destination&&u.destination.getMetadataTag(),toggleActionMenuButtonTelemetryTag:u&&u.moreOption&&u.moreOption.getMetadataTag(),promote:1===d.dragDropType,pinLabel:1===d.dragDropType?this.strings.unpinSite:this.strings.pinSite,pinActionButtonTelemetryTag:p,textShadowEnabled:this.config.enableBackPlateForPlaceholder})})),t}handleAffiliateOverrides(e,t){const n=this.config.affiliateLinkOverrides;0===t.tileSource&&n[e.domainAndPath]&&"/"!==n[e.domainAndPath]&&this.config.enableAffiliateOverride&&!e.hasQuery&&(t.url=n[e.domain],t.tileSource=2,t.isSponsored=!0,ze.M0.addOrUpdateTmplProperty("tsaffov","4"))}getTopSitesPlaceHolders(){const e=[];if(this.currentTilesNumber<this.maxTiles&&(e.push({addTileSupported:!0,backPlateEnabled:this.config.enableBackPlateForPlaceholder||!1,onAddTopSiteClick:this.toggleAddDialog,addTileLabel:this.strings.addTileLabel,ariaLabel:this.strings.ariaLabel_addTile,addTopSiteButtonTelemetryTag:this.topSitesTelemetryContext&&this.topSitesTelemetryContext.topSitePlaceHolderAddSite&&this.topSitesTelemetryContext.topSitePlaceHolderAddSite.getMetadataTag()}),this.currentTilesNumber++),this.topSitesLayoutDataConnector){let e=0;if("onerow"==this.selectedQuickLinksDisplaySetting||"tworows"==this.selectedQuickLinksDisplaySetting){var t;const n=null===(t=this.tilesxColxRowsMap[this.selectedQuickLinksDisplaySetting][this.columnArrangement])||void 0===t||null===(t=t.default)||void 0===t?void 0:t.maxRowTileCount;n&&(e=this.currentTilesNumber>n?2:1)}else"off"==this.selectedQuickLinksDisplaySetting&&(e=0);var n;if(e!==this.topSitesLayoutState.actualRowCount)null===(n=this.topSitesLayoutDataConnector)||void 0===n||n.updateActualRowCount(e)}return e}findActiveSiteIndex(e){var t;if(!e||null===(t=this.topSites)||void 0===t||!t.length)return-1;let n=-1;for(let t=0;t<this.topSites.length;t++)if(e.rid===this.topSites[t].rid){n=t;break}return n}installWebApp(e,t){var n;this.activeTopSiteItem&&void 0!==(null===(n=window)||void 0===n||null===(n=n.chrome)||void 0===n?void 0:n.edgeWebAppsPrivate)&&(this.toggleInstallingWebAppToast(),window.chrome.edgeWebAppsPrivate.installWebApp(e,t,(e=>{var t;if(!e||!e.success)return void this.toggleErrorInstallingWebAppToast();const n=(null===(t=this.toastExpirationTimerHost.currentToastTimerHandle)||void 0===t?void 0:t.paused)||!1;this.toggleOpenWebAppToast(e.appName,e.appId),n&&window.requestAnimationFrame((()=>{window.setTimeout((()=>{var e;null===(e=this.openWebAppToastRef)||void 0===e||e.focus()}))}))})))}openWebApp(e){var t;this.activeTopSiteItem&&void 0!==(null===(t=window)||void 0===t||null===(t=t.chrome)||void 0===t?void 0:t.edgeWebAppsPrivate)&&window.chrome.edgeWebAppsPrivate.openWebApp(e)}disableCurated(){this.isDisableDefaultInProgress=!0;const e=this.chromiumPageSettingState,t={hideDefaultTopSites:!e.hideDefaultTopSites,currentBackgroundImageType:e.currentBackgroundImageType,originalLayout:e.currentLayout,currentLayout:"custom",greetingEnabled:e.greetingEnabled,imageOfTheDayEnabled:e.imageOfTheDayEnabled,quickLinksEnabled:e.quickLinksEnabled,selectedQuickLinksDisplaySetting:e.selectedQuickLinksDisplaySetting,selectedFeedDisplaySetting:e.selectedFeedDisplaySetting};this.pageSettingsConnector&&(this.pageSettingsConnector.updateLayout(t),this.getOrUpdateTopSites(),this.toggleUndoToast(),this.isDisableDefaultInProgress=!1,(0,tn.ih)(Ne.x.topSitesEdgeNextWC))}getAddShortcutTitle(){var e;return null!==(e=this.strings)&&void 0!==e&&e.addShortcutTitle?this.strings.addShortcutTitle:"Add shortcut"}pinToTaskBar(e){window&&window.chrome&&window.chrome.appPinningPrivate&&window.chrome.appPinningPrivate.pinPage("This attests that the user has agreed to pin this website",this.activeTopSiteItem.url,this.activeTopSiteItem.title)}toggleEditDialog(e){if(this.isEditDialogOpen)window.removeEventListener("scroll",this.closeFlyouts);else{window.addEventListener("scroll",this.closeFlyouts),e&&e.currentTarget&&ci.u.addElement(e.currentTarget),this.topSiteEditDialog.newOrUpdatedTopSite={name:this.activeTopSiteItem.title,url:this.activeTopSiteItem.url},this.topSiteEditDialog.nameInputBox.value=this.activeTopSiteItem.title;const t=document.dir===pn.N.ltr,n=this.topSitesRoot,i=Wt(this.activeTopSiteElement,n,T,document.documentElement.clientWidth,document.documentElement.clientHeight,t);this.topSiteEditDialogContainerPosition=i,this.topSiteEditDialog.saveButtonTelemetryTag=this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.saveEdit&&this.topSiteActionTelemetryContext.saveEdit.getMetadataTag(),this.topSiteEditDialog.cancelButtonTelemetryTag=this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.cancelEdit&&this.topSiteActionTelemetryContext.cancelEdit.getMetadataTag(),this.topSiteEditDialog.closeButtonTelemetryTag=this.topSiteActionTelemetryContext&&this.topSiteActionTelemetryContext.closeEditDialog&&this.topSiteActionTelemetryContext.closeEditDialog.getMetadataTag()}this.isEditDialogOpen=!this.isEditDialogOpen,this.isEditDialogOpen||(this.isAddDialogOpen&&this.toggleAddDialog(),"undo"===this.currentToastTag&&this.toggleUndoToast()),(0,Ee.Gg)(Ee.tk.editTopSite,this.isEditDialogOpen)}updateToastContainer(){const e=this.topSitesRoot;if(!e)return!1;const t=e.getBoundingClientRect(),n=`top: ${Math.ceil(t.bottom)+window.scrollY+D}px`;return this.toastContainer.setAttribute("style",n),this.toastContainer.addEventListener("focus",this.handleToastFocus,!0),this.toastContainer.addEventListener("blur",this.handleToastBlur,!0),window.requestAnimationFrame((()=>{window.setTimeout((()=>{var e;null===(e=this.toastContainer)||void 0===e||e.querySelectorAll("fluent-button").forEach((e=>{const t=e.getAttribute("title");var n,i;t&&e.shadowRoot&&(null===(n=(i=e.shadowRoot).querySelector)||void 0===n||null===(n=n.call(i,"button"))||void 0===n||n.setAttribute("title",t))}))}))})),!0}toggleUndoToast(e){(e||"undo"!==this.currentToastTag)&&this.toastContainer&&this.updateToastContainer()?(this.isActionMenuOpen=!1,this.undoToast=this.generateUndoToastProps(),ci.u.addElement(this.toastContainer),this.currentToastTag="undo",_t(this.toastExpirationTimerHost,this.undoToast.notificationDurationMs,this.closeToast),window.setTimeout((()=>{this.undoButton.focus()}),100)):this.closeToast(),(0,Ee.Gg)(Ee.tk.toast,"undo"===this.currentToastTag)}togglePinToast(e={toastText:this.strings.pinToTaskBarConfirmationMessage}){"pin"!==this.currentToastTag&&this.toastContainer&&this.updateToastContainer()?(this.isActionMenuOpen=!1,this.pinToast=this.generatePinToastProps(e),ci.u.addElement(this.toastContainer),this.currentToastTag="pin",_t(this.toastExpirationTimerHost,this.pinToast.notificationDurationMs,this.closeToast)):this.closeToast(),(0,Ee.Gg)(Ee.tk.toast,this.isPinToastOpen)}toggleInstallingWebAppToast(){"installing-web-app"!==this.currentToastTag&&this.toastContainer&&this.updateToastContainer()?(this.isActionMenuOpen=!1,this.installingWebAppToastProps=this.generateInstallingWebAppToastProps(),ci.u.addElement(this.toastContainer),this.currentToastTag="installing-web-app",_t(this.toastExpirationTimerHost,null,(()=>{}))):this.closeToast(),(0,Ee.Gg)(Ee.tk.toast,"installing-web-app"===this.currentToastTag)}toggleErrorInstallingWebAppToast(){"error-installing-web-app"!==this.currentToastTag&&this.toastContainer&&this.updateToastContainer()?(this.isActionMenuOpen=!1,this.errorInstallingWebAppToastProps=this.generateErrorInstallingWebAppToastProps(),ci.u.addElement(this.toastContainer),this.currentToastTag="error-installing-web-app",_t(this.toastExpirationTimerHost,this.errorInstallingWebAppToastProps.notificationDurationMs,this.closeToast)):this.closeToast(),(0,Ee.Gg)(Ee.tk.toast,"error-installing-web-app"===this.currentToastTag)}toggleOpenWebAppToast(e,t){"open-web-app"!==this.currentToastTag&&this.updateToastContainer()?(this.isActionMenuOpen=!1,this.openWebAppToastProps=this.generateOpenWebAppToastProps(e,t),ci.u.addElement(this.toastContainer),this.currentToastTag="open-web-app",_t(this.toastExpirationTimerHost,this.openWebAppToastProps.notificationDurationMs,this.closeToast)):this.closeToast(),(0,Ee.Gg)(Ee.tk.toast,"open-web-app"===this.currentToastTag)}async waitForSelectedQuickLinksReady(){const e=new Fe.o,t=n=>{n.isLoadCompleted&&n.selectedQuickLinksDisplaySetting&&((0,nn.q1)(Be.z.ChromiumPageSettings,t),e.set())};(0,nn.Uo)(Be.z.ChromiumPageSettings,t),await e.getResultAsync()}initializeTopSitesState(){this.sitesClassName="expanded-sites",this.topSitesTelemetryContext=(e=>{if(!e)return;const t=je.uH.TopSites,n=e.addOrUpdateChild({name:ft,behavior:je.wu.Add,content:{headline:It.addSite,type:t},overrideDestinationUrl:Et}),i={name:vt,type:je.wu.View,content:{headline:It.container,type:je.uH.TopSites},action:je.Aw.View,overrideDestinationUrl:Et};return{topSitePlaceHolderAddSite:n,topSiteCommon:new Ke.D(i),saveAdd:e.addOrUpdateChild({name:`${vt}_${mt}_${pt}`,behavior:je.wu.Save,content:{headline:It.add,type:t},overrideDestinationUrl:Et}),cancelAdd:e.addOrUpdateChild({name:`${vt}_${mt}_${lt}`,behavior:je.wu.Cancel,content:{headline:It.cancel,type:t},overrideDestinationUrl:Et}),closeAddDialog:e.addOrUpdateChild({name:`${vt}_${mt}_${dt}`,behavior:je.wu.Close,content:{headline:It.close,type:t},overrideDestinationUrl:Et}),clickCarouselNextButton:e.addOrUpdateChild({name:`${vt}_${kt}_${Pt}`,behavior:je.wu.Click,content:{headline:It.carouselClick,type:t},overrideDestinationUrl:Et}),clickCarouselPreButton:e.addOrUpdateChild({name:`${vt}_${kt}_${At}`,behavior:je.wu.Click,content:{headline:It.carouselClick,type:t},overrideDestinationUrl:Et})}})(this.telemetryObject),this.topSiteActionTelemetryContext=(e=>{if(!e)return;const t=je.uH.TopSites;return{removeTopSite:e.addOrUpdateChild({name:`${st}`,behavior:je.wu.Remove,content:{headline:`${It.remove} ${It.tsn}`,type:t},overrideDestinationUrl:Et}),undoRemoveTopSite:e.addOrUpdateChild({name:`${at}_${ct}`,behavior:je.wu.UndoRemove,content:{headline:`${It.undoRemove} ${It.tsn}`,type:t},overrideDestinationUrl:Et}),closeRemoveToast:e.addOrUpdateChild({name:`${at}_${dt}`,behavior:je.wu.Close,content:{headline:It.close,type:t},overrideDestinationUrl:Et}),editDialog:e.addOrUpdateChild({name:`${vt}_${ut}`,behavior:je.wu.Rename,content:{headline:`${It.rename} ${It.tsn}`,type:t},overrideDestinationUrl:Et}),closeEditDialog:e.addOrUpdateChild({name:`${vt}_${gt}_${dt}`,behavior:je.wu.Close,content:{headline:It.close,type:t},overrideDestinationUrl:Et}),saveEdit:e.addOrUpdateChild({name:`${vt}_${gt}_${pt}`,behavior:je.wu.Save,content:{headline:It.save,type:t},overrideDestinationUrl:Et}),cancelEdit:e.addOrUpdateChild({name:`${vt}_${gt}_${lt}`,behavior:je.wu.Cancel,content:{headline:It.cancel,type:t},overrideDestinationUrl:Et}),turnOnPreview:e.addOrUpdateChild({name:`${vt}_${yt}`,behavior:je.wu.TurnOn,content:{headline:It.turnOnPreview,type:t},overrideDestinationUrl:Et}),turnOffPreview:e.addOrUpdateChild({name:`${vt}_${St}`,behavior:je.wu.TurnOff,content:{headline:It.turnOffPreview,type:t},overrideDestinationUrl:Et}),pinningTopSite:e.addOrUpdateChild({name:`${vt}_${Ct}`,behavior:je.wu.Pin,content:{headline:It.topsiteTaskbarpin,type:t},overrideDestinationUrl:Et}),pinningTopSiteInQuickLinks:e.addOrUpdateChild({name:`${vt}_${bt}`,behavior:je.wu.Pin,content:{headline:It.pin,type:t},overrideDestinationUrl:Et})}})(this.telemetryObject),this.topSiteCommonTelemetryTag=this.topSitesTelemetryContext&&this.topSitesTelemetryContext.topSiteCommon&&this.topSitesTelemetryContext.topSiteCommon.getMetadataTag()}ShowPinningWizardCampaign(){Ue.MN.notifyTriggerEvent(Ue.j0.NTP_TOP_SITES_CLICK).then((e=>{e&&!e.success&&(0,Ve.H)($e.Qc1,"TopSitesEdgeNextWC: "+e.Message)})).catch((e=>{(0,Ve.OO)(e,$e.Qc1,"TopSitesEdgeNextWC: Failed to call window.chrome.edgeNurturingPrivate.NotifyTriggerEvent chromium API")}))}reRenderTopsite(e=!1){const t=this.getCurrentLayoutConfig();this.maxTiles=t.tile,this.extraAddedSitesClassName=t.class,e?this.getOrUpdateTopSites():this.renderTopsite()}renderTopsite(){window.requestAnimationFrame((()=>{window.setTimeout((()=>{this.getOrUpdateTopSites()}),0)}))}zeroTopSitesErrorHandler(){(0,Ve.H)($e.xKE,"Zero top sites returned")}initializeDragDropService(){this.dragDropService=new ti(this,{container:this.topSitesContainerPromise,disableDragDrop:!this.config.draggable}),this.dragDropService.initializeService()}shouldDropTopSite(e){const t=0==e.url.indexOf("http://")?e.url.replace("http://","https://"):e.url,n=this.config.blockedDomains||W;if(n)for(let e=0;e<n.length;e++){const i=n[e];if(t.startsWith(i.url)&&(!i.exc||!i.exc.find((e=>t.includes(e)))))return!0}return!1}removeBlockedSites(e){return e?e.filter((e=>{if(0==e.tileSource){if(this.shouldDropTopSite(e))return ze.M0.addOrUpdateTmplProperty("RemSE","1"),!1;if(this.config.enableAffiliateOverride&&this.config.affiliateLinkOverrides)return!Object.values(this.config.affiliateLinkOverrides).includes(e.url)}return!0})):null}getTileSource(e,t){return e?t?-7:-6:t?-8:-5}updateAffiliateAutoAppendTileSource(e){const{topSitesAffiliates:t}=this.config;e.forEach((e=>{const n=new ge(e.url);t[n.domain]&&"/"!==t[n.domain]&&0==e.tileSource&&(e.tileSource=2,e.isSponsored=!0)}))}processAffiliateLinksForWindowsIndexer(e){const{topSitesAffiliates:t}=this.config,n={key:"affiliate",value:Object.entries(t).map((e=>({url:"https://"+e[0]+e[1]})))};e.push(n)}getOverrideIconList(){const e=[];if(this.config.overrideIconsList&&this.config.overrideIconsList.length>0)for(const t of this.config.overrideIconsList)e.push(t);return e}focusedAndNotAlways(){const{selectedFeedDisplaySetting:e,currentBackgroundImageType:t}=this.chromiumPageSettingState;return["peek","headingsonly","off"].includes(e)&&"off"===t}topsiteItemContainerTelemetry(){if(this.isActionMenuOpen&&this.activeTopSiteItem)return this.activeTopSiteItem.anchorTelemetryTag}actionsMenuTelemetry(){if(this.isActionMenuOpen&&this.activeTopSiteItem){const e=this.topSites.findIndex((e=>e.url===this.activeTopSiteItem.url));if(e>=0)return function(e,t){return e.addOrUpdateChild({name:`${Tt}_${t}`,behavior:je.wu.Show,content:{headline:It.ActionMenu,type:je.uH.TopSites},overrideDestinationUrl:Et})}(this.telemetryObject,e+1).getMetadataTag()}}preventClickOnTopSite(e){null==e||e.preventDefault()}getTopSiteTemplateUrl(e){return e.url}processWindowsIndexerFeatureStatus(){var e;if(!this.pageSettingsConnector||!this.chromiumPageSettingState)return;const t=this.pageSettingsConnector.isPromotedTopSitesPreferenceAvailable(),n=null===(e=this.chromiumPageSettingState.configData)||void 0===e||null===(e=e.enabledFeatures)||void 0===e?void 0:e.includes("msPromotedLinksInWindowsIndexer");this.isWindowsIndexerFeatureActive=t&&n}processMinimumVisitAffiliateFeatureState(){var e;if(!this.pageSettingsConnector||!this.chromiumPageSettingState)return;const t=this.pageSettingsConnector.isMinimumVisitAffiliateSitesPreferenceAvailable(),n=null===(e=this.chromiumPageSettingState.configData)||void 0===e||null===(e=e.enabledFeatures)||void 0===e?void 0:e.includes("msAffiliateSitesMinVisitCountReduction");this.isMinVisitAffiliateSitesFeatureActive=t&&n}processWindowsIndexerPromotedSites(e){this.config.enableIndexerPrefTest&&We.U.savePreferenceSetting(Ae._9.windowsIndexerPromotedTopSites,e),this.isWindowsIndexerFeatureActive&&this.ntpSettingsPrivateApiHandle.setPref(Ae._9.windowsIndexerPromotedTopSites,e)}showWebAppInstall(){if(!this.activeTopSiteItem)return!1;const e=sn(this.activeTopSiteItem.url);var t,n;return!(this.activeTopSiteItem.isSponsored||!e||N.includes(e.host))&&(null!==(t=window)&&void 0!==t&&null!==(t=t.chrome)&&void 0!==t&&null!==(t=t.ntpSettingsPrivate)&&void 0!==t&&null!==(t=t.NTPTrigger)&&void 0!==t&&t.INSTALLABLE_TOP_SITE_CONTEXT_MENU_OPENED&&(0,He.w$)("INSTALLABLE_TOP_SITE_CONTEXT_MENU_OPENED"),this.enableWebAppsOnNTP&&(null===(n=window)||void 0===n||null===(n=n.chrome)||void 0===n?void 0:n.edgeWebAppsPrivate))}persistMinVisitAffiliateInfo(){const e=[];let t=!1;this.config&&this.config.topSitesAffiliates&&(t=!0,this.parseAffiliateAutoAppendSites(e)),this.config&&this.config.enableAffiliateOverride&&this.config.affiliateLinkOverrides&&(t=!0,this.parseAffiliateOverrideSites(e)),t&&this.ntpSettingsPrivateApiHandle&&this.ntpSettingsPrivateApiHandle.setPref&&this.ntpSettingsPrivateApiHandle.setPref(Ae._9.minVisitAffiliateSites,e)}parseAffiliateAutoAppendSites(e){const{topSitesAffiliates:t}=this.config;Object.entries(t).forEach((t=>{if(!t[0]||!t[1]||"/"===t[1])return;const n={domainAndMaybePath:"https://"+t[0]+"/",url:"https://"+t[0]+t[1]};e.push(n)}))}parseAffiliateOverrideSites(e){const{affiliateLinkOverrides:t}=this.config;Object.entries(t).forEach((t=>{if(!t[0]||!t[1]||"/"===t[1])return;const n={domainAndMaybePath:"https://"+t[0]+"/",url:t[1]};e.push(n)}))}scrollToPosition(){this.ref_stripe&&this.ref_stripe.scrollToPosition(this.scrollDirection*this.widthPerPage*this.carouselPageIndex)}onFlipperClick(e){const t=this.carouselPageIndex+(e?this.carouselColsPerSlide:-this.carouselColsPerSlide);this.carouselPageIndex=Math.max(0,t),this.scrollToPosition()}}(0,u.gn)([Rt.LO],fi.prototype,"isLowEndDevice",void 0),(0,u.gn)([Rt.LO],fi.prototype,"linkTarget",void 0),(0,u.gn)([Rt.LO],fi.prototype,"ref_stripe",void 0),(0,u.gn)([Rt.LO],fi.prototype,"enableQuickBrief",void 0),(0,u.gn)([Rt.LO],fi.prototype,"carouselProps",void 0),(0,u.gn)([(0,Dt.Lj)({mode:"boolean"})],fi.prototype,"quickBriefVisible",void 0),(0,u.gn)([Rt.lk],fi.prototype,"shouldHidePlaceholders",null),(0,u.gn)([Rt.LO],fi.prototype,"actionsMenuProps",void 0),(0,u.gn)([Rt.LO],fi.prototype,"activeTopSiteItem",void 0),(0,u.gn)([Rt.LO],fi.prototype,"activeTopSiteElement",void 0),(0,u.gn)([Rt.LO],fi.prototype,"activeTopSitePlaceholderElement",void 0),(0,u.gn)([Rt.LO],fi.prototype,"activeContextMenuButtonElement",void 0),(0,u.gn)([Rt.LO],fi.prototype,"maxTiles",void 0),(0,u.gn)([Rt.LO],fi.prototype,"chromiumPageSettingState",void 0),(0,u.gn)([(0,Dt.Lj)({mode:"boolean"})],fi.prototype,"needDarkThemeIcons",void 0),(0,u.gn)([Rt.lk],fi.prototype,"className",null),(0,u.gn)([Rt.LO],fi.prototype,"extraAddedSitesClassName",void 0),(0,u.gn)([Rt.LO],fi.prototype,"currentTilesNumber",void 0),(0,u.gn)([(0,Dt.Lj)({mode:"boolean"})],fi.prototype,"showFullPageBlur",void 0),(0,u.gn)([Rt.LO],fi.prototype,"userSelectedSetting",void 0),(0,u.gn)([Rt.LO],fi.prototype,"enableWebAppsOnNTP",void 0),(0,u.gn)([Rt.LO],fi.prototype,"isAddDialogOpen",void 0),(0,u.gn)([Rt.LO],fi.prototype,"isActionMenuOpen",void 0),(0,u.gn)([Rt.LO],fi.prototype,"isEditDialogOpen",void 0),(0,u.gn)([Rt.LO],fi.prototype,"isUndoToastOpen",void 0),(0,u.gn)([Rt.LO],fi.prototype,"isPinToastOpen",void 0),(0,u.gn)([Rt.LO],fi.prototype,"isLtr",void 0),(0,u.gn)([Rt.LO],fi.prototype,"ntpApiHandle",void 0),(0,u.gn)([Rt.LO],fi.prototype,"sitesClassName",void 0),(0,u.gn)([Rt.LO],fi.prototype,"topSiteAddDialog",void 0),(0,u.gn)([Rt.LO],fi.prototype,"topSiteEditDialog",void 0),(0,u.gn)([Rt.LO],fi.prototype,"topSiteMapper",void 0),(0,u.gn)([Rt.LO],fi.prototype,"topSites",void 0),(0,u.gn)([Rt.LO],fi.prototype,"topSitesPlaceHolders",void 0),(0,u.gn)([Rt.LO],fi.prototype,"currentToastTag",void 0),(0,u.gn)([Rt.LO],fi.prototype,"undoToast",void 0),(0,u.gn)([Rt.LO],fi.prototype,"pinToast",void 0),(0,u.gn)([Rt.LO],fi.prototype,"installingWebAppToastProps",void 0),(0,u.gn)([Rt.LO],fi.prototype,"errorInstallingWebAppToastProps",void 0),(0,u.gn)([Rt.LO],fi.prototype,"openWebAppToastProps",void 0),(0,u.gn)([Dt.Lj],fi.prototype,"selectedQuickLinksDisplaySetting",void 0),(0,u.gn)([(0,Dt.Lj)({mode:"boolean"})],fi.prototype,"quickLinksToggleSpacingForBanner",void 0),(0,u.gn)([Rt.LO],fi.prototype,"moveUpward",void 0),(0,u.gn)([Rt.LO],fi.prototype,"topSiteAddedSuccessfully",void 0),(0,u.gn)([Rt.LO],fi.prototype,"lastAddedTopSite",void 0),(0,u.gn)([Rt.LO],fi.prototype,"topSiteAddDialogContainerPosition",void 0),(0,u.gn)([Rt.LO],fi.prototype,"topSiteEditDialogContainerPosition",void 0),(0,u.gn)([Rt.LO],fi.prototype,"topSiteCommonTelemetryTag",void 0),(0,u.gn)([Rt.LO],fi.prototype,"renderTopSiteStartAndEnd",void 0),(0,u.gn)([Rt.lk],fi.prototype,"topSitesClassName",null),(0,u.gn)([Rt.lk],fi.prototype,"isInformationalLayout",null);var vi=n(69416),yi=n(33442),Si=n(92531),Ci=n(26512),wi=n(35680),bi=n(17993),Ti=n(42689),ki=n(22674),Pi=n(80260),Ai=n(27782),Ii=n(27460),Ei=n(38492),Mi=n(26738),xi=n(99809),Li=n(78923);const Ri=Li.i` .top-sites-responsive-pin-icon{flex-shrink:0;display:none;margin:0 5px}.top-sites .top-sites-responsive-pin-icon{line-height:26px}.top-sites .top-sites-responsive-pin-icon svg{width:14px;height:14px}`,Di=Li.i` .top-site-next{background-color:transparent;border-radius:4px;box-shadow:none;display:flex;height:var(--top-site-height,84px);justify-content:center;width:var(--top-site-width,108px);position:relative;border:calc(${Ci.H} * 1px) solid transparent}.top-site-next:hover:not(.uses-hover-title){background:var(--top-site-fill-hover,${wi.Xi})}.top-site-next.top-site-f3v1b:hover{background:unset}.top-site-next:has(.control:focus){outline:none;border-color:${bi.yG}}.top-site-next .control:focus{outline:none;border:none}.top-site-next .start,.top-site-next .end{position:absolute;top:var(--top-site-margin,9px);z-index:2;opacity:0}.top-site-next.small-top-sites.top-site-f3v1b .start{top:var(--top-site-action-top-position);left:var(--top-site-action-border-position)}.top-site-next.small-top-sites.top-site-f3v1b .end{top:var(--top-site-action-top-position);right:var(--top-site-action-border-position)}.top-site-next .pinned-top-site .start{pointer-events:none}.top-site-next:active .start,.top-site-next:active .end,.top-site-next:focus .start,.top-site-next:focus .end,.top-site-next:hover .start,.top-site-next:hover .end,.top-site-next:hover fluent-button,.top-site-next .start:active,.top-site-next .end:active,.top-site-next .start:focus-within,.top-site-next .end:focus-within{background:transparent;opacity:1;outline:none}.top-site-next .content-container{transition:all 0.2s ease-in-out;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;width:100%;height:100%;padding:10px 12px;border-radius:4px}.top-site-next .content-container.information-layout{padding:8px 10px;justify-content:center}.top-site-next .image{align-items:center;box-sizing:border-box;width:var(--top-site-black-plate-width,44px);height:var(--top-site-black-plate-height,44px);justify-content:center;display:flex}.top-site-next .image img{margin:0 auto;max-width:24px;height:24px}.top-site-next .title-container{display:flex;justify-content:center;margin:2px 0 0 0;width:100%}.top-site-next .control{box-sizing:content-box;color:var(--top-site-color,${Ti.C});font-family:inherit;font-size:12px;font-weight:400;line-height:16px;max-height:16px;max-width:100%;white-space:nowrap;overflow:hidden;padding:0;text-overflow:ellipsis;text-decoration:none}.top-site-next .control:after{bottom:0;content:"";height:100%;left:0;position:absolute;right:0;top:0;width:100%;z-index:1}.top-site-next .top-site-next-g{display:grid;gap:5px;align-items:center;grid-auto-flow:column}.top-site-next .pinned-container{display:flex;width:0;margin-inline-end:2px;flex-direction:row-reverse}.top-site-next .pinned-indicator{height:12px;width:12px;align-self:center;display:flex}.top-site-next .pinned-indicator-svg svg{width:12px;height:12px}.top-site-next.small-top-sites.information-layout.uses-hover-title{height:80px}.top-site-next.uses-hover-title .content-container{height:fit-content;justify-content:center;padding:4px 12px 0px}.top-site-next.uses-hover-title .title-container{margin:3px 0px 0px}.top-site-next.uses-hover-title .top-site-title{flex-direction:row-reverse}.top-site-next.uses-hover-title .top-site-title-text{display:-webkit-box;opacity:0;-webkit-line-clamp:2;-webkit-box-orient:vertical}.top-site-next.uses-hover-title:hover:not(.drag-chosen__no-hover) .top-site-title-text,.top-site-next.drag-chosen.uses-hover-title .top-site-title-text{opacity:1}.top-site-next.hide-title .top-site-title-text{opacity:0 !important}.top-site-next.uses-hover-title .control{height:34px;line-height:unset;max-height:34px;text-align:center;white-space:unset}.top-site-next.uses-hover-title msn-native-ad-ad-label{position:absolute;top:38px;margin-inline-start:44px}.top-site-next.uses-hover-title.top-site-f3v1b msn-native-ad-ad-label{top:28px}.sites msft-top-site-placeholder.uses-hover-title{height:44px !important;margin:0px 30px;top:4px;width:44px !important}.sites msft-top-site-placeholder.information-layout.uses-hover-title{margin:0px 28px}.top-site-next.uses-hover-title .badge{margin-inline-end:4px;margin-inline-start:0px;opacity:0}.top-site-next.uses-hover-title:hover .badge{opacity:1}.top-site-next.uses-hover-title.add-placeholder.top-site-f3v1b .title-container{height:34px}.top-site-next.uses-hover-title.add-placeholder.top-site-f3v1b .image-container{height:36px;display:flex;align-items:center}`,Fi=Li.i`
${(0,p.vW)(p.K$.c3,null)}{.move-upward.six-sites{--top-sites-grid-template-column:6}}${(0,p.vW)(p.K$.c3,null)}{.move-upward.nine-sites{--top-sites-grid-template-column:9}}.${B.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:4}${(0,p.vW)(p.K$.c2,null)}{.${B.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:5}}${(0,p.vW)(p.K$.c3,null)}{.${B.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:6}}${(0,p.vW)(p.K$.c4,null)}{.${B.feeds3T1SearchBoxWidth}{--top-sites-grid-template-column:9}}.${B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:4}${(0,p.vW)(p.K$.c2,null)}{.${B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:5}}${(0,p.vW)(p.K$.c3,null)}{.${B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:3}}${(0,p.vW)(p.K$.c4,null)}{.${B.feeds3T1SearchBoxWidthWithNotificationMiniCardEnabled}{--top-sites-grid-template-column:6}}`,Oi=Li.i``,Bi=Li.i`
msft-stripe .pre-fliper{position:absolute;left:-12px;top:calc(50% - 40px/2 - 1.5px);transform:rotate(0deg)}msft-stripe .next-fliper{position:absolute;right:-12px;top:calc(50% - 40px/2 - 1.5px);transform:rotate(180deg)}`,Ni=Li.i` msft-stripe .fliper{background:#3b3b3b;fill:#fff}msft-stripe .fliper:hover{background:#383838}`,_i=Li.i` .all-one-line-sites{padding:0 24px}.all-one-line-sites .top-sites{--top-site-column-gap:13px}msft-stripe{margin-right:11px;--scroll-fade-next:none;--scroll-fade-previous:none}msft-stripe.strip-with-quick-brief{padding-right:15px}msft-stripe .fliper{display:flex;align-items:center;justify-content:center;background-color:white;width:24px;height:40px;border-radius:4px;cursor:pointer;box-shadow:0px 0px 2px 0px rgba(0,0,0,0.12),0px 2px 4px 0px rgba(0,0,0,0.14)}msft-stripe .fliper svg{width:20px;height:20px}msft-stripe .pre-fliper{position:absolute;left:-33px;padding-left:16px;top:calc(50% - 54px/2 - 1.5px);transform:rotate(180deg);opacity:0;transition:all .5s}.all-one-line-sites:hover msft-stripe .pre-fliper{opacity:1}msft-stripe .next-fliper{position:absolute;right:-125px;padding-left:16px;top:calc(50% - 54px/2 - 1.5px);opacity:0;transition:all .5s}.all-one-line-sites:hover msft-stripe .next-fliper{display:block;opacity:1}msft-stripe.strip-with-opacity-flipper .pre-fliper,msft-stripe.strip-with-opacity-flipper .next-fliper{display:block;opacity:0.5}msft-stripe::part(scroll-prev),msft-stripe::part(scroll-next){z-index:99}msft-stripe::part(heading-container){margin:0}msft-stripe::part(scroll-view){max-width:181px}${(0,p.eH)(p.K$.c1)}{msft-stripe::part(scroll-view){max-width:181px}}${(0,p.eH)(p.K$.c2)}{msft-stripe::part(scroll-view){max-width:271px}}${(0,p.eH)(p.K$.c3)}{msft-stripe::part(scroll-view){max-width:365px}}${(0,p.eH)(p.K$.c4)}{msft-stripe::part(scroll-view){max-width:641px}}${(0,p.eH)(p.K$.c5)}{msft-stripe::part(scroll-view){max-width:641px}}.${B.carouselSites}{--top-sites-grid-template-column:20}${(0,p.vW)(p.K$.c1,null)}{.${B.carouselSites}{--top-sites-grid-template-column:20}}${(0,p.vW)(p.K$.c2,null)}{.${B.carouselSites}{--top-sites-grid-template-column:20}}${(0,p.vW)(p.K$.c3,null)}{.${B.carouselSites}{--top-sites-grid-template-column:20}}${(0,p.vW)(p.K$.c4,null)}{.${B.carouselSites}{--top-sites-grid-template-column:20}}`.withBehaviors(new ki.O(Oi,Bi),new xi.Y(null,Ni)),Ui=Li.i` :host{width:100%;--menu-max-width:210px;--menu-min-width:160px;--top-site-dialog-z-index:900}.long-width-menu{--menu-max-width:360px}msn-actions-menu::part(menu-region){z-index:700}.root{display:flex;background-color:transparent;flex-direction:row;justify-content:center;position:relative;transition:transform .3s ease-out;z-index:301;--top-site-margin:4px;--outline-width:2}.expanded-sites{opacity:1;visibility:inherit}.expanded-sites-large{opacity:1;visibility:inherit}.dot-separator{margin-left:2px;margin-right:2px;font-size:9px}msft-top-site-placeholder fluent-button::part(content){height:16px}.add-button{width:100%;height:100%}.add-button svg{width:16px;height:16px;pointer-events:none}.add-button span{display:none}.add-dialog-show{display:block}.add-dialog-hide{display:none}.sites{display:grid;grid-template-columns:repeat(var(--top-sites-grid-template-column,8),auto);transition:opacity 0.3s ease-out;row-gap:8px;overflow:hidden}.top-sites > .sites{row-gap:10px;column-gap:var(--top-site-column-gap);overflow:visible;transition:none}.sites .start-button,.sites .end-button{width:24px;height:24px;min-width:24px;display:flex;justify-content:center}.sites .end-button-medium{width:24px;height:24px;min-width:24px;display:flex;justify-content:center;margin-right:7px}.sites .end-button-large{width:24px;height:24px;min-width:24px;display:flex;justify-content:center;margin-right:7px;--top-site-color:${(0,Oe.Y)()?"#FFFFFF":"#000000"}}.sites .start-button:hover,.sites .end-button:hover{background:var(--top-site-action-icon-hover,${Pi.Qp})}.sites .option-icon{width:14px;height:14px}.sites path{fill:var(--top-site-color,${Ti.C})}@media screen and (-ms-high-contrast:active){.sites path{fill:currentColor}}.sites fluent-button{background:transparent}.suggestion-title{font-weight:600;font-size:${Ai.c};line-height:20px}.suggestion-body{margin-top:16px;display:flex}.suggestion-body msft-top-site,.suggestion-body .top-site-next{transition:all 0.2s ease-in-out;border-radius:4px;background:${Ii.s};box-shadow:0px 1.6px 3.6px rgb(0 0 0 / 13%),0px 0px 2.9px rgb(0 0 0 / 11%);cursor:default;width:104px}.suggestion-body .suggested-top-site{margin-inline-end:12px}.suggestion-body .suggested-top-site:last-child{margin-inline-end:0px}.suggestion-body msft-top-site:hover,.suggestion-body .top-site-next:hover{background:${Ii.s};box-shadow:0px 3.2px 7.2px rgb(0 0 0 / 13%),0px 0px 3.8px rgb(0 0 0 / 11%)}.suggestion-body .top-site-next .control{display:inline}.toast-root{position:absolute;left:50%;transform:translate(-50%,0);width:fit-content;max-width:95%;z-index:700;--fill-color:${(()=>{const e=(0,yi.$B)((()=>vi.m0))(Si.ZP);return(0,Oe.Y)()?vi.P5:e})()};--neutral-foreground-rest:${(()=>{const e=(0,yi.$B)((()=>vi.m0))(Si.ZP);return(0,Oe.Y)()?e:vi.P5})()};--accent-foreground-rest:${(0,Oe.Y)()?"#006CBE":"#63ADE5"};--toast-message-max-width:287px}msn-toast::part(toast-root){color:${Ti.C};background:${Ei.I}}.toast-close-button{background:transparent}.toast-navigation-button{margin-inline-start:4px;background:transparent;color:${Mi.go}}.toast-navigation-button-accent{margin-inline-start:4px;--design-unit:3.2;--control-corner-radius:4}.top-sites{position:relative;--top-site-backplate-color:rgba(255,255,255,0.8);--top-site-backplate-border-color:rgba(0,0,0,0.05);--top-site-pill-width:77px;--top-site-pill-height:58px;--top-site-column-gap:6px;--top-site-border-width:1px}.top-sites.top-site-s2tss{--top-site-pill-width:81px;--top-site-pill-height:62px}.top-sites > .sites{--top-site-pill-calculated-width:calc(var(--top-site-pill-width) + var(--top-site-border-width) * 2);max-width:calc(var(--top-site-pill-calculated-width) * var(--top-sites-grid-template-column) + var(--top-site-column-gap) * (var(--top-sites-grid-template-column) - 1));grid-template-columns:repeat(auto-fit,var(--top-site-pill-calculated-width))}@media (prefers-color-scheme:dark){.top-sites{--top-site-backplate-color:rgba(0,0,0,0.4)}}.topSitesLightOnBackgroundImage{--top-site-fill-hover:rgba(229,229,229,0.3);--top-site-color:#FFFFFF;--top-site-action-icon-hover:rgba(234,234,234,0.42);--top-site-placeholder-backplate-fill:rgba(229,229,229,0.7);--neutral-foreground-hint:rgba(255,255,255,0.54)}.topSitesDarkOnBackgroundImage{--top-site-fill-hover:rgba(66,66,66,0.4);--top-site-color:#FFFFFF;--top-site-action-icon-hover:rgba(36,36,36,0.42);--neutral-foreground-hint:rgba(255,255,255,0.54)}.topSitesDark{--top-site-fill-hover:rgba(0,0,0,0.3);--top-site-color:#FFFFFF;--top-site-placeholder-backplate-fill:transparent}.topSitesLight{--top-site-fill-hover:rgba(229,229,229,0.3);--top-site-color:rgba(0,0,0,0.83);--top-site-placeholder-backplate-fill:transparent}.with-back-plate path{fill:${Ti.C}}.top-site-next.drag-chosen:not(.top-site-f3v1b,.uses-hover-title){background:var(--top-site-fill-hover,var(--neutral-fill-hover))}.top-site-next.drag-chosen__no-hover{background:transparent !important}.top-site-next.drag-dragged{background:transparent}.top-site-next.small-top-sites{height:80px;width:104px}.top-site-next.small-top-sites.information-layout{height:75px;width:99px}msft-top-site::part(image),.top-site-next .image{background:${Ii.s};border-radius:4px}msft-top-site::part(image),.add-placeholder.top-site-f3v1b .image{background:transparent}msft-top-site::part(image),.add-placeholder.top-site-f3v1b .image.new-add-image{background:${Ii.s}}msft-top-site::part(imageMSB){background:#0078D4;border-radius:4px}.top-site-next.pill-top-site .image{box-shadow:0px 2px 4px rgb(0 0 0 / 10%);border-radius:12px}.top-site-next.pill-top-site fluent-button{border-radius:4px}.top-site-next.pill-top-site{border-radius:6px}.top-site-next.pinned-top-site .start{pointer-events:none}.top-site-next .control{padding:0;margin:0}.top-site-next .top-site-title{display:flex;justify-content:center;align-items:center}.top-site-next .top-site-title-large-tile{display:flex;justify-content:center;align-items:center;color:${(0,Oe.Y)()?"white":"black"};--top-site-color:${(0,Oe.Y)()?"white":"black"}}.top-site-next .top-site-title span{overflow:hidden;text-overflow:ellipsis}.top-site-next .top-site-title-large-tile a{overflow:hidden;text-overflow:ellipsis}.top-site-next .badge{padding:1px 5px;border-radius:12px;flex:none;min-width:16px;background-color:#EDEDED;color:#0078D4;margin-inline-start:4px;font-size:10px;line-height:13px;height:16px;font-weight:400;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;box-sizing:border-box;max-width:215px;transition:all 0.2s ease-in-out}.top-site-next.uses-hover-title .badge{display:none}.top-site-next.uses-hover-title:hover .badge{display:inline}msft-top-site-placeholder{height:88px}msft-top-site-placeholder.small-top-sites{height:84px}msft-top-site-placeholder.small-top-sites.information-layout{height:75px;width:99px}.top-site-next .top-site-shadow .top-site-title-text{text-shadow:black 1px 1px 1px}.top-site-next.small-top-sites.top-site-f3v1b{--top-site-black-plate-height:36px;--top-site-black-plate-width:36px;--top-site-hover-backplate-width:90px;--top-site-hover-backplate-height:78px;--top-site-action-icon-hover:rgba(0,0,0,0.05);--top-site-action-top-position:-5px;--top-site-action-border-position:-4px;--top-site-anchor-left-fix:-10px;--top-site-fill-hover:transparent;width:var(--top-site-pill-width);height:var(--top-site-pill-height)}.top-site-next.small-top-sites.top-site-f3v1b.top-site-s2ts{--top-site-black-plate-height:40px;--top-site-black-plate-width:40px;--top-site-action-border-position:-6px}.top-site-next.small-top-sites.top-site-f3v1b .image svg{--top-site-color:#FFFFFF}.top-site-next.small-top-sites.top-site-f3v1b .image.new-add-image svg{--top-site-color:#242424}@media (prefers-color-scheme:light){.top-site-next.small-top-sites.top-site-f3v1b .image svg{--top-site-fill-hover:#FFFFFF}.top-site-next.small-top-sites.top-site-f3v1b .image.new-add-image svg{--top-site-color:#242424}}@media (prefers-color-scheme:dark){.top-site-next.small-top-sites.top-site-f3v1b .image svg{--top-site-color:#FFFFFF}.top-site-next.small-top-sites.top-site-f3v1b .image.new-add-image svg{--top-site-color:#ADADAD}.top-site-next.small-top-sites.top-site-f3v1b{--top-site-action-icon-hover:rgba(255,255,255,0.05)}}.top-site-next.small-top-sites.top-site-f3v1b::before{transition:all 0.5s ease-in-out}.top-site-next.small-top-sites.top-site-f3v1b .content-container{padding:0}.top-site-next.small-top-sites.top-site-f3v1b .content-container{justify-content:center}.top-site-next.small-top-sites.top-site-f3v1b .image img{max-width:24px;height:24px}.top-site-next.small-top-sites.top-site-f3v1b .image svg{width:20px;height:20px}.top-site-next.small-top-sites.top-site-f3v1b .image.new-add-image svg{width:15px;height:15px}@media (max-width:1097px){:host{--top-sites-grid-template-column:4}.ten-sites{--top-sites-grid-template-column:5}.eight-sites{--top-sites-grid-template-column:8}.six-sites{--top-sites-grid-template-column:3}}@media (min-width:1098px){:host{--top-sites-grid-template-column:8}.ten-sites{--top-sites-grid-template-column:10}.expanded-sites{min-height:90px}.expanded-sites.information-layout{min-height:75px}.expanded-sites-large{min-height:72.9px}}.top-sites > .expanded-sites{min-height:unset}.top-site-add-success{position:absolute;top:40px;left:-10000px}.pinned-indicator{width:12px;height:12px}#dismissButtonId{margin-top:1px}.topsite-info{float:inline-end}.top-site-next .start{inset-inline-start:var(--top-site-margin,9px)}.top-site-next .end{inset-inline-end:var(--top-site-margin,9px)}msn-actions-menu::part(icon-img){width:20px}.install-web-app-toast-progress::part(progress){background-color:${Pi.jq}}${Fi} ${Ri} ${Di} ${_i}
`,Wi=Ui,Hi={experienceConfigSchema:undefined};i.D.define(r.H.registry),o.D.define(r.H.registry),d.tH.define(l.j.registry)},82634:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});const i=["/ads-prebid.js","/istripper.js","/javascript/fropo.js","/nb/f_ls.js","/prebid-add.js","/prebid-ads/adsensebase.js","/prebid-article-ad-ad-300x250.js","/reclama/ads.js","/safu/safu.js","/wp-content/plugins/wp-banners/js/wp-banners.js","/zlk/zlk.js"],r=["/adex.js","/adgpt.js","/ados.js","/ads/stickyLb.js","/ane-popup-banner/ane-popup-banner.js","/ane-preroll/preroll.js","/arcads.js","/awe2.js","/clever_ads.js","/cnads.js","/dfp/dc.js","/doublepimp2.js","/eureka/eureka.js","/exopopunderdesktop.js","/expop.js","/fload.js","/fro_lo.js","/frontend_loader.js","/gpt.min.js","/invoke-2.js","/js/m/i-def.js","/js/youmuffpu.js","/js3caf.js","/kampyle.js","/keyade.js","/lib/ad.js","/markpop.js","/moatsdk.min.js","/nugg.min.js","/nwm-fcn.min.js","/nwm-pw2.min.js","/p8network.js","/popu.js","/popup2.js","/popup3.js","/punder.js","/pustrck.js","/scripts/chatur.js","/soralink.js","/suv4.js","/taboola_ads.js","/tardisrocinante/austin.js","/utep_ad.js","/weborama.js","/wp-content/plugins/bhcb/lock.js","/xpopup.js","/_adverts.js","/_rebid.js","/cmbdv2.js","/push-skin/skin.min.js","/pop2.js","/banger.js","/detroitchicago/anaheim.js","/detroitchicago/boise.js","/detroitchicago/houston.js","/detroitchicago/memphis.js","/detroitchicago/minneapolis.js","/detroitchicago/raleigh.js","/detroitchicago/rochester.js","/detroitchicago/tampa.js","/_js/prbd_6.19.0.js","/prebid14.js","/prebid_ver.js","/pubfig.js","/pubfig.min.js","/_prebid.js","/~Prebid.js","/datomata.widget.js","/abtest_ab.js","/adb.min.js","/adblock-relief.js","/blockblock/blockblock.jquery.js","/fuckadb.js"];var o=n(95651),a=n.n(o),s=n(21789);class c{Impacts(){const e=this.GetConfig();return new Promise(function(t,n){const i=[this.CheckLoadStatus(e.EasyList),this.CheckLoadStatus(e.UboSpecial),this.CheckLoadStatus(e.Param)];Promise.all(i).then((e=>{t(e[0]||e[1]||e[2])})).catch((e=>{n(e)}))}.bind(this))}CheckLoadStatus(e){const t=document.createElement("script");t.src=e.urls,document.body.appendChild(t);return(async(e,t)=>{const n=new Promise(((t,n)=>{setTimeout(t,e,!1)}));return Promise.race([t,n])})(500,new Promise((function(n,i){t.onload=function(){document.getElementById(e.id)?n(!1):n(!0)},t.onerror=function(){n(!0)}})))}GetConfig(){const e=`${(0,s.Yq)().StaticsUrl}latest/adboxes`,t=this.Sample(r),n=this.Sample(i),o=this.Sample(r);return{UboSpecial:{urls:e+"/ubo"+n,id:btoa(n)},EasyList:{urls:e+"/egb"+t,id:btoa(t)},Param:{urls:e+"/general.js?"+o,id:btoa(o)}}}Sample(e){return e[Math.floor(Math.random()*e.length)]}}var d=new class{constructor(){this.adbTime=0,this.getAdbStatus=()=>(this.hasAdbStatus||(this.adbStatus=this.checkAdbStatus(),this.hasAdbStatus=!0),this.adbStatus),this.getAdbLoggedTime=()=>{const e=a().get("AlgoRes");return e&&"ABD=V=0"!=e&&(this.adbTime=Number(e.split("=")[2])),this.adbTime},this.executeDetector=async()=>{const e=new c,t=await e.Impacts();this.setCookie(t)},this.appendAdbStatusToUrl=e=>{if(!e||0===e.length||!this.getAdbStatus())return e;const t=new URL(e),n=t.searchParams.get("rlink");if(!n)return e;const i=decodeURIComponent(n);if(!(i.includes("www.bing.com/aclick?ld=")||i.includes("www.bing.com/ac?ld=")||i.includes("www.bing.com/ck?ld=")||i.includes("www.bing.com/ack?ld=")||i.includes("www.bing.com/clk?ld=")||i.includes("www.bing.com/aclk?ld=")||i.includes("www.bing.com/click?ld=")))return e;const r=n.concat("&adb=1");return t.searchParams.set("rlink",r),t.toString()},this.checkAdbStatus=()=>{const e=a().get("AlgoRes");return!(!e||"ABD=V=0"===e)},this.setCookie=e=>{if(e){const e=(new Date).getTime();a().set("AlgoRes",`ABD=V=${e}`,{expires:30})}else a().set("AlgoRes","ABD=V=0",{expires:30})}}}},46058:function(e,t,n){"use strict";n.d(t,{A:function(){return f}});n(34757);var i=n(13334);const r="undefined"!=typeof window?function(){const e={positions:[],beacons:{},clickBeacons:{},elements:{},timer:null,watch:null,paused:!1,supportsIO:!(window.location.search.indexOf("useLegacyTracking=1")>-1)&&"IntersectionObserver"in window,viewedBeaconHistory:new Set},t="background: #fff; border-radius: 2px; color: #5f6a96; padding: 4px;";let n=!1;window&&(n=window.location.search.toLowerCase().indexOf("debug=1",0)>-1);const i=function(e){"NOT_PROVIDED"!==e&&((new Image).src=e)},o=function(t){const n=e.clickBeacons[t]||[];if(n.length)for(let e=0,t=n.length;e<t;e++)i(n[e])},a=function(e,t){const n=(new Date).getTime()/1e3|0,i=Math.floor(9007199254740990*Math.random()),r=t&&t.index||0;return e.replace("$(AD_POSN)",encodeURIComponent("pp=m,pi="+r)).replace("{REQUEST_ID}",i).replace("[timestamp]",n).replace("[CACHEBUSTER]",n).replace("[RANDOM_NUMBER]",i)},s=function(e,t,n){const i=function(e,t){const n=t+1,i=Math.floor(e.width/n),r=Math.floor(e.height/n),o=Math.max(0,e.left),a=e.top,s=[];for(let e=1;e<n;e++){const t=o+i*e;for(let e=1;e<n;e++){const n=a+r*e;s[s.length]=[t,n]}}return s}(t,10);let r=0;for(let t=0,n=i.length;t<n;t++){const n=i[t][0],o=i[t][1];c(e,n,o)||r++}const o=100*n;return!(100-r/i.length*100>=o)},c=(e,t,n)=>{if(!!e.shadowRoot){const i=e.shadowRoot.elementFromPoint(t,n);return e.shadowRoot.contains(i)||e.contains(i)}const i=document.elementFromPoint(t,n);return!(!i||"MSFT-FEED-LAYOUT"!==i.tagName.toUpperCase()&&"VIEWS-NATIVE-AD"!==i.tagName.toUpperCase()&&"EDGE-CHROMIUM-PAGE"!==i.tagName.toUpperCase())},d=function(e,t){const n=function(){const e=document,t=window,n=e.body,i=e.documentElement;return{height:t.innerHeight||i.clientHeight||n&&n.clientHeight,width:t.innerWidth||i.clientWidth||n&&n.clientWidth}}(),i=e.getBoundingClientRect(),r=Math.max(0,Math.min(i.bottom,n.height)-Math.max(i.top,0)),o=Math.max(0,Math.min(i.right,n.width)-Math.max(i.left,0)),a=r/(i.height||e.offsetHeight)||0,c=o/(i.width||e.offsetWidth)||0;return!window.disableObstructionDetection&&window.addEventListener&&s(e,i,t)?0:Math.max(0,a+c-1)},l=function(e,t,n){return window.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},u=function(){const i=e.positions.length;for(let r=0;r<i;r++){const i=e.positions[r];if(!e.paused&&i){const a=i.uid,s=i.node;if(!s)continue;if(e.elements[a]||(e.elements[a]=s,e.clickBeacons[a]&&l(s,"click",(function(){o(a)}))),d(s,i.threshold)<i.threshold)i.history=null;else{i.history||(i.history=Date.now(),n&&console.log("%c[ Gemini: Started - "+i.history+" ]",t));const o=(Date.now()-i.history)/1e3;if(n&&console.log("%c[ Gemini: Tracking - "+o+" ]",t),o>=i.duration&&(n&&console.log("%c[ Gemini: Tracking - "+o+" ]",t),i.timer&&(clearInterval(i.timer),i.timer=null),i.observer&&i.observer.unobserve(s),e.viewedBeaconHistory.has(i.uid)||(e.viewedBeaconHistory.add(i.uid),i.callback(i)),i.history=Date.now(),e.positions.splice(r,1),r-=1,!e.positions.length)){n&&console.log("%c[ Gemini: Finished - "+i.history+" ]","background: #eb2e2e; border-radius: 2px; color: #fff; padding: 4px;"),e.timer&&(clearInterval(e.timer),e.timer=null);break}}}}},p=function(e){const t=e.node;if(!e.observer){const n=new IntersectionObserver((function(t){return function(t){const n=t[t.length-1];n.isIntersecting?n.isIntersecting&&!e.timer&&(e.timer=setInterval(u,150)):(clearInterval(e.timer),e.timer=null,e.history=null)}(t)}),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]});n.observe(t),e.observer=n}},h=function(t,o,s,c,d,l){const u=s.a,h=s.c,g=s.d,m=s.p,f=s.t,v=e.beacons,y=e.positions,S=m/100;v[t]||(v[t]={});v[t][o]={urls:c,threshold:S,duration:g,type:f,consecutive:h,audio:u};const C={uid:t,threshold:S,duration:g,consecutive:h,audio:u,callback:function(){const e=v[t][o],s=e.urls,c=s.length,d=r.beaconCallback;for(let r=0;r<c;r++){const c=s[r];i(a(c,l)),"function"==typeof d&&d(v[t][o],t,o,c),n&&console.log("%c[ Gemini: $$$$ ]\n"+JSON.stringify({url:c,rule:o,threshold:e.threshold,duration:e.duration,consecutive:e.consecutive},null,2),"background: #5c71d9; border-radius: 2px; color: #fff; padding: 4px;")}},node:d,history:null};y.push(C),e.supportsIO&&p(C)},g=function(t,n,i){const r=n.rules,o=r.viewabilityDefStatic,a=r.viewabilityDefStatic3P,s=n.tag,c=s.clickTrackingUrl,d=s.imprTrackingUrl,l=s.imprTrackingUrls,u=n.actionUrls,p=n.beacon;if(u&&u.PARTIAL_VIEW){const e=u.PARTIAL_VIEW;h(t,"viewabilityDefStaticPartial",{p:.01,d:0,t:21},e,i,n)}if(o||p||u&&u.IMPR_INTERNAL){const e="viewabilityDefStatic",r=o||{c:1,d:1,p:50};let a=[];p&&p.length&&a.push(p),u&&u.IMPR_INTERNAL&&(a=a.concat(u.IMPR_INTERNAL)),l&&l.length?a=a.concat(l):d&&(d instanceof Array?a=a.concat(d):a.push(d)),h(t,e,r,a,i,n)}if(a&&u&&u.STATIC_VIEW_3P){const e=a.length;for(let r=0;r<e;r++){const e=u.STATIC_VIEW_3P.slice(),o=a[r],s="viewabilityDefStatic3P:"+r,c=a[r].t;for(let t=0,n=e.length;t<n;t++)e[t]=(g=e[t],m=c,g.replace("$(S_VIEW_TYPE)",m));h(t,s,o,e,i,n)}}var g,m;let f=[];u&&u.CLICK_INTERNAL&&(f=f.concat(u.CLICK_INTERNAL)),c&&c.length&&(f=f.concat(c)),e.clickBeacons[t]=f},m=function(e,t){const n=e.ads,i=e.section.id,r=n.length;for(let e=0;e<r;e++){const r=n[e],o=r.customId||"gemini-"+i+"-"+(r.creativeId||r.demandSourceCreativeId||r.dynamicProductAdId||0)+"-"+r.index,a=t;r.tag="string"==typeof r.tag?JSON.parse(r.tag):r.tag,r.beacon=r.beacon.replace("$(AD_POSN)",encodeURIComponent("pp=m,pi="+r.index)),g(o,r,a)}},f=function(t,i){const r=t instanceof Array;if(!t||r&&!t.length||t&&"object"!=typeof t)return;t&&!r&&(t=[t]);const o=t.length;for(let e=0;e<o;e++){const n=t[e],r=n.sectionads;if(r)for(let e=0;e<r.length;e++)m(r[e],i);else m(n,i)}return"IntersectionObserver"in window||e.timer||(n&&console.log("%c[ Gemini: Start Watching ]","background: #55ae3f; border-radius: 2px; color: #fff; padding: 4px;"),e.timer=setInterval(u,150)),this};return window.Gemini=f,"hidden"in document&&document.addEventListener("visibilitychange",(function(){return e.paused=document.hidden})),f.version="2.0",f}():null;var o,a=n(76733),s=n(88826),c=n(7476),d=n(61633),l=n(45069),u=n(50462),p=n(31558),h=n(78672),g=n(23549),m=n(70280);class f{constructor(e){this.config=e,this.visiJsonTrackingData=new Map,this.userActionLog=new l.Km,this.beaconsProcessed=new Map,this.currentVideoDom=new Map,this.onObserve=(e,t)=>(n,i)=>{n&&n.forEach((n=>{a.k.logCallback((()=>"IntersectionRatio: "+n.intersectionRatio.toString())),n.intersectionRatio>=.5?this.timerId=window.setTimeout(((n,i)=>{this.fireVisibilityBeacon(n,i),this.userActionLog.fireImpressionLog(e,t,i)}),1e3,i,n.target):this.timerId&&clearTimeout(this.timerId)}))}}async sendBeaconForAdServed(e){const{beaconsJson:t,beaconsSupportHttpPOST:n}=e;this.fireAdServedTrackingCall(t,n)}async fireAdServedTrackingCall(e,t){if(e&&e.length>0)try{const i=JSON.parse(e),r=i&&i.trb;if(r)for(let e=0;e<r.length;e++){var n;const o=r[e];null!==(n=window.servedBeaconUrls)&&void 0!==n&&n.includes(o)||(this.beaconsProcessed&&this.beaconsProcessed.has(o)&&this.beaconsProcessed.get(o)===d.hE.BeaconTypeAdServed||f.allServeBeaconsFiredOnPage&&f.allServeBeaconsFiredOnPage.has(o)||(this.config&&this.config.useNavigatorSendBeacon&&t?this.firePostTrackingBeacon(r[e],d.hE.BeaconTypeAdServed,i.e):this.fireTrackingBeacon(r[e],d.hE.BeaconTypeAdServed,i.e)))}}catch(t){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire ad served call",`Fail to parse beacon json tracking data: ${e}`))}}fireClickTrackingCall(e,t){if(e&&e.length>0)try{const n=JSON.parse(e),i=JSON.parse(t),r=n&&n.tcb,o=i&&i.e;if(r)for(let e=0;e<r.length;e++)this.fireTrackingBeacon(r[e],d.hE.BeaconTypeClick,o)}catch(t){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire ad clicked call",`Fail to parse beacon click json: ${e}`))}}fireUserActionBeacon(e){this.fireTrackingBeacon(e,d.hE.UserActionEvent,!1)}visibilityObserver(e,t,n){const i=document.querySelector(e.replace(/\s/g,".")),r=e.slice(1,e.length);i&&this.elementVisibilityObserver(i,t,void 0,r,n)}visibilityCarouselObserver(e,t){e&&t&&this.elementVisibilityObserver(e,t)}elementVisibilityObserver(e,t,n,i,r,o,a,d){if(this.visiJsonTrackingData.set(e,t),n)try{!function(e,t){window.Gemini&&window.Gemini(e,t)}(JSON.parse(n),e)}catch(e){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to invoke gemini caller",`Fail to parse beacon gemini json: ${n}`))}const l={root:null,rootMargin:"0px",threshold:.5};let u;return this.onObserve=this.onObserve.bind(this),this.fireVisibilityBeacon=this.fireVisibilityBeacon.bind(this),this.loadPolyfills().then((()=>{u=new IntersectionObserver(this.onObserve(a,d),l),u.observe(e),r&&r.length>0&&(this.trackBingViewability=this.trackBingViewability.bind(this),this.trackBingViewability(e,i,r,!0,this.beaconsProcessed,o,t))})),()=>{var e;return null===(e=u)||void 0===e?void 0:e.disconnect()}}checkVideoElementChanged(e,t,n){const i=e&&e.querySelector("native-ad-video-player")&&e.querySelector("native-ad-video-player").shadowRoot,r=i&&i.querySelector("content-video-player")&&i.querySelector("content-video-player").shadowRoot?i.querySelector("content-video-player").shadowRoot.querySelector("video"):null,o=n?n.get(e):null;n&&r!=o&&(t.element=r,t.videoParenentElement=i&&i.host&&i.host.parentElement,window&&window.MSANTracker&&window.MSANTracker.TrackElements&&(window.MSANTracker.PlayUtils.untrackElement(o),window.MSANTracker.TrackElements([t],window)),n.set(e,r))}trackBingViewability(e,t,n,i,r,o,a){const s=(this.config&&this.config.VideoAd&&this.config.VideoAd.view&&this.config.VideoAd.view.triggerType)??"play",c=(this.config&&this.config.VideoAd&&this.config.VideoAd.view&&this.config.VideoAd.view.durationMs)??2e3,l=!!o,u=t?t.concat(" video"):"";let p=e,h=null;i&&l&&(null==this.currentVideoDom&&(this.currentVideoDom=new Map),p=e&&e.querySelector("native-ad-video-player")&&e.querySelector("native-ad-video-player").shadowRoot,h=p&&p.querySelector("content-video-player")&&p.querySelector("content-video-player").shadowRoot&&p.querySelector("content-video-player").shadowRoot.querySelector("video"),this.currentVideoDom.set(e,h));let g=[];const m=[];let f=[],v=[];if(n&&n.length>0)for(let e=0;e<n.length;e++){const t=n[e];r&&r.has(t)&&r.get(t)===d.hE.BeaconTypeVisibility||(l?f.push({type:"videoView",triggerType:s,url:t,percentage:50,duration:c}):m.push({type:"view",triggerType:"view",url:t,percentage:50,duration:1e3}),null!=r&&i&&r.set(t,d.hE.BeaconTypeVisibility),v.push({beaconUrl:t,type:d.hE.BeaconTypeVisibility}))}if(l){const{bingBeacons:n,servedBeacons:s,videoTrackedUrls:c}=this.getBeaconsForVideo(o,r,i,a);f=f.concat(n),v=v.concat(c),g=[{impid:t,element:i?e:null,beacons:s},{impid:i?t:u,element:i?h:null,videoParenentElement:i?p&&p.host&&p.host.parentElement:null,beacons:f}]}else g=[{impid:t,element:i?e:null,beacons:m}];if(window&&window.MSANTracker&&window.MSANTracker.TrackElements&&window.MSANTracker.TrackElements(g,window),i&&l){const n={impid:t,element:h,videoParenentElement:p&&p.host&&p.host.parentElement,beacons:f};setInterval(this.checkVideoElementChanged,100,e,n,this.currentVideoDom)}return v}getBeaconsForVideo(e,t,n,r){const o=(this.config&&this.config.VideoAd&&this.config.VideoAd.mobileEnable)??!0,a=(this.config&&this.config.VideoAd&&this.config.VideoAd.impression&&this.config.VideoAd.impression.durationMs)??1e3;let l=[];const u=[],{bingBeacons:p,videoUrls:h}=this.generateVideoBeaconsFromVast(e,t,n);l=l.concat(h);const m=r,f=i.Al&&i.Al.ClientSettings||{},v=f.browser&&"true"===f.browser.ismobile||"phone"===f.deviceFormFactor;if(m&&m.length>0)try{const e=JSON.parse(m);if(e){const i=e.trb;if(i)for(let r=0;r<i.length;r++){const s=i[r];t&&t.has(s)&&t.get(s)===d.hE.BeaconTypeAdServed||(u.push({type:"videoImpression",triggerType:"view",url:e.e?s:decodeURIComponent(s),percentage:50,duration:o&&v?300:a}),null!=t&&n&&t.set(s,d.hE.BeaconTypeAdServed),l.push({beaconUrl:s,type:d.hE.BeaconTypeAdServed}))}}}catch(e){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire video tracked beacon",`Fail to parse beacon json tracking data: ${m}`))}return{bingBeacons:p,servedBeacons:u,videoTrackedUrls:l}}getMilliseconds(e){const t=e.split(".");let n=0;const i=t[0];t.length>1&&(n+=Number(t[1]));const r=i.split(":");return n+1e3*(3600*Number(r[0])+60*Number(r[1])+Number(r[2]))}generateVideoBeaconsFromVast(e,t,n){const i=[],r=[],o=this.getMilliseconds(e.Duration);if(e.TrackingEvents)for(let a=0;a<e.TrackingEvents.length;a++)if(e.TrackingEvents[a]){const s=e.TrackingEvents[a].value;if(t&&t.has(s)&&t.get(s)===d.hE.BeaconTypeVideoProgress)continue;let c="";switch(e.TrackingEvents[a].event&&(c=e.TrackingEvents[a].event.toLowerCase()),c){case d.hE.StartEvent:i.push({type:"start",triggerType:"play",url:s,percentage:50,duration:0});break;case d.hE.FirstQuartileEvent:i.push({type:"quartile",triggerType:"play",url:s,percentage:50,duration:Math.ceil(o/4)});break;case d.hE.MidPointEvent:i.push({type:"quartile",triggerType:"play",url:s,percentage:50,duration:Math.ceil(o/2)});break;case d.hE.ThirdQuartileEvent:i.push({type:"quartile",triggerType:"play",url:s,percentage:50,duration:Math.ceil(o/4*3)});break;case d.hE.CompleteEvent:i.push({type:"complete",triggerType:"play",url:s,percentage:50,duration:o});break;case d.hE.ProgressEvent:e.TrackingEvents[a].offset&&i.push({type:"progress",triggerType:"play",url:s,percentage:50,duration:this.getMilliseconds(e.TrackingEvents[a].offset)})}null!=t&&n&&t.set(s,d.hE.BeaconTypeVideoProgress),r.push({beaconUrl:s,type:d.hE.BeaconTypeVideoProgress})}return{bingBeacons:i,videoUrls:r}}firePageMonetizedTelemetry(e){if(null==e||!e.getAttribute)return;const t=e.getAttribute(m.qP);try{const n=JSON.parse(t);(null==n?void 0:n.ism)&&g.M0.sendContentViewEvent(e.parentElement,m.NS.Partial)}catch(e){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to set isMonetized flag",`Fail to parse telemetryObject json: ${t}`))}}fireVisibilityBeacon(e,t){if(a.k.logCallback((()=>"ad visible for 1 second")),this.firePageMonetizedTelemetry(t),this.visiJsonTrackingData&&this.visiJsonTrackingData.get(t))try{const e=JSON.parse(this.visiJsonTrackingData.get(t)),i=e&&e.tvb;if(i)for(let t=0;t<i.length;t++){var n;const r=i[t];null!==(n=window.viewedBeaconUrls)&&void 0!==n&&n.includes(r)||(this.beaconsProcessed&&this.beaconsProcessed.has(r)&&this.beaconsProcessed.get(r)===d.hE.BeaconTypeVisibility||f.allVisiBeaconsFiredOnPage&&f.allVisiBeaconsFiredOnPage.has(r)||this.fireTrackingBeacon(r,d.hE.BeaconTypeVisibility,e.e))}}catch(e){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire visibility beacon",`Fail to parse beacon json tracking data: ${this.visiJsonTrackingData.get(t)}`))}e&&e.unobserve(t)}fireRequestLevelBeacons(e){e&&e.forEach((e=>{e&&this.fireRequestLevelBeaconCall(e)}))}fireJSTrackers(e,t=!1){if(e&&e.length>0)try{const n=JSON.parse(e),i=n&&n.tjb;if(!Array.isArray(i))return;for(const e of i)e&&"string"==typeof e&&(this.beaconsProcessed&&this.beaconsProcessed.has(e)&&this.beaconsProcessed.get(e)===d.hE.BeaconTypeJsTracker||(t&&this.isXandrVisibilityTracker(e)?this.fireXandrJSTracker(e):this.fireJSTracker(e)))}catch(t){g.M0.sendAppErrorEvent((0,s.Tr)(c.Cy3,"Fail to fire jstrackers",`Fail to parse beacon json tracking data: ${e}`))}}async fireJSTracker(e){return new Promise(((t,n)=>{if(!(0,p.N)())return;const i=(0,h.b0)(e,void 0,!0,void 0);i.onload=()=>{a.k.logCallback((()=>"Added jsTracker url: "+e)),this.beaconsProcessed.set(e,d.hE.BeaconTypeJsTracker),t()},i.onerror=t=>{g.M0.sendAppErrorEvent({...c.is$,message:"Failed to load partner jsTracker file",pb:{...c.is$.pb,customMessage:`Error occurred while loading ad partner trackerJS file: ${e}`}}),n(t)},document.body.appendChild(i)}))}async fireRequestLevelBeaconCall(e){if(e){a.k.logCallback((()=>"Firing encoded requestlevel beacon: "+e));let t=await new Image(1,1);t.src=e,t=null}}firePostTrackingBeacon(e,t,n){let i=d.hE.BeaconFormatEncoded;n||(e=decodeURIComponent(e),i=d.hE.BeaconFormatDecoded),e&&(a.k.logCallback((()=>"Firing "+i+" "+t+" beacon, beaconUrl: "+e)),navigator.sendBeacon(e),this.beaconsProcessed.set(e,t))}fireTrackingBeacon(e,t,n){let i=d.hE.BeaconFormatEncoded;n||(e=decodeURIComponent(e),i=d.hE.BeaconFormatDecoded),e&&(a.k.logCallback((()=>"Firing "+i+" "+t+" beacon, beaconUrl: "+e)),this.fireBeaconCall(e,t))}fireBeaconCall(e,t){try{let t=new Image(1,1);t.src=e,t=null}catch(t){g.M0.sendAppErrorEvent((0,s.Tr)(c.AIp,"Invalid beacon URL",`Fail to parse beacon json tracking data: ${e}`))}finally{this.beaconsProcessed.set(e,t),t===d.hE.BeaconTypeVisibility&&f.allVisiBeaconsFiredOnPage.add(e),t===d.hE.BeaconTypeAdServed&&f.allServeBeaconsFiredOnPage.add(e)}}supportsIntersectionObserver(){return"IntersectionObserver"in n.g&&"IntersectionObserverEntry"in n.g&&"intersectionRatio"in IntersectionObserverEntry.prototype}loadPolyfills(){const e=[];return this.supportsIntersectionObserver()||e.push(n.e("node_modules_intersection-observer_intersection-observer_js").then(n.t.bind(n,76583,23))),Promise.all(e)}isXandrVisibilityTracker(e){return e.includes("trk.js")}fireXandrJSTracker(e){document.addEventListener(u.gL,(t=>{const n=this.extractAdIdFromXandrTrackerUrl(e);t.detail.adUniqueIds.includes(n)&&this.fireJSTracker(this.replaceXandrVisibilityTrackerParam(n,e))}))}replaceXandrVisibilityTrackerParam(e,t){const n=`dom_id=${e};`,i=`dom_elt_var=${e};`;return t.replace(n,i)}extractAdIdFromXandrTrackerUrl(e){var t;const n=null===(t=e.match(/dom_id=([a-zA-Z0-9_-]+);/))||void 0===t?void 0:t[1];return n||(0,s.H)(c.C$l,"Xandr visibility tracker URL doesn't have ad id","dom_id parameter is empty",{trackerUrl:e}),n}get intersectionObserver(){return this.loadPolyfills()}}(o=f).allVisiBeaconsFiredOnPage=new Set,o.allServeBeaconsFiredOnPage=new Set},31643:function(e,t,n){"use strict";n.d(t,{UF:function(){return d}});var i=n(43438),r=n(68054),o=n(31558);let a,s=!1;const c=new Promise((e=>{a=e}));async function d(){switch(await async function(){s||(i.A.subscribe(i.U.CookieConsentStatus,(e=>{e!==r._.Unknown&&a()})),s=!0);const e=i.A.get(i.U.CookieConsentStatus);return e!==r._.Unknown?e:((0,o.N)()&&await c,i.A.get(i.U.CookieConsentStatus))}()){case r._.Required:return!0;case r._.NotRequired:return!1;default:return}}},37213:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var i=n(61633),r=n(19464);class o{updateMsaOptOutCookie(e){if(!this.getMsaOptoutCookieData()&&e&&e.optout){const t=!0===e.optout.msaOptOut?"1":"0";this.setMsaOptoutCookie(t)}}getMsaOptoutCookieData(){const e=(0,r.ej)(i.yV.MSAOptOut);return e&&e.length>0?e:null}setMsaOptoutCookie(e){e&&e.length>0&&(0,r.sq)(i.yV.MSAOptOut,e,1,null,"/")}getBrowserOptoutStatus(){const e=(0,r.ej)(i.yV.BrowserOptOut);return!(!e||"1"!==e)}setUserOptOutSettings(){const e=this.getBrowserOptoutStatus(),t=this.getMsaOptoutCookieData(),n=!(!t||"1"!==t),r=(e||n).toString().toLowerCase();let o="";e&&(o="b|"),n&&(o+="m");const a=i.Lr.UserOptOut+":"+r+";"+i.Lr.UserOptOutOptions+":"+o;if(document.head.attributes["data-info"]){const e=document.head.attributes["data-info"].value.split(";");e.find((e=>e.indexOf(i.Lr.UserOptOut)>-1))?e.find((e=>e.indexOf(i.Lr.UserOptOut)>-1))!==i.Lr.UserOptOut+":"+r&&(document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOut+":false",i.Lr.UserOptOut+":"+r).replace(i.Lr.UserOptOut+":true",i.Lr.UserOptOut+":"+r)):document.head.attributes["data-info"].value=document.head.attributes["data-info"].value+";"+i.Lr.UserOptOut+":"+r,e.find((e=>e.indexOf(i.Lr.UserOptOutOptions)>-1))?e.find((e=>e.indexOf(i.Lr.UserOptOutOptions)>-1))!==i.Lr.UserOptOutOptions+":"+o&&(e.includes(i.Lr.UserOptOutOptions+":")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOutOptions+":",i.Lr.UserOptOutOptions+":"+o):e.includes(i.Lr.UserOptOutOptions+":b|")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOutOptions+":b|",i.Lr.UserOptOutOptions+":"+o):e.includes(i.Lr.UserOptOutOptions+":b|m")?document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOutOptions+":b|m",i.Lr.UserOptOutOptions+":"+o):e.includes(i.Lr.UserOptOutOptions+":m")&&(document.head.attributes["data-info"].value=document.head.attributes["data-info"].value.replace(i.Lr.UserOptOutOptions+":m",i.Lr.UserOptOutOptions+":"+o))):document.head.attributes["data-info"].value=document.head.attributes["data-info"].value+";"+i.Lr.UserOptOutOptions+":"+o}else document.head.setAttribute("data-info",a)}}},15755:function(e,t,n){"use strict";n.d(t,{F:function(){return d}});var i=n(88826),r=n(7476),o=n(31558),a=n(69425),s=n(23549);const c={};function d(e,t,n){if(!(0,o.N)()||!e||!t)return;const d=s.M0.getRequestId();if(c[d]&&c[d].has(t))return;c[d]||(c[d]=new Set),c[d].add(t);const l=(0,a.Et)(n,"attachIasScript")(((e,t,n)=>{const o=e.split(";"),a=o[0]&&o[0].split(":")[1],c=o[1]&&o[1].split(":")[1];if(a&&c){if(globalThis.isSingleIASInstance=!0,globalThis.__IntegralASAdPush)return void u(t,a,c);const e=document.createElement("script");e.async=!0,e.src="https://assets.msn.com/staticsb/statics/latest/js/thirdparty/ias/fw.js",e.onload=()=>{u(t,a,c,n)},e.onerror=e=>{s.M0.sendAppErrorEvent((0,i.Tr)(r.Sp0,"Failed to download IAS FW JS"))},document.head.appendChild(e)}})),u=(0,a.Et)(n,"IASAdPush")(((e,t,n)=>{const i="%23"+e;globalThis.__IntegralASAdPush([{adSelector:i,iasParameters:JSON.stringify({host:"",config:"/rjss/st/"+t+"/"+n+"/skeleton.js?iasProxyPartnerId=2&ias_adpath="+i,contentType:"application/json"})}]),s.M0.addOrUpdateTmplProperty("marqueeAdContainer"===e?"MarqueeIASTriggered":`NativeIASTriggered_${i}`,"1")}));l(e,t,null==n?void 0:n.id)}},65751:function(e,t,n){"use strict";n.d(t,{c:function(){return He},d:function(){return $e}});var i,r=n(33940),o=n(61633),a=n(19233),s=n(88826),c=n(7476),d=n(21930),l=n(20009),u=n(10754),p=n(26671),h=n(90351),g=n(76623),m=n(36926),f=n(46058),v=n(92100),y=n(10671),S=n(21789),C=n(32614);!function(e){e.SlideshowPreview="ss",e.ArticlePreview="ar",e.VideoPreview="vi"}(i||(i={}));var w=n(44672),b=n(23549),T=n(55524);class k{constructor(){this.cmsProviderCache=new Map}async getCMSList(e,t){if(e)try{const n={method:"GET",headers:{}},i=await(0,w.w)((async()=>{const t=new URL(`${o.ZG.CMSListServiceUrl}${e}${this.getContentServiceUrlBase().search}`,`${this.getContentServiceUrlBase()}`),i=T.Gq.get("akmprotocol");i&&t.searchParams.set("akmprotocol",i);const r=await fetch(t.toString(),n);if(r.ok)return r.json();b.M0.sendAppErrorEvent((0,s.Tr)(c.Cfk,"Get CMSAd content failed",`Invalid response from CMS, ${r.statusText}, listId: ${e}`))}),"getCMSList");if(!i)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.Cfk,"Get CMSAd content failed",`Invalid response.json(), listId: ${e}`));const r=i;return this.translateToCMSItem(r,e,t,o.Lr.PrivacyUrl)}catch(t){return void b.M0.sendAppErrorEvent((0,s.Tr)(c.Cfk,"Get CMSAd content failed",`Error while fetching CMS Native Ad  ${t}, id: ${e}`))}else b.M0.sendAppErrorEvent((0,s.Tr)(c.Cfk,"Get CMSAd content failed",`No backfill id found, listId: ${e}`))}async translateToCMSItem(e,t,n,i){if(!e||!e.list||0===e.list.length)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.Cfk,"Get CMSAd content failed",`No CMS Response returned from ${t}`));const r=[];for(const t of e.list){let e=!1;const a=t.extendedProperties;if(a)for(const t of a)if(t.key&&t.key.indexOf("is_content")>-1&&t.values&&t.values.indexOf("true")>-1){e=!0;break}let s;if(null!=t.link&&null!=t.link.title&&t.link.href&&null!=t.link.image&&null!=t.link.image.href){const n=this.getCMSContentId(t.link.image.href);let r,a;if(t.link.ad)if(t.link.ad.providerHref&&t.link.ad.providerHref.href){const e=this.getCMSContentId(t.link.ad.providerHref.href);e?r=await this.fetchProviderName(e):t.link.ad.sponsorText&&(r=t.link.ad.sponsorText)}else t.link.ad.sponsorText&&(r=t.link.ad.sponsorText);a=r||(null!=t.link.kicker?t.link.kicker:o.ZG.DefaultProviderName),s={title:t.link.title,url:t.link.href,provider:{name:a},imageUrl:n?(0,C.zz)(n,{width:624,height:350,enableDpiScaling:!1}):t.link.image.href,isContent:e,privacyUrl:i}}else if(null!=t.reference&&null!=t.reference.href){const r=this.getCMSContentId(t.reference.href);if(null!=r){const t=await this.getCMSContent(r);if(!t)continue;s={title:t.title,url:this.constructDestinationUrl(t,n),provider:this.constructProvider(t),imageUrl:this.constructImageUrl(t),isContent:e,privacyUrl:i}}}s&&s.title&&s.imageUrl&&s.url&&r.push(s)}return{id:e._id,items:r}}async getCMSContent(e){try{const t=new URL(this.getContentServiceUrlBase().search,`${this.getContentServiceUrlBase()}${o.ZG.CMSContentServiceURl}${e}/`),n=await fetch(t.toString());if(!n||!n.ok)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.Cfk,"Get CMSAd content failed",`Failed to fetch CMS content, cmsId: ${e}`));const i=await n.json();return i||void b.M0.sendAppErrorEvent((0,s.Tr)(c.Cfk,"Get CMSAd content failed",`Invalid JSON response to get CMS content, cmsId: ${e}`))}catch(t){return void b.M0.sendAppErrorEvent((0,s.Tr)(c.Cfk,"Get CMSAd content failed",`Error while fetching CMS content ${t}, cmsId: ${e}`))}}constructDestinationUrl(e,t){const{category:n}=e,r=n&&n.product||"news",o=n&&n.label||"other",a=i[e.type]||"xx";return`https://www.msn.com/${t}/${v.c.encodeURIComponentForPrime(r||"")}/${v.c.encodeURIComponentForPrime(o||"")}/${v.c.encodeURIComponentForPrime(e.title||"")}/${a}-${e.id}`}constructProvider(e){const{name:t,logo:n}=e.provider;return{name:t,logo:n&&n.id?{src:`${y.E.prod}${n.id}?w=16&h=16`,alt:t}:void 0}}constructImageUrl(e){if(e.images&&!(e.images.length<1)&&e.images[0].id)return(0,C.zz)(e.images[0].id,{width:624,height:350,focalRegion:e.images[0].focalRegion,enableDpiScaling:!1})}getCMSContentId(e){return e&&e.indexOf("cms/api/amp")>-1?e.substring(e.lastIndexOf("/")+1):null}async fetchProviderName(e){try{if(this.cmsProviderCache.get(e))return this.cmsProviderCache.get(e);const t={method:"GET",headers:{}},n=await(0,w.w)((async()=>{const n=new URL(`${o.ZG.CMSListServiceUrl}${e}${this.getContentServiceUrlBase().search}`,`${this.getContentServiceUrlBase()}`),i=await fetch(n.toString(),t);if(i.ok)return i.json();b.M0.sendAppErrorEvent((0,s.Tr)(c.Cfk,"Get CMSAd content failed",`Invalid response from CMS. status: ${i.status}, statusText: ${i.statusText}, url: ${i.url}`))}),"getProviderName");if(!n)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.Cfk,"Get CMSAd content failed",`Invalid response.json(), cmsId: ${e}`));const i=n;return i?(this.cmsProviderCache.set(e,i.displayName),i.displayName):void b.M0.sendAppErrorEvent((0,s.Tr)(c.Cfk,"Get CMSAd content failed",`Failed to parse JSON response, cmsId: ${e}`))}catch(t){return void b.M0.sendAppErrorEvent((0,s.Tr)(c.Cfk,"Get CMSAd content failed",`Error while fetching Provider name  ${t}, cmsId: ${e}`))}}getContentServiceUrlBase(){let e=S.jG.ContentServiceUrlBase;return e&&!e.toString().includes("localhost")||(e=new URL(o.Lr.DefaultContentServiceBaseUrl)),e}}var P,A,I,E,M,x,L=n(89315),R=n(13334),D=n(23357),F=n(19464),O=n(54798),B=n(85205);!function(e){e[e.Sponsored=1]="Sponsored",e[e.Description=2]="Description",e[e.Rating=3]="Rating",e[e.Likes=4]="Likes",e[e.Downloads=5]="Downloads",e[e.Price=6]="Price",e[e.Saleprice=7]="Saleprice",e[e.Phone=8]="Phone",e[e.Address=9]="Address",e[e.Description2=10]="Description2",e[e.DisplayUrl=11]="DisplayUrl",e[e.CTAText=12]="CTAText",e[e.InstallmentPrice=500]="InstallmentPrice",e[e.PriceDrop=501]="PriceDrop",e[e.FreeShipping=502]="FreeShipping",e[e.TopViewed=503]="TopViewed",e[e.Sold=504]="Sold",e[e.SpecialOffer=505]="SpecialOffer",e[e.EliteBadge=506]="EliteBadge",e[e.Condition=507]="Condition",e[e.LIA=508]="LIA",e[e.CurbsidePickup=509]="CurbsidePickup",e[e.Review=510]="Review",e[e.ShortTitle=511]="ShortTitle",e[e.ReturnPolicy=512]="ReturnPolicy",e[e.DisclaimerText=513]="DisclaimerText",e[e.AdSelectionReason=514]="AdSelectionReason",e[e.Discount=600]="Discount"}(P||(P={})),function(e){e[e.Mobile=1]="Mobile",e[e.PC=2]="PC"}(A||(A={})),function(e){e[e.Large=3]="Large",e[e.MultipleImages=600]="MultipleImages"}(I||(I={})),function(e){e[e.TrackingAllowed=0]="TrackingAllowed",e[e.NoTrackingAllowed=1]="NoTrackingAllowed"}(E||(E={})),function(e){e[e.Impression=1]="Impression",e[e.Viewed=2]="Viewed"}(M||(M={})),function(e){e[e.Image=1]="Image",e[e.JavaScript=2]="JavaScript"}(x||(x={}));var N=n(31643),_=n(37213),U=n(96531),W=n(81949),H=n(78324),$=n(36560),q=n(54297);const G=async(e,t,n,i,r,o,d,l)=>{if(r){var u;const e=r.serverTiming&&(null===(u=r.serverTiming[0])||void 0===u?void 0:u.duration);if(e&&d(a.qG.AdServerLatency,e),i>-1){const e=(0,m.v0)(t&&!n,r.requestStart),s=e-i;d(a.qG.RequestSent,s>0?s:0),o||l(n?a.qG.TimeToRequestAdBackground:a.qG.TimeToRequestAd,0,e)}d(a.qG.TimeToAdResponse,(0,m.v0)(t&&!n,r.responseEnd)),r.isApproximate||l(a.qG.AdFetched,r.fetchStart,r.responseEnd),d(a.qG.ApiDuration,null==r?void 0:r.duration)}else(0,s.H)(c.iVH,"Unable to find performance entry for RTB request")};function V(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}var z=n(31558),j=n(10141),K=n(21882),Q=n(8780);var J,Y=n(291),Z=n(56687),X=n(72626);!function(e){e.AdReturned="adAvailable",e.AdNotReturned="AdNotReturned"}(J||(J={}));class ee{constructor(){this.groupedAdRequests={},this.adRequestsInfoById={},this.initialized=!1,this.handleAdNotReturned=e=>{const t=e.targetId;if(!t||!this.adRequestsInfoById[t])return;const{_groupKey:n,_cancelled:i}=this.adRequestsInfoById[t];i||(this.adRequestsInfoById[t]={...this.adRequestsInfoById[t],_fetched:!0},this.updateGroupInfoOnAdUpdate(n))},this.handleAdReturned=e=>{const t=e.targetId;if(!t||!this.adRequestsInfoById[t])return;const{_groupKey:n,_onAvailable:i,_cancelled:r}=this.adRequestsInfoById[t];if(r)return;const o=i&&i(this.adRequestsInfoById[t].initialData,e);this.adRequestsInfoById[t]={...this.adRequestsInfoById[t],_fetched:!0,fetchedData:o},this.sdkWrapper.fireServeBeacon(e),this.updateGroupInfoOnAdUpdate(n)}}initialize(e){this.initialized||(this.sdkWrapper=e,this.sdkWrapper.addEventListener(J.AdReturned,this.handleAdReturned),this.sdkWrapper.addEventListener(J.AdNotReturned,this.handleAdNotReturned),this.initialized=!0)}tryRegisterPlacements(e,t,n){const i=this.findValidPlacements(e);if(0===i.length)return!1;const r=[];let o=0;i.forEach((e=>{const{targetId:t}=e||{};o+=1,r.push(t)}));const a=V();return this.groupedAdRequests[a]={targetIds:r,pendingCount:o,onCompleteAll:t},i.forEach((e=>{const{targetId:t}=e;this.adRequestsInfoById[t]={initialData:{...e},_groupKey:a,_onAvailable:n}})),!0}unregisterPlacements(e){const t=this.findValidPlacements(e);if(0===t.length)return null;let n;return t.forEach((e=>{const{targetId:t}=e;this.sdkWrapper&&this.sdkWrapper.removeAllEventListeners(t),this.adRequestsInfoById[t]._cancelled=!0,n||(n=this.adRequestsInfoById[e.targetId]._groupKey)})),this.collectGroupResults(n)}findValidPlacements(e){return e&&0!==e.length?e.filter((e=>this.validatePlacement(e))):[]}validatePlacement(e){const{targetId:t}=e||{};return!!t||(b.M0.sendAppErrorEvent({...c.Mc7,message:"Missing targetId in placement info"}),!1)}collectGroupResults(e){if(!e)return null;const t=this.groupedAdRequests[e];if(!t||!t.targetIds||0==t.targetIds.length)return null;const n=[];return t.targetIds.forEach((e=>{const t=this.adRequestsInfoById[e];if(t&&t._fetched){const e={...t.initialData||{},...t.fetchedData||{}};n.push(e)}})),0===n.length&&b.M0.sendAppErrorEvent((0,s.Tr)(c.XWd,"No placements returned from Xandr SDK per request")),{data:n}}updateGroupInfoOnAdUpdate(e){const t=this.groupedAdRequests[e];t.pendingCount-=1,0===t.pendingCount&&t.onCompleteAll(this.collectGroupResults(e))}}var te=n(78672);var ne;!function(e){e.AdRequested="adRequested",e.AdReturned="adAvailable",e.AdRefreshed="adLoaded",e.AdError="adError",e.AdRequestFailure="adRequestFailure",e.AdCollapse="adCollapse",e.AdNoBid="adNoBid"}(ne||(ne={}));var ie=n(74488);const re=new class{constructor(){this.fetchCalled=!1,this.baseUrl="https://api.msn.com/segments/recoitems/LiveRampObjectStoreCaller",this.oneServiceOcid="peregrine",this.noEnvelopeIdConst="_"}fetchAndOutputEnvelopeId(){if(this.fetchCalled)return;this.fetchCalled=!0;if(!(0,F.ej)(o.yV.LiverampEnvelopeId)&&this.isCookieSetAllowed()){const e=this.fetchEnvelopeIdFromObjectStore();this.liverampCookieSetPromise=this.setCookie(o.yV.LiverampEnvelopeId,e)}}getEnvelopeIdFromCookie(){const e=(0,F.ej)(o.yV.LiverampEnvelopeId);return e===this.noEnvelopeIdConst?null:e}async finishLiverampCookieSet(){this.liverampCookieSetPromise&&await this.liverampCookieSetPromise}async fetchEnvelopeIdFromObjectStore(){const e={method:"GET",headers:await ie.$D.getOneServiceHeaders(),credentials:"include"},t=this.getServiceUrl();let n;try{n=await(0,w.w)((async()=>{const n=await fetch(t.href,e);if(200!=n.status)return 404==n.status||b.M0.sendAppErrorEvent({...c.t7r,message:`Unexpected response from OneService call. Status: ${n.status}`}),null;try{const e=await n.text();let t=JSON.parse(e)[0].data;return'"'===t.charAt(0)&&'"'===t.charAt(t.length-1)&&(t=t.substr(1,t.length-2)),t}catch{return b.M0.sendAppErrorEvent({...c.t7r,message:"OneService response is not in expected format."}),null}}),"liverampObjectStoreCall")}catch(e){return b.M0.sendAppErrorEvent({...c.t7r,message:`Error sending OneService request. Error: ${e}`}),null}return n}async setCookie(e,t){let n=await t;n||(n=this.noEnvelopeIdConst);(0,F.sq)(e,n,1,".msn.com","/",!0)||b.M0.sendAppErrorEvent({...c.lxu,message:"Unable to set LiverampEnvelopeId Cookie."})}getServiceUrl(){const e=new URL(this.baseUrl);return[...ie.$D.getCommonParams2(this.oneServiceOcid,!0)].forEach((t=>{t.value&&e.searchParams.set(t.key,t.value)})),e.searchParams.set("ocid",this.oneServiceOcid),e}isCookieSetAllowed(){try{return(0,F.sq)(o.yV.LiverampEnvelopeId,this.noEnvelopeIdConst,1,".msn.com","/",!0)}catch(e){return!1}}};class oe{constructor(){this.sdkUrl="https://acdn.adnxs.com/ast/ast.js",this.sdkPending=!1,this.apnMemberId=this.getApnMemberId()}static getInstance(){return T.Gq.get("__XandrAdSdkWrapper__",(()=>new oe))}async loadSdkAsync(){return new Promise(((e,t)=>{if(!(0,z.N)())return b.M0.sendAppErrorEvent({...c.FER,message:"unexpected call to loadSdkAsync on server side"}),void t(new Error("unexpected call to loadSdkAsync on server side"));if(globalThis.apntag)return e();if(this.sdkPending)return void window.addEventListener("xandrAdSdkLoadedCustomEvent",(function(){e()}));const n=(0,te.b0)(this.sdkUrl);this.sdkPending=!0,n.onload=()=>{const t=new CustomEvent("xandrAdSdkLoadedCustomEvent");window.dispatchEvent(t),e()},n.onerror=e=>{this.sdkPending=!1,b.M0.sendAppErrorEvent({...c.FER,message:JSON.stringify(e)}),t(e)},document.body.appendChild(n)}))}tryBuildPageOptions(e){if(!globalThis.apntag){const e="Xandr SDK is not loaded";return b.M0.sendAppErrorEvent({...c.FER,message:e}),!1}const{prid:t,rid:n,pageType:i,locale:r,verticalName:o,audienceMode:a,ocid:s,flightKeywords:d}=e||{};var l;this.pageType||(this.pageType=i||(null===R.Al||void 0===R.Al||null===(l=R.Al.ClientSettings)||void 0===l?void 0:l.pagetype));if(!this.providerId)if(t)this.providerId=t;else{this.providerId="EMPTYPIDAN";const e="ProviderId is empty for page type: "+this.pageType;b.M0.sendAppErrorEvent({...c.pa7,message:e})}this.externalUid||(this.externalUid=(0,F.jG)());const u=(new Date).getTime()+"|"+(9*Math.random()+1)*Math.pow(10,17);this.pageOptions=this.pageOptions||{member:this.apnMemberId,user:{externalUid:this.externalUid,externalImpId:u,userIds:[{type:"extendedIDs",eids:[{id:this.externalUid,source:"msft_muid"}]}]},keywords:{page_type:this.pageType,rid:n,provider_id:this.providerId,user_locale:r,vertical:o,audience_mode:a,ocid:s,rebroadcast_origin:"MSN",optout:this.getBrowserOptoutStatus(),flight:d?Object.keys(d):[]},trackingManagement:{native:{loadViewabilityScriptAt:"impression"}}};const p=re.getEnvelopeIdFromCookie();return p&&this.pageOptions.user.userIds.push({type:"liveramp",id:p}),(0,te.zw)().startsWith("localhost.")&&(this.pageOptions.test=!0),!0}clearEventHandlers(e){globalThis&&globalThis.apntag&&(globalThis.apntag.offEvent(ne.AdRequested,e),globalThis.apntag.offEvent(ne.AdReturned,e),globalThis.apntag.offEvent(ne.AdRefreshed,e),globalThis.apntag.offEvent(ne.AdError,e),globalThis.apntag.offEvent(ne.AdRequestFailure,e),globalThis.apntag.offEvent(ne.AdCollapse,e),globalThis.apntag.offEvent(ne.AdNoBid,e))}getApnMemberId(){return["en-au","en-nz"].includes(S.jG.CurrentMarket)?1705:280}getBrowserOptoutStatus(){return(0,F.ej)(o.yV.BrowserOptOut)}}const ae=(0,Y.h)(oe);var se=n(76733);const ce=(e,t,n,i,r)=>{if(!t||!n)return;if(t.divid=t.divid||t.divName,t.msnSdkName=i,r){if(n[e]&&n[e].length)for(let i=0;i<n[e].length;i++)n[e][i](t);return}let o=5;const a=setInterval((()=>{if(n[e]&&n[e].length){for(let i=0;i<n[e].length;i++)n[e][i](t);clearInterval(a)}else o--||clearInterval(a)}),500)};class de{constructor(){this.memberId=280,this.events=[]}static getInstance(){return T.Gq.get("__NativeAdXandrWrapper__",(()=>new de))}async loadSdkAsync(){return ae.loadSdkAsync().then((()=>!0)).catch((()=>!1))}tryConfigPlacements(e,t){return!!ae.tryBuildPageOptions(t)&&(this.providerId=ae.providerId,this.pageOptions=ae.pageOptions,globalThis.apntag.setPageOpts(this.pageOptions),e.forEach((e=>{ae.clearEventHandlers(e.targetId);const n=this.buildNativeAdPlacement(e,t);globalThis.apntag.defineTag(n),this.attachEventHandlers(e.targetId)})),!0)}startAdServerCalls(){globalThis&&globalThis.apntag&&globalThis.apntag.loadTags()}fireServeBeacon(e){globalThis&&globalThis.apntag&&globalThis.apntag.fireImpressionTrackers(e)}attachClickBeacon(e,t){globalThis&&globalThis.apntag&&globalThis.apntag.attachClickTrackers(e,t)}addEventListener(e,t){((e,t,n,i=!1)=>{i?n[e]?n[e].push(t):n[e]=[t]:e&&"function"==typeof t&&n&&(se.k.log(`DisplayAd: addEventListener eventName: ${e} callback: ${t} events: ${n}`),n[e]&&n[e][0].toString()!=t.toString()?n[e].push(t):n[e]=[t])})(e,t,this.events)}removeAllEventListeners(e){ae.clearEventHandlers(e)}buildNativeAdPlacement(e,t){var n;this.countryCode||(this.countryCode=(null===S.jG||void 0===S.jG||null===(n=S.jG.LocaleContentMarket)||void 0===n?void 0:n.market)||"CO");const i={targetId:e.targetId,member:this.memberId,invCode:e.tagCode,native:{title:{required:!0,max_length:140},image:{required:!0,sizes:[{width:e.img.w,height:e.img.h}]},sponsoredBy:{required:!0},clickUrl:{required:!0},privacySupported:!0},extInvCode:this.countryCode,allowSmallerSizes:!1,nobidIfUnsold:(!1,!0),trafficSourceCode:"tg:"+e.tagCode+";p:"+this.providerId+";r:"+t.rid,keywords:{pos:e.regionIndex}};return i}attachEventHandlers(e){const t=this.events;globalThis.apntag.onEvent(ne.AdRequested,e,(()=>{})),globalThis.apntag.onEvent(ne.AdReturned,e,(e=>{ce(J.AdReturned,e,t,"xandr")})),globalThis.apntag.onEvent(ne.AdError,e,(e=>{this.adNotReturned(e,t)})),globalThis.apntag.onEvent(ne.AdRequestFailure,e,(e=>{this.adNotReturned(e,t)})),globalThis.apntag.onEvent(ne.AdNoBid,e,(e=>{this.adNotReturned(e,t)}))}adNotReturned(e,t){ce(J.AdNotReturned,e,t,"xandr")}}const le=(0,Y.h)(de);var ue=n(49915);const pe="infopane",he={hp:{[pe]:[6,18,29]}},ge=["interstitialgallery","interstitialgallerymsx","galleryonepagecontent"],me=["river","rivertall","peekriver","sriver"],fe=["river-dbl","riverdb"],ve=["river-half","river-half-textonly"],ye=(e,t)=>{var n,i,r;if(!e||!e.native)return{};const o=e.native,a=12085===e.buyerMemberId?"https://account.microsoft.com/privacy/ad-settings":"https://monetize.xandr.com/privacy-center/captcha?next_page=/privacy-center/delete";const s=((e,t)=>{var n;const{rid:i,locale:r,region:o,index:a,relativeIndex:s,pageType:c,tagCode:d}=t||{},{msft:l,auctionId:u}=e,{bidder_id:p,msx_creative_id:h}=l||{},g=null===(n=S.jG.CurrentRequestTargetScope)||void 0===n||null===(n=n.browser)||void 0===n?void 0:n.browserType,m=e.is_prebid_server_bid?e.buyerMemberId:"0";return(0,ue.$A)("https://g.msn.com/neg/0?type=adsfb",{rid:i,r:o,i:null==a?void 0:a.toString(),p:c,l:r,d:null==p?void 0:p.toString(),b:g,a:u,ii:null==s?void 0:s.toString(),c:h,tid:d,m:null==m?void 0:m.toString()})})(e,t);return{imageWidth:null===(n=o.image)||void 0===n?void 0:n.width,imageHeight:null===(i=o.image)||void 0===i?void 0:i.height,items:[{url:o.clickUrl,sourceName:null==o?void 0:o.sponsoredBy,title:o.title,imageUrl:null===(r=o.image)||void 0===r?void 0:r.url,uniqueId:e.targetId,adChoicesUrl:o.privacyLink,clickBeacons:o.clickTrackers&&JSON.stringify({tcb:o.clickTrackers})}],privacyUrl:a,feedbackUrl:s,beaconsJson:JSON.stringify({e:!0})}};class Se{static getInstance(){return T.Gq.get("__NativeAdSdkService__",(()=>new Se))}async fetchAds(e,t){return e&&e.placements&&0!==e.placements.length?le.loadSdkAsync().then((n=>{if(!n)return null;const i=this.buildPlacementsToFetch(e,t);if(!le.tryConfigPlacements(i,t))throw new Error("NativeAdXandrWrapper: tryConfigPlacements failed");this.eventHub||(this.eventHub=new ee,this.eventHub.initialize(le));const r=this.buildPlacementsRegisteredToEventHub(i,t);let o;if(!this.eventHub.tryRegisterPlacements(r,((...e)=>o(...e)),this.calculateUpdates))throw new Error("NativeAdSdkEventHub: tryRegisterPlacements failed");const u=!0===R.Al.IsPrerender?performance.now()-(0,d.TZ)(l.DB):performance.now();(0,d.su)(a.qG.RequestInitiated,u),le.startAdServerCalls();const p=this.calculateRequestTimeout();return(async(e,t)=>{const n=(0,Q.rh)(e);return Promise.race([t,n])})(p,new Promise((e=>o=e))).then((e=>{if(!e){const e=this.eventHub.unregisterPlacements(r),t=(null==e?void 0:e.data)||[],n=i.filter((e=>!t.find((t=>t.targetId===e.targetId)))).map((e=>e.targetId));return b.M0.sendAppErrorEvent((0,s.Tr)(c._nz,`Timeout to fetch native ads from Xandr SDK within ${p}ms`,`missing placements: (${n.join(",")})`)),this.formatAdRespons(e)}return this.formatAdRespons(e)}))})).catch((e=>(b.M0.sendAppErrorEvent((0,s.Tr)(c.nZ_,"Error while fetch native ads from Xandr SDK",`fetchAds reject: ${(0,Z.n)(e)}`)),null))):(b.M0.sendAppErrorEvent((0,s.Tr)(c.nZ_,"Empty placements in ad request")),Promise.resolve(null))}formatAdRespons(e){return{placements:(null==e?void 0:e.data)||[]}}buildPlacementsToFetch(e,t){const n=[];e.placements.forEach((e=>{const{indices:i,img:r,region:o,allIndices:a,diceRoll:s}=e;let{adContainerIds:c}=e;c||(c=i.map((e=>`${t.pageType}-${o}-${e}-${(0,X.pW)()}`))),i&&i.length&&c&&c.length&&i.forEach(((e,t)=>{n.push({region:o,regionIndex:e,mappedPosition:Number(e),targetId:c[t],img:r,allIndices:a,diceRoll:s,tagCode:void 0})}))}));const i={pageType:t.pageType,previousRiverNativeAdCount:t.previousRiverNativeAdCount,previousReservedRiverNativeAdCount:t.previousReservedRiverNativeAdCount,previousRiverDualWideNativeAdCount:t.previousRiverDualWideNativeAdCount,previousRiverHalfNativeAdCount:t.previousRiverHalfNativeAdCount};return((e,t)=>{let n=0,i=0,r=0,o=0,a=t.previousRiverNativeAdCount??0,s=t.previousReservedRiverNativeAdCount??0,c=t.previousRiverDualWideNativeAdCount??0,d=t.previousRiverHalfNativeAdCount??0,l=0,u=0;e.forEach((e=>{if(!e.isStrictIndices){const p=t.pageType.toLowerCase(),h=e.region.toLowerCase(),g=e.mappedPosition;if(he[p]&&he[p][h]&&he[p][h].indexOf(g)>=0)return;h===pe||"peekinfopane"===h?e.allIndices&&""!==e.diceRoll?e.mappedPosition=e.allIndices.indexOf(g.toString())+1:(n+=1,e.mappedPosition=n):"infopane.river"===h?(i+=1,e.mappedPosition=i):"resinfopane"===h?(r+=1,e.mappedPosition=r):ge.indexOf(h)>=0?(o+=1,e.mappedPosition=o):me.indexOf(h)>=0?(a+=1,e.mappedPosition=a):"resriver"===h?(s+=1,e.mappedPosition=s):"river_amp"===h?(l+=1,e.mappedPosition=l):fe.indexOf(h)>=0?(c+=1,e.mappedPosition=c):ve.indexOf(h)>=0?(d+=1,e.mappedPosition=d):"rightrail"===h&&(u+=1,e.mappedPosition=u)}})),e.forEach((e=>{e.tagCode=`${t.pageType}-${e.region}-${e.mappedPosition}`.toLowerCase()}))})(n,i),n}buildPlacementsRegisteredToEventHub(e,t){const n=[];return e.forEach(((e,i)=>{const{region:r,regionIndex:o,targetId:a,tagCode:s}=e;n.push({targetId:a,region:r,index:Number(o),relativeIndex:i+1,pageType:t.pageType,id:`extcontentsponcon_${t.pageType}_${r}_${o}`,rid:t.rid,locale:t.locale,tagCode:s})})),n}calculateUpdates(e,t){var n,i,r;return null!=t&&t.native||b.M0.sendAppErrorEvent((0,s.Tr)(c.yL3,"Missing native in returned ad object")),null!=t&&null!==(n=t.native)&&void 0!==n&&n.clickTrackers||b.M0.sendAppErrorEvent((0,s.Tr)(c.jSV,"Missing click trackers in returned ad object")),null!=t&&null!==(i=t.native)&&void 0!==i&&i.impressionTrackers||b.M0.sendAppErrorEvent((0,s.Tr)(c.qok,"Missing impression trackers in returned ad object")),null!=t&&null!==(r=t.native)&&void 0!==r&&r.javascriptTrackers&&b.M0.sendAppErrorEvent((0,s.Tr)(c.Z6e,"Javascript trackers are not expected in returned ad object")),ye(t,e)}calculateRequestTimeout(){return o.il.Timeout}}const Ce=(0,Y.h)(Se);var we,be=n(64518),Te=n(59002);!function(e){e.Publisher="Publisher",e.Language="Language",e.Market="Market",e.PageType="PageType",e.DeviceType="DeviceType",e.ContentCategory="ContentCategory",e.ContentSubcategory="ContentSubcategory",e.ProviderId="ProviderId",e.ContentTopic="ContentTopic",e.GameTitle="GameTitle",e.GameGenre="GameGenre"}(we||(we={}));class ke{constructor(){this.metadataStore={}}static getInstance(){return T.Gq.get("__AdPageMetadataHubInstance__",(()=>new ke))}setMetadata(e,t){this.metadataStore[e]=t}setMetadatas(e){for(const t in e)this.metadataStore[t]=e[t]}getMetadata(e){return this.metadataStore[e]}}const Pe=(0,Y.h)(ke),Ae=(0,T.TG)({[we.Publisher]:"pub",[we.Language]:"lang",[we.Market]:"market",[we.PageType]:"sales_page_type",[we.DeviceType]:"device_type",[we.ContentCategory]:"cat",[we.ContentSubcategory]:"subcat",[we.ContentTopic]:"cont_topic",[we.ProviderId]:"sales_provider_id",[we.GameTitle]:"game_title",[we.GameGenre]:"game_genre"});var Ie;!function(e){e.PlacementRegion="PlacementRegion",e.PlacementPosition="PlacementPosition"}(Ie||(Ie={}));const Ee=(0,T.TG)({[Ie.PlacementRegion]:"plcmnt_region",[Ie.PlacementPosition]:"sales_pos"}),Me=e=>{const{region:t}=e;return(({region:e})=>[[Ie.PlacementRegion,e]].filter((([e,t])=>t)).map((([e,t])=>({key:Ee.current[e],value:Array.isArray(t)?t:[t]}))))({region:t})};class xe{get sourceUrl(){if(this._sourceUrl)return this._sourceUrl;this._sourceUrl=S.jG.HostPage.originalUrl;const e=S.jG.CurrentRequestTargetScope.pageType,t=S.jG.HostPage.verticalKey;if(e&&t){const n=e.toLowerCase();(n.indexOf("dhp")>-1||n.indexOf("ntp")>-1)&&(this._sourceUrl="https://"+S.jG.HostPage.hostName+"/"+t+"/"+e)}return this._sourceUrl}get pageType(){if(this._pageType)return this._pageType;const e=S.jG.CurrentRequestTargetScope.pageType,t=S.jG.CurrentRequestTargetScope.ocid;switch(S.jG.AppType){case"edgeChromium":this._pageType=O.Y.EDGECHRNTP;break;case"views":if((0,L.wq)()&&["article","gallery","video","videoinf"].includes(e)){const t=(0,j.v1)();"article"===e?this._pageType="iOS"===(null==t?void 0:t.platform)?O.Y.SAIAR:O.Y.SAAAR:"gallery"===e?this._pageType="iOS"===(null==t?void 0:t.platform)?O.Y.SAIGA:O.Y.SAAGA:"video"===e?this._pageType="iOS"===(null==t?void 0:t.platform)?O.Y.SAIWATCH:O.Y.SAAWATCH:"videoinf"===e&&(this._pageType="iOS"===(null==t?void 0:t.platform)?O.Y.SAIVI:O.Y.SAAVI)}else if("article"===e)this._pageType=this.isWindowsViewsPage(t)?O.Y.WINAR:O.Y.WEBCOMPAR;else if("gallery"===e)this._pageType=this.isWindowsViewsPage(t)?O.Y.WINGA:O.Y.WEBCOMPGA;else if("video"===e)this._pageType=O.Y.WATCH;else{new Set(["topic","source"]).has(e)&&(this._pageType=O.Y.VerticalLandingPage)}break;case"gaming":case"hub":case"sports":this._pageType=O.Y.VerticalLandingPage;break;case"windows":location.href.includes("feed/interest/following")?this._pageType=O.Y.WINWEB:this._pageType=e;break;case"channeldesktop":this._pageType=O.Y.SKYPEDESKTOPFEED;break;default:this._pageType=e}return this._pageType}constructor(e){this.config=e,this.riverNativeAdCount=0,this.reservedRiverNativeAdCount=0,this.dualWideRiverNativeAdCount=0,this.halfRiverNativeAdCount=0,this.beaconService=new f.A,this.cookieService=new _.N,this.ecasession=o.Lr.Ecasession;const t=U._.getInstance().rootReducer;if("edgeChromium"===S.jG.AppType){const e=t.connector(B.z.ChromiumPageSettings);e&&(this.anaheimPageLayout=e.getCurrentState().currentLayout)}const n=t.connector(B.z.SharedState);n&&n.getCurrentState().useHistory?(0,$.lY)().addSwitchListener(this.onPivotSwitch.bind(this),W.I.Monetization):(0,H.l)().addSwitchListener(this.onPivotSwitch.bind(this),W.I.Monetization)}async fetchSAMAds(e,t=!1,n=!1,i=null,r,u){var p,h,g,m;if(!e||!e.placements||e.placements.length<1)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.rmC,"Invalid request to fetch native ads","No placements found in the request"));const f=e.pageType||this.pageType;if(!f)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.rmC,"Invalid request to fetch native ads","No page type found"));const v="ru-xl"===e.locale?"en-xl":e.locale,y=null===S.jG||void 0===S.jG||null===(p=S.jG.HostPage)||void 0===p?void 0:p.verticalKey,C=null===S.jG||void 0===S.jG||null===(h=S.jG.CurrentRequestTargetScope)||void 0===h?void 0:h.audienceMode,w=null===S.jG||void 0===S.jG||null===(g=S.jG.CurrentRequestTargetScope)||void 0===g?void 0:g.ocid,T=this.riverNativeAdCount,k=this.reservedRiverNativeAdCount,P=this.dualWideRiverNativeAdCount,A=this.halfRiverNativeAdCount;if(e.enableNativeAdXandr){const t={placements:this.getPlacementsForXandr(e,f)};return Ce.fetchAds(t,{rid:this.getImpressionId(),prid:e.prid,pageType:f,locale:v,verticalName:y,audienceMode:C,ocid:w,flightKeywords:e.xandrFlightKeywords,previousRiverNativeAdCount:T,previousReservedRiverNativeAdCount:k,previousRiverDualWideNativeAdCount:P,previousRiverHalfNativeAdCount:A})}this._isSuperAppPage=this.isSuperAppPage(f,e.appName),this._isChannelAppPage=this.isChannelAppPage(f,e.appName),this._isMsnHpMobileAppPage=this.isMsnHpMobileAppPage(f,e.appName);const I=this.isNotMyFeed(),E=this.getImpressionId(),M=!this._isSuperAppPage&&this.cookieService.getBrowserOptoutStatus(),x=!this._isSuperAppPage&&await(0,N.UF)(),L=this.getMuid(e.muid),D=e.partnerId||S.jG.CurrentRequestTargetScope.pageType,{anaheimColLayout:O}=e,B=!!window.__tcfapi;x||this._isSuperAppPage||!t||(this.ecasession=(0,F.ej)(o.yV.TaboolaSessionCookieName)||this.ecasession);const _=this._isSuperAppPage||this._isChannelAppPage||this._isMsnHpMobileAppPage||!(!R.Al.ClientSettings||!R.Al.ClientSettings.deviceFormFactor||"phone"!==R.Al.ClientSettings.deviceFormFactor);void 0===this.isAdBlock&&(this.config&&this.config.sendAdBlockDetection?this.isAdBlock=function(){if((0,q.$o)().supported){const e=(0,q.$o)().getObject("BT_AA_DETECTION",void 0);if(void 0!==e)return!1===e.acceptable}return!1}():this.isAdBlock=!1);const U={adRefreshVariant:e.adRefreshVariant??"",locale:v,rid:E,partnerId:D,content:{sourceUrl:this.sourceUrl,pageType:f,previousReservedRiverNativeAdCount:k,previousRiverDualWideNativeAdCount:P,previousRiverHalfNativeAdCount:A,previousRiverNativeAdCount:T,verticalName:y,anaheimPageLayout:this.anaheimPageLayout,anaheimColLayout:O,isXfeed:I,audienceMode:C},user:{muid:L,browserOptOut:M,isAdblock:this.isAdBlock,gdpr:B},placements:this.getPlacements(e,f),extensions:this.getExtensions(this.lastResponseMetadata,this.ecasession),isCookieWallPresent:x,isPeregrine:!0,device:{isMobile:_}};(0,Te.Z)(e.tmax)&&(U.tmax=e.tmax),(0,Te.Z)(e.tmaxbidder)&&(U.tmaxbidder=e.tmaxbidder);this.config&&this.config.enablePrerenderAdsAuctionFlag&&(0,z.N)()&&(U.content.prerender=r?1:0);const W=(0,F.ej)(o.il.BCPCookieKey);var H;("bingHomepage"===S.jG.AppType&&W&&(U.user.bcp=W),this._isSuperAppPage&&(U.app={adid:e.adid,anid:e.anid,muid:e.muid,sapphireid:e.sapphireid,version:e.clientVersion,bundle:e.packageName}),(0,z.N)())&&(U.extensions.impressedCrids=be.k.attachCridsToRequest(null==U||null===(H=U.placements[0])||void 0===H?void 0:H.region));null!==(m=this.config)&&void 0!==m&&m.enableAdTargetingKeywords&&(U.keywords=(()=>{const e=[];for(const t in Ae.current){const n=Ae.current[t],i=Pe.getMetadata(t);i&&e.push({key:n,value:Array.isArray(i)?i:[i]})}return e})());const $=i||o.Lr.SamDomain,G=n?o.Lr.SamOpenRtbEndpoint:o.Lr.SamEndpoint,V=new URL(G,$),j=n?this.createOpenRtbRequest(U):U,K=JSON.stringify(j),Q=!0===R.Al.IsPrerender?performance.now()-(0,d.TZ)(l.DB):performance.now();return(0,d.su)(a.qG.RequestInitiated,Q),this.stampSamRequestIndices(e.placements),this.fetchSAMAdsCSR(K,v,L,V.href,f,j,r,n,u)}stampSamRequestIndices(e){let t="";e.forEach((e=>e.indices.forEach((n=>{t+=`${e.region}-${n}|`})))),b.M0.addOrUpdateTmplString(t)}generateSourceUrl(){const e=S.jG.CurrentRequestTargetScope.pageType;let t=S.jG.HostPage.originalUrl;const n=S.jG.HostPage.verticalKey;if(e&&n){const i=e.toLowerCase();(i.indexOf("dhp")>-1||i.indexOf("ntp")>-1)&&(t="https://"+S.jG.HostPage.hostName+"/"+n+"/"+e)}return t}processAdResponse(e,t){if(200!==e.status)return 204===e.status?(b.M0.sendAppErrorEvent((0,s.Tr)(c.vvT,"No content received from SAMRTB Ajax",`Status: ${e.status}, StatusText: ${e.statusText}, request: ${t}`)),(0,s.H)(c.jZQ,"Get 204 error from SAMRTB Ajax",`Status: ${e.status}, StatusText: ${e.statusText}, request: ${t}`,{shouldSampleErrorsForTreatement1:!0}),this.config&&this.config.useEmptyPlacementsForNoContent?{placements:[]}:void 0):void b.M0.sendAppErrorEvent((0,s.Tr)(c.I2B,"Invalid response from SAMRTB Ajax",`Status: ${e.status}, StatusText: ${e.statusText}, request: ${t}`));try{const t=JSON.parse(e.response);if(!t)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.K8d,"Invalid json response from SAMRTB",`Status: ${e.status}, Invalid json: ${e.response}`));const n=t.metaData;return this.processMetaData(n),this.beaconService.fireRequestLevelBeacons(n.requestLevelBeaconUrls),t}catch(t){return void(0,s.OO)(t,c.ryt,"Failed to process SAMRTB response",`Status: ${e.status}, json: ${e.response}`)}}processOpenRtbAdResponse(e,t){if(200!==t.status)return 204===t.status?(b.M0.sendAppErrorEvent((0,s.Tr)(c.vvT,"No content received from SAMRTB Ajax",`Status: ${t.status}, StatusText: ${t.statusText}`)),(0,s.H)(c.jZQ,"Get 204 error from SAMRTB Ajax",`Status: ${t.status}, StatusText: ${t.statusText}`,{shouldSampleErrorsForTreatement1:!0}),this.config&&this.config.useEmptyPlacementsForNoContent?{placements:[]}:void 0):void b.M0.sendAppErrorEvent((0,s.Tr)(c.I2B,"Invalid response from SAMRTB Ajax",`Status: ${t.status}, StatusText: ${t.statusText}`));try{const n=JSON.parse(t.response);if(!n)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.K8d,"Invalid json response from SAMRTB",`Status: ${t.status}, Invalid json: ${t.response}`));const i=this.convertOpenRtbResponseToNativeAdResponse(e,n),r=i.metaData;return this.processMetaData(r),this.beaconService.fireRequestLevelBeacons(r.requestLevelBeaconUrls),i}catch(e){return void(0,s.OO)(e,c.ryt,"Failed to process SAMRTB response",`Status: ${t.status}, json: ${t.response}`)}}createOpenRtbRequest(e){var t;const n={native:{assets:[{id:1,img:{type:I.Large}}]}},i=JSON.stringify(n);let r=1;const a=e.placements.flatMap((t=>t.indices.map((n=>({id:(r++).toString(),tagid:`${e.content.pageType}-${t.region}-${n}`,native:{request:i},ext:{msn:{index:n,region:t.region}}}))))),s={url:e.content.sourceUrl,ext:{locale:e.locale,msn:{pageType:e.content.pageType,verticalName:e.content.verticalName,anaheimPageLayout:e.content.anaheimPageLayout,isXfeed:e.content.isXfeed,audienceMode:e.content.audienceMode,isPeregrine:e.isPeregrine,previousReservedRiverNativeAdCount:e.content.previousReservedRiverNativeAdCount,previousRiverDualWideNativeAdCount:e.content.previousRiverDualWideNativeAdCount,previousRiverHalfNativeAdCount:e.content.previousRiverHalfNativeAdCount,previousRiverNativeAdCount:e.content.previousRiverNativeAdCount,partnerId:e.partnerId}}},c={id:o.Lr.PublisherId},d={id:V(),imp:a,user:{dnt:e.user.browserOptOut?1:0,ext:{anid:"",muid:null===(t=e.user)||void 0===t?void 0:t.muid,msn:{isCookieWallPresent:e.isCookieWallPresent,bcp:e.user.bcp}}},device:{devicetype:e.device.isMobile?A.Mobile:A.PC,ext:{isAdBlock:e.user.isAdblock}},ext:{sessionId:e.rid,admConfiguration:{useAdmObject:!0,useMultipleAdms:!0,maxAdmCount:999},msn:{adRefreshVariant:e.adRefreshVariant,metadata:e.extensions}}};return this._isSuperAppPage?d.app={id:o.Lr.AppId,bundle:e.app.bundle,ver:e.app.version,content:s,publisher:c,ext:{msn:{adid:e.app.adid,sapphireId:e.app.sapphireid}}}:d.site={content:s,publisher:c},d}createSamRtbXmlHttpRequest(e,t,n){const i=new XMLHttpRequest;return i.open(o.il.Method,n,!0),i.withCredentials=!0,i.timeout=this.config&&this.config.auctionTimeoutOverride?this.config.auctionTimeoutOverride:o.il.Timeout,i.setRequestHeader(o.il.ContentTypeKey,o.il.ContentType),i.setRequestHeader(o.il.FlightIdKey,R.Al.CurrentFlights),i.setRequestHeader(o.il.CacheControlKey,o.il.CacheControl),i.setRequestHeader(o.il.MarketKey,e),t&&i.setRequestHeader(o.il.ClientIdKey,t),!this._isSuperAppPage&&(0,F.ej)(o.yV.AppAnonCookieExist)&&i.setRequestHeader(o.il.AuthCookieNameKey,D.Ji),i}async fetchSAMAdsCSR(e,t,n,i,r,o,l,u,p){return new Promise((h=>{try{const g=this.createSamRtbXmlHttpRequest(t,n,i);g.onload=()=>{(async(e,t,n=!1)=>{const i=performance.getEntriesByName&&performance.getEntriesByName(e)&&performance.getEntriesByName(e)[0],r=(0,d.O0)(a.qG.RequestInitiated);G(0,t,n,r,i,!1,((e,t)=>{(0,d.su)(e,t)}),((e,t,n)=>{(0,d.O_)(e,t,n)}))})(i,R.Al.IsPrerender,l),h(u?this.processOpenRtbAdResponse(o,g):this.processAdResponse(g,e))},g.ontimeout=()=>{b.M0.sendAppErrorEvent((0,s.Tr)(c.vvT,"Timeout calling SAMRTB Ajax",`pageType: ${r}, status: ${g.status}, StatusText: ${g.statusText}, StartTime: ${m}, EndTime: ${(new Date).toISOString()}`)),(0,s.H)(c.e6B,"Timeout calling SAMRTB Ajax",`pageType: ${r}, status: ${g.status}, StatusText: ${g.statusText}, StartTime: ${m}, EndTime: ${(new Date).toISOString()}`,{shouldSampleErrorsForTreatement1:!0}),h(void 0)},g.onerror=()=>{b.M0.sendAppErrorEvent((0,s.Tr)(c.I2B,"Error calling SAMRTB Ajax",`pageType: ${r}, status: ${g.status}, StatusText: ${g.statusText}, StartTime: ${m}, EndTime: ${(new Date).toISOString()}`)),h(void 0)};const m=(new Date).toISOString();g.send(e),p&&p()}catch(e){(0,s.OO)(e,c.ryt,"Failed to get response from SAMRTB call",`pageType: ${r}`),h(void 0)}}))}convertOpenRtbResponseToNativeAdResponse(e,t){var n,i;const r=(null===(n=t.seatbid)||void 0===n||null===(n=n.flatMap((e=>e.bid)))||void 0===n?void 0:n.filter((e=>e.ext.admObjects.length>0)))??[],o=new Map;e.imp.forEach((e=>o.set(e.id,e)));return{placements:r.map((e=>{const t=e.ext.admObjects[0].native.ext.msn.mappedRegion,n=e.ext.admObjects.flatMap((e=>e.native.eventtrackers)),{geminiViewabilityDataJson:i,beaconsSupportHttpPOST:r}=e.ext.admObjects[0].native.ext.msn,a=e.ext.admObjects[0].native.privacy,s=[],c=[],d=[],l=[];null==n||n.forEach((e=>{var t;null!==(t=e.ext)&&void 0!==t&&null!==(t=t.msn)&&void 0!==t&&t.isBingTracker&&e.event==M.Viewed?l.push(e.url):e.method==x.JavaScript?d.push(e.url):e.event==M.Impression&&e.method==x.Image?s.push(e.url):e.event==M.Viewed&&e.method==x.Image&&c.push(e.url)}));const u=e.ext.admObjects.flatMap((e=>e.native.link.clicktrackers)),p=e.ext.admObjects[0].native.ext.msn.fireEncodedBeacons,h=JSON.stringify({tvb:c,trb:s,tcb:u,tjb:d,p:e.ext.bidderId,e:p}),g=e.ext.admObjects.map((e=>{const t=e.native,n={title:null,adSelectionReason:t.ext.msn.adSelectionReason,description:null,url:t.link.url,sourceName:null,adChoicesUrl:t.ext.adChoicesUrl,imageUrl:null,imageHeight:null,imageWidth:null,images:null,clickBeacons:null,uniqueId:t.ext.msn.uniqueId,beaconsJson:null,originalImageWidth:null,originalImageHeight:null,verificationParameters:t.ext.msn.verificationParameters,ext:t.ext.msn.ext,assets:[]};return n.clickBeacons=JSON.stringify({tcb:t.link.clicktrackers}),e.native.assets.forEach((e=>{if(e.ext.msn.isRtbAsset)e.img?n.assets.push({w:e.img.w,h:e.img.h,url:e.img.url,alt:e.img.ext.alt,ext:e.img.ext.msn}):n.assets.push(e);else if(e.data){const t=e.data.value;switch(e.data.type){case P.Sponsored:n.sourceName=t;break;case P.Description:n.description=t}}else if(e.img){const{url:t,w:i,h:r}=e.img;switch(e.img.type){case I.Large:n.imageUrl=t,n.imageWidth=i,n.imageHeight=r,n.originalImageHeight=e.img.ext.msn.originalImageHeight,n.originalImageWidth=e.img.ext.msn.originalImageWidth;break;case I.MultipleImages:n.images||(n.images=[]),n.images.push({url:t,alt:e.img.ext.alt,ext:e.img.ext.msn})}}else null!=e.title&&(n.title=e.title.text)})),n})),m=o.get(e.impid);return{items:g,privacyUrl:a,adServedUrls:s,jsTrackerUrls:d,visibilityUrls:c,beaconsJson:h,bingTrackerUrls:l,beaconsSupportHttpPOST:r,geminiViewabilityDataJson:i,region:t,index:m.ext.msn.index}})),metaData:null===(i=t.ext)||void 0===i||null===(i=i.msn)||void 0===i?void 0:i.metadata}}mapPlacementRegion(e,t){return t==O.Y.EDGECHRNTP&&o.d5[e.region]||e.region}updatePlacementStrictIndices(e,t){K.VR.includes(e.region)&&(t.isStrictIndices=!0),void 0!==e.isStrictIndices&&(t.isStrictIndices=e.isStrictIndices)}updateRequestedPlacementsInfo(e){const t=e.region.toLocaleLowerCase();t===o.Lr.RiverRegion?this.riverNativeAdCount+=e.indices.length:t===o.Lr.ReservedRiver?this.reservedRiverNativeAdCount+=e.indices.length:t===o.Lr.RiverDoubleWide?this.dualWideRiverNativeAdCount+=e.indices.length:t!==o.Lr.RiverHalf&&t!==o.Lr.RiverHalfTextOnly||(this.halfRiverNativeAdCount+=e.indices.length)}getPlacementsForXandr(e,t){const n=[];return e.placements.forEach((e=>{if(e.region&&e.indices&&e.indices.length){const{adContainerIds:i,indices:r,img:o}=e,a={region:this.mapPlacementRegion(e,t),indices:r,img:o,adContainerIds:i};this.updatePlacementStrictIndices(e,a),n.push(a),this.updateRequestedPlacementsInfo(e)}})),n}getPlacements(e,t){const n=[];return e.placements.forEach((e=>{if(e.region&&e.indices&&e.indices.length){var i;const{assets:r,indices:a,img:s,extensions:c}=e,d=t==O.Y.EDGECHRNTP&&o.d5[e.region]||e.region,l=s?{assets:r,region:d,indices:a,img:s}:{assets:r,region:d,indices:a};c&&(l.extensions=c),null!==(i=this.config)&&void 0!==i&&i.enableAdTargetingKeywords&&(l.keywords=Me({region:d})),this.updatePlacementStrictIndices(e,l),n.push(l),this.updateRequestedPlacementsInfo(e)}})),n}processMetaData(e){if(this._isSuperAppPage||this._isChannelAppPage||this._isMsnHpMobileAppPage)return;const t=e&&e.taboola&&e.taboola.sessionId;!this.isCookieWallPresent&&t&&(0,F.sq)(o.yV.TaboolaSessionCookieName,t,.042),this.lastResponseMetadata=this.mergeMetadata(this.lastResponseMetadata,e),this.cookieService.updateMsaOptOutCookie(e)}mergeMetadata(e,t){return e?t?(t.taboola=this.mergePartnerMetadata(e.taboola,t.taboola),t):e:t}mergePartnerMetadata(e,t){return t=t||{},e&&e.sessionId&&!t.sessionId&&(t.sessionId=e.sessionId),t}getImpressionId(){return this.config&&this.config.auctionRidOverride&&S.jG.ActivityIdLowerCaseNoHypens?S.jG.ActivityIdLowerCaseNoHypens:this.lastResponseMetadata&&this.lastResponseMetadata.pageViewId?this.lastResponseMetadata.pageViewId:b.M0.getRequestId()}clearPreviousInfo(){var e;this.riverNativeAdCount=0,this.reservedRiverNativeAdCount=0,this.dualWideRiverNativeAdCount=0,this.halfRiverNativeAdCount=0,null!==(e=this.lastResponseMetadata)&&void 0!==e&&e.pageViewId&&delete this.lastResponseMetadata.pageViewId}getExtensions(e,t){const n={taboola:(e=e||{taboola:{}}).taboola};return n.taboola.sessionId||(n.taboola.sessionId=t),n}getMuid(e){return this.isCookieWallPresent?null:e||(0,F.jG)()}onPivotSwitch(e){if(!e.oldSelection)return;const t=e.newSelection.pivotId;t&&t.toLowerCase()!==o.E7.EditInterestPivotId&&(this.pivotId=t)}isNotMyFeed(){return!!this.pivotId&&this.pivotId.toLowerCase()!==o.E7.MyFeedPivotId&&this.pivotId.toLowerCase()!==o.E7.StripeMyFeedPivotId}isWindowsViewsPage(e){return!!e&&("windirect"===(e=e.toLowerCase())||e.startsWith("winp"))}isSuperAppPage(e,t){return!!(e&&["saa","sai","mmx","mobilefeededge"].includes(e.toLowerCase())&&["SuperAppHP","SuperAppViews"].includes(t))}isChannelAppPage(e,t){return!(!e||!["skypefeed","outlookfeed"].includes(e.toLowerCase())||"Channel"!==t)}isMsnHpMobileAppPage(e,t){return!(!e||!["mobilefeed"].includes(e.toLowerCase())||"prime_mobile"!==t)}}var Le,Re=n(37963),De=n(8991),Fe=n(69425),Oe=n(82486);!function(e){e.success="success",e.leadgen="leadgen",e.cmsBackfill="cmsBackfill",e.fail="fail"}(Le||(Le={}));const Be={},Ne=(e,t)=>{var n;null!==(n=S.jG.CurrentRequestTargetScope)&&void 0!==n&&n.pageExperiments.includes("prg-ad-cms-cnt")&&(Be[t]||(Be[t]={[Le.success]:0,[Le.leadgen]:0,[Le.cmsBackfill]:0,[Le.fail]:0}),Be[t][e]++,b.M0.sendClientLogEvent({pb:{clientLogName:"NativeAdCMSBackfillCount",region:t,...Be[t]}}))};function _e(e){const t=Ue(e);if(!t)return;const n=t.contentId;return decodeURIComponent(n)!==n?n:encodeURIComponent(n)}function Ue(e){var t;const n=new RegExp("^.*/(?<contentPrefix>[Aa][Rr]||[Ss]{2}||[Vv][Ii]||[Vv][Dd]||[Vv][Pp]||[Vv][Ss])-(?<contentId>[a-zA-Z0-9]{6,8})(([?].*)||#.*)?$"),i=new RegExp("^.*/(?<contentPrefix>[Vv][Ii])-(?<contentId>.*?)(([?].*)||#.*)?$"),r=e.match(n)||e.match(i);return r&&null!==(t=r.groups)&&void 0!==t&&t.contentId&&"vn/video"!==r.groups.contentId?r.groups:null}class We{async getLeadgenAds(e){if(!e||!e.placements||e.placements.length<1)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.ru5,"Get Leadgen content failed","No placements found in the request"));let t;try{const n=S.jG.HostPage.originalUrl;t=_e(n);const i=this.getMuid(e.muid),r=(0,R.nP)().CurrentFlights,{w:a,h:d}=e.placements[0].img||{},l={id:t,url:n,scoreCategories:e.scoreCategories,market:e.locale,user:i,fdhead:r,w:a,h:d},u=JSON.stringify(l),p=new URL(o.Lr.LeadgenEndpoint,`${S.jG.AssetsUrl}/service/Finance/`),h="finance-utils-peregrine",g=ie.$D.getOneServiceParamsWithoutAuth(null,h,!1);p.search=v.c.keyValueArrayToQueryString(g);const m=(0,w.w)((async()=>{const e=await fetch(p,{method:"POST",body:u,timeoutMs:o.Lr.LeadgenAdServiceTimeout});if(e.ok)return e.json();b.M0.sendAppErrorEvent((0,s.Tr)(c.ru5,"Get Leadgen content failed",`Invalid response from Leadgen, ${e.statusText}, contentId: ${t}`))}),"getLeadgenAds"),f=await m;if(!f)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.ru5,"Get Leadgen content failed",`contentId: ${t}`));return f.items}catch(e){return void b.M0.sendAppErrorEvent((0,s.Tr)(c.ru5,"Get Leadgen content failed",`Error while fetching Leadgen Ad  ${e}, contentId: ${t}`))}}getMuid(e){return e||(0,F.jG)()}}class He{constructor(e,t,n){this.adTemplateConfig=e,this.adServiceConfig=t,this.adBeaconServiceConfig=n,this.beaconService=new f.A(this.adBeaconServiceConfig),this.cmsService=new k,this.leadgenAdService=new We,this.samService=new xe(this.adServiceConfig),this.templateService=new Re.E,this.cmsNativeAdsItemsMap=new Map,this.cmsRetryCount=0,this.backfillIndex=0,this.leadgenIndex=0,this.cmsAdsCounter=0,this.callbackFnPlacementList=[],this.callbackList=[]}resetNativeAdService(){this.backfillIndex=0,this.leadgenIndex=0,this.cmsAdsCounter=0,this.callbackFnPlacementList.length=0,this.callbackList.length=0,this.samService.clearPreviousInfo()}async fetchNativeAds(e,t){var n,i,r;if(!e||!e.placements||0===e.placements.length)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.Zmj,"Fetch NativeAd failed","No placements found in the request"));const a="true"===(null===(n=v.c.getParamsWithItems((0,te.zp)(),!0,"citem").find((({key:e})=>"nativeAdDebug"===e)))||void 0===n?void 0:n.value);if(e.locale||(e.locale=R.Al.Locale),"ru-xl"===e.locale&&(e.locale="en-xl"),!e.locale)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.Zmj,"Fetch NativeAd failed",`No locale found, headData.Locale: ${R.Al.Locale}, adRequest.locale: ${e.locale}`));var d;null!==(i=this.adServiceConfig)&&void 0!==i&&i.enableNativeAdXandr&&(e.enableNativeAdXandr=!0,e.xandrFlightKeywords=null===(d=this.adServiceConfig)||void 0===d?void 0:d.xandrFlightKeywords);const l=this.buildAdResponse(e);!this.leadgenItems&&e.enableNativeAdLeadgen&&(this.leadgenItems=await this.leadgenAdService.getLeadgenAds(e));const u=!this.leadgenItems||0==this.leadgenItems.length,p=S.jG.IsChinaCompliance?"https://srtb.msn.cn/":null,h=u?this.samService.fetchSAMAds(e,!1,!0===(null===(r=this.adTemplateConfig)||void 0===r?void 0:r.useOpenRtb),p,null,t):Promise.resolve(void 0),g=e.locale,m=o.Wi[g];if(!this.cmsItems){const e=await this.cmsService.getCMSList(m,g);e&&(this.cmsItems=e.items)}const f=await h;return this.updateAdResponse(l,this.leadgenItems,this.cmsItems,m,e,f),a?{...l,debugInfo:{adRequest:e}}:l}updateAdResponse(e,t,n,i,r,o){const u=!n||0==n.length,p=!o||!o.placements||0==o.placements.length,h=!t||0==t.length,{enableNativeAdXandr:m,enableExtraImageData:f,enableNativeAdLeadgen:v}=r;if(u)if(v){if(h&&p)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.v73,"Fetch NativeAd failed",`Unable to retrieve backfill list id: ${i}, SAM response and Leadgen response`));h?b.M0.sendAppErrorEvent((0,s.Tr)(c.ru5,"Fetch Leadgen ads failed",`Unable to retrieve backfill list id: ${i} and Leadgen response`)):b.M0.sendAppErrorEvent((0,s.Tr)(c.v73,"Unable to retrieve backfill list",`Backfill list id: ${i}`))}else{if(p)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.v73,"Fetch NativeAd failed",`Unable to retrieve backfill list id: ${i} and SAM response`));b.M0.sendAppErrorEvent((0,s.Tr)(c.v73,"Unable to retrieve backfill list",`Backfill list id: ${i}`))}const y=this.mapSAMPlacements(o);return e.pageViewId=o&&o.metaData&&o.metaData.pageViewId,e.placements.forEach((i=>{var r,o,p;const v=i.region+i.regionIndex,S=y.get(v);let C;var w;null!==(r=this.adServiceConfig)&&void 0!==r&&r.enableBuyDirectAd&&"infopane"==i.region&&this.buyDirectItems&&(C=null===(w=e.buyDirectAdIndex)||void 0===w?void 0:w.findIndex((e=>e===i.regionIndex)));if(null!==(o=this.adServiceConfig)&&void 0!==o&&o.enableBuyDirectAd&&"infopane"==i.region&&this.buyDirectItems&&"number"==typeof C&&-1!=C&&null!==(p=this.buyDirectItems)&&void 0!==p&&p[C]){var T;const e=this.buyDirectItems[C],t={title:e.title,destinationUrl:e.url+`&PageId=${b.M0.getRequestId()}&ct=ShoppingNTPInfopane`,imageUrl:this.updateImageUrl(i,e.imageUrl),providerName:(null===(T=e.provider)||void 0===T?void 0:T.name)||"Buy with Microsoft"};i.items.push(t),i.privacyUrl=e.privacyUrl,i.isBackfill=!1}else if(!h&&t[this.leadgenIndex%t.length]){const e=t[this.leadgenIndex%t.length];this.leadgenIndex++;const n={title:e.title,destinationUrl:e.url,imageUrl:e.imageUrl,providerName:e.sourceName,noAdLabel:e.noAdLabel};i.items.push(n),this.updateTemplate(i),Ne(Le.leadgen,v)}else if(S&&S.items&&S.items.length>0){S.items.forEach((e=>{const t={title:e.title,description:e.description,destinationUrl:e.url,imageUrl:e.imageUrl,providerName:e.sourceName,adChoiceIconUrl:e.adChoicesUrl,imageHeight:e.imageHeight,imageWidth:e.imageWidth,clickBeacons:e.clickBeacons,uniqueId:e.uniqueId,feedbackUrl:m?S.feedbackUrl:(0,g.Yf)(e.clickBeacons),verificationParameters:e.verificationParameters,cashback:e.cashback,noAdLabel:e.noAdLabel};var n;((0,g.x4)(t,e.assets),f)&&(t.originalImageHeight=e.originalImageHeight,t.originalImageWidth=e.originalImageWidth,t.providerId=S.providerId,t.isProductAd=Boolean(null===(n=t.assets)||void 0===n?void 0:n.price),t.images=e.images);i.items.push(t)})),i.privacyUrl=S.privacyUrl,i.adServedUrls=S.adServedUrls,i.jsTrackerUrls=S.jsTrackerUrls,i.visibilityUrls=S.visibilityUrls,i.beaconsJson=S.beaconsJson,i.bingTrackerUrls=S.bingTrackerUrls,i.beaconsSupportHttpPOST=S.beaconsSupportHttpPOST,i.geminiViewabilityDataJson=S.geminiViewabilityDataJson,i.providerId=S.providerId,i.crids=S.crids,i.iasId=V(),this.updateTemplate(i),this.beaconService.sendBeaconForAdServed({beaconsJson:i.beaconsJson,beaconsSupportHttpPOST:i.beaconsSupportHttpPOST}),this.beaconService.fireJSTrackers(S.beaconsJson,e.shouldUseWindowVisibilityTrackingForXandr);const t=!0===R.Al.IsPrerender?performance.now()-(0,d.TZ)(l.DB):performance.now();(0,d.su)(a.qG.TimeToServeAd,t),Ne(Le.success,v)}else if(u)b.M0.sendAppErrorEvent((0,s.Tr)(c.m9g,"Unable to backfill invalid sam placement",`Placement key: ${v}`)),this.updateTemplate(i),Ne(Le.fail,v);else{const e=this.backfillIndex++%n.length,t=n[e],r={title:t.title,destinationUrl:t.url,imageUrl:this.updateImageUrl(i,t.imageUrl),providerName:t.provider?t.provider.name:""};i.items.push(r),i.privacyUrl=t.privacyUrl,this.updateTemplate(i),Ne(Le.cmsBackfill,v)}})),e}updateTemplate(e){var t;(null===(t=e.items)||void 0===t?void 0:t.length)>0&&this.templateService.updateTemplate(e,this.adTemplateConfig)}addToCallbackList(e){e&&e.length>0&&this.callbackList.push(...e)}async fetchSamAds(e,t=!1,n,i){var r,o;if(!e||!e.placements||0===e.placements.length)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.Zmj,"Fetch NativeAd failed","No placements found in the request"));if(e.locale||(e.locale=R.Al.Locale),"ru-xl"===e.locale&&(e.locale="en-xl"),!e.locale)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.Zmj,"Fetch NativeAd failed",`No locale found, headData.Locale: ${R.Al.Locale}, adRequest.locale: ${e.locale}`));this.addToCallbackList(n),this.locale=e.locale;const a=(null===(r=this.adTemplateConfig)||void 0===r?void 0:r.msxServiceUrl)||(S.jG.IsChinaCompliance?"https://srtb.msn.cn/":null),d=this.samService.fetchSAMAds(e,t,!0===(null===(o=this.adTemplateConfig)||void 0===o?void 0:o.useOpenRtb),a,i,null);return{placeHolderResponse:this.buildAdResponse(e),samResponse:await d}}async fetchCmsAds(e,t,n){if(!e||!e.placements||0===e.placements.length)return void b.M0.sendAppErrorEvent((0,s.Tr)(c.Zmj,"Fetch NativeAd failed","No placements found in the request"));let i=R.Al.Locale;if("ru-xl"===i&&(i="en-xl"),!this.cmsNativeAdsItemsMap.has(t)){const e=await this.cmsService.getCMSList(t,i);e&&e.id&&e.items&&this.cmsNativeAdsItemsMap.set(t,e.items)}const r=this.buildAdResponse(e),o=this.cmsNativeAdsItemsMap.has(t)?this.cmsNativeAdsItemsMap.get(t):[];for(const e of r.placements){const t=n.shift();let r,a;if(t){let e=parseInt(t,10);if(e)e=Math.max(e-1,0),e=e<o.length?e:e%o.length,r=o[e];else{if(!this.cmsNativeAdsItemsMap.has(t)){const e=await this.cmsService.getCMSList(t,i);e&&e.id&&e.items&&this.cmsNativeAdsItemsMap.set(t,e.items)}const e=this.cmsNativeAdsItemsMap.has(t)?this.cmsNativeAdsItemsMap.get(t):[];r=(0,p.Z)(e)[0],r||(r=o[this.cmsAdsCounter%o.length])}}else r=o[this.cmsAdsCounter%o.length];r&&(a={title:r.title,destinationUrl:r.url,imageUrl:this.updateImageUrl(e,r.imageUrl),providerName:r.provider?r.provider.name:""},e.items.push(a),e.privacyUrl=r.privacyUrl),this.updateTemplate(e),this.cmsAdsCounter++}return r}updateSamAdResponse(e,t,n){const i=this.cmsItems,r=this.mapSAMPlacements(t),o=!i||0==i.length;return e.pageViewId=t&&t.metaData&&t.metaData.pageViewId,e.placements.forEach((t=>{var l,p,h,f,v;null!==(l=this.adServiceConfig)&&void 0!==l&&l.enableAdsWaterfall&&"river"===t.region&&t.regionIndex===(null===(p=this.adServiceConfig)||void 0===p?void 0:p.tallAdsIndex)&&(t.region="rivert");const y=t.region+t.regionIndex,S=r.get(y);let C;var w;null!==(h=this.adServiceConfig)&&void 0!==h&&h.enableBuyDirectAd&&"infopane"==t.region&&this.buyDirectItems&&(C=null===(w=e.buyDirectAdIndex)||void 0===w?void 0:w.findIndex((e=>e===t.regionIndex)));if(null!==(f=this.adServiceConfig)&&void 0!==f&&f.enableBuyDirectAd&&"infopane"==t.region&&this.buyDirectItems&&"number"==typeof C&&-1!=C&&null!==(v=this.buyDirectItems)&&void 0!==v&&v[C]){var T;const e=this.buyDirectItems[C],n={title:e.title,destinationUrl:e.url+`&PageId=${b.M0.getRequestId()}&ct=ShoppingNTPInfopane`,imageUrl:this.updateImageUrl(t,e.imageUrl),providerName:(null===(T=e.provider)||void 0===T?void 0:T.name)||"Buy with Microsoft"};t.items.push(n),t.privacyUrl=e.privacyUrl,t.isBackfill=!1}else if(S&&S.items&&S.items.length>0){S.items.forEach((e=>{const n={title:e.title,adSelectionReason:e.adSelectionReason,description:e.description,destinationUrl:e.url,providerName:e.sourceName,adChoiceIconUrl:e.adChoicesUrl,imageUrl:e.imageUrl,imageHeight:e.imageHeight,imageWidth:e.imageWidth,images:e.images,clickBeacons:e.clickBeacons,uniqueId:e.uniqueId,beaconsJson:e.beaconsJson,feedbackUrl:(0,g.Yf)(e.clickBeacons),originalImageWidth:e.originalImageWidth,originalImageHeight:e.originalImageHeight,verificationParameters:e.verificationParameters,ext:e.ext,adScenarioType:e.adScenarioType,cashback:e.cashback,noAdLabel:e.noAdLabel};He.updateAssetVideoField(n,e.assets),(0,g.x4)(n,e.assets),t.items.push(n)}));const e=(0,De.dQ)(t,0);t.videoViewabilityData=e?e.ViewabilityProps:null,t.privacyUrl=S.privacyUrl,t.adServedUrls=S.adServedUrls,t.jsTrackerUrls=S.jsTrackerUrls,t.visibilityUrls=S.visibilityUrls,t.beaconsJson=S.beaconsJson,t.bingTrackerUrls=S.bingTrackerUrls,t.beaconsSupportHttpPOST=S.beaconsSupportHttpPOST,t.geminiViewabilityDataJson=S.geminiViewabilityDataJson,t.providerId=S.providerId,t.crids=S.crids;const i=(0,m.v0)(R.Al.IsPrerender&&!n);n?((0,d.su)(a.qG.TimeToServeAdBackground,i),(0,Oe.lr)().then((()=>{const e=(0,u.Ou)().TTPR;e?(0,d.su)(a.qG.TimeToServeAd,e):(0,s.H)(c.iVH,"Could not find TTPR to set TimeToServeAd")}))):(0,d.su)(a.qG.TimeToServeAd,i)}else if(o)this.handleCmsStandyPlacement(t);else{const e=this.backfillIndex++%i.length,n=i[e],r={title:n.title,destinationUrl:n.url,imageUrl:this.updateImageUrl(t,n.imageUrl),providerName:n.provider?n.provider.name:""};t.items.push(r),t.privacyUrl=n.privacyUrl,t.isBackfill=!0}this.updateTemplate(t)})),e}handleCmsStandyPlacement(e){if(this.cmsItems){const t=this.cmsItems;for(const n of this.callbackFnPlacementList){const i=t[this.backfillIndex++%t.length];if(i){const t={title:i.title,destinationUrl:i.url,imageUrl:this.updateImageUrl(e,i.imageUrl),providerName:i.provider?i.provider.name:""};n.items.push(t),n.privacyUrl=i.privacyUrl,n.isBackfill=!0,this.updateTemplate(n)}}this.callbackList.forEach((e=>{e(this)})),this.callbackList=[],this.callbackFnPlacementList=[]}else e&&this.callbackFnPlacementList.push(e)}loadCmsBackFillList(){let e=this.locale?this.locale:R.Al.Locale;"ru-xl"===e&&(e="en-xl");const t=o.Wi[e];if(t&&!this.cmsItems&&this.cmsService.getCMSList(t,e).then((e=>{e?(this.cmsItems=e.items,this.handleCmsStandyPlacement()):++this.cmsRetryCount<10&&this.loadCmsBackFillList()})),this.adServiceConfig.enableBuyDirectAd){const e=this.locale?this.locale:R.Al.Locale;let t="AA13DgW5";"zh-cn"==e&&(t="BB1m89wA"),this.cmsService.getCMSList(t,e).then((e=>{e&&(this.buyDirectItems=e.items)}))}}async tryGetCmsList(e=0){let t=this.locale?this.locale:R.Al.Locale;"ru-xl"===t&&(t="en-xl");const n=o.Wi[t];if(!n||!t)return;const i=await this.cmsService.getCMSList(n,t);return i||(e<5?await this.tryGetCmsList(++e):void 0)}mapSAMPlacements(e){const t=new Map;return e&&e.placements&&e.placements.forEach((e=>{e.region&&e.index&&t.set(e.region+e.index,e)})),t}buildAdResponse(e){const t=[];e.placements.forEach((e=>{e.region&&e.indices&&e.indices.length&&e.indices.forEach((n=>{const i={region:e.region,regionIndex:n,imageHeight:e.img&&e.img.h&&e.img.h.toString(),imageWidth:e.img&&e.img.w&&e.img.w.toString(),items:[]};t.push(i)}))}));const n=S.jG.LocaleDisplayLanguageString;return{placements:t,adLabelText:(0,g.En)(n),isGreyAdsLabelEnabled:o.Eg.includes(e.locale),shouldUseWindowVisibilityTrackingForXandr:Boolean(e.shouldUseWindowVisibilityTrackingForXandr),privacyUrl:o.Lr.PrivacyUrl}}async loadBuyDirectAd(){const e=this.locale?this.locale:R.Al.Locale;if(!this.buyDirectItems){let t="AA13DgW5";"zh-cn"==e&&(t="BB1m89wA");const n=await this.cmsService.getCMSList(t,e);n&&(this.buyDirectItems=n.items)}}updateImageUrl(e,t){return e&&e.imageWidth&&e.imageHeight&&t?t.replace("w=624","w="+e.imageWidth).replace("h=350","h="+e.imageHeight):t}static updateAssetVideoField(e,t){t&&t.length>0&&t.forEach((t=>{const n=(0,h.Z)(t,"video.vasttag");n&&(e.video=n)}))}getAdTagStyleByLocale(e){const t=S.jG.LocaleDisplayLanguageString;let n=e??R.Al.Locale;return"ru-xl"===n&&(n="en-xl"),{adLabelText:(0,g.En)(t),isGreyAdsLabelEnabled:o.Eg.includes(n)}}}(0,r.gn)([(0,Fe.Et)(c.rEw,"fetchNativeAds")],He.prototype,"fetchNativeAds",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"updateAdResponse")],He.prototype,"updateAdResponse",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"updateTemplate")],He.prototype,"updateTemplate",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"fetchSamAds")],He.prototype,"fetchSamAds",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"fetchCmsAds")],He.prototype,"fetchCmsAds",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"updateSamAdResponse")],He.prototype,"updateSamAdResponse",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"handleCmsStandyPlacement")],He.prototype,"handleCmsStandyPlacement",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"loadCmsBackFillList")],He.prototype,"loadCmsBackFillList",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"tryGetCmsList")],He.prototype,"tryGetCmsList",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"mapSAMPlacements")],He.prototype,"mapSAMPlacements",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"buildAdResponse")],He.prototype,"buildAdResponse",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"updateImageUrl")],He.prototype,"updateImageUrl",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"getAdTagStyleByLocale")],He.prototype,"getAdTagStyleByLocale",null),(0,r.gn)([(0,Fe.Et)(c.rEw,"updateAssetVideoField")],He,"updateAssetVideoField",null);const $e=(0,Fe.Et)(c.Evv,"getNativeAdService")(((e,t)=>{const n=T.Gq.get("__NativeAdServiceInstance__",(()=>new He(e||{},t)));return n.resetNativeAdService(),n}))},64518:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var i=n(21882);const r=new class{constructor(){this.excludedPlacement=[i.yp.inarticle,i.yp.interstitialgallery,i.yp.inarticlecarousel],this.dedupeIds=new Array,this.cacheSize=0}setCacheSize(e){for(;this.dedupeIds.length>e;)this.dedupeIds.shift();this.cacheSize=e}addDedupeIds(e){this.cacheSize&&e&&0!=e.length&&e.forEach((e=>{const t=this.dedupeIds.findIndex((t=>t===e));if(t>-1)return this.dedupeIds.splice(t,1),void this.dedupeIds.push(e);this.dedupeIds.length==this.cacheSize&&this.dedupeIds.shift(),this.dedupeIds.push(e)}))}getDedupeIds(){return this.dedupeIds}attachCridsToRequest(e){return this.excludedPlacement.includes(e)?[]:this.getDedupeIds()}}},37963:function(e,t,n){"use strict";n.d(t,{E:function(){return yn}});var i=n(33940),r=n(23019),o=n(82694),a=n(7476),s=n(88826),c=n(90351),d=n(25193),l=n(52965),u=n(72554),p=n(13578),h=n(92170),g=n(11935),m=n(4935),f=n(40252),v=n(31011),y=n(21882);const S={configType:"prg-d-rating-n-y",region:[y.yp.river],template:(e,t)=>o.SI.RatingDefaultYellowNonDRStatic,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},C={configType:"prg-h-rating-n-r",region:[y.yp.river],template:(e,t)=>o.SI.RatingHighlightRedNonDR,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},w={configType:"prg-h-rating-n-y",region:[y.yp.river],template:(e,t)=>o.SI.RatingHighlightYellowNonDR,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},b={configType:"prg-h-rating-nys",region:[y.yp.river],template:(e,t)=>o.SI.RatingHighlightYellowNonDRStatic,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating]},T={configType:"prg-promo-ndr",region:[...y.Fg],template:(e,t)=>o.SI.SpecialOfferNonDR,requiredAssetsAll:[r.aT.specialOffer],supportedAssets:[r.aT.specialOffer]},k={configType:"prg-promo-ndr2",region:[...y.Fg],template:(e,t)=>o.SI.SpecialOfferNonDRWithExp,requiredAssetsAll:[r.aT.specialOffer],supportedAssets:[r.aT.specialOffer]},P={configType:"prg-ad-condition",region:[y.yp.river],template:o.SI.ConditionNonDR,requiredAssetsAll:[r.aT.condition]},A={configType:"prg-ad-return",region:[y.yp.river],template:o.SI.ReturnPolicyNonDR,requiredAssetsAll:[r.aT.returnPolicy]},I={configType:"prg-ad-sold",region:[y.yp.river],template:o.SI.SoldNonDR,requiredAssetsAll:[r.aT.sold]},E={configType:"prg-fship-in-b-n",region:[y.yp.river],template:o.SI.FreeShippingInlineNonDR,requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]},M={configType:"prg-fship-in-t-n",region:[y.yp.river],template:o.SI.FreeShippingPlainTextNonDR,requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]},x={configType:"prg-fship-tl-n",region:[y.yp.river],template:o.SI.FreeShippingTopLeftNonDR,requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]},L={configType:"prg-fship-tr-n",region:[y.yp.river],template:o.SI.FreeShippingTopRightNonDR,requiredAssetsAll:[r.aT.freeShipping],supportedAssets:[r.aT.freeShipping]};var R=n(91257);const D={name:"gamification-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...R.u,{name:"gradient-mask",paddingTop:"120",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2}},{name:"gamification",layout:{mode:"pixel",bottom:"35",width:"300",zIndex:4}}]}]},F=(e,t,n)=>({modifier:(e,t)=>{t.template.useClickInGamify=n},configType:e,region:[y.yp.river],template:o.SI.Gamification,discountThreshold:t,requiredAssetsAll:[r.aT.price,r.aT.salePrice],supportedAssets:[r.aT.price,r.aT.salePrice,r.aT.discount],dynamicRenderingConfig:()=>D}),O=F("prg-wpo-gamify-c",y.XP.gamification,!0),B=F("prg-wpo-gamify-h",y.XP.gamification,!1),N={name:"hotspot-single-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...R.u,{layout:{mode:"pixel",bottom:"0",zIndex:2},children:[{name:"gradient-mask",paddingTop:"30",children:[{name:"div-wrapper",marginBottom:"10",children:[{name:"animation-decorator",animationType:"scale-up",animationConfig:{scaleFrom:0,scaleTo:1,durationString:".3s",delayTimeMs:0},children:[{name:"hotspot-single"}]}]},{name:"ad-title"}]}]}]}]},_=(e,t)=>({configType:e,region:[y.yp.river],requiredAssetsAll:[r.aT.price,r.aT.salePrice],template:o.SI.HotspotSingle,supportedAssets:[r.aT.price,r.aT.salePrice,r.aT.discount],discountThreshold:t,dynamicRenderingConfig:()=>N}),U=_("prg-wpo-hs",y.XP.default),W=_("prg-wpo-hs10",y.XP.hotspotSingle10),H={configType:"prg-ad-ctav3",region:[...y.cE,...y.Fg],maxAdCount:3,template:(e,t)=>o.SI.CallToActionV3},$={configType:"prg-ad-cta-pa",region:[...y.Fg],requiredAssetsAll:[r.aT.price],maxAdCount:3,template:(e,t)=>o.SI.CallToActionV3PA};var q=n(37500),G=n(99478);const V={name:"feedv2-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"302",height:"157",zIndex:1}},{name:"color-mask",alwaysPresent:!0,feedV2:!0,layout:{mode:"pixel",left:"0",top:"157",width:"300",height:"147",zIndex:1}},{name:"ad-title",isFeedV2:!0,titleFontSize:18,layout:{mode:"pixel",top:"169",zIndex:1}},{name:"see-more",isFeedV2:!0,layout:{mode:"pixel",top:"8",height:"31",left:"260",zIndex:5}},(0,G.It)((0,G.ZV)(q.l,"end-action-part",2,[],1),["ad-label","provider-name","ad-choice"],[{isFeedV2:!0},{isFeedV2:!0},{isFeedV2:!0,layout:{zIndex:5,marginInlineEnd:10}}])]}]},z={configType:"prg-scards",region:[...y.Fg],template:o.SI.AdFeedV2,dynamicRenderingConfig:()=>V},j=(0,G.RM)(V,"ad-title",{name:"ad-title",isFeedV2:!0,titleFontSize:18,customStyleHovered:"text-decoration:underline;",layout:{mode:"pixel",top:"169",zIndex:1}}),K={configType:"prg-scardsul",region:[...y.Fg],template:o.SI.AdFeedV2,dynamicRenderingConfig:()=>j},Q=(0,G.RM)(V,"ad-title",{name:"ad-title",isFeedV2:!0,titleFontSize:20,customStyleHovered:"text-decoration:underline;",layout:{mode:"pixel",top:"169",zIndex:1}}),J={configType:"prg-scardshov",region:[...y.Fg],template:o.SI.AdFeedV2,dynamicRenderingConfig:()=>Q};var Y,Z,X,ee,te,ne;!function(e){e.ROW="row",e.ROW_REVERSE="row-reverse",e.COLUMN="column",e.COLUMN_REVERSE="column-reverse"}(Y||(Y={})),function(e){e.FLEX="flex",e.INLINE_FLEX="inline-flex"}(Z||(Z={})),function(e){e.FLEX_START="flex-start",e.FLEX_END="flex-end",e.CENTER="center",e.SPACE_BETWEEN="space-between",e.SPACE_AROUND="space-around",e.SPACE_EVENLY="space-evenly"}(X||(X={})),function(e){e.FLEX_START="flex-start",e.FLEX_END="flex-end",e.CENTER="center",e.STRETCH="stretch",e.BASELINE="baseline"}(ee||(ee={})),function(e){e.NOWRAP="nowrap",e.WRAP="wrap",e.WRAP_REVERSE="wrap-reverse"}(te||(te={})),function(e){e.AUTO="auto",e.STRETCH="stretch",e.CENTER="center",e.FLEX_START="flex-start",e.FLEX_END="flex-end",e.BASELINE="baseline",e.INITIAL="initial",e.INHERIT="inherit"}(ne||(ne={}));const ie={name:"ad-slug-v3-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-label",layout:{mode:"pixel",top:"270",height:"31",zIndex:5,marginInlineStart:"16",marginInlineEnd:"8"}},{name:"ad-choice",layout:{mode:"pixel",top:"267",height:"31",zIndex:5,marginInlineStart:"231",marginInlineEnd:"8"}},{name:"see-more",layout:{mode:"pixel",top:"262",height:"31",zIndex:5,marginInlineStart:"256"}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"background-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:0}},{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"div-wrapper",marginBottom:"6",marginLeft:"16",marginRight:"16",width:"260",children:[{name:"favicon-provider-name",layout:{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-favicon",layout:{mode:"flex"}},{name:"provider-name",layout:{mode:"flex",flex:1,marginInline:"6",minWidth:"0"},customStyleClass:"white-12-flex-layout",keepOpacity:!0}]}]},{name:"ad-title",twoLine:!0}]}]}]},re={configType:"prg-wpo-ad-slug3",region:[y.yp.river,y.yp.rivercms,y.yp.resriver],template:o.SI.AdSlugV3,dynamicRenderingConfig:()=>ie},oe={configType:"prg-wpo-ad-slug4",region:[y.yp.river,y.yp.resriver,y.yp.rivercms],template:o.SI.AdSlugV4,dynamicRenderingConfig:()=>ie};var ae=n(82),se=n(7291);const ce={maxAdCount:3,template:(e,t)=>y.cE.includes(t.region)?o.SI.InfopaneDynamicRendering:o.SI.DecorationDynamic,region:[...y.vn],dynamicRenderingConfig:e=>y.cE.includes(e.region)?ae.v:se.$},de=[{...ce,configType:"prg-ads-deco",supportedAssets:[r.aT.rating,r.aT.freeShipping,r.aT.review]},{...ce,configType:"prg-ads-no-deco"}],le={name:"default-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"div-text",inlineStyle:"font-size:14px;line-height:16px;letter-spacing:0.7px",text:"nativeAdBingRewardsText",layout:{mode:"pixel",left:"16",top:"16",zIndex:2}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]},{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"footer-wrapper",layout:{mode:"pixel",top:"264",height:"31",width:"100%",zIndex:5},children:[{name:"footer",layout:{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW,alignItems:ee.CENTER,height:"31"},children:[{name:"start-action-part",layout:{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"join-now",layout:{mode:"pixel",left:"16",zIndex:2}}]},{name:"end-action-part",layout:{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW_REVERSE,alignItems:ee.CENTER},children:[{name:"ad-choice",layout:{mode:"flex",paddingRight:"6"}},{name:"div-text",inlineStyle:"font-size:12px;color:rgba(255,255,255,0.7);padding-right:11px",text:"nativeAdPromotedByText",layout:{mode:"flex"}}]}]}]}]}]},ue={configType:"prg-amplify",region:[y.yp.riverAmplify,y.yp.rightRailAmplify],template:o.SI.Amplify,dynamicRenderingConfig:()=>le},pe=e=>({name:"animation-decorator",animationType:"scale-up",animationConfig:{scaleFrom:1.5,scaleTo:1,durationString:"1s",duration:1500,delayTimeMs:500},intersectionRootMargin:"0px 0px 0px 0px",children:[e]}),he=e=>(0,G.BH)(e,G.Oz.byName("product-image"),pe),ge=he(se.$),me=he(ae.v);var fe,ve,ye,Se,Ce,we,be;!function(e){e[e["Segoe UI"]=1]="Segoe UI",e[e.Tenorite=2]="Tenorite",e[e.Lora=3]="Lora"}(fe||(fe={})),function(e){e[e["scale-up"]=1]="scale-up",e[e["scale-down"]=2]="scale-down",e[e["scale-up-down"]=3]="scale-up-down"}(ve||(ve={})),function(e){e[e["#036AC4"]=1]="#036AC4",e[e["#B26200"]=2]="#B26200",e[e["#508128"]=3]="#508128",e[e["#158389"]=4]="#158389",e[e["#C84C56"]=5]="#C84C56",e[e["#12875E"]=6]="#12875E",e[e["#666666"]=7]="#666666"}(ye||(ye={})),function(e){e[e.cube=2]="cube",e[e.box=3]="box",e[e.truck=4]="truck"}(Se||(Se={})),function(e){e[e.normal=1]="normal",e[e.small=2]="small",e[e.large=3]="large"}(Ce||(Ce={})),function(e){e[e.default=1]="default",e[e["5-star-with-button"]=2]="5-star-with-button",e[e["1-star-with-button"]=3]="1-star-with-button",e[e["1-star-with-shadow"]=4]="1-star-with-shadow"}(we||(we={})),function(e){e.normal="265",e.small="270",e.large="255"}(be||(be={}));var Te=n(69425);const ke=(0,Te.Et)(a.Evv,"personalizedV2Override")((e=>{var t;(0,p.Z)(null===(t=e.items)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.adCreativeV2)||(e.items[0].ext.adCreative=JSON.parse(e.items[0].ext.adCreativeV2))})),Pe=(0,Te.Et)(a.Evv,"isPersonalizedAvailable")(((e,t)=>{var n,i;return(null===(n=e.items)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.ext)||void 0===n||null===(n=n.adCreative)||void 0===n?void 0:n.templateId)===t&&!(null===(i=e.items)||void 0===i||null===(i=i[0])||void 0===i||null===(i=i.ext)||void 0===i||null===(i=i.adCreative)||void 0===i||!i.templateConfig)})),Ae=(0,Te.Et)(a.Evv,"isShippingConfig")((e=>{var t,n,i;return!(null===(t=e.items[0])||void 0===t||null===(t=t.assets)||void 0===t||!t.freeShipping||null===(n=e.items)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.ext)||void 0===n||null===(n=n.adCreative)||void 0===n||null===(n=n.templateConfig)||void 0===n||!n.shipping||null!==(i=e.items)&&void 0!==i&&null!==(i=i[0])&&void 0!==i&&null!==(i=i.ext)&&void 0!==i&&null!==(i=i.adCreative)&&void 0!==i&&null!==(i=i.templateConfig)&&void 0!==i&&null!==(i=i.shipping)&&void 0!==i&&i.suppress)})),Ie=(0,Te.Et)(a.Evv,"isRatingConfig")((e=>{var t,n,i;return!(null===(t=e.items[0])||void 0===t||null===(t=t.assets)||void 0===t||!t.rating||null===(n=e.items)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.ext)||void 0===n||null===(n=n.adCreative)||void 0===n||null===(n=n.templateConfig)||void 0===n||!n.ratings||null!==(i=e.items)&&void 0!==i&&null!==(i=i[0])&&void 0!==i&&null!==(i=i.ext)&&void 0!==i&&null!==(i=i.adCreative)&&void 0!==i&&null!==(i=i.templateConfig)&&void 0!==i&&null!==(i=i.ratings)&&void 0!==i&&i.suppress)})),Ee=(0,Te.Et)(a.Evv,"getPersonalizedConfig")(((e,t)=>{if(Pe(e,t)){const[t]=e.items;return t.ext.adCreative.templateConfig}return null}));var Me;!function(e){const t=(0,Te.Et)(a.Evv,"processDecorations");e.processDecorations=t(((e,t)=>{var n,i;return(0,G.Tb)(t,"ad-decoration",{fontSizes:{price:null===(n=e.price)||void 0===n?void 0:n.fontSize,salePrice:null===(i=e.saleprice)||void 0===i?void 0:i.fontSize},fontFamily:fe[e.font]})}));const n=(0,Te.Et)(a.Evv,"getAnimationDuration")((e=>e?{duration:e,durationString:e/1e3+"s"}:{})),i=(0,Te.Et)(a.Evv,"getAnimationScale")(((e,t)=>e&&t?{scaleFrom:e,scaleTo:e-t}:{})),r=(0,Te.Et)(a.Evv,"getLocationAlignRight")((e=>{if(2==e)return{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW,justifyContent:X.FLEX_END}})),o=(0,Te.Et)(a.Evv,"getLocation")(((e,t)=>3==e?{mode:"pixel",bottom:be[t||"normal"]}:4==e?{mode:"pixel",bottom:be[t||"normal"],right:"16"}:void 0)),s=(0,Te.Et)(a.Evv,"getDelayTime")((e=>e?{delayTimeMs:e}:{})),c=(0,Te.Et)(a.Evv,"processAnimationImage");e.processAnimationImage=c(((e,t)=>{if(!e.image)return t;return(0,G.BH)(t,G.Oz.byName("animation-decorator"),(t=>{if(e.image.suppress)return{};const{animation:r}=e.image,o={...t,animationType:ve[null==r?void 0:r.type]||t.animationType,animationConfig:{...t.animationConfig,...i(null==r?void 0:r.scaleFrom,null==r?void 0:r.scaleBy),...n(null==r?void 0:r.duration),...s(null==r?void 0:r.delayTimeMS)}};if((null==r||!r.scaleFrom)&&"scale-down"===o.animationType){const e=t.animationConfig.scaleFrom;t.animationConfig.scaleFrom=t.animationConfig.scaleTo,t.animationConfig.scaleTo=e}return o}))}));const d=(0,Te.Et)(a.Evv,"processFreeShipping");e.processFreeShipping=d(((e,t)=>{if(!e.shipping||e.shipping.suppress)return t;const{color:n,location:i}=e.shipping,a=Se[e.shipping.icon],s=(0,G.Tb)(t,"div-wrapper",{layout:{...r(i)}});return(0,G.Tb)(s,"free-shipping",{fontFamily:fe[e.font],color:ye[n||"1"],icon:a,layout:{...o(i)}})}));const l=(0,Te.Et)(a.Evv,"processRating");e.processRating=l(((e,t)=>{if(!e.ratings||e.ratings.suppress)return t;const{color:n,elementStyle:i,elementSize:a,location:s,displayReviewCount:c}=e.ratings,d=Ce[a],l=(0,G.Tb)(t,"div-wrapper",{layout:{...r(s)}});return(0,G.Tb)(l,"rating",{fontFamily:fe[e.font],color:ye[n||"1"],elementStyle:we[i],elementSize:d,displayReviewCount:c,layout:{...o(s,d)}})}));const u=(0,Te.Et)(a.Evv,"processTitle");e.processTitle=u(((e,t)=>(0,G.Tb)(t,"ad-title",{fontFamily:fe[e.font]})))}(Me||(Me={}));const xe=[Me.processDecorations,Me.processTitle],Le=(0,Te.Et)(a.Evv,"processPersonalizedConfig")(((e,t,n,i=xe)=>{const r=Ee(e,t);return r?(0,m.Z)(i,((e,t)=>t(r,e)),n):n})),Re=(0,Te.Et)(a.Evv,"removeAssets")((e=>{for(const a of e.items){var t,n;if(!(e.enableNativeAdWC||null!=e&&null!==(t=e.template)&&void 0!==t&&t.enableVA)){var i,r;null===(i=a.assets)||void 0===i||delete i.price,null===(r=a.assets)||void 0===r||delete r.salePrice;continue}const s=null===(n=a.ext)||void 0===n||null===(n=n.adCreative)||void 0===n?void 0:n.templateConfig;if(s){const{price:e,saleprice:t}=s;var o;if(null!=e&&e.suppress)null===(o=a.assets)||void 0===o||delete o.price;null!=t&&t.suppress&&delete a.assets.salePrice}}return e})),De=(0,Te.Et)(a.Evv,"processConfig")(((e,t,n)=>Le(e,t,n,[Me.processTitle,Me.processAnimationImage,Me.processDecorations,Me.processFreeShipping,Me.processRating]))),Fe={configType:"prg-ani-img",qualifier:(e,t)=>Pe(t,"animatedimageryinf")||Pe(t,"animatedimageryriver"),region:[y.yp.river,y.yp.resriver,y.yp.infopane,y.yp.resinfopane],template:o.SI.AnimatedImagery,supportedAssets:[r.aT.price,r.aT.salePrice],dynamicRenderingConfig:e=>"infopane"===e.region||"resinfopane"===e.region?De(e,"animatedimageryinf",me):De(e,"animatedimageryriver",ge),modifier:(e,t)=>{Re(t)}},Oe=(0,G.RM)(se.$,"gradient-mask",{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"div",layout:{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-title",lineHeight:"28",titleFontSize:"20",layout:{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW,flex:1,alignItems:ee.CENTER,bottom:"52",zIndex:2}},{name:"call-to-action",layout:{mode:"flex",display:Z.FLEX,paddingRight:"16"}}]}]}),Be={configType:"prg-ad-cta",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToAction,supportedAssets:[r.aT.price,r.aT.salePrice],dynamicRenderingConfig:()=>Oe},Ne=(0,G.RM)(se.$,"gradient-mask",{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:4},children:[{name:"div",layout:{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-title",lineHeight:"28",titleFontSize:"20",layout:{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW,flex:1,alignItems:ee.CENTER,bottom:"52",zIndex:2}},{name:"ad-title-mask"},{name:"call-to-action",ctaMode:"arrow",backgroundColor:"#C6C0BA",color:"#000000;",layout:{mode:"flex",display:Z.FLEX,paddingRight:"16"}}]}]}),_e={configType:"prg-ad-cta-ic",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToActionIcon,dynamicRenderingConfig:()=>Ne},Ue={configType:"prg-ad-cta-lm",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToActionLearnMore,dynamicRenderingConfig:()=>Oe},We=(0,G.RM)(Oe,"call-to-action",{name:"call-to-action",backgroundColor:"#C6C0BA",color:"#000000;",layout:{mode:"flex",display:Z.FLEX,paddingRight:"16"}}),He={configType:"prg-ad-cta-lmd",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToActionDarkMode,dynamicRenderingConfig:()=>We},$e=(0,G.As)(Oe,["call-to-action","product-image"],[{name:"call-to-action",ctaMode:"mask"},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!1}]),qe={configType:"prg-ad-cta-m",region:[...y.Fg],requiredAssetsAll:[r.aT.price],template:o.SI.CallToActionMaskMode,supportedAssets:[r.aT.price,r.aT.salePrice],dynamicRenderingConfig:()=>$e},Ge={configType:"prg-ad-cta-st",region:[...y.Fg],requiredAssetsAll:[r.aT.price,r.aT.shortTitle],template:o.SI.CallToActionShortTitle,dynamicRenderingConfig:()=>We},Ve={configType:"prg-ad-ctav2",region:[...y.Fg],template:o.SI.CallToActionV2,dynamicRenderingConfig:()=>Ne},ze=[{configType:"prg-ad-logo-c",template:o.SI.LogoControl,region:[...y.Fg],qualifier:(e,t)=>{var n;return!(null===(n=t.items)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.assets)||void 0===n||null===(n=n.logo)||void 0===n||!n.url)},requiredAssetsAll:[r.aT.logo]},{configType:"prg-ad-z-c",template:o.SI.ZIndexControl,region:[y.yp.river],qualifier:(e,t)=>(0,y.Ue)(t),requiredAssetsAll:[r.aT.transparentImage]},{configType:"prg-promo-ndr-c",template:o.SI.SpecialOfferControl,region:[...y.Fg],requiredAssetsAll:[r.aT.specialOffer]},{configType:"prg-fship-c",template:o.SI.FreeShippingControl,region:[y.yp.river],requiredAssetsAll:[r.aT.freeShipping]},{configType:"prg-rating-c",template:o.SI.RatingControl,region:[y.yp.river],requiredAssetsAll:[r.aT.rating]},{configType:"prg-trendingc",template:o.SI.TrendingControl,region:[...y.Fg],requiredAssetsAll:[r.aT.viewed]},{configType:"prg-ad-cta-c",template:o.SI.CallToActionControl,region:[...y.Fg],requiredAssetsAll:[r.aT.price]},{configType:"prg-ad-s-title-c",template:o.SI.ShortTitleControl,region:[y.yp.river],qualifier:(e,t)=>{var n;return!(null===(n=t.items)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.assets)||void 0===n||!n.shortTitle)},requiredAssetsAll:[r.aT.shortTitle]},{configType:"prg-ad-sh-v1-c",template:o.SI.SaleHighlightV1Control,region:[...y.Fg,...y.cE],requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount],discountThreshold:y.XP.saleHighlight15,maxAdCount:1},{configType:"prg-ad-sh-v3v4-c",template:o.SI.SaleHighlightV3V4Control,region:[...y.Fg],qualifier:(e,t)=>(0,y.Ue)(t),requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount,r.aT.transparentImage],discountThreshold:y.XP.saleHighlight15,maxAdCount:1},{configType:"prg-ad-combo-c",region:[...y.Fg],template:(e,t)=>(0,y.J2)(t),requiredAssetsAny:[r.aT.rating,r.aT.specialOffer,r.aT.freeShipping]},{configType:"prg-ad-condition-c",region:[y.yp.river],template:o.SI.ConditionNonDRControl,requiredAssetsAll:[r.aT.condition]},{configType:"prg-ad-return-c",region:[y.yp.river],template:o.SI.ReturnPolicyNonDRControl,requiredAssetsAll:[r.aT.returnPolicy]},{configType:"prg-ad-sold-c",region:[y.yp.river],template:o.SI.SoldNonDRControl,requiredAssetsAll:[r.aT.sold]},{configType:"prg-ad-combo-t-c",region:[...y.Fg],template:(e,t)=>(0,y.ZV)(t),requiredAssetsAny:[r.aT.sold,r.aT.returnPolicy,r.aT.condition]},{configType:"prg-ad-ris1-c",region:y.Fg,supportedAssets:[r.aT.price],modifier:(e,t)=>{(0,y.dj)(t,!0)}},{configType:"prg-ad-desc-c",region:y.Fg,template:(e,t)=>(0,y.PY)(t)},{configType:"prg-ad-gpt-title-c",region:[y.yp.infopane,y.yp.river],requiredAssetsAll:[r.aT.shortTitle],template:o.SI.GPTTitle},{configType:"prg-ad-align-rf",region:y.Fg,template:(e,t)=>o.SI.AlignmentRF},{configType:"prg-ad-ai-imgs-c",region:[...y.Fg,...y.cE],template:o.SI.AIImg,requiredAssetsAll:[r.aT.transparentImage]},{configType:"prg-ad-ai-imgf-c",region:[...y.Fg,...y.cE],template:o.SI.AIImg,requiredAssetsAll:[r.aT.transparentImage]},{configType:"prg-ad-cta-only-cf",region:[...y.ms],template:o.SI.CTAOnly,requiredAssetsAll:[r.aT.callToAction]},{configType:"prg-ad-ctavar-cf",region:[...y.ms],template:o.SI.CTAOnly,requiredAssetsAll:[r.aT.callToAction]},{configType:"prg-ad-logo-only-cf",region:[...y.ms],template:o.SI.LogoOnly,requiredAssetsAll:[r.aT.logo]},{configType:"prg-ad-cta-logo-cf",region:[...y.ms],template:(e,t)=>(0,y.LM)(t),qualifier:(e,t)=>(0,y.IN)(t)},{configType:"prg-ad-ctavarlogo-cf",region:[...y.ms],template:(e,t)=>(0,y.LM)(t),qualifier:(e,t)=>(0,y.IN)(t)}],je={configType:"default",region:[y.yp.infopane,y.yp.resinfopane],maxAdCount:2,template:(e,t)=>t.enableNativeAdWC?o.SI.AnimatedImagery:o.SI.Default,supportedAssets:[],dynamicRenderingConfig:e=>{if(e.enableNativeAdWC)return De(e,"animatedimageryinf",me)},modifier:(e,t)=>{Re(t)}},Ke={configType:"default",region:[y.yp.river,y.yp.resriver],template:o.SI.Default},Qe={configType:"prg-dr-combined",region:y.vn,template:(e,t)=>y.cE.includes(t.region)?o.SI.InfopaneDynamicRendering:o.SI.DecorationDynamic,dynamicRenderingConfig:e=>y.cE.includes(e.region)?ae.v:se.$,modifier:(e,t)=>{t.enableNativeAdWC=!0}},Je={configType:"prg-ad-combo",region:[y.yp.river],template:(e,t)=>(0,y.JU)(t),requiredAssetsAny:[r.aT.freeShipping,r.aT.rating,r.aT.specialOffer],dynamicRenderingConfig:e=>(0,y.R)(e),modifier:(e,t)=>(0,y.$u)(t,!0)},Ye={configType:"prg-dr-infopane",region:[y.yp.infopane,y.yp.resinfopane],maxAdCount:3,template:o.SI.InfopaneDynamicRendering,supportedAssets:[r.aT.rating,r.aT.freeShipping,r.aT.review],dynamicRenderingConfig:()=>ae.v},Ze=[{configType:"prg-ads-tel-i",region:y.cE,template:o.SI.DrPerf,dynamicRenderingConfig:()=>ae.v},{configType:"prg-ads-tel-r",region:y.Fg,template:o.SI.DrPerf,dynamicRenderingConfig:()=>se.$}],Xe={configType:"prg-ad-eb",region:[...y.Fg,...y.cE],template:o.SI.EliteBadge,requiredAssetsAll:[r.aT.eliteBadge],supportedAssets:[r.aT.eliteBadge],maxAdCount:3,dynamicRenderingConfig:e=>y.cE.includes(e.region)?ae.v:se.$},et=(0,G.ZV)(se.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"free-shipping",color:"#036ac4",layout:{mode:"pixel",bottom:"265"}}]}]),tt={configType:"prg-dr-fship",qualifier:(e,t)=>Pe(t,"shippingriver"),region:[y.yp.river],template:o.SI.FreeShippingDR,requiredAssetsAll:[r.aT.freeShipping],dynamicRenderingConfig:e=>De(e,"shippingriver",et)},nt={name:"highlight-rating-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...R.u,{layout:{mode:"pixel",bottom:"0",zIndex:2},children:[{name:"gradient-mask",paddingTop:"30",children:[{name:"div-wrapper",marginBottom:"10",children:[{name:"highlight-rating"}]},{name:"ad-title",oneLineTitle:!0}]}]}]}]},it={configType:"prg-wpo-h-rating",region:[y.yp.river],requiredAssetsAll:[r.aT.rating],template:o.SI.HighlightRating,supportedAssets:[r.aT.rating],dynamicRenderingConfig:()=>nt},rt=(0,G.It)(ae.v,["hover-mask","product-image"],[{layout:{mode:"pixel",filter:"contrast(115%)",left:"0",top:"0",width:"100%",height:"100%"}},{imageMaskOn:!1}]),ot=(0,G.It)(se.$,["hover-mask","product-image"],[{layout:{mode:"pixel",filter:"contrast(115%)",left:"0",top:"0",width:"100%",height:"100%"}},{imageMaskOn:!1}]),at={configType:"prg-ad-hover",region:[...y.vn],template:o.SI.Default,dynamicRenderingConfig:e=>y.cE.includes(null==e?void 0:e.region)?rt:ot},st={name:"default-infopane-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:4}},{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",zIndex:1,width:"100%",height:"304"},imageMaskOn:!0,imageMaskOpacity:"0.1",trimBottom:!0},{name:"gradient-mask",paddingTop:"90",layout:{mode:"pixel",bottom:"0",width:"100%",zIndex:2},children:[{name:"ad-title",lineHeight:"36",titleFontSize:"28",oneLineTitle:!0}]},q.l]}]},ct={configType:"prg-infopaneDoubleCard19",region:y.cE,maxAdCount:3,template:o.SI.InfopaneDoubleCard_19by10,dynamicRenderingConfig:()=>st},dt=(0,G.It)(st,["footer","ad-title"],[{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"17",height:"31",width:"100%"}},{lineHeight:"44"}]),lt={configType:"prg-infopane-db",region:[y.yp.riverdb],maxAdCount:3,template:o.SI.InfopaneDoubleCard_19by10,dynamicRenderingConfig:()=>dt,modifier:(e,t)=>{t.enableNativeAdWC=!0}},ut=(0,G.FT)(se.$,"end-action-part",0,[{name:"like-button",layout:{zIndex:5}}]),pt={configType:"prg-ad-like",region:[y.yp.river,y.yp.resriver],template:o.SI.LikeButton,dynamicRenderingConfig:()=>ut},ht={name:"logo-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:5},children:[...R.u,{name:"gradient-mask",paddingTop:"120",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2}},{name:"logo",width:"42",height:"42",layout:{mode:"pixel",left:"16",bottom:"49",zIndex:2}},{name:"logo-title-wrapper",layout:{mode:"pixel",left:"54",bottom:"54",zIndex:2},children:[{name:"logo-title-flex-wrapper",layout:{mode:"flex",height:"42",display:Z.FLEX,flexDirection:Y.ROW,flex:1,alignItems:ee.CENTER},children:[{name:"ad-title",titleFontSize:"20",twoLine:!0}]}]}]}]},gt={qualifier:(e,t)=>{var n;return!(null===(n=t.items)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.assets)||void 0===n||null===(n=n.logo)||void 0===n||!n.url)},configType:"prg-ad-logo",region:[...y.Fg],template:o.SI.Logo,requiredAssetsAll:[r.aT.logo],dynamicRenderingConfig:()=>ht,modifier:(e,t)=>{t.items&&t.items[0]}},mt=(0,G.RM)(ht,"logo",{name:"logo",width:"42",height:"42",borderRadius:"6",layout:{mode:"pixel",left:"16",bottom:"49",zIndex:2}}),ft={qualifier:(e,t)=>{var n;return!(null===(n=t.items)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.assets)||void 0===n||null===(n=n.logo)||void 0===n||!n.url)},configType:"prg-ad-logo-r",region:[...y.Fg],template:o.SI.LogoWithBorderRadius,requiredAssetsAll:[r.aT.logo],dynamicRenderingConfig:()=>mt},vt={configType:"prg-ad-combo2",region:y.Fg.concat(y.cE),template:(e,t)=>(0,y.uH)(t),requiredAssetsAny:[r.aT.rating,r.aT.specialOffer,r.aT.freeShipping,r.aT.discount],maxAdCount:1,modifier:(e,t)=>(0,y.$u)(t)},yt=(e,t)=>{const n=(0,G.As)(se.$,["gradient-mask","provider-name","ad-label"],[{name:"gradient-mask",peSeasonalColorMode:`peSeasonalColorMode${e}`,layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]},{name:"provider-name",layout:{flex:1,minWidth:0,zIndex:5},customStyleClass:"white-12-flex-layout",adLabelTextOpacity:"1",isSeasonal:!0},{name:"ad-label",layout:{marginInlineStart:"16",marginInlineEnd:"6",zIndex:5},adLabelTextOpacity:"1",isSeasonal:!0}]);return(0,G.FT)(n,"default-template",3,[{name:"product-image",patternMode:`patternMode${t}`,useTransparentImage:!0,layout:{position:"absolute",bottom:0,width:"100%",height:121,zIndex:2,pointerEvents:"none"}}])},St=(yt("1","1"),yt("2","1"),yt("3","1"),yt("4","1"),yt("1","2"),yt("2","2"),yt("3","2"),yt("4","2"),{configType:"prg-ads-seasonal",qualifier:(e,t)=>Ct(t),region:[...y.Fg],template:(e,t)=>o.SI.PESeasonalAds,dynamicRenderingConfig:e=>{const t=(0,c.Z)(e,"items[0].ext.adCreative.templateConfig.seasonal.color"),n=(0,c.Z)(e,"items[0].ext.adCreative.templateConfig.seasonal.elementStyle");return yt(t,n)}}),Ct=(0,Te.Et)(a.Evv,"isPersonalizedAvailable")((e=>{var t;return"seasonal"===(0,c.Z)(e,"items[0].ext.adCreative.templateId")&&!(null===(t=e.items)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.ext)||void 0===t||null===(t=t.adCreative)||void 0===t||!t.templateConfig)&&!1===(0,c.Z)(e,"items[0].ext.adCreative.templateConfig.seasonal.suppress")})),wt={configType:"prg-ads-seav1",region:[...y.Fg],template:(e,t)=>o.SI.PESeasonalAdsV1,dynamicRenderingConfig:e=>yt("3","1")},bt={configType:"prg-ads-seav1-p",region:y.Fg,template:(e,t)=>o.SI.PESeasonalAdsV1P,qualifier:(e,t)=>t.providerId&&"bing"===t.providerId.toLowerCase(),dynamicRenderingConfig:e=>yt("3","1")},Tt=(0,G.FT)(se.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"rating"}]}]),kt={name:"default-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...R.u.filter((e=>"product-image"!==e.name)),{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:1},imageMaskOn:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]}]},Pt=e=>Pe(e,"shippingriver"),At={configType:"prg-ads-personal",qualifier:(e,t)=>Pt(t)||Pe(t,"ratingsriver"),region:[y.yp.river],template:(e,t)=>Pt(t)?o.SI.FreeShippingDR:o.SI.RatingDR,supportedAssets:[r.aT.freeShipping,r.aT.rating,r.aT.review],dynamicRenderingConfig:e=>{const t=Ae(e)?et:kt,n=Ie(e)?Tt:kt;return Pt(e)?De(e,"shippingriver",t):De(e,"ratingsriver",n)}},It={configType:"prg-wpo-deco-dr",region:[y.yp.river,y.yp.infopane,y.yp.resriver,y.yp.resinfopane],template:o.SI.DecorationDynamic,requiredAssetsAny:[r.aT.rating,r.aT.freeShipping,r.aT.review],dynamicRenderingConfig:()=>se.$},Et={configType:"prg-dr-rating",qualifier:(e,t)=>Pe(t,"ratingsriver"),region:[y.yp.river],template:o.SI.RatingDR,requiredAssetsAll:[r.aT.rating],supportedAssets:[r.aT.rating,r.aT.review],dynamicRenderingConfig:e=>De(e,"ratingsriver",Tt)},Mt=e=>(0,G.FT)(e?ae.v:se.$,e?"default-infopane-template":"default-template",0,[{name:"sale-highlight-badge",layout:{mode:"pixel",top:"16",left:"16",zIndex:2}}]),xt=Mt(!1),Lt=Mt(!0),Rt={configType:"prg-ad-sh-v1",region:[...y.Fg,...y.cE],template:o.SI.SaleHighlightV1,requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount],discountThreshold:y.XP.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:e=>y.cE.includes(e.region)?Lt:xt},Dt={name:"sale-highlight-v3-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...R.u.filter((e=>"product-image"!==e.name&&"background-image"!==e.name)),{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"sh-content-wrapper",layout:{mode:"pixel",zIndex:1},children:[{name:"sale-highlight-flex-wrapper",layout:{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW,width:"300",height:"304"},children:[{name:"sale-highlight-title",layout:{mode:"flex",display:Z.FLEX,alignItems:ee.CENTER,width:"126",height:"183",marginInline:"8",marginTop:"10"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:"0",imageMaskTop:"0",layout:{width:"150",height:"183",marginTop:"10"}}]}]},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3},children:[{name:"ad-title"}]}]}]},Ft={name:"sale-highlight-v3-template",children:[...R.u.filter((e=>"product-image"!==e.name)),{name:"sale-highlight-horizontal-title",layout:{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW,alignItems:ee.CENTER,justifyContent:X.CENTER,width:"300",marginInline:"8",marginBottom:"10",zIndex:1,marginTop:19,position:"absolute"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:0,imageMaskTop:0,imageMaskHeight:304,imageMaskWidth:300,layout:{position:"absolute",width:"236",height:"118",left:"32",top:"77",zIndex:1}},{name:"color-mask",layout:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]},Ot={configType:"prg-ad-sh-v3",region:[...y.Fg],template:o.SI.SaleHighlightV3,qualifier:(e,t)=>(0,y.Ue)(t),requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount,r.aT.transparentImage],discountThreshold:y.XP.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:e=>(0,y.Up)(e)?Dt:Ft},Bt={name:"sale-highlight-v4-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[{name:"ad-title-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:4}},{name:"sh-content-wrapper",layout:{mode:"pixel",zIndex:1},children:[{name:"sale-highlight-flex-wrapper",layout:{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW,width:"300",height:"304"},children:[{name:"sale-highlight-title",layout:{mode:"flex",display:Z.FLEX,alignItems:ee.CENTER,width:"126",height:"183",marginInline:"8",marginTop:"10"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:"0",imageMaskTop:"0",layout:{adBackgroundColor:"#2E2E2E",width:"150",height:"183",marginTop:"10"}}]}]},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.7",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",background:"linear-gradient(var(--gradient-end-color) 0%, var(--gradient-mid-color) 20%, var(--ad-background-color) 30%, var(--ad-background-color) 100%)",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3,neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF",adBackgroundColor:"#2E2E2E",gradientMidColor:"rgba(46, 46, 46, 0.8)",gradientEndColor:"rgba(46, 46, 46, 0)"},children:[{name:"ad-title"}]},(0,G.Tb)(q.l,"footer",{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%",neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF"}})]}]},Nt={name:"sale-highlight-v4-template",children:[...R.u.filter((e=>"product-image"!==e.name)),{name:"sale-highlight-horizontal-title",layout:{mode:"flex",display:Z.FLEX,flexDirection:Y.ROW,alignItems:ee.CENTER,justifyContent:X.CENTER,width:"300",marginInline:"8",marginBottom:"10",zIndex:1,marginTop:19,position:"absolute"}},{name:"product-image",useTransparentImage:!0,noDropShadow:!0,imageMaskOn:!0,imageMaskLeft:0,imageMaskTop:0,imageMaskHeight:304,imageMaskWidth:300,layout:{position:"absolute",width:"236",height:"118",left:"32",top:"77",zIndex:1,adBackgroundColor:"#2E2E2E"}},{name:"color-mask",layout:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",zIndex:0},opacity:"0.4",alwaysPresent:!0},{name:"gradient-mask",isFullGradient:!1,useDynamicStyle:!0,paddingTop:"28",background:"linear-gradient(var(--gradient-end-color) 0%, var(--gradient-mid-color) 20%, var(--ad-background-color) 30%, var(--ad-background-color) 100%)",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:3,neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF",adBackgroundColor:"#2E2E2E",gradientMidColor:"rgba(46, 46, 46, 0.8)",gradientEndColor:"rgba(46, 46, 46, 0)"},children:[{name:"ad-title"}]},(0,G.Tb)(q.l,"footer",{layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%",neutralFillHoverColor:"#484848",neutralFillActiveColor:"#3B3B3B",neutralForegroundRestColor:"#FFFFFF"}})]},_t={configType:"prg-ad-sh-v4",region:[...y.Fg],template:o.SI.SaleHighlightV4,qualifier:(e,t)=>(0,y.Ue)(t),requiredAssetsAll:[r.aT.price,r.aT.salePrice,r.aT.discount,r.aT.transparentImage],discountThreshold:y.XP.saleHighlight15,maxAdCount:1,dynamicRenderingConfig:e=>(0,y.Up)(e)?Bt:Nt},Ut={qualifier:(e,t)=>{var n;return!(null===(n=t.items)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.assets)||void 0===n||!n.shortTitle)},configType:"prg-ad-gpt-title",region:[y.yp.infopane,y.yp.river],requiredAssetsAll:[r.aT.shortTitle],template:o.SI.GPTTitle,modifier:(e,t)=>{var n;t.items&&t.items[0]&&null!==(n=t.items[0])&&void 0!==n&&null!==(n=n.assets)&&void 0!==n&&n.shortTitle&&(t.items[0].title=t.items[0].assets.shortTitle)}},Wt={configType:"prg-wpo-ss",region:[y.yp.river],template:o.SI.Slideshow,modifier:(e,t)=>{t.slideshowProps=t.template.slideshowProps={autoScroll:!0,autoScrollIntervalMs:3e3,maxImageCount:5,enableSlideshowMediaControls:!0}},multiImage:!0},Ht={name:"spotlight-image-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...R.u.filter((e=>"product-image"!==e.name)),{name:"product-image",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:1},imageMaskOn:!0},{name:"spotlight-background",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304",zIndex:0}},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},paddingBottom:"0"}]}]},$t={configType:"prg-wpo-sl",region:[y.yp.river],template:o.SI.Spotlight,supportedAssets:[],supportedImageRatios:[o.hb._1by1,o.hb._3by4,o.hb._4by3],targetImageRatio:o.hb._1by1,dynamicRenderingConfig:()=>Ht},qt={...se.$,userActionLogger:"PrgTitle2"},Gt={configType:"prg-title-2",region:y.Fg,template:o.SI.TitleMaxLine2,dynamicRenderingConfig:()=>qt},Vt={...se.$,userActionLogger:"PrgTitle2C"},zt={configType:"prg-title-2-c",region:y.Fg,template:o.SI.TitleMaxLine2C,dynamicRenderingConfig:()=>Vt},jt=(0,G.RM)(se.$,"gradient-mask",{name:"gradient-mask",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"trending",layout:{position:"relative",zIndex:5}},{name:"ad-title"}]}),Kt={configType:"prg-trending",region:[...y.Fg],template:o.SI.Trending,requiredAssetsAll:[r.aT.viewed],dynamicRenderingConfig:()=>jt},Qt={name:"zindex-v2-original-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...R.u.filter((e=>"product-image"!==e.name&&"background-image"!==e.name)),{name:"product-image",layout:{mode:"pixel",left:"24",top:"20",width:"252",height:"150",zIndex:2},useTransparentImage:!0},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",height:"304",zIndex:1},isFullGradient:!0},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:2},opacity:"0.3"},{name:"div",layout:{mode:"pixel",bottom:"45",width:"300",zIndex:2},children:[{name:"ad-title"}]}]}]},Jt={configType:"prg-ad-zv2-o",region:[y.yp.river],qualifier:(e,t)=>(0,y.Ue)(t),template:o.SI.ZIndexV2Original,requiredAssetsAll:[r.aT.transparentImage],dynamicRenderingConfig:()=>Qt},Yt={name:"zindex-v2-polygon-template",children:[{name:"hover-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"304"},children:[...R.u.filter((e=>"product-image"!==e.name&&"background-image"!==e.name)),{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:1},opacity:"0.4",alwaysPresent:!0},{name:"product-image",layout:{mode:"pixel",left:"24",top:"20",width:"252",height:"150",zIndex:2},useTransparentImage:!0},{name:"polygon-mask",layout:{mode:"pixel",left:"0",top:"0",width:"300",height:"225",zIndex:2}},{name:"color-mask",layout:{mode:"pixel",left:"0",top:"0",width:"100%",height:"100%",zIndex:2},opacity:"0.3"},{name:"gradient-mask",layout:{mode:"pixel",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}],isRadialMask:!0}]}]},Zt={configType:"prg-ad-zv2-p",region:[y.yp.river],qualifier:(e,t)=>(0,y.Ue)(t),template:o.SI.ZIndexV2Polygon,requiredAssetsAll:[r.aT.transparentImage],dynamicRenderingConfig:()=>Yt},Xt={configType:"prg-ad-combo-txt",region:[...y.Fg],template:(e,t)=>(0,y.xP)(t),requiredAssetsAny:[r.aT.sold,r.aT.returnPolicy,r.aT.condition],modifier:(e,t)=>(0,y.E5)(t)},en={configType:"prg-ad-ris1",region:y.Fg,supportedAssets:[r.aT.price],modifier:(e,t)=>{(0,y.dj)(t)}},tn=[{configType:"prg-ad-desc-wide-1",region:y.Fz,template:(e,t)=>(0,y.PY)(t)},{configType:"prg-ad-desc-wide-2",region:y.Fz,template:(e,t)=>(0,y.PY)(t)}],nn=[o.SI.GeometricAdWaves1,o.SI.GeometricAdWaves3,o.SI.GeometricAdWaves4,o.SI.GeometricAdNature3,o.SI.GeometricAdSparkles1,o.SI.GeometricAdSparkles2,o.SI.GeometricAdSparkles3,o.SI.GeometricAdSparkles4,o.SI.GeometricAdSparkles5],rn=[{configType:"prg-ad-geometric",region:[...y.Fg],modifier:(e,t)=>{(0,y.rf)(t,nn,o.SI.Default,t.template.seasonalAdTemplateConfig.density)}}],on={configType:"prg-ad-ai-img",region:[...y.Fg,...y.cE],template:o.SI.AIImg,requiredAssetsAll:[r.aT.transparentImage],modifier:(e,t)=>{(0,y.Gu)(t)}},an=[{configType:"prg-ad-cta-only",region:[...y.ms],template:o.SI.CTAOnly,requiredAssetsAll:[r.aT.callToAction]},{configType:"prg-ad-ctavar",region:[...y.ms],template:o.SI.CTAOnly,requiredAssetsAll:[r.aT.callToAction]},{configType:"prg-ad-logo-only",region:[...y.ms],template:o.SI.LogoOnly,requiredAssetsAll:[r.aT.logo]},{configType:"prg-ad-cta-logo",region:[...y.ms],template:(e,t)=>(0,y.LM)(t),qualifier:(e,t)=>(0,y.IN)(t)},{configType:"prg-ad-ctavar-logo",region:[...y.ms],template:(e,t)=>(0,y.LM)(t),qualifier:(e,t)=>(0,y.IN)(t)}],sn=[O,B,U,W,je,Ke,It,Fe,Wt,Gt,zt,it,gt,ft,Ut,Be,_e,Ue,He,Ge,qe,Ve,Ye,ct,lt,Jt,Zt,$t,K,J,z,re,oe,ue,...de,...Ze,T,k,E,M,x,L,C,w,b,S,I,P,A,Qe,tt,Xe,Et,At,pt,at,Kt,Rt,Ot,_t,Je,vt,H,$,St,wt,bt,Xt,en,on,...rn,...tn,...an,...ze];var cn=n(87851),dn=n(78931),ln=n(94921),un=n(95623);class pn{constructor(){this.filterConfigs=(e,t=[])=>(0,dn.Z)([...sn,...t],(t=>(0,ln.Z)([...cn.Sj,t.qualifier],(n=>!n||n(t,e))))),this.fallbackConfig=e=>y.cE.includes(e.region)?je:Ke,this.pickConfigByWeight=e=>{let t=0;(0,g.Z)(e,(e=>{t=t+e.weight||y.KB}));const n=Math.floor(Math.random()*t);let i=0;for(let t=0;t<e.length;++t)if(i+=e[t].weight||y.KB,n<i)return e[t]},this.preProcess=e=>{(0,g.Z)(e.items,(e=>{e.assets&&(this.calculateDiscount(e.assets),this.filterRatings(e.assets))})),(0,un.dO)(e)},this.postProcess=(e,t)=>{(0,g.Z)([...cn.F8,e.modifier],(n=>null==n?void 0:n(e,t)))},this.calculateDiscount=e=>{const t=e.price,n=e.salePrice;if(t&&n){const i=Number(t.replace(/[^0-9.-]+/g,"")),r=Number(n.replace(/[^0-9.-]+/g,""));e.discount=Math.floor((i-r)/i*100)}},this.filterRatings=e=>{e&&e.rating&&(isNaN(parseInt(e.rating))||parseInt(e.rating)<=6)&&(e.rating=void 0)}}selectTemplate(e,t=[]){this.preProcess(e);const n=this.filterConfigs(e,t),i=n&&n.length>0?this.pickConfigByWeight(n):this.fallbackConfig(e);this.postProcess(i,e)}}var hn,gn=n(92100);class mn{}(hn=mn).concat=(e,t)=>`${e}.${t}`,hn.identity=e=>t=>hn.concat(e,t),hn.boolean=e=>t=>t?hn.concat(e,"1"):null;class fn{constructor(){this._availableAssets="",this._displayedAssets=""}get availableAssets(){return this._availableAssets}get displayedAssets(){return this._displayedAssets}setAvailableAssets(e){var t;(null!==(t=e.items)&&void 0!==t&&null!==(t=t[0])&&void 0!==t&&t.assets||(0,c.Z)(e,"items[0].ext.adCreative.templateConfig"))&&(this._availableAssets=this.concatAssets(e))}setDisplayedAssets(e){var t;null!==(t=e.items)&&void 0!==t&&null!==(t=t[0])&&void 0!==t&&t.assets&&(this._displayedAssets=this.concatAssets(e))}concatAssets(e){let t="";(0,c.Z)(e,"items[0].assets")&&(t=(0,d.Z)(Object.keys(e.items[0].assets),(e=>{const t=r.aT[e].split("-");return"data"==(null==t?void 0:t[0])?t[1]:"image"==(null==t?void 0:t[0])?`i${t[1]}`:void 0})).join("_"));const n=(0,c.Z)(e,"items[0].ext.adCreative.templateConfig");if(!n)return t;let i="";n&&(i=(0,d.Z)(Object.keys(n),(e=>r.XY[e])).join("_"));return t+(t&&i?"_":"")+i}}(0,i.gn)([(0,Te.Et)(a.NMS,"setAvailableAssets")],fn.prototype,"setAvailableAssets",null),(0,i.gn)([(0,Te.Et)(a.NMS,"setDisplayedAssets")],fn.prototype,"setDisplayedAssets",null),(0,i.gn)([(0,Te.Et)(a.NMS,"concatAssets")],fn.prototype,"concatAssets",null);const vn={templateType:mn.identity("type"),animatedImage:mn.identity("ani"),flipZIndex:mn.boolean("fz"),landscapeOverlay:mn.boolean("lo")};class yn{constructor(){this.hasAnyInlineDecoration=e=>{if(e.items&&0!==e.items.length){if(e.items[0]&&e.items[0].assets){const t=e.items[0].assets;return!!(t.price||t.salePrice||t.installmentPrice||t.rating||t.review||t.priceDrop||t.viewed||t.freeShipping||t.discount)}return!1}return!1}}updateTemplate(e,t={}){const n=(0,l.Z)(e);try{this.updateTemplateInternal(e,t)}catch(t){(0,s.OO)(t,a.NMS,"Fail to apply template service on placement"),e=void 0,e=(0,l.Z)(n)}}updateTemplateInternal(e,t){var n;if(!e)return;ke(e),this.decorationBeaconBuilder=new fn,this.decorationBeaconBuilder.setAvailableAssets(e);const i=(0,u.Z)({},t,o.j3);if(i.configType){e.template=i;(new pn).selectTemplate(e)}else e.template=this.processConfig(e,i),this.resetTempateTypeForInfopaneInMultiAds(e),this.filterAssetByFlight(e),this.updatePlacementImageSize(e),this.updateTemplateTypeForPriceDiscount(e);this.updateBeacon(e),null!=e&&null!==(n=e.template)&&void 0!==n&&n.templateType&&e.template.templateType.endsWith("-c")&&(e.template.templateType=o.SI.Default,this.filterAssetByFlight(e))}processConfig(e,t){const n=t;if(this.updateAllowedAssetsAndTemplateForInfopane(e,n),this.updateTemplateInfoForDRInfopane(e,n),n.templateType!==o.SI.Slideshow&&n.templateType!==o.SI.PseudoVideo||this.updateSlideshowTemplateType(e,t,n),n.templateType===o.SI.PatternOverlay){"225"===this.getItemImageSize(e).height?n.landscapeOverlay=!1:n.templateType=o.SI.Default}return n.templateType===o.SI.Default&&e.items&&e.items.length>3&&n.adCarousel&&(n.templateType=o.SI.AdCarousel),this.updateTemplateInfoForBrandStory(e,n),n}updatePlacementImageSize(e){if(e.template.templateType===o.SI.PatternOverlay){const t=this.getItemImageSize(e);e.imageWidth=(0,c.Z)(e,"imageWidth",t.width),e.imageHeight=(0,c.Z)(e,"imageHeight",t.height)}}updateBeacon(e){const t=t=>{if(t.includes("srtb.msn.com")){const n=new URL(t);return this.addOrUpdateUrlQueryParam(n,"t",this.serializeTemplateConfig(e)),this.decorationBeaconBuilder.setDisplayedAssets(e),this.decorationBeaconBuilder.availableAssets&&this.addOrUpdateUrlQueryParam(n,"dec",this.decorationBeaconBuilder.availableAssets+"-"+this.decorationBeaconBuilder.displayedAssets),n.href}return t};if(!(0,p.Z)(e.beaconsJson)){const n=JSON.parse(e.beaconsJson);n&&((0,h.Z)(n.trb)&&(n.trb=n.trb.map((e=>t(e)))),(0,h.Z)(n.tvb)&&(n.tvb=n.tvb.map((e=>t(e)))),e.beaconsJson=JSON.stringify(n))}e&&(0,h.Z)(e.items)&&(0,g.Z)(e.items,(e=>{if(!(0,p.Z)(e.clickBeacons)){const n=JSON.parse(e.clickBeacons);n&&((0,h.Z)(n.tcb)&&(n.tcb=n.tcb.map((e=>t(e)))),e.clickBeacons=JSON.stringify(n))}}))}serializeTemplateConfig(e){return e.items&&e.items.length>0&&e.items[0].video?e.items[0].verificationParameters?o.SI.VideoIAS:o.SI.Video:(0,m.Z)(vn,((t,n,i)=>{const r=(0,c.Z)(e.template,i);if(r){const e=n(r);if(e)return""===t?e:`${t}_${e}`}return t}),"")}addOrUpdateUrlQueryParam(e,t,n){return gn.c.getQueryParameterByName(t,e.href)?gn.c.updateSearchParam(e,t,n):gn.c.appendSearchParam(e,t,n)}updateSlideshowTemplateType(e,t,n){e&&e.items&&e.items[0]&&e.items[0].images&&e.items[0].images.length>1?(n.templateType=t.templateType,e.slideshowProps=n.slideshowProps):(n.templateType=o.SI.Default,n.slideshowProps=void 0)}getItemImageSize(e){const t=(0,f.Z)(e.items);return(0,p.Z)(t)?{}:{width:`${(0,c.Z)(t,"imageWidth")}`,height:`${(0,c.Z)(t,"imageHeight")}`}}calculateDiscount(e){const t=e.price,n=e.salePrice;if(t&&n){const i=Number(t.replace(/[^0-9.-]+/g,"")),r=Number(n.replace(/[^0-9.-]+/g,""));e.discount=Math.floor((i-r)/i*100)}}filterAssetByFlight(e){if(e&&e.items&&e.items[0]&&e.items[0].assets){var t;this.calculateDiscount(e.items[0].assets);const n=(0,v.Z)((0,h.Z)(null===(t=e.template)||void 0===t?void 0:t.allowedAssets)?[...r.fs,...e.template.allowedAssets]:r.fs),i=(0,m.Z)(e.items[0].assets,((e,t,i)=>(n.includes(r.aT[i])&&(e[i]=t),e)),{});e.items[0].assets=i}}resetTempateTypeForInfopaneInMultiAds(e){"infopane"===e.region&&e.items&&e.items.length>1&&e.template.templateType!==o.SI.InfopaneDynamicRendering&&(e.template.templateType=o.SI.Default,e.template.animatedImage="")}isValidProviderNameForBrand(e){if(!(e&&e.items&&e.items[0]&&e.items[0].providerName))return!1;const t=e.items[0].providerName;return-1===t.indexOf("/")&&t.length<20}updateAllowedAssetsAndTemplateForInfopane(e,t){t.templateType!==o.SI.BrandStory&&t.templateType!==o.SI.BrandStoryNoDeco&&t.templateType!==o.SI.BrandStoryNoProgressiveDisplay&&t.templateType!==o.SI.HotspotSingle&&t.templateType!==o.SI.DiscountScribble&&t.templateType!==o.SI.ContentReveal&&t.templateType!==o.SI.Gamification||"infopane"===e.region&&(t.allowedAssets=void 0,t.templateType=o.SI.Default)}updateTemplateInfoForBrandStory(e,t){var n,i;t.templateType!==o.SI.BrandStory&&t.templateType!==o.SI.BrandStoryNoDeco&&t.templateType!==o.SI.BrandStoryNoProgressiveDisplay||((null===(n=e.items)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.description)===(null===(i=e.items)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.providerName)&&(e.items[0].description=null),this.isValidProviderNameForBrand(e)||(t.templateType=o.SI.Default,t.allowedAssets=void 0))}updateTemplateTypeForPriceDiscount(e){var t,n,i,r,a;const{Default:s,HotspotSingle:c,BrandStory:d,DiscountScribble:l,ContentReveal:u,Gamification:p}=o.SI;if(!((null===(t=e.items)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.assets)||void 0===t?void 0:t.discount)>=(null===(n=e.template)||void 0===n?void 0:n.discountThreshold))){var h,g,m,f,v;if([c,l,p].includes(null===(i=e.template)||void 0===i?void 0:i.templateType)&&(e.template.templateType=s,e.template.allowedAssets=void 0,e.items[0].assets={}),(null===(r=e.template)||void 0===r?void 0:r.templateType)===u)null===(h=e.items)||void 0===h||null===(h=h[0])||void 0===h||null===(h=h.assets)||void 0===h||delete h.discount,(null===(g=e.items)||void 0===g||null===(g=g[0])||void 0===g?void 0:g.description)===(null===(m=e.items)||void 0===m||null===(m=m[0])||void 0===m?void 0:m.providerName)&&(e.items[0].description=null),null!==(f=e.items)&&void 0!==f&&null!==(f=f[0])&&void 0!==f&&f.description||this.hasAnyInlineDecoration(e)||(e.template.templateType=s,e.template.allowedAssets=void 0);if((null===(a=e.template)||void 0===a?void 0:a.templateType)===d)null===(v=e.items)||void 0===v||null===(v=v[0])||void 0===v||null===(v=v.assets)||void 0===v||delete v.discount}}updateTemplateInfoForDRInfopane(e,t){"river"===e.region||"infopane"==e.region&&t.templateType===o.SI.InfopaneDynamicRendering||(t.templateType=o.SI.Default),"river"===e.region&&t.templateType===o.SI.InfopaneDynamicRendering&&(t.templateType=o.SI.Default)}}(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplate")],yn.prototype,"updateTemplate",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplateInternal")],yn.prototype,"updateTemplateInternal",null),(0,i.gn)([(0,Te.Et)(a.NMS,"processConfig")],yn.prototype,"processConfig",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updatePlacementImageSize")],yn.prototype,"updatePlacementImageSize",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateBeacon")],yn.prototype,"updateBeacon",null),(0,i.gn)([(0,Te.Et)(a.NMS,"serializeTemplateConfig")],yn.prototype,"serializeTemplateConfig",null),(0,i.gn)([(0,Te.Et)(a.NMS,"addOrUpdateQueryParam")],yn.prototype,"addOrUpdateUrlQueryParam",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateSlideshowTemplateType")],yn.prototype,"updateSlideshowTemplateType",null),(0,i.gn)([(0,Te.Et)(a.NMS,"getItemImageSize")],yn.prototype,"getItemImageSize",null),(0,i.gn)([(0,Te.Et)(a.NMS,"calculateDiscount")],yn.prototype,"calculateDiscount",null),(0,i.gn)([(0,Te.Et)(a.NMS,"filterAssetByFlight")],yn.prototype,"filterAssetByFlight",null),(0,i.gn)([(0,Te.Et)(a.NMS,"resetTempateTypeForInfopaneInMultiAds")],yn.prototype,"resetTempateTypeForInfopaneInMultiAds",null),(0,i.gn)([(0,Te.Et)(a.NMS,"isValidProviderNameForBrand",(()=>!1))],yn.prototype,"isValidProviderNameForBrand",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateAllowedAssetsAndTemplateForInfopane")],yn.prototype,"updateAllowedAssetsAndTemplateForInfopane",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplateInfoForBrandStory")],yn.prototype,"updateTemplateInfoForBrandStory",null),(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplateTypeForPriceDiscount")],yn.prototype,"updateTemplateTypeForPriceDiscount",null),(0,i.gn)([(0,Te.Et)(a.NMS,"hasAnyInlineDecoration")],yn.prototype,"hasAnyInlineDecoration",void 0),(0,i.gn)([(0,Te.Et)(a.NMS,"updateTemplateInfoForDRInfopane")],yn.prototype,"updateTemplateInfoForDRInfopane",null)},8991:function(e,t,n){"use strict";n.d(t,{dQ:function(){return p}});var i=n(13334),r=n(23549),o=n(88826),a=n(7476),s=n(61633),c=n(31558);const d={180:"101",270:"102",360:"103",540:"104",720:"105",1080:"107"};function l(e,t,n,o,a,c){var d,l,u,p,h,g,m,f;if(!e||!t)return;const v=e.target.parentElement,y=e.target.querySelector("video"),S=JSON.parse(null===(d=v.attributes["data-t"])||void 0===d?void 0:d.value).n,C=e.target.player,w=function(e){const t={AdStart:"AdPlayStarted",AdComplete:"AdPlayCompleted",EventPause:"Pause",ContentResume:"Resume",seeked:"Seek",error:"ContentError",canplay:"Canplay",canplaythrough:"Canplaythrough"};return t[e]&&(e=t[e]),s.Bs[e]}(t.name),b=t.data??{PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"},T="video/mp4"===(null==C?void 0:C.currentType()),k={type:61,name:"nativeAds_"+S,ext:{videoCs:n,eventType:w,timeElasped:y.currentTime,videoFormatCode:T?Number(null==c?void 0:c.format):1006,title:o,videoDuration:null==C?void 0:C.duration(),fr:(null===i.Al||void 0===i.Al||null===(l=i.Al.ClientSettings)||void 0===l?void 0:l.geo_country)+"_"+(null===i.Al||void 0===i.Al||null===(u=i.Al.ClientSettings)||void 0===u?void 0:u.geo_city)+"_"+(null===i.Al||void 0===i.Al?void 0:i.Al.Locale)+"_"+a,pageGroup:"",playerInstanceId:e.target.id,playType:"pb",playerTech:b.PlayerTechnology,pluginVersion:b.PlayerTechnology,size:y.clientWidth+"x"+y.clientHeight,videoPlayerType:b.VideoPlayerType,playerType:b.PlayerTechnology,playDuration:y.currentTime,inline:!1,videoUrl:null==C?void 0:C.src(),errorType:t.name===s.pt.Error?null==C||null===(p=C.error())||void 0===p?void 0:p.code:null,errorDescription:t.name===s.pt.Error?null==C||null===(h=C.error())||void 0===h?void 0:h.message:null,bandwidth:T?null:null==C||null===(g=C.tech_)||void 0===g||null===(g=g.hls)||void 0===g?void 0:g.bandwidth,throughput:T?null:null==C||null===(m=C.tech_)||void 0===m||null===(m=m.hls)||void 0===m?void 0:m.throughput,bufferWaitTime:null===(f=t.data)||void 0===f?void 0:f.bufferTime}};r.M0.sendVideoPlayEvent(k,v,!0)}function u(e,t){e&&(e.bigPlayButton&&e.bigPlayButton.el_&&e.bigPlayButton.enabled_&&(e.bigPlayButton.el_.style.display="none"),e.loadingSpinner&&e.loadingSpinner.el_&&(e.loadingSpinner.el_.style.display="none"),t&&(t.style.display="none"))}function p(e,t,n=!0){if((0,c.N)()&&e&&e.items&&e.items.length>t&&e.items[t].video){const i=new DOMParser,r=function(){if(!(0,c.N)())return;if(!window.trustedTypes||!window.trustedTypes.createPolicy)return;const e=window.trustedTypePolicies||(window.trustedTypePolicies={});if(e.xmlPassThroughPolicy)return e.xmlPassThroughPolicy;const t=window.trustedTypes.createPolicy("xmlPassThroughPolicy",{createHTML:e=>e});return e.xmlPassThroughPolicy=t,t}(),p=r?r.createHTML(e.items[t].video):e.items[t].video,h=i.parseFromString(p,"application/xml"),g=e.region,m=h.getElementsByTagName("MediaFile"),f=Array.from(m).map((e=>{return{url:e.textContent,delivery:e.getAttribute("delivery"),id:e.getAttribute("id"),bitrate:Number(e.getAttribute("bitrate")),minBitrate:Number(e.getAttribute("minBitrate")),maxBitrate:Number(e.getAttribute("maxBitrate")),codec:e.getAttribute("codec"),scalable:!!Number(e.getAttribute("scalable")),maintainAspectRatio:!!Number(e.getAttribute("maintainAspectRatio")),width:Number(e.getAttribute("width")),height:Number(e.getAttribute("height")),contentType:e.getAttribute("type"),format:(t=e.getAttribute("type"),n=e.getAttribute("height"),"application/x-mpegURL"==t?"1006":d[n])};var t,n})),v=h.getElementsByTagName("Duration"),y=v.length>0?v[0].textContent:null,S=h.getElementsByTagName("Tracking"),C=Array.from(S).map((e=>({value:e.textContent,event:e.getAttribute("event"),offset:e.getAttribute("offset")}))),w=h.getElementsByTagName("Ad"),b=w.length>0?Number(w[0].getAttribute("id")):null,T=h.getElementsByTagName("AdTitle"),k=T.length>0?T[0].textContent:"",P=h.getElementsByTagName("AdServingId"),A=P.length>0?P[0].textContent:"",I=h.getElementsByTagName("ClickThrough"),E=I.length>0?I[0].textContent:"",M=h.getElementsByTagName("Impression"),x=M.length>0?M[0].textContent:"",L=h.getElementsByTagName("Pricing");let R=null,D=null,F=null;L.length>0&&(R=Number(L[0].textContent),D=L[0].getAttribute("model"),F=L[0].getAttribute("currency"));let O=null,B=null;const N=A+"_"+b,_=async(e,t,n,i)=>{var r;if(e.type===s.pt.Telemetry&&("ContentOpen"==t.name&&(O=Date.now(),B=O),l(e,t,N,k,g,i)),n===s.pt.Error)(0,o.H)(a.mFi,null===(r=t.error())||void 0===r?void 0:r.message),l(e,{name:s.pt.Error,data:{VideoDuration:y,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},N,k,g,i);else if(O&&n===s.pt.CanPlay){const t=Date.now()-O;O=null,l(e,{name:n,data:{VideoDuration:y,bufferTime:t,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},N,k,g,i)}else if(B&&n===s.pt.CanPlayThrough){const t=Date.now()-B;B=null,l(e,{name:n,data:{VideoDuration:y,bufferTime:t,PlayerTechnology:"HTML5",VideoPlayerType:"HTML5"}},N,k,g,i)}},U=document.createElement("div");U.id="nativeAdVideoMask",U.className="nativeAdVideoMask-mask",U.style.cssText="position:absolute;inset:0px;background-image:var(--mask-gradient, linear-gradient(to top, rgba(0, 0, 0, 1), rgba(0,0,0,0) 176px));display:flex;";const W=(e,t)=>{let[i,r,o,a,c,d,l,p]=[null,null,null,null,null,null,null,null],[h,m,f]=[null,null,null];const v=!!e&&e.el_&&e.el_.querySelector("#nativeAdVideoMask");if(n?(h=!!e&&e.el_&&e.el_.getRootNode().host&&e.el_.getRootNode().host.getRootNode(),m=!!h&&h.host&&h.host.parentElement&&h.host.parentElement.querySelector("native-ad-video-controls")&&h.host.parentElement.querySelector("native-ad-video-controls").shadowRoot,f=!!h&&h.host&&h.host.parentElement&&h.host.parentElement.parentElement&&h.host.parentElement.parentElement.querySelector("native-ad-video-controls")&&h.host.parentElement.parentElement.querySelector("native-ad-video-controls").shadowRoot):(m=!!e&&e.el_&&e.el_.parentElement&&e.el_.parentElement.parentElement,f=!!m&&m.parentElement,h=m||f),h&&(l=h.querySelector(".video-ad-background-img-river"),p=h.querySelector(".video-ad-background-img-infopane")),m&&(a=m.querySelector("#nativead-video-replay-button-river"),c=m.querySelector("#nativead-video-learn-more-button-river")),f&&(i=f.querySelector("#nativead-video-play-button-infopane"),r=f.querySelector("#nativead-video-replay-button-infopane"),o=f.querySelector("#nativead-video-learn-more-button-infopane"),n?d=h.host.parentElement.parentElement.querySelector(".info-pane-slide-title"):"infopane"==g&&(d=f.nextElementSibling&&f.nextElementSibling.querySelector("h3"))),t&&t.toLowerCase()==s.pt.Ended&&(a&&(a.style.display="block"),r&&(r.style.display="block"),o&&(o.style.display="block"),c&&(c.style.display="block")),e&&e.errorDisplay&&e.errorDisplay.el_&&(e.errorDisplay.el_.style.display="none"),t&&t.toLowerCase()==s.pt.Play&&(a&&(a.style.display="none"),i&&(i.style.display="none"),r&&(r.style.display="none"),o&&(o.style.display="none"),c&&(c.style.display="none"),d&&(d.style.display="none"),v&&(v.style.display="none")),t&&t.toLowerCase()==s.pt.Error&&e&&"video/mp4"==e.currentType()&&u(e,i),t&&t.toLowerCase()==s.pt.Pause&&(d&&(d.style.display=null),v&&(v.style.display="flex")),t&&t.toLowerCase()==s.pt.Ready){if(l&&(l.style.display="none"),p&&(p.style.display="none"),i){i.style.display="block";const t=e&&e.posterImage&&e.posterImage.el_;if(t){const n=t.nextSibling;e.el_.insertBefore(U,n)}}e&&!e.currentSrc()&&u(e,i)}};return{VideoPlayerProps:{posterUrl:e.items[t].imageUrl,onMessage:(e,t,n,i)=>{W(t,n),_(e,t,n,i)},videoMetadataProps:{videoSources:f},playerConfigProps:{autoplay:"river"==g,inViewPlay:"river"==g,replayWhenInView:!1,outOfViewPause:!0,inViewPlayPercentage:.5,muted:!0,disableSeek:!0,disableSeekButtons:!0,useProgressiveVideoFallback:!0}},ViewabilityProps:{Duration:y,TrackingEvents:C},VideoAdProps:{AdId:b,AdTitle:k,AdServingId:A,ClickThrough:E,Impression:x,Price:R,PricingModel:D,Currency:F}}}return null}},77195:function(e,t,n){"use strict";n.d(t,{o:function(){return T}});var i=n(13334),r=n(55524),o=n(291),a=n(23549),s=n(12756),c=n(88826),d=n(7476),l=n(56687);const u="_marquee_ad_request";var p=n(61633),h=n(54557);const g="ntp.record_user_choices",m="ntp.background_image_type",f="ntp.news_feed_display",v="ntp.layout_mode",y=(new Set(["ntp.user_nurturing",g,m,f,v]),new Set(["cs-cz","da-dk","de-at","de-ch","de-de","de-ch","el-gr","en-gb","en-ie","en-xl","es-es","fi-fi","fr-be","fr-ch","fr-fr","hu-hu","it-it","nb-no","nl-be","nl-nl","pl-pl","pt-pt","sv-se","tr-tr"]));new Set([]);let S="";class C{static initializeMarqueeAd(e,t,n,i){const r=new C;if(!window)throw new Error("Can not fetch Marquee ad since no window object available");window[u]={marqueeAdFetchPromise:r.fetchMarqueeAd(t,e,n,i)}}getBrowserOptOutStatus(){const e=(0,h.AE)("TOptOut");return!(!e||"1"!==e)}isCookieBannerPresent(e){if(!e||!y.has(e.toLowerCase()))return!1;return null===(0,h.AE)("eupubconsent-v2")}createSamAdRequestData(e,t,n,i){if(!e)return;const{locale:r,pagetype:o,audienceMode:a,fd_muid:c,aid:d}=e,l=c||(0,h.AE)("MUID");if(!(r&&r.language&&r.market&&o&&"kids"!==a))return;const u=r.language+"-"+r.market,p=this.isCookieBannerPresent(e.locale.language+"-"+e.locale.market),g=!p&&l?l:null,m=!!window.__tcfapi,f=this.getBrowserOptOutStatus(),v=i||(document.URL&&document.URL.includes("localhost")?"https://ntp.msn.com/edge/ntp":document.URL),y={[s.r.Logo]:[0,0],[s.r.HighResolution4K]:[3840,2160],[s.r.C1]:[632,1440],[s.r.C2]:[944,1440],[s.r.C3]:[1256,1440],[s.r.C4]:[1600,1440],[s.r.C5]:[1920,1440]},C={locale:u,rid:d&&d.toLocaleLowerCase(),partnerId:o,content:{anaheimPageLayout:S,sourceUrl:v,pageType:"edgechrntp",audienceMode:a,verticalName:"edge"},user:{muid:g,browserOptOut:f,isAdblock:!1,gdpr:m},placements:[{region:"bespoke",indices:[1],img:{w:1920,h:1440},assets:[[{id:1,required:1,title:{len:90}},{id:2,required:1,data:{type:1}},{id:3,required:1,data:{type:2}},{id:4,required:1,data:{type:12}},...Object.keys(y).map(((e,t)=>({id:t+5,required:1,img:{type:Number(e),w:y[e][0],h:y[e][1],wmin:y[e][0],hmin:y[e][1]}})))]]}],isCookieWallPresent:p,isPeregrine:!0,device:{isMobile:!1}},w=new Headers;return w.append("x-ms-flightId",t),w.append("Content-Type","application/json; charset=utf-8"),w.append("User-Agent",n||navigator.userAgent),w.append("x-msedge-market",u),w.append("x-msedge-clientid",g),{headers:w,method:"POST",body:JSON.stringify(C)}}fetchMarqueeAd(e,t,n,i){if(!t)throw new Error("Can not fetch Marquee ad since no client settings available");let r;r=window.location.search&&window.location.search.includes("useDevSrtb=1")?new URL(p.Lr.SamEndpoint,"https://srtb-dev.msn.com/"):new URL(p.Lr.SamEndpoint,p.Lr.SamDomain);const o=this.createSamAdRequestData(t,e,n,i);return fetch(r,o)}}var w=n(15755);class b{constructor(){this.marqueeAdEligibility=!1,this.marqueeAdInitialized=!1,this.marqueeAdResponseProcessed=new Promise((e=>{this.marqueeAdPromiseResolver=e}))}static getInstance(){return r.Gq.get("__MarqueeAdService__",(()=>new b))}mapSamAdResponseToMarqueeAd(e,t){var n,i,r;const o={title:"",images:[],adClickedUrls:[],adServedUrls:[],adViewedUrls:[],clickThroughUrl:"",isUpdated:t,sponsorBackgroundColor:"",optOutUrl:""};if(!e)throw new Error("Invalid SAM response");if(null==e||!e.placements||0===(null==e?void 0:e.placements.length))throw new Error("Ad placements is empty in SAM response");const a=e.placements[0];if(null==a||!a.items||0===a.items.length)throw new Error("Ad items is empty in ad placement");const c=a.items[0];if(null==c||!c.assets||0===c.assets.length)throw new Error("Ad assets is empty in ad item");const d=c.assets.find((e=>e.title));if(!d)throw new Error("Ad item title is empty");o.title=d.title.text;const l=c.assets.find((e=>{var t;return 1===(null===(t=e.data)||void 0===t?void 0:t.type)}));if(!l||null===(n=l.data)||void 0===n||!n.value)throw new Error("Ad item provider name is empty");o.providerName=l.data.value;const u=c.assets.filter((e=>e.image));if(!u.length)throw new Error("Ad item images is empty");o.images=u.map((e=>e.image));const p=c.assets.find((e=>{var t;return 12===(null===(t=e.data)||void 0===t?void 0:t.type)}));if(!p||null===(i=p.data)||void 0===i||!i.value)throw new Error("Ad item cta text is empty");o.ctaText=p.data.value;const h=c.assets.find((e=>{var t;return(null===(t=e.image)||void 0===t?void 0:t.type)===s.r.Logo}));if(!h||null===(r=h.image)||void 0===r||!r.url)throw new Error("Ad item sponsor logo is empty");if(o.sponsorLogoImageUrl=h.image.url,c.verificationParameters){var g,m;const e=c.verificationParameters.split(";"),t=null===(g=e.find((e=>e.startsWith("backgroundColor"))))||void 0===g||null===(g=g.split(":"))||void 0===g?void 0:g[1];t&&(o.sponsorBackgroundColor=t);const n=null===(m=e.find((e=>e.startsWith("optoutsegid"))))||void 0===m||null===(m=m.split(":"))||void 0===m?void 0:m[1];n&&(o.optOutUrl=`https://secure.adnxs.com/seg?t=1&add=${n}`)}if(!c.url||0===c.url.length)throw new Error("Ad item url is empty");return o.clickThroughUrl=c.url,a.adServedUrls&&(o.adServedUrls=a.adServedUrls),a.visibilityUrls&&(o.adViewedUrls=a.visibilityUrls),c.clickUrls&&(o.adClickedUrls=c.clickUrls),o.nativeAdId="marqueeAdContainer",o.verificationParameters=c.verificationParameters,o}sendAppErrorEvent(e,t){a.M0.sendAppErrorEvent((0,c.Tr)(e,t))}getMarqueeAdRequest(){return window[u]}getMarqueeAd(){return this.marqueeAd}async initializeMarqueeAd(e=!1){var t;if(window.marqueeAdInitialized&&window.marqueeAd&&!this.marqueeAd)return this.marqueeAd=window.marqueeAd,this.marqueeAdInitialized=!0,void(this.marqueeAdEligibility=!0);if(window.isSSRCompleted&&!window.marqueeAdInitialized)return void this.marqueeAdPromiseResolver();if(!e&&this.marqueeAdInitialized)return;if(this.marqueeAdInitialized=!0,e&&C.initializeMarqueeAd(i.Al.ClientSettings,i.Al.CurrentFlights),null===(t=this.getMarqueeAdRequest())||void 0===t||!t.marqueeAdFetchPromise)return void this.marqueeAdPromiseResolver();let n,r;try{const e=this.getMarqueeAdRequest();if(null==e||!e.marqueeAdFetchPromise)throw new Error("Marquee ad request is missing, maybe it is not initialized successfully");n=await e.marqueeAdFetchPromise}catch(e){return this.sendAppErrorEvent(d.KPf,`Marquee ad request failed. Error: ${(0,l.n)(e)}`),void this.marqueeAdPromiseResolver()}if(n&&n.body&&n.ok&&200===n.status){try{r=await n.json()}catch(e){return this.sendAppErrorEvent(d.KPf,`Marquee ad response could not be parsed. Error: ${(0,l.n)(e)}`),void this.marqueeAdPromiseResolver()}try{this.marqueeAd=this.mapSamAdResponseToMarqueeAd(r,e),this.marqueeAdEligibility=!0}catch(e){this.sendAppErrorEvent(d.KPf,`Map marquee ad error. Error: ${(0,l.n)(e)}`)}this.marqueeAdPromiseResolver()}else{var o;if(204===(null===(o=n)||void 0===o?void 0:o.status))a.M0.addOrUpdateTmplProperty("MarqueeAdNoContent","204");else{var s;let e="";try{e=JSON.stringify(n)}catch(e){return}this.sendAppErrorEvent(d.KPf,`Marquee ad did not return the expected response. marqueeAdResponse: ${e}, status code: ${null===(s=n)||void 0===s?void 0:s.status}`)}this.marqueeAdPromiseResolver()}}async getMarqueeAdEligibilityAsync(){return!!this.marqueeAdEligibility||(await this.marqueeAdResponseProcessed,this.marqueeAdEligibility)}sendVerificationToIas(){(0,w.F)(this.marqueeAd.verificationParameters,this.marqueeAd.nativeAdId,d.Q0n)}async sendBeacons(e){if(e&&e.length)for(let t=0;t<e.length;t++){let n=new Image(1,1);n.src=e[t],n=null}}}const T=(0,o.h)(b)},95623:function(e,t,n){"use strict";n.d(t,{GM:function(){return d},dO:function(){return c}});var i=n(82694),r=n(7476),o=n(78931),a=n(69425);const s=[{ratio:i.hb._lowerBound,width:1,height:9999},{ratio:i.hb._1by191,width:1,height:1.91},{ratio:i.hb._9by16,width:9,height:16},{ratio:i.hb._3by4,width:3,height:4},{ratio:i.hb._1by1,width:1,height:1},{ratio:i.hb._4by3,width:4,height:3},{ratio:i.hb._16by9,width:16,height:9},{ratio:i.hb._191by1,width:1.91,height:1}],c=(0,a.Et)(r.Evv,"calculateRatio")((e=>{var t,n;const i=null==e||null===(t=e.items[0])||void 0===t?void 0:t.originalImageWidth,r=null==e||null===(n=e.items[0])||void 0===n?void 0:n.originalImageHeight;if(!i||!r)return;const o=u(e.items[0].imageUrl);if(!o)return;const a=o.searchParams.get("c");if(a&&"4"!==a)return;const c=Number(i),d=Number(r);let l=1;for(;l<s.length&&Math.ceil(c*s[l].height)!==Math.ceil(d*s[l].width);++l)if(!(Math.ceil(c*s[l].height)>Math.ceil(d*s[l].width))){if(1==l)break;const e=1*c/d;Math.abs(e-s[l].width/s[l].height)>=Math.abs(e-s[l-1].width/s[l-1].height)&&(l-=1);break}l==s.length&&(l-=1),e.template.desiredRatio=s[l].ratio})),d=(0,a.Et)(r.Evv,"reduceWidthOrHeightAndUpdateUrl")(((e,t,n,i)=>{const r=(0,o.Z)(s,(e=>e.ratio===t));if(1!==r.length)return;const a=r[0],c=n?e.ext.originalImageWidth:e.originalImageWidth,d=n?e.ext.originalImageHeight:e.originalImageHeight;if(!c||!d)return;const u=1*c/d,p=1*a.width/a.height,h={w:c,h:d};u>=p?h.w=Math.round(d*p):h.h=Math.round(c/p);const g={river:300,infopane:604};return h.w>g[i]?(h.h=Math.round(h.h*g[i]/h.w),h.w=g[i]):(h.h=g[i]*p,h.w=g[i]),l(h.h,h.w,e,n),h})),l=(0,a.Et)(r.Evv,"updateUrlWithDesiredSize")(((e,t,n,i)=>{const r=u(i?n.url:n.imageUrl);r&&(r.searchParams.set("h",e),r.searchParams.set("w",t),r.searchParams.set("c","4"),i?n.url=r.href:n.imageUrl=r.href)})),u=(0,a.Et)(r.Evv,"constructUrl")((e=>{let t;try{t=new URL(e)}catch(n){try{t=new URL(`https://${e}`)}catch{return}}return t}))},87851:function(e,t,n){"use strict";n.d(t,{F8:function(){return I},Sj:function(){return A},vy:function(){return k}});var i=n(23019),r=n(13578),o=n(31011),a=n(11935),s=n(4935),c=n(7476),d=n(21882),l=n(95623),u=n(69425);const p=(0,u.Et)(c.Evv,"checkConfigType")(((e,t)=>t.template.configType===e.configType)),h=(0,u.Et)(c.Evv,"checkRegion")(((e,t)=>e.region.includes(t.region))),g=(0,u.Et)(c.Evv,"checkAllAssets")(((e,t)=>!!(0,r.Z)(e.requiredAssetsAll)||e.requiredAssetsAll.every((e=>{var n,o;return!(0,r.Z)(null==t||null===(n=t.items[0])||void 0===n?void 0:n.assets)&&Object.keys(null==t||null===(o=t.items[0])||void 0===o?void 0:o.assets).some((t=>e===i.aT[t]))})))),m=(0,u.Et)(c.Evv,"checkAnyAssets")(((e,t)=>!!(0,r.Z)(e.requiredAssetsAny)||e.requiredAssetsAny.some((e=>{var n,o;return!(0,r.Z)(null==t||null===(n=t.items[0])||void 0===n?void 0:n.assets)&&Object.keys(null==t||null===(o=t.items[0])||void 0===o?void 0:o.assets).some((t=>e===i.aT[t]))})))),f=(0,u.Et)(c.Evv,"checkAdCount")(((e,t)=>t.items.length<=(e.maxAdCount||1))),v=(0,u.Et)(c.Evv,"checkMultiImage")(((e,t)=>{var n;return!e.multiImage||(null===(n=t.items[0])||void 0===n||null===(n=n.images)||void 0===n?void 0:n.length)>1})),y=(0,u.Et)(c.Evv,"checkDiscountThreshold")(((e,t)=>{var n;return!e.discountThreshold||!(null!==(n=t.items[0])&&void 0!==n&&n.assets)||e.discountThreshold<=t.items[0].assets.discount})),S=(0,u.Et)(c.Evv,"checkRatio")(((e,t)=>{var n,i;return!e.supportedImageRatios||(null===(n=e.supportedImageRatios)||void 0===n?void 0:n.includes(null==t||null===(i=t.template)||void 0===i?void 0:i.desiredRatio))})),C=(0,u.Et)(c.Evv,"setTemplate")(((e,t)=>{t.template.templateType=e.template instanceof Function?e.template(e,t):e.template,t.template.dynamicRenderingConfig=e.dynamicRenderingConfig&&e.dynamicRenderingConfig(t)})),w=(0,u.Et)(c.Evv,"filterAssets")(((e,t)=>{var n,c;if(null!=t&&null!==(n=t.template)&&void 0!==n&&n.enableVA)return;const d=(0,o.Z)([...i.fs,...(null==t||null===(c=t.template)||void 0===c?void 0:c.allowedAssets)||[],...e.supportedAssets||[],...e.requiredAssetsAll||[],...e.requiredAssetsAny||[]]);(0,a.Z)(t.items,(e=>{if((0,r.Z)(d)||(0,r.Z)(null==e?void 0:e.assets))return void delete e.assets;const t=(0,s.Z)(e.assets,((e,t,n)=>(d.includes(i.aT[n])&&(e[n]=t),e)),{});e.assets=t}))})),b=(0,u.Et)(c.Evv,"updateImageRatio")(((e,t)=>{var n,i;if(!e.supportedImageRatios||!e.targetImageRatio)return;let r;const o=d.cE.includes(t.region)?"infopane":"river";t.items.forEach((t=>{const n=(0,l.GM)(t,e.targetImageRatio,!1,o);r||(r=n),t.images&&(0,a.Z)(t.images,(t=>{t.ext&&t.ext.originalImageWidth&&t.ext.originalImageHeight&&(0,l.GM)(t,e.targetImageRatio,!0,o)}))})),null!==(n=r)&&void 0!==n&&n.h&&null!==(i=r)&&void 0!==i&&i.w&&(t.template.desiredHeight=r.h.toString(),t.template.desiredWidth=r.w.toString())})),T=(0,u.Et)(c.Evv,"trimProviderName")(((e,t)=>{t&&t.items&&t.items.forEach((e=>{e.providerName&&(e.providerName=k(e.providerName))}))})),k=(0,u.Et)(c.Evv,"trimProviderNameHelper")((e=>{if(!e)return"";const t=e.trim();try{let e=t;t.startsWith("http://")||t.startsWith("https://")||(e="https://"+t),new URL(e);const n=t.match(/^(www\.)?([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+)/);return n?t.length-n[2].length==1?t:n[2]:t}catch(e){return t}})),P=(0,u.Et)(c.Evv,"updateLayoutColor")(((e,t)=>{t&&t.items&&t.items.forEach((e=>{e.images&&e.images.forEach((e=>{e&&e.ext&&e.ext.layoutColor&&(e.ext.layoutColor.startsWith("#")||(e.ext.layoutColor="#"+e.ext.layoutColor))}))}))})),A=[p,h,g,m,f,y,v,S],I=[C,w,b,T,P]},21882:function(e,t,n){"use strict";n.d(t,{ms:function(){return A},yp:function(){return d},vn:function(){return C},KB:function(){return E},XP:function(){return I},cE:function(){return y},IN:function(){return ee},Ue:function(){return M},PY:function(){return K},Up:function(){return x},dj:function(){return z},FH:function(){return S},FC:function(){return w},rf:function(){return Q},PB:function(){return T},Fg:function(){return v},LM:function(){return ie},R:function(){return O},JU:function(){return B},J2:function(){return U},uH:function(){return _},ZV:function(){return G},xP:function(){return q},$u:function(){return N},E5:function(){return V},VR:function(){return P},Gu:function(){return X},BU:function(){return k},n_:function(){return m},zI:function(){return f},Fz:function(){return b}});var i=n(82694),r=n(99478),o=n(7291);const a=(0,r.ZV)(o.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"rating",displayReviewCount:!1}]}]),s=(0,r.RM)(o.$,"gradient-mask",{name:"gradient-mask",setClickBeacon:!0,layout:{mode:"pixel",bottom:"0",width:"300",zIndex:4},children:[{name:"special-offer",isDrConfig:!0,layout:{mode:"block",display:"inline-block",position:"relative",marginBottom:"8",marginInlineStart:"16",marginInlineEnd:"16",width:"150",zIndex:5}},{name:"ad-title",setClickBeacon:!0}]}),c=(0,r.ZV)(o.$,"gradient-mask",0,[{name:"div-wrapper",marginBottom:"8",marginLeft:"16",marginRight:"16",children:[{name:"free-shipping",color:"#036ac4",layout:{mode:"pixel",bottom:"265"}}]}]);var d,l=n(90351),u=n(24526),p=n(7476),h=n(89401),g=n(69425);!function(e){e.river="river",e.infopane="infopane",e.resriver="resriver",e.rivercms="river_cms",e.riverdb="riverdb",e.riverdbside="riverdbside",e.riverAmplify="river_amp",e.restoday="restoday",e.todaystripe="todaystripe",e.newsstripe="News-Stripe",e.entertainmentstripe="Entertainment-Stripe",e.sportsstripe="Sports-Stripe",e.lifestylestripe="Lifestyle-Stripe",e.rightRail="rightRail",e.rightRailAmplify="rr_amp",e.resinfopane="resinfopane",e.infopanetab="infopane-tab",e.infopanecms="infopane_cms",e.sliver="sliver",e.rightrail="rightrail",e.eoab="eoab",e.rectangle="rectangle",e.inarticle="inarticle",e.WatchInFeed="intranative",e.eoabmsx="eoabmsx",e.interstitialgallery="interstitialgallery",e.articleInline="ArticleInline",e.rivert="rivert",e.infopanet1="infopanet1",e.infopanet3="infopanet3",e.inarticlecarousel="inarticlecarousel",e.incontentcarousel="incontentcarousel",e.triver="triver",e.infopane1u="infopane1u"}(d||(d={}));const m=[d.rightrail,d.eoab,d.rectangle,d.inarticle,d.eoabmsx,d.interstitialgallery,d.WatchInFeed,d.articleInline,d.rivert,d.inarticlecarousel,d.incontentcarousel],f=[d.river,d.riverdb,d.riverdbside],v=(d.riverdb,[d.river,d.resriver,d.rivercms,d.rightRail,d.rightrail]),y=[d.infopane,d.resinfopane,d.infopanetab,d.infopanecms],S=[d.restoday,d.todaystripe,d.newsstripe,d.entertainmentstripe,d.sportsstripe,d.lifestylestripe],C=[...v,...y],w=[...v,...S,d.riverdb,d.rightRail,d.rightrail,d.sliver,d.rectangle,d.eoab,d.inarticle,d.inarticlecarousel],b=[d.infopane,d.resinfopane,d.riverdb],T=[d.infopane,d.resinfopane],k=[d.infopanet1,d.infopanet3],P=[d.rivert,d.infopane1u,...k],A=[d.infopane,d.resinfopane,d.river,d.resriver,d.inarticle,d.riverdb],I={default:20,discScribble10:10,hotspotSingle10:10,saleHighlight15:15,gamification:5},E=10,M=e=>!!(e&&e.items&&e.items[0]&&e.items[0].assets&&e.items[0].assets.transparentImage&&e.items[0].assets.transparentImage.url&&e.items[0].images&&e.items[0].images[0]&&e.items[0].images[0].ext&&e.items[0].images[0].ext.layoutColor),x=e=>((e,t)=>{var n;const i=null==e||null===(n=e.items)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.assets)||void 0===n?void 0:n.transparentImage,r=null==i?void 0:i.w,o=null==i?void 0:i.h;return!!((null==i?void 0:i.url)&&null!=i&&o>0&&r>0)&&t(r,o)})(e,((e,t)=>e/t<1.4)),L=e=>(0,l.Z)(e,"items[0].assets.rating"),R=e=>(0,l.Z)(e,"items[0].assets.specialOffer"),D=e=>(0,l.Z)(e,"items[0].assets.freeShipping"),F=e=>(0,l.Z)(e,"items[0].assets.discount"),O=e=>L(e)?a:R(e)?s:D(e)?c:void 0,B=e=>L(e)?i.SI.ComboRating:R(e)?i.SI.ComboSpecialOffer:D(e)?i.SI.ComboFreeShipping:void 0,N=(e,t)=>{var n;t&&(e.enableNativeAdWC=!0);const i=null==e||null===(n=e.items[0])||void 0===n?void 0:n.assets;null!=i&&i.rating?e.items[0].assets=(0,u.Z)(i,["rating"]):null!=i&&i.specialOffer?e.items[0].assets=(0,u.Z)(i,["specialOffer"]):null!=i&&i.discount&&(null==i?void 0:i.discount)>=I.saleHighlight15?e.items[0].assets=(0,u.Z)(i,["discount"]):null!=i&&i.freeShipping&&(e.items[0].assets=(0,u.Z)(i,["freeShipping"]))},_=e=>L(e)?i.SI.ComboRatingNonDR:R(e)?i.SI.ComboSpecialOfferNonDR:F(e)&&F(e)>=I.saleHighlight15?i.SI.ComboSaleHighlightNonDR:D(e)?i.SI.ComboFreeShippingNonDR:i.SI.Default,U=e=>L(e)?i.SI.ComboRatingNonDRControl:R(e)?i.SI.ComboSpecialOfferNonDRControl:F(e)&&F(e)>=I.saleHighlight15?i.SI.ComboSaleHighlightNonDRControl:D(e)?i.SI.ComboFreeShippingNonDRControl:i.SI.Default,W=e=>(0,l.Z)(e,"items[0].assets.sold"),H=e=>(0,l.Z)(e,"items[0].assets.returnPolicy"),$=e=>(0,l.Z)(e,"items[0].assets.condition"),q=e=>W(e)?i.SI.ComboSoldNonDR:H(e)?i.SI.ComboReturnPolicyNonDR:$(e)?i.SI.ComboConditionNonDR:i.SI.Default,G=e=>W(e)?i.SI.ComboSoldNonDRControl:H(e)?i.SI.ComboReturnPolicyNonDRControl:$(e)?i.SI.ComboConditionNonDRControl:i.SI.Default,V=(e,t)=>{var n;t&&(e.enableNativeAdWC=!0);const i=null==e||null===(n=e.items[0])||void 0===n?void 0:n.assets;null!=i&&i.sold?e.items[0].assets=(0,u.Z)(i,["sold"]):null!=i&&i.returnPolicy?e.items[0].assets=(0,u.Z)(i,["returnPolicy"]):null!=i&&i.condition&&(e.items[0].assets=(0,u.Z)(i,["condition"]))},z=(0,g.Et)(p.Evv,"modifyImageUrlForResponsiveImageSizingTemplate")(((e,t)=>{var n,r;const o=null==e||null===(n=e.items)||void 0===n?void 0:n[0],a=null===(r=o.assets)||void 0===r?void 0:r.price;if(e.template.templateType=i.SI.Default,o&&!a){var s,c;const n=Y(parseFloat(o.originalImageHeight),parseFloat(o.originalImageWidth),o.imageUrl,e.template.responsiveImageSizingTemplateConfigs);n&&n.imageUrl!==o.imageUrl&&J(null==n||null===(s=n.responsiveImageSizingTemplateConfig)||void 0===s?void 0:s.maxHeight,(0,h.O1)(null===(c=e.items)||void 0===c||null===(c=c[0])||void 0===c?void 0:c.title))&&(e.enableResponsiveImageSize=!0,e.template.templateType=i.SI.ResponsiveImageSizing,t||(e.responsiveImageSizingTemplateConfig=n.responsiveImageSizingTemplateConfig,e.items[0].imageUrl=n.imageUrl))}})),j=(0,g.Et)(p.Evv,"isDescriptionShowingHelper")(((e,t)=>{var n,i;const r=null===(n=e.items)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.description,o=null===(i=e.items)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.title,a=(null==r?void 0:r.length)>1&&o!=r,s=d[e.region];return b.includes(s)?a:a&&(0,h.O1)(o)<=t})),K=(0,g.Et)(p.Evv,"isDescriptionShowing")(((e,t)=>j(e,t)?i.SI.ResponsiveDescription:i.SI.Default)),Q=(0,g.Et)(p.Evv,"pickRandomTemplateWithDensity")(((e,t,n,i)=>{if(Math.random()>i)e.enablePattern=!1,e.template.templateType=n;else{const n=t.length,i=Math.floor(Math.random()*n);e.template.templateType=t[i],e.enablePattern=!0}})),J=(0,g.Et)(p.Evv,"isTitleLineMeetRequire")(((e,t)=>!(!e||!t)&&(225===e&&t<=1||200===e&&t<=2))),Y=(0,g.Et)(p.Evv,"modifyImageUrl")(((e,t,n,i)=>{if(!(e&&t&&n&&n.startsWith("https://www.bing.com/th")))return{imageUrl:n};const r=Z(n),o=n.split("?")[0];if(!i||0===i.length)return{imageUrl:n};for(let n=0;n<i.length;n++){const a=i[n],s=t/e;if(s>=a.lowerBound&&s<=a.placementRatio){return{imageUrl:`${o}?id=${r.id}${r.pid?`&pid=${r.pid}`:""}&w=${a.maxWidth}`,responsiveImageSizingTemplateConfig:a}}if(s>a.placementRatio&&s<=a.upperBound){return{imageUrl:`${o}?id=${r.id}${r.pid?`&pid=${r.pid}`:""}&h=${a.maxHeight}`,responsiveImageSizingTemplateConfig:a}}}return{imageUrl:n}})),Z=(0,g.Et)(p.Evv,"parseImageUrl")((e=>{if(!e)return;const t=new URL(e),n=new URLSearchParams(t.searchParams),i={};return n.forEach(((e,t)=>{["id","pid"].includes(t)&&(i[t]=e)})),i})),X=(0,g.Et)(p.Evv,"switchToAIImage")((e=>{e&&e.items&&e.items[0]&&e.items[0].assets&&e.items[0].assets.transparentImage&&e.items[0].assets.transparentImage.url&&e.items[0].imageUrl&&(e.items[0].imageUrl=e.items[0].assets.transparentImage.url)})),ee=(0,g.Et)(p.Evv,"isCTAOrLogoReturned")((e=>!!(e&&e.items&&e.items[0]&&e.items[0].assets&&(e.items[0].assets.logo||e.items[0].assets.callToAction)))),te=(0,g.Et)(p.Evv,"isCTAReturned")((e=>!!(e&&e.items&&e.items[0]&&e.items[0].assets&&e.items[0].assets.callToAction))),ne=(0,g.Et)(p.Evv,"isLogoReturned")((e=>!!(e&&e.items&&e.items[0]&&e.items[0].assets&&e.items[0].assets.logo))),ie=(0,g.Et)(p.Evv,"selectCTALogoTemplate")((e=>te(e)&&ne(e)?i.SI.CTALogo:te(e)?i.SI.CTAOnly:ne(e)?i.SI.LogoOnly:i.SI.Default))},76623:function(e,t,n){"use strict";n.d(t,{Bi:function(){return C},En:function(){return h},FD:function(){return f},IA:function(){return S},Yf:function(){return g},c5:function(){return w},kc:function(){return b},x4:function(){return m}});var i=n(61633),r=n(23019),o=n(27517),a=n(88826),s=n(7476),c=n(31558),d=n(4935),l=n(90351),u=n(25156),p=n(46058);function h(e){return i.S7[e]||"Ad"}function g(e){let t="";if(!e)return t;try{const n=JSON.parse(e).tcb;n&&Array.isArray(n)&&n.forEach((e=>{e.includes("srtb")&&(t=e.replace("notify/clicked","notify/feedback"))}))}catch(e){t=""}return t}function m(e,t){const n=(0,d.Z)(t,((e,t)=>{if(null!=t&&t.data){const n=(0,l.Z)(t,"data.type"),i=(0,u.Z)(r.aT,(e=>e===`data-${n}`));if(i)if(r.xs.includes(i)){const n=(0,l.Z)(t,"data.value")||"{}";e[i]=JSON.parse(n)}else e[i]=(0,l.Z)(t,"data.value")}else if(null!=t&&t.image||null!=t&&t.img){let s,c;null!=t&&t.image?(s=null==t?void 0:t.image,c=(0,l.Z)(t,"image.type")):(s=null==t?void 0:t.img,c=(0,l.Z)(t,"img.type"));const d=(0,u.Z)(r.aT,(e=>e===`image-${c}`));var n,i,o,a;if(d)e[d]={w:null===(n=s)||void 0===n?void 0:n.w,h:null===(i=s)||void 0===i?void 0:i.h,url:null===(o=s)||void 0===o?void 0:o.url,ext:null===(a=s)||void 0===a?void 0:a.ext}}else null!=t&&t.title&&(e.title=t.title.text);return e}),{});e.assets=n}function f(e,t,n){var i;let r;if(t)r=e.imp[0];else{if(!e.data)return;try{r=JSON.parse(e.data)}catch(t){(0,a.H)(s.TBk,"Invalid JSON sent to card mapper from WPO Boost",void 0,{...s.TBk.pb,customMessage:`${t&&t.message}`,wpoJson:e.data})}}const d=null===(i=v(r,!0))||void 0===i||null===(i=i.promotions)||void 0===i?void 0:i[0];return(0,c.N)()&&w(d,n),r.tagid===o.x.Prong2?d.isProng2Promotion=!0:r.tagid==o.x.Prong1&&(d.isProng1Promotion=!0),d}function v(e,t){if(!(e.Promotions&&e.Promotions.length>0))return;const n={promotions:[]};return t?n.promotions[0]=y(e.Promotions[0]):n.promotions=e.Promotions.map((e=>y(e))),n}function y(e){var t;const{images:n,longTitle:i,title:r,description:o,displayUrl:a,targetUrl:s,Beacons:c,brand:d,merchantCategory:l,actionText:u,logo:p,adScenarioType:h,rebateValue:g,minPurchaseValue:m,valueType:f,nativeAdType:v,scope:y,priceCurrencySymbol:S,market:C,dealPrice:w,originalPrice:b}=e,{imageUrl:T}=n&&n[0],k=1==v||8==v,P=c.map((e=>e.MIFeedbackurl)),A=c.map((e=>e.MVFeedbackurl)),I=c.map((e=>{var t;return null===(t=e.EventUrl)||void 0===t?void 0:t.replace("{ACTION}","click")})),E=w||b,M=JSON.stringify({tcb:I||[]}),x=JSON.stringify({tvb:A,trb:P,e:!0,tjb:[]});return{region:"rr_amp",regionIndex:void 0,destinationUrl:s||"",imageUrl:T||"",imageUrlFallback:(null===(t=n[1])||void 0===t?void 0:t.imageUrl)||T,tagLine:i||r,logoText:a||"",clickBeacons:M||"",beaconsJson:x||"",images:n,logo:p,brand:d||"",title:r||"",category:l||"",actionText:u||"",logoUrl:null==p?void 0:p.imageUrl,adScenarioType:h,rebateValue:g,minPurchaseValue:m,valueType:f,isStoreWide:1==y,isTextAd:k,priceCurrencySymbol:S,market:C,priceTag:E||"",nativeAdType:v}}function S(e,t){if(!function(e,t=0){return e.Promotions&&e.Promotions.length>t}(e))return;const n=e.Promotions[0],{images:i,longTitle:r,title:o,description:a,displayUrl:s,targetUrl:c,Beacons:d}=n,{height:l,width:u,imageUrl:p}=i[0];let h="",g="";h=l&&l.toString(),g=u&&u.toString();const m=d.map((e=>e.MIFeedbackurl)),f=d.map((e=>e.MVFeedbackurl)),v=d.map((e=>{var t;return null===(t=e.EventUrl)||void 0===t?void 0:t.replace("{ACTION}","click")})),y=JSON.stringify({tcb:v||[]}),S={region:"rr_amp",regionIndex:1,items:[],adServedUrls:m,visibilityUrls:f,beaconsJson:JSON.stringify({tvb:f,trb:m,e:!0,tjb:[]})},C={destinationUrl:c,imageHeight:h,imageUrl:p,imageWidth:g,title:r||o,description:a,prong2AmplifyBusinessName:s,clickBeacons:y};return S.items.push(C),S.imageHeight=h,S.imageWidth=g,S}function C(e,t){if(!e||!e.index||!e.region)return;const{adServedUrls:n,beaconsJson:r,index:o,items:a,jsTrackerUrls:s,locale:c,privacyUrl:d,providerId:l,region:u,visibilityUrls:p,crids:f,pageType:v}=e,y={adServedUrls:n,beaconsJson:r,crids:f,items:[],jsTrackerUrls:s,privacyUrl:d,providerId:l,region:u,regionIndex:o,visibilityUrls:p};y.adLabelText=h(c),y.isGreyAdsLabelEnabled=i.Eg.includes(c);let S="",C="";return a.forEach((e=>{const{adChoicesUrl:t,adScenarioType:n,assets:i,clickBeacons:r,description:o,imageHeight:a,imageWidth:s,imageUrl:c,originalImageHeight:d,originalImageWidth:l,sourceName:u,title:p,uniqueId:h,url:f,verificationParameters:w}=e;S=a&&a.toString(),C=s&&s.toString();const b={adChoiceIconUrl:t,adScenarioType:n,assets:i,clickBeacons:r,destinationUrl:f,description:o,feedbackUrl:r&&g(r),imageHeight:S,imageUrl:c,imageWidth:C,originalImageHeight:d&&d.toString(),originalImageWidth:l&&l.toString(),providerName:u,title:p,uniqueId:h,verificationParameters:w};v&&"edgechrntp"===v&&m(b,i),y.items.push(b)})),y.imageHeight=S,y.imageWidth=C,y}function w(e,t){if(e.beaconsJson){new p.A(t).sendBeaconForAdServed({beaconsJson:e.beaconsJson,beaconsSupportHttpPOST:e.beaconsSupportHttpPOST})}}function b(e,t){const n=[];if(t){const i=t.reduce(((t,n,i)=>{const o=(0,u.Z)(r.aT,(e=>e===n));if(o){const n={...r.hy[o],id:i+1};var a,s;if("img"===o)n.img={w:null===(a=e.img)||void 0===a?void 0:a.w,h:null===(s=e.img)||void 0===s?void 0:s.h,...n.img};t.push(n)}return t}),[]);n.push(i)}return n}},89401:function(e,t,n){"use strict";n.d(t,{O1:function(){return a}});const i=2.255859375,r=(e,t=20)=>{if(!e||0===e.length)return 0;const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.13623046875,.3046875,.4375,.8,.6,.9,.8,.3,.4,.4328125,.5,.7,.4,.403125,.3,.6,.6,.403125,.6,.6,.7,.6,.6,.6,.6,.6,.3,.4,.6953125,.7,.6953125,.5,1,.8,.6046875,.7,.71875,.6,.503125,.7,.7359375,.3,.5,.7,.6,.925,.8,.8,.6,.9,.7,.6,.7,.703125,.8,1.1,.8,.8,.7,.4,.6,.3328125,.7,.6,.3,.5234375,.603125,.5,.603125,.6,.5,.603125,.6,.3,.5,.6,.3,.9,.6,.6,.603125,.603125,.4,.5,.5,.6,.7,.9,.7,.7,.6,.4,.3,.4,.7];return e.split("").map((e=>o(e,n,.5944274259868422,1.030769230769231))).reduce(((e,t)=>t+e))*t},o=(e,t,n,i)=>{const r=e.charCodeAt(0);return r<t.length?t[r]:s(e)?i:n},a=(e,t=265,n=20)=>{if(!e||0===e.length)return 0;const o=e.split(" ");let a=1,s=t;for(let e=0;e<o.length;e++){const c=r(o[e],n);c>s?(a+=1,s=t-c-i):c===s?(a+=1,s=t):s=s-c-i}return a},s=e=>/^[\u4e00-\u9fff\u3040-\u30ff\u1100-\u11ff\u3130-\u318f\uac00-\ud7af]$/.test(e)},14116:function(e,t,n){"use strict";n.d(t,{Ai:function(){return a},F8:function(){return d},GL:function(){return o},P$:function(){return i},_7:function(){return c},jV:function(){return s},mC:function(){return r},x7:function(){return l}});const i={id:"https://enterprisenews.microsoft.com",friendlyName:n(92095).Ak},r="https://ent-api.msn.com/news/companies/current/settings",o="Peregrine",a="AdminPortalSettings",s="AdminPortalSettingsRetryTimes",c=3,d="AdminPortalUserLayoutCache",l="isContentFeedManagedByAdminPortal"},14377:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});const i=["prg-wpo-ss","prg-dr-infopanec","prg-title-2","prg-trending","prg-trendingc","prg-ad-ctav2","prg-ad-sh-v1","prg-ad-sh-v1-c","prg-ad-sh-v3","prg-ad-sh-v4","prg-ad-sh-v3v4-c","prg-ad-hover","prg-ad-hover-c","prg-ad-combo","prg-ad-combo2","prg-ad-combo-c","prg-ad-shortg","prg-ad-shortgc"]},7291:function(e,t,n){"use strict";n.d(t,{$:function(){return a}});var i=n(91257),r=n(99478);const o={name:"default-template",children:[...i.u,{name:"gradient-mask",layout:{position:"absolute",bottom:"0",width:"300",zIndex:2},children:[{name:"ad-title"}]}]},a=(0,r.Tb)(o,"product-image",{imageMaskOn:!0})},99478:function(e,t,n){"use strict";var i;n.d(t,{As:function(){return c},BH:function(){return a},FT:function(){return u},It:function(){return l},Oz:function(){return r},RM:function(){return s},Tb:function(){return d},ZV:function(){return p}});class r{}r.byName=e=>t=>(null==t?void 0:t.name)===e;class o{}function a(e,t,n=o.identity()){return h(e,[{condition:t,action:n}])}function s(e,t,n){return a(e,r.byName(t),o.replaceWith(n))}function c(e,t,n){const i=[];for(let e=0;e<t.length;e++)i.push({condition:r.byName(t[e]),action:o.replaceWith(n[e])});return h(e,i)}function d(e,t,n){return a(e,r.byName(t),o.extendFields(n))}function l(e,t,n){const i=[];for(let e=0;e<t.length;e++)i.push({condition:r.byName(t[e]),action:o.extendFields(n[e])});return h(e,i)}function u(e,t,n,i){return a(e,r.byName(t),o.spliceChildren(n,i))}function p(e,t,n,i=[],s){return a(e,r.byName(t),o.spliceChildren(n,i,s))}function h(e,t){if((e=t.reduce(((e,t,n,i)=>{const{condition:r,action:o}=t;return r(e)?(i[n]=null,o(e)):e}),e)).children){const n=e.children.map((e=>h(e,t.filter((e=>e)))));return{...e,children:n}}return e}(i=o).identity=()=>e=>e,i.replaceWith=e=>()=>e,i.extendFields=e=>t=>({...t,...e}),i.spliceChildren=(e,t=[],n)=>i=>{const r=[...i.children||[]];return r.splice(e,n,...t),{...i,children:r}}},91257:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});const i=[{name:"product-image",layout:{position:"absolute",left:0,top:0,width:"300",height:"225",zIndex:1}},n(37500).l]},37500:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});const i={name:"footer",layout:{mode:"flex",flexDirection:"row",alignItems:"center",position:"absolute",bottom:"9",height:"31",width:"100%"},children:[{name:"start-action-part",children:[{name:"ad-label",layout:{marginInlineStart:"16",marginInlineEnd:"6",zIndex:5}},{name:"provider-name",layout:{flex:1,minWidth:0,zIndex:5},customStyleClass:"white-12-flex-layout"}]},{name:"end-action-part",children:[{name:"disclaimer",layout:{zIndex:5}},{name:"ad-choice",layout:{zIndex:5}},{name:"see-more",layout:{marginInlineEnd:"16",zIndex:5}}]}]}},82:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});const i={name:"default-infopane-template",children:[{name:"product-image",layout:{position:"absolute",left:"0",top:"0",zIndex:1,width:"100%",height:"304"},imageMaskOn:!0,imageMaskOpacity:"0.1"},{name:"gradient-mask",height:"176",paddingBottom:"0",paddingTop:"0",layout:{position:"absolute",bottom:"0",width:"100%",zIndex:2},useDynamicStyle:!0},{name:"ad-title",lineHeight:"36",titleFontSize:"28",layout:{position:"absolute",bottom:"53",width:"100%",zIndex:2}},n(37500).l]}},50462:function(e,t,n){"use strict";function i(e){for(const[t,n]of e)window[t]=n;const t=new CustomEvent(o,{detail:{adUniqueIds:Array.from(e.keys())}});document.dispatchEvent(t)}function r(e){for(const t of e)delete window[t]}n.d(t,{gL:function(){return o},gy:function(){return i},l$:function(){return r}});const o="nativeAdRendered"},43063:function(e,t,n){"use strict";n.d(t,{$H:function(){return u},V8:function(){return l},lj:function(){return d}});var i=n(82634);const r=5131;let o;try{o=(()=>{const e=i.Z.getAdbLoggedTime();return r+e%r})()}catch(e){o=r}const a=/(a)(d)/gi,s=e=>String.fromCharCode(e+97),c=(new Map,(e,t)=>{const n=(e=>{let t,n="";for(t=Math.abs(e);t>26;t=t/26|0)n=s(t%26)+n;return(s(t%26)+n).replace(a,"$1-$2")})(((e,t)=>(void 0===t&&(t=o),((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(t,e)))(e,t)>>>0);return n}),d=(e,t)=>`${h(e,t)}`,l=(e,t)=>`algo-${h(e,t)}`,u=(e,t,n)=>e&&null!==i.Z&&void 0!==i.Z&&i.Z.getAdbStatus()?d(t,n):t,p=new Map,h=(e,t)=>{const n=((e,t)=>(p.has(e)||p.set(e,c(e,t)),p))(e,t).get(e);return n}},15293:function(e,t,n){"use strict";n.d(t,{_t:function(){return a}});const i={neutralForegroundRestColor:"--neutral-foreground-rest",neutralFillHoverColor:"--neutral-fill-hover",neutralFillActiveColor:"--neutral-fill-active",adBackgroundColor:"--ad-background-color",gradientMidColor:"--gradient-mid-color",gradientEndColor:"--gradient-end-color"},r={"font-weight":"","z-index":"",flex:"","flex-grow":"","flex-shrink":"",order:""},o=e=>null!=r[e]?r[e]:"px";function a(e,t){return null==t||"undefined"===t?"":(e=null!=i[n=e]?i[n]:n.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)),isNaN(Number(t))?`${e}:${t}`:`${e}:${t}${o(e)}`);var n}},69425:function(e,t,n){"use strict";n.d(t,{Et:function(){return d},uj:function(){return l}});var i=n(88826),r=n(23549);function o(e){var t;return!(!/^.*{\s*return __awaiter/.test(String(e))&&!/^\([\w_$,\s]*?\) => __awaiter/.test(String(e)))||"AsyncFunction"===(null==e||null===(t=e.constructor)||void 0===t?void 0:t.name)}function a(e,t,n,a,s,c){if(r.M0.sendAppErrorEvent((0,i.Tr)(t,n||"",function(e,t){return`args: ${JSON.stringify(e)||""}\nerror: ${(null==t?void 0:t.stack)||(null==t?void 0:t.message)||""}`}(a,s))),!c)return;const d=c(...a,s);return o(e)?Promise.resolve(d):d}function s(e,t,n,i,r,s){try{return o(e)?e.call(this,...i).catch((o=>a(e,t,n,i,o,r))).finally((()=>{null==s||s(...i)})):e.call(this,...i)}catch(o){return a(e,t,n,i,o,r)}finally{o(e)||null==s||s(...i)}}function c(e,t){const n=Object.getOwnPropertyDescriptor(e.prototype,t);return n||{configurable:!0,enumerable:!0,writable:!0,value:e.prototype[t]}}const d=(e,t,n,i)=>(r,o,a)=>{const c=null==a?void 0:a.value;if("function"==typeof r)return function(...o){return s.call(this,r,e,t,o,n,i)};if("function"!=typeof c)return a;if(!e)throw Error("Parameter baseError is missed");return a&&(a.value=function(...r){return s.call(this,c,e,t,r,n,i)}),a},l=(e,t,n,i)=>r=>{class o extends r{connectedCallback(){super.connectedCallback()}}const a={...Object.getOwnPropertyDescriptors(r.prototype),...Object.getOwnPropertyDescriptors(o.prototype)};for(const r in a){var d;if("constructor"===r||null===(d=a[r])||void 0===d||!d.value)continue;if(!(o.prototype[r]instanceof Function))continue;const l=c(o,r),u=l.value;l.value=function(...r){return s.call(this,u,e,t,r,n,i)},Object.defineProperty(o.prototype,r,l)}return o}},45069:function(e,t,n){"use strict";n.d(t,{Cw:function(){return s},Km:function(){return c}});var i,r=n(33940),o=n(69425),a=n(7476);const s={EventType:"uat",Timestamp:"uats",Duration:"uad",Element:"uae",Message:"uam"};class c{fireImpressionLog(e,t,n){null!=e&&e.id&&!c.impressionNativeAdIdSet.has(null==e?void 0:e.id)&&c.impressionLog&&(c.impressionLog(e,t,n),c.impressionNativeAdIdSet.add(null==e?void 0:e.id))}fireClickLog(e,t,n){c.clickLog&&c.clickLog(e,t,n)}saveUserActionBeacon(e="",t="{}",n="srtb.msn.com"){const i=JSON.parse(t),r=i&&i.trb;if(e&&r)for(let t=0;t<r.length;t++){if(!r[t].includes(n))continue;const i=new URL(r[t]);i.pathname=i.pathname.replace("served","useraction"),c.userActionBeaconsMap.set(e,i),c.startTimestampMap.set(e,(new Date).getTime())}}getUserActionBeacon(e=""){return c.userActionBeaconsMap.get(e)}populateBeaconUrl(e,t,n,i,r,o){const a=this.getUserActionBeacon(e);if(!a)return"";for(const e of Object.values(s)){var d;null===(d=a.searchParams)||void 0===d||d.delete(e)}if(n){var l,u,p,h,g,m;const d=c.startTimestampMap.get(e),f={m:i,f:t};null===(l=a.searchParams)||void 0===l||l.set(s.EventType,n),null===(u=a.searchParams)||void 0===u||u.set(s.Timestamp,String(d?(new Date).getTime()-d:0)),null===(p=a.searchParams)||void 0===p||p.set(s.Duration,r||0),null===(h=a.searchParams)||void 0===h||h.set(s.Message,JSON.stringify(f)),null===(g=a.searchParams)||void 0===g||g.set(s.Element,(null==o||null===(m=o.tagName)||void 0===m?void 0:m.toLowerCase())||"")}return a}}(i=c).impressionNativeAdIdSet=new Set,i.userActionBeaconsMap=new Map,i.startTimestampMap=new Map,(0,r.gn)([(0,o.Et)(a.a4J,"UserActionLog.fireImpressionLog")],c.prototype,"fireImpressionLog",null),(0,r.gn)([(0,o.Et)(a.a4J,"UserActionLog.fireClickLog")],c.prototype,"fireClickLog",null),(0,r.gn)([(0,o.Et)(a.a4J,"UserActionLog.saveUserActionBeacon")],c.prototype,"saveUserActionBeacon",null),(0,r.gn)([(0,o.Et)(a.a4J,"UserActionLog.getUserActionBeacon")],c.prototype,"getUserActionBeacon",null),(0,r.gn)([(0,o.Et)(a.a4J,"UserActionLog.populateBeaconUrl")],c.prototype,"populateBeaconUrl",null)},57405:function(e,t,n){"use strict";var i;n.d(t,{v:function(){return i}}),function(e){e.CacheMissing="authCacheMissing",e.CacheExpired="authCacheExpired",e.OtherCacheError="authCacheError"}(i||(i={}))},86489:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(57405);class r{constructor(){this.AuthDataMap={}}async getAuthDataFromCache(e){if(null==e||!e.id)return{authToken:void 0,resource:e,error:{message:"inMemoryAuthCacheStrategy Resource Id is missing",status:i.v.OtherCacheError}};const t=Math.round(performance.now()),n=this.AuthDataMap[e.id],r=Math.round(performance.now());return n?this.isJwtTokenExpired(n.authToken)?{authToken:void 0,resource:e,error:{message:"inMemoryAuthCacheStrategy Cache is expired",status:i.v.CacheExpired},performance:{startTime:t,endTime:r}}:{resource:e,authToken:n.authToken,performance:{startTime:t,endTime:r}}:{authToken:void 0,resource:e,error:{message:"inMemoryAuthCacheStrategy Cache is missing",status:i.v.CacheMissing},performance:{startTime:t,endTime:r}}}async setAuthDataToCache(e,t){if(null==e||!e.id)return{resource:e,error:{message:"setAuthDataToCache Resource Id is missing",status:i.v.OtherCacheError}};const{authToken:n}=t,r=Math.round(performance.now());this.AuthDataMap[e.id]={authToken:n};return{resource:e,performance:{startTime:r,endTime:Math.round(performance.now())}}}async removeAuthDataFromCache(e){if(null==e||!e.id)return{resource:e,error:{message:"removeAuthDataFromCache Resource Id is missing",status:i.v.OtherCacheError}};const t=Math.round(performance.now());delete this.AuthDataMap[e.id];return{resource:e,performance:{startTime:t,endTime:Math.round(performance.now())}}}isJwtTokenExpired(e){var t;if(!e)return;let n;try{n=JSON.parse(atob(e.split(".")[1]))}catch(e){return}return null!==(t=n)&&void 0!==t&&t.exp?1e3*n.exp<Date.now():void 0}}},92979:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});var i=n(57405);class r{async getAuthDataFromCache(e){return{resource:e,error:{message:"inMemoryAuthCacheStrategy Resource Id is missing",status:i.v.CacheMissing}}}async setAuthDataToCache(e){return{resource:e}}async removeAuthDataFromCache(e){return{resource:e}}}},34004:function(e,t,n){"use strict";var i;n.d(t,{H:function(){return i}}),function(e){e.InteractionRequired="userInteractionRequired",e.AuthProviderNotSupported="authProviderNotSupported",e.MaySucceedOnRetry="fetchRetryableError",e.AuthPrivateNotSupportedForMAM="authPrivateNotSupportedForMAM",e.OtherError="authFetchError"}(i||(i={}))},46243:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var i=n(34004);const r=(e,t=3,n=1e3)=>(t<0&&(t=0),{fetchAuthData:async(r,a)=>{let s={resource:r,error:{status:i.H.OtherError}};a&&(t=0);for(let d=0;d<t+1;d++){var c;if(s=await e.fetchAuthData(r,a),(null===(c=s)||void 0===c||null===(c=c.error)||void 0===c?void 0:c.status)!==i.H.MaySucceedOnRetry)break;await o(n)}return s}}),o=async e=>new Promise((function(t){setTimeout(t,e)}))},20509:function(e,t,n){"use strict";n.d(t,{a:function(){return a}});var i=n(34004),r=n(45870);var o;!function(e){e[e.kNoError=0]="kNoError",e[e.kTokenFetchUserInteractionRequired=13]="kTokenFetchUserInteractionRequired",e[e.kTokenFetchProviderError=15]="kTokenFetchProviderError",e[e.kInteractionRequired=24]="kInteractionRequired",e[e.kUnsupportedSovereignty=60]="kUnsupportedSovereignty",e[e.kSovereigntyDetectionFailed=61]="kSovereigntyDetectionFailed"}(o||(o={}));class a{constructor(e){if(this.authCallerValidator=e,!e)throw new Error("Auth Caller Validator is not provided in EdgeChromiumFetchStrategy")}async fetchAuthData(e,t=!1){const{account:n,client:a,...s}=await this.authCallerValidator.validateAuthCaller();if(!n||!a)return{...s,resource:e};if(null==e||!e.id)return{resource:e,error:{message:"Resource Id not provided.",status:i.H.OtherError}};const c=t?window.chrome.authPrivate.acquireAccessTokenWithUserInteraction:window.chrome.authPrivate.acquireAccessTokenSilently,d=new r.o,l={account_id:n.account_id,account_type:n.account_type,client_id:a.id,scope_or_resource:e.id},u=Math.round(performance.now());let p=-1;c(l,(e=>{d.set(e),p=Math.round(performance.now())}));const h=await d.getResultAsync(),{access_token:g,is_success:m,error_info:f,is_token_valid:v}=h||{};if(m&&v)return{authToken:g,resource:e,callerId:s.callerId,performance:{startTime:u,endTime:p}};let y=i.H.OtherError,S=(null==f?void 0:f.error_string)||"Unknown Error";return m&&!v?(y=i.H.MaySucceedOnRetry,S="Invalid Auth Token returned"):(null==f?void 0:f.secondary_error)===o.kTokenFetchUserInteractionRequired||(null==f?void 0:f.secondary_error)===o.kInteractionRequired?(y=i.H.InteractionRequired,S="User interaction Required"):(null==f?void 0:f.secondary_error)===o.kTokenFetchProviderError?(y=i.H.AuthProviderNotSupported,S="Authentication provider not supported"):this.isRetryableError(f)?(y=i.H.MaySucceedOnRetry,S="Retryable fetch error"):"Auth private api is not allowed when MAM enabled."===S&&(y=i.H.AuthPrivateNotSupportedForMAM),{resource:e,error:{message:S,status:y,internalError:f},callerId:s.callerId,performance:{startTime:u,endTime:p}}}isRetryableError(e){if(null==e||!e.platform_error_code)return!1;const t=(e.platform_error_code>>>0).toString(16).toUpperCase();return void 0!==["CAA3","CAA7","CAA8","CAAD"].find((e=>t.startsWith(e)))||!!["CAA20005","CAA20008","CAA10001"].includes(t)}}},63011:function(e,t,n){"use strict";n.d(t,{BV:function(){return a},Kf:function(){return s},U:function(){return r}});var i=n(34004);class r{constructor(e,t,n=(()=>{})){if(this.authDataFetchStrategy=e,this.authDataCacheStrategy=t,this.logAuthEvent=n,!e)throw new Error("Fetch Strategy is not provided in ModularAuthManager");if(!t)throw new Error("Cache Strategy is not provided in ModularAuthManager")}async getAuthData(e,t=!1){const n=await this.authDataCacheStrategy.getAuthDataFromCache(e),{authToken:i,...r}=n||{};if(this.logAuthEvent(r,t),null!=n&&n.authToken)return n;const o=await this.authDataFetchStrategy.fetchAuthData(e,t),{authToken:a,...s}=o||{};return this.logAuthEvent(s,t),null!=o&&o.error||this.authDataCacheStrategy.setAuthDataToCache(e,o).then((e=>{this.logAuthEvent(e,t)})),o}}let o={getAuthData:async e=>({resource:e,error:{message:"Auth manager is not initialized",status:i.H.OtherError}})};function a(e){o=e}function s(){return o}},95508:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});var i=n(21789),r=n(29989),o=n(83102);class a{constructor(e){if(this.authCallerGetter=e,!e)throw new Error("Auth Caller Getter is not provided in AadEdgeChromiumAuthCallerValidator")}async validateAuthCaller(){const{authCallerGetter:e}=this,{account:t,client:n}=await e()||{};return t?t.account_type===o.Qm.UNSUPPORTED_SOVEREIGNTY?{callerId:t.tenant_id,error:{message:"Edge unsupported sovereignty",status:r.$.UnsupportedSovereignty}}:t.account_type!==o.Qm.AAD?{callerId:t.tenant_id,error:{message:"Not valid AAD account.",status:r.$.OtherValidationError}}:null!=n&&n.id?(0,i.Yq)().IsChinaCompliance?{callerId:t.tenant_id,error:{message:"CN domain unsupported",status:r.$.CnDomain}}:{client:n,account:t,callerId:t.tenant_id}:{callerId:t.tenant_id,error:{message:"Client Id not provided.",status:r.$.OtherValidationError}}:{error:{message:"Account info not available",status:r.$.AccountInfoUnavailable}}}}},29989:function(e,t,n){"use strict";var i;n.d(t,{$:function(){return i}}),function(e){e.AccountInfoUnavailable="accountInfoUnavailable",e.UnsupportedSovereignty="unsupportedSovereignty",e.CnDomain="cnDomainUnsupported",e.OtherValidationError="otherValidationError"}(i||(i={}))},18860:function(e,t,n){"use strict";n.d(t,{P:function(){return p}});const i=/(?:Primary Error:\s)(\w+)/,r=/(?:Secondary Error:\s)(\w+)/,o=/(?:hex:)(\w+)/,a=/(?:Error code:\s)(\w+)/,s=/(?:error message:)(AADSTS\w+)/,c=/(?:Trace ID:\s)([0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12})/,d=/(?:Correlation ID:\s)([0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12})/,l=/(?:Timestamp:\s)([0-9]{4}-[0-9]{2}-[0-9]{2}\s[0-9]{2}:[0-9]{2}:[0-9]{2}Z)/,u=/([\w.-]+)@([\w-]+)((\.(\w){2,3})+)/g;function p(e,t){const n={};try{if(n.requestedResource=null==t?void 0:t.id,e&&e.internalError){const t=e.internalError;if(n.platformCode=t.platform_error_code||void 0,t.error_string){var p,h,g,m,f,v,y,S;const e=t.error_string.replace(u,"");n.primaryError=(null===(p=e.match(i))||void 0===p?void 0:p[1])||"",n.secondaryError=(null===(h=e.match(r))||void 0===h?void 0:h[1])||"",n.aadErrorCode=(null===(g=e.match(s))||void 0===g?void 0:g[1])||"",n.errorCode=(null===(m=e.match(a))||void 0===m?void 0:m[1])||"",n.hexCode=(null===(f=e.match(o))||void 0===f?void 0:f[1])||"",n.traceId=(null===(v=e.match(c))||void 0===v?void 0:v[1])||"",n.correlationId=(null===(y=e.match(d))||void 0===y?void 0:y[1])||"",n.timestamp=(null===(S=e.match(l))||void 0===S?void 0:S[1])||""}}}catch(e){return n}return n}},65902:function(e,t,n){"use strict";n.d(t,{oc:function(){return d}});var i=n(7476),r=n(10754),o=n(23549),a=n(29989),s=n(34004),c=n(18860);const d=(e,t)=>{((e,t)=>{var n,r;if(!e||!o.M0)return;let d;if(!e.error)return;switch(e.error.status){case s.H.InteractionRequired:case a.$.CnDomain:case a.$.UnsupportedSovereignty:case a.$.AccountInfoUnavailable:d=i.N1G;break;case a.$.OtherValidationError:case s.H.OtherError:d=i.etM;break;case s.H.AuthPrivateNotSupportedForMAM:default:return}const l={...(0,c.P)(e.error,e.resource),authPrivateApi:t?"acquireAccessTokenWithUserInteraction":"acquireAccessTokenSilently",resource:null===(n=e.resource)||void 0===n?void 0:n.friendlyName},u={id:e.callerId||"",status:!1,name:(null===(r=e.resource)||void 0===r?void 0:r.friendlyName)||"",info:{...d,message:e.error.message,pb:{...d.pb,customMessage:JSON.stringify(l)}}};o.M0.sendAuthEvent(u)})(e,t),((e,t)=>{var n;if(!e||!o.M0)return;if(!e.error)return;let r;switch(e.error.status){case s.H.InteractionRequired:case a.$.AccountInfoUnavailable:r=i.N1G;break;case a.$.OtherValidationError:case s.H.OtherError:r=i.etM;break;default:return}const d={...(0,c.P)(e.error,e.resource),authPrivateApi:t?"acquireAccessTokenWithUserInteraction":"acquireAccessTokenSilently",resource:null===(n=e.resource)||void 0===n?void 0:n.friendlyName};o.M0.sendAppErrorEvent({...r,message:e.error.message,pb:{...r.pb,customMessage:JSON.stringify(d)}})})(e,t),(e=>{var t,n;if(!e)return;const i=`Auth.AcquireAccessToken.${e.callerId}`,o=`${i}.Start`,a=`${i}.End`,{startTime:s,endTime:c}=e.performance||{},d=(0,r.Ou)();d&&(d[o]=(null===(t=e.performance)||void 0===t?void 0:t.startTime)||-1,d[a]=(null===(n=e.performance)||void 0===n?void 0:n.endTime)||-1,d[i]=c&&s?c-s:-1)})(e)}},35281:function(e,t,n){"use strict";n.d(t,{AN:function(){return a},VQ:function(){return s},bk:function(){return c},rZ:function(){return o}});var i=n(65774),r=n(21789);const o="stn",a="aad";function s(){return(0,i.m)().useEnterpriseCompliance()}async function c(){return(0,r.Yq)().AccountInfoPromise.then((e=>e&&e.tenant_id?e.oid?`Oid:${e.oid}@${e.tenant_id}`:`TID:${e.tenant_id}`:""))}},69438:function(e,t,n){"use strict";n.d(t,{$q:function(){return c},GL:function(){return d},I0:function(){return i},VT:function(){return o},X_:function(){return r},Yc:function(){return s},gQ:function(){return l},m2:function(){return a}});const i="at-bing",r="at-bing-dt",o="sign-in-active",a="initial-page-nav",s="sign-in-pending",c="sign-in-refreshed-page",d="authconstants-peregrine",l="sign-in-refresh-session"},15606:function(e,t,n){"use strict";n.d(t,{Yb:function(){return a},Z6:function(){return o},w0:function(){return s}});var i=n(42933),r=n(36926);const o=(0,n(76187).p)((()=>(0,i.oA)("auth","auth"))),a=e=>(0,r.FF)(`Auth.${e}`,{logStart:!0,logDuration:!0,firstTimeOnly:!0}),s=(e,t)=>(0,r.hf)(`Auth.${e}`,t,!0)},31479:function(e,t,n){"use strict";n.d(t,{ID:function(){return y},Z5:function(){return v}});var i=n(76733),r=n(21930),o=n(88826),a=n(7476),s=n(21789),c=n(65505),d=n(10788),l=n(23357),u=n(83102),p=n(19464),h=n(91668),g=n(52681),m=n(34479),f=n(24195);function v(e){s.jG.AuthCookieName=function(e){let t=s.jG.AuthCookieName;if(e)t=e.isAAD?"al_app_anon":"app_anon";else if((0,c.TJ)()){t=(0,d.XS)().accountType===u.Qm.AAD?"al_app_anon":"app_anon"}else t=(0,c.P8)()&&(0,h.xQ)()===u.Qm.AAD?"al_anon":"anon";return t}(e),(0,g.jW)(s.jG.AuthCookieName),(0,c.TJ)()&&(0,d.XS)().accountType===u.Qm.AAD&&y()}async function y(e,t=!0){if(!(0,c._K)())return void i.k.log("Auth: WorkId work flow is not enabled in this environment");let n;return!(0,p.ej)(l.og)||!t?Promise.race([(0,r.b1)(),(0,m.Kb)(1e4).then((()=>n=!0))]).then((async t=>{n&&(0,o.H)(a.nrW,"Work Id call was made before TTVR marker was set");return await(0,f.qs)(e)})):void 0}},11915:function(e,t,n){"use strict";n.d(t,{Gy:function(){return A},aH:function(){return C},cu:function(){return y},ks:function(){return S}});var i=n(46986),r=n(88826),o=n(7476),a=n(23357),s=n(34832),c=n(21789),d=n(10788),l=n(7183),u=n(54297),p=n(19464),h=n(69438),g=n(23549),m=n(85485),f=n(49155);function v(){T(),k(),b(h.gQ)}function y(e=null){const t=decodeURIComponent((0,p.ej)("aace")),n=(0,p.ej)(a.nM),{child:r}=t&&(0,s.d)(t)||{};if(("edgeChromium"!=c.jG.AppType||!t||0!=r)&&t&&(1===r||n)){const t=c.jG.CurrentRequestTargetScope;t&&t.audienceMode!==i.F.Kids&&(e&&e(),(0,f.Z)())}}async function S(e,t=null,n=!1){const i=(0,p.ej)(a.m$),r=!!(0,p.ej)(d.g8);if(n){if(i)return w(),void await E(t,!1,!0);await E(t,r,!1)}else if(e){if(r||(0,p.sq)(d.g8,e,1,c.jG.HostPage.topDomain,"/",!0),!i)return void await E(t,!0,!1);v()}else{if(w(),i)return void await E(t,!1,!0);v()}}function C(){if((0,l.G)().getItem(h.Yc))return T(),void P();I()?x(h.$q):P(),x(h.Yc)}function w(){const e=c.jG.HostPage.topDomain;(0,p.sq)(d.g8,"",-1,e,"/",!0),(0,u.$o)().removeItem(h.I0)}function b(e){(0,l.G)().removeItem(e)}function T(){b(h.VT)}function k(){b(h.Yc)}function P(){b(h.$q)}function A(){const e=parseInt((0,l.G)().getItem(h.m2));return b(h.m2),Number.isInteger(e)?e:0}function I(){return!!(0,l.G)().getItem(h.VT)}async function E(e,t,n){if(t!==n&&await(0,m.FI)(),I())return(0,r.H)(o.amS,`Auth refresh blocked. TokenExists: ${t}, CookieExists: ${n}.`,void 0,{shouldSampleErrorsForTreatement1:!0}),void v();(0,l.G)().supported?(k(),M(),function(){const e=Date.now()-Math.round(window.performance.now());x(h.m2,e.toString())}(),g.M0.sendAppErrorEvent({...o.G0e,message:`Sign In Refresh Required. TokenExists: ${t}, CookieExists: ${n}.`}),e&&e(),x(h.gQ),(0,f.Z)()):v()}function M(){x(h.VT)}function x(e,t="1"){(0,l.G)().setItem(e,t)}},91668:function(e,t,n){"use strict";n.d(t,{KW:function(){return y},xQ:function(){return P},YX:function(){return b},XJ:function(){return C},hC:function(){return S},rr:function(){return w}});var i=n(83102),r=n(65774),o=n(65505),a=n(13334),s=n(10788),c=n(96694),d=n(90158),l=n(47647);var u=n(15606),p=n(55524),h=n(42429);const g="__SignInStateIsValid__",m="__SignInStatePromiseResolver__",f=()=>{p.Gq.set(g,new Promise((e=>{p.Gq.set(m,e)})))};f();const v=()=>p.Gq.get(g);function y(){const e=p.Gq.get(m);e&&e()}function S(){return(0,r.m)().getSignInState()===i.Hy.SignedIn}function C(){return T("getUserSignInState",(0,o.hk)())}function w(){return T("waitForSignInState",!0)}async function b(e=!0){const t={signedInStatus:i.Hy.NotSignedIn,accountType:null};if((0,d.wq)()&&e){await async function(){let e=0;return new Promise(((t,n)=>{if((0,l.Vx)())t();else{const i=setInterval((async function(){(0,l.Vx)()?(clearInterval(i),t()):e>30?(clearInterval(i),n()):e++}),50)}}))}();const e=(0,l._4)();e&&(t.signedInStatus=e.isSignedIn?i.Hy.SignedIn:i.Hy.NotSignedIn,t.accountType=k(e.accountType))}else if((0,c.ID)()){const e=await(0,c.yb)();t.accountType=k(e.accountType),t.signedInStatus=e.tokenValue?i.Hy.SignedIn:i.Hy.NotSignedIn}else t.signedInStatus=await w(),t.accountType=P();return t}async function T(e,t){const n=(0,a.nP)().UserIsSignedIn;if(null!=n)return n?i.Hy.SignedIn:i.Hy.NotSignedIn;const o=(0,u.Z6)(),s=o&&o.startMeasure(e).endMeasure;let c;t&&(c=(0,u.Yb)("GetSignInStateAsync"),(0,r.m)().initOverrides(),await v());const d=(0,r.m)().getSignInState();return s&&s(),c&&c(),d}function k(e=null){return"MSA"===e?i.Qm.MSA:"AAD"===e?i.Qm.AAD:void 0}function P(){if((0,o.TJ)()){const e=(0,s.XS)();return e.isSignedIn===i.Hy.SignedIn&&e.accountType}if((0,o.P8)())return(0,h.bW)()}},82514:function(e,t,n){"use strict";n.d(t,{M:function(){return v}});var i=n(23549),r=n(83102),o=n(65505),a=n(10788),s=n(88749),c=n(76716),d=n(6914),l=n(18562),u=n(96694),p=n(91668),h=n(54557),g=n(23357),m=n(21789),f=n(23979);async function v(e){let t,n,v;if(e)t=e.isMsa,n=e.isAAD,v=e.isSSO;else if((0,o.TJ)()){const e=(0,a.XS)();v=e.isSignedIn===r.Hy.SignedIn,v&&(t=e.accountType===r.Qm.MSA,n=e.accountType===r.Qm.AAD)}else if((0,o.P8)()){const e=(0,p.xQ)();t=e===r.Qm.MSA,n=e===r.Qm.AAD,v=!(0,s.YU)()}else if((0,u.ID)()){t=!!(await(0,u.yb)()).tokenValue}else t=await(0,p.XJ)()===r.Hy.SignedIn;const y={aadState:n?1:0,isSignedIn:t,isSso:v},S=function(e,t){let n;const i=(0,c.E)()===c.M.Web?"anon":"app_anon";let r=!1;t&&(r=(0,d.u6)(i));n=r?"AAD-AL":t?"AAD":e?"MSA":"NA";return n}(t,n),C={...y,loginState:S};return function(){if((0,l.Nv)("auth-cookies-dbg")){const e=function(){const e={aace:+!!(0,h.AE)(g.m$),app_anon:+!!(0,h.AE)(g.Ji),ace:+!!(0,h.AE)(g.Li),anon:+!!(0,h.AE)("ANON"),authCookieName:m.jG.AuthCookieName,lt:+!!(0,h.AE)(a.g8),osat:+!!(0,h.AE)(g.Cw)};if((0,o.kD)()){var t,n;const i={elt_account:null===(t=(0,f.Rn)())||void 0===t?void 0:t.account_type,elt_token:+!(null===(n=(0,f.Rn)())||void 0===n||!n.access_token)};Object.assign(e,i)}return JSON.stringify(e)}();null===i.M0||void 0===i.M0||i.M0.addOrUpdateCustomProperty("AuthCookies",e)}}(),Promise.resolve(C)}},85485:function(e,t,n){"use strict";n.d(t,{B0:function(){return b},B9:function(){return T},FA:function(){return S},FI:function(){return C}});var i=n(83102),r=n(71778),o=n(65505),a=n(21789),s=n(23357),c=n(10788),d=n(65774),l=n(23979),u=n(6914),p=n(91668),h=n(42429),g=n(23549),m=n(69438),f=n(19464),v=n(13578),y=n(15606);async function S(e,t,n,i){const a=(0,y.Z6)(),s=a&&a.startMeasure("updateAuthState").endMeasure;try{if(n||!r.yb&&!r.R0)await C(i),await w(t);else if((0,o.P8)())await(0,h.GQ)(),await w(t,!1);else{const e=await(0,r.ot)({id:"appanoncookie"}),n=e&&e.payload&&e.payload.appAnonCookieExists;await w(t,n)}}catch(t){await w(),e(t)}s&&s()}async function C(e,t){(0,o.P8)()?await(0,h.GQ)():function(){if((0,o.TJ)()){const e=(0,c.XS)(),t=!!(0,f.ej)("aace");if((0,l.vs)()){if(e.accountType===i.Qm.MSA)return!t;if(e.accountType===i.Qm.AAD)return(0,u.u6)()&&!(0,o._K)()}}else if((0,o.Pz)())return!0}()&&await function(e,t){const n=new URL(`https://api.msn.${a.jG.IsChinaCompliance?"cn":"com"}/auth/cookie/appanon`),i={credentials:"include"};return e&&(i.headers=e),n.searchParams.set("apikey",a.jG.OneServiceApiKey),n.searchParams.set("ocid",t||m.GL),n.searchParams.set("activityId",a.jG.ActivityId),n.searchParams.set("scn","app_anon"),fetch(n.href,i)}(e,t)}async function w(e,t){let n=!1;const a=(0,y.Z6)(),l=a&&a.startMeasure("handleSignInStateUpdateAsync").endMeasure;if((0,o.P8)()){const{accessToken:e}=((0,o.hk)()?await(0,h.IY)():(0,o.aS)())||{},t=(0,o.me)(e);(0,v.Z)(t)||(n=!0,(0,r.mS)({id:"AuthHeaders",type:"command",payload:t}))}else if(n=null!=(0,f.ej)(s.m$),(0,o.TJ)()){(0,c.KO)();n=(0,c.XS)().isSignedIn===i.Hy.SignedIn}const u=n?i.Hy.SignedIn:i.Hy.NotSignedIn;!1===t&&u===i.Hy.SignedIn&&((0,r.mS)({id:"updatemyfeed"}),(0,r.mS)({id:"updatepdp"}),(0,r.mS)({id:"UpdateMyBriefing"})),(0,d.m)().setSignInState(u),(0,p.KW)(),void 0!==e&&e!==u&&g.M0.addOrUpdateTmplProperty("signInUpdate","1"),l&&l()}function b(){return(0,p.hC)()&&(!(0,o.P8)()||(0,p.xQ)()===i.Qm.MSA)}function T(){return(0,p.xQ)()===i.Qm.AAD}},96694:function(e,t,n){"use strict";n.d(t,{ID:function(){return s},Vo:function(){return d},yb:function(){return c}});var i=n(31558),r=n(21789),o=n(76187),a=n(34479);function s(){return r.jG.WidgetAttributes&&"shopping"==r.jG.AppType}const c=(0,o.p)((async()=>{let e;const t=(0,i.N)()&&window.__pw_options,n=t&&t.auth&&t.auth.serviceToken;if("object"==typeof n&&n.then){const t=3e3;e=await Promise.race([n,(0,a.Kb)(t).then((()=>null))])}return e||{tokenValue:void 0,accountType:void 0}}));function d(){c.cache.clear()}},25745:function(e,t,n){"use strict";n.d(t,{B:function(){return f}});var i=n(7476),r=n(88826),o=n(59489),a=n(19464),s=n(54297),c=n(13334),d=n(10788),l=n(69438),u=n(11915),p=n(23549),h=n(31558);const g="f3222e55-ab35-49de-81f3-88a3be08cf77",m="service::www.msn.com::mbi_ssl";async function f(e,t,n=!1){const f=window.chrome,y=f&&f.authPrivate,S=e&&e.accountType===o.l.MSA;if(!y||!S)return await(0,u.ks)(null,null,n),void(0,s.$o)().removeItem(l.I0);(0,h.N)()&&c.Al.IsPrerender&&"visible"!==document.visibilityState||(0,u.aH)();let C,w,{result:b,appError:T}=await async function(){const e=(0,a.ej)(d.g8);if(!e)return{result:!1,appError:{message:"MSA user, lt cookie not present.",pb:{...i.npG.pb,isPrerender:c.Al.IsPrerender,msnCookiePresent:e}}};return await(0,u.ks)(e),{result:!0}}(),{result:k,appError:P}=function(){var e,t;const n=null===(e=(0,s.$o)())||void 0===e?void 0:e.getItem(l.I0),r=null===(t=(0,s.$o)())||void 0===t?void 0:t.getItem(l.X_);if(n&&r){const e=Number(r);if(e){const t=36e5,n=(new Date).getTime()-new Date(e).getTime();return{result:Math.ceil(n/t)<12}}}return{result:!1,appError:{message:"MSA user, Bing token not found.",pb:{...i.npG.pb,isPrerender:c.Al.IsPrerender,bingTokenFound:null!=n}}}}();if(!b){var A,I;const o={account_id:e.accountId,account_type:e.accountType,client_id:t||g,scope_or_resource:m};if(C=await v(o),C&&!C.is_success&&C.error_info&&0==C.error_info.primary_error&&0==C.error_info.platform_error_code&&""!=C.error_string&&(0,a.ej)(d.g8))return E=C.error_string,void(0,r.H)(i.u8h,"Access token fetch failed. Used LT cookie",void 0,{...i.u8h.pb,errorMessage:E,isPrerender:c.Al.IsPrerender});b=(null===(A=C)||void 0===A?void 0:A.is_success)&&(null===(I=C)||void 0===I?void 0:I.is_token_valid),await async function(e,t=!1){await(0,u.ks)(e&&e.is_success&&e.is_token_valid&&e.access_token,null,t)}(C,n)}var E,M;if(!k){var x,L;const n={account_id:e.accountId,account_type:e.accountType,client_id:t||g,scope_or_resource:"service::bing.com::MBI_SSL"};w=await v(n),k=(null===(x=w)||void 0===x?void 0:x.is_success)&&(null===(L=w)||void 0===L?void 0:L.is_token_valid),(M=w)&&M.is_success&&M.is_token_valid&&M.access_token&&((0,s.$o)().setItem(l.I0,M.access_token),(0,s.$o)().setItem(l.X_,(new Date).getTime().toString()),(0,a.sq)(l.I0,"",-1,"msn.com","/",!0))}k&&b||function(e,t,n){p.M0.sendAppErrorEvent({...i.npG,message:"Failed to acquire MSA access token(s).",pb:{...i.npG.pb,msn:e&&e.is_success?void 0:e&&e.error_info,bing:t&&t.is_success?void 0:t&&t.error_info,innerErrors:n,shouldSampleErrorsForTreatement1:!0}})}(C,w,[T,P])}async function v(e){const t=await function(e){return new Promise((t=>{window.chrome.authPrivate.acquireAccessTokenSilently(e,(e=>{t(e)}))}))}(e);return t}},35620:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var i=n(56687),r=n(76187),o=n(54557),a=n(89912),s=n(23549),c=n(45106),d=n(21937);const l=(0,r.p)((()=>(0,d.vp)((0,o.AE)("MUID"),100)<2));function u(e,t,n=null){s.M0.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:(0,i.n)(n),authRecordTrail:l()&&(0,c.xI)()||void 0,tokenCacheState:(0,a.wX)()}})}},21937:function(e,t,n){"use strict";n.d(t,{sm:function(){return b},lx:function(){return f},LT:function(){return y},Df:function(){return S},sA:function(){return C},nt:function(){return w},vp:function(){return T},nq:function(){return m},RH:function(){return v}});var i=n(4619),r=n(21789),o=n(65505),a=n(54557),s=n(34832);const c=()=>{const e=(0,a.AE)("lh",!0),t=e&&(0,s.d)(e),{login_hint:n}=t||{};return n&&t};var d=n(23357),l=n(7394),u=n(83102),p=n(13583),h=n(76610),g=n(19464);function m(e){const t=encodeURIComponent(JSON.stringify(e||{}));(0,g.sq)(i.sM,t,i.ac,r.jG.HostPage.topDomain,"/",!1,p.f.Strict),(0,o.yd)()}function f(e){if(e)return function(e){return e&&e.tenantId===l.bc}(e)?u.Qm.MSA:u.Qm.AAD}async function v(e){let t;if(e){t=(await y()).find((t=>t.username===e))}else{const e=C();if(e){t=(await y()).find((t=>S(t)===e))}}return t}async function y(){const e=await(0,h.Yu)();return await e.handleRedirectPromise(),e.getAllAccounts()}function S(e){return e&&e.idTokenClaims&&e.idTokenClaims[l.an]}function C(){const e=(0,i.x6)();return e&&e.login_hint}function w(){const e=c();return e&&e.login_hint}function b(){(0,g.sq)(d.cs,null,-1,r.jG.HostPage.topDomain,"/")}function T(e,t=1e3){let n=0;for(let t=0,i=e&&e.length;t<i;t++){n=(n<<5)-n+e.charCodeAt(t),n&=n}return n<0&&(n+=2147483647),n%t}},45106:function(e,t,n){"use strict";n.d(t,{Ov:function(){return T},pD:function(){return P},xI:function(){return k}});var i=n(7394),r=n(83102),o=n(54297),a=n(76187),s=n(34832),c=n(13334),d=n(4619),l=n(54557),u=n(65774),p=n(23357),h=n(88749),g=n(55377),m=n(30323),f=n(16614),v=n(62515),y=n(21937),S=n(76610),C=n(76733);let w;const b=(0,o.$o)();async function T(e,t){const n={time:(new Date).toISOString(),action:e.toString(),result:t,state:await I()};C.k.log(`dual-auth: authRecord entry - ${e}: ${t}`),function(e){if(!e)return void C.k.logError("dual-auth: authRecord is null or undefined");w||(w=A());w.push(e),P.cache.clear();const t=w.slice(-i.tk);b.setItem(i.tU,JSON.stringify(t))}(n)}function k(){return function(){if(w)return w;return w=A(),w}().slice(-i.tk)}const P=(0,a.p)((()=>(w||(w=A()),function(e){const t=";";let n={};if(!e)return n;return n={a:"",r:"",s:[],t:[]},e.forEach(((i,r)=>{n.a+=i.action+t,n.r+=function(e){if(!e)return null;if(e.match(/\bsuccess\b/i))return"S";if(e.match(/\bfailure\b/i))return"F";{let t=e.match(/tryInitiateEarlyAuth: Finalized sign in state (\w+) from auth-(\w+)/);return t?`EarlyAuth: ${t[1]} from ${t[2]}`:(t=e.match(/initiateSSOCore: (\w+) - SSO data from the (\w+) auth flow[^]*/),t?`SSO: ${t[1]} from ${t[2]}`:e.toString())}}(i.result)+t,n.s.push(function(e,t){if(!e)return{};if(e===t)return e;const n=(0,g.Z)((0,m.Z)(e),(0,m.Z)(t),f.Z);return(0,v.Z)(n)}(i.state,r>0?e[r-1].state:i.state)),n.t.push(function(e,t){if(!e)return;if(e===t)return e;const n=new Date(e),i=n&&n.getTime(),r=t&&new Date(t),o=r&&r.getTime();if(i&&o)return(i-o).toString()}(i.time,r>0?e[r-1].time:i.time))})),n}(w))));function A(){if(!b.supported)return void C.k.log("dual-auth: Local storage access is not supported");const e=b.getItem(i.tU);return(0,s.d)(e)||[]}async function I(){var e;const t=c.Al.ClientSettings,n=(0,S.dn)(),i=n&&(0,y.lx)(await(0,y.RH)())||(null===(e=(0,d.x6)())||void 0===e?void 0:e.account_type)||void 0,o=(0,l.AE)(d.sM),{login_hint:a}=o&&(0,s.d)(o)||{},g=a&&0!==Object.keys(a).length;return{isSignedIn:(0,u.m)().getSignInState()===r.Hy.SignedIn,accountType:i,signedInAccounts:n?await E():void 0,storage:{aace:(0,l.AE)(p.m$),ace:(0,l.AE)(p.Li),als:(0,l.AE)(p.tX,!0),child:(0,l.AE)(p.nM),currentAccount:g,loginFlowMarker:(0,h.YU)(),logoutFlowMarker:(0,h.SY)(),editFlowMarker:(0,h.hU)(),osate:(0,l.AE)(p.cs)},appType:t&&t.apptype,pageType:t&&t.pagetype}}async function E(){if(!await(0,S.Yu)())return[-1];return(await(0,y.LT)()).map((e=>(0,y.vp)(e.username)))}},7394:function(e,t,n){"use strict";n.d(t,{BS:function(){return c},Ic:function(){return r},QL:function(){return o},an:function(){return i},bc:function(){return u},g4:function(){return p},kQ:function(){return d},tU:function(){return a},tk:function(){return s},w6:function(){return l}});const i="login_hint",r=300,o=3600,a="authRecordTrail",s=10,c="InteractionRequiredAuthError",d="BrowserAuthError",l="no_tokens_found",u="9188040d-6c67-4c5b-b112-36a304b66dad";var p,h;!function(e){e.tryAcquire1STokenLite="ATL",e.acquireTokenSilent="ATS",e.tryAcquire1STokenProfileSwitch="ATP",e.clearAccountLinkingCookies="CAL",e.jwtSSOService="JWT",e.interactiveLogin="ILO",e.loginRedirect="LRD",e.loginPopup="LPP",e.logout="LGT",e.ssoSilent="SSL",e.singleSignOn="SSO",e.waitFor1SToken="W1S"}(p||(p={})),function(e){e[e.NotAttempted=0]="NotAttempted",e[e.Fail=1]="Fail",e[e.FailTrySSO=2]="FailTrySSO",e[e.Success=3]="Success"}(h||(h={}))},76610:function(e,t,n){"use strict";n.d(t,{Bj:function(){return R},Oo:function(){return F},Yu:function(){return D},dn:function(){return x},qW:function(){return L}});var i=n(7394),r=n(76733),o=n(10754),a=n(21930),s=n(88826),c=n(7476),d=n(56687),l=n(45870),u=n(34479),p=n(92095),h=n(54297),g=n(21789),m=n(13334),f=n(65505),v=n(78672),y=n(31558),S=n(9791),C=n(11935),w=n(15606);const b="2.18.0",T="2.24.0",k="1p-2.24.0",P="2.16";let A,I,E,M;function x(){return I}function L(e=!1){const t={scopes:["User.Read"],loginHint:"",redirectUri:O(e)};return e||Object.assign(t,{...N(),extraQueryParameters:{edge_suppress_profile_switch:"1"}}),t}function R(e){return{scopes:e,forceRefresh:!1,redirectUri:O(!0)}}A="localhost.msn.com"===(0,v.Td)(),M=(0,v.zw)().toLowerCase().endsWith(".cn"),E=((0,v.zp)().match(/\bpr=([\d]+)\b/)||{})[1];const D=(0,S.Z)((async e=>{await async function(){if(!(0,y.N)())return;let e;(0,f.lT)()&&(await Promise.race([B.getResultAsync(),(0,a.b1)(),(0,u.Kb)(1e4).then((()=>e=!0))]),e&&(0,s.H)(c.gZU,"Loading MSAL before TTVR in delay load"));const t=(0,w.Z6)(),n=t&&t.startMeasure("loadMsalScript").endMeasure;let i;const r=new Promise((e=>{i=e})),o=e=>{n&&n({customSuffix:e}),i()},l=$(`auth/msal-browser-${_()}.min.js`),p=(0,v.b0)(l);return p.onload=()=>o(),p.onerror=e=>{(0,s.H)(c.ydI,"Error in loading MSAL script",(0,d.n)(e)),o("error")},document.head.appendChild(p),await r}();const t=window.msal;I=!!t,t&&!U()&&function(e){const t=(0,h.$o)();t.keys().forEach((e=>{const n=e.match(/-[-]+/),i=n&&n[0].length;i>=2&&(2===i&&e.includes("accesstoken")||3===i&&e.includes("idtoken")||4===i&&e.includes("refreshtoken"))&&t.removeItem(e)}))}();const n=H()?{performanceTelemetryConfiguration:{samplingPrecentage:1}}:void 0;if(t&&t.PublicClientApplication){const a=new t.PublicClientApplication(function(e){const{tenantScope:t="Dual",tenantId:n}=e||{};let o;return o=n||("MSA"===t?"consumers":"AAD"===t?"organizations":"common"),{auth:{clientId:p.I4,authority:`https://login.microsoftonline.com/${o}`,redirectUri:O(),navigateToLoginRequestUrl:!0},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:(e,t,n)=>{if(!n)switch(e){case"Error":return void r.k.logError("dual-auth: "+t.toString());case"Info":case"Verbose":case"Warning":return void r.k.log("dual-auth: "+t.toString())}}},tokenRenewalOffsetSeconds:i.Ic}}}(e),n);return function(e){if(!U()||!m.Al.CurrentFlightSet.has("prg-msal224-ts")&&!g.jG.IsDebug)return;let t=1;const n=(0,o.Ou)(),i=(e,i)=>n[`MSAL.${t}.${e}`]=i,r=e=>Math.round(10*e)/10;e.addPerformanceCallback((e=>{e.forEach((e=>{const n=e.name;i(`${n}-start`,r(e.startTimeMs-performance.timeOrigin)),i(n,r(e.durationMs)),i("meta",`c:${e.fromCache?1:0}-v:${e.startPageVisibility}-ok:${e.success?1:0}`),i("cv",e.correlationId);const o="DurationMs";(0,C.Z)(e,((e,t)=>{if(t.endsWith(o)){const n=t.substring(0,t.length-o.length);i(`fn.${n}`,e)}})),t++}))}))}(a),a}}));function F(){B.set()}function O(e){return $(e?"auth/auth-redirect-blank.html":"0/auth/auth-redirect.html","https://"+(!!(0,v.Td)().match(/\.msn\.(com|cn)$/i)?(0,v.zw)():"www.msn."+(M?"cn":"com")),!1)}const B=new l.o;function N(){const e={appType:g.jG.AppType,authRedirJsVer:P,buildVersion:g.jG.BuildVersion,debug:g.jG.IsDebug?1:void 0,msalJsVer:_(),pr:E,returnUrl:(0,v.l4)()};return{state:encodeURIComponent(JSON.stringify(e))}}function _(){return H()?k:W()?T:b}function U(){return W()||H()}function W(){return m.Al.CurrentFlightSet.has("prg-msal224-b")}function H(){return m.Al.CurrentFlightSet.has("prg-msal224-1p")}function $(e,t="https://assets.msn."+(M?"cn":"com"),n=!0){let i="/latest",r=t;E&&n?i=`/pr-${E}`:A&&(i="",r=`https://${(0,v.zw)()}`);return`${r}/staticsb/statics${i}/${e}`}},42429:function(e,t,n){"use strict";n.d(t,{tE:function(){return Q},bW:function(){return K},x4:function(){return J},GQ:function(){return $},vW:function(){return G},IY:function(){return j}});var i,r=n(7394),o=n(42933),a=n(76733),s=n(56687),c=n(7476),d=n(45870),l=n(34479),u=n(76187),p=n(88749),h=n(23979),g=n(4619),m=n(65505),f=n(89912),v=n(21937),y=n(76610),S=n(15606),C=n(21789),w=n(23357),b=n(45106),T=n(69438),k=n(19464),P=n(35620);async function A(e,t){const n=t&&t.accessToken,i="Acquire"===e;if(!n&&i){const e="Invalid access token in jwtSSOCore";return(0,b.Ov)(r.g4.jwtSSOService,e),void(0,P.h)(c.fvr,e)}let o,a;try{o=await fetch(`https://api.msn.${C.jG.IsChinaCompliance?"cn":"com"}/auth/token/v2/jwtsso?apikey=${C.jG.OneServiceApiKey}&ocid=${T.GL}&activityId=${C.jG.ActivityId}`,{method:i?"POST":"DELETE",credentials:"include",body:JSON.stringify({userAccessToken:n})||void 0,headers:(0,m.me)(n)||void 0});i!==!!(0,k.ej)(w.cs)&&(a=new Error(`${i?"Expected":"Unexpected"} cookie ${w.cs} is ${i?"missing":"still present"} after ${e} JwtSSO call`))}catch(e){a=e}const s=!a&&o&&o.ok?null:`Error in ${e} mode in jwtSSO call. ${a||""}`;s&&(0,P.h)(c.fvr,s),(0,b.Ov)(r.g4.jwtSSOService,`${s||"Success"}`)}!function(e){e.Acquire="Acquire",e.Delete="Delete"}(i||(i={}));var I=n(24195),E=n(83102),M=n(31558),x=n(9791),L=n(76716),R=n(6914);const D=`apikey=${C.jG.OneServiceApiKey}&ocid=Peregrine&it=${(0,L.E)()}&activityId=${C.jG.ActivityId}`;function F(){return(0,o.fW)((()=>async function(){let e,t;try{e=await fetch(`https://api.msn.${C.jG.IsChinaCompliance?"cn":"com"}/auth/cookie/clearALCookies?${D}`,{method:"DELETE",credentials:"include"}),(0,R.EX)();if((0,R.u6)()){const e=decodeURIComponent((0,k.ej)(w.tX));t=new Error(`Account linking cookie ${e} indicates account is still linked after clearALCookies call`)}}catch(e){t=e}const n=!t&&e&&e.ok&&200===e.status?null:`Error in clearALCookies call. ${t||""}`;n&&(0,P.h)(c.L8S,n),(0,b.Ov)(r.g4.clearAccountLinkingCookies,`${n||"Success"}`)}()),"tryDelete1SAcctLnkCookies",(0,S.Z6)())}const O=7e3,B=7e3;let N,_=!1;const U={acquireTokenStatus:0,accessTokenResult1S:null,currentAccountInfo:null};let W=new d.o;const H=(0,u.p)((async()=>{const e=N||await(0,y.Yu)(),t=await(0,o.fW)((()=>null==e?void 0:e.handleRedirectPromise()),"handleRedirect",(0,S.Z6)());if(t)return a.k.log("dual-auth: Signing in through interactive login loginResponse: "+JSON.stringify(t,null,4)),G(t).finally((()=>{(0,p.dy)()})),(0,b.Ov)(r.g4.interactiveLogin,"Success"),t;(0,p.dy)()}));async function $(e){const{userName:t,enforceTimeLimit:n}=e||{};_=!0;const i=await H();if(i)return i;let r;return r=t?(0,v.Df)(await(0,v.RH)(t))||t:(0,v.sA)()||(0,h.E1)()||(0,v.nt)(),!r&&(0,g.mb)()?(G(null,!0),void F()):await Y((()=>q(r)),"ssoSilent",n?B:-1)}const q=(0,x.Z)((async e=>{var t;let n;e||a.k.log("dual-auth: login_hint is not available. ssoSilent may not work!");const i=N||await(0,y.Yu)(),o=(0,S.Yb)("SSOSilentCoreAndToken"),d=(0,S.Z6)(),l=d&&d.startMeasure("ssoSilentCore").endMeasure,u={...(0,y.qW)(!0),loginHint:e},h=(0,M.N)()&&(null===(t=history)||void 0===t?void 0:t.length);try{n=await i.ssoSilent(u)}catch(t){a.k.log(`dual-auth: ssoSilent failed! : ${t}`),(0,b.Ov)(r.g4.ssoSilent,(0,s.n)(t));const n=(0,g.x6)();if(t.name===r.BS&&n){if((0,p.m5)(),!(0,p.jG)()||!(0,m.P8)())return void await V(null,!0);{const t={...(0,y.qW)(),loginHint:e};i.acquireTokenRedirect(t)}}(n||(0,m.iG)())&&t.name!==r.BS&&t.name!==r.kQ&&(0,P.h)(c.WB4,"Error in ssoSilent call",t)}finally{a.k.log(`dual-auth: getAllAccounts AFTER ${n?"SUCCESSFUL":"UNSUCCESSFUL"} ssoSilent: ${JSON.stringify((0,v.LT)(),null,4)}`),n&&(a.k.log(`dual-auth: loginResponse AFTER SUCCESSFUL ssoSilent: ${JSON.stringify(n,null,4)}`),(0,b.Ov)(r.g4.ssoSilent,"Success. User: "+(0,v.vp)(n.account.username))),G(n).finally((()=>{o(),(0,p.bf)(),(0,p.bq)()})),l&&l({customSuffix:(n?n.fromCache&&"cache":"error")||void 0})}return h&&history.length===h+1&&dispatchEvent(new CustomEvent("ssoSilentHistChanged")),n}));async function G(e,t=!1){const n=await V(e,t);await z(n)}async function V(e,t=!1){if(e){const t=U.currentAccountInfo=e.account,n=(0,v.Df)(t),i=(0,v.lx)(t);return(0,v.nq)({login_hint:n,account_type:i}),t}t&&((0,v.nq)(),(0,f.tx)(null),(0,p.bf)(),(0,p.bq)(),(0,p.hq)(),await Promise.all([(0,o.fW)((()=>A("Delete")),"tryDelete1SJwtCookies",(0,S.Z6)()),F()]),(0,v.sm)())}async function z(e,t=!1,n=!1,i=!1){let d=U.accessTokenResult1S;const l=new Date(d&&d.expiresOn),u=l&&l.getTime()&&l>new Date;if(d&&3===U.acquireTokenStatus&&u)return void a.k.log(`dual-auth: tryAcquire1STokenSilently: token is still valid - expiry: ${new Date(d&&d.extExpiresOn)}`);const h=(0,v.lx)(e)===E.Qm.AAD,g=h?["https://enterprisenews.microsoft.com/User.Read"]:["https://oneservice.microsoft.com/OneService.Read"];try{if(d=await async function(e,t,n=!1,i=!1){if(!t)return void a.k.log("dual-auth: tryAcquireTokenSilently received empty account -- API calls may not be authenticated!");const o=N||await(0,y.Yu)(),d={...(0,y.Bj)(e),forceRefresh:i,account:t};let l;const u=(0,S.Z6)(),h=u&&u.startMeasure("tryAcquireTokenSilently").endMeasure;try{l=await Y((()=>o.acquireTokenSilent(d)),"acquireTokenSilent",n?O:-1)}catch(e){throw a.k.log(`dual-auth: acquireTokenSilent failed! : ${e}`),(0,b.Ov)(r.g4.acquireTokenSilent,(0,s.n)(e)),(0,P.h)(c.Bjk,"acquireTokenSilent call failed",e),e.name===r.BS&&(0,p.jG)()&&o.acquireTokenRedirect(d),l=null,e}finally{h&&h({customSuffix:(l?l.fromCache&&"cache":"error")||void 0}),l&&(0,b.Ov)(r.g4.acquireTokenSilent,"Success"),a.k.log(`dual-auth: acquireTokenSilent for scopes: ${e} was ${l?"SUCCESSFUL":"UNSUCCESSFUL"} accessTokenResult: ${JSON.stringify(l,null,4)}`)}return l}(g,e,n,i),d){if(U.acquireTokenStatus=3,U.accessTokenResult1S=d,(0,f.tx)(d),!d.fromCache){const e=+new Date;(0,S.w0)("OSATExpMins",Math.floor((+d.expiresOn-e)/6e4))}m=d,(0,o.fW)((()=>A("Acquire",m)),"tryAcquire1SJwtCookies",(0,S.Z6)()),h&&(0,I.qs)(d.accessToken)}}catch(e){if(d=U.accessTokenResult1S=null,e.name===r.BS&&e.errorCode===r.w6&&t)return void(U.acquireTokenStatus=2);U.acquireTokenStatus=1}var m;W.set(d);const C=function(e){if(!e)return null;const t=e&&e.extExpiresOn,n=t&&new Date(t),i=n&&n.getTime(),o=(new Date).getTime();let a;const s=6e4,c=1e3*(r.QL-r.Ic),d=1e3*r.Ic;i&&i>o?(a=i-o,a<=d&&(a=0)):a=c;return a+s}(d);C&&setTimeout((()=>z(e)),C)}async function j(){if(U.accessTokenResult1S)return U.accessTokenResult1S;if(!_){const e="Wait for 1SToken failed because auth flow was not started";return a.k.logError(`dual-auth:  ${e} -- so returning early without the 1S access token`),(0,b.Ov)(r.g4.waitFor1SToken,e),(0,P.h)(c.YHd,e),void W.set(null)}const e=(0,S.Yb)("Wait1SToken"),t=await(0,o.fW)((()=>W.getResultAsync()),"waitFor1SToken",(0,S.Z6)());return e(),t}function K(){const{currentAccountInfo:e}=U;if(e)return(0,v.lx)(e);const t=(0,g.x6)();return t?t.account_type:void 0}function Q(){return(0,v.lx)(U.currentAccountInfo)===E.Qm.AAD?U.currentAccountInfo.tenantId:""}async function J(e){(0,y.Oo)();const{loginHint:t,forceLoginPrompt:n,tenantOptions:i,redirectStartPage:o}=e||{},a=N||await(0,y.Yu)(i);if(!a)return;const s=n?"login":"select_account",c={...(0,y.qW)(),prompt:s},{tenantScope:d,tenantId:l}=i||{},u=!(!t||!d&&!l);u&&Object.assign(c,{prompt:void 0,loginHint:t,extraQueryParameters:{domain_hint:"MSA"===d||l===r.bc?"consumers":"organizations"}}),o&&(c.redirectStartPage=o),(0,b.Ov)(r.g4.interactiveLogin,"Redirect start"+(u?" with login hint":"")),await a.loginRedirect(c)}async function Y(e,t,n){let i,r=n,o=!1;return(0,M.N)()&&(location.search.includes(`${t}NoTimeout`)?r=999999999:location.search.includes(`${t}ForceDelay`)?(e=()=>(0,l.Kb)(1e4).then(e),r+=2e4):location.search.includes(`${t}ForceTimeout`)?(r=0,o=!0):n<0&&(r=-1)),r<0?await e():(await Promise.race([e().then((e=>i=e)),(0,l.Kb)(r).then((()=>Promise.reject(new Error(`Operation ${t} timed out after ${r}ms`))))]),o?void 0:i)}},24195:function(e,t,n){"use strict";n.d(t,{DW:function(){return y},qs:function(){return v}});var i,r=n(42933),o=n(76733),a=n(88826),s=n(7476),c=n(56687),d=n(65505),l=n(76716),u=n(21789),p=n(18562),h=n(23357),g=n(69438),m=n(19464),f=n(15606);function v(e){return(0,r.fW)((()=>S("Acquire",e)),"tryAcquire1SWorkIdCookies",(0,f.Z6)())}function y(){return(0,r.fW)((()=>S("Delete")),"tryDelete1SWorkIdCookies",(0,f.Z6)())}async function S(e,t){if(!(0,d._K)())return void o.k.log("Auth: WorkId work flow is not enabled in this environment");const n="Acquire"===e,i="Reset"===e,r=n||i?"GET":"DELETE",f=(0,l.E)(),v=`https://api.msn.${u.jG.IsChinaCompliance?"cn":"com"}/auth/cookie/${i?"wid":"AAD"}`;let y,S,C;try{var w;const o=new URL(v);o.searchParams.append("apikey",u.jG.OneServiceApiKey),o.searchParams.append("ocid",g.GL),o.searchParams.append("activityId",u.jG.ActivityId),o.searchParams.append("it",f),i&&o.searchParams.append("reset","true");const a={method:r,credentials:"include",headers:(0,d.me)(t)||void 0};if(y=await fetch(o.toString(),a),((0,p.Nv)("prg-1s-sm-workid")||(0,p.Nv)("prg-1s-mm-wid-t"))&&y.ok){const e=n&&await y.json(),{consent:t,migrated:i,userType:r}=e||{};C={consent:null==t?void 0:t.toLowerCase(),migrated:"yes"===(null==i?void 0:i.toLowerCase()),userType:null==r?void 0:r.toLowerCase()}}const s=f===l.M.Web?h.yz:h.og,c=!!(0,m.ej)(s),b=n&&(null===(w=C)||void 0===w?void 0:w.migrated)||i;b!==c&&(S=new Error(`${b?"Expected":"Unexpected"} cookie ${s} is ${b?"missing":"still present"} after ${e} 1S call to ${v} with status ${y.status}`))}catch(e){S=e}const b=!S&&y&&y.ok?null:`Error in ${e} mode in ${v} call. ${S||""}`;return b&&(0,a.H)(s.FTS,b,S&&(S.message||(0,c.n)(S))),C&&Promise.resolve(C)}!function(e){e.Acquire="Acquire",e.Delete="Delete",e.Reset="Reset"}(i||(i={}))},44035:function(e,t,n){"use strict";var i;n.d(t,{cN:function(){return o},cq:function(){return r},pb:function(){return i}}),function(e){e[e.Immediately=0]="Immediately",e[e.OnPageLoad=1]="OnPageLoad",e[e.OnUserInteraction=2]="OnUserInteraction",e[e.OnBusinessSearchResultsReady=3]="OnBusinessSearchResultsReady"}(i||(i={}));const r="Search-AutoSuggest",o="q"},47386:function(e,t,n){"use strict";n.d(t,{fF:function(){return f}});var i,r=n(44035),o=n(21789),a=n(92100),s=n(13334),c=n(31558),d=n(78672),l=n(19464),u=n(85663);class p{constructor(e,t,n,i,r){this.autoSuggestProperties=e,this.osMarket=t,this.osLanguage=n,this.requestId=i,this.isDarkMode=r}addAutoSuggest(e){if(!(0,c.N)())return!1;if(o.jG.CurrentRequestTargetScope&&"kids"===o.jG.CurrentRequestTargetScope.audienceMode)return!1;const t=this.isDisabled(),n=window[p.globalObjectName];if(n)return n.enable(!t),this.updateAutoSuggestSessionId(),!0;if(t)return!1;const i=this.getCompleteUrl(),r=(0,d.b0)(i,void 0,!0,"use-credentials");r.onload=e;return document.getElementsByTagName("head")[0].appendChild(r),!0}invokeCookieSharing(){h((0,l.ej)(p.sharedCookieName),5)||(0,l.sq)(p.sharedCookieName,"SID=00",365,p.cookieDomain,"/")}isDisabled(){return new RegExp("\\b"+p.cookieCrumb+"=0\\b","i").test((0,l.ej)(p.cookieName))}updateAutoSuggestSessionId(){const e=/SID=[\da-z]+/i;if(!this.partnerSessionId){const t=(0,l.ej)(p.sharedCookieName);if(h(t,4)){const n=t.match(e);n&&h(n[0],5)&&(this.partnerSessionId=n[0].substr(4))}}const t=window[p.globalObjectName];if(t){const e=t["sid"];"function"==typeof e&&e(this.partnerSessionId)}}getCompleteUrl(){let e="";const t=a.c.getParamsFromUrl(location.search);return t.find((e=>"autosuggest_hook"===e.key))?this.getHookUrl(t):(e=this.autoSuggestProperties.useMarketBasedUrl?this.getMarketBasedUrl():this.getUrl(),this.shouldInitializeAutoSuggestOnPageLoad()&&(e+="&onload=1"),this.isDarkMode&&(e+="&rt=1"),(0,u.isNullOrUndefined)(this.autoSuggestProperties.zeroInputItemCount)||(e+=`&zict=${this.autoSuggestProperties.zeroInputItemCount}`),this.autoSuggestProperties.disableSearchHistory&&(e+="&shdis=1"),(0,u.isNullOrUndefined)(this.autoSuggestProperties.maxItemCount)||(e+=`&itemCount=${this.autoSuggestProperties.maxItemCount}`),e)}shouldInitializeAutoSuggestOnPageLoad(){return this.autoSuggestProperties.delayBind===r.pb.Immediately||this.autoSuggestProperties.delayBind===r.pb.OnPageLoad||this.autoSuggestProperties.delayBind===r.pb.OnBusinessSearchResultsReady&&this.autoSuggestProperties.businessSearchResultsEnabled}getMarketBasedUrl(){const e=this.osMarket||"US",t=this.osLanguage||"en-US",n=this.autoSuggestProperties.partnerEndpoint||"msnedgentp",i=(0,s.nP)().Locale;let r=["https","://www.bing.com/as/init?","pt="+n,this.osLanguage?"&setlang="+t:"",this.osMarket?"&cc="+e:"","&refig="+this.requestId].join("");return"en-us"!==t.toLowerCase()&&(r+="&endpt=1"),r+=this.getFeatures(),r+=this.autoSuggestProperties.businessSearchResultsEnabled?"&msbqf=true":"&msbqf=false",this.autoSuggestProperties.disableSuggestionFetchOnEmpty&&i&&"en-us"!==i.toLowerCase()&&(r+="&dfoe=1"),r+=this.getAutosuggestWCMobile(),r}getHookUrl(e){const t="muidflt9-ismsft",n=(0,s.nP)().CurrentFlights,i=e.find((e=>"fdhead"===e.key)),r=i?i.value:"",o=e.find((e=>"asinturl"===e.key)),a=o&&o.value;if((n.indexOf(t)>-1||r.indexOf(t)>-1)&&a){return decodeURIComponent(a)}return this.getUrl()}getUrl(){const e=(0,s.nP)().Locale||"en-us";let t=["https","://www.bing.com/as/init?mkt=",e,"&pt=",this.autoSuggestProperties.partnerEndpoint,"&refig=",this.requestId].join("");return this.autoSuggestProperties.enableNewSnrUrl||"en-us"===e.toLowerCase()||(t+="&endpt=1"),t+=this.getAutosuggestWCMobile(),t}getFeatures(){return this.autoSuggestProperties.enableFeatures&&(this.autoSuggestProperties.features||""===this.autoSuggestProperties.features)?"&features="+this.autoSuggestProperties.features:""}getAutosuggestWCMobile(){return this.autoSuggestProperties.enableAutoSuggestforWCMobile?"&asrt=1":""}}function h(e,t){return"string"==typeof e&&(!t||e.length>=t)}(i=p).cookieCrumb="AS",i.globalObjectName="sa_inst",i.cookieName="SRCHHPGUSR",i.sharedCookieName="_SS",i.cookieDomain="msn.com";var g=n(45927),m=n(82898);function f(e){if(!e||e.disableAutoSuggest)return;const{autoSuggestProperties:t,requestId:n,isDarkMode:i,searchBoxContext:o,startPerfMarkerHandler:a}=e,{osMarket:s,osLanguage:c,useMarketBasedUrl:d,delayBind:l,businessSearchResultsEnabled:u,cookieSharingDelayInSeconds:h}=t,g=new p(t,d&&s,d&&c,n,i);if(l===r.pb.OnUserInteraction||l===r.pb.OnBusinessSearchResultsReady&&!u){o.autoSuggestEventHandler=v.bind(o,g),o.registerAutoSuggestOnSearchEventHandler=y.bind(o,e);const t=C(o.inputRef);null==t||t.addEventListener("keyup",o.autoSuggestEventHandler),null==t||t.addEventListener("click",o.autoSuggestEventHandler)}else l!==r.pb.Immediately&&l!==r.pb.OnPageLoad&&l!==r.pb.OnBusinessSearchResultsReady||(a&&a(r.cq),o.registerAutoSuggestOnSearchEventHandler=y.bind(o,e),g.addAutoSuggest(o.registerAutoSuggestOnSearchEventHandler));1===h&&g.invokeCookieSharing()}function v(e,t){if("keyup"===t.type){const e=t.key;if("Tab"===e||"Escape"===e)return}if(e.addAutoSuggest(this.registerAutoSuggestOnSearchEventHandler)){const e=C(this.inputRef);e.removeEventListener("click",this.autoSuggestEventHandler),e.removeEventListener("keyup",this.autoSuggestEventHandler)}}function y(e){const{autoSuggestProperties:t,endPerfMarkerHandler:n,searchBoxContext:i,searchOpenInNewWindow:a,action:s,telemetryCallback:d,enableDetailLogs:l,suggestionClickCallback:u}=e,{delayBind:p}=t;if(p!==r.pb.OnUserInteraction&&p!==r.pb.OnPageLoad&&p!==r.pb.OnBusinessSearchResultsReady||n&&n(r.cq),a)return;const h=window.sj_evt,f=h&&h.fire;f&&(h.fire=function(...e){const[t,n]=e||[];if("AS.Navigate"===t){if(!n)return;const e=C(i.formRef);if(e&&e.attributes&&e.attributes["data-t"]){let t=g.u.get(e);if(!t&&(0,c.N)()&&(window.dispatchEvent(new CustomEvent("telemetrynodeadded",{detail:{element:e}})),t=g.u.get(e)),t.contract.content.type=function(e){if(!e)return m.uH.Undefined;const t=e.toLowerCase();if("hs"===t)return m.uH.SearchHistory;if("pn"===t)return m.uH.TrendingSearch;return m.uH.AutoSuggestSearch}(n.stype),l&&!0===l){const e=n.query??"";if((0,o.Yq)().isAadAccountUser){if(s&&s.startsWith("https://www.bing.com/")){let e=s;const i=n.stype??"",r=new URL(e);r.searchParams.set("astycn",i.toString()),r.searchParams.set("qltype","ccaad"),e=r.href.toString(),t.contract.overrideDestinationUrl=e}}else{let i="";if(n.url&&n.url.length>0&&n.url.startsWith("http")?i=n.url.toString():s&&s.startsWith("https://www.bing.com/")&&(i=s),i&&i.length>0){const n=new URL(i);n.searchParams.set("assgl",e.length.toString()),n.searchParams.set("qltype","ccnotaad"),n.searchParams.set("q",""),i=n.href.toString(),t.contract.overrideDestinationUrl=i}}}g.u.setAttribute(e,t.contract)}}"onSearch"===t&&(i.onAutoSuggestSuggestionClickHandler=S.bind(i,s,d,l,u),i.onAutoSuggestSuggestionClickHandler()),f.apply(i,e)})}function S(e,t,n,i){let r=e;const o=C(this.formRef);if(r){const e=(-1!==r.indexOf("?")?"&":"?")+"msnst=AS";if(r+=e,o.attributes&&o.attributes["data-t"]){const e=g.u.get(o);if(n&&!0===n){const t=e.contract.overrideDestinationUrl;if(t&&t.length>0){const e=(-1!==t.indexOf("?")?"&":"?")+"msnst=AS";r=t+e}}e.contract.overrideDestinationUrl=r,g.u.setAttribute(o,e.contract)}}t(o,m.Aw.Submit,m.wu.TextSearch),null==i||i()}function C(e){return e&&e.current?e.current:e}},87574:function(e,t,n){"use strict";n.d(t,{AZ:function(){return o},Gb:function(){return c},Od:function(){return r},hv:function(){return l},qR:function(){return i},rM:function(){return d},vM:function(){return a},wI:function(){return s}});const i="https://img-s-msn-com.akamaized.net/tenant/amp/entityid/",r="https://prod-streaming-video-msn-com.akamaized.net/",o="background_setting_preferences",a="ntp.background_image";var s;!function(e){e.changeBackgroundDaily="changeBackgroundDaily",e.includeVideoBackgroundsInRotation="includeVideoBackgroundsInRotation",e.showImageSpotlightText="showImageSpotlightText",e.selectedVideoSetting="selectedVideoSetting",e.imageLikes="imageLikes",e.imageDislikes="imageDislikes",e.videoLikes="videoLikes",e.videoDislikes="videoDislikes",e.backgroundSelectionMetadata="backgroundSelectionMetadata"}(s||(s={}));const c=850,d=new Map([["BrowserLocal","custom"],["Iris","bing"],["Theme","theme"],["Video","imageAndVideo"],["CMSImage","imageAndVideo"]]),l=new Map([["imageAndVideo",["Video","CMSImage","Iris"]],["bing",["Iris"]],["custom",["BrowserLocal"]],["theme",["Theme"]]])},944:function(e,t,n){"use strict";n.d(t,{D:function(){return s},f:function(){return a}});var i,r=n(55524),o=n(17556);class a{static get backgroundDataStateLoaded(){return r.Gq.get(this.backgroundDataStateLoadedKey,(()=>new o.C("backgroundDataStateLoaded")))}static set backgroundDataStateLoaded(e){r.Gq.set(this.backgroundDataStateLoadedKey,e)}static get backgroundDispositionUpdated(){return r.Gq.get(this.backgroundDispositionUpdatedKey,(()=>new o.C("backgroundDispositionUpdated")))}static set backgroundDispositionUpdated(e){r.Gq.set(this.backgroundDispositionUpdatedKey,e)}static get hotSpotsDisplayStatusUpdated(){return r.Gq.get(this.hotSpotsDisplayStatusUpdatedKey,(()=>new o.C("hotSpotsDisplayStatusUpdated")))}static set hotSpotsDisplayStatusUpdated(e){r.Gq.set(this.hotSpotsDisplayStatusUpdatedKey,e)}static get irisImageUpdated(){return r.Gq.get(this.irisImageUpdatedKey,(()=>new o.C("irisImageUpdated")))}static set irisImageUpdated(e){r.Gq.set(this.irisImageUpdatedKey,e)}static get refreshBackgroundMetadata(){return r.Gq.get(this.refreshBackgroundMetadataKey,(()=>new o.C("refreshBackgroundMetadata")))}static set refreshBackgroundMetadata(e){r.Gq.set(this.refreshBackgroundMetadataKey,e)}static get updateBackgroundGalleryDisplayed(){return r.Gq.get(this.updateBackgroundGalleryDisplayedKey,(()=>new o.C("updateBackgroundGalleryDisplayed")))}static set updateBackgroundGalleryDisplayed(e){r.Gq.set(this.updateBackgroundGalleryDisplayedKey,e)}static get updateGallerySelectedBackground(){return r.Gq.get(this.updateGallerySelectedBackgroundKey,(()=>new o.C("updateGallerySelectedBackground")))}static set updateGallerySelectedBackground(e){r.Gq.set(this.updateGallerySelectedBackgroundKey,e)}static get updateSelectionInGallery(){return r.Gq.get(this.updateSelectionInGalleryKey,(()=>new o.C("updateSelectionInGallery")))}static set updateSelectionInGallery(e){r.Gq.set(this.updateSelectionInGalleryKey,e)}static get videoSettingsUpdated(){return r.Gq.get(this.videoSettingsUpdatedKey,(()=>new o.C("videoSettingsUpdated")))}static set videoSettingsUpdated(e){r.Gq.set(this.videoSettingsUpdatedKey,e)}static get updateMarqueeAdDisplayStatus(){return r.Gq.get(this.updateMarqueeAdDisplayStatusKey,(()=>new o.C("updateMarqueeAdDisplayStatus")))}static set updateMarqueeAdDisplayStatus(e){r.Gq.set(this.updateMarqueeAdDisplayStatusKey,e)}static get updateEventGleam(){return r.Gq.get(this.updateEventGleamKey,(()=>new o.C("updateEventGleam")))}static set updateEventGleam(e){r.Gq.set(this.updateEventGleamKey,e)}}function s(){a.backgroundDataStateLoaded.unregisterObservers(),a.backgroundDispositionUpdated.unregisterObservers(),a.hotSpotsDisplayStatusUpdated.unregisterObservers(),a.irisImageUpdated.unregisterObservers(),a.refreshBackgroundMetadata.unregisterObservers(),a.updateBackgroundGalleryDisplayed.unregisterObservers(),a.updateGallerySelectedBackground.unregisterObservers(),a.videoSettingsUpdated.unregisterObservers(),a.updateMarqueeAdDisplayStatus.unregisterObservers(),a.updateEventGleam.unregisterObservers()}(i=a).backgroundDataStateLoadedKey=Symbol("backgroundDataStateLoaded"),i.backgroundDispositionUpdatedKey=Symbol("backgroundDispositionUpdated"),i.hotSpotsDisplayStatusUpdatedKey=Symbol("hotSpotsDisplayStatusUpdated"),i.irisImageUpdatedKey=Symbol("irisImageUpdated"),i.refreshBackgroundMetadataKey=Symbol("refreshBackgroundMetadata"),i.updateBackgroundGalleryDisplayedKey=Symbol("updateBackgroundGalleryDisplayed"),i.updateGallerySelectedBackgroundKey=Symbol("updateGallerySelectedBackground"),i.updateSelectionInGalleryKey=Symbol("updateSelectionInGallery"),i.videoSettingsUpdatedKey=Symbol("videoSettingsUpdated"),i.updateMarqueeAdDisplayStatusKey=Symbol("updateMarqueeAdDisplayStatus"),i.updateEventGleamKey=Symbol("updateEventGleam")},33512:function(e,t,n){"use strict";n.d(t,{z:function(){return h}});var i,r=n(87574);!function(e){e.backgroundImageType="backgroundImageType",e.backgroundImage="backgroundImage",e.backgroundSettingPreferences="backgroundSettingPreferences",e.irisPreferences="irisPreferences"}(i||(i={}));const o=new Set(["Video","CMSImage"]);var a=n(87172),s=n(67213),c=n(944),d=n(76166),l=n(95063),u=n(31558),p=n(16614);class h extends d.e{get backgroundSettingPreferencesState(){return this._backgroundSettingPreferencesState?JSON.parse(this._backgroundSettingPreferencesState):null}set backgroundSettingPreferencesState(e){this._backgroundSettingPreferencesState=e?JSON.stringify(e):null}constructor(e,t,n,i,o,a,s){super(e,t,n,i,o,a,s),this._backgroundSettingPreferencesState=null,this.config&&!this.config.disableBackgroundGallery&&(this.settingsAPI=(0,u.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate,this.initializePreferences(r.AZ,"backgroundSettingPreferencesState"),this.initializeIrisSurfaceInfoPreferences(),this.registerOnPrefsChangeCallback())}backgroundDispositionUpdated(e){var t;null===c.f||void 0===c.f||null===(t=c.f.backgroundDispositionUpdated)||void 0===t||null===(t=t.getActionSender(this))||void 0===t||t.send(e)}hotSpotsDisplayStatusUpdated(e){var t;null===c.f||void 0===c.f||null===(t=c.f.hotSpotsDisplayStatusUpdated)||void 0===t||null===(t=t.getActionSender(this))||void 0===t||t.send(e)}updateBackgroundGalleryDisplayed(e){var t;null===c.f||void 0===c.f||null===(t=c.f.updateBackgroundGalleryDisplayed)||void 0===t||null===(t=t.getActionSender(this))||void 0===t||t.send(e)}updateGallerySelectedBackground(e){var t;null===c.f||void 0===c.f||null===(t=c.f.updateGallerySelectedBackground)||void 0===t||null===(t=t.getActionSender(this))||void 0===t||t.send(e)}videoSettingsUpdated(e){var t;null===c.f||void 0===c.f||null===(t=c.f.videoSettingsUpdated)||void 0===t||null===(t=t.getActionSender(this))||void 0===t||t.send(e)}marqueAdDisplayStatusUpdated(e){var t;null===c.f||void 0===c.f||null===(t=c.f.updateMarqueeAdDisplayStatus)||void 0===t||null===(t=t.getActionSender(this))||void 0===t||t.send(e)}updateEventGleam(e){var t;null===c.f||void 0===c.f||null===(t=c.f.updateEventGleam)||void 0===t||null===(t=t.getActionSender(this))||void 0===t||t.send(e)}async initializePreferences(e,t){if(!await this.isNurturingApiAvailable())return;const n=await a.U.getPreferenceSetting(e,!0);this[t]=n&&n.value}async initializeIrisSurfaceInfoPreferences(){if(!await this.isNurturingApiAvailable())return;const e=await a.U.getPreferenceSetting("campaigns");if(!e||!e.value||e.value.length<=0)return;const t=e.value;this.irisBackgroundSurfaceInfo=this.getIrisBackgroundSurfaceInfo(t)}async registerOnPrefsChangeCallback(){this.settingsAPI&&this.settingsAPI.onPrefsChanged.addListener((async e=>{const t=e[0],n=this.getModifiedPreference(t);let r=!1;if(n){if(this.config.cacheSSRBasePageResponse&&n===i.backgroundImage&&(r=!0),n===i.backgroundSettingPreferences){const e=t.value,n=this.getPreferenceKeyIndex(e,"background_setting_preferences");if(n<0)return;const i=this.backgroundSettingPreferencesState;if(this.backgroundSettingPreferencesState=e[n].value,l.p.setBackgroundSettingsPreferencesCache(this.backgroundSettingPreferencesState),!i||!this.backgroundSettingPreferencesState)return;const s=i.backgroundSelectionMetadata,f=this.backgroundSettingPreferencesState.backgroundSelectionMetadata;if(!l.p.getShouldRerender())return void l.p.setShouldRerender(!0);var a,d;if(i.selectedVideoSetting!==this.backgroundSettingPreferencesState.selectedVideoSetting)null===(a=c.f.videoSettingsUpdated.getActionSender(this))||void 0===a||a.send(this.backgroundSettingPreferencesState.selectedVideoSetting),null===(d=c.f.refreshBackgroundMetadata.getActionSender(this))||void 0===d||d.send(),r=this.config.cacheSSRBasePageResponse;else if(!s&&f){var u;null===(u=c.f.updateGallerySelectedBackground.getActionSender(this))||void 0===u||u.send(f)}else if(s&&!f){var h,g;null===(h=c.f.refreshBackgroundMetadata.getActionSender(this))||void 0===h||h.send(),null===(g=c.f.updateSelectionInGallery.getActionSender(this))||void 0===g||g.send()}else if(s&&f&&!(0,p.Z)(s,f)&&(s.provider===f.provider||o.has(s.provider)&&o.has(f.provider))){var m;null===(m=c.f.updateGallerySelectedBackground.getActionSender(this))||void 0===m||m.send(f)}else this.config.cacheSSRBasePageResponse&&i.showImageSpotlightText!==this.backgroundSettingPreferencesState.showImageSpotlightText&&(r=!0)}else if(n===i.irisPreferences){const e=t.value,n=this.getPreferenceKeyIndex(e,"campaigns");if(n<0)return;const i=this.irisBackgroundSurfaceInfo,r=e[n].value;if(this.irisBackgroundSurfaceInfo=this.getIrisBackgroundSurfaceInfo(r),!i||!this.irisBackgroundSurfaceInfo)return;var f;if(i.currentCreativeId!==this.irisBackgroundSurfaceInfo.currentCreativeId)null===(f=c.f.refreshBackgroundMetadata.getActionSender(this))||void 0===f||f.send()}r&&(0,s.RV)()}}))}getIrisBackgroundSurfaceInfo(e){if(e&&!(e.length<=0))return e.find((e=>"88000244"===e.placement))||void 0}getModifiedPreference(e){if("ntp.background_image_type"===e.key)return i.backgroundImageType;if("ntp.user_nurturing"===e.key){const t=e.value,n=this.getPreferenceByKey(t,r.AZ);if(!(0,p.Z)(this.backgroundSettingPreferencesState,n))return i.backgroundSettingPreferences}else if("ntp.background_image"===e.key)return i.backgroundImage}getPreferenceByKey(e,t){const n=this.getPreferenceKeyIndex(e,t);return n>-1?e[n].value:{}}getPreferenceKeyIndex(e,t){return e.findIndex((e=>e.key===t))}async isNurturingApiAvailable(){return a.U.isApiAvailableToUse()}}},38918:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var i=n(99551),r=n(944);class o{reduce(e,t){if(!e)return{backgroundGalleryDisplayed:!1};if(!t)return e;let n;return i.G.handleAction(t,r.f.backgroundDataStateLoaded,(t=>{n={...e,...t}})),i.G.handleAction(t,r.f.updateBackgroundGalleryDisplayed,(t=>{n={...e,backgroundGalleryDisplayed:t}})),i.G.handleAction(t,r.f.updateGallerySelectedBackground,(t=>{n={...e,backgroundSelectionMetadata:t}})),i.G.handleAction(t,r.f.backgroundDispositionUpdated,(t=>{n={...e,backgroundDispositionMetadata:t}})),i.G.handleAction(t,r.f.hotSpotsDisplayStatusUpdated,(t=>{n={...e,shouldRenderHotSpots:t}})),i.G.handleAction(t,r.f.videoSettingsUpdated,(t=>{n={...e,selectedVideoSetting:t}})),i.G.handleAction(t,r.f.updateMarqueeAdDisplayStatus,(t=>{n={...e,displayMarqueeAd:t}})),i.G.handleAction(t,r.f.updateEventGleam,(t=>{n={...e,eventGleam:t}})),n||e}}},11833:function(e,t,n){"use strict";n.r(t),n.d(t,{BackgroundDataActions:function(){return i.f},BackgroundDataConnector:function(){return r.z},BackgroundDataReducer:function(){return o.L},ToolingInfo:function(){return a},resetBackgroundDataActions:function(){return i.D}});var i=n(944),r=n(33512),o=n(38918);const a={experienceConfigSchema:{}}},15420:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});var i=n(91992);function r(e){var t;let n=null;const r=null==e||null===(t=e.ntpTheme)||void 0===t?void 0:t.backgroundColorRgba;if(!r||r.length<4)return null;const o={r:r[0],g:r[1],b:r[2],a:r[3]};return n=i.g.rgbNumberToCssHexColor(i.g.parsedColorToNumber(o)),n}},59952:function(e,t,n){"use strict";n.d(t,{IG:function(){return o},Nf:function(){return l},Th:function(){return s},fZ:function(){return r},gf:function(){return a},x$:function(){return d}});var i=n(87574);const r="background_gallery_open_event",o="galleryToastCooldowns",a="irisBackgroundLiked",s=new Set(["overlay","positioning-region"]);var c;!function(e){e.reducedMotion="reducedMotion"}(c||(c={}));const d=[i.wI.imageLikes,i.wI.imageDislikes,i.wI.videoLikes,i.wI.videoDislikes],l=new Map([[i.wI.imageLikes,i.wI.imageDislikes],[i.wI.imageDislikes,i.wI.imageLikes],[i.wI.videoLikes,i.wI.videoDislikes],[i.wI.videoDislikes,i.wI.videoLikes]]);new Map([["imageAndVideo",["Video","CMSImage","Iris"]],["bing",["Iris"]],["custom",["BrowserLocal"]],["theme",["Theme"]]])},27412:function(e,t,n){"use strict";n.d(t,{k:function(){return u}});var i=n(88826),r=n(7476),o=n(56591),a=n(45266),s=n(88456),c=n(74161),d=n(85205),l=n(67044);const u=new class{get chromiumPageSettingsConnector(){return this._chromiumPageSettingsConnector||(this._chromiumPageSettingsConnector=(0,l.K0)(d.z.ChromiumPageSettings)),this._chromiumPageSettingsConnector}setLayoutFromPreset(e){if(!this.chromiumPageSettingsConnector)return void(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the setLayoutFromPreset method");const t=this.chromiumPageSettingsConnector.getCurrentState(),n=(0,o.j)(t.selectedFeedDisplaySetting,e,t.greetingEnabled,t.hideDefaultTopSites);if(t.currentLayout!==n){let e;if("custom"!==n){const i=a.Wi[n];e={currentBackgroundImageType:i.current_background_image_type,originalLayout:t.currentLayout,currentLayout:n,greetingEnabled:i.greeting,imageOfTheDayEnabled:"off"!==i.current_background_image_type,quickLinksEnabled:i.quick_links,hideDefaultTopSites:i.hide_promoted_links,selectedFeedDisplaySetting:i.feeds_position}}else{const t=this.chromiumPageSettingsConnector.getCurrentState();e={...t,originalLayout:t.currentLayout,currentLayout:n}}this.chromiumPageSettingsConnector.updateLayout(e),(0,s.qi)(c.nc.layout_mode,a.Uq[e.currentLayout])}}updateLayoutAndBackgroundImageType(e,t){this.chromiumPageSettingsConnector?(t?this.updateToCustomLayoutMode():this.setLayoutFromPreset(e),this.chromiumPageSettingsConnector.updateBackgroundImageType(e)):(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the updateLayoutAndBackgroundImageType method")}updateToCustomLayoutMode(){if(!this.chromiumPageSettingsConnector)return void(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the updateToCustomLayoutMode method");const e=this.chromiumPageSettingsConnector.getCurrentState(),t={...e,originalLayout:e.currentLayout,currentLayout:"custom"};this.chromiumPageSettingsConnector.updateLayout(t),(0,s.qi)(c.nc.layout_mode,a.Uq[t.currentLayout])}isImageOfTheDayDisabled(){if(!this.chromiumPageSettingsConnector)return void(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the isImageOfTheDayDisabled method");const e=this.chromiumPageSettingsConnector.getCurrentState(),t=e.backgroundImageTypePolicy&&(3===e.backgroundImageTypePolicy||1===e.backgroundImageTypePolicy);return void 0!==t&&0!==t&&t}isCustomImageDisabled(){if(!this.chromiumPageSettingsConnector)return void(0,i.H)(r.EuY,"EdgeChromiumPageSettingsConnector is missing in BackgroundLayoutHelper for the isCustomImageDisabled method");const e=this.chromiumPageSettingsConnector.getCurrentState(),t=e.backgroundImageTypePolicy&&(3===e.backgroundImageTypePolicy||2===e.backgroundImageTypePolicy);return void 0!==t&&0!==t&&t}}},95063:function(e,t,n){"use strict";n.d(t,{p:function(){return C}});var i=n(87574),r=n(76733),o=n(7476),a=n(88826),s=n(55524),c=n(78672),d=n(291),l=n(59952),u=n(54297),p=n(92100),h=n(87172),g=n(67213),m=n(85205),f=n(23549),v=n(27412),y=n(67044);class S{constructor(){this.imageDislikes=new Set,this.imageLikes=new Set,this.hasSimpleImages=!1,this.dailyRotationOnlySimpleImages=!1,this.shouldRerender=!0,this.videoLikes=new Set,this.videoDislikes=new Set,this.stateInited=!1,this.simpleBkgdKey="simpleBkgd",this.removeIris=!1}static getInstance(){return s.Gq.get("__BackgroundStorageHelper__",(()=>new S))}async initState(e){if(this.stateInited)return;this.stateInited=!0;if(await this.getBackgroundGalleryEligibilityAsync()){const t=(0,y.K0)(m.z.ChromiumPageSettings);if(!t)return;const n=await t.getPageSettingsStateAsync();await this.initialBackgroundPSLSetup(n);(0,u.$o)().getItem("clean_meta_flag")||((0,u.$o)().setItem("clean_meta_flag","1"),"focused"===n.currentLayout&&await this.resetAppliedBackgroundAndToggleStorage(n.currentLayout));const i=await this.checkAndRemoveApplicableBackgrounds(!1,n),r=await this.getBackgroundPreferences();if(r){const t={backgroundGalleryDisplayed:!1,shouldRenderHotSpots:r.showImageSpotlightText,selectedVideoSetting:r.selectedVideoSetting,backgroundSelectionMetadata:r.backgroundSelectionMetadata};null==e||e.send(t),this.populateLikeAndDislikeCaches();const o=v.k.isImageOfTheDayDisabled(),a=v.k.isCustomImageDisabled();if(await this.resetGalleryStorageForPolicyCompliance(r,o,a),o||a)return;i&&"off"!==n.currentBackgroundImageType&&this.updateLayoutBasedOnBackgroundType(r)}}}async getBackgroundGalleryEligibilityAsync(){const e=this.shouldDisableGalleryFeature(),t=await h.U.isApiAvailableToUse(),n=(0,g.I9)();return this.isEligibleForTreatment=t&&!n&&!e,this.isEligibleForTreatment}getBackgroundGalleryEligibility(){return this.isEligibleForTreatment}setBackgroundSettingsPreferencesCache(e){this.backgroundSettingsPreferences=e}getBackgroundSettingsPreferencesCache(){return this.backgroundSettingsPreferences}getPreferenceByKeyFromFromPreferencesCache(e){const t=this.backgroundSettingsPreferences;return t?t[e]:void 0}setCurrentBackgroundPreferenceCache(e){this.currentBackgroundMetadata=e}getCurrentBackgroundPreferenceCache(){return this.currentBackgroundMetadata}setRemoveIris(e){this.removeIris=e}getRemoveIris(){return this.removeIris}populateLikeAndDislikeCaches(){for(const e of l.x$){const t=this.backgroundSettingsPreferences[e]||[],n=this.getLikeAndDislikeCacheByType(e);for(const e of t)n.add(e)}}getComplimetaryCacheName(e){return l.Nf.get(e)}getLikeAndDislikeCacheByType(e){switch(e){case i.wI.imageLikes:return this.imageLikes;case i.wI.imageDislikes:return this.imageDislikes;case i.wI.videoLikes:return this.videoLikes;case i.wI.videoDislikes:return this.videoDislikes}}setLikesAndDislikesCache(e,t){const n=this.getLikeAndDislikeCacheByType(e);this.getLikeAndDislikeCacheByType(this.getComplimetaryCacheName(e)).delete(t),n.add(t)}getShouldRerender(){return this.shouldRerender}setShouldRerender(e){this.shouldRerender=e}setSimpleImagesandCMSSize(e,t){this.hasSimpleImages=e,this.cmsImageSize=t-1}getCMSImageSize(){return this.cmsImageSize}async getBackgroundPreferences(){return h.U.getPreferenceSetting(i.AZ,!0).then((e=>{const t=e&&e.value;if(t)return this.setBackgroundSettingsPreferencesCache(t),t;r.k.logError(`PSL: Preferences API does not have ${i.AZ}.`)})).catch((e=>{r.k.logError(`Exception ${e} occurred storing background setting preferences in persistent storage layer`)}))}async getBackgroundPreferenceByKey(e){return h.U.getPreferenceSetting(i.AZ,!0).then((t=>{const n=t&&t.value;if(n)return n[e];r.k.logError(`PSL: Preferences API does not have ${i.AZ}.`)})).catch((e=>{r.k.logError(`Exception ${e} occurred getting background setting preference by key in persistent storage layer`)}))}async setBackgroundPreferences(e){return h.U.savePreferenceSetting(i.AZ,e).then((t=>(t&&this.setBackgroundSettingsPreferencesCache(e),t))).catch((t=>(r.k.logError(`Exception ${t} occurred storing background settings preferences: ${e} in persistent storage layer`),!1)))}async setBackgroundPreferenceByKey(e,t){const n=await h.U.getPreferenceSetting(i.AZ,!0).catch((e=>(r.k.logError(`Exception ${e} occurred getting background settings preferences in persistent storage layer`),this.getNurturingErrorObject())));let o=n&&n.value;return o!==this.getNurturingErrorObject()&&(o||(o={key:i.AZ,value:{}}),e==i.wI.backgroundSelectionMetadata&&(o[i.wI.changeBackgroundDaily]=!1),o[e]=t,h.U.savePreferenceSetting(i.AZ,o).then((e=>(e&&this.setBackgroundSettingsPreferencesCache(o),e))).catch((n=>(r.k.logError(`Exception ${n} occurred storing background preference ${e} and value ${t} in persistent storage layer`),!1))))}async getCurrentBackgroundMetadata(){const e=window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(e&&e.getPref)return new Promise((t=>{e.getPref(i.vM,(function(e){t(null==e?void 0:e.value)}))}))}setCurrentBackgroundMetadata(e){const t=window&&window.chrome&&window.chrome.ntpSettingsPrivate;return!(!t||!t.getPref)&&(t.setPref(i.vM,e),this.setCurrentBackgroundPreferenceCache(e),!0)}setSSRBackgroundMetadata(e){this.ssrBackgroundMetadata=e}async checkAndRemoveApplicableBackgrounds(e,t,n){const i=await this.getBackgroundPreferences();if(!i)return!1;const r=this.overrideCacheAging(),o=i.changeBackgroundDaily||r||e,a=i.backgroundSelectionMetadata;if(!a)return!1;let s=-1;return r||n||(s=a.appliedTimestamp?a.appliedTimestamp+864e5:-1),!!(o&&s<Date.now())&&this.clearCachedBackground(i)}getBackgroundImageTypeFromSettings(e,t){return this.backgroundSettingsPreferences&&this.backgroundSettingsPreferences.backgroundSelectionMetadata?this.getProviderBackgroundType(this.backgroundSettingsPreferences.backgroundSelectionMetadata.provider):t?"off":e||this.dailyRotationOnlySimpleImages?"imageAndVideo":"bing"}async initialBackgroundPSLSetup(e){if(await this.getBackgroundPreferences())return;if(!e)return;const t=this.createInitialStateFromChromiumPageSettings(e);if(!t)return void f.M0.sendAppErrorEvent({...o.tvG,message:"Initial state for background gallery is undefined",pb:{...o.tvG.pb,customMessage:`Initial state for background gallery is undefined. Current BackgroundImageType: ${e.currentBackgroundImageType}`}});await this.setBackgroundPreferences(t)&&this.setBackgroundSettingsPreferencesCache(t)}createInitialStateFromChromiumPageSettings(e){switch(e.currentBackgroundImageType){case"off":case"custom":case"theme":return this.createInitialState(!1,!1,!1);case"bing":case"imageAndVideo":return this.createInitialState(!0,!1,!0);default:return}}createInitialState(e,t,n){return{changeBackgroundDaily:e,includeVideoBackgroundsInRotation:t,showImageSpotlightText:n,selectedVideoSetting:this.shouldUseEnergySaverMode()?"energySaver":"balanced",imageLikes:[],imageDislikes:[],videoLikes:[],videoDislikes:[]}}shouldUseEnergySaverMode(){const e=window&&window.navigator;if(!e)return!0;const t=e?e.deviceMemory:-1;return!("4g"===e.connection.effectiveType)||!(t>=4)}getProviderBackgroundType(e){switch(e){case"BrowserLocal":return"custom";case"FREBackground":case"Iris":default:return"bing";case"Theme":return"theme";case"Video":case"CMSImage":return"imageAndVideo"}}async backgroundSelectionSet(){return!!await this.getBackgroundPreferenceByKey(i.wI.backgroundSelectionMetadata)}overrideCacheAging(){return"true"===p.c.getQueryParameterByName("ageOutGalleryCache",(0,c.zp)())}async handleRotationToggling(e,t){return!!this.backgroundSettingsPreferences&&(e?(this.isCurrentAndCachedBackgroundIdentical(t)&&this.setShouldRerender(!1),this.checkAndRemoveApplicableBackgrounds(!0,t,!0)):!!this.backgroundSettingsPreferences.backgroundSelectionMetadata||this.getActiveBackgroundSelectionMetadata(t).then((e=>!!e&&(this.setShouldRerender(!1),this.setBackgroundPreferenceByKey(i.wI.backgroundSelectionMetadata,e)))).catch((e=>!1)))}isCurrentAndCachedBackgroundIdentical(e){var t;const n=this.getVideoBackgroundProviderInfo(e,null===(t=this.backgroundSettingsPreferences)||void 0===t?void 0:t.includeVideoBackgroundsInRotation);if(!n||!this.backgroundSettingsPreferences||!this.backgroundSettingsPreferences.backgroundSelectionMetadata)return!1;const i=this.backgroundSettingsPreferences.backgroundSelectionMetadata;return n.provider===i.provider&&n.configIndex===i.configIndex}async getActiveBackgroundSelectionMetadata(e){if(!e)return;if("off"===e.currentBackgroundImageType)return this.buildBackgroundSelectionMetadata("Off");const t=await this.getBackgroundPreferences();if(t){if(t.backgroundSelectionMetadata&&(!this.removeIris||"Theme"!==t.backgroundSelectionMetadata.provider))return t.backgroundSelectionMetadata;switch(t.changeBackgroundDaily&&!t.includeVideoBackgroundsInRotation&&this.dailyRotationOnlySimpleImages&&"bing"===e.currentBackgroundImageType&&(e.currentBackgroundImageType="imageAndVideo"),e.currentBackgroundImageType){case"bing":return this.removeIris||this.hasSimpleImages?this.getVideoBackgroundProviderInfo(e,t.includeVideoBackgroundsInRotation):this.buildBackgroundSelectionMetadata("Iris");case"imageAndVideo":return this.getVideoBackgroundProviderInfo(e,t.includeVideoBackgroundsInRotation);case"custom":return this.buildBackgroundSelectionMetadata("BrowserLocal");case"theme":return this.buildBackgroundSelectionMetadata("Theme");default:return this.removeIris?this.getVideoBackgroundProviderInfo(e,t.includeVideoBackgroundsInRotation):this.buildBackgroundSelectionMetadata("Iris")}}}isVideoScheduled(){const e=(0,u.$o)().getObject("bkgdV");if(!e)return-1;const t=(new Date).getDay();return e&&e.schedule&&-1!==e.schedule[t]?e.schedule[t]:-1}simpleImageScheduled(){const e=(0,u.$o)().getObject("bkgdV");if(!e)return-1;const t=(new Date).getDay();return e&&e.simpleSchedule?e.simpleSchedule[t]:-1}getVideoBackgroundProviderInfo(e,t){let n=this.hasSimpleImages&&(!t&&this.dailyRotationOnlySimpleImages||this.removeIris)?this.simpleImageScheduled():this.isVideoScheduled();return this.ssrBackgroundMetadata&&this.ssrBackgroundMetadata.configIndex?n=this.ssrBackgroundMetadata.configIndex:this.ssrBackgroundMetadata&&!this.ssrBackgroundMetadata.configIndex&&(n=-1),this.hasSimpleImages&&!t?n>-1&&this.dailyRotationOnlySimpleImages?this.buildBackgroundSelectionMetadata("CMSImage",n.toString()):this.buildBackgroundSelectionMetadata("Iris"):n>-1?this.buildBackgroundSelectionMetadata("Video",n.toString()):this.buildBackgroundSelectionMetadata("Iris")}buildBackgroundSelectionMetadata(e,t,n){return{provider:e,configIndex:t||"-1",appliedTimestamp:n||Date.now()}}async shouldOverrideLayoutToCustom(){const e=await this.getBackgroundPreferences();return!!e&&(!!e.backgroundSelectionMetadata||!e.changeBackgroundDaily)}shouldOverrideLayoutToCustomCache(){const e=this.getBackgroundSettingsPreferencesCache();return!!e&&(!!e.backgroundSelectionMetadata||!e.changeBackgroundDaily)}async resetAppliedBackgroundAndToggleStorage(e){if("informational"===e||"inspirational"===e||"focused"===e){const t=await this.getBackgroundPreferences();if(!t)return;if(delete t[i.wI.backgroundSelectionMetadata],"focused"===e)return void this.setBackgroundPreferences(t);t[i.wI.changeBackgroundDaily]=!0,t[i.wI.includeVideoBackgroundsInRotation]=!this.dailyRotationOnlySimpleImages,this.setBackgroundPreferences(t)}}async resetGalleryStorageForPolicyCompliance(e,t,n){return t&&n?this.resetStorageForImagesOff(e):t?this.resetStorageForImageOfTheDayDisabled(e):!n||this.resetStorageForCustomImageDisabled(e)}async resetStorageForImagesOff(e){if(!e)return!1;const t={...e,changeBackgroundDaily:!1,includeVideoBackgroundsInRotation:!1,showImageSpotlightText:!1};return delete t[i.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(t)}async resetStorageForImageOfTheDayDisabled(e){if(!e)return!1;const t={...e,changeBackgroundDaily:!1,includeVideoBackgroundsInRotation:!1,showImageSpotlightText:!1},n=t.backgroundSelectionMetadata;return n&&"BrowserLocal"!==n.provider&&"Theme"!==n.provider&&delete t[i.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(t)}async resetStorageForCustomImageDisabled(e){if(!e)return!1;const t=e.backgroundSelectionMetadata;return!t||("Theme"===t.provider||"BrowserLocal"===t.provider?(delete e[i.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(e)):this.setBackgroundPreferences(e))}async clearCachedBackground(e){const t=e||await this.getBackgroundPreferences();return!!t&&(!t.backgroundSelectionMetadata||(delete t[i.wI.backgroundSelectionMetadata],this.setBackgroundPreferences(t)))}setToastCooldown(e,t){let n=(0,u.$o)().getObject(l.IG);n||(n={reducedMotionNextAvailableTimestamp:0});const i=Date.now()+this.calculateToastCooldown(t);"reducedMotion"===e&&(n.reducedMotionNextAvailableTimestamp=Date.now()+i),(0,u.$o)().setObject(l.IG,n)}toastCooldownExpired(e){const t=(0,u.$o)().getObject(l.IG);return!t||"reducedMotion"===e&&t.reducedMotionNextAvailableTimestamp<Date.now()}calculateToastCooldown(e){return 864e5*e}getNurturingErrorObject(){return{key:i.AZ,value:{isError:!0}}}shouldDisableGalleryFeature(){return"true"===p.c.getQueryParameterByName("disableBackgroundGallery",(0,c.zp)())}async updateLayoutBasedOnBackgroundType(e){if(!(e=e||await this.getBackgroundPreferences()))return;const t=this.getBackgroundImageTypeFromSettings(e.includeVideoBackgroundsInRotation);v.k.updateLayoutAndBackgroundImageType(t)}async checkAndUpdateRotation(){let e=this.getSimpleBkgdRotationData();const t=await this.getBackgroundPreferences();t&&(null==e&&(e={videoTogglePreFlight:t[i.wI.includeVideoBackgroundsInRotation],videoToggleInFlight:void 0},t[i.wI.includeVideoBackgroundsInRotation]=!1,this.setBackgroundPreferences(t),this.storeSimpleBkgdRotationData(e)),this.dailyRotationOnlySimpleImages=!t[i.wI.includeVideoBackgroundsInRotation])}getDailyRotationOnlySimpleImages(){return this.dailyRotationOnlySimpleImages}getSimpleBkgdRotationData(){try{return(0,u.$o)().getObject(this.simpleBkgdKey)}catch(e){return}}storeSimpleBkgdRotationData(e){try{(0,u.$o)().setObject(this.simpleBkgdKey,e)}catch(e){return void(0,a.H)(o.ybt,"Local storage for simple background failed.")}}removeSimpleBkgdRotationData(){try{(0,u.$o)().removeObject(this.simpleBkgdKey)}catch(e){return void(0,a.H)(o.ybt,"Local storage for simple background failed.")}}}const C=(0,d.h)(S)},69760:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var i,r=n(17556);class o{}(i=o).updateEnabledState=new r.C("UpdateEnabled"),i.updateHeaderExpandedState=new r.C("UpdateHeaderExpanded"),i.updateStickyState=new r.C("UpdateSticky"),i.updateLayoutStatus=new r.C("UpdateLayoutStatus")},84688:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var i=n(76166),r=n(69760);class o extends i.e{updateEnabledStatus(e){r.A.updateEnabledState.getActionSender(this).send(e)}updateHeaderExpandedStatus(e){r.A.updateHeaderExpandedState.getActionSender(this).send(e)}updateLayoutStatus(e){r.A.updateLayoutStatus.getActionSender(this).send(e)}updateStickyStatus(e){r.A.updateStickyState.getActionSender(this).send(e)}}},77232:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var i=n(99551),r=n(69760);class o{reduce(e,t){if(!e)return{isEnabled:!1,isExpanded:!1,isHeaderSticky:!1};if(!t)return e;let n;return i.G.handleAction(t,r.A.updateHeaderExpandedState,(t=>{n={...e,isExpanded:t}})),i.G.handleAction(t,r.A.updateStickyState,(t=>{n={...e,isHeaderSticky:t}})),i.G.handleAction(t,r.A.updateEnabledState,(t=>{n={...e,isEnabled:t}})),i.G.handleAction(t,r.A.updateLayoutStatus,(t=>{n={...e,feedDisplaySetting:t}})),n||e}}},23648:function(e,t,n){"use strict";var i,r;n.d(t,{F8:function(){return a},O7:function(){return i},Us:function(){return r},XQ:function(){return o},_F:function(){return c},c0:function(){return d},hI:function(){return s},wo:function(){return l}}),function(e){e[e.none=0]="none",e[e.enabled=1]="enabled",e[e.saved=2]="saved",e[e.hide=4]="hide",e[e.showMore=8]="showMore",e[e.showFewer=16]="showFewer",e[e.mute=32]="mute",e[e.hidden=64]="hidden",e[e.report=128]="report",e[e.adFeedbackSubmitted=256]="adFeedbackSubmitted",e[e.hideTopic=512]="hideTopic",e[e.dismiss=1024]="dismiss",e[e.adPrivacy=2048]="adPrivacy",e[e.feedback=4096]="feedback",e[e.whyAmISee=8192]="whyAmISee",e[e.followedPublisher=16384]="followedPublisher",e[e.followedTopic=32768]="followedTopic",e[e.hideAds=65536]="hideAds"}(i||(i={})),function(e){e.Hide="Hide",e.Like="Like",e.Disabled="Disabled",e.Dislike="Dislike",e.Mute="Mute",e.MuteWebVideo="MuteWebVideo",e.Save="Save",e.Share="Share",e.ShowMore="ShowMore",e.ShowFewer="ShowFewer",e.Divider="Divider",e.Report="Report",e.ManageInterests="ManageInterests",e.ReportAd="ReportAd",e.AdPrivacy="AdPrivacy",e.HideTopic="HideTopic",e.Feedback="Feedback",e.WhyAmISee="WhyAmISee",e.FollowPublisher="FollowPublisher",e.FollowTopic="FollowTopic",e.Upvote="Upvote"}(r||(r={}));const o=e=>{const t=[],n={TextProfanity:"TextProfanity",Profanity:"TextProfanity",SubstanceAbuse:"SubstanceAbuse",Violence:"Violence",Misinformation:"MisinformationCovid",Other:"Other",AdultImage:"AdultImage",RacyImage:"RacyImage",AdultAndRacyImage:"AdultAndRacy",SuicideOrSelfHarm:"SuicideAndSelfHarm",BullyingAndHarassment:"BullyingAndHarassment",HateSpeech:"HateSpeech",Spam:"Spam",ChildAbuse:"ChildAbuse",TerrorismOrViolentExtremism:"TerrorismOrViolentExtremism"};return e&&Object.keys(e).forEach((i=>{e[i]&&t.push(n[i])})),t},a=e=>{const t=[],n={reportBlurryImage:"reportBlurryImage",reportLongBlockOfUnFormatted:"reportLongBlockOfUnFormatted",reportTooManyLink:"reportTooManyLink",reportInsufficientInformation:"reportInsufficientInformation",reportExpectedMediaNotFound:"reportExpectedMediaNotFound",reportDuplicateContentOrMedia:"reportDuplicateContentOrMedia",Other:"Other"};return e&&Object.keys(e).forEach((i=>{e[i]&&t.push(n[i])})),t},s=e=>{const t=[],n={UndisclosedAIgengerated:"AIGeneratedMedia",AIGeneratedPromotion:"PromotionalAdLinks",IncorectInfo:"IncorrectInformation",Nonsensical:"NonsenseMedia",FakedImgOfPublicFigures:"FakedImagesOfRealPeopleOrEvents",ImpossiblePhysicalAppearance:"ImpossiblePhysicalAppearance",ContentIdentifiesItselfAsAIGenerated:"ContentItselfIdsAsAI",PlagiarismC:"reportPlagiarismChecked",other:"other"};return e&&Object.keys(e).forEach((i=>{e[i]&&"PlagiarismC"!=i&&"other"!=i&&t.push(n[i])})),t},c="/service/moderation/api/reportanissue",d="https://assets.msn.cn/service/moderation/api/reportanissue",l="WebVideo"},88762:function(e,t,n){"use strict";n.d(t,{V:function(){return a}});var i,r=n(55524),o=n(17556);class a{static get loadLocalStorage(){return r.Gq.get(this.loadLocalStorageKey,(()=>new o.C("loadLocalStorage")))}static set loadLocalStorage(e){r.Gq.set(this.loadLocalStorageKey,e)}static get marketUpdated(){return r.Gq.get(this.marketUpdatedKey,(()=>new o.C("marketUpdated")))}static set marketUpdated(e){r.Gq.set(this.marketUpdatedKey,e)}static get pageLayoutStateLoaded(){return r.Gq.get(this.pageLayoutStateLoadedKey,(()=>new o.C("PageLayoutStateLoaded")))}static set pageLayoutStateLoaded(e){r.Gq.set(this.pageLayoutStateLoadedKey,e)}static get updateConfigData(){return r.Gq.get(this.updateConfigDataKey,(()=>new o.C("updateConfigData")))}static set updateConfigData(e){r.Gq.set(this.updateConfigDataKey,e)}static get updateConfigDataChanged(){return r.Gq.get(this.updateConfigDataChangedKey,(()=>new o.C("updateConfigDataChanged")))}static set updateConfigDataChanged(e){r.Gq.set(this.updateConfigDataChangedKey,e)}static get updateTopSitesQuickLinkEndMarginUsedPadding(){return r.Gq.get(this.updateTopSitesQuickLinkEndMarginUsedPaddingKey,(()=>new o.C("updateTopSitesQuickLinkEndMarginUsedPadding")))}static set updateTopSitesQuickLinkEndMarginUsedPadding(e){r.Gq.set(this.updateTopSitesQuickLinkEndMarginUsedPaddingKey,e)}static get updateLocalStorage(){return r.Gq.get(this.updateLocalStorageKey,(()=>new o.C("updateLocalStorage")))}static set updateLocalStorage(e){r.Gq.set(this.updateLocalStorageKey,e)}static get updateNtpTheme(){return r.Gq.get(this.updateNtpThemeKey,(()=>new o.C("updateNtpTheme")))}static set updateNtpTheme(e){r.Gq.set(this.updateNtpThemeKey,e)}static get updatePrimaryAccountInfo(){return r.Gq.get(this.updatePrimaryAccountInfoKey,(()=>new o.C("updatePrimaryAccountInfo")))}static set updatePrimaryAccountInfo(e){r.Gq.set(this.updatePrimaryAccountInfoKey,e)}static get updateWPOLayoutPromotion(){return r.Gq.get(this.updateWPOLayoutPromotionKey,(()=>new o.C("updateWPOLayoutPromotion")))}static set updateWPOLayoutPromotion(e){r.Gq.set(this.updateWPOLayoutPromotionKey,e)}static get updateWPOLayoutPromotionSource(){return r.Gq.get(this.updateWPOLayoutPromotionSourceKey,(()=>new o.C("updateWPOLayoutPromotionSource")))}static set updateWPOLayoutPromotionSource(e){r.Gq.set(this.updateWPOLayoutPromotionSourceKey,e)}static get updateWPOTopsitesPromotion(){return r.Gq.get(this.updateWPOTopsitesPromotionKey,(()=>new o.C("updateWPOTopsitesPromotion")))}static set updateWPOTopsitesPromotion(e){r.Gq.set(this.updateWPOTopsitesPromotionKey,e)}static get updateWPOPromotionCoachMark(){return r.Gq.get(this.updateWPOTopsitesPromotionKey,(()=>new o.C("updateWPOPromotionCoachMark")))}static set updateWPOPromotionCoachMark(e){r.Gq.set(this.updateWPOTopsitesPromotionKey,e)}}(i=a).loadLocalStorageKey=Symbol("loadLocalStorage"),i.marketUpdatedKey=Symbol("marketUpdated"),i.pageLayoutStateLoadedKey=Symbol("pageLayoutStateLoaded"),i.updateConfigDataKey=Symbol("updateConfigData"),i.updateConfigDataChangedKey=Symbol("updateConfigDataChanged"),i.updateTopSitesQuickLinkEndMarginUsedPaddingKey=Symbol("updateTopSitesQuickLinkEndMarginUsedPadding"),i.updateLocalStorageKey=Symbol("updateLocalStorage"),i.updateNtpThemeKey=Symbol("updateNtpTheme"),i.updatePrimaryAccountInfoKey=Symbol("updatePrimaryAccountInfo"),i.updateWPOLayoutPromotionKey=Symbol("updateWPOLayoutPromotion"),i.updateWPOLayoutPromotionSourceKey=Symbol("updateWPOLayoutPromotionSource"),i.updateWPOTopsitesPromotionKey=Symbol("updateWPOTopsitesPromotion"),i.updateWPOPromotionCoachMarkKey=Symbol("updateWPOPromotionCoachMark")},50176:function(e,t,n){"use strict";var i,r,o;n.d(t,{AL:function(){return s},Aq:function(){return u},BC:function(){return h},HT:function(){return r},WT:function(){return o},YG:function(){return v},_H:function(){return g},dK:function(){return c},gJ:function(){return m},h0:function(){return i},lA:function(){return a},lx:function(){return f},pY:function(){return p},r2:function(){return l},vs:function(){return d}}),function(e){e[e.BOOLEAN_AND_STRING_ENUM=0]="BOOLEAN_AND_STRING_ENUM",e[e.BOOLEAN=1]="BOOLEAN",e[e.STRING_ENUM=2]="STRING_ENUM"}(i||(i={})),function(e){e.redirect="redirect",e.bing="bing"}(r||(r={})),function(e){e[e.user=0]="user",e[e.wpoPrerenderTab=1]="wpoPrerenderTab",e[e.wpoVisibleTab=2]="wpoVisibleTab",e[e.adminPortalVisibleTab=3]="adminPortalVisibleTab",e[e.ntpVisibleTab=4]="ntpVisibleTab"}(o||(o={}));const a={enabledFeatures:"enabledFeatures",IsDefaultSearchProviderLocked:"isInLockdownMode",isEducationEnvironment:"isEducationEnvironment",isInYandexRegions:"isInYandexRegions",isNewTabGreetingEnabled:"isNewTabGreetingEnabled",inPageSearchBoxType:"inPageSearchBoxType",profileCreationTime:"profileCreationTime",showFeedSwitcher:"showFeedSwitcher",isChromePrimaryBrowserAtFre:"isChromePrimaryBrowserAtFre",isEnrolledInProjectEqual:"isEnrolledInProjectEqual",irisAttributes:"irisAttributes",isEdgeSignInAllowed:"isEdgeSignInAllowed",isShowMicrosoftRewardsEnabled:"isShowMicrosoftRewardsEnabled",maxQuickLinks:"maxQuickLinks",channel:"channel"},s={hasImage:"has_image",resourceUrl:"resource_url",timestamp:"last_modified_time"},c="msQuickLinksDefaultOneRow",d="msQuickLinksDefaultTwoRow",l={accountType:"account_type",accountId:"account_id",email:"email",firstName:"first_name",lastName:"last_name"};var u;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CHROME=1]="CHROME",e[e.FIREFOX=2]="FIREFOX",e[e.IEXPLORER=4]="IEXPLORER",e[e.SAFARI=11]="SAFARI",e[e.EDGE=12]="EDGE",e[e.MSEDGE=13]="MSEDGE"}(u||(u={}));const p="quick_links_options",h={selected:94608e3,promoted:2592e3},g={STABLE:"",DEV:"dev",BETA:"beta",CANARY:"canary"},m="splitScreenToggle",f="tscollapsed_to_off",v={promotionInfoIsNull:"0",isInEdgeExperience:"1",sameWithCurrentLayout:"2",feedsDisabledByAdmin:"3",isNotOneOfFromLayouts:"4",nurturingApiUnavailable:"5",isLayoutSelectedByUserWithinCoolDown:"6",layoutIsAlreadyApplied:"7",maxRetargetingThreshold:"8",isControlFlight:"9",isFREModalBackground:"10",noSavedWpoPromotionOptions:"11",isContentSelectedByUserWithinCoolDown:"12",canNotUseDom:"13",isNotOneOfFromFeeds:"14"}},88456:function(e,t,n){"use strict";n.d(t,{$W:function(){return C},BA:function(){return A},F0:function(){return I},HG:function(){return k},Mc:function(){return b},O3:function(){return m},OS:function(){return M},U4:function(){return y},VT:function(){return E},WH:function(){return f},_u:function(){return g},eD:function(){return v},gC:function(){return R},k4:function(){return S},oB:function(){return P},qi:function(){return T},tv:function(){return x},zJ:function(){return w},zb:function(){return L}});var i=n(31558),r=n(50176),o=n(45266),a=n(76733),s=n(23549),c=n(7476),d=n(54297),l=n(36867),u=n(87172),p=n(74161),h=n(87574);function g(){return new Promise((e=>{const t=(0,i.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&t.getConfigData?t.getConfigData((t=>{if(void 0!==t){const n={enabledFeatures:t[r.lA.enabledFeatures],IsDefaultSearchProviderLocked:t[r.lA.IsDefaultSearchProviderLocked],isEducationEnvironment:t[r.lA.isEducationEnvironment],isInYandexRegions:t[r.lA.isInYandexRegions],isNewTabGreetingEnabled:t[r.lA.isNewTabGreetingEnabled],inPageSearchBoxType:t[r.lA.inPageSearchBoxType],profileCreationTime:t[r.lA.profileCreationTime],showFeedSwitcher:t[r.lA.showFeedSwitcher],isChromePrimaryBrowserAtFre:t[r.lA.isChromePrimaryBrowserAtFre],isEnrolledInProjectEqual:t[r.lA.isEnrolledInProjectEqual],irisAttributes:new URLSearchParams(t[r.lA.irisAttributes]),isEdgeSignInAllowed:t[r.lA.isEdgeSignInAllowed],isShowMicrosoftRewardsEnabled:t[r.lA.isShowMicrosoftRewardsEnabled],maxQuickLinks:t[r.lA.maxQuickLinks],channel:t[r.lA.channel]};e(n)}else a.k.logError("Failed to get config data from Chromium API."),e({})})):e({})}))}function m(){return new Promise((e=>{const t=(0,i.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&"function"==typeof t.getUserTopic?t.getUserTopic((t=>{e(t)})):e({})}))}async function f(e,t,n=void 0){try{if(await b()&&t){const e=await l.L.getPreferenceSetting(t);if(e&&void 0!==e.value)return JSON.parse(e.value.toString())}if(e){const t=(0,d.$o)().getObject(e,void 0);if(void 0!==t)return JSON.parse(t)}return n}catch(e){return a.k.logError("Failed to parse the key."),!1}}async function v(){const e=await(t=o._9.layout,new Promise((e=>{const n=window.chrome;if(n){const i=n.ntpSettingsPrivate;if(i&&"function"==typeof i.getPref)return void i.getPref(t,(n=>{e(n&&n.key===t?n.value:null)}))}e(null)})));var t;return null===e||isNaN(e)?null:o.F5[e]}function y(e,t,n,i,r,o,a,s,c){let d=[],l=[];i&&(d=i.split(",")),r&&(l=r.split(","));return{recommendedLayout:e,tmpl:t,control:n,fromLayoutsArray:d.length>0?d:["inspirational"],fromFeedsArray:l.length>0?l:[],reTargetRecommendedLayout:o,selectedFeedDisplaySetting:a,source:s,coachmark:c}}function S(e,t){const n={message:e,type:"information",pb:{...(0,c.mnt)(),customMessage:t}};s.M0.sendClientLogEvent(n)}function C(e,t,n){s.M0.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:n}})}function w(e,t,n,i,r,o){s.M0.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:n,customBackgroundImageInfo:JSON.stringify(i),ntpTheme:JSON.stringify(r),currentLayout:o}})}async function b(){return await l.L.isApiAvailableToUse()}function T(e,t){const n={setting:e,source:"ntp",timestamp:(new Date).getTime(),value:t};l.L.savePreferenceSetting(e,n)}function k(e,t){if("off"===e||!t||!t.provider)return!1;const n=t.provider,i=h.hv.get(e);return!(i&&i.some((e=>e===n)))}function P(e){var t;if(!e||!e.ntpTheme)return!1;const n=e.ntpTheme.usingDefaultTheme,i=(null===(t=e.ntpTheme.backgroundColorRgba)||void 0===t?void 0:t.length)>3,r=!!e.ntpTheme.imageUrl;return!n&&!r&&i}function A(e){if(!e||!e.ntpTheme)return!1;const t=e.ntpTheme.usingDefaultTheme,n=!!e.ntpTheme.imageUrl;return!t&&n}function I(e){if(!e||!e.length)return;const t=e.find((e=>e&&"background_setting_preferences"===e.key));return t&&t.value?t.value:void 0}function E(e){return h.rM.get(e.provider)}function M(){const e=(0,d.$o)().getObject("bkgdV");if(!e)return-1;const t=(new Date).getDay();return e&&e.schedule&&-1!==e.schedule[t]?e.schedule[t]:-1}function x(e){return e&&e.includeVideoBackgroundsInRotation?M():-1}async function L(e,t){if(!e)return!1;if(!await u.U.isApiAvailableToUse())return!1;const n=t>=0?"Video":"Iris",i={...e,backgroundSelectionMetadata:{provider:n,configIndex:t,appliedTimestamp:Date.now()}};return u.U.savePreferenceSetting("background_setting_preferences",i)}const R=async(e,t)=>{var n;null==e||null===(n=e.$emit)||void 0===n||n.call(e,r.gJ,{enabled:t}),await b()&&T(p.nc.enable_split_screen,t)}},62932:function(e,t,n){"use strict";n.d(t,{A:function(){return a},z:function(){return o}});var i=n(45266);const r=new Map;function o(){const e=window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(!e)return;if(!e.setPref)return;const t=e.setPref;e.setPref=function(e,n,i){if(t(e,n,i),d.has(e))return;let o="";const a=(new Error).stack;c.has(e)&&(o=function(e){if(!e)return"";const t=[],n=e.split(/\r?\n/);for(const e of n){const n=e.trim(),i=n.lastIndexOf(" ");if(!n||i<0||n.length<4)continue;const r=n.substring(3,i).split(".").slice(-1)[0];r&&l.has(r)&&t.push(r)}return t.slice(-1)[0]?t.slice(-1)[0]:""}(a)),function(e,t,n,i){if(!e||!i||!n)return;const o=r.get(t);if(!o)return;const a=i+";"+n;e(o,a)}(t,e,n,o)}}function a(e){s.forEach(((t,n)=>{e[n]&&r.set(t,n)}))}const s=new Map([[i._9.layoutModeInstrumentation,i._9.layout],[i._9.newsFeedDsiplayInstrumentation,i._9.feeds]]),c=new Set(["ntp.layout_mode","ntp.background_image_type","ntp.show_image_of_day","ntp.news_feed_display"]),d=new Set(["ntp.record_user_choices","ntp.user_nurturing"]),l=new Set(["updateLayout","onUpdateFeedVisibility","onContentSelectChange","onLayoutModeSelectChange","updateToCustomLayoutMode","updateBackgroundImageType","updateLayoutAndBackgroundImageType","overrideLayoutPreferenceForPolicy","onCustomBackgroundRadioClick","migrateBackgroundPreference","wpoPromoteNewFeedDisplaySetting","wpoPromoteNewLayout"])},32873:function(e,t,n){"use strict";n.r(t),n.d(t,{BrowserBackgroundPrefSupport:function(){return r.h0},BrowserType:function(){return r.Aq},ChromiumPageSettingsActions:function(){return a.V},ChromiumPageSettingsConnector:function(){return X},ChromiumPageSettingsReducer:function(){return te},EdgeChannel:function(){return r._H},EdgeFeatureFlag:function(){return i},InPageSearchBoxType:function(){return r.HT},LayoutChangeInitiator:function(){return r.WT},PrimaryAccountType:function(){return ne.l},SplitScreenEventKey:function(){return r.gJ},ToolingInfo:function(){return ie},WpoLayoutPromotionFailedScenarios:function(){return r.YG},configDataStringMap:function(){return r.lA},coolDownTimeMap:function(){return r.BC},createLayoutPromotionData:function(){return o.U4},customBackgroundImageInfoStringMap:function(){return r.AL},edgeNextLayoutOptimizer:function(){return q},getBackgroundImageTypeFromSelectionMetadata:function(){return o.VT},getBackgroundSettingsPreferences:function(){return o.F0},getConfigDataAsync:function(){return o._u},getCurrentConfigurationIndex:function(){return o.tv},getCurrentLayoutAsync:function(){return o.eD},getCurrentVideoIndex:function(){return o.OS},getUserSetting:function(){return o.WH},getUserTopicAsync:function(){return o.O3},isBaseBackgroundPreferenceAndGallerySelectionMismatched:function(){return o.HG},isBundledThemeBackground:function(){return o.BA},isPersistentStorageAPIAvailable:function(){return o.Mc},isRGBThemeBackground:function(){return o.oB},logAppError:function(){return o.$W},logVerboseAppError:function(){return o.zJ},msQuickLinksDefaultOneRow:function(){return r.dK},msQuickLinksDefaultTwoRow:function(){return r.vs},overrideGallerySelectionCache:function(){return o.zb},overrideNtpSettingsPrivatePreferenceSetting:function(){return K.z},primaryAccountInfoStringMap:function(){return r.r2},quickLinksOptionsKey:function(){return r.pY},recordAndNotifySplitScreenSettingsChange:function(){return o.gC},recordUserChoice:function(){return o.qi},sendClientLogEvent:function(){return o.k4},topsitesCollapsedToOff:function(){return r.lx}});var i,r=n(50176);!function(e){e.WinHPCustomBackButtonBehavior="msEnableWinHPNewTabBackButtonFocusAndClose"}(i||(i={}));var o=n(88456),a=n(88762);const s={StructuredDataCardsUserPreference:{id:"scp",maxRawLength:250,useCookie:!0,jsonEncoded:!0},CoachmarkUserPreference:{id:"cmp",maxRawLength:1,useCookie:!1,jsonEncoded:!1},LayoutOptimization:{id:"wpolo",maxRawLength:250,useCookie:!1,jsonEncoded:!0}};var c,d;!function(e){e.DefaultShowContent="DefaultShowContent",e.DisplayedCoachMarkWizards="DisplayedCoachMarkWizards",e.DynamicFeedFilters="DynamicFeedFilters",e.FreDialogExistingUser="FreDialogExistingUser",e.HasMsa="HasMsa",e.MarketSelection="MarketSelection",e.OutlookOptIn="OutlookOptIn",e.ProActiveCanvasFRE="ProActiveCanvasFRE",e.StructuredDataCardsUserPreference="StructuredDataCardsUserPreference",e.TopicSelection="TopicSelection",e.Layout="Layout",e.DhpHideNewsFeed="DhpHideNewsFeed",e.HideBingImage="HideBingImage"}(c||(c={})),function(e){e.DefaultShowContent="dsc",e.CoachMarkWizard="cmwr",e.DynamicFeedFilters="dff",e.MarketReset="mktreset",e.HasMsa="msa",e.MarketSelection="ntps",e.OutlookOptIn="olopt",e.ProActiveCanvasFRE="spnewpcfre",e.StructuredDataCardsUserPreference="scp",e.TopicSelection="epnff",e.DhpHideNewsFeed="iedo",e.HideBingImage="bingimage"}(d||(d={}));var l=n(54297);class u{constructor(e=(0,l.$o)()){this.webStorage=e,this.loadSettingsFromStorage=()=>{},this.storage={}}fetchProperty(e){const t=s[e];return t&&this.storage[t.id]}clear(){Object.keys(s).forEach((e=>{const t=s[e];this.webStorage.removeItem(t.id),delete this.storage[t.id]}))}deleteProperty(e){const t=s[e];t&&(this.webStorage.removeItem(t.id),delete this.storage[t.id])}saveProperty(e,t){const n=s[e];if(n){const e=n.jsonEncoded,i=n.maxRawLength,r=typeof t,o=JSON.stringify(t),a=o.length;if(e?"object"===r&&a<=i:("string"===r||"number"===r)&&a<=i+2){const i=e?o:t;return this.webStorage.setItem(n.id,i),!0}}return!1}loadSynchronizedSettingsFromStorage(){Object.keys(s).forEach((e=>{const t=s[e].id,n=this.webStorage.getItem(t);n&&(this.storage[t]=JSON.parse(n))}))}}var p=n(76166),h=n(45266),g=n(25598),m=n(16614),f=n(88826),v=n(7476),y=n(76733),S=n(49155),C=n(91992),w=n(19464),b=n(92100),T=n(13334),k=n(21789),P=n(23357),A=n(98463),I=n(87172),E=n(74161),M=n(36867),x=n(53629),L=n(88672);var R=n(55524),D=n(31558),F=n(291),O=n(67213),B=n(23549);class N{}const _={0:"focused",1:"inspirational",2:"informational",3:"custom"},U={focused:0,inspirational:1,informational:2,custom:3},W={0:"off",1:"headingsonly",2:"peek",3:"always",4:"onscroll"},H={off:0,headingsonly:1,peek:2,always:3,onscroll:4};class ${constructor(){this.recommendation=new N,this.getRecommendedLayout=async(e,t,n)=>new Promise((async i=>{try{const{coolDownTimeInSecondsPromoted:c,coolDownTimeInSecondsSelected:d,enbWpoPromotionFromPSL:l,forcePromotion:u,enablePureFeed:p,enableCleanerPromotion:h}=e&&e.layoutPromotion||{};let g=c,m=d;if(this.qualifyForPromotion&&!l)return this.recommendation.control?i(null):i(this.recommendation);let y=null;if(l){if(await I.U.isApiAvailableToUse()){var a;const e=null===(a=await I.U.getPreferenceSetting(E.Xm.layoutPromotion))||void 0===a?void 0:a.value;this.layoutPromotionConfig=e||null}else B.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.nurturingApiUnavailable)}else this.layoutPromotionConfig=function(){try{var e;const t=(x.k.getWpoTreatmentsWithType(L._h.layoutPromotion)??[]).filter((e=>{var t;return"PageContentLayout"===(null==e||null===(t=e.properties)||void 0===t?void 0:t.layoutType)}));return(null==t?void 0:t.length)>0?null===(e=t[0])||void 0===e?void 0:e.properties:null}catch(e){const t="Error in getting wpo layout promotion config";(0,f.H)(v.Od5,t,`error:${e}`)}return null}();if(this.layoutPromotionConfig&&(y=(0,o.U4)(this.layoutPromotionConfig.layoutRecommended,this.layoutPromotionConfig.tmpl,this.layoutPromotionConfig.isControl,this.layoutPromotionConfig.fromLayouts,this.layoutPromotionConfig.fromFeeds,this.layoutPromotionConfig.reTargetRecommendedLayout,this.layoutPromotionConfig.selectedFeedDisplaySetting,this.layoutPromotionConfig.source,this.layoutPromotionConfig.coachmark),g=this.layoutPromotionConfig.coolDownTimeInSecondsPromoted??g,m=this.layoutPromotionConfig.coolDownTimeInSecondsSelected??m),!y||!y.recommendedLayout)return B.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.promotionInfoIsNull),i(null);if(u){const{reTargetRecommendedLayout:e}=y;if(this.recommendation={recommendedLayout:y.recommendedLayout,isRevertFlight:e,shouldReTarget:e,tmpl:y.tmpl,control:y.control,source:y.source},this.qualifyForPromotion=!0,e){var s;const e=await I.U.getPreferenceSetting(E.Xm.wpo),t=e&&e.value,n=null!==(s=t.layoutHistory)&&void 0!==s&&s.length?t.layoutHistory.pop():null;n&&(this.recommendation.recommendedLayout=n.from||y.recommendedLayout)}return"custom"===this.recommendation.recommendedLayout&&y.selectedFeedDisplaySetting&&(this.recommendation.recommendedFeedDisplaySetting=y.selectedFeedDisplaySetting),i(this.recommendation)}return await this.canBePromoted(y,t,g,m,p,h,n)?(y.selectedFeedDisplaySetting&&"custom"===y.recommendedLayout&&(this.recommendation.recommendedFeedDisplaySetting=y.selectedFeedDisplaySetting),i(this.recommendation)):i(null)}catch(e){return(0,o.$W)(v.nab,"Applying recommended layout failed",`Error:${e}`),i(null)}})),this.qualifyForPromotion=!1}static getInstance(){return R.Gq.get("__EdgeNextLayoutOptimizer__",(()=>new $))}isNurturingLimitsGood(e,t,n,i,o){if(e&&e.recommendedLayoutAppliedTs){const t=(new Date).getTime(),n=o??r.BC.promoted;if(t-e.recommendedLayoutAppliedTs>1e3*n)return B.M0.addOrUpdateTmplProperty("lpIncoolDown","0"),!0}return!(t&&!n)||(B.M0.addOrUpdateTmplProperty("lpIncoolDown","1"),B.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.layoutIsAlreadyApplied),!1)}async updateLayoutPromotionUserNurturing(e,t,n){const i=(new Date).getTime(),r=await I.U.getPreferenceSetting(E.Xm.wpo),o=r&&r.value,a=o&&o.recommendedLayoutRetargetHistory||[];n&&a.push(i);const s=o&&o.layoutHistory||[];s.push({time:i,from:e,to:t,reTarget:n||!1});const c={recommendedLayoutAppliedTs:i,recommendedLayoutRetargetHistory:a,layoutHistory:s};await I.U.savePreferenceSetting(E.Xm.wpo,c)}async canBePromoted(e,t,n,i,a,s,c){const{enabled:d}=(0,D.N)()&&await(0,O.zx)()||{};if(d&&d.includes("msNtpExpBlockLayoutPromotions"))return B.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.isInEdgeExperience),!1;if(t||(t=await(0,o.eD)()),t===e.recommendedLayout&&"custom"!==t)return B.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.sameWithCurrentLayout),!1;if(this.areFeedsDisabledByAdmin())return B.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.feedsDisabledByAdmin),!1;const{fromLayoutsArray:l,reTargetRecommendedLayout:u,fromFeedsArray:p}=e;if(l&&-1===l.indexOf(t))return B.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.isNotOneOfFromLayouts),!1;if(p&&p.length&&-1===p.indexOf(c))return B.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.isNotOneOfFromFeeds),!1;if(!await I.U.isApiAvailableToUse())return B.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.nurturingApiUnavailable),!1;if(await this.isSelectedByUser(e.recommendedLayout,i,a))return!1;const h=await I.U.getPreferenceSetting(E.Xm.wpo),g=h&&h.value,m=g&&g.recommendedLayoutAppliedTs,f=g&&g.recommendedLayoutRetargetHistory&&g.recommendedLayoutRetargetHistory.length;if(!s){if(!this.isNurturingLimitsGood(g,m,u,f,n))return!1}if(this.recommendation={recommendedLayout:e.recommendedLayout,isRevertFlight:u,shouldReTarget:u,tmpl:e.tmpl,control:e.control,source:e.source,coachmark:e.coachmark},this.qualifyForPromotion=!0,u){var v;const t=null!==(v=g.layoutHistory)&&void 0!==v&&v.length?g.layoutHistory.pop():null;t&&(this.recommendation.recommendedLayout=t.from||e.recommendedLayout)}return"custom"===this.recommendation.recommendedLayout&&e.selectedFeedDisplaySetting&&(this.recommendation.recommendedFeedDisplaySetting=e.selectedFeedDisplaySetting),!0}areFeedsDisabledByAdmin(){const e=(0,l.$o)().getObject("AdminPortalSettings");if(!e)return!1;const{isOfficeContentEnabled:t,isShowCompanyAndIndustry:n}=e;return!t&&!n}async isSelectedByUser(e,t,n){if(!await M.L.isApiAvailableToUse()){const e="ntp.record_user_choices pref is not present in this version of EDGE; Will try to promote user";return(0,o.k4)(e),!1}let i;if(n){const e=await(0,O.db)();i=e&&e.userLayoutHistory}else i=await this.getExplicitUserChoice(h._9.feeds);let a=!1;if(i||(i=await this.getExplicitUserChoice(E.nc.layout_mode),a=!0,B.M0.addOrUpdateTmplProperty("f-l")),i){const s=n?i.time:i.timestamp;if(await this.isUserChoiceOutOfCooldownTime(s,t)){const e="ntp.record_user_choices pref is present and can be promoted as selected time is larger than cooldowntime";return(0,o.k4)(e),!1}(0,o.k4)(`Did not promote layout to ${e} since user explicitly set layout or content to ${i.value}`);const c=a?r.YG.isLayoutSelectedByUserWithinCoolDown:r.YG.isContentSelectedByUserWithinCoolDown;return B.M0.addOrUpdateTmplProperty("layoutPromotionFailed",c),!0}return!1}async getExplicitUserChoice(e){const t=await M.L.getPreferenceSetting(e);return t&&"ntp"===t.source?t:null}async isUserChoiceOutOfCooldownTime(e,t){if(e){if((new Date).getTime()-e>1e3*(t??r.BC.selected))return!0}return!1}async getWpoLayoutPromotionFromBrowser(){if(this.qualifyForPromotion)return this.recommendation;if(!await I.U.isApiAvailableToUse())return B.M0.addOrUpdateTmplProperty("layoutPromotionFailedAdd",r.YG.nurturingApiUnavailable),null;const e=await I.U.getPreferenceSetting(E.Xm.wpo_nx);if(e&&void 0!==e.value){const t=e.value;return this.recommendation={recommendedLayout:t.isCtrl?null:_[t.proLayout],recommendedFeedDisplaySetting:t.isCtrl?null:W[t.proContent],isRevertFlight:t.isRvert,shouldReTarget:t.isRvert,tmpl:t.tmpl,control:t.isCtrl,source:t.source,coachmark:t.coachmark},this.qualifyForPromotion=!0,this.recommendation}return B.M0.addOrUpdateTmplProperty("layoutPromotionFailedAdd",r.YG.noSavedWpoPromotionOptions),null}async storeWpoLayoutPromotionToBrowser(e,t,n,i,r,o="",a){if(!await I.U.isApiAvailableToUse())return;const s={isRvert:e,isCtrl:t,tmpl:r,proLayout:t?null:U[n],proContent:t?null:H[i],source:o,coachmark:a};I.U.savePreferenceSetting(E.Xm.wpo_nx,s)}}const q=(0,F.h)($);var G=n(78672),V=n(9586);class z{constructor(e){this.numberOfDaysToStoreTmpl=90,this.layoutTmplDataKey=E.Xm.wpoLytTmpl,this.userNurturingManager=e}static getInstance(){return R.Gq.get("__TmplManager__",(()=>new z(I.H.getInstance())))}async persistTmplValueToNurturingPref(e){if(e){const t=await this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),n=t&&t.value||[];if(this.findTmpl(n,e))return;n.push({value:e,expiryDate:this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl)}),await I.U.savePreferenceSetting(this.layoutTmplDataKey,n)}}async persistTmplValueToNurturingPrefAndStampToTelemetry(e){if(e){const t=await this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),n=t&&t.value||[];this.findTmpl(n,e)||n.push({value:e,expiryDate:this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl)});const i=[...new Set(n)];await this.userNurturingManager.savePreferenceSetting(this.layoutTmplDataKey,i),B.M0.addOrUpdateTmplProperty(e,"1")}}async stampExistingTmplValueToTelemetry(){const e=await this.userNurturingManager.getPreferenceSetting(this.layoutTmplDataKey),t=e&&e.value||[];if(!t.length)return;let n=!1;const i=this.getExpirationTimestamp(this.numberOfDaysToStoreTmpl),r=t.map((e=>"string"==typeof e?(n=!0,{value:e,expiryDate:i}):e)),o=(new Date).getTime(),a=r.filter((e=>e.expiryDate>o));a.forEach((e=>{e.value&&B.M0.addOrUpdateTmplProperty(e.value,"1")})),(n||r.length!=a.length)&&await this.userNurturingManager.savePreferenceSetting(this.layoutTmplDataKey,a)}findTmpl(e,t){return e&&-1!=e.findIndex((e=>e===t||e&&e.value===t))}getExpirationTimestamp(e){let t;try{t=(0,V.Z)(new Date,e)}catch(n){const i=new Date;t=i.setDate(i.getDate()+e)}return t.getTime()}}const j=(0,F.h)(z);var K=n(62932),Q=n(91046);const J="myFeed",Y=(e,t,n)=>{if(e===h._9.selectedFeedPivot&&""===t&&(t=J),e===h._9.selectedFeedPivot&&""===n&&(n=J),(e!==h._9.feeds||"onscroll"!==t||"headingsonly"!==n)&&t!==n){"true"===(0,Q.L)().get("mock-ntp-header")||(0,f.H)(v.sFk,"SSR - Edge header mismatch.",void 0,{...v.sFk.pb,customMessage:`key: ${e}, header: ${t}, state: ${n}`,edgeHeader:`${T.Al.EdgeNTPHeader}`})}},Z=()=>{window.chrome.runtime.lastError};class X extends p.e{constructor(e,t,n,i,s,d,l){var p;super(e,t,n,i,s,d,l),this.preferenceChangeCallbacks=[],this.marketCookieName="ntps",this.cookieExpireInDays=182,this.didLayoutModeChangeInCurrentTab=!1,this.layoutChangeInitiatorKey="lytupdtinitiator",this.QSPLayoutOverride=null,this.QSPTopSitesOverride=null,this.isPageLayoutStateReady=new Promise((e=>{this.resolvePageLayoutState=e})),this.isWindowsIndexerPromotedTopSitesPreferenceAvailable=!1,this.isMinimumVisitAffiliateSitePreferenceAvailable=!1,this.getLayoutStateFromOverrideConfig=(e,t,n)=>{let i;if(e&&"custom"!==e){var r;const t=h.Wi[e];i={currentBackgroundImageType:t.current_background_image_type,originalLayout:n.currentLayout,currentLayout:e,greetingEnabled:t.greeting,imageOfTheDayEnabled:"off"!==t.current_background_image_type,quickLinksEnabled:t.quick_links,hideDefaultTopSites:t.hide_promoted_links,selectedFeedDisplaySetting:t.feeds_position,originalFeedDisplaySetting:n.selectedFeedDisplaySetting},null!==(r=this.config.layoutPromotion)&&void 0!==r&&r.enableQuicklinkInitialVal&&(i.selectedQuickLinksDisplaySetting=n.selectedQuickLinksDisplaySetting),"onerow"!==n.selectedQuickLinksDisplaySetting&&B.M0.addOrUpdateTmplProperty("lpql","1")}else i={...n,originalLayout:n.currentLayout,currentLayout:"custom",selectedFeedDisplaySetting:t,originalFeedDisplaySetting:n.selectedFeedDisplaySetting};return i},this.settingsAPI="undefined"!=typeof window&&window&&window.chrome&&window.chrome.ntpSettingsPrivate,this._authPrivateApi="undefined"!=typeof window&&window&&window.chrome&&window.chrome.authPrivate,this.ntpApiHandle="undefined"!=typeof window&&window&&window.chrome&&window.chrome.embeddedSearch&&window.chrome.embeddedSearch.newTabPage,this.chromiumBackgroundPrefType=r.h0.BOOLEAN,this.registerOnConfigDataChangedCallback(),this.registerOnPrefsChangeCallback(),this.edgeChromiumStorageProvider=new u,a.V.updateLocalStorage.registerObserver((e=>{const t=e.params[0];this.edgeChromiumStorageProvider.saveProperty(c.StructuredDataCardsUserPreference,function(e){return{bsk:{v:e.bingShoppingVisible?1:0,p:null},wsk:{v:e.weatherVisible?1:0,p:null},ssk:{v:e.sportsVisible?1:0,p:null},msk:{v:e.moneyVisible?1:0,p:null},hsk:{v:e.horoscopeVisible?1:0,p:null},osk:{v:e.onThisDayVisible?1:0,p:null},esk:{v:e.electionsVisible?1:0,p:null},essk:{v:e.esportsVisible?1:0,p:null},lsk:{v:e.lotteryVisible?1:0,p:null},qsk:{v:e.qnaVisible?1:0,p:null},rsk:{v:e.qnaVisible?1:0,p:null},amsk:{v:e.autosMarketplaceVisible?1:0,p:null},bhsk:{v:e.healthCardVisible?1:0,p:null}}}(t))})),a.V.marketUpdated.registerObserver((e=>{const t=e.params[0];if(t&&""!==t)try{this.updateMarketandRefresh(t)}catch(e){(0,f.OO)(e,v.sMt,"Failed to change the market, cookie doesn't drop from PCS")}})),this.getInitialState().then((e=>{a.V.loadLocalStorage.getActionSender(this).send(e)})),this.QSPLayoutOverride=b.c.getQueryParameterByName("setNTPLayout",(0,G.zp)()),this.QSPTopSitesOverride=b.c.getQueryParameterByName("setNTPTopSites",(0,G.zp)()),this.QSPLayoutOverride=null!==(p=(0,G.zp)())&&void 0!==p&&p.includes("ocid=widgetonlockscreen")?"custom":this.QSPLayoutOverride,this.getPageLayoutStateAsync(d&&d.enableClientEventsLog).then((e=>{var t;if(this.config&&this.config.promoFormParamList){const t=new URLSearchParams((0,G.zp)()).get("form");if(t){if(this.config.promoFormParamList.includes(t.toUpperCase())&&"always"!==e.selectedFeedDisplaySetting){const t={...e,originalLayout:e.currentLayout,...h.YZ};this.updateLayout(t),e={...t},B.M0.addOrUpdateTmplProperty("formRecommendedLayout",e.currentLayout),B.M0.addOrUpdateTmplProperty("formRecommendedDisplay",e.selectedFeedDisplaySetting)}}}if(window.isSSREnabled&&(null===(t=this.config.layoutPromotion)||void 0===t||!t.enbWpoPromotionFromPSL))return e.isLoadCompleted=!0,a.V.pageLayoutStateLoaded.getActionSender(this).send(e),void this.resolvePageLayoutState();this.applyWpoLayoutPromotion(e)})),this.getPrimaryAccountInfoAsync().then((e=>{a.V.updatePrimaryAccountInfo.getActionSender(this).send(e)})),this.getConfigDataAsync().then((e=>{a.V.updateConfigData.getActionSender(this).send(e)})),this.ntpApiHandle&&(this.ntpApiHandle.onthemechange=()=>{const e=this.ntpApiHandle.ntpTheme;a.V.updateNtpTheme.getActionSender(this).send(e),e||(0,o.$W)(v.BFw,"Missing theme information detected on theme change.",`ntpTheme: ${e}`)})}applyWpoLayoutPromotion(e){var t;null!==(t=this.config.layoutPromotion)&&void 0!==t&&t.enbWpoPromotionFromPSL?q.getWpoLayoutPromotionFromBrowser().then((t=>{const n=()=>{if((0,D.N)()){const e=this.getCurrentState();q.getRecommendedLayout(this.config,e.currentLayout,e.selectedFeedDisplaySetting).then((e=>{e?q.storeWpoLayoutPromotionToBrowser(e.isRevertFlight,e.control,e.recommendedLayout,e.recommendedFeedDisplaySetting,e.tmpl,e.source,e.coachmark):I.U.savePreferenceSetting(E.Xm.wpo_nx,null)}))}else B.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.canNotUseDom)};this.layoutPromotionFollowUp(e,t),n(),window.addEventListener("beforeunload",n,{once:!0})})):q.getRecommendedLayout(this.config,e.currentLayout,e.selectedFeedDisplaySetting).then((t=>{this.layoutPromotionFollowUp(e,t)}))}layoutPromotionFollowUp(e,t){var n;if((null!==(n=this.config.layoutPromotion)&&void 0!==n&&n.forceRegisterLayoutPromotionCoachMark||t&&!t.isRevertFlight)&&(a.V.updateWPOLayoutPromotion.getActionSender(this).send(!0),t&&(a.V.updateWPOLayoutPromotionSource.getActionSender(this).send(t.source),a.V.updateWPOPromotionCoachMark.getActionSender(this).send(t.coachmark))),t&&t.tmpl&&j.persistTmplValueToNurturingPref(t.tmpl),t&&t.source&&B.M0.addOrUpdateTmplProperty("pSource",t.source),t){const{recommendedLayout:n,recommendedFeedDisplaySetting:i,shouldReTarget:o}=t;if(n){const t=T.Al.IsPrerender?r.WT.wpoPrerenderTab:r.WT.wpoVisibleTab,a=this.getLayoutStateFromOverrideConfig(n,i,e),s=e.currentLayout;this.wpoPromoteNewLayout(a,t),i&&this.wpoPromoteNewFeedDisplaySetting(i,e.selectedFeedDisplaySetting),(0,l.$o)().setObject("previousLayoutState",{currentLayout:e.currentLayout,selectedFeedDisplaySetting:e.selectedFeedDisplaySetting,currentBackgroundImageType:e.currentBackgroundImageType,greetingEnabled:e.greetingEnabled,imageOfTheDayEnabled:e.imageOfTheDayEnabled,quickLinksEnabled:e.quickLinksEnabled,hideDefaultTopSites:e.hideDefaultTopSites});const c=i||a.selectedFeedDisplaySetting;e={...e,currentLayout:n,selectedFeedDisplaySetting:c,currentBackgroundImageType:a.currentBackgroundImageType,greetingEnabled:a.greetingEnabled,imageOfTheDayEnabled:a.imageOfTheDayEnabled,quickLinksEnabled:a.quickLinksEnabled,hideDefaultTopSites:a.hideDefaultTopSites},B.M0.addOrUpdateTmplProperty("recommendedLayout",n),B.M0.addOrUpdateTmplProperty("recommendedDisplay",c),q.updateLayoutPromotionUserNurturing(s,n,o)}}(0,D.N)()&&j.stampExistingTmplValueToTelemetry(),e.isLoadCompleted=!0,a.V.pageLayoutStateLoaded.getActionSender(this).send(e),this.resolvePageLayoutState()}async updateMarketandRefresh(e){(0,w.sq)(this.marketCookieName,void 0,-1),(0,w.sq)(this.marketCookieName,void 0,-1,void 0,"/edge");const t=JSON.stringify({m:e});(0,w.sq)(this.marketCookieName,t,this.cookieExpireInDays,k.jG.HostPage.topDomain,"/"),await M.L.savePreferenceSetting(this.marketCookieName,{setting:this.marketCookieName,source:"ntp",timestamp:(new Date).getTime(),value:t}),B.M0.addOrUpdateTmplProperty("marketSetToExplicitSelection","1"),this.config.cacheSSRBasePageResponse&&await(0,O.RV)();const n=`/${k.jG.CurrentMarket}/`;if(!location.pathname.startsWith(n))return void(0,S.Z)();const i=new URL(location.href);i.pathname=i.pathname.replace(n,`/${e}/`),(0,S.Z)({newUrl:i.href})}checkAuthApiIsAvailable(){return!!(window&&window.chrome&&window.chrome.authPrivate)&&!!window.chrome.authPrivate.startEdgeSignIn}getPrimaryAccountInfoAsync(e=!0){return new Promise((t=>{const n=this.getCurrentState();e&&n.primaryAccountInfo?t(n.primaryAccountInfo):this._authPrivateApi&&this._authPrivateApi.getPrimaryAccountInfo?this._authPrivateApi.getPrimaryAccountInfo((e=>{if(e){const n={accountId:e[r.r2.accountId],accountType:e[r.r2.accountType],firstName:e[r.r2.firstName],lastName:e[r.r2.lastName],email:e[r.r2.email]};t(n)}else(0,f.H)(v.bKp,"Failed to get response from Chromium API.",void 0,{...v.bKp.pb}),t({})})):(y.k.logError("Failed to get auth private api data from Chromium API."),t({}))}))}async getConfigDataAsync(){const e=this.getCurrentState();return e.configData?e.configData:(0,o._u)()}getPageSettingsStateAsync(){const e=this.getCurrentState(),t=this.config&&this.config.forceDisableContent;if(T.Al.CurrentFlightSet.has("prg-usessrlayout")&&(0,D.N)()&&window.isSSREnabled&&window.ssrLayoutState&&!window.isHydrationCompleted){const n=Object.assign({},e,window.ssrLayoutState);return t&&this.setContentDisabled(n),Promise.resolve(n)}return t&&this.setContentDisabled(e),new Promise(((n,i)=>this.settingsAPI?e.isLoadCompleted?(t&&!e&&this.setContentDisabled(e),n(e)):void a.V.pageLayoutStateLoaded.registerObserver((e=>{const r=e&&e.params;if(!r||r.length<1)return i("Load action didn't send any params");const o=r[0];return t&&!o&&this.setContentDisabled(o),o?n(o):i("Chromium Load action params type does not match with expected state type")})):n(e)))}getThemeTextColor(){let e=null;const t=this.getThemeLayoutColor();if(t){const n={r:t[0],g:t[1],b:t[2],a:t[3]};e=C.g.rgbNumberToCssHexColor(C.g.parsedColorToNumber(n))}return e}getThemeLayoutColor(){const e=this.getCurrentState(),t=e.ntpTheme;if("theme"!==e.currentBackgroundImageType||!t||t.imageUrl||t.usingDefaultTheme||!t.backgroundColorRgba)return null;if(t&&!t.usingDefaultTheme){if(t&&t.isNtpBackgroundDark&&t.textColorRgba&&t.textColorRgba.length>3)return t.textColorRgba;if(t&&!t.isNtpBackgroundDark&&t.textColorLightRgba&&t.textColorLightRgba.length>3)return t.textColorLightRgba}return null}getLayoutStateAsync(){return this.getPageSettingsStateAsync()}addSettingChangeListener(e){this.preferenceChangeCallbacks.push(e)}updateLayout(e,t=r.WT.user,n=!0,i){if(!(0,D.N)()||!this.settingsAPI||this.config&&this.config.forceDisableContent)return;if(T.Al.CurrentFlightSet.has("prg-usessrlayout")&&(0,D.N)()&&window.isSSREnabled&&window.ssrLayoutState&&!window.isHydrationCompleted){const i=R.Gq.get("__hydrationPromise__");if(i)return void i.getResultAsync().then((()=>{this.updateLayout(e,t,n)}))}const o=this.getCurrentState();t!==r.WT.user&&"off"===e.selectedFeedDisplaySetting&&"off"!==o.selectedFeedDisplaySetting&&B.M0.sendAppErrorEvent({...v.MRy,message:`Feed layout is set to content-off by initiator: ${t}`,pb:{...v.MRy.pb}});let a=h.$B[o.selectedQuickLinksDisplaySetting];e.selectedQuickLinksDisplaySetting&&(a=h.$B[e.selectedQuickLinksDisplaySetting]),this.didLayoutModeChangeInCurrentTab=!0,(0,l.$o)().setObject(this.layoutChangeInitiatorKey,t);if(b.c.getQueryParameterByName("isFREModalBackground",(0,G.zp)()))B.M0.addOrUpdateTmplString("FREModalBackgroundLayoutNotSaved:1"),t!==r.WT.user&&B.M0.addOrUpdateTmplProperty("layoutPromotionFailed",r.YG.isFREModalBackground);else{var s;const i=t===r.WT.user?E.st.User:E.st.Wpo;if(null!==(s=this.config.layoutPromotion)&&void 0!==s&&s.enablePureFeed){const n=e.originalFeedDisplaySetting??o.selectedFeedDisplaySetting;if(e.selectedFeedDisplaySetting!==n){const n=t===r.WT.user?o.selectedFeedDisplaySetting:e.originalFeedDisplaySetting;(0,O.LC)(i,"feeds",h.gp[n??e.selectedFeedDisplaySetting],h.gp[e.selectedFeedDisplaySetting],(new Date).getTime())}else{const t=h.Uq[e.originalLayout??o.currentLayout],n=h.Uq[e.currentLayout];B.M0.addOrUpdateTmplProperty("layoutUpdate",`${i}|layout|${t}|${n}|${(new Date).getTime()}`)}}else(0,O.LC)(i,"layout",h.Uq[e.originalLayout??e.currentLayout],h.Uq[e.currentLayout],(new Date).getTime());n?this.executeSettingsChange(h._9.layout,h.Uq[e.currentLayout]):this.settingsAPI.setPref(h._9.layout,h.Uq[e.currentLayout],Z)}e.isContentFeedManagedByAdminPortal&&this.updateContentFeedAdminPortalSetting(!0),a?this.settingsAPI.setPref(h._9.quickLinksDisplaySetting,a,Z):this.settingsAPI.setPref(h._9.quickLinks,e.quickLinksEnabled,Z),this.settingsAPI.setPref(h._9.hideDefaultTopSites,e.hideDefaultTopSites,Z),this.settingsAPI.setPref(h._9.imageOfTheDay,e.imageOfTheDayEnabled,Z),this.settingsAPI.setPref(h._9.currentBackgroundImageType,e.imageOfTheDayEnabled?"imageAndVideo":"off",Z),this.settingsAPI.setPref(h._9.greeting,e.greetingEnabled,Z),this.settingsAPI.setPref(h._9.feeds,e.selectedFeedDisplaySetting,Z),t===r.WT.user&&i&&M.L.savePreferenceSetting(h._9.feeds,{setting:h._9.feeds,source:"ntp",timestamp:(new Date).getTime(),value:e.selectedFeedDisplaySetting}),void 0!==e.selectedFeedPivot&&this.settingsAPI.setPref(h._9.selectedFeedPivot,e.selectedFeedPivot,Z)}updateQuickLinks(e){const t=this.getCurrentState();if(t&&t.selectedQuickLinksDisplaySetting){const t=e?h.VE.onerow:h.VE.off;this.executeSettingsChange(h._9.quickLinksDisplaySetting,t)}else this.executeSettingsChange(h._9.quickLinks,e)}updateQuickLinksDisplayOption(e,t){this.QSPTopSitesOverride=null;const n=this.getCurrentState();n&&n.configData&&n.configData.enabledFeatures&&(n.configData.enabledFeatures.includes(r.dK)||n.configData.enabledFeatures.includes(r.vs))&&(this.executeSettingsChange(h._9.quickLinksDisplaySetting,h.VE[e]),this.updatePrefTSCollapsed(t))}updateHideDefaultLinksOption(e){this.executeSettingsChange(h._9.hideDefaultTopSites,e)}updateQuickBriefToggle(e){M.L.savePreferenceSetting(h._9.showQuickBrief,{setting:h._9.showQuickBrief,source:"ntp",timestamp:(new Date).getTime(),value:e}),this.updateUIForSettingsChange(h._9.showQuickBrief,e)}updateBackgroundImageType(e){this.executeSettingsChange(h._9.currentBackgroundImageType,e),this.executeSettingsChange(h._9.imageOfTheDay,"off"!==e)}updateTopSitesQuickLinkEndMarginUsedPadding(e){a.V.updateTopSitesQuickLinkEndMarginUsedPadding.getActionSender(this).send(e)}updateGreeting(e){this.executeSettingsChange(h._9.greeting,e)}updateFeeds(e,t,n=E.st.User){var i,r;(null===(i=this.config.layoutPromotion)||void 0===i||!i.enablePureFeed||null!==(r=this.config.layoutPromotion)&&void 0!==r&&r.enablePureFeed&&n===E.st.User)&&(0,O.LC)(n,"feeds",h.gp[t],h.gp[e],(new Date).getTime()),n!==E.st.User&&"off"===e&&"off"!==t&&B.M0.sendAppErrorEvent({...v.MRy,message:`Feed is set to off by initiator: ${n}`,pb:{...v.MRy.pb}}),this.executeSettingsChange(h._9.feeds,e),this.updateUIForSettingsChange(h._9.feeds,e),n===E.st.User&&M.L.savePreferenceSetting(h._9.feeds,{setting:h._9.feeds,source:"ntp",timestamp:(new Date).getTime(),value:e})}updateOfficeLeftRail(e){(0,l.$o)().setItem(P.JJ,e.toString())}officeLeftRailEnabled(){return(0,l.$o)().getObject(P.JJ,!1)}isContentFeedManagedByAdminPortal(){return(0,l.$o)().getObject("isContentFeedManagedByAdminPortal",!1)}updateContentFeedAdminPortalSetting(e){(0,l.$o)().setItem("isContentFeedManagedByAdminPortal",e.toString())}updatePageSetting(e,t){(0,l.$o)().setItem(e,t.toString())}isPageSettingEnabled(e,t){return(0,l.$o)().getObject(e,t)}executeSettingsChange(e,t){this.settingsAPI&&this.settingsAPI.setPref&&this.settingsAPI.setPref(e,t,Z)}async getInitialState(){this.edgeChromiumStorageProvider.loadSynchronizedSettingsFromStorage();const e=this.edgeChromiumStorageProvider.fetchProperty(c.StructuredDataCardsUserPreference)||{};if(e){return{weatherVisible:!e.wsk||!!e.wsk.v,sportsVisible:!e.ssk||!!e.ssk.v,moneyVisible:!e.msk||!!e.msk.v,bingShoppingVisible:!e.bsk||!!e.bsk.v,horoscopeVisible:!e.hsk||!!e.hsk.v,onThisDayVisible:!e.osk||!!e.osk.v,electionsVisible:!e.esk||!!e.esk.v,esportsVisible:!e.essk||!!e.essk.v,lotteryVisible:!e.lsk||!!e.lsk.v,qnaVisible:!e.qsk||!!e.qsk.v,recipesVisible:!e.rsk||!!e.rsk.v,autosMarketplaceVisible:!e.amsk||!!e.amsk.v,healthCardVisible:!e.bhsk||!!e.bhsk.v}}return null}getPageLayoutStateAsync(e){const t=this.getCurrentState();return new Promise((n=>{this.ntpApiHandle&&(t.ntpTheme=this.ntpApiHandle.ntpTheme);const i=t;if(this.settingsAPI){let a,s=!1;window.chrome.ntpSettingsPrivate.getAllPrefs((async c=>{if(void 0!==c){var d,l,u;a=this.defineChromiumKeys(c),(0,K.A)(a),i.currentLayout=this.QSPLayoutOverride??h.F5[a[h._9.layout]],i.userSelectedLayout=this.QSPLayoutOverride?h.F5[a[h._9.layout]]:void 0,T.Al.SelectedFeedPivot=a[h._9.selectedFeedPivot];const f=new URLSearchParams(location.search);f.has("feedPivot")&&(T.Al.SelectedFeedPivot=f.get("feedPivot"));const y=a[h._9.gamerModeEnabled];if(void 0!==y){const e=this.getGroupPolicy(c,h._9.gamerModeEnabled);A.X.UpsellGamerMode=!1===y&&!("USER_POLICY"===e.controlledBy&&"ENFORCED"===e.enforcement)}else A.X.UpsellGamerMode=!1;i.prefDerivedBrowserFeatures={isCustomBackgroundImageFeatureFlightOn:h._9.customBackgroundImageInfo in a};const S=h._9.currentBackgroundImageType in a,C=h._9.imageOfTheDay in a;let w;this.isWindowsIndexerPromotedTopSitesPreferenceAvailable=h._9.windowsIndexerPromotedTopSites in a,this.isMinimumVisitAffiliateSitePreferenceAvailable=h._9.minVisitAffiliateSites in a;if(S&&!this.config.disableBackgroundGallery&&!k.jG.IsFrePage){const e=a[h._9.userNurturingUpdated];w=(0,o.F0)(e)}if(S&&C){this.chromiumBackgroundPrefType=r.h0.BOOLEAN_AND_STRING_ENUM;const e=a[h._9.imageOfTheDay],n=a[h._9.currentBackgroundImageType];e||"off"===n||"theme"===n?e&&"off"===n?(i.currentBackgroundImageType="imageAndVideo",s=!0):"custom"===a[h._9.currentBackgroundImageType]&&a[h._9.customBackgroundImageInfo]&&!a[h._9.customBackgroundImageInfo].has_image||"theme"===a[h._9.currentBackgroundImageType]&&t.ntpTheme&&t.ntpTheme.usingDefaultTheme?i.currentBackgroundImageType="imageAndVideo":i.currentBackgroundImageType=a[h._9.currentBackgroundImageType]:(i.currentBackgroundImageType="off",s=!0)}else if(C){this.chromiumBackgroundPrefType=r.h0.BOOLEAN;const e=a[h._9.imageOfTheDay];i.currentBackgroundImageType=e?"imageAndVideo":"off"}else S&&(this.chromiumBackgroundPrefType=r.h0.STRING_ENUM,i.currentBackgroundImageType=a[h._9.currentBackgroundImageType]);if(S&&h._9.customBackgroundImageInfo in a){const e=a[h._9.customBackgroundImageInfo],t={hasImage:e[r.AL.hasImage],resourceUrl:e[r.AL.resourceUrl],timestamp:e[r.AL.timestamp]};i.customBackgroundImageInfo=t}let P;const I=a[h._9.currentBackgroundImageType];"off"!==I&&w&&w.backgroundSelectionMetadata&&(P=(0,o.VT)(w.backgroundSelectionMetadata)),e&&w&&!w.backgroundSelectionMetadata&&!w.changeBackgroundDaily&&(0,o.k4)("Rotate Image daily is off with no selection in the gallery cache",`Current background image type (pref): ${a[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(w)}, current layout: ${h.F5[a[h._9.layout]]}`);const M=a[h._9.customBackgroundImageInfo];if((0,o.HG)(I,null===(d=w)||void 0===d?void 0:d.backgroundSelectionMetadata)&&(0,o.zJ)(v.DnN,"Preference for current background image type and gallery selection do not match.",`Current background image type (pref): ${a[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(w)}`,M,t.ntpTheme,h.F5[a[h._9.layout]]),w&&"custom"===I&&!M)(0,o.zJ)(v.qP4,"Current BackgroundImageType is custom and custom background information is missing.",`Current background image type (pref): ${a[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(w)}`,M,t.ntpTheme,h.F5[a[h._9.layout]]);else if(w&&"custom"===I&&M&&!M.has_image){var p;(0,o.zJ)(v.qP4,"Current BackgroundImageType is custom and has image flag is false.",`Current background image type (pref): ${a[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(w)}`,M,t.ntpTheme,h.F5[a[h._9.layout]]);const e=(0,o.tv)(w),n=e>=0?"imageAndVideo":"bing";i.currentBackgroundImageType=n,w.changeBackgroundDaily||"BrowserLocal"!==(null===(p=w)||void 0===p||null===(p=p.backgroundSelectionMetadata)||void 0===p?void 0:p.provider)||(0,o.zb)(w,e)}if(w&&"theme"===I&&!t.ntpTheme)(0,o.zJ)(v.BFw,"Current Background Image type is theme and theme information is missing",`Current background image type (pref): ${a[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(w)}`,M,t.ntpTheme,h.F5[a[h._9.layout]]);else if(w&&"theme"===I&&t.ntpTheme&&t.ntpTheme.usingDefaultTheme){var g;(0,o.zJ)(v.Ibk,"Current Background Image type is theme and theme is default. Switching to background in rotation in cache.",`Current background image type (pref): ${a[h._9.currentBackgroundImageType]}, gallery settings: ${JSON.stringify(w)}`,M,t.ntpTheme,h.F5[a[h._9.layout]]);const e=(0,o.tv)(w),n=e>=0?"imageAndVideo":"bing";i.currentBackgroundImageType=n,"Theme"===(null===(g=w)||void 0===g||null===(g=g.backgroundSelectionMetadata)||void 0===g?void 0:g.provider)&&(0,o.zb)(w,e)}e&&("theme"===i.currentBackgroundImageType&&(0,o.oB)(i)?(0,o.k4)("RGB Theme background detected",`Current theme info: ${JSON.stringify(t.ntpTheme)}`):"theme"===i.currentBackgroundImageType&&(0,o.BA)(i)&&(0,o.k4)("Bundled Theme background detected",`Current theme info: ${JSON.stringify(t.ntpTheme)}`));let x=this.QSPTopSitesOverride??h._U[a[h._9.quickLinksDisplaySetting]];var m;if("top"==x)null===(m=this.settingsAPI)||void 0===m||m.setPref("ntp.quick_links_options",1);if(this.config.enableCarouselTopSite&&"tworows"==x&&(x="onerow"),i.ntpPrefOptionApiAvailability=!!x,"custom"!==i.currentLayout)i.quickLinksEnabled=x?"off"!==x:h.Wi[i.currentLayout].quick_links,i.selectedQuickLinksDisplaySetting=x,i.currentBackgroundImageType=h.Wi[i.currentLayout].current_background_image_type,i.selectedFeedDisplaySetting=h.Wi[i.currentLayout].feeds_position,i.hideDefaultTopSites=h.Wi[i.currentLayout].hide_promoted_links;else{i.quickLinksEnabled=x?"off"!==x:a[h._9.quickLinks],i.selectedQuickLinksDisplaySetting=x,i.greetingEnabled=a[h._9.greeting];const e=a[h._9.feeds];i.selectedFeedDisplaySetting=e,i.hideDefaultTopSites=a[h._9.hideDefaultTopSites]}let L=!1;const R=this.getGroupPolicy(c,h._9.feeds);if((R.isEnabled&&"ENFORCED"===R.enforcement||this.isContentFeedManagedByAdminPortal())&&(i.isContentFeedManagedByPolicy=!0,L=!0,"custom"!==i.currentLayout&&(i.selectedFeedDisplaySetting=a[h._9.feeds])),h._9.quickLinksDisplaySetting in a){const e=this.getGroupPolicy(c,h._9.quickLinksDisplaySetting);e.isEnabled&&"ENFORCED"===e.enforcement&&(i.isQuickLinksManagedByPolicy=!0,L=!0,"custom"!==i.currentLayout&&(i.selectedQuickLinksDisplaySetting=x,i.quickLinksEnabled="off"!==x))}if(h._9.defaultBrowserSettingEnabled in a){const e=this.getGroupPolicy(c,h._9.defaultBrowserSettingEnabled);i.defaultBrowserSettingPolicyEnforced="ENFORCED"===e.enforcement}if(h._9.backgroundImageTypePolicy in a){const e=this.getGroupPolicy(c,h._9.backgroundImageTypePolicy);i.backgroundImageTypePolicy=a[h._9.backgroundImageTypePolicy],"ENFORCED"!=e.enforcement&&(i.backgroundImageTypePolicy=0),3===i.backgroundImageTypePolicy&&"off"!==i.currentBackgroundImageType?(i.currentBackgroundImageType="off",s=!0):1!==i.backgroundImageTypePolicy||"imageAndVideo"!==i.currentBackgroundImageType&&"bing"!==i.currentBackgroundImageType?2===i.backgroundImageTypePolicy&&"custom"===i.currentBackgroundImageType&&(i.currentBackgroundImageType="imageAndVideo",s=!0):(i.currentBackgroundImageType="off",s=!0),L=L||0!==i.backgroundImageTypePolicy}if(L&&"custom"!==i.currentLayout&&(i.currentLayout="custom",this.overrideLayoutPreferenceForPolicy()),i.imageOfTheDayEnabled="off"!==i.currentBackgroundImageType,"theme"===i.currentBackgroundImageType&&t.ntpTheme){const e=t.ntpTheme;e.imageUrl||e.backgroundColorRgba||(i.imageOfTheDayEnabled=!1),!e.usingDefaultTheme&&e.isNtpBackgroundDark?i.isNtpThemeBackgroundDark=!0:i.isNtpThemeBackgroundDark=!1}s&&this.migrateBackgroundPreference(i.currentBackgroundImageType),i.openSettingsDialogFlyout=a[h._9.showSettings],i.market=T.Al.Locale,i.isAppLauncherEnabledByPolicy=a[h._9.showAppLauncher],i.isCodexBingUpsellEnabledByPolicy=a[h._9.codexBingUpsellEnabled];const F=a[h._9.userChoices];B.M0.addOrUpdateTmplProperty("userPrefCount",F?F.length:"0");const N={};null==F||F.reduce(((e,t)=>(e[t.setting]=t,e)),N);const _=N[h._9.showQuickBrief];if(i.showQuickBrief=!1!==(null==_?void 0:_.value),i.isCompanyLogoEnabledByPolicy=void 0===a[h._9.companyLogoEnabled]||a[h._9.companyLogoEnabled],h._9.verticalTabsCollapsed in a&&(i.verticalTabsCollapsed=a[h._9.verticalTabsCollapsed]),h._9.verticalTabsOpened in a&&(i.verticalTabsOpened=a[h._9.verticalTabsOpened]),h._9.hideDefaultTopSites in a){i.hideDefaultTopSites=a[h._9.hideDefaultTopSites];const e=this.getGroupPolicy(c,h._9.hideDefaultTopSites);e.isEnabled&&"ENFORCED"===e.enforcement&&(i.hideDefaultTopSitesManagedByPolicy=!0)}if("onscroll"===i.selectedFeedDisplaySetting&&(i.selectedFeedDisplaySetting="headingsonly",setTimeout((()=>{const e=window.chrome&&window.chrome.ntpSettingsPrivate;e&&e.setPref(h._9.feeds,i.selectedFeedDisplaySetting,(()=>{}))}))),this.config.newsHeadlineBelowSearchBox){const e=N[E.nc.news_below_searchbox];i.newsHeadlineEnabled=!e||e.value}if(this.config.enableMarqueeAd){const e=N[E.nc.enable_sponsored_content];i.sponsoredContentEnabled=!e||e.value}if(this.config.showPulse){const e=N[E.nc.enable_pulse];i.pulseEnabled=!e||e.value}if(this.config.topSitesOpenInNewTab){["always","peek"].includes(i.selectedFeedDisplaySetting)?i.openInNewTab=!0:i.openInNewTab=!1;const e=N[E.nc.topsites_open_in_new_tab];e&&(i.openInNewTab=e.value),B.M0.addOrUpdateTmplProperty("openInNewTab",i.openInNewTab?"1":"0")}B.M0.addOrUpdateTmplProperty("wgEnabled",i.greetingEnabled?"1":"0"),this.config.defaultGreetingEnabled&&(i.greetingEnabled=!0);b.c.getQueryParameterByName("isFREModalBackground",(0,G.zp)())&&(i.selectedFeedDisplaySetting="headingsonly",B.M0.addOrUpdateTmplString("FREModalBackgroundLoaded:1"));let U=b.c.getQueryParameterByName("feedDisplay",(0,G.zp)());if(U=null!==(l=(0,G.zp)())&&void 0!==l&&l.includes("ocid=widgetonlockscreen")?"always":U,U&&["always","peek","headingsonly","onscroll","off"].indexOf(U)>-1&&(i.userSelectedFeedDisplaySetting=i.selectedFeedDisplaySetting,i.selectedFeedDisplaySetting=U,(0,O.LC)(E.st.Lpo,"feeds",h.gp[i.userSelectedFeedDisplaySetting],h.gp[i.selectedFeedDisplaySetting],(new Date).getTime()),B.M0.addOrUpdateTmplString("feedDisplay:1")),"headingsonly"===i.selectedFeedDisplaySetting){const e=N[E.nc.dismiss_scroll_down_button];e&&(i.isScrollDownButtonDismissed=!!e.value)}const W=window.location&&(null===(u=window.location.search)||void 0===u?void 0:u.includes("mock-ntp-header=1"));(0,D.N)()||W||(e=>{const t=T.Al.EdgeNTPHeader;t&&(Y(h._9.selectedFeedPivot,t.selectedFeedPivot,e.selectedFeedPivot||J),Y(h._9.quickLinksDisplaySetting,h._U[t.quickLinkOption],e.selectedQuickLinksDisplaySetting),Y(h._9.backgroundImageTypePolicy,h.MT[t.backgroundImageTypePolicy],h.MT[e.backgroundImageTypePolicy]),(0,G.zp)().includes("ocid=widgetonlockscreen")||(Y(h._9.layout,h.F5[t.layoutMode],e.currentLayout),Y(h._9.feeds,t.newsFeedDisplay,e.selectedFeedDisplaySetting)))})(i),n(i),(0,D.N)()||B.M0.addOrUpdateTmplProperty("ssrChromiumSettingLayout",i.selectedFeedDisplaySetting)}else y.k.logError("Failed to get saved layout preferences."),n(t)}))}else n(t)}))}registerOnConfigDataChangedCallback(){this.settingsAPI&&this.settingsAPI.onConfigDataChanged&&this.settingsAPI.onConfigDataChanged.addListener((e=>{if(e){const t=e[r.lA.inPageSearchBoxType];t!==r.HT.redirect&&t!==r.HT.bing||a.V.updateConfigDataChanged.getActionSender(this).send(t)}}))}registerOnPrefsChangeCallback(){this.settingsAPI&&this.settingsAPI.onPrefsChanged&&this.settingsAPI.onPrefsChanged.addListener((e=>{if(!this.didLayoutModeChangeInCurrentTab){const e=(0,l.$o)().getObject(this.layoutChangeInitiatorKey);if(e===r.WT.wpoPrerenderTab||e===r.WT.ntpVisibleTab)return}const t=e[0];if(window.isSSREnabled&&t.key===h._9.userChoices){const e=t.value;if(e.sort(((e,t)=>t.timestamp-e.timestamp)),e[0].setting===E.nc.tscollapsed&&"wpo"===e[0].source)return}this.updateUIForSettingsChange(t.key,t.value,e)}))}async updateUIForSettingsChange(e,t,n){const i=await this.getPageSettingsStateAsync(),o={...i};let a=!1;if(e===h._9.backgroundImageTypePolicy&&(0,S.Z)(),e===h._9.feeds&&n){const t=this.getGroupPolicy(n,e);t.isEnabled&&"ENFORCED"===t.enforcement||this.isContentFeedManagedByAdminPortal()?o.isContentFeedManagedByPolicy=!0:o.isContentFeedManagedByPolicy=!1}if(e===h._9.layout){const e=h.F5[t];if(o.currentLayout=e,o.userSelectedLayout&&(o.userSelectedLayout=e),t!==h.Uq.custom&&(o.quickLinksEnabled=h.Wi[e].quick_links,o.hideDefaultTopSites=!!o.hideDefaultTopSitesManagedByPolicy||h.Wi[e].hide_promoted_links,o.currentBackgroundImageType=h.Wi[e].current_background_image_type,o.selectedFeedDisplaySetting=h.Wi[e].feeds_position,o.userSelectedFeedDisplaySetting&&(o.userSelectedFeedDisplaySetting=h.Wi[e].feeds_position),o.selectedQuickLinksDisplaySetting=i.selectedQuickLinksDisplaySetting,o.imageOfTheDayEnabled="off"!==o.currentBackgroundImageType),"visible"===document.visibilityState&&n)for(const e of this.preferenceChangeCallbacks)e(n,o)}else{switch(e){case h._9.quickLinks:o.quickLinksEnabled=t;break;case h._9.hideDefaultTopSites:{const e=this.getGroupPolicy(n,h._9.hideDefaultTopSites),r=e.isEnabled&&"ENFORCED"===e.enforcement;o.hideDefaultTopSites=t,o.hideDefaultTopSitesManagedByPolicy=r,a||(a=this.hasCriticalPreferenceChanged(i.hideDefaultTopSites,o.hideDefaultTopSites));break}case h._9.quickLinksDisplaySetting:o.selectedQuickLinksDisplaySetting=h._U[t],o.quickLinksEnabled="off"!==h._U[t],a||(a=this.hasCriticalPreferenceChanged(i.selectedQuickLinksDisplaySetting,o.selectedQuickLinksDisplaySetting));break;case h._9.showQuickBrief:o.showQuickBrief=t;break;case h._9.imageOfTheDay:this.chromiumBackgroundPrefType===r.h0.BOOLEAN&&(o.currentBackgroundImageType=t?"imageAndVideo":"off",o.imageOfTheDayEnabled="off"!==o.currentBackgroundImageType);break;case h._9.currentBackgroundImageType:if(o.currentBackgroundImageType=t,o.imageOfTheDayEnabled="off"!==o.currentBackgroundImageType,o.isNtpThemeBackgroundDark=void 0,"theme"===o.currentBackgroundImageType&&i.ntpTheme){const e=i.ntpTheme;e.imageUrl||e.backgroundColorRgba||(o.imageOfTheDayEnabled=!1),!e.usingDefaultTheme&&e.isNtpBackgroundDark?o.isNtpThemeBackgroundDark=!0:o.isNtpThemeBackgroundDark=!1}a||(a=this.hasCriticalPreferenceChanged(i.currentBackgroundImageType,o.currentBackgroundImageType));break;case h._9.customBackgroundImageInfo:{const e=t,n={hasImage:e[r.AL.hasImage],resourceUrl:e[r.AL.resourceUrl],timestamp:e[r.AL.timestamp]};o.customBackgroundImageInfo=n;break}case h._9.feeds:o.selectedFeedDisplaySetting=t,o.userSelectedFeedDisplaySetting&&(o.userSelectedFeedDisplaySetting=t),a||(a=this.hasCriticalPreferenceChanged(i.selectedFeedDisplaySetting,o.selectedFeedDisplaySetting));break;case h._9.greeting:o.greetingEnabled=t,a||(a=this.hasCriticalPreferenceChanged(i.greetingEnabled,o.greetingEnabled));break;case h._9.showSettings:o.openSettingsDialogFlyout=t;break;case h._9.showAppLauncher:o.isAppLauncherEnabledByPolicy=t}if("visible"===document.visibilityState&&n)for(const e of this.preferenceChangeCallbacks)e(n,o)}if(e===h._9.verticalTabsCollapsed&&(o.verticalTabsCollapsed=t),e===h._9.verticalTabsOpened&&(o.verticalTabsOpened=t),e===h._9.userChoices){const e=t.reduce(((e,t)=>(e[t.setting]=t,e)),{});this.config.newsHeadlineBelowSearchBox&&e[E.nc.news_below_searchbox]&&(o.newsHeadlineEnabled=!!e[E.nc.news_below_searchbox].value),this.config.enableMarqueeAd&&e[E.nc.enable_sponsored_content]&&(o.sponsoredContentEnabled=!!e[E.nc.enable_sponsored_content].value,a=this.hasCriticalPreferenceChanged(i.sponsoredContentEnabled,o.sponsoredContentEnabled)),this.config.showPulse&&e[E.nc.enable_pulse]&&(o.pulseEnabled=!!e[E.nc.enable_pulse].value),this.config.topSitesOpenInNewTab&&e[E.nc.topsites_open_in_new_tab]&&(o.openInNewTab=!!e[E.nc.topsites_open_in_new_tab].value),e[E.nc.dismiss_scroll_down_button]&&(o.isScrollDownButtonDismissed=!!e[E.nc.dismiss_scroll_down_button].value)}e===h._9.quickLinksDisplaySetting&&(o.selectedQuickLinksDisplaySetting=h._U[t],o.quickLinksEnabled="off"!==h._U[t]),e===h._9.companyLogoEnabled&&(o.isCompanyLogoEnabledByPolicy=t),a&&(0,O.RV)(),(0,m.Z)(o,i)||g.J.updateLayout.getActionSender(this).send(o)}defineChromiumKeys(e){const t={};let n;for(n of e)t[n.key]=n.value;return t}getGroupPolicy(e,t){const n=e.find((e=>e.key===t)),i={key:n.key,value:n.value,type:n.type};return n&&n.controlledBy&&n.enforcement?(i.isEnabled=!0,i.enforcement=n.enforcement,i.controlledBy=n.controlledBy):i.isEnabled=!1,i}getPromoFormParamList(){return this.config&&this.config.promoFormParamList?this.config.promoFormParamList:null}setContentDisabled(e){e.greetingEnabled=!1,e.selectedFeedDisplaySetting="off",e.userSelectedFeedDisplaySetting&&(e.userSelectedFeedDisplaySetting="off"),e.currentLayout="custom",e.userSelectedLayout&&(e.userSelectedLayout="custom"),e.imageOfTheDayEnabled=!1,e.currentBackgroundImageType="off"}isPromotedTopSitesPreferenceAvailable(){return this.isWindowsIndexerPromotedTopSitesPreferenceAvailable}isMinimumVisitAffiliateSitesPreferenceAvailable(){return this.isMinimumVisitAffiliateSitePreferenceAvailable}migrateBackgroundPreference(e){this.settingsAPI.setPref(h._9.imageOfTheDay,"off"!==e,Z),this.settingsAPI.setPref(h._9.currentBackgroundImageType,e,Z)}overrideLayoutPreferenceForPolicy(){this.settingsAPI.setPref(h._9.layout,h.Uq.custom,Z)}wpoPromoteNewLayout(e,t){this.updateLayout(e,t)}wpoPromoteNewFeedDisplaySetting(e,t){this.updateFeeds(e,t,E.st.Wpo)}hasCriticalPreferenceChanged(e,t){return!!this.config.cacheSSRBasePageResponse&&e!==t}updatePrefTSCollapsed(e){e===E.dE.WPO_CLOSE?this.saveTsCollapsed(E.QO.WPO_CLOSED):e===E.dE.WPO_OPEN?this.saveTsCollapsed(E.QO.WPO_OPENED):e===E.dE.MANUAL&&this.saveTsCollapsed(E.QO.MANUAL)}saveTsCollapsed(e){M.L.savePreferenceSetting(E.nc.tscollapsed,{setting:E.nc.tscollapsed,source:"updatePrefTSCollapsed",timestamp:(new Date).getTime(),value:e})}onlyUpdateQuickLinksDisplaySetting(e){this.executeSettingsChange(h._9.quickLinksDisplaySetting,e)}}var ee=n(99551);class te{reduce(e,t){if(!e)return{...h.L_,contentSource:0,isLoadCompleted:!1,greetingEnabled:!0,openSettingsDialogFlyout:!1,inPageSearchBoxType:null,market:T.Al.Locale};if(!t)return e;let n;return ee.G.handleAction(t,a.V.pageLayoutStateLoaded,(t=>{n={...e,...t,isLoadCompleted:!0}})),ee.G.handleAction(t,g.J.updateLayout,(t=>{n={...e,...t}})),ee.G.handleAction(t,a.V.updateLocalStorage,(t=>{n={...e,sdCardSettings:t}})),ee.G.handleAction(t,a.V.loadLocalStorage,(t=>{n={...e,sdCardSettings:t}})),ee.G.handleAction(t,a.V.updatePrimaryAccountInfo,(t=>{n={...e,primaryAccountInfo:t}})),ee.G.handleAction(t,a.V.updateConfigData,(t=>{n={...e,configData:t}})),ee.G.handleAction(t,a.V.updateConfigDataChanged,(t=>{n={...e,inPageSearchBoxType:t}})),ee.G.handleAction(t,a.V.updateTopSitesQuickLinkEndMarginUsedPadding,(t=>{n={...e,topSitesQuickLinkEndMarginUsedPadding:t}})),ee.G.handleAction(t,a.V.marketUpdated,(t=>{n={...e,market:t}})),ee.G.handleAction(t,a.V.updateNtpTheme,(t=>{n={...e,ntpTheme:t}})),ee.G.handleAction(t,a.V.updateWPOLayoutPromotion,(t=>{n={...e,isLayoutWPOPromoted:t}})),ee.G.handleAction(t,a.V.updateWPOTopsitesPromotion,(t=>{n={...e,isTopsitesWPOPromoted:t}})),ee.G.handleAction(t,a.V.updateWPOLayoutPromotionSource,(t=>{n={...e,promotionSource:t}})),ee.G.handleAction(t,a.V.updateWPOPromotionCoachMark,(t=>{n={...e,coachmark:t}})),n||e}}var ne=n(59489);const ie={experienceConfigSchema:{}}},57042:function(e,t,n){"use strict";var i;n.d(t,{F:function(){return i}}),function(e){e.Adult="adult",e.Enterprise="enterprise",e.Kids="kids"}(i||(i={}))},14269:function(e,t,n){"use strict";var i;n.d(t,{Q:function(){return i}}),function(e){e.Android="android",e.Ios="ios",e.Linux="linux",e.Macos="macos",e.Windows="windows",e.Xbox="xbox"}(i||(i={}))},49595:function(e,t,n){"use strict";n.d(t,{GB:function(){return d},Km:function(){return l},Oq:function(){return f},Sp:function(){return m},Wc:function(){return p},_d:function(){return u},cm:function(){return g},e_:function(){return y},kJ:function(){return c},oH:function(){return v},r7:function(){return a},yG:function(){return s},yL:function(){return h}});var i=n(12184);const r=i.z.Alert,o={build:""};function a(e){Object.assign(o,e)}const s={id:22010,severity:r,pb:o},c={id:22011,severity:r,pb:o},d={id:22012,severity:r,pb:o},l={id:22014,severity:i.z.Critical,pb:o},u=(i.z.NoAlert,{id:22021,severity:r,pb:o}),p=(i.z.NoAlert,i.z.NoAlert,i.z.NoAlert,i.z.NoAlert,i.z.NoAlert,{id:22027,severity:i.z.Critical,pb:o}),h=(i.z.Critical,i.z.Critical,{id:22031,severity:r,pb:o}),g={id:22032,severity:r,pb:o},m={id:22033,severity:r,pb:o},f={id:22034,severity:r,pb:o},v={id:22050,severity:r,pb:o},y={id:22051,severity:i.z.NoAlert,pb:o};i.z.NoAlert,i.z.NoAlert,i.z.HighImpact},60826:function(e,t,n){"use strict";n.d(t,{id:function(){return i},ks:function(){return o},pA:function(){return r}});const i="MSCC",r="MUID",o="eupubconsent-v2"},78790:function(e,t,n){"use strict";n.d(t,{e:function(){return r},n:function(){return i}});const i="consent-banner-container",r="onetrust-sdk"},76379:function(e,t,n){"use strict";n.d(t,{C:function(){return i},H:function(){return r}});const i="consent.onetrust",r="widgetHost.cookieConsent"},28467:function(e,t,n){"use strict";var i;n.d(t,{i:function(){return i}}),function(e){e.MSCCBanner="mscc",e.OneTrustBanner="onetrust",e.WidgetHost="widgethost",e.None="none"}(i||(i={}))},68054:function(e,t,n){"use strict";var i;n.d(t,{_:function(){return i}}),function(e){e[e.Unknown=0]="Unknown",e[e.Required=1]="Required",e[e.NotRequired=2]="NotRequired"}(i||(i={}))},15665:function(e,t,n){"use strict";var i;n.d(t,{o:function(){return i}}),function(e){e.Essential="ES",e.Advertising="AD",e.SocialMedia="SM",e.ThirdPartyAnalytics="AL"}(i||(i={}))},60020:function(e,t,n){"use strict";var i;n.d(t,{Q:function(){return i}}),function(e){e.C0001="C0001",e.C0002="C0002",e.C0003="C0003",e.C0004="C0004"}(i||(i={}))},13583:function(e,t,n){"use strict";var i;n.d(t,{f:function(){return i}}),function(e){e.Lax="lax",e.Strict="strict",e.None="none"}(i||(i={}))},34631:function(e,t,n){"use strict";n.d(t,{hI:function(){return p},iF:function(){return u},o4:function(){return d},rv:function(){return l}});var i=n(78790),r=n(60826),o=n(88826),a=n(7476),s=n(31558),c=n(19464);function d(){return(0,s.N)()&&null!=document.getElementById(i.n)}function l(){return d()&&null===(0,c.ej)(r.id)}function u(){return(0,s.N)()&&null!=document.getElementById(i.e)}function p(){if(!(0,s.N)())return!!window.__tcfapi&&null===(0,c.ej)(r.ks);let e;try{e=JSON.parse(document.head.getAttribute("data-client-settings"))}catch(e){(0,o.H)(a.GQD,"")}const{locale:t={},geo_country:n,geo_subdivision:i}=e||{},{language:d="",market:l=""}=t;return("ca"!==l.toLowerCase()||"fr"!==d.toLowerCase()&&"en"!==d.toLowerCase()||"CA"!==n||"Quebec"===i)&&(u()&&null===(0,c.ej)(r.ks))}},43438:function(e,t,n){"use strict";n.d(t,{A:function(){return d},U:function(){return i}});var i,r=n(291),o=n(55524),a=n(68054),s=n(59967);!function(e){e[e.Initialized=1]="Initialized",e[e.CookieConsentProvider=2]="CookieConsentProvider",e[e.CookieConsentStatus=3]="CookieConsentStatus",e[e.ActiveCookieCategories=4]="ActiveCookieCategories"}(i||(i={}));const c=Symbol("cookieManagementState"),d=(0,r.h)({getInstance:()=>o.Gq.get(c,(()=>{const e=new s.v("CookieManagementStateKey");return e.set(i.Initialized,!1),e.set(i.CookieConsentStatus,a._.Unknown),e}))})},35607:function(e,t,n){"use strict";n.d(t,{Q:function(){return p}});var i=n(28467),r=n(68054),o=n(76379),a=n(15665),s=n(60020);const c={[s.Q.C0001]:a.o.Essential,[s.Q.C0002]:a.o.Advertising,[s.Q.C0003]:a.o.SocialMedia,[s.Q.C0004]:a.o.ThirdPartyAnalytics};var d=n(43438),l=n(34631),u=n(31558);function p(e){if(d.A.get(d.U.Initialized))return;let t=i.i.None,n=r._.NotRequired;(0,u.N)()&&(e&&e.required?(t=i.i.WidgetHost,n=e.categories?r._.NotRequired:r._.Required,h(e.categories),window.addEventListener(o.H,(e=>h(e.detail)))):(0,l.o4)()?(t=i.i.MSCCBanner,n=(0,l.rv)()?r._.Required:r._.NotRequired,n===r._.Required?d.A.set(d.U.ActiveCookieCategories,[a.o.Essential]):d.A.set(d.U.ActiveCookieCategories,[...Object.values(a.o)])):(0,l.iF)()&&(t=i.i.OneTrustBanner,n=(0,l.hI)()?r._.Required:r._.NotRequired,g(),window.addEventListener(o.C,g))),d.A.set(d.U.CookieConsentStatus,n),d.A.set(d.U.CookieConsentProvider,t),d.A.set(d.U.Initialized,!0)}function h(e){const t=e&&Object.keys(e).filter((t=>Object.values(a.o).includes(t)&&1===e[t]))||new Array;t.includes(a.o.Essential)||t.unshift(a.o.Essential),d.A.set(d.U.ActiveCookieCategories,t)}function g(){const e=window.OnetrustActiveGroups,t=e&&e.trim().split(",").filter((e=>{const t=e&&e.trim();return Object.values(s.Q).includes(t)})).map((e=>{const t=e.trim();return c[t]}))||new Array;t.includes(a.o.Essential)||t.unshift(a.o.Essential),d.A.set(d.U.ActiveCookieCategories,t)}},26343:function(e,t,n){"use strict";n.d(t,{HJ:function(){return i},fY:function(){return o},m0:function(){return r}});const i=["at-bing","elt","eupubconsent-v2","lt","AL","ALS","MSNRPSSecAuth","OSAT"],r=[";",","," "],o=/[;," "]/},19464:function(e,t,n){"use strict";n.d(t,{ej:function(){return f},jG:function(){return v},aW:function(){return y},sq:function(){return S}});var i=n(60826),r=n(28467),o=n(68054),a=n(15665);const s={[a.o.Essential]:["AL","ALS","AL_ANON","AL_APP_ANNON","AL_STATE","ANON","ANONCKNM","APP_ANON","APP_TWID","APP_WID","BFB","BFBUSR","DefaultLocation","Edgecac","FreWv","GalleryMode","MC1","MS0","MSCC","MSFPC","MSPRequ","MUID","MUIDB","MicrosoftApplicationsTelemetryDeviceId","OSAT","OSATE","OptanonAlertBoxClosed","OptanonConsent","OvrlyTrf","PreferencesMsn","RC","RUM","RecentStocks","SRCHD","SRCHHPGUSR","SRCHUID","SRCHUSR","Sample","TOptOut","TWID","UMH2E","WID","WLMMAC","_EDGE_S","_EDGE_V","_SS","_U","_cb","_cb_ls","_cb_svref","aace","ace","ahs-dismissed","ahs-installed","ahs-showings","ai_session","akmprotocol","aqp","at-bing","bcookie","bingimage","bwssoc","cac","cb","cbypass","cfrecnt","cg_new_visit_timestamp","cgusc","child","cmdisp","cmwr","currentaccount","ddlcur","df","ecasession","elt","eub","eupubconsent","eupubconsent-v2","gfrecnt","hidebn","i18next","ipt","ipv6","isdomainmigrated","lt","marketPref","mktreset","mniotd","mnmarket","msaOptout","msaoptout","nactk","no_read_more","ntps","numac","orfc_feeds","pbmi","pglt-edgeChromium-dhp","pglt-edgeChromium-ntp","pglt-microsoftNews-msnews","pglt-microsoftNews-startpage","pop","refresh-reason","sbc-dismissed","sbc-installed","sbc-showings","smd","sptmarket","theme","timeZoneOffsetInMins","uaid","videoCookiesLastCategory","videoerrorcount","vjsusrpref","w10rp","w10rpls"],[a.o.Advertising]:["BizoID","adslrid","dub_downlevel","eAPID","ecadprovider","ecisession","ecmsession","ecsession"],[a.o.SocialMedia]:["promptDisplayCount"],[a.o.ThirdPartyAnalytics]:[]};var c=n(13583),d=n(88826),l=n(7476),u=n(43438),p=n(78672),h=n(31558),g=n(26343),m=n(37413);function f(e){const t=(0,p.G8)();return(0,m.F)(t,e)}function v(){return f(i.pA)}function y(){return f(i.ks)}function S(e,t,n,i,p,m,f){try{if(!u.A.get(u.U.Initialized))return(0,h.N)()&&(0,d.H)(l.lIV,""),!1;if(void 0===n||n>0){if(!function(e){if(!(0,h.N)())return!1;const t=u.A.get(u.U.CookieConsentStatus),n=u.A.get(u.U.CookieConsentProvider),i=u.A.get(u.U.ActiveCookieCategories);let c=!1;switch(n){case r.i.MSCCBanner:case r.i.OneTrustBanner:case r.i.WidgetHost:return function(e,t){for(const n of t){if(s[n].includes(e))return!0}let n=!1;const i=Object.keys(s).filter((e=>!t.includes(a.o[e])));for(const t of i){if(s[t].includes(e)){n=!0;break}}n||(0,d.H)(l.sGX,`Attempting to write a cookie: "${e}" not present in the cookie category mapping.`);return!1}(e,i);default:c=t===o._.NotRequired,c||(0,d.H)(l.fU5,`Consent status should be '2' (NotRequired), but is set to '${t}'`)}return c}(e))return!1;if(null==t)return(0,d.H)(l.AvP,`Cookie value is being set to either 'undefined' or 'null'. cookie name: "${e}", cookie value: "${t}"`),!1;const i=typeof t;"string"!==i&&(t=JSON.stringify(t),(0,d.H)(l.bAs,`Cookie value is not of string type. observed type: "${i}". cookie name: "${e}"`));for(const n of g.m0)if(e.includes(n)||t.includes(n))return(0,d.H)(l.AvP,`Cookie name and/or value contains invalid character: '${n}'. cookie name: "${e}"`),!1;n>365&&(0,d.H)(l.Vwf,`Cookie expiration time: ${n} days is greater than suggested max duration of 365 days (1 year). cookie name: "${e}"`);const c=e.length+(t&&t.length||0);c>1e3&&!g.HJ.includes(e)&&(0,d.H)(l.HFn,`Cookie size: "${c} Bytes" is too big (> 1000 Bytes). cookie name: "${e}"`)}return function(e,t,n,i,r,o,a){let s;const d=[e,"=",t];if(n<0)s="Fri, 31 Dec 1999 23:59:59 GMT";else if(n){const e=new Date;e.setTime(e.getTime()+864e5*n),s=e.toUTCString()}s&&d.push(";expires=",s);i&&d.push(";domain=",i);r&&d.push(";path=",r);o&&d.push(";secure");a&&a!==c.f.Lax&&(d.push(";samesite=",a.toString()),a!==c.f.None||o||d.push(";secure"));document&&(document.cookie=d.join(""))}(e,t,n,i,p,m,f),!0}catch(t){return(0,d.H)(l.sX$,`trySetCookie() failed with error: "${t.message}". cookie name: "${e}"`),!1}}},75592:function(e,t,n){"use strict";var i;n.d(t,{w:function(){return i}}),function(e){e[e.Production=0]="Production",e[e.Local=1]="Local"}(i||(i={}))},56687:function(e,t,n){"use strict";function i(e,t){if(e instanceof Error){const n=e.toString();return t&&e.stack?`${n}, Stack: ${e.stack}`:n}return"string"==typeof e?e:function(e){try{return void 0===e?"undefined":JSON.stringify(e)}catch{return""}}(e)}function r(e){return e instanceof Error?e:new Error(i(e))}n.d(t,{g:function(){return r},n:function(){return i}})},37413:function(e,t,n){"use strict";function i(e,t){if(e){const n=new RegExp("\\b"+t+"\\s*=\\s*([^;]*)","i").exec(e);return n&&n.length>1?n[1]:null}return null}n.d(t,{F:function(){return i}})},76187:function(e,t,n){"use strict";function i(e){let t,n=!1;const i=function(){return n||(n=!0,t=e()),t};return i.cache={clear:()=>{n=!1,t=void 0}},i}n.d(t,{p:function(){return i}})},88975:function(e,t,n){"use strict";function i(e,t,n=!1){return!e||r(e,t)&&o(e,t)&&a(e,t)&&s(e,t)&&c(e,t)&&l(e,t,n)&&u(e,t)&&p(e,t)&&h(e,t)&&g(e,t)}function r(e,t){return!e.audienceMode||t.audienceMode===e.audienceMode}function o(e,t){if(!e.browser)return!0;if(!t.browser)return!1;const{browserType:n,version:i}=t.browser,{browserType:r,version:o}=e.browser;if(r&&r!==n)return!1;if(!o)return!0;if("string"==typeof o)return i===o;if("object"==typeof o){const e=parseInt(i);let t;for(t in o){const n=o[t];if(null!=n)switch(t){case"equals":if(e!==n)return!1;break;case"greaterThan":if(!(e>n))return!1;break;case"lessThan":if(!(e<n))return!1;break;case"notEquals":if(e===n)return!1;break;case"oneOf":if(-1===n.indexOf(e))return!1;break;default:return!1}}return!0}return!1}function a(e,t){return!e.deviceFormFactor||t.deviceFormFactor===e.deviceFormFactor}function s(e,t){return!e.domain||t.domain===e.domain}function c(e,t){return t.pageExperiments=t.pageExperiments||[],"string"!=typeof e.experimentId||0===Object.keys(e.experimentId).length||t.pageExperiments.indexOf(e.experimentId)>=0}function d(e,t){return 0===(e||"").localeCompare(t||"",void 0,{sensitivity:"accent"})}function l(e,t,n){const i=e.locale;if(!i)return!0;let r;return t.locale&&(r=n?t.locale.display:t.locale.content),!!r&&!(i.language&&!d(i.language,r.language)||i.market&&!d(i.market,r.market)||i.script&&!d(i.script,r.script))}function u(e,t){return function(e,t){if(!e)return!0;if(!t)return!1;if("string"==typeof e&&d(e,t))return!0;if("object"!=typeof e)return!1;const n=t.toLowerCase();if(e.startsWith&&!n.startsWith(e.startsWith.toLowerCase()))return!1;if(e.endsWith&&!n.endsWith(e.endsWith.toLowerCase()))return!1;if(e.equals&&!d(e.equals,t))return!1;if(e.notEquals&&d(e.notEquals,t))return!1;if(e.contains&&!n.includes(e.contains.toLowerCase()))return!1;if(e.oneOf&&-1===e.oneOf.indexOf(t))return!1;return!0}(e.ocid,t.ocid)}function p(e,t){return!e.os||t.os===e.os}function h(e,t){const n=e.pageType;if(!n)return!0;const i=t.pageType;if(!i)return!1;if("string"==typeof n)return n===i;if(n.exact&&n.exact.toUpperCase()===i.toUpperCase())return!0;if(n.segments){const e=n.segments,t=i.split("::");if(t&&t.length>0){for(const n in e){const i=parseInt(n),r=e[n];if(!r||isNaN(i)||"string"!=typeof r||i>=t.length||r.toUpperCase()!==t[i].toUpperCase())return!1}return!0}}return!1}function g(e,t){return!e.platform||t.platform===e.platform}n.d(t,{Ev:function(){return a},J4:function(){return i},K3:function(){return u},K4:function(){return o},Sh:function(){return d},Uc:function(){return r},W9:function(){return c},fb:function(){return l},hI:function(){return s},jF:function(){return g},oM:function(){return h},zu:function(){return p}})},34832:function(e,t,n){"use strict";function i(e){try{if(e)return JSON.parse(e)}catch(e){}return null}n.d(t,{d:function(){return i}})},66701:function(e,t,n){"use strict";var i;n.d(t,{n:function(){return i}}),function(e){const t={};e.loadExperience=async e=>{const n=t[e];if(!n)throw new Error(`Attempted to load unknown dynamic bundle "${e}". Make sure it's a registered dynamic experience bundle.`);return n()},e.registerExperience=(e,n)=>{t[e]=n},e.hasExperienceRegistered=e=>!!t[e]}(i||(i={}))},77036:function(e,t,n){"use strict";n.d(t,{U:function(){return Pe}});var i=n(42933),r=n(76733),o=n(7476),a=n(88826),s=n(21789),c=n(99035),d=n(3104),l=n(71778),u=n(9683),p=n(92100),h=n(29597),g=n(22140),m=n(54297),f=n(55524),v=n(291),y=n(78672),S=n(31558),C=n(30291),w=n(79022),b=n(13578),T=n(92170),k=n(7653),P=n(70956);class A extends Error{constructor(e,t){super(e),this.isNetworkFailure=t}}var I=n(23549);const E="-start",M="-end",x="CrsConfig",L="AkCrsConfig",R="FDCrsConfig",D={},F={};let O;function B(e){if(e.endsWith(E)){e=e.slice(0,e.length-6);const t={endMeasure:O&&O.startMeasure(e).endMeasure,startTime:performance.now()};D[e]=t}else if(e.endsWith(M)){if(e=e.slice(0,e.length-4),D[e]){const{endMeasure:t,startTime:n}=D[e],i=Math.round(performance.now()-n);return F[e]=i,t&&t(),{name:e,timeTaken:i}}}else;}var N=n(36941),_=n(75592);const U="feature-manifests",W="loc-manifests",H="feature-configs",$="loc-configs",q="default";const G=new class{constructor(){this._mocksEnabled=!1,this._shouldInitializeMockMgrConfig=!1,this._mockConfigDictionary={},this._mocksEnabled=this.areMocksEnabled(),this._shouldInitializeMockMgrConfig&&(this._mockConfigDictionary["MockManager/default"]="MockManager/default")}get mockConfigDictionary(){return this._mockConfigDictionary}get mocksEnabled(){return this._mocksEnabled}initialize(e){if(!e)return void this.addMockQspToDictionary();const t=[];if(new URLSearchParams((0,y.zp)()).getAll("mock").forEach((e=>{e.trim().split(",").forEach((e=>{t.indexOf(e)<0&&t.push(e)}))})),0===t.length)return;const n=e&&e.scenarios;for(const e in n)if(n[e]&&t.indexOf(e)>-1){n[e].forEach((e=>{const{experienceType:t,instanceSrc:n}=e.source.configLink,{experienceType:i,instanceSrc:r}=e.target.configRef;this._mockConfigDictionary[`${t}/${n}`]=`${i}/${r}`}))}this.addMockQspToDictionary()}areMocksEnabled(){const e=new URLSearchParams((0,y.zp)());return this._shouldInitializeMockMgrConfig=!!e.get("mock"),this._shouldInitializeMockMgrConfig||e.getAll("item").some((e=>/^mock:/.test(e)))}addMockQspToDictionary(){new URLSearchParams((0,y.zp)()).getAll("item").filter((e=>/^mock:/.test(e))).forEach((e=>{const[t,n]=e.split(":"),[i,r]=n.split("|");this._mockConfigDictionary[i]=r}))}},V=/^\d{8}\.\d+$/;let z="";function j(e,t){if(!e)return;const{experienceType:n,instanceSrc:i,sharedNs:r}=e,o=[t,n,i];return r&&o.push(r),o.map((e=>e||"")).join("/").toLowerCase()}function K(e){if(!e)return null;if(e.match("^shared/")){const[t,n,i,r]=e.split("/");return{experienceType:i,instanceSrc:r,sharedNs:n}}{const[t,n]=e.split("/");return{experienceType:t,instanceSrc:n}}}function Q(e){const t=new Set;if(e&&e.properties)try{J(e.properties,t)}catch(e){}return t}function J(e,t){const n=e.configRef;n&&n.experienceType&&t.add(n);for(const n of Object.values(e))"object"==typeof n&&n&&J(n,t)}function Y(e,t=!1){if(!e)return;const n=(t?q:e.instanceSrc)||q;return!e.sharedNs||t?`${e.experienceType}/${n}`:`shared/${e.sharedNs}/${e.experienceType}/${n}`}function Z(e,t){e&&e(t)}function X(e,t){return function(e){return e===H||e===U}(e)?ee(t&&t.feature):ee(t&&t.loc)}function ee(e){return e===_.w.Local}function te(e,t,n){let i=!1;const r=G.mocksEnabled&&G.mockConfigDictionary&&G.mockConfigDictionary[t];let o;r&&(t=r,i=!0),o=i?"mock":e===$?"dev/loc":"prod";return`${o}/${/^shared/.test(t)?t:`${n}/${t}`}`}var ne=n(49595);function ie(e,t,n){return{...e,message:t||e.message,pb:n?{...e.pb,customMessage:n}:e.pb}}class re{constructor(){this.idb=indexedDB}get supported(){return!!this.idb}get isGetAllAllowed(){return!(!IDBObjectStore.prototype||!IDBObjectStore.prototype.getAll)}_setIndexedDb(e){this.idb=e}_getIdbPromise(){return this.idbPromise}async getObject(e){let t;return await this.withIdbStore("readonly","getObject",(n=>{t=n.get(e)})),t.result}async getAll(){let e;return await this.withIdbStore("readonly","getAll",(t=>{e=t.getAll()})),e.result}async getAllObjects(){if(this.isGetAllAllowed)return this.getAll();const e=[];return await this.withIdbStore("readonly","getAllObjects",(t=>{t.openCursor().onsuccess=function(t){const n=t.target&&t.target.result?t.target.result:void 0;n&&n.value&&(e.push(n.value),n.continue())}})),e}async setObject(e,t){return await this.withIdbStore("readwrite","setObject",(n=>{n.put(t,e)}))}async removeObject(e){return await this.withIdbStore("readwrite","removeObject",(t=>{t.delete(e)}))}async clearObjects(){return await this.withIdbStore("readwrite","clearObjects",(e=>{e.clear()}))}async initializeIndexedDb(e=1,t="Default",n="MicrosoftNews",i=null){this.storeName=t,this.idbPromise=i||new Promise(((i,r)=>{const o=this.idb.open(n,e);o.onerror=()=>{r(o.error)},o.onsuccess=()=>{i(o.result)},o.onupgradeneeded=()=>{o.result.createObjectStore(t)}}))}async withIdbStore(e,t,n){return this.idbPromise.then((t=>new Promise(((i,r)=>{const o=t.transaction(this.storeName,e);o.oncomplete=()=>{i()},o.onabort=o.onerror=()=>r(o.error),n(o.objectStore(this.storeName))}))))}}var oe=n(9791);class ae{useConfigCaching(){const e=this.resolverEnvironment&&this.resolverEnvironment.configServiceParameters&&this.resolverEnvironment.queryParams;return!e||!e.enableConfigCaching||"true"===e.enableConfigCaching}constructor(e,t=!1){if(this.environment=e,this.enableConfigCaching=this.useConfigCaching(),this.stalenessCheckTimestamp=(new Date).getTime(),this.indexedDbMap=new Map,this.readConfigsFromIdb=(0,oe.Z)(this._readConfigsFromIdb),!e||!e.targetScope||!e.appType)throw new Error("ResolverEnvironment or targetScope or appType does not exist.");this.initializeIdb=(0,oe.Z)(this.initializeIdb),this.resolverEnvironment=e,this.indexedDb=new re,t&&this.initializeIdb()}tryGetConfigSync(e){if(e){const t=j(e,this.resolverEnvironment.appType);return this.indexedDbMap.get(t)}}async getConfig(e){if(!e)return;const t=j(e,this.resolverEnvironment.appType);return this.indexedDbMap.has(t)||await this.readConfigsFromIdb(),this.indexedDbMap.get(t)}async updateCache(e){e&&(e.forEach(((e,t)=>{if(e){const n={storageTimestamp:this.stalenessCheckTimestamp,configRefCacheKey:t,properties:e.properties};this.indexedDbMap.set(t,n)}})),await this.writeConfigMapToIdb())}async initializeIdb(){if(this.enableConfigCaching)try{const e=this.resolverEnvironment.configCacheProperties&&this.resolverEnvironment.configCacheProperties.idbConfigOpenPromise;await this.indexedDb.initializeIndexedDb(1,"Configurations_12","wwConfigs",e),this.indexedDbInitialized=!0,this.logMessage("IndexedDB initialized.")}catch(e){this.enableConfigCaching=!1,this.sendAppError(ie(ne._d,"Failed to init configs IndexedDB",e))}}async _readConfigsFromIdb(){if(this.enableConfigCaching){this.indexedDbInitialized||await this.initializeIdb();try{const e=this.generateIdbKey();let t,n;const{idbConfigLookup:i=null,idbConfigReadPromise:r=null}=this.resolverEnvironment.configCacheProperties||{};t=(i||{})[e],t?n="pre-initialized config cache":r?(n="pre-initialized IndexedDb read",await r,t=(i||{})[e]):(n="IndexedDb bulk read",t=await this.indexedDb.getObject(e)),t?(t.forEach((e=>{e.configRefCacheKey&&!this.isConfigStale(e.storageTimestamp)&&this.indexedDbMap.set(e.configRefCacheKey,e)})),this.logMessage(`readConfigsFromIdb: Configs in IndexedDB: ${t.size}. Configs in memory: ${this.indexedDbMap.size}. CacheSource: ${n}.`)):this.logMessage(`readConfigsFromIdb: Didn't find any config in IndexedDB. CacheSource: ${n}`)}catch(e){this.sendAppError(ie(ne.kJ,"IndexedDb Configs read failed",e))}}}async writeConfigMapToIdb(){if(this.enableConfigCaching&&this.indexedDbMap){this.indexedDbInitialized||await this.initializeIdb();try{const e=this.generateIdbKey();await this.indexedDb.setObject(e,this.indexedDbMap),this.logMessage("writeConfigMapToIdb: completed")}catch(e){this.sendAppError(ie(ne.yG,"Failed to write configMap to indexedDb",e))}}}generateIdbKey(){const{audienceMode:e="",locale:t={},pageType:n=""}=this.resolverEnvironment.targetScope||{},i=t.content||t,{language:r,market:o}=i;return[e,r,o,n,this.resolverEnvironment.appType||""].map((e=>e||"")).join("|").toLowerCase()}isConfigStale(e){return!e||this.stalenessCheckTimestamp-e>6048e5}sendAppError(e){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(e)}logMessage(e){this.resolverEnvironment.loggerCallback&&this.resolverEnvironment.loggerCallback(e)}}var se=n(12184),ce=n(16614);class de{get hadNetworkError(){return this._hadNetworkError}get shouldTryFallbackResolver(){return this._shouldTryFallbackResolver}get configServiceEnabled(){return this.enableConfigService}get configServiceQueryParams(){return this.configServiceParams}get crsActivityId(){return this._crsActivityId}constructor(e){if(this.resolverEnvironment=e,this.configMap=new Map,this.enableConfigService=!0,this.skipBelowTheFold=!1,this.configPromiseMap=new Map,this._shouldTryFallbackResolver=!1,this._hadNetworkError=!1,this._shouldUseCdnFallback=!1,this._initialCrsFetch=!0,this.getCacheKeyFromConfigRef=e=>j(e,this.resolverEnvironment.appType),!(e&&e.configServiceParameters&&e.appType&&e.configServiceParameters.configServiceBaseUrl&&e.targetScope))throw this.enableConfigService=!1,new Error("ResolverEnvironment or configServiceParameters or targetScope does not exist.");e.segmentPlugins&&e.segmentPlugins.skipBelowTheFold&&(this.skipBelowTheFold=!0)}async initialize(){this.shouldUseConfigService(),await this.setConfigServiceParams()}async setConfigServiceParams(){const{appType:e,configServiceParameters:t,targetScope:n}=this.resolverEnvironment,{maxDepth:i}=t;let{buildVersion:r}=t,o=`apptype=${e}`;o+=`&v=${r}`;const a=function(e,t){try{if(e&&e.pageExperiments&&e.pageExperiments.includes("prg-crsfdheadrem")&&"weather"!==t&&"finance"!==t){const t={...e};return t.pageExperiments=[],t}}catch(e){}return e}(n,e);o+="&targetScope="+JSON.stringify(a),i&&(o+=`&maxDepth=${i}`),this.skipBelowTheFold&&(o+="&skipBelowTheFold=true"),this.containsDevOnlyQueryParameters()&&(o+="&citem=dev:true&instance=Int1"),this.configServiceParams=o}sendPerfMarker(e){this.resolverEnvironment.perfMarkerCallback&&this.resolverEnvironment.perfMarkerCallback(e)}shouldUseConfigService(){const e=this.resolverEnvironment&&this.resolverEnvironment.configServiceParameters&&this.resolverEnvironment.queryParams;e&&e.enableConfigService&&(this.enableConfigService="true"===e.enableConfigService)}containsDevOnlyQueryParameters(){const e=this.resolverEnvironment.queryParams;if(!e)return!1;const t=e.item;if(t&&t.length>0)return!0;if(e.citem)return!0;return!!e.pcsonly}getConfigMap(){return this.configMap}tryGetConfigSync(e){if(e){const t=this.getCacheKeyFromConfigRef(e);return this.configMap.get(t)}}async getConfig(e){const{configServiceParameters:t,targetScope:n}=this.resolverEnvironment;if(!t||!n||!e)return Promise.reject(Error("Either of configServiceParameters, targetScope or configRef is not set correctly."));if(!this.enableConfigService)return void(this._shouldTryFallbackResolver=!0);const i=this.getCacheKeyFromConfigRef(e);if(this.configMap.has(i))return this.configMap.get(i);if(this.configPromiseMap.has(i))return this.configPromiseMap.get(i);const r=new Promise((async(t,n)=>{try{this._initialCrsFetch&&this.sendPerfMarker(`${L}${E}`),await this.getConfigTreeFromCrs(e),this._initialCrsFetch&&this.sendPerfMarker(`${L}${M}`),this._shouldTryFallbackResolver&&(this._shouldUseCdnFallback=!0,this._shouldTryFallbackResolver=!1,this._initialCrsFetch&&this.sendPerfMarker(`${R}${E}`),await this.getConfigTreeFromCrs(e),this._initialCrsFetch&&this.sendPerfMarker(`${R}${M}`),this.sendAppError(ie(ne.Sp,"CRS-AFD Retry",`Retryring to call CRS-AFD with ConfigRef ${this.getCacheKeyFromConfigRef(e)} because Akamai call had an error.`))),this._initialCrsFetch=!1,t(this.configMap.get(i))}catch(e){this.sendAppError(ie(ne.Km,`Exception in getConfig for ${i}`,e)),n(e)}finally{this.configPromiseMap.delete(i)}}));return this.configPromiseMap.set(i,r),r}async getConfigTreeFromCrs(e){let t="",n="";try{let i;const r=this.getCrsTimeout(),o=performance.now(),a=new Promise((n=>{i=setTimeout((()=>{const i={...ne.yL,pb:{...ne.yL.pb,errorBehavior:se.C.Fallback,isWebWorker:this.resolverEnvironment.isThisWebWorkerThread}};return this.sendAppError(ie(i,"CRS fetch timeout",`ConfigRef: ${this.getCacheKeyFromConfigRef(e)}. CrsUrl: ${t||""}, timeElapsed: ${performance.now()-o}`)),n(null)}),r)}));t=this.generateCrsUrl(e),!(0,S.N)()&&"edgeChromium"===this.resolverEnvironment.appType&&this.resolverEnvironment.targetScope.pageExperiments.includes("prg-earlycrs")&&(0,ce.Z)(e,{experienceType:"AppConfig",instanceSrc:"default"})&&f.Gq.set(le,{url:t});let s=this.tryGetConfigFromEarlyCrsPromise(e,t);s?n="Prefetch ":s=this.downloadFromCrs(t,r);const c=s.then((e=>(i&&clearTimeout(i),e))),d=await Promise.race([c,a]),l=d&&d.configs;if(!l||(0,b.Z)(l))return void(this._shouldTryFallbackResolver=!0);this._shouldTryFallbackResolver=!1,this.updateCacheUsingConfigs(l)}catch(i){this._shouldTryFallbackResolver=!0,this.sendAppError(ie(ne.GB,`${n}CRS fetch network error`,`ConfigRef: ${this.getCacheKeyFromConfigRef(e)}. CrsFetchNetworkError: ${this._hadNetworkError}. Error: ${i}. CrsUrl: ${t||""}`))}}updateCacheUsingConfigs(e){for(const t in e){const n=e[t];if(n&&n.properties){const e=this.getCacheKeyFromConfigRef(K(t));this.configMap.set(e,n)}}}setDownloadFromCrsBeforeNetwork(e){this.downloadFromCrsBeforeNetwork=e}async downloadFromCrs(e,t){if(this.downloadFromCrsBeforeNetwork){const t=await this.downloadFromCrsBeforeNetwork(e);if(t)return t}const{abortableFetchCallback:n,hostHeaderOverride:i}=this.resolverEnvironment,r="akmprotocol",o=f.Gq.get(r);if(o){const t=new URL(e);t.searchParams.append(r,o),e=t.toString()}const a=!(0,S.N)()&&i?{headers:{host:i}}:void 0;return(n?n(e,t,a):fetch(e)).then((t=>this.processCrsResponse(e,t))).catch((e=>this.handleCrsDownloadError(e)))}handleCrsDownloadError(e){throw this._shouldTryFallbackResolver=!1,this._hadNetworkError=!0,e}processCrsResponse(e,t,n=!1){if(this._crsActivityId=function(e){try{if(e&&"string"==typeof e){const t=e.indexOf("|");return e.substring(0,t)}}catch(e){}return""}(t.headers.get("x-ceto-ref")||"")||function(e){try{if(e&&"string"==typeof e)return e.match(/Ref A: [A-Z0-9]+/)[0].substring(7)}catch(e){}return""}(t.headers.get("x-msedge-ref")||"")||"empty",t.ok)return t.json();const{isWebWorkerPresent:i,isThisWebWorkerThread:r}=this.resolverEnvironment,o=t.headers.get("X-Crs-BuildVersion")||"",a=t.headers.get("X-Crs-Env")||"",s=t.headers.get("x-msedge-ref")||"",c=`Url: ${e}, CRS Version: ${o}, CRS Env: ${a}, isWebWorkerPresent: ${i}`,d={...ne.Wc,pb:{...ne.Wc.pb,userImpacting:!0,errorBehavior:se.C.Fallback,isWebWorker:r,isEarlyFetch:n,fetchNetworkResponse:{activityId:s,statusCode:t.status}}};return this.sendAppError(ie(d,"CRS returned non-200 response",c)),Promise.resolve()}generateCrsUrl(e){const t=e.sharedNs?`&sharedNs=${e.sharedNs}`:"",n=`?${`expType=${e.experienceType}&expInstance=${e.instanceSrc}${t}`}&${this.configServiceParams}`;return(this._shouldUseCdnFallback?new URL(n,this.resolverEnvironment.crsRetryBaseUrl):new URL(n,this.resolverEnvironment.configServiceParameters.configServiceBaseUrl)).toString()}sendAppError(e){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(e)}getCrsTimeout(){return(0,S.N)()||this.resolverEnvironment&&this.resolverEnvironment.isThisWebWorkerThread?1e4:3e3}tryGetConfigFromEarlyCrsPromise(e,t){if(!(0,S.N)())return null;const{crsPromise:n,crsRequestData:i}=window,r=null==i?void 0:i.url;return n&&r&&(0,ce.Z)(e,{experienceType:"AppConfig",instanceSrc:"default"})?(setTimeout((()=>{const e=new URL(r).search,n=new URL(t).search;n.indexOf(e)<0&&this.sendAppError(ie(ne.Oq,"Early CRS URL is different",[e,n].toString()))}),8e3),delete window.crsPromise,delete window.crsRequestData,n.then((e=>this.processCrsResponse(r,e,!0))).catch((e=>this.handleCrsDownloadError(e)))):null}}const le="crs-request-data";let ue=async(e,t,n,i)=>{if(!e)throw new Error("BlobFetcher.ts: Fetch Error: Relative Url is null or undefined.");const r=X(t,n)?"https://localhost.msn.com:9000/"+e:z+e.toLowerCase(),o=void 0,a=i?i(r,1e4,o):fetch(r);let s;return s=i?a.then((e=>{if(e.ok)return e.json();return i(r,1e4,o).then((e=>{if(e.ok)return e.json();throw new Error(`Non-200 response, failed to fetch 2nd time, Status: ${e.status}, StatusText: ${e.statusText}, fetch url: ${r}`)}))})).catch((e=>{throw new Error(`BlobFetcher.ts: Fetch Error: fetch url: ${r}, error: ${e}.`)})):a.then((e=>{if(e.ok)return e.json();throw new Error(`Non-200 response, Status: ${e.status}, StatusText: ${e.statusText}, fetch url: ${r}`)})).catch((e=>{throw new Error(`BlobFetcher.ts: Fetch Error: fetch url: ${r}, error: ${e}.`)})),s},pe=(0,oe.Z)(ue);class he{constructor(e,t,n){this.failedConfigIndexFetches=[],this.appType=e,this.configOrigins=t,this.fetchAndParseConfigIndex=(0,oe.Z)(this.fetchAndParseConfigIndex,((...e)=>e.join("/"))),this.resolverEnvironment=n}async fetchAndParseConfigIndex(e,t,n){const i=X(e,this.configOrigins);if(!n&&!i)return;const r=i?`${te(e,t,this.appType)}/index.json`:`${e}/${t}/index.json/${n}`;try{const t=this.resolverEnvironment&&this.resolverEnvironment.abortableFetchCallback;return await pe(r,e,this.configOrigins,t)}catch(e){i||this.failedConfigIndexFetches.push(e)}}getFailedConfigIndexFetches(){return this.failedConfigIndexFetches}}class ge{constructor(e,t,n){this.failedConfigFetches=[],this.appType=e,this.configOrigins=t,this.fetchAndParseConfig=(0,oe.Z)(this.fetchAndParseConfig,((...e)=>e.join("/"))),this.resolverEnvironment=n}async fetchAndParseConfig(e,t,n,i){const r=X(e,this.configOrigins);if(!i&&!r)return;const o=r?`${te(e,t,this.appType)}/${n}`:`${e}/${t}/${n}/${i}`;try{const t=this.resolverEnvironment&&this.resolverEnvironment.abortableFetchCallback;return await pe(o,e,this.configOrigins,t)}catch(e){r||this.failedConfigFetches.push(e)}}getFailedConfigFetches(){return this.failedConfigFetches}}class me{constructor(e,t,n){this.manifestsMap=new Map,this.appType=e,this.configOrigins=t,this.resolverEnvironment=n}async fetchAndParseManifest(e,t){if(X(e,this.configOrigins))return;const n=`${e}/${this.appType}/${t}.json`;if(!this.manifestsMap.has(e))try{const t=this.resolverEnvironment&&this.resolverEnvironment.abortableFetchCallback,i=await pe(n,void 0,void 0,t);if(this.manifestsMap.set(e,i),(0,b.Z)(i))throw new Error(`Manifest response is ok but empty or undefined, relative url: ${n}`)}catch(t){throw this.manifestsMap.set(e,null),new Error(`ManifestService.ts: ${t}`)}return this.manifestsMap.get(e)}getConfigIndexHashedFileName(e,t){if(X(t,this.configOrigins))return;const n=`${e}/index.json`;return this.getFromManifest(n,t)}getConfigHashedFileName(e,t,n){if(X(n,this.configOrigins))return;const i=`${e}/${t}`;return this.getFromManifest(i,n)}getFromManifest(e,t){if(!this.manifestsMap||!this.manifestsMap.get(t))return;const n=this.manifestsMap.get(t);if(n&&n.fileHashes)return n.fileHashes[e.toLowerCase()];throw new Error(`ManifestService.ts: Manifest is defined but does not have fileHashes: ${e}: cacheKey snippet of manifest: ${JSON.stringify(n).substr(0,100)}`)}}function fe(e,t){if((0,T.Z)(e))return t}var ve=n(88975);class ye{constructor(e){if(!(e&&e.configServiceParameters&&e.appType&&e.configServiceParameters.configServiceBaseUrl&&e.targetScope))throw new Error("SingleConfigResolver.ts: ResolverEnvironment or configServiceParameters or targetScope does not exist.");this.appType=e.appType,this.targetScope=e.targetScope,this.buildVersion=e.configServiceParameters.buildVersion,this.configOrigins=e.configOrigins,this.manifestService=new me(this.appType,this.configOrigins,e),this.configIndexService=new he(this.appType,this.configOrigins,e),this.configService=new ge(this.appType,this.configOrigins,e)}async resolveConfigAsync(e){const t=Y(e),n=Y(e,!0);this.buildNumber=this.tryGetBuildNumber()||await async function(e,t){let n;const i=new URLSearchParams((0,y.zp)()).getAll("item"),r=i?i.find((e=>e&&0===e.indexOf("spalink:"))):void 0;r&&(n=r.replace("spalink:","").replace("/debug",""));const o=n||e;if(!o||!t||"latest"!==o&&"rolling"!==o&&!V.test(o))throw new Error(`Arguments are incorrect. Check buildVersion: ${o} appType: ${t}`);const a=`https://assets.msn.com/bundles/v1/${t}/${o}/v?${(new Date).getTime()}`;let s;try{if(s=await fetch(a),!s||!s.ok)throw new Error(`Response not OK, Status: ${s.status}, StatusText: ${s.statusText}`);return(await s.text()).trim()}catch(e){throw new Error(`getBuildNumberAsync Fetch Url: ${a}, ${e}`)}}(this.buildVersion,this.appType);const i=this.manifestService.fetchAndParseManifest(U,this.buildNumber),r=this.manifestService.fetchAndParseManifest(W,this.buildNumber);await Promise.all([i,r]);const o=this.manifestService.getConfigIndexHashedFileName(t,U),a=this.manifestService.getConfigIndexHashedFileName(n,W),s=this.configIndexService.fetchAndParseConfigIndex(H,t,o),c=this.configIndexService.fetchAndParseConfigIndex($,n,a),d=await Promise.all([s,c]).then((e=>({featureIndex:e[0],localizationIndex:e[1]}))),l=d.featureIndex&&d.featureIndex.configs||void 0,u=d.localizationIndex&&d.localizationIndex.configs||void 0,p=[];if(this.fetchMathingConfigs(p,l,U,H,t),this.fetchMathingConfigs(p,u,W,$,n),this.fetchMathingConfigs(p,u,W,$,n,!0),0==p.length)return;return function(e){if(!e||e.length<1)return null;const t=e[0];for(let n=1;n<e.length;n++)t.properties=(0,C.Z)(t.properties,e[n].properties,fe);return t}((await Promise.all(p).then((e=>e))).filter((e=>null!=e)))}fetchMathingConfigs(e,t,n,i,r,o=!1){t&&0!=t.length&&t.forEach((t=>{if((0,ve.J4)(t.targetScope,this.targetScope,o)){const o=t.src,a=this.manifestService.getConfigHashedFileName(r,o,n);e.push(this.configService.fetchAndParseConfig(i,r,o,a))}}))}getFailedFetches(){const e=[],t=this.configService.getFailedConfigFetches();t.length>0&&e.push(...t);const n=this.configIndexService.getFailedConfigIndexFetches();return n.length>0&&e.push(...n),e}get buildNumber(){return this._buildNumber}set buildNumber(e){this._buildNumber=e}tryGetBuildNumber(){return this.buildNumber?this.buildNumber:this.configOrigins.feature===_.w.Local&&this.configOrigins.loc===_.w.Production?null:this.buildVersion}}class Se{constructor(e){if(this.mergedConfigMap=new Map,this.mockManagerInitialized=!1,!(e&&e.configServiceParameters&&e.appType&&e.configServiceParameters.configServiceBaseUrl&&e.targetScope))throw new Error("Resolver.ts: ResolverEnvironment or configServiceParameters or targetScope does not exist.");this.resolverEnvironment=e,this.appType=e.appType,this.singleConfigResolver=new ye(e)}async getConfig(e,t=!1){const n=j(e,this.appType),{mockManager:i}=this.resolverEnvironment;if(i.mocksEnabled&&!this.mockManagerInitialized){this.mockManagerInitialized=!0;const e={scenarios:(await this.getConfig({experienceType:"MockManager",instanceSrc:"default"})).properties.scenarios};i.initialize(e)}if(!this.mergedConfigMap.has(n)){await this.getConfigRecursive(e,t);const n=this.singleConfigResolver.getFailedFetches();n.length>0&&n.forEach((e=>{Z(this.resolverEnvironment.appErrorCallback,{...ne.e_,message:"Fetch failed for a config",pb:{...ne.e_.pb,customMessage:`Failed fetch url: ${e}`}})}))}return this.mergedConfigMap.get(n)}getConfigMap(){return this.mergedConfigMap}async getConfigRecursive(e,t=!1){const n=j(e,this.appType);if(n&&!this.mergedConfigMap.has(n))try{const i=await this.singleConfigResolver.resolveConfigAsync(e);if(this.mergedConfigMap.set(n,i),t){const e=Q(i);if(0==e.size)return;const n=[];e.forEach((e=>{n.push(this.getConfigRecursive(e,t))})),await Promise.all(n)}}catch(e){Z(this.resolverEnvironment.appErrorCallback,{...ne.oH,message:"Exception in getConfig.",pb:{...ne.oH.pb,customMessage:`CacheKey: ${n} / Error: ${e}`}})}}}class Ce{constructor(e){if(this.resolverEnvironment=e,this.fallbackResolverCalled=!1,this.crsInitComplete=!1,this.enableIdbCaching=!1,this.configResolverMap=new Map,this.configResolverMapSet=!1,!e||!e.targetScope)throw new Error("ResolverEnvironment or targetScope does not exist.");var t,n;this.configService=new de(e),this.enableIdbCaching=(t=e.targetScope.pageExperiments)&&t.indexOf("prg-gitconfigs-t")>-1,this.configCache=new ae(e,this.enableIdbCaching),n=e.configStaticFallbackBaseUrl,z=n,this.fallbackResolver=new Se(e)}get crsHadNetworkError(){return this.configService.hadNetworkError}get crsActivityId(){return this.configService.crsActivityId}tryGetConfigSync(e){if(e)return this.configService.tryGetConfigSync(e)||this.tryToGetFromInMemory(e)||this.configCache.tryGetConfigSync(e)}async getConfig(e){if(this.resolverEnvironment.configOrigins.feature===_.w.Local||this.resolverEnvironment.mockManager.mocksEnabled){const t="function"==typeof this.resolverEnvironment.loggerCallback;try{const n=await this.fallbackResolver.getConfig(e);return n?Promise.resolve(n):(t&&this.resolverEnvironment.loggerCallback(`ConfigResolver: Failed to fetch configs from local configs. Config: ${j(e)}`),Promise.resolve(null))}catch(e){return t&&this.resolverEnvironment.loggerCallback(`${e.message}`),Promise.reject(e)}}if(!this.configResolverMapSet&&null!=e&&e.properties){const t=e.properties;t&&t.configs&&(this.setConfigResolverMap(t.configs),this.configResolverMapSet=!0)}const t=this.configResolverMapSet&&e?this.tryToGetFromInMemory(e):null;if(t)return t;this.crsInitComplete||(this.sendPerfMarker(`${x}${E}`),await this.initiateConfigService(),this.crsInitComplete=!0,this.sendPerfMarker(`${x}${M}`)),this.configResolverMapSet&&this.crsInitComplete&&this.sendAppError(ie(ne.cm,"Fallback to network call",`Config Ref ${this.getCacheKeyFromConfigRef(e)} not found in prefetched configs. Network Fallback`));const n=e?this.configService.tryGetConfigSync(e):null;if(n)return n;const i=new Promise((async t=>{if(this.configService.shouldTryFallbackResolver){this.fallbackResolverCalled=!0;const n=await this.fallbackResolver.getConfig(e);if(n)return t(n)}else{const n=await this.configService.getConfig(e);if(n)return t(n)}return t(null)})),r=new Promise((async t=>{if(this.enableIdbCaching){const n=await this.configCache.getConfig(e);if(n)return t(n)}}));return Promise.race([r,i])}getConfigServiceObject(){return this.configService}async initiateConfigService(){await this.configService.initialize(),await this.configService.getConfig({experienceType:"AppConfig",instanceSrc:"default"})}sendPerfMarker(e){this.resolverEnvironment.perfMarkerCallback&&this.resolverEnvironment.perfMarkerCallback(e)}setConfigResolverMap(e){for(const t in e){const n=e[t];if(n&&n.properties){const e=this.getCacheKeyFromConfigRef(K(t));this.configResolverMap.set(e,n)}}}tryToGetFromInMemory(e){const t=this.getCacheKeyFromConfigRef(e);return this.configResolverMap.get(t)}getCacheKeyFromConfigRef(e){return j(e,this.resolverEnvironment.appType)}sendAppError(e){this.resolverEnvironment.appErrorCallback&&this.resolverEnvironment.appErrorCallback(e)}}const we=864e5,be="__ResolverInstance__";class Te{constructor(){this.currentTargetScope=s.jG.CurrentRequestTargetScope,this.configMap=new Map,this.env=s.jG.Environment||c.q.prod,this.promiseMap=new Map,this.refreshServerCachePromiseMap=new Map,this.stalenessCheckTimestamp=(new Date).getTime(),this.isMultiConfigRetrievalEnabled=!1,this.localOverrideMap={},this.peregrineFlightsKey="prgflights",this.isInitialized=!1,this.initializeCaching()}static getInstance(){return f.Gq.get(be,(()=>new Te))}static resetResolverInstance(){const e=new Te;f.Gq.set(be,e),ke=(0,v.h)(Te)}getConfigResolver(){return this.configResolver}initializeCaching(){this.cdnConfigBaseUrl=s.jG.ConfigRootUrl||s.jG.EnvironmentConfigUrl,this.configServiceBaseUrl=s.jG.ConfigServiceBaseUrl,this.resolverErrors=[],this.configTimings=[],this.useWebWorkerToCache=l.yb;const e=s.jG.EnableCMSPPEConfigs;this.useServerCache=null!==u.o&&!e,this.setTargetScopeAndConfigServiceParams()}setTargetScopeAndConfigServiceParams(){const e=s.jG.EnableCMSPPEConfigs;this.currentTargetScope=this.currentTargetScopeOverride||s.jG.CurrentRequestTargetScope,!s.jG.IsGitConfigs&&this.currentTargetScope&&(this.currentTargetScope.locale=s.jG.LocaleContentMarket);const{AppType:t,WidgetAttributes:n}=s.jG,i=n&&n.clientPerf&&n.clientPerf.shouldUsePWOnlyFlights||"distribution"===t,r=this.currentTargetScope&&(i?(0,k.Kd)(this.currentTargetScope.pageExperiments):(0,P.M)(this.currentTargetScope.pageExperiments));if(r&&r.length>0&&(this.peregrineFlights=r.join(",")),this.scopeWithPeregrineFlights={...this.currentTargetScope,domain:n&&(0,y.Td)()||this.currentTargetScope&&this.currentTargetScope.domain,pageExperiments:r},this.enableConfigService=this.useConfigService(),this.enableConfigService){this.configServiceParameters="?targetScope="+JSON.stringify(this.scopeWithPeregrineFlights),this.configServiceParameters+=`&apptype=${t}`;const{IsMultiConfigRetrievalEnabled:n,CacheBustingIdentifier:i}=s.jG;this.isMultiConfigRetrievalEnabled=n,this.isMultiConfigRetrievalEnabled&&(this.configServiceParameters+=`&maxDepth=${this.getConfigRetrievalMaxDepth()}`);const r=(0,S.N)()&&window._cbid||i;r&&(this.configServiceParameters+=`&cbid=${r}`),this.containsDevOnlyQueryParameters()&&(this.configServiceParameters+="&item=dev:true"),e&&(this.configServiceParameters+="&item=cms:ppe")}this.storageKey=this.generateKey()}initialize(e,t){if(this.isInitialized)return;var n;if(this.perfTimeline=(0,i.oA)("Resolver","Resolver",!0),n=this.perfTimeline,O=n,!s.jG.IsGitConfigs)return;const{_idbConfigOpenPromise:o=null,_idbConfigReadPromise:a=null,_idbConfigLookup:c=null}=(0,S.N)()?window:{},d={idbConfigOpenPromise:o,idbConfigReadPromise:a,idbConfigLookup:c},l={buildVersion:s.jG.BuildVersion,configServiceBaseUrl:s.jG.ConfigServiceBaseUrl.toString()},u=s.jG.CrsRetryBaseUrl,{pageExperiments:g}=this.currentTargetScope,m={appType:s.jG.AppType,configServiceParameters:l,targetScope:this.scopeWithPeregrineFlights,env:s.jG.Environment.toString(),featureFlags:s.jG.FeatureFlags,isThisWebWorkerThread:!1,isWebWorkerPresent:this.useWebWorkerToCache,queryParams:p.c.getParamsObj((0,y.zp)()),appErrorCallback:e,perfMarkerCallback:B,loggerCallback:r.k.log.bind(r.k),logObjectsCallback:r.k.logObjects.bind(r.k),isDebug:r.k.isDebug(),configCacheProperties:d,configOrigins:s.jG.ConfigOrigins,segmentPlugins:t,mockManager:G,crsRetryBaseUrl:u,disableInMemoryCache:s.jG.DisableInMemoryCache,useCachedApp:s.jG.UseCachedApp,crsDisableServerCache:s.jG.CrsDisableServerCache,abortableFetchCallback:g&&(g.includes("useabortfetch")||g.includes("prg-1sw-abtfetch"))||!(0,S.N)()?h.Sm:void 0,hostHeaderOverride:s.jG.HostHeaderOverride,configStaticFallbackBaseUrl:s.jG.ConfigStaticFallbackBaseUrl};this.configResolver=new Ce(m),this.isInitialized=!0}mergeConfig(e){if(!e||e.length<1)return null;const t=e[0];for(let n=1;n<e.length;n++)t.properties=(0,C.Z)(t.properties,e[n].properties,this.customizer);return t}resolveConfigIndex(e){if(!e)return null;const t=[];return e.configs.forEach((e=>{this.targetScopeMatched(e)&&t.push(e.href)})),e.overrideConfig&&g.b.stringHasData(e.overrideConfig.href)&&t.push(e.overrideConfig.href),t}targetScopeMatched(e){const t=e.targetScope;return!t||this.audienceModeMatched(t)&&this.browserTypeMatched(t)&&this.deviceTypeMatched(t)&&this.domainMatched(t)&&this.experimentMatched(t)&&this.marketMatched(t)&&this.osMatched(t)&&this.pageTypeMatched(t)&&this.platformMatched(t)}audienceModeMatched(e){return!e.audienceMode||this.currentTargetScope.audienceMode===e.audienceMode}browserTypeMatched(e){return!e.browser||!e.browser.browserType||!(!this.currentTargetScope.browser||this.currentTargetScope.browser.browserType!==e.browser.browserType||e.browser.version&&this.currentTargetScope.browser.version!==e.browser.version)}deviceTypeMatched(e){return!e.deviceFormFactor||this.currentTargetScope.deviceFormFactor===e.deviceFormFactor}domainMatched(e){return!e.domain||this.currentTargetScope.domain===e.domain}experimentMatched(e){return this.currentTargetScope.pageExperiments=this.currentTargetScope.pageExperiments||[],!!(!(0,w.Z)(e.experimentId)||(0,b.Z)(e.experimentId)||this.currentTargetScope.pageExperiments.indexOf(e.experimentId)>=0)}stringsEqualCaseInsensitive(e,t){return 0===(e||"").localeCompare(t||"",void 0,{sensitivity:"accent"})}marketMatched(e){const t=e.locale||e.locale;if(!t)return!0;const n=this.currentTargetScope.locale;return!(t.language&&!this.stringsEqualCaseInsensitive(t.language,n.language)||t.market&&!this.stringsEqualCaseInsensitive(t.market,n.market)||t.script&&!this.stringsEqualCaseInsensitive(t.script,n.script))}osMatched(e){return!e.os||this.currentTargetScope.os===e.os}pageTypeMatched(e){return!e.pageType||this.currentTargetScope.pageType===e.pageType}platformMatched(e){return!e.platform||this.currentTargetScope.platform===e.platform}customizer(e,t){if((0,T.Z)(e))return t}clearInternalState(){this.configMap.clear()}overrideCurrentRequestTargetScope(e){this.currentTargetScopeOverride=e,this.currentTargetScopeOverride&&(this.currentTargetScope=this.currentTargetScopeOverride)}overrideCurrentRequestEnvironment(e){this.env=e||c.q.prod}overrideConfig(e,t,n){if(this.env!==c.q.prod){const i="string"==typeof e?e:(0,d.B5)(e);this.localOverrideMap[i]={experienceType:t,properties:n,typeVersion:"1.0.0",_name:"index"}}}async getRootConfig(e){if(!s.jG.IsGitConfigs)return await this.getConfig(e);const t=await this.getEntryPointConfigRef();return await this.getConfig(t.configRef)}async getEntryPointConfigRef(){return(await this.getConfig({experienceType:"AppConfig",instanceSrc:"default"})).properties.rootExperience}getConfigSync(e){if(!e||!this.currentTargetScope||!s.jG.IsGitConfigs)return;const t=(0,d.B5)(e),n=t&&this.localOverrideMap[t];if(n)return n;const i=this.configResolver&&this.configResolver.tryGetConfigSync(e);return i?{experienceType:e.experienceType,properties:i.properties||{},typeVersion:"Git",_name:t}:void 0}async getConfig(e){if(!this.currentTargetScope)return Promise.reject(new Error(`getConfig: Invalid target scope when fetching config ${JSON.stringify(e)}`));const t=performance.now();if(s.jG.IsGitConfigs){if("string"==typeof e){const t="Invalid config Id for Git configs flight";return this.resolverErrors.push({...o.lu7,message:t,pb:{...o.lu7.pb,userImpacting:!0,customMessage:e}}),Promise.reject(new Error(`${t}: ${e}`))}if(!this.configResolver){const t="Invalid configResolver object for Git configs flight";return this.resolverErrors.push({...o.ASE,message:t,pb:{...o.ASE.pb,userImpacting:!0,customMessage:JSON.stringify(e)}}),Promise.reject(new Error(`${t}: ${JSON.stringify(e)}`))}const n=(0,d.B5)(e),i=this.localOverrideMap[n];if(i)return i;const r=this.perfTimeline&&this.perfTimeline.startMeasure("config",n).endMeasure;let a,s;try{s=this.configResolver.tryGetConfigSync(e);let n=s;if(!n){this.addConfigTiming(e.experienceType,t,"network"),n=await this.configResolver.getConfig(e);const i=this.configResolver.crsActivityId;i&&I.M0.addOrUpdateCustomProperty("crsActivityId",i)}return n?a={experienceType:e.experienceType,properties:n.properties||{},typeVersion:"Git",_name:(0,d.B5)(e)}:Promise.reject(new A(`Could not fetch Git config id ${JSON.stringify(e)}`,this.configResolver.crsHadNetworkError))}finally{if(r){r({customSuffix:`${n}-${(s?"memory":a&&"network")||"error"}`})}}}const n=e;if(!n||!(0,w.Z)(n)||(0,b.Z)(n))throw new Error("getConfig: Invalid relativeUrl");const i=this.localOverrideMap[n];if(i)return i;const c=this.getCacheKey(n),l=this.configMap.get(c);if(l)return this.addConfigTiming(l.experienceType,t,"cache"),l;const p=this.promiseMap.get(c);if(p)return p;let h=!1;const g=this.perfTimeline&&this.perfTimeline.startMeasure("config",n).endMeasure;let m,f;const v=new Promise((async(e,i)=>{try{if(this.useServerCache){let i=!1,s=!1;const d=await u.o.has(c);if(d){const o=await u.o.get(c),a=o?JSON.parse(o):null;a?(this.configTimings.push({experienceType:a.experienceType,cacheFetchDuration:performance.now()-t}),s=!!a.relatedConfigIndexHref,h=!0,this.promiseMap.delete(c),e(a),this.isServerCacheConfigStale(a.storageTimestamp)&&await this.updateServerCache(n,a)):(r.k.log(`Resolver: cacheKey=${c} Undefined from server cache`),i=!0)}if(r.k.logObjects({serverCacheGetConfig:{cacheKey:c,isHeadConfig:s,isCached:d,hasCacheError:i}}),d&&i){const e="Sever Cache key exists but server cache is undefined. Usually due to timeout when server cache IPC is busy.",t=`cacheKey=${c}`,n=new Error(e);throw(0,a.H)(o.pay,e,void 0,{...o.pay.pb,customMessage:t}),n}if(d)return;const l=this.getConfigFromNetwork(n),p=(await l).get(c);m=p.experienceType,this.addConfigTiming(m,t,f="network"),e(p)}else{const i=(await await this.getConfigFromNetwork(n)).get(c);m=i.experienceType,this.addConfigTiming(m,t,f="network"),e(i)}}catch(e){this.resolverErrors.push({...o.Sp_,message:"Exception in getConfig",pb:{...o.Sp_.pb,customMessage:`Relative Url: ${n}. Error ${e.message||e}`}}),i(e)}finally{h=!0,this.promiseMap.delete(c),g&&g({customSuffix:`${m}-${n}-${f}`})}}));return h||this.promiseMap.set(c,v),v}async getConfigFromNetwork(e,t=!1){const n=this.getCacheKey(e),i=new Map;if(this.enableConfigService){const s=this.removeCmsPathFromRelativeUrl(e)+this.configServiceParameters;try{if(this.isMultiConfigRetrievalEnabled){const t=await this.downloadFile(new URL(`${s}${this.configServiceBaseUrl.search}`,this.configServiceBaseUrl),!0);if(t&&t.rootConfigIndexId&&t.configs){const n=Object.keys(t.configs).map((e=>t.configs[e]));for(const t of n)if(t&&t.configIndexHref){const o=t.configIndexHref,a=o===e;await this.addConfigToConfigMap(o,t,a?n:null),i.set(this.getCacheKey(o),t),(0,S.N)()&&r.k.log(`Resolver: ${o} config for ${t.experienceType} fetched from network using CRS url with multi config support.`)}return i}}else{const t=await this.downloadFile(new URL(`${s}${this.configServiceBaseUrl.search}`,this.configServiceBaseUrl),!0);if(t)return await this.addConfigToConfigMap(e,t),i.set(n,t),(0,S.N)()&&r.k.log(`Resolver: ${n} config for ${t.experienceType} fetched from network using CRS url.`),i}}catch(n){const i=`CRS fetch failed for ${e}.`,r=`CRS relative Url: ${s} Error: ${n}`;t?(0,a.H)(o.VI5,i,void 0,{...o.VI5.pb,customMessage:r}):this.resolverErrors.push({...o.GB_,message:i,pb:{...o.GB_.pb,customMessage:r}})}}if(i&&!i.has(n)){const t=await this.downloadMergeConfig(e);t&&(await this.addConfigToConfigMap(e,t),i.set(n,t),(0,S.N)()&&r.k.log(`Resolver: ${n} config fetched from network using Akamai url.`),this.enableConfigService&&this.resolverErrors.push({...o.CS7,message:"Configs served from CDN after CRS fetch failed",pb:{...o.CS7.pb,customMessage:`Relative Url: ${e} CRS Params: ${this.configServiceParameters}`}}))}return i}async addConfigToConfigMap(e,t,n){t.storageTimestamp=this.stalenessCheckTimestamp,t.configIndexHref=e;const i=this.getCacheKey(e);if(this.useServerCache){n&&(t.relatedConfigIndexHref=n.map((e=>e.configIndexHref)));const e=JSON.stringify(t);await u.o.set(i,e,we)}else this.configMap.set(i,t)}async updateServerCache(e,t){if(this.useServerCache)try{if(!this.refreshServerCachePromiseMap.get(e)){if(t.relatedConfigIndexHref){await Promise.all(t.relatedConfigIndexHref.map((n=>{const i=n===e?this.refreshConfigServerCache(e,t):this.refreshConfigServerCache(n);return this.refreshServerCachePromiseMap.set(n,i),i})));for(let e=0;e<t.relatedConfigIndexHref.length;e++)this.refreshServerCachePromiseMap.delete(t.relatedConfigIndexHref[e])}else{const n=this.refreshConfigServerCache(e,t);this.refreshServerCachePromiseMap.set(e,n),await n,this.refreshServerCachePromiseMap.delete(e)}this.getConfigFromNetwork(e)}}catch(t){const n=`Update server cache failed for ${e}.`,i=`Error: ${t}`;(0,a.H)(o.VI5,n,void 0,{...o.VI5.pb,customMessage:i})}}async refreshConfigServerCache(e,t){if(!this.useServerCache)return;const n=this.getCacheKey(e);if(!t){const e=await u.o.get(n);t=e?JSON.parse(e):null}if(t){t.storageTimestamp=this.stalenessCheckTimestamp;const e=JSON.stringify(t);await u.o.set(n,e,we)}}purgeRenderCacheUponConfigChanges(e){if(!e)try{(0,m.$o)().removeSubstringKeys("lastKnown_"),(0,m.$o)().removeSubstringKeys("timestamp_"),(0,m.$o)().removeSubstringKeys("keys_")}catch(e){this.resolverErrors.push({...o.GLL,message:"Failed to purge render cache when cached config and network config is not same.",pb:{...o.GLL.pb,customMessage:e}})}}async downloadMergeConfig(e){const t=await this.downloadFile(new URL(`${e}${this.cdnConfigBaseUrl.search}`,this.cdnConfigBaseUrl),!1),n=this.resolveConfigIndex(t),i=await this.downloadExperienceConfig(this.cdnConfigBaseUrl,n),r=this.mergeConfig(i);return r.experienceType=t.experienceType,r}async downloadExperienceConfig(e,t){const n=[];return t.forEach((t=>{n.push(this.downloadFile(new URL(`${t}${e.search}`,e),!1))})),await Promise.all(n)}async downloadFile(e,t){const n=(0,S.N)()?1e4:900,i=e.toString();return(0,h.Sm)(i,n).then((e=>{if(e.ok)return e.json();let n="";if(t){const t=e.headers.get("X-Crs-BuildVersion")||"";n=`msedge ref: ${e.headers.get("x-msedge-ref")||""} Status: ${e.status}, Status Text: ${e.statusText}, Url: ${i} and CRS Version: ${t}`,this.resolverErrors.push((0,a.Tr)(o.Wct,"CRS sent non-200 response",n))}else n=`Status: ${e.status}, Status Text: ${e.statusText}, Url: ${i}`,this.resolverErrors.push((0,a.Tr)(o.h6w,"Cdn config fetch received non-200 response",n));return Promise.resolve()}))}generateKey(){if((0,S.N)()){const{audienceMode:e="",locale:t={},pageType:n=""}=this.currentTargetScope||{},i=t.content||t,r=i?(0,N.p)(i):"",o=t.display||i;return[e,r,o?(0,N.p)(o):"",n,s.jG.AppType||""].map((e=>e||"")).join("|").toLowerCase()}{let{audienceMode:e="",browser:t=null,deviceFormFactor:n="",locale:i={},os:r={},pageType:o="",platform:a="",pageExperiments:c=null}=this.currentTargetScope||{};const d=i.content||i,{language:l,market:u}=d,{browserType:p="",version:h=""}=t||{};c=(0,P.M)(c);return[e,p,h,n,l,u,r,o,a,c?c.join():"",s.jG.AppType||""].map((e=>e||"")).join("|").toLowerCase()}}useConfigService(){const e=(0,y.zp)();if(e){const t=p.c.getQueryParameterByName("enableConfigService",e);if(t)return"true"===t.toLocaleLowerCase()}return s.jG.EnableConfigService}getConfigRetrievalMaxDepth(){const e=p.c.getQueryParameterByName("maxDepth",(0,y.l4)());return e||(s.jG.FeatureFlags&&s.jG.FeatureFlags.crsMaxDepth?s.jG.FeatureFlags.crsMaxDepth:"10")}containsDevOnlyQueryParameters(){const e=(0,y.zp)(),t=p.c.getQueryParameterByName("item",e);if(t&&t.length>0)return!0;const n=p.c.getQueryParameterByName("pcsonly",e);return!!(n&&n.length>0)}getResolverErrors(){return this.resolverErrors}async refreshConfigCache(){if(this.useWebWorkerToCache)try{const e=await(0,l.ot)({id:"refreshconfigs"});if(e&&e.fetched&&void 0!==e.payload&&null!==e.payload){const t=e.payload;this.purgeRenderCacheUponConfigChanges(t.configsEqual);try{this.peregrineFlights&&(0,m.$o)().setItem(this.peregrineFlightsKey,this.peregrineFlights)}catch(e){this.resolverErrors.push({...o.g_9,message:"Error writing prg flights to ",pb:{...o.g_9.pb,customMessage:e}})}if(t.liveCbId){const e=t.liveCbId.toString();this.writeCbidInLocalStorage(e);const n=s.jG.CacheBustingIdentifier||"",i=window._cbid||"";s.jG.IsGitConfigs||e===n&&e===i||this.resolverErrors.push({...o.N1V,message:"Different Cbid detected than configured.",pb:{...o.N1V.pb,customMessage:`PcsCbid = ${n}. HighestCbid = ${i}. LiveCbid = ${e}.`}})}}}catch(e){this.resolverErrors.push({...o.rP7,message:"refreshConfigCache error",pb:{...o.rP7.pb,customMessage:e}})}}isConfigStale(e){return!e||this.stalenessCheckTimestamp-e>2592e5}isServerCacheConfigStale(e){return!e||this.stalenessCheckTimestamp-e>3e5}removeCmsPathFromRelativeUrl(e){return e.replace("cms/api/amp/experienceConfigIndex/","")}getConfigServiceParameters(){return this.configServiceParameters}addConfigTiming(e,t,n){this.configTimings.push({experienceType:e,[n+"FetchDuration"]:performance.now()-t})}getConfigTimings(e={},t=!1){if(s.jG.IsGitConfigs)return void Object.assign(e,F);if(!this.configTimings)return;let n=0,i=0;for(const r of this.configTimings){const o=r.experienceType.toLowerCase(),a=r.cacheFetchDuration,c=r.networkFetchDuration;("entrypoint"===o||"river"===o||"contentpreview"===o||s.jG.IsDebug||t)&&(void 0!==c&&(e["ConfigFetch."+o]=Math.round(c)),void 0!==a&&(e["ConfigCache."+o]=Math.round(a))),void 0!==a&&(n+=a),void 0!==c&&(i+=c)}n&&(e["ConfigCache.All"]=Math.round(n)),i&&(e["ConfigFetch.All"]=Math.round(i))}setConfigTimingsObject(e){this.configTimings=e}getCacheKey(e){return null===e?null:this.removeCmsPathFromRelativeUrl(e)+"_"+this.storageKey}prgFlightsSameAsLocalStorage(){try{const e=(0,m.$o)().getItem(this.peregrineFlightsKey);return e&&this.peregrineFlights&&e===this.peregrineFlights}catch(e){this.resolverErrors.push({...o.A5T,message:"Error reading prg flights from localStorage",pb:{...o.A5T.pb,customMessage:e}})}return!1}getConfigsCacheLocalStorageKey(){const{audienceMode:e,pageType:t}=this.currentTargetScope||{},n=s.jG.LocaleContentMarket||{};return`config_hash_${e}_${n.language}_${n.market}_${t}_${s.jG.AppType}`}writeCbidInLocalStorage(e){const t=`cbid_${s.jG.AppType||""}`;try{(0,m.$o)().setItem(t,e)}catch(n){throw`Error writing cbid: ${e} to local storage with key ${t}. Error: ${n}`}}}let ke=(0,v.h)(Te);const Pe={getRootConfig:e=>ke.getRootConfig(e),getEntryPointConfigRef:()=>ke.getEntryPointConfigRef(),getConfig:e=>ke.getConfig(e),getConfigSync:e=>ke.getConfigSync(e),mergeConfig:e=>ke.mergeConfig(e),resolveConfigIndex:e=>ke.resolveConfigIndex(e),targetScopeMatched:e=>ke.targetScopeMatched(e),getConfigTimings:(e={},t=!1)=>ke.getConfigTimings(e,t),getResolverErrors:()=>ke.getResolverErrors(),refreshConfigCache:()=>ke.refreshConfigCache(),getInstance:()=>ke,setTargetScopeAndConfigServiceParams:()=>ke.setTargetScopeAndConfigServiceParams(),initialize:(e,t)=>ke.initialize(e,t),getUseConfigService:()=>ke.useConfigService(),overrideConfig:(e,t,n)=>ke.overrideConfig(e,t,n),overrideCurrentRequestTargetScope:e=>ke.overrideCurrentRequestTargetScope(e),overrideCurrentRequestEnvironment:e=>ke.overrideCurrentRequestEnvironment(e),generateKey:()=>ke.generateKey(),clearInternalState:()=>ke.clearInternalState(),initializeCaching:()=>ke.initializeCaching(),getConfigServiceParameters:()=>ke.getConfigServiceParameters(),setConfigTimingsObject:e=>ke.setConfigTimingsObject(e),getCacheKey:e=>ke.getCacheKey(e),updateServerCache:(e,t)=>ke.updateServerCache(e,t)}},3104:function(e,t,n){"use strict";function i(e){return s(e,(e=>e.configRef.experienceType),(e=>e.experienceType),null)}function r(e){return s(e,(e=>e.configRef),(e=>e.href),(e=>e))}function o(e){return`${e.experienceType}_${e.instanceSrc}_${e.sharedNs||""}`}function a(e){return e&&null!=e.instanceId&&!!s(e,(e=>e.configRef&&e.configRef.experienceType&&e.configRef.instanceSrc),(e=>e.experienceType&&null!=e.href),null)}function s(e,t,n,i,r){if(void 0===r&&(r=null),null!=e){if("string"==typeof e)return i&&i(e)||r;const o=e;if(o.configRef)return t&&t(o)||r;if(n)return n(e)||r}return r}n.d(t,{B5:function(){return o},Fr:function(){return r},M:function(){return i},oO:function(){return a}})},40762:function(e,t,n){"use strict";n.d(t,{Uq:function(){return a},YO:function(){return r},ds:function(){return i},k6:function(){return o},vC:function(){return c},w5:function(){return s}});const i="csux_evt",r="csux_evt-",o=9e5,a=new Map([["BackgroundImageWC",864e5],["SuperNav",9e5]]),s=new Map([["BackgroundImageWC",12096e5],["SuperNav",12096e5]]),c={start_year:2023,start_month:1,start_day:31,end_year:2099,end_month:12,end_day:31}},34551:function(e,t,n){"use strict";n.d(t,{Q:function(){return p},Y:function(){return h}});var i=n(7476),r=n(21930),o=n(88826),a=n(76733),s=n(40762),c=n(31558),d=n(55524),l=n(54297),u=n(85663);class p{constructor(){(0,c.N)()&&(this.localstorage_get(null,i.J_l),(0,r.b1)().then((()=>{this.autoCleanup()})))}autoCleanup(){if(!(0,c.N)())return;if(!this.eventData)return;let e;for(e in this.eventData){const t=e;let n;for(n in this.eventData[t]){const e=n,i=this.eventData[t][e],r=(new Date).getTime();i.timestamp_EventStart+s.w5.get(t)<r&&delete this.eventData[t][e]}}this.localstorage_save(null)}dismissCreative(e,t,n,i){if((0,c.N)())if(e&&t&&n){for(const i in this.eventData[t][e].expiredCreatives)if(i===n)return;this.eventData[t][e].expiredCreatives.push(n),this.localstorage_save(e,i)}else{const r=`Missing data to save creative dismissal. Event ID: ${e}, Experience ID: ${t}, Creative ID: ${n}`;i?(0,o.H)(i,r):a.k.logError(r)}}getCMSContent(e,t,n,i){if(!e||!t||!n){const r=`Missing data to return current cms content. Event ID: ${e}, Experience ID: ${t}, Creative IDs: ${n}`;return i?(0,o.H)(i,r):a.k.logError(r),null}return this.eventData&&this.eventData[t]&&this.eventData[t][e]&&this.eventData[t][e].cmsData?this.eventData[t][e].cmsData:null}static getInstance(){return d.Gq.get("__eventLocalStorage__",(()=>new p))}async getCurrentCreativeId(e,t,n,i,r,s){if(!(0,c.N)())return null;if(!e||!t||!n){const i=`Missing data to return current creative. Event ID: ${e}, Experience ID: ${t}, Creative IDs: ${n}`;return s?(0,o.H)(s,i):a.k.logError(i),null}let d;if(!(this.eventData&&this.eventData[t]&&this.eventData[t][e]))return null;d=this.eventData[t][e].currentCreative;return await this.selectCreative(n,e,t,i,r,d,s)}localstorage_get(e,t){if((0,c.N)())try{this.eventData=(0,l.$o)().getObject(s.ds)}catch(n){t?(0,o.H)(t,`Get local storage operation failed for event - ${e}.`):a.k.logError(n)}}localstorage_save(e,t){if((0,c.N)())try{(0,l.$o)().setObject(s.ds,this.eventData)}catch(n){return void(t?(0,o.H)(t,`Save local storage operation failed for event - ${e}.`):a.k.logError(n))}}async selectCreative(e,t,n,i,r,d,l,p){if(!e||0===e.length)return null;if(i){const e=new Date,t=new Date(i.start_year,i.start_month-1,i.start_day);t.setDate(t.getDate()-1);const n=new Date(i.end_year,i.end_month-1,i.end_day);if(n.setDate(n.getDate()+1),!(t<=e&&e<=n))return null}const h=(0,u.isNullOrUndefined)(this.eventData&&this.eventData[n]&&this.eventData[n][t]&&this.eventData[n][t].timestamp_EventStart);if(!d&&h&&!r)return e[0];if(r){const i=(new Date).getTime(),d=this.eventData&&this.eventData[n]&&this.eventData[n][t]&&this.eventData[n][t].timestamp_EventLastUpdate?this.eventData[n][t].timestamp_EventLastUpdate:0;if(!(0,c.N)()||d+s.k6<i){const i=()=>fetch(r),s=i=>{switch(n){case"BackgroundImageWC":this.eventData[n][t]={cmsData:{attribution:i.headlines[0].subtitle,imageSource:i.headlines[1].title,imageHref:i.headlines[2].title,title:i.headlines[0].title},currentCreative:e[0],expiredCreatives:[],timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(t,l);break;case"SuperNav":this.eventData[n][t]={cmsData:{display:i.headlines[1].title,id:i.headlines[0].title,url:i.headlines[1].subtitle},currentCreative:e[0],expiredCreatives:[],timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(t,l)}};if(!(0,c.N)()){try{const e=await i(),t=await e.json();s(t)}catch(e){l?(0,o.H)(l,`Failed to call CMS data - ${n} - ${t}. url ${r}`,e):a.k.logError(e)}return e[0]}if(p){const t=p.href,n=p.innerText,i=p.id;return s({headlines:[{title:i},{title:n,subtitle:t}]}),e[0]}if(i().then((e=>{e.json().then((e=>{s(e)}))})).catch((e=>{l?(0,o.H)(l,`Failed to call CMS data - ${n} - ${t}. url ${r}`,e):a.k.logError(e)})),(0,u.isNullOrUndefined)(this.eventData&&this.eventData[n]&&this.eventData[n][t]&&this.eventData[n][t].cmsData))return null}}let g=-1;for(let t=0;t<e.length;t++)if(e[t]===d){g=t;break}if(-1===g)return g=0,this.eventData[n][t]={currentCreative:e[g],expiredCreatives:[],timestamp_EventLastUpdate:(new Date).getTime(),timestamp_EventStart:(new Date).getTime()},this.localstorage_save(t,l),e[g];const m=(new Date).getTime();if(this.eventData[n][t].timestamp_EventLastUpdate+s.Uq.get(n)<m&&!i){if(g<e.length-1){const i=e[g+1];return this.dismissCreative(t,n,d,l),this.eventData[n][t]={...this.eventData[n][t],currentCreative:i,timestamp_EventLastUpdate:m},this.localstorage_save(t,l),i}return this.dismissCreative(t,n,e[g],l),null}for(let i=0;i<this.eventData[n][t].expiredCreatives.length;i++)if(this.eventData[n][t].expiredCreatives[i]===e[g])return null;return e[g]}async shouldShowEvent(e,t,n,i,r,o,a){const s=(0,u.isNullOrUndefined)(this.eventData),c=this.eventData&&(0,u.isNullOrUndefined)(this.eventData[t]),d=this.eventData&&this.eventData[t]&&(0,u.isNullOrUndefined)(this.eventData[t][e]);if(s||c||d){s?(this.eventData={},this.eventData[t]={},this.eventData[t][e]={}):c&&(this.eventData[t]={},this.eventData[t][e]={});const d=await this.selectCreative(n,e,t,i,r,null,null,a);return!!d&&(this.eventData[t][e].currentCreative=d,this.localstorage_save(e,o),!0)}const l=this.eventData[t][e].currentCreative;return!!await this.selectCreative(n,e,t,i,r,l,o,a)}}const h=()=>{const e="__eventLocalStorage__";let t=d.Gq.get(e);return t||(t=new p,d.Gq.set(e,t)),t}},20089:function(e,t,n){"use strict";n.d(t,{Gg:function(){return s},St:function(){return d},WW:function(){return c},tk:function(){return i}});var i,r=n(55524),o=n(52058);!function(e){e.actionMenuOpen="actionMenuOpen",e.addTopSite="addTopSite",e.coachmark="coachmark",e.editTopSite="editTopSite",e.editWelcomeGreeting="editWelcomeGreeting",e.hamburgerMenu="hamburgerMenu",e.imageSearch="imageSearch",e.locationMarkerCard="locationMarkerCard",e.mobileAppUpsell="mobileAppUpsell",e.msRewards="msRewards",e.museumCard="museumCard",e.navOverflow="navOverflow",e.notificationBell="notificationBell",e.pivot="pivot",e.search="search",e.searchHistoryMoreOptions="searchHistoryMoreOptions",e.settings="settings",e.feedSettings="feedSettings",e.signInControl="signInControl",e.toast="toast",e.topSiteOverflowPanel="topSiteOverflowPanel",e.voiceSearchWC="voiceSearchWC",e.waffle="waffle",e.recommendedSitesSetting="recommendedSitesSetting",e.newsHeadlineBelowSearchboxMoreOptions="newsHeadlineBelowSearchboxMoreOptions",e.weatherOneLinerActionMenu="weatherOneLinerActionMenu",e.pulseActionMenu="pulseActionMenu"}(i||(i={}));class a{constructor(){this.flyoutOpen=!1,this.openFlyouts=new Set,this.registeredCallbacks=[]}static getInstance(){return r.Gq.get("__FlyoutCoordinationInstance__",(()=>new a))}reportFlyoutOpen(e,t){t?this.openFlyouts.add(e):this.openFlyouts.delete(e),this.flyoutOpen=this.openFlyouts.size>0;for(const n of this.registeredCallbacks)n(e,t)}registerFlyoutListener(e){this.registeredCallbacks.push(e)}unregisterFlyoutListener(e){(0,o.Z)(this.registeredCallbacks,(t=>e===t))}isFlyoutOpen(){return this.flyoutOpen}}function s(e,t){return a.getInstance().reportFlyoutOpen(e,t)}function c(e){return a.getInstance().registerFlyoutListener(e)}function d(e){return a.getInstance().unregisterFlyoutListener(e)}},42645:function(e,t,n){"use strict";n.d(t,{HB:function(){return y}});var i=n(92100),r=n(32810),o=n(21789),a=n(13334),s=n(31558),c=n(78672);const d="//assets.msn.com",l="//assets.msn.cn",u=e=>"localhost.msn.com"===e.split(":",1)[0];function p(e){if(/^\/[\w.-]+(\/[\w.-]+)*$/.test(e))return!(e.includes("/../")||e.includes("/./")||e.endsWith("/..")||e.endsWith("/."))}function h(e){return e&&!e.startsWith("/")?"/"+e:e}function g(e){return e.endsWith("/")?e:e+"/"}function m(e){return p(h(e))?(t=e).startsWith("/")?t.slice(1):t:null;var t}function f(e){return e?e.split("/")[0]:null}const v=(e,t,n)=>{const c=new URLSearchParams(e),v="true"===c.get("renderWidget"),y="true"===c.get("useDeployedBundles"),S=((e,t,n)=>{if(!t){if(n)return d;if(u(e))return`//${e}`}return o.jG.IsChinaCompliance?l:d})(t,v,y);if(c.has("entry")){const e=h(c.get("entry").split("/").slice(0,-1).join("/"));return S&&p(e)&&(u(t)||e.startsWith("/bundles"))?g(S+e):g(S)}if(S&&u(t)&&!y){if(!(0,s.N)()){return S+__WEBPACK_LOCAL_STATICS_PATH__}if(n)return S+n}else if(S){var C;const t=(e||"").substring(1),o=decodeURIComponent(t);let s;const c=i.c.getParamsWithItems(o).find((e=>"spalink"===e.key)),d=c&&c.value,l=a.Al.ClientSettings||{},u=null===(C=l.bundleInfo)||void 0===C?void 0:C.alias;if("true"===l.static_page&&u)s=f(u);else if(d)s=f(m(d));else{const e=new r.h(o).get("bundles");e?s=m(e):u&&(s=f(u))}if(n){const e=n.split("/");return e[4]=s||"latest",S+e.join("/")}}return n},y=()=>{n.p=v((0,c.zp)(),(0,c.zw)(),n.p)}},95153:function(e,t,n){"use strict";n.d(t,{DO:function(){return c},Nd:function(){return s},fH:function(){return a}});var i=n(21789),r=n(24478),o=n(32687);class a{constructor({params:e,qspPrefix:t,spec:n}={},i){this.requestData=new r.m4(n||o.j4,t||o.mx),e&&this.requestData.loadQueryParams(e),i&&(this.RequestId=i)}get requestId(){return this.RequestId||this.app.ActivityId}get app(){return i.jG}get data(){return this.requestData.data}}function s(e,t,n=!0){if("function"==typeof e){const t=e();if(t||0===t)return t}if(n)throw new Error("Expected "+t+" to return value. Possible invalid RequestContext spec used or the spec doesn't contain this data.")}function c(e){return s(e.data.locationHref,"locationHref",!1)}},10671:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});const i={prod:"//img-s-msn-com.akamaized.net/tenant/amp/entityid/"}},71486:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var i,r=n(7124);const o=null===(i=n(13334).Al.CurrentFlightSet)||void 0===i?void 0:i.has("prg-scrolldbc"),a=50;function s(e,t=a,n=!0){return o?n?(0,r.Z)(e,t):(0,r.Z)(e,t,{leading:!0,trailing:!1}):e}},96329:function(e,t){"use strict";t.Z=function(e,...t){if(e){const n=/{([\d]+)}/g,i=[];let r=n.exec(e),o=0,a=0;for(;null!==r;)a=r.index,i.push(e.substring(o,a)),i.push(t[r[1]]),o=n.lastIndex,r=n.exec(e);return i.push(e.substring(o)),i}}},68310:function(e,t,n){"use strict";n.d(t,{b:function(){return s}});var i=n(23549),r=n(82486),o=n(30023),a=n(31558);async function s(e,t,s,c){if(!(0,a.N)())return;const d=await n.e("diagnostic-web-vitals").then(n.bind(n,40219));(0,r.lr)().then((()=>{const n=s?{timeToPageReveal:e[o.Y5],timeToPageVisible:e[o.U4]}:void 0;d.initDiagnosticsWebVitals((e=>{c?c({markers:e}):i.M0.sendLoadTimeEvent({markers:e}),Object.entries(e).forEach((([e,n])=>{t[e]=n}))}),e&&e[o.dd]||-1,n)}))}},7476:function(e,t,n){"use strict";n.d(t,{zzx:function(){return bS},bQI:function(){return wS},K_t:function(){return AS},j_y:function(){return PS},XcO:function(){return TS},Was:function(){return kS},vn7:function(){return IS},X4G:function(){return ES},etM:function(){return Za},N1G:function(){return Xa},iVH:function(){return Yn},oSM:function(){return Kd},rBK:function(){return Qd},etb:function(){return Hd},ps7:function(){return Gd},HuD:function(){return qd},Q48:function(){return $d},Evv:function(){return Nn},EoX:function(){return Bn},Eh0:function(){return zn},d1d:function(){return jn},NMS:function(){return On},iJb:function(){return $n},Es0:function(){return Hn},AWv:function(){return Vn},a4J:function(){return Un},a2y:function(){return Aa},s51:function(){return Na},S2e:function(){return Ba},_ig:function(){return Sa},hnc:function(){return Ca},ZHI:function(){return ka},CBH:function(){return Pa},LIN:function(){return ya},N6m:function(){return Ma},yyJ:function(){return Oa},YSG:function(){return Ra},cL8:function(){return La},gAu:function(){return Ta},MRH:function(){return ba},bUp:function(){return Ia},EhB:function(){return Ea},EXN:function(){return Fa},Vsq:function(){return Da},CPU:function(){return wa},FQ3:function(){return xa},nab:function(){return hp},lr$:function(){return uS},LeM:function(){return dS},qI3:function(){return lS},sNr:function(){return oi},Y57:function(){return ai},bvO:function(){return ri},evM:function(){return ia},amS:function(){return qo},YHd:function(){return na},gZU:function(){return ta},c$P:function(){return Vo},npG:function(){return zo},u8h:function(){return jo},L8S:function(){return ra},G0e:function(){return Go},FWA:function(){return oa},lz:function(){return Ko},fvr:function(){return Xo},Bjk:function(){return Yo},ydI:function(){return ea},D1F:function(){return Zo},WB4:function(){return Jo},ja9:function(){return Qo},nrW:function(){return sa},FTS:function(){return aa},Zfy:function(){return Jf},cpH:function(){return Zf},HCR:function(){return Xf},Ia3:function(){return Qf},Mw:function(){return Yf},BfX:function(){return ev},Emt:function(){return Kf},m9g:function(){return Ln},yb9:function(){return hm},IIV:function(){return Am},LnJ:function(){return Im},EuY:function(){return Em},Ibk:function(){return Dm},hNw:function(){return Lm},qP4:function(){return Bm},BFw:function(){return Om},SqC:function(){return Mm},gjV:function(){return Fm},DnN:function(){return Rm},tvG:function(){return xm},B5f:function(){return fm},CgS:function(){return vm},LWq:function(){return Sm},FtH:function(){return Cm},N1Y:function(){return wm},$qz:function(){return ym},FEC:function(){return Pm},W91:function(){return km},JTk:function(){return Ho},PRJ:function(){return Wo},X2X:function(){return $o},Cy3:function(){return qn},c$g:function(){return Bg},$eW:function(){return Tg},UDB:function(){return iv},Hrk:function(){return nv},MW5:function(){return rv},CLx:function(){return fb},aB8:function(){return vb},a8F:function(){return Qn},Mo$:function(){return TT},OtG:function(){return ns},JWg:function(){return is},jSE:function(){return W},A49:function(){return mu},hj1:function(){return Cu},sqX:function(){return Su},gZr:function(){return yu},eqK:function(){return gu},Eny:function(){return wu},X66:function(){return uu},CBr:function(){return pu},N4n:function(){return hu},odB:function(){return fu},a8G:function(){return vu},Z7:function(){return ne},G1z:function(){return ee},na5:function(){return ie},lM0:function(){return re},yBI:function(){return oe},Xqh:function(){return te},OIz:function(){return ae},Kbm:function(){return X},M2l:function(){return Gy},L_o:function(){return qy},eto:function(){return Ys},UpF:function(){return zi},tfk:function(){return Qi},tSD:function(){return ji},XFJ:function(){return Ki},SPE:function(){return Kw},raP:function(){return nb},tqB:function(){return tb},fAT:function(){return eb},Xpg:function(){return Gw},_$J:function(){return ib},jGf:function(){return rb},nRu:function(){return ob},x1P:function(){return qw},oz3:function(){return Qw},wyy:function(){return yd},AWk:function(){return md},Uf3:function(){return fd},nZQ:function(){return ud},kAq:function(){return dd},ODl:function(){return vd},czP:function(){return gd},k2Y:function(){return Sd},DJm:function(){return pd},T4Y:function(){return ld},xEV:function(){return hd},PLs:function(){return zw},aLD:function(){return Yw},lCC:function(){return Xw},RZW:function(){return jw},GOz:function(){return Jw},fZh:function(){return Zw},fMy:function(){return Vw},j7$:function(){return hT},ATu:function(){return gT},z48:function(){return pT},L_b:function(){return uT},Mqi:function(){return Hp},y7V:function(){return $p},Kp5:function(){return qp},Hvj:function(){return Gp},uyV:function(){return Vp},o25:function(){return vT},_7Q:function(){return bp},b2C:function(){return CT},Mn5:function(){return ST},jds:function(){return bT},CVs:function(){return wT},oTO:function(){return Af},qXP:function(){return kf},HKp:function(){return If},gEw:function(){return Tf},B$y:function(){return Pf},YVm:function(){return Cb},Q$P:function(){return ak},vC9:function(){return sk},g_R:function(){return ck},OyK:function(){return ok},h4Z:function(){return lk},$S3:function(){return dk},BW3:function(){return uk},SWs:function(){return pg},e1u:function(){return ug},z98:function(){return bg},h6w:function(){return fi},Wct:function(){return mi},Zt_:function(){return qa},BMt:function(){return Zy},OAw:function(){return Vy},Tdm:function(){return zy},a0I:function(){return eS},xeh:function(){return Yy},ht:function(){return Ky},rnG:function(){return Qy},tJi:function(){return Xy},PKn:function(){return rS},P2p:function(){return oS},ygS:function(){return tS},QzW:function(){return M},gX:function(){return le},iS2:function(){return ue},SBd:function(){return se},SEf:function(){return ce},gbr:function(){return de},fU5:function(){return Se},Vwf:function(){return ve},lIV:function(){return ye},sGX:function(){return ge},HFn:function(){return fe},FvO:function(){return Xn},F0_:function(){return ei},Qsh:function(){return ii},CKi:function(){return ni},EIi:function(){return ti},hMS:function(){return kg},TVf:function(){return Ua},MmB:function(){return fr},eck:function(){return VT},h_:function(){return zT},YVg:function(){return Sp},Sp0:function(){return Ue},ZZK:function(){return lv},Ggm:function(){return zt},lWE:function(){return Vt},MRy:function(){return Xt},Jtn:function(){return jt},Wzw:function(){return Kt},y5G:function(){return en},v7z:function(){return Zt},aF1:function(){return Jt},u4m:function(){return Qt},u6c:function(){return Yt},F1V:function(){return AT},hii:function(){return IT},X9Z:function(){return Ng},MD5:function(){return zs},dTs:function(){return Zi},huq:function(){return Qs},L90:function(){return js},V3_:function(){return Ks},Cn7:function(){return ks},xXe:function(){return qT},fDq:function(){return GT},GrI:function(){return Z},WXX:function(){return Y},jWk:function(){return Ha},ifI:function(){return Eg},ReU:function(){return Ig},I8d:function(){return Ag},bKC:function(){return Pg},IIT:function(){return zm},J_l:function(){return bm},LXY:function(){return Tm},fUc:function(){return UC},C35:function(){return WC},lE3:function(){return qC},KwY:function(){return $C},ZJy:function(){return GC},$n1:function(){return HC},OeS:function(){return H},Rln:function(){return Mo},u4l:function(){return xo},$8R:function(){return _o},fCp:function(){return Ro},BHd:function(){return Do},DWx:function(){return Bo},_bN:function(){return Va},IrA:function(){return za},OcW:function(){return Gm},f7W:function(){return Tp},H5g:function(){return wt},Ez4:function(){return Ga},jzM:function(){return yp},ZSB:function(){return Yi},kPC:function(){return ut},aKV:function(){return yt},l35:function(){return pt},aO:function(){return rt},Psw:function(){return Gn},aFk:function(){return Ug},c1s:function(){return Nk},OaZ:function(){return _k},Ecq:function(){return fc},SNZ:function(){return ic},ITJ:function(){return oc},TyC:function(){return rc},rrV:function(){return tg},vZx:function(){return ig},YNO:function(){return ng},m96:function(){return Zh},jvv:function(){return eg},W7q:function(){return Xh},H_Z:function(){return pc},IWG:function(){return gc},rHL:function(){return hc},G9t:function(){return vc},Vak:function(){return Cg},ewo:function(){return hk},Jus:function(){return dc},O3:function(){return uc},M_5:function(){return lc},GeL:function(){return ec},rbA:function(){return nc},nvX:function(){return tc},OFV:function(){return mc},O5R:function(){return ac},U:function(){return cc},Knl:function(){return sc},KzD:function(){return Ww},qjh:function(){return Uw},jcj:function(){return Nw},tNY:function(){return _w},rNk:function(){return Cp},tCQ:function(){return Ep},yRR:function(){return Ip},EF$:function(){return kp},GJW:function(){return wp},bH3:function(){return Pp},AaR:function(){return ku},tvO:function(){return Tu},eb9:function(){return Iu},tNl:function(){return Eu},bBT:function(){return Mu},d6P:function(){return bu},yLQ:function(){return Au},Gjj:function(){return Pu},NNq:function(){return Lu},_GR:function(){return xu},UjD:function(){return Ru},$RK:function(){return Du},wxO:function(){return RC},jA_:function(){return DC},neE:function(){return OC},Xr9:function(){return FC},dqy:function(){return BC},AVH:function(){return _C},ZIZ:function(){return NC},lHZ:function(){return LC},wBi:function(){return zC},aaS:function(){return jC},F0i:function(){return VC},tPj:function(){return xC},j3p:function(){return St},OjJ:function(){return Od},Cfk:function(){return Tn},ru5:function(){return Fn},Zmj:function(){return wn},v73:function(){return bn},jZQ:function(){return Pn},rmC:function(){return In},I2B:function(){return En},vvT:function(){return kn},ryt:function(){return xn},K8d:function(){return Mn},e6B:function(){return An},IfP:function(){return ms},tkb:function(){return hs},OWM:function(){return gs},HpJ:function(){return fp},lu7:function(){return vi},ASE:function(){return yi},iWd:function(){return op},h0:function(){return rp},EYh:function(){return sp},O1E:function(){return ap},qtV:function(){return pp},HNI:function(){return dp},ij8:function(){return lp},r6p:function(){return cp},qbQ:function(){return up},O4Q:function(){return JT},r81:function(){return YT},Z1Q:function(){return LS},nCk:function(){return MS},qut:function(){return xS},GX5:function(){return yk},JH9:function(){return Fp},NFm:function(){return Lp},Z$l:function(){return Rp},$YQ:function(){return Dp},drd:function(){return $},_c7:function(){return q},sd_:function(){return G},ML7:function(){return sg},sHL:function(){return ag},yVj:function(){return Ub},Oz9:function(){return aT},l8i:function(){return oT},R9p:function(){return sT},YJ7:function(){return it},U4N:function(){return nt},fNQ:function(){return je},dxF:function(){return mt},aPD:function(){return vt},mXp:function(){return Xe},ABv:function(){return et},BnB:function(){return tt},SSg:function(){return at},DE1:function(){return Ge},udk:function(){return gt},yf9:function(){return Ve},qQi:function(){return Ze},oxX:function(){return Je},jCZ:function(){return Qe},Q3G:function(){return qe},QW8:function(){return He},wXh:function(){return $e},sf4:function(){return ze},T4K:function(){return Ye},jns:function(){return Ke},Gm$:function(){return ft},lNW:function(){return dt},AIp:function(){return Jn},AvP:function(){return me},jty:function(){return vk},MaG:function(){return U},TBk:function(){return Dn},CBf:function(){return Ya},f_s:function(){return Ja},RLb:function(){return Qa},SbG:function(){return Dg},cS0:function(){return Og},Dpu:function(){return Fg},VkE:function(){return _p},dSm:function(){return Up},fzU:function(){return Wp},jD$:function(){return cr},i8g:function(){return og},gzO:function(){return Tt},NGC:function(){return bt},KKn:function(){return Vs},hTy:function(){return Of},JGn:function(){return Ff},h2c:function(){return Nb},agd:function(){return Mb},JNv:function(){return Eb},i05:function(){return kT},Xa2:function(){return PT},hNX:function(){return zp},c6N:function(){return vS},VzI:function(){return fS},KPf:function(){return Nm},Q0n:function(){return _m},HbY:function(){return sm},gqg:function(){return um},_PV:function(){return tm},$L2:function(){return om},jTi:function(){return nm},j12:function(){return rm},BY9:function(){return Qg},DH3:function(){return Jg},wgD:function(){return pm},qCY:function(){return qg},sn3:function(){return Gg},_dv:function(){return jg},waU:function(){return Kg},oCM:function(){return Yg},xvO:function(){return Zg},Ur5:function(){return Vg},Puo:function(){return zg},J8c:function(){return im},xSe:function(){return Xg},I78:function(){return dm},lsj:function(){return am},ymf:function(){return cm},Z3I:function(){return em},sao:function(){return Hg},D5c:function(){return $g},Quo:function(){return lm},f3z:function(){return vp},UX3:function(){return ja},MWq:function(){return Wa},hq4:function(){return $w},KDG:function(){return Bk},X1K:function(){return Fk},NsM:function(){return Ok},CR1:function(){return wb},Oee:function(){return tn},jjQ:function(){return rn},xz5:function(){return nn},is$:function(){return on},lxu:function(){return an},JIe:function(){return Cn},_qL:function(){return cn},t7r:function(){return sn},pa7:function(){return ln},FER:function(){return dn},Mc7:function(){return un},XWd:function(){return gn},_nz:function(){return hn},jSV:function(){return vn},qok:function(){return yn},yL3:function(){return fn},Z6e:function(){return Sn},nZ_:function(){return pn},C$l:function(){return mn},XUn:function(){return xT},TnD:function(){return LT},gDO:function(){return ET},BCc:function(){return RT},e7R:function(){return Cf},gsz:function(){return nf},hhW:function(){return ff},pf:function(){return lf},gvI:function(){return ef},i04:function(){return tf},I9d:function(){return vf},Yr5:function(){return df},ceH:function(){return wf},Kz0:function(){return sf},O0V:function(){return af},PwI:function(){return of},pGg:function(){return cf},H1V:function(){return hf},RzE:function(){return pf},glL:function(){return xf},A9I:function(){return yf},tpK:function(){return rf},ViJ:function(){return mf},Dzt:function(){return uf},QoC:function(){return Sf},PUT:function(){return gf},rQV:function(){return ke},w5f:function(){return Te},Zdq:function(){return Hw},v8C:function(){return Wn},yJ4:function(){return Kn},rEw:function(){return _n},MnT:function(){return bC},xC8:function(){return yC},h5R:function(){return PC},Fyv:function(){return AC},Pq3:function(){return SC},Lux:function(){return TC},PwA:function(){return kC},rlX:function(){return CC},hi0:function(){return wC},a7b:function(){return qi},oQG:function(){return aS},WDJ:function(){return cS},GF9:function(){return Jy},Iyk:function(){return nS},_kh:function(){return iS},c_I:function(){return jy},BlG:function(){return sS},DhF:function(){return lT},CJ1:function(){return dT},n7c:function(){return cT},gEs:function(){return By},bAs:function(){return Ce},apB:function(){return or},Kuw:function(){return er},eE5:function(){return tr},g52:function(){return nr},gTq:function(){return ir},Ub$:function(){return rr},clq:function(){return sr},l0m:function(){return ar},Qc1:function(){return bf},Qv4:function(){return Tw},k8J:function(){return eu},T5b:function(){return Xl},pCD:function(){return Zl},M6I:function(){return Gf},t1k:function(){return Vf},ubC:function(){return $f},Mej:function(){return qf},l8W:function(){return zf},Gri:function(){return Uf},hd1:function(){return jf},Erc:function(){return Hf},CiN:function(){return Wf},VyK:function(){return _f},vHJ:function(){return pb},ydb:function(){return mb},ldR:function(){return gb},ejn:function(){return hb},QRr:function(){return ub},dYp:function(){return sb},gY$:function(){return lb},JtN:function(){return cb},adY:function(){return db},K73:function(){return ts},jj$:function(){return es},wYn:function(){return mC},V3k:function(){return pC},Kpz:function(){return gC},FQj:function(){return vC},LoI:function(){return fC},gWj:function(){return hC},TTr:function(){return Ms},WBP:function(){return xs},Me0:function(){return Is},MOe:function(){return Es},QQk:function(){return bs},arc:function(){return Ts},GYz:function(){return jp},BlE:function(){return w},u45:function(){return T},yWd:function(){return P},XFR:function(){return k},US9:function(){return I},n82:function(){return C},p3y:function(){return b},pIg:function(){return A},ovB:function(){return E},gX7:function(){return rd},mjE:function(){return ad},SyQ:function(){return id},Abn:function(){return sd},qst:function(){return od},GQD:function(){return he},bid:function(){return pe},IA3:function(){return be},CTH:function(){return K},VHu:function(){return vg},Llr:function(){return J},IU$:function(){return mr},PQq:function(){return Vi},z5u:function(){return QT},dE2:function(){return KT},mFi:function(){return Rn},bfJ:function(){return Wt},T16:function(){return Ht},A_P:function(){return $t},GH8:function(){return qt},EoU:function(){return Ot},AKH:function(){return Bt},TXH:function(){return Nt},RwL:function(){return Ft},lrn:function(){return Gt},$2m:function(){return _t},eEO:function(){return Ut},MA5:function(){return Q},QCU:function(){return Jb},HB9:function(){return Xb},OSS:function(){return Yb},ViC:function(){return Kb},VwB:function(){return tT},ffw:function(){return Zb},sTd:function(){return eT},X2x:function(){return Qb},me0:function(){return ru},MFQ:function(){return tu},nS9:function(){return iu},Fe_:function(){return ou},Aps:function(){return nu},$9$:function(){return au},Hif:function(){return os},sEv:function(){return ss},vAF:function(){return rs},vwD:function(){return as},GI7:function(){return vs},smA:function(){return Ss},NKp:function(){return ps},aay:function(){return fs},DxP:function(){return ys},bor:function(){return us},HYO:function(){return ds},lFV:function(){return cs},Cab:function(){return ls},fDI:function(){return xb},MTg:function(){return Lb},m_W:function(){return Rb},a7O:function(){return Gu},jet:function(){return Vu},kGJ:function(){return _u},yn8:function(){return Bu},qH0:function(){return Nu},ynR:function(){return Ju},fGi:function(){return Uu},g$R:function(){return $u},oxc:function(){return Xu},Xt4:function(){return ju},sce:function(){return np},e_W:function(){return zu},Qq4:function(){return tp},UPy:function(){return Ku},H5m:function(){return ip},RmK:function(){return Hu},mHh:function(){return Zu},vq2:function(){return qu},sKq:function(){return ep},nlU:function(){return Fu},VPx:function(){return Qu},DgT:function(){return Ou},$G7:function(){return Wu},Ioz:function(){return Yu},H8e:function(){return ht},Y9r:function(){return tv},iqH:function(){return Sb},fV1:function(){return Zr},AUI:function(){return Oo},EEV:function(){return Fo},fSo:function(){return Xr},zwp:function(){return $m},HWG:function(){return qm},_ni:function(){return st},_5e:function(){return hS},O0T:function(){return ct},fcE:function(){return Cs},M7L:function(){return ws},KWF:function(){return Ab},CTB:function(){return Ib},R6F:function(){return Ah},ox:function(){return Ih},SJe:function(){return Mp},lub:function(){return xp},od1:function(){return Gi},GAh:function(){return Et},dB7:function(){return Pt},Blh:function(){return kt},nQj:function(){return At},SmR:function(){return It},NM6:function(){return ik},EY8:function(){return rk},zeR:function(){return yS},CqX:function(){return SS},tkv:function(){return MT},GB_:function(){return si},N1V:function(){return ui},CS7:function(){return gi},GLL:function(){return di},Sp_:function(){return ci},A5T:function(){return hi},g_9:function(){return pi},rP7:function(){return li},_8J:function(){return hv},de3:function(){return pv},bKp:function(){return Np},dHA:function(){return $b},oyE:function(){return qb},zxc:function(){return Gb},WYS:function(){return Hb},$HB:function(){return Vb},D3u:function(){return zb},NvD:function(){return jb},Yym:function(){return MC},Scz:function(){return EC},hJt:function(){return IC},hh6:function(){return Aw},m8v:function(){return Iw},$h:function(){return kw},oww:function(){return Pw},cg9:function(){return xe},UHb:function(){return Ee},bwz:function(){return Pe},r_t:function(){return Ae},A31:function(){return Ie},lZX:function(){return Le},q6p:function(){return Fe},gr5:function(){return Me},I2u:function(){return Oe},P8E:function(){return Be},ZKD:function(){return _e},QUT:function(){return De},Aeb:function(){return Re},oPt:function(){return Ne},hSL:function(){return Zm},O1e:function(){return Km},_5V:function(){return jm},OFL:function(){return Qm},TqQ:function(){return Jm},esH:function(){return Ym},jPm:function(){return Xm},paG:function(){return Zn},Yg3:function(){return Jd},ItM:function(){return _h},ViL:function(){return Nh},_I9:function(){return Bh},ZAB:function(){return ma},C3T:function(){return fa},XDw:function(){return ga},V2e:function(){return vr},pay:function(){return ca},VI5:function(){return da},v8K:function(){return ha},sFk:function(){return la},qbM:function(){return ua},O5q:function(){return pa},fLy:function(){return va},Ky4:function(){return fT},Yon:function(){return gg},ILq:function(){return Yd},IgS:function(){return tC},_tv:function(){return lt},SAl:function(){return pk},N4g:function(){return Ui},DnH:function(){return Di},Z1G:function(){return Fi},t5z:function(){return Ni},hgm:function(){return _i},Krs:function(){return Oi},MMt:function(){return Bi},Bpd:function(){return rT},Y6E:function(){return Eh},Q0t:function(){return Dh},dAd:function(){return Fh},RDJ:function(){return Mh},zo9:function(){return Oh},npe:function(){return Rh},Vm4:function(){return Lh},Nyv:function(){return xh},n3q:function(){return iT},a6r:function(){return Sg},kTw:function(){return nT},Fst:function(){return wg},sX$:function(){return we},WQV:function(){return Op},DKZ:function(){return Bp},G7x:function(){return mp},vp2:function(){return j},sMt:function(){return V},FtB:function(){return z},Hcr:function(){return rg},xpu:function(){return iC},Z6W:function(){return sC},vn6:function(){return cC},uIr:function(){return oC},d7f:function(){return aC},LPj:function(){return rC},qAf:function(){return nC},Niu:function(){return lC},hEV:function(){return dC},LKs:function(){return uC},ozy:function(){return lg},hFn:function(){return cg},GJQ:function(){return dg},fcH:function(){return Ps},OxM:function(){return As},cJy:function(){return Mi},Agr:function(){return Ei},obn:function(){return Bb},Oek:function(){return Ob},AEH:function(){return Fb},ufb:function(){return jT},WpB:function(){return dv},wZP:function(){return Ci},wB6:function(){return Si},plI:function(){return Ai},fwK:function(){return kk},MpL:function(){return bi},Ldg:function(){return wi},Nb$:function(){return ki},sd7:function(){return Ti},bd4:function(){return Pi},Zkl:function(){return Tk},spi:function(){return Ji},sDq:function(){return ab},C4I:function(){return sv},rVt:function(){return cv},BPe:function(){return av},Sky:function(){return ov},ADY:function(){return Ii},x_Y:function(){return Ik},mvZ:function(){return Pk},HRj:function(){return Ak},ZsX:function(){return Ek},QN2:function(){return Mk},E7H:function(){return bc},ToT:function(){return Bc},Pdg:function(){return $c},n$r:function(){return qc},ic4:function(){return wc},yRc:function(){return Wc},vHv:function(){return Hc},xdR:function(){return _c},tLx:function(){return Dc},sWY:function(){return zc},Fyn:function(){return Fc},tN1:function(){return Ac},aHf:function(){return Nc},daM:function(){return kc},F7i:function(){return Oc},HPv:function(){return Lc},Ead:function(){return Ec},Ely:function(){return Ic},jyo:function(){return Uc},pjz:function(){return Pc},XDS:function(){return xc},rVI:function(){return Rc},nvG:function(){return Mc},Gnh:function(){return Vc},j3Z:function(){return Gc},See:function(){return Kc},QsR:function(){return jc},xQV:function(){return Cc},VWS:function(){return Tc},ZtP:function(){return Mg},BXO:function(){return Jc},s22:function(){return Qc},h8f:function(){return yc},mYh:function(){return We},KyA:function(){return Rg},_yq:function(){return xg},lnl:function(){return Lg},_yS:function(){return Sc},$rl:function(){return HT},vHQ:function(){return UT},_dh:function(){return WT},sVY:function(){return $T},L9E:function(){return yl},Ms:function(){return Nl},_vs:function(){return Ol},JaT:function(){return Fl},Qc7:function(){return _l},t0C:function(){return Hl},EWv:function(){return Ul},WN0:function(){return ew},atB:function(){return hw},NvH:function(){return Al},hnd:function(){return Pl},oYh:function(){return Dl},HkJ:function(){return El},l$l:function(){return Rl},eBj:function(){return Ll},bfG:function(){return Ml},U4S:function(){return Wl},$mw:function(){return Bl},PTG:function(){return Il},uSd:function(){return xl},wAt:function(){return kl},yOL:function(){return Sl},tFh:function(){return Cl},zl4:function(){return fl},v3e:function(){return ml},QXe:function(){return wl},TmC:function(){return vl},w9g:function(){return bl},RTd:function(){return Tl},KnF:function(){return fk},oiw:function(){return Kl},HN$:function(){return $l},mkE:function(){return ql},nIM:function(){return zl},RD:function(){return Vl},DWC:function(){return jl},iNb:function(){return Gl},fQA:function(){return Jl},HgX:function(){return Ql},Huj:function(){return KC},dhI:function(){return dw},$eE:function(){return lw},W56:function(){return uw},HKi:function(){return tw},Nh3:function(){return nw},bV8:function(){return iw},hig:function(){return ow},bIr:function(){return rw},QQY:function(){return aw},OwG:function(){return pw},rfm:function(){return cw},S8$:function(){return sw},_X1:function(){return XC},I4h:function(){return YC},jhV:function(){return ZC},KWu:function(){return JC},Cm8:function(){return QC},pLA:function(){return Yl},nlN:function(){return yT},p0I:function(){return Oy},ePq:function(){return Mf},Otv:function(){return Ef},i29:function(){return _a},LRf:function(){return $a},fG_:function(){return Wg},K_X:function(){return lu},h5L:function(){return cu},yLG:function(){return su},LO8:function(){return du},XI8:function(){return br},EDN:function(){return _b},xK1:function(){return hg},sJW:function(){return Ly},f2c:function(){return Hv},dp6:function(){return My},NF_:function(){return vv},uW3:function(){return Av},U1E:function(){return Sy},Dt$:function(){return Mv},np9:function(){return Yv},M6G:function(){return ey},RaX:function(){return Rv},MWw:function(){return Zv},ws9:function(){return vy},XbP:function(){return Uv},erD:function(){return gS},hOL:function(){return py},rYN:function(){return my},Akl:function(){return gy},R5h:function(){return ty},EkS:function(){return ny},zVA:function(){return hy},FDi:function(){return iy},Jmv:function(){return Vv},KJ$:function(){return dy},md3:function(){return cy},lCX:function(){return qv},_yJ:function(){return oy},w0e:function(){return ry},Kzw:function(){return Gv},tYD:function(){return Ty},zYr:function(){return sy},Ps3:function(){return ay},N1:function(){return ly},uI4:function(){return uy},E6y:function(){return by},c2h:function(){return $v},sDN:function(){return Iv},K0D:function(){return bv},AeD:function(){return wv},RGj:function(){return Tv},jkn:function(){return kv},vpZ:function(){return Dv},CH5:function(){return Wv},vPg:function(){return jv},G78:function(){return Kv},xPu:function(){return Qv},R0M:function(){return yv},WM8:function(){return Cy},Fid:function(){return ky},kkF:function(){return xy},O6X:function(){return xv},Ipv:function(){return _v},F4k:function(){return yy},gu7:function(){return zv},AP6:function(){return Fv},RHM:function(){return Dy},Mcu:function(){return Xv},K4A:function(){return Bv},K$q:function(){return fy},XCT:function(){return Ov},uJS:function(){return Nv},IHr:function(){return Py},lsA:function(){return Ay},UNp:function(){return Sv},kyM:function(){return Cv},A4x:function(){return wy},iLP:function(){return Lv},Z49:function(){return Ey},WNm:function(){return Ev},RtG:function(){return Jv},ddY:function(){return $y},Uq0:function(){return Iy},ds2:function(){return Pv},Vdp:function(){return Nf},kzg:function(){return CS},cZM:function(){return Ka},$Ej:function(){return Zs},eQj:function(){return gw},MYh:function(){return bw},WJE:function(){return mw},Oat:function(){return Cw},WKi:function(){return ww},mBS:function(){return fw},qXI:function(){return vw},sFl:function(){return Sw},STX:function(){return yw},a3w:function(){return Xs},Yfz:function(){return qh},wD3:function(){return Wh},ecn:function(){return Uh},hAd:function(){return Hh},F_w:function(){return Gh},sgf:function(){return $h},dR$:function(){return Kh},Nrs:function(){return zh},$N1:function(){return Vh},U85:function(){return Yh},UCw:function(){return Qh},IHw:function(){return Jh},Fi:function(){return jh},RJh:function(){return mT},OF8:function(){return v},xKE:function(){return f},lqy:function(){return m},pqC:function(){return g},A$C:function(){return S},VKG:function(){return y},vlt:function(){return Wi},pL3:function(){return Hi},pHN:function(){return $i},fDR:function(){return pS},A9S:function(){return Ct},Php:function(){return ot},c7c:function(){return kd},S5R:function(){return Id},ujK:function(){return _d},m_L:function(){return Ed},Y2u:function(){return Md},chk:function(){return Ld},J5c:function(){return wd},q$m:function(){return bd},q4q:function(){return Ad},PFH:function(){return Bd},H79:function(){return Ud},lou:function(){return Wd},Nol:function(){return xd},IE6:function(){return Nd},MBw:function(){return xk},Wvf:function(){return Dk},_HO:function(){return Rk},gRR:function(){return Lk},yRT:function(){return mk},KzX:function(){return Td},$AQ:function(){return Cd},bdf:function(){return Pd},om$:function(){return Fd},GKo:function(){return Dd},wke:function(){return Rd},fdv:function(){return Wm},vYO:function(){return Um},cXq:function(){return RS},c$4:function(){return JS},QYr:function(){return QS},wop:function(){return YS},Kdh:function(){return HS},Pc$:function(){return WS},xPl:function(){return FS},LCb:function(){return VS},R9m:function(){return DS},v2K:function(){return qS},oHd:function(){return NS},EuH:function(){return zS},sTM:function(){return eC},oy8:function(){return US},Wtq:function(){return OS},rHl:function(){return ZS},cNQ:function(){return GS},jGO:function(){return _S},R4R:function(){return $S},UKl:function(){return XS},k6j:function(){return jS},M4n:function(){return BS},EIL:function(){return KS},COO:function(){return Hm},dhV:function(){return Mt},p_L:function(){return kb},eUy:function(){return Pb},m8X:function(){return Tb},wMp:function(){return Dt},QWk:function(){return Lt},yHB:function(){return Rt},vo0:function(){return mS},Bis:function(){return _T},yJi:function(){return NT},$oH:function(){return BT},qS2:function(){return DT},Ay$:function(){return Ap},OC2:function(){return OT},w5E:function(){return FT},THd:function(){return Js},hxo:function(){return Rf},PMq:function(){return Lf},srQ:function(){return Yc},dw4:function(){return bb},WiH:function(){return Df},c4Q:function(){return zd},EOu:function(){return jd},SpS:function(){return Vd},Hx8:function(){return Bf},eEQ:function(){return gm},ybt:function(){return mm},h1Z:function(){return Wb},CCx:function(){return ul},KX1:function(){return rl},h58:function(){return hl},lyH:function(){return nl},BNX:function(){return tl},stP:function(){return al},ZLh:function(){return il},YYA:function(){return ol},n_f:function(){return cl},jWK:function(){return pl},mIN:function(){return el},xTX:function(){return Xd},DJq:function(){return gl},UWM:function(){return sl},SCD:function(){return dl},ox2:function(){return ll},yaB:function(){return xt},FsZ:function(){return cd},LwW:function(){return hr},Nxj:function(){return gr},Sf4:function(){return wk},Ymy:function(){return Sk},tVV:function(){return Ck},mOg:function(){return bk},x10:function(){return Wy},Aw9:function(){return Ny},lxm:function(){return Fy},wtK:function(){return Uy},kCY:function(){return _y},My6:function(){return Ry},xx:function(){return Hy},xuo:function(){return _g},H4x:function(){return _},hT$:function(){return Ir},pj$:function(){return Rr},X4U:function(){return tk},RPe:function(){return $r},WCL:function(){return Lr},b1D:function(){return Cr},D6z:function(){return ek},pwT:function(){return Dr},ruE:function(){return Ur},f7t:function(){return Wr},sq0:function(){return fg},x8M:function(){return Or},gJK:function(){return Vr},Xb$:function(){return wr},JIJ:function(){return yr},ZX_:function(){return ZT},syw:function(){return XT},HEk:function(){return gk},_Y2:function(){return O},OPi:function(){return L},s$v:function(){return xr},A0i:function(){return Pr},S6L:function(){return Er},kgv:function(){return qr},sCZ:function(){return Gr},TyD:function(){return Hr},_Rg:function(){return Mr},nTL:function(){return F},G1Z:function(){return D},_lB:function(){return R},AYT:function(){return B},DyR:function(){return Sr},ib1:function(){return yg},XM_:function(){return Nr},z$F:function(){return x},pBE:function(){return zr},zEz:function(){return kr},kKw:function(){return Tr},Yis:function(){return N},jUm:function(){return _r},zpf:function(){return Ar},VW_:function(){return nk},qq_:function(){return Br},OLe:function(){return Fr},ZI3:function(){return dr},ckW:function(){return pr},s7S:function(){return ur},Z3R:function(){return lr},FLG:function(){return mg},F$$:function(){return Vm},dVt:function(){return gp},K7e:function(){return Lo},oo_:function(){return yb},VTy:function(){return gv},kE8:function(){return mv},XnB:function(){return fv},U7j:function(){return ed},IVG:function(){return Xc},cM_:function(){return nd},mfB:function(){return Zc},kiM:function(){return td},Q3R:function(){return Io},j0J:function(){return wo},Kdk:function(){return fo},uBh:function(){return Ao},m3w:function(){return ko},sg4:function(){return So},B0A:function(){return Po},I9w:function(){return No},nDr:function(){return yo},Uqx:function(){return To},Ijl:function(){return bo},Vl:function(){return Co},e8l:function(){return vo},nFE:function(){return Eo},nnD:function(){return po},IX6:function(){return Ri},Zsh:function(){return Li},ZY0:function(){return mo},B70:function(){return Jr},pzZ:function(){return Kr},v1x:function(){return Qr},nWA:function(){return to},dZj:function(){return go},YlS:function(){return jr},NYk:function(){return no},uIb:function(){return oo},cFY:function(){return Yr},fSk:function(){return ho},G0I:function(){return so},sep:function(){return co},u$0:function(){return lo},HH2:function(){return ro},$Yi:function(){return Ew},Ef_:function(){return Db},LP$:function(){return eo},n8F:function(){return uv},YhM:function(){return io},uth:function(){return uo},M3l:function(){return ao},BAb:function(){return Zd},tQ2:function(){return Uo},Rgo:function(){return Ch},Smg:function(){return Sh},W1B:function(){return bh},jQb:function(){return yh},QJe:function(){return hh},CDI:function(){return uh},eD0:function(){return Qp},y6M:function(){return wh},KEP:function(){return Kp},YLV:function(){return fh},VPR:function(){return rh},LLm:function(){return oh},vCG:function(){return Yp},V_e:function(){return ah},ck_:function(){return ph},iB1:function(){return lh},vxy:function(){return sh},YVN:function(){return Th},jAy:function(){return Jp},vif:function(){return kh},a$Z:function(){return vh},v5s:function(){return Ph},RSD:function(){return Zp},bri:function(){return th},e88:function(){return ih},TRT:function(){return gh},TzH:function(){return mh},Fh_:function(){return ch},hqX:function(){return dh},vas:function(){return eh},azB:function(){return nh},MUC:function(){return Xp},$HJ:function(){return Hs},Od5:function(){return Ls},lG7:function(){return Gs},yPw:function(){return qs},pOl:function(){return Rs},lGs:function(){return Ws},OnJ:function(){return _s},X1V:function(){return Os},rUV:function(){return Us},k28:function(){return $s},_wC:function(){return Ns},OE6:function(){return Bs},nsS:function(){return Ds},uSS:function(){return Fs},oq6:function(){return Xi},mnt:function(){return u},EYX:function(){return Ow},huY:function(){return xw},hy5:function(){return Mw},VEM:function(){return Bw},NNy:function(){return Dw},rey:function(){return Fw},czH:function(){return Lw},uzv:function(){return Rw},GQ:function(){return l}});var i=n(12184);const r=i.z.Alert,o=i.z.NoAlert,a=i.z.HighImpact,s=i.z.Critical,c=i.C.Fallback,d=(i.C.Exceptional,{build:""});function l(e){Object.assign(d,e)}function u(){return d}function p(e,t=i.z.Alert,n,r,o){const a={id:e,severity:t,pb:void 0===n?d:n};return void 0!==r&&(a.message=r),void 0!==o&&(a.source=o),a}function h(e,t){return{build:"",userImpacting:e,errorBehavior:t}}const g=p(8017,o),m=p(8018,o),f=p(8021,o),v=p(8022),y=p(8027,o),S=p(8028),C=p(8029),w=p(8030),b=p(8031),T=p(8032,a),k=p(8033,a),P=p(8034),A=p(8035),I=p(8036),E=p(8037),M=p(8047),x=p(8100,a,h(!0)),L=p(8101,o),R=p(8102,o),D=p(8103,r,h(!0)),F=p(8104,r,h(!0)),O=p(8105,o),B=p(8107,o),N=p(8108,r,h(!0)),_=p(8109,o),U=p(8183),W=p(8184),H=p(8185),$=p(8186),q=p(8187),G=p(8189),V=p(8190),z=p(8191),j=p(8192),K=p(8203),Q=p(8230),J=p(8291,o),Y=p(8380),Z=p(8381),X=p(8601),ee=p(8602),te=p(8603),ne=p(8604),ie=p(8605),re=p(8606),oe=p(8607),ae=p(8608,o),se=p(8810,a),ce=p(8811,a),de=p(8812,a),le=p(8813,a),ue=p(8814,a),pe=p(8815,s,d,"Cookie Banner Element is missing"),he=p(8816,o,d,"Cookie Banner data-client-settings is invalid"),ge=p(8841,a),me=p(8842,s),fe=p(8843),ve=p(8844),ye=p(8845,s),Se=p(8846,s),Ce=p(8847),we=p(8848,a),be={LoadExperienceError:p(8941)},Te=p(9408),ke=p(9409),Pe=p(9425),Ae=p(9426),Ie=p(9427),Ee=p(9428),Me=p(9429),xe=p(9430),Le=p(9431),Re=p(9432),De=p(9433),Fe=p(9434),Oe=p(9435),Be=p(9436),Ne=p(9437),_e=p(9439),Ue=p(11103),We=p(12306),He=p(13e3),$e=p(13001),qe=p(13100),Ge=p(13101),Ve=p(13102),ze=p(13103),je=p(13104),Ke=p(13105),Qe=p(13108),Je=p(13114),Ye=p(13115),Ze=p(13116),Xe=p(13117),et=p(13119),tt=p(13120),nt=p(13121),it=p(13122,a),rt=p(13125),ot=p(13126),at=p(13127),st=p(13128),ct=p(13129),dt=p(13131),lt=p(13132),ut=p(13133),pt=p(13134),ht=p(13135),gt=p(13136),mt=p(13137),ft=p(13138),vt=p(13140),yt=p(13141),St=p(13142),Ct=p(13143,o),wt=p(13144),bt=p(14007),Tt=p(14102),kt=p(15200,o),Pt=p(15201,o),At=p(15202,o),It=p(15204,o),Et=p(15205),Mt=p(15250),xt=p(15303),Lt=p(15410),Rt=p(15411),Dt=p(15412,o),Ft=p(18100),Ot=p(18103),Bt=p(18104),Nt=p(18105),_t=p(18106),Ut=p(18107),Wt=p(18108),Ht=p(18109),$t=p(18110),qt=p(18111),Gt=p(18113),Vt=p(19e3),zt=p(19001),jt=p(19004,s,h(!0)),Kt=p(19006),Qt=p(19010),Jt=p(19013),Yt=p(19014),Zt=p(19016,o),Xt=p(19019),en=p(19021,o),tn=p(20007,o),nn=p(20008),rn=p(20009),on=p(20018),an=p(20066),sn=p(20068),cn=(i.z.NoAlert,p(20074)),dn=p(20075),ln=p(20076),un=p(20078),pn=p(20079),hn=p(20080),gn=p(20081),mn=p(20082,o),fn=p(20083),vn=p(20084),yn=p(20085),Sn=p(20086),Cn=p(20088),wn=p(20150),bn=p(20151),Tn=p(20152),kn=p(20153),Pn=p(20165),An=p(20166),In=p(20154),En=p(20155),Mn=p(20156),xn=p(20157),Ln=p(20158),Rn=p(20159),Dn=p(20162,a),Fn=p(20164),On=p(20171),Bn=p(20172),Nn=p(20173),_n=p(20174),Un=p(20175),Wn=p(20176),Hn=p(20177),$n=p(20178),qn=p(20179),Gn=p(20180),Vn=p(20181),zn=p(20182),jn=p(20184),Kn=p(20186),Qn=p(20188),Jn=p(20189),Yn=p(20190,o),Zn=p(20191,o),Xn=p(20203),ei=p(20204,o),ti=p(20205,o),ni=p(20209,o,d,"Service request failed all retries"),ii=p(20210,o,d,"1S request (assets.msn.*) failed. Retrying using backup domain (assets2.msn.*)"),ri=p(20302),oi=p(20303),ai=p(20304),si=p(22012),ci=p(22014,s,h(!0)),di=p(22019),li=p(22020),ui=p(22022,o),pi=p(22023,o),hi=p(22024,o),gi=p(22025,o),mi=p(22027),fi=p(22028),vi=p(22029,s),yi=p(22030,s),Si=(i.z.NoAlert,p(24507)),Ci=p(24508),wi=p(24520),bi=p(24521),Ti=p(24522),ki=p(24523),Pi=p(24524),Ai=p(24526),Ii=p(24571),Ei=p(24573),Mi=p(24574),xi="WindowsShellAccountManager.connector.ts",Li=p(24580,o,d,void 0,xi),Ri=p(24583,r,d,void 0,xi),Di=p(24601),Fi=p(24602),Oi=p(24603),Bi=p(24604),Ni=p(24606),_i=p(24607),Ui=p(24608),Wi=p(24611),Hi=p(24612),$i=p(24613),qi=p(24660,s),Gi=p(24700),Vi=p(24800),zi=p(28100,o),ji=p(28101),Ki=p(28102),Qi=p(28103),Ji=p(28110),Yi=p(28213,o),Zi=p(28216),Xi=p(28217),er=p(28401,o),tr=p(28410),nr=p(28411,o),ir=p(28414),rr=p(28415),or=p(28416),ar=p(28420),sr=p(28421),cr=p(28500),dr=p(29e3),lr=p(29001),ur=p(29002,o),pr=p(29003),hr=p(29100),gr=p(29101),mr=p(29102),fr=p(29103),vr=p(29105,o),yr=p(29503,o),Sr=p(29507,r,h(!0)),Cr=p(29508,r,h(!0)),wr=p(29522,r,h(!0)),br=p(29526,r,h(!0)),Tr=p(29530,o),kr=p(29532,o,h(!1)),Pr=p(29533,r,h(!0)),Ar=p(29535,a,h(!0)),Ir=p(29541,o,h(!1)),Er=p(29543,r,h(!0)),Mr=p(29544,o,h(!0)),xr=p(29545,a,h(!0)),Lr=p(29547,r,h(!0)),Rr=p(29548,a,h(!0)),Dr=p(29549,r,h(!0)),Fr=p(29557,r,h(!0)),Or=p(29565,r,h(!0)),Br=p(29566,o,h(!1)),Nr=p(29567,o,h(!1,c)),_r=p(29569,r,h(!0)),Ur=p(29580,a,h(!0)),Wr=p(29582,r,h(!0)),Hr=p(29585,o,h(!1)),$r=p(29586,r,h(!0)),qr=p(29590,r,h(!0)),Gr=p(29591,o,h(!0)),Vr=p(29593,o,h(!1)),zr=p(29599,o,h(!0)),jr=p(29603),Kr=p(29604),Qr=p(29605),Jr=p(29606,o),Yr=p(29608,o),Zr=p(29625,o),Xr=p(29635),eo=p(29690),to=p(29716),no=p(29719),io=p(29729,o),ro=p(29730),oo=p(29734,o),ao=p(29744,o),so=p(29751),co=p(29752),lo=p(29753),uo=p(29754),po=p(29756,o),ho=p(29757),go=p(29758),mo=p(29759,o),fo=p(29854),vo=p(29855),yo=p(29856),So=p(29857),Co=p(29858),wo=p(29860),bo=p(29861),To=p(29862),ko=p(29863),Po=p(29864),Ao=p(29865),Io=p(29866),Eo=p(29867),Mo=p(29901),xo=p(29903),Lo=p(29910),Ro=p(29923),Do=p(29924),Fo=p(29960),Oo=p(29961),Bo=p(29971),No=p(29972),_o=p(29977),Uo=p(29980),Wo=p(29992),Ho=p(29993),$o=p(29994),qo=p(33e3,o),Go=p(33012),Vo=p(33013,o),zo=p(33014),jo=p(33015,o),Ko=p(33018,o),Qo=p(33020),Jo=p(33100),Yo=p(33102),Zo=p(33103),Xo=p(33105),ea=p(33110),ta=p(33113,o),na=p(33130,s,h(!0)),ia=p(33140),ra=p(33151),oa=p(33152),aa=p(33160,s,h(!0)),sa=p(33161,s,h(!0)),ca=p(34005,o),da=p(34009,o),la=p(34013,o),ua=p(34014,a),pa=p(34015,a),ha=p(34016,o),ga=p(34022,a),ma=p(34024),fa=p(34027),va=p(34028,o),ya=p(35001),Sa=p(35003,o),Ca=p(35004),wa=p(35006),ba=p(35007),Ta=p(35008),ka=p(35009),Pa=p(35010),Aa=p(35013,o),Ia=p(35014),Ea=p(35015),Ma=p(35016),xa=p(35018),La=p(35019),Ra=p(35020),Da=p(35022,o),Fa=p(35023),Oa=p(35024,o),Ba=p(35025,o),Na=p(35026),_a=p(35117),Ua=p(35118),Wa=p(35119,o),Ha=p(35120),$a=p(35121),qa=p(35122),Ga=p(35123),Va=p(35124),za=p(35128),ja=p(35129,o),Ka=p(35130),Qa=p(35131),Ja=p(35132),Ya=p(35133),Za=p(35201),Xa=p(35203,o),es=p(35401,o),ts=p(35402),ns=p(35403,o),is=p(35404,o),rs=p(35600,o),os=p(35601,o),as=p(35602,o),ss=p(35603,o),cs=p(35604,o),ds=p(35605,o),ls=p(35606,o),us=p(35607,o),ps=p(35608,o),hs=p(35609,o),gs=p(35610,o),ms=p(35611,o),fs=p(35613,o),vs=p(35614,o),ys=p(35615,o),Ss=p(35616,o),Cs=p(35700),ws=p(35701),bs=p(36105),Ts=p(36106),ks=p(36107),Ps=p(36108),As=p(36109,o),Is=p(36111),Es=p(36113),Ms=p(36121,o),xs=p(36122),Ls=p(36300),Rs=p(36302),Ds=p(36309),Fs=p(36311),Os=p(36313),Bs=p(36314,o),Ns=p(36315),_s=p(36317,o),Us=p(36319,o),Ws=p(36320,o),Hs=p(36321),$s=p(36322),qs=p(36323,o),Gs=p(36324,o),Vs=p(36500),zs=p(36600),js=p(36601),Ks=p(36602),Qs=p(36603),Js=p(36604),Ys=p(36605),Zs=p(36606),Xs=p(36607),ec=p(36904),tc=p(36905),nc=p(36906),ic=p(36908),rc=p(36909),oc=p(36910),ac=p(36911),sc=p(36912),cc=p(36913),dc=p(36917),lc=p(36918),uc=p(36919),pc=p(36920),hc=p(36921),gc=p(36922),mc=p(36936),fc=p(36962,s,h(!0)),vc=p(36991,r,h(!1)),yc=p(37001),Sc=p(37014,r,h(!0)),Cc=p(37020),wc=p(37021),bc=p(37022),Tc=p(37023),kc=p(37024),Pc=p(37025),Ac=p(37026),Ic=p(37028),Ec=p(37029),Mc=p(37030),xc=p(37031),Lc=p(37032),Rc=p(37033),Dc=p(37035),Fc=p(37036),Oc=p(37037),Bc=p(37038),Nc=p(37039),_c=p(37040),Uc=p(37041),Wc=p(37042),Hc=p(37043),$c=p(37044),qc=p(37045),Gc=p(37046),Vc=p(37047),zc=p(37048),jc=p(37049),Kc=p(37050),Qc=p(37074),Jc=p(37075),Yc=p(37300,o),Zc=(i.z.NoAlert,p(37550)),Xc=p(37551),ed=p(37552),td=p(37553),nd=p(37554,o),id=p(37560),rd=p(37561),od=p(37562),ad=p(37563),sd=p(37566),cd=p(37568),dd=p(37571,r,h(!0)),ld=p(37573,r),ud=p(37576),pd=p(37577,r,h(!0)),hd=p(37578,o),gd=p(37579),md=p(37580),fd=p(37581),vd=p(37582),yd=p(37583,o),Sd=p(37584),Cd=p(37601),wd=p(37604),bd=p(37605),Td=p(37609),kd=p(37610),Pd=p(37611),Ad=p(37612,r,h(!0)),Id=p(37613),Ed=p(37614),Md=p(37629),xd=p(37631),Ld=p(37632),Rd=p(37634,o),Dd=p(37635,o),Fd=p(37636,o),Od=p(37637),Bd=p(37638),Nd=p(37639),_d=p(37640),Ud=p(37641),Wd=p(37642),Hd=p(38e3),$d=p(38001,o),qd=p(38002,o),Gd=p(38003,o),Vd=p(38005),zd=p(38006,o),jd=p(38007,o),Kd=p(38008,o),Qd=p(38009,o),Jd=p(38046,s),Yd=p(38055),Zd=p(38056),Xd=p(38101),el=p(38102),tl=p(38104),nl=p(38105),il=p(38112),rl=p(38116),ol=p(38117),al=p(38118),sl=p(38119,o),cl=p(38120),dl=p(38124,o),ll=p(38125),ul=p(38127),pl=p(38128,o),hl=p(38129),gl=p(38130,o),ml=p(38300,a,h(!0)),fl=p(38301,a,h(!0)),vl=p(38302),yl=p(38303),Sl=p(38304),Cl=p(38305),wl=p(38306),bl=p(38307),Tl=p(38318),kl=p(38319,a,h(!0)),Pl=p(38320),Al=p(38321,a,h(!0)),Il=p(38322,a,h(!0)),El=p(38323),Ml=p(38324),xl=p(38325),Ll=p(38327,a),Rl=p(38328),Dl=p(38329),Fl=p(38331,a,h(!0)),Ol=p(38334,r,h(!0)),Bl=p(38342),Nl=p(38344),_l=p(38345),Ul=p(38346),Wl=p(38347),Hl=p(38348),$l=p(38360),ql=p(38362),Gl=p(38363),Vl=p(38364),zl=p(38365,s),jl=p(38366),Kl=p(38367),Ql=p(38369),Jl=p(38370),Yl=p(38373),Zl=p(38600),Xl=p(38601),eu=p(38602),tu=p(38603),nu=p(38604),iu=p(38605),ru=p(38606),ou=p(38607,o),au=p(38608,o),su=p(38800),cu=p(38801),du=p(38802),lu=p(38803),uu=p(38903),pu=p(38904),hu=p(38905),gu=p(38906),mu=p(38907),fu=p(38908),vu=p(38909),yu=p(38910),Su=p(38911),Cu=p(38912),wu=p(38913),bu=p(39e3),Tu=p(39001),ku=p(39002),Pu=p(39003),Au=p(39005),Iu=p(39006),Eu=p(39007),Mu=p(39008),xu=p(39009),Lu=p(39010),Ru=p(39011),Du=p(39012),Fu=p(39200),Ou=p(39201),Bu=p(39202),Nu=p(39203),_u=p(39204),Uu=p(39205),Wu=p(39206),Hu=p(39207),$u=p(39208),qu=p(39209),Gu=p(39210),Vu=p(39211),zu=p(39212),ju=p(39213),Ku=p(39214),Qu=p(39215,o),Ju=p(39216,o),Yu=p(39217,o),Zu=p(39218),Xu=p(39219),ep=p(39220),tp=p(39221),np=p(39222),ip=p(39223),rp=p(39230),op=p(39231),ap=p(39232),sp=p(39233),cp=p(39234,o),dp=p(39235,o),lp=p(39236),up=p(39237,o),pp=p(39238,o),hp=p(39300),gp=p(39400),mp=p(39500),fp=p(39501),vp=p(39502),yp=p(39508),Sp=p(39509),Cp=p(39510),wp=p(39511),bp=p(39512),Tp=p(39513),kp=p(39514),Pp=p(39515),Ap=p(39517),Ip=p(39518),Ep=p(39519),Mp=p(39520),xp=p(39521),Lp=p(39600),Rp=p(39601),Dp=p(39602),Fp=p(39603),Op=p(39700),Bp=p(39701),Np=p(39708,o),_p=p(39712),Up=p(39713,o),Wp=p(39714),Hp=p(39715),$p=p(39716,o),qp=p(39717),Gp=p(39718),Vp=p(39719),zp=p(39720),jp=p(39901),Kp=p(40301,a),Qp=p(40302,a),Jp=p(40303,o),Yp=p(40304,a),Zp=p(40308),Xp=p(40310,o),eh=p(40312,a),th=p(40313,a),nh=p(40314),ih=p(40315),rh=p(40318),oh=p(40319),ah=p(40320),sh=p(40321,o),ch=p(40322,a),dh=p(40323,a),lh=p(40324,o),uh=p(40325,o),ph=p(40326,a),hh=p(40327,a),gh=p(40328,o),mh=p(40329,o),fh=p(40331),vh=p(40332),yh=p(40333,o),Sh=p(40334,o),Ch=p(40335,o),wh=p(40336,a),bh=p(40337,a),Th=p(40338,o),kh=p(40339,o),Ph=p(40340,o),Ah=p(40500),Ih=p(40520,o),Eh=p(40600,o),Mh=p(40601,o),xh=p(40604),Lh=p(40605),Rh=p(40606),Dh=p(40607),Fh=p(40608),Oh=p(40609),Bh=p(40700),Nh=p(40701),_h=p(40702),Uh=p(41e3),Wh=p(41001),Hh=p(41002),$h=p(41003),qh=p(41005),Gh=p(41006),Vh=p(41007),zh=p(41009),jh=p(41010,o),Kh=p(41011,o),Qh=p(41012,o),Jh=p(41013,o),Yh=p(41014),Zh=p(41216),Xh=p(41217),eg=p(41218),tg=p(41224),ng=p(41225),ig=p(41226),rg=p(41271,s),og=p(41350),ag=p(41402),sg=p(41405),cg=p(41415),dg=p(41416),lg=p(41417,o),ug=p(41420),pg=p(41421),hg=p(41611),gg=p(41900),mg=p(42601),fg=p(42602),vg=p(42603),yg=p(42604),Sg=p(43e3),Cg=p(43011),wg=p(43012,o),bg=p(43310),Tg=p(43500),kg=p(43511),Pg=p(43600),Ag=p(43601),Ig=p(43604,s),Eg=p(43605),Mg=p(43854),xg=p(43968),Lg=p(43970),Rg=p(43985),Dg=p(40001),Fg=p(40002),Og=p(40003),Bg=p(44e3),Ng=p(44003),_g=p(44200),Ug=p(44201,s),Wg=p(44300),Hg=p(44500),$g=p(44501,o),qg=p(44502),Gg=p(44503,o),Vg=p(44504),zg=p(44505,o),jg=p(44506),Kg=p(44507,o),Qg=p(44508),Jg=p(44509,o),Yg=p(44510),Zg=p(44511,o),Xg=p(44512),em=p(44513),tm=p(44514,o),nm=p(44515),im=p(44516),rm=p(44517),om=p(44518,o),am=p(44519),sm=p(44520),cm=p(44521),dm=p(44522),lm=p(44523,o),um=p(44524,o),pm=p(44525,o),hm=p(44700),gm=p(44701),mm=p(44702),fm=p(44703),vm=p(44704),ym=p(44705),Sm=p(44706),Cm=p(44707),wm=p(44708),bm=p(44709),Tm=p(44710),km=p(44711),Pm=p(44712),Am=p(44720),Im=p(44721),Em=p(44722),Mm=p(44724),xm=p(44725),Lm=p(44726),Rm=p(44727,o),Dm=p(44728,o),Fm=p(44729,o),Om=p(44730,o),Bm=p(44731,o),Nm=p(44750),_m=p(44752),Um=p(45700),Wm=p(72001),Hm=p(45706,r,h(!0)),$m=p(46e3),qm=p(46001),Gm=p(46216,s),Vm=p(46222,s),zm=p(47101),jm=(i.z.NoAlert,p(47701)),Km=p(47702),Qm=p(47703,s),Jm=p(47704),Ym=p(47710),Zm=p(47712),Xm=p(47713),ef=p(50001),tf=p(50005),nf=p(50008),rf=p(50009),of=p(50011,s),af=p(50013),sf=p(50014),cf=p(50017),df=p(50025,s),lf=p(50027),uf=p(50030),pf=p(50031),hf=p(50032),gf=p(50033),mf=p(50041),ff=p(50042),vf=p(50043),yf=p(50045),Sf=p(50046),Cf=p(50048),wf=p(50049),bf=p(50050),Tf=p(50053,s),kf=p(50054),Pf=p(50061),Af=p(50062),If=p(50063),Ef=p(50064),Mf=p(50065),xf=p(50066),Lf=p(50100),Rf=p(50101),Df=p(50400,o),Ff=p(50401),Of=p(50402),Bf=p(50403),Nf=p(52101),_f=p(53101),Uf=p(53102),Wf=p(53103),Hf=p(53104,o),$f=p(53105),qf=p(53106,o),Gf=p(53107),Vf=p(53108),zf=p(53111),jf=p(53112,o),Kf=p(53320),Qf=p(53321),Jf=p(53322),Yf=p(53323),Zf=p(53324),Xf=p(53325),ev=p(53326),tv=p(53700),nv=p(53800,r,d,void 0,"libs/feed-layout/.../healthFitnessCardDataMapper.ts"),iv=p(53801),rv=p(53802),ov=p(53944),av=p(53952),sv=p(53972),cv=p(54401),dv=p(54437),lv=p(60004),uv=p(60014,o),pv=p(60020),hv=p(60021),gv=p(60715,o),mv=p(60716,o),fv=p(60717,o),vv=p(60101),yv=p(60102),Sv=p(60103),Cv=p(60104),wv=p(60105),bv=p(60106),Tv=p(60107),kv=p(60108),Pv=p(60109),Av=p(60110),Iv=p(60111),Ev=p(60114),Mv=p(60115),xv=p(60116),Lv=p(60117,o),Rv=p(60118,o),Dv=p(60119),Fv=p(60120),Ov=p(60125),Bv=p(60126),Nv=p(60127),_v=p(60128),Uv=p(60129),Wv=p(60130),Hv=p(60132,o),$v=p(60134,o),qv=p(60135,o),Gv=p(60136,o),Vv=p(60137,o),zv=p(60138,s),jv=p(60139,o),Kv=p(60140,o),Qv=p(60141,o),Jv=p(60142,a),Yv=p(60143),Zv=p(60145,o),Xv=p(60146,o),ey=p(60147),ty=p(60148),ny=p(60149),iy=p(60150),ry=p(60151,a),oy=p(60152,a),ay=p(60153,o),sy=p(60154,a),cy=p(60155,o),dy=p(60156,a),ly=p(60157,o),uy=p(60158,o),py=p(60160,o),hy=p(60161,a),gy=p(60162,o),my=p(60163,o),fy=p(60165),vy=p(60166),yy=p(60168,o),Sy=p(60169),Cy=p(60170),wy=p(60239),by=p(60240),Ty=p(60241,o),ky=p(60242),Py=p(60243),Ay=p(60244),Iy=p(60245),Ey=p(60246),My=p(60247,s),xy=p(60248,o),Ly=p(60250,o),Ry=p(60252,o),Dy=p(60259),Fy=p(60260,o),Oy=p(60261,o),By=p(60262,o),Ny=p(60265),_y=p(60266),Uy=p(60267),Wy=p(60268),Hy=p(60269),$y=p(60270),qy=p(60271),Gy=p(60272),Vy=p(60400),zy=p(60401),jy=p(60402),Ky=p(60403),Qy=p(60404),Jy=p(60405,o),Yy=p(60406),Zy=p(60407),Xy=p(60408),eS=p(60409),tS=p(60410),nS=p(60411,o),iS=p(60412),rS=p(60413),oS=p(60414),aS=p(60416),sS=p(60417),cS=p(60418),dS=p(60420),lS=p(60421),uS=p(60422),pS=p(60430),hS=p(60475),gS=p(60500),mS=p(60600),fS=p(60800),vS=p(60801),yS=p(60900),SS=p(60901),CS=p(61e3),wS=p(7e4,a),bS=p(70001,a),TS=p(70010),kS=p(70011),PS=p(70012),AS=p(70013),IS=p(70014,s),ES=p(70015,s),MS=p(70100),xS=p(70101),LS=p(70104),RS=p(70202),DS=p(70203),FS=p(70204),OS=p(70205),BS=p(70206),NS=p(70207),_S=p(70208),US=p(70209),WS=p(70210),HS=p(70211),$S=p(70212),qS=p(70213),GS=p(70214),VS=p(70216),zS=p(70217),jS=p(70218),KS=p(70219),QS=p(70221),JS=p(70222),YS=p(70223),ZS=p(70224),XS=p(70225),eC=p(70227),tC=p(70300),nC=p(70400),iC=p(70401),rC=p(70402),oC=p(70403),aC=p(70404),sC=p(70406,i.z.NoAlert),cC=p(70407,i.z.NoAlert),dC=p(70408),lC=p(70409),uC=p(70410,i.z.NoAlert),pC=p(70602),hC=p(70603),gC=p(70604),mC=p(70605),fC=p(70606),vC=p(70607),yC=p(70700),SC=p(70701),CC=p(70702),wC=p(70703),bC=p(70704),TC=p(70705),kC=p(70706),PC=p(70707),AC=p(70708),IC=p(71002),EC=p(71003),MC=p(71005,i.z.NoAlert),xC=p(73011),LC=p(73012),RC=p(73013),DC=p(73021),FC=p(73030),OC=p(73040),BC=p(73052),NC=p(73053),_C=p(73054),UC=p(73100),WC=p(73101),HC=p(73102),$C=p(73103),qC=p(73104),GC=p(73105),VC=p(73106),zC=p(73107),jC=p(73108),KC=p(73209,r,h(!1)),QC=p(73210,r,h(!0)),JC=p(73211),YC=p(73212,a),ZC=p(73213,a),XC=p(73215,r,h(!0)),ew=p(73253,a,h(!1)),tw=p(73255,a,h(!0)),nw=p(73256,a,h(!0)),iw=p(73257,a,h(!0)),rw=p(73258,a,h(!0)),ow=p(73259,a,h(!1)),aw=p(73260),sw=p(73261,r,h(!0)),cw=p(73262,a,h(!0)),dw=p(73263,a,h(!0)),lw=p(73264,a,h(!1)),uw=p(73265),pw=p(73266,a,h(!1)),hw=p(73267,a,h(!1)),gw=(i.z.HighImpact,i.z.HighImpact,i.z.HighImpact,i.z.HighImpact,p(80050)),mw=p(80051),fw=p(80052),vw=p(80053),yw=p(80054,o),Sw=p(80055,o),Cw=p(80056),ww=p(80057),bw=p(80058),Tw=p(80105),kw=p(85e3),Pw=p(85001),Aw=p(85002),Iw=p(85003),Ew=p(90108,o),Mw=p(90300),xw=p(90301,o),Lw=p(90303),Rw=p(90305),Dw=p(90306),Fw=p(90307),Ow=p(90308,o),Bw=p(90309,o),Nw=p(91e3),_w=p(91001),Uw=p(91002),Ww=p(91004),Hw=p(91005),$w=p(95001),qw=p(100004),Gw=p(100011),Vw=p(100022),zw=p(100024),jw=p(100032),Kw=p(100036),Qw=p(100042),Jw=p(100046),Yw=p(100054),Zw=p(101003),Xw=p(101104),eb=p(101200),tb=p(101201),nb=p(101202),ib=p(101203),rb=p(101204),ob=p(101205),ab=p(110043),sb=p(111001,o),cb=p(111010,o),db=p(111020,o),lb=p(111030,o),ub=p(111041,o),pb=p(111042,o),hb=p(111043,o),gb=p(111050,o),mb=p(111051,o),fb=p(111100),vb=p(111103),yb=p(111106),Sb=p(111110),Cb=p(111300),wb=p(111402),bb=p(112001,o),Tb=p(120001),kb=p(120002),Pb=p(120003),Ab=p(120010),Ib=p(120011),Eb=p(125001),Mb=p(125002),xb=p(130002),Lb=p(130003),Rb=p(130004,o),Db=p(131052),Fb=p(133100),Ob=p(133101),Bb=p(133200),Nb=p(134e3),_b=p(135020),Ub=p(135021),Wb=p(135022),Hb=p(135040,o),$b=p(135041,o),qb=p(135042),Gb=p(135043),Vb=p(135044),zb=p(135045),jb=p(135046,o),Kb=p(135100),Qb=p(135101),Jb=p(135102,r,h(!0)),Yb=p(135103,r,h(!0)),Zb=p(135104,a,h(!0)),Xb=p(135105),eT=p(135106,r,h(!0)),tT=p(135107,r,h(!0)),nT=p(136015),iT=p(136016),rT=p(136017),oT=(i.z.NoAlert,p(140100)),aT=p(140101),sT=p(140104),cT=p(140105),dT=p(140106),lT=p(140107),uT=p(143e3,o),pT=p(143001,s),hT=p(143002,s),gT=p(143003,s),mT=p(144e3),fT=p(147e3),vT=p(222201,o),yT=p(222223),ST=p(223e3),CT=p(223001),wT=p(223002),bT=p(223004),TT=p(223050),kT=p(223060),PT=p(223062,o),AT=p(223100),IT=p(223101),ET=p(223200),MT=p(223201),xT=p(223202),LT=p(223203,s),RT=p(223204),DT=p(223300,o),FT=p(223301),OT=p(223302),BT=p(223303,o),NT=p(223304,o),_T=p(223305,o),UT=p(224100,s,h(!0)),WT=p(224101),HT=p(224102),$T=p(224103),qT=p(224200),GT=p(224201),VT=p(224300),zT=p(224301),jT=p(224302,s),KT=p(224400,o),QT=p(224401,o),JT=p(224500,s,h(!0)),YT=p(224502),ZT=p(295103,o),XT=p(295104,o),ek=p(295100,o),tk=p(295101,o),nk=p(295102,o),ik=p(295200),rk=p(295201),ok=p(300001),ak=p(30002),sk=p(30003,i.z.NoAlert),ck=p(30004,i.z.NoAlert),dk=p(30005),lk=p(30006),uk=p(30007,i.z.NoAlert),pk=p(295205),hk=p(295206),gk=p(295207),mk=p(295208),fk=p(295209),vk=p(295210),yk=p(295220),Sk=p(295250),Ck=p(295251),wk=p(295252),bk=p(295253),Tk=p(295254),kk=p(295255),Pk=p(295402),Ak=p(295406),Ik=p(295407),Ek=p(295408),Mk=p(295409),xk=p(295500,s),Lk=p(295501),Rk=p(295502),Dk=p(295503),Fk=p(1600,a),Ok=p(1602,a),Bk=p(1606,a),Nk=p(31e4,o),_k=p(310001,o)},41181:function(e,t,n){"use strict";n.d(t,{M:function(){return p}});var i=n(1970),r=n(84147),o=n(26482),a=n(95912),s=n(53723);class c extends s.i{constructor(e,t,n,i,r,o,a){super(t,n,i,r,o,a),this.RequestId=e}set isMetrics(e){this._isMetrics=e}get isMetrics(){return this._isMetrics}}var d=n(67509),l=n(31558),u=n(45933);class p{constructor(e,t=""){this.requestId=t,(0,l.N)()?(this.logger=o.e.getInstance("ExperienceLogger",r.i.Info,d.N.Browser),this.isDebugEnabled=((0,u._)(e,"debug")||"").toLowerCase()in{1:1,true:1}||"vp"===((0,u._)(window.location.href,"reqsrc")||"").toLowerCase(),this.isDebugEnabled&&!n.g.TEST_ENV&&(window.webpackRequire=n)):(this.logger=o.e.getInstance("ExperienceLogger",r.i.Info,d.N.NodeJs),this.isDebugEnabled=!1),this.setupLogLevel()}getLoggingService(){return this.logger}isDebug(){return this.isDebugEnabled}setDebug(e){this.isDebugEnabled=e,this.setupLogLevel()}setTags(e){this.tags=e}log(e,t){if(!this.tags||!this.tags.length||t&&t.length&&t.filter((e=>this.tags.includes(e))).length>0){const t=new c(this.requestId,e);this.logger.info(t)}}logError(e){const t=new c(this.requestId,e);this.logger.error(t)}logCallback(e){this.logger.infoCallback(e)}logObjects(...e){const t=new c(this.requestId,null,e);this.logger.info(t)}logSingleObject(e,t=!1){const n=new c(this.requestId,null,e);n.isMetrics=t,this.logger.info(n)}setupLogLevel(){this.logger.setLevel(this.isDebug()?r.i.Info:r.i.Error),this.setupAppenders()}setupAppenders(){this.logger.removeAllAppenders(),(0,l.N)()?this.logger.addAppender(new i.N(this.logger.getLevel())):this.logger.addAppender(new a.m(this.logger.getLevel()))}}},88826:function(e,t,n){"use strict";n.d(t,{H:function(){return s},OO:function(){return a},Tr:function(){return c}});var i=n(23549),r=n(7476),o=n(56687);function a(e,t,n,r,a={}){const s=c(t,n,r||(0,o.n)(e),a);s.pb.stack=e&&e.stack||void 0,i.M0&&i.M0.sendAppErrorEvent(s)}function s(e,t,n,r={},o=!0){i.M0&&i.M0.sendAppErrorEvent(c(e,t,n,r),o)}function c(e,t,n,i={}){const o=(0,r.mnt)();return{...e,message:t||e.message,pb:n?{...o,...e.pb,customMessage:n,...i,w:1}:{...o,...e.pb,...i,w:1}}}},53875:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var i=n(45933),r=n(31558);class o{constructor(){(0,r.N)()?(this.isDebugEnabled=((0,i._)(window.location.href,"debug")||"").toLowerCase()in{1:1,true:1}||"vp"===((0,i._)(window.location.href,"reqsrc")||"").toLowerCase(),this.isDebugEnabled&&!n.g.TEST_ENV&&(window.webpackRequire=n)):this.isDebugEnabled=!1}getLoggingService(){return null}isDebug(){return this.isDebugEnabled}setDebug(e){this.isDebugEnabled=e}setTags(e){}log(e,t){this.isDebug()&&console.info(e)}logError(e){console.error(e)}logCallback(e){this.isDebug()&&console.info(e())}logObjects(...e){this.isDebug()&&console.log(...e)}logSingleObject(e,t){this.isDebug()&&console.log(e)}}},76733:function(e,t,n){"use strict";function i(e){r=e}n.d(t,{E:function(){return i},k:function(){return r}});let r=new(n(53875).C)},38869:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});var i=n(96489),r=n(78672);const o=(0,i.pn)();!function(){var e;const t=null===(e=(0,r.l4)())||void 0===e||null===(e=e.match(/ems=([\d]+)/))||void 0===e?void 0:e[1];o.set(t&&parseInt(t)||5)}();const a=e=>Math.floor(101*Math.random())<=(e||o.get())},45933:function(e,t,n){"use strict";function i(e,t){const n=t.replace(/[[\]]/g,"\\$&"),i=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)").exec(e);if(!i)return null;const r=i[2];return decodeURIComponent(r.replace(/\+/g," "))||""}n.d(t,{_:function(){return i}})},92062:function(e,t,n){"use strict";n.d(t,{Y:function(){return i},c:function(){return o}});var i,r=n(76733);function o(e){try{const t=new URL(e).searchParams,n=t.get("expPerf"),r=t.get("expPerfSkip");if("all"==r)return{enablePerfTimeline:!1};if(!r&&!n)return{};const o={enablePerfTimeline:!0,uploadTrace:!1,sampleRate:1,uploadCriteria:{minimumTTVR:0}};if("all"===n)o.trackAllExp=!0,o.experiencesExcludedForPerf={};else if(n){const e=o.experiencesForPerf={};n.split(",").forEach((t=>e[t]=!0))}if(r){const e=o.experiencesExcludedForPerf={};r.split(",").forEach((t=>e[t]=!0))}"true"===t.get("expPerfMarks")&&(o.addPerformanceMarks=!0),"true"===t.get("expPerfTimings")&&(o.addPageTimings=!0);const a=parseInt(t.get("expPerfLevel"));return o.traceLevel=null!=i[a]?a:i.default,o}catch(e){return r.k.logError("Error parsing URL for detecting experience diagnostic switches: "+e),{}}}!function(e){e[e.default=0]="default",e[e.medium=1]="medium",e[e.high=2]="high"}(i||(i={}))},31718:function(e,t,n){"use strict";n.d(t,{Xn:function(){return x},dj:function(){return A},iG:function(){return M},g7:function(){return P},FH:function(){return I},Im:function(){return E}});var i=n(92062),r=n(42933),o=n(35164),a=n(96489),s=n(31558),c=n(15570),d=n(90048),l=n(10754),u=n(73898);const p=(0,a.WG)((()=>new d.K));p.unset();const h="-start",g="-end";class m{constructor(e,t,n,i,r){var o;this.timelineName=e,this.instanceId=t,this.addPerfMarks=n,this.addPageTimings=i,this.async=r,this.measures=new y,this.timeRange=[1/0,-1/0],this.timelineName=(o=e,p.get().qualifyKey(o))}get timeSpan(){const[e,t]=this.timeRange;if(e!==1/0&&t!==-1/0)return[e,t-e]}startMeasure(e,t,n){const{async:i,startTime:r}=n||{},o=C(r);if(null==o)return{endMeasure:u.Z};const{timeRange:a}=this;o<a[0]&&(a[0]=o);const s=v(e,t),c=this.measures.add({coreName:s,from:o,async:null!=i?i:this.async,idSuffix:""},n);return{endMeasure:n=>{const{customSuffix:i,customData:r,endTime:s}=n||{},d=C(s);if(null==d||d<o)return;if(i&&t!==i){const t=v(e,i);this.measures.rename(c,t)}c.to=d,c.customData=r,d>a[1]&&(a[1]=d);!function(e,t,n,i){if(!n&&!i)return;const{from:r,to:o}=t;if(null!=r){const t=e+h,a=(0,l.Ou)();if(n&&(a[t]=r),i&&performance.mark(t,{startTime:r}),null!=o&&(n&&(a[e]=o-r),i)){const n=e+g;performance.mark(n,{startTime:o}),performance.measure(e,t,n)}}}(S(this.timelineName,c),c,this.addPageTimings,this.addPerfMarks)}}}rename(e){if(this.timelineName!==e){if(this.addPageTimings){const t=this.timelineName,n=(0,l.Ou)();this.measures.get().forEach((i=>{const r=S(t,i);delete n[r+h],delete n[r];const o=S(e,i);n[o+h]=i.from,n[o]=i.to-i.from}))}this.timelineName=e}}getPageMeasures(){return this.measures.get().map((e=>({...e,timelineName:this.timelineName})))}getMeasureValues(e){return this.measures.get(e)}instrumentFunc(e,t,n){return(...i)=>{const r=this.startMeasure(e).endMeasure;try{const e=t.apply(n,i);return e instanceof Promise?f(e,r):r(),e}catch(e){r({customSuffix:"error"})}}}instrumentPromise(e,t,n){const i=this.startMeasure(e,null,n).endMeasure;return f(t(),i)}}function f(e,t){return e.then((()=>t())).catch((()=>t({customSuffix:"error"}))),e}function v(e,t){return t?`${e}-${t}`:e}class y{constructor(){this.list=[],this.entList=[],this.map=new Map}add(e,t){return t&&t.entityMeasure?this.entList.push(e):this.list.push(e),this.addToMap(e)}addToMap(e){const t=e.coreName;let n=this.map.get(t);return!n&&this.map.set(t,n=[]),e.idSuffix=(0,d.p)(n.length),n.push(e),e}get(e){const{coreName:t,entityMeasures:n}=e||{};let i;return i=t?this.map.get(t)||[]:n?this.entList:!1===n?this.list:[...this.list,...this.entList],i}rename(e,t){const n=e.coreName;if(n==t)return;const i=this.map.get(n),r=i.indexOf(e);if(r>=0){i.splice(r,1);for(let e=r,t=i.length;e<t;e++)i[e].idSuffix=(0,d.p)(e);e.coreName=t,this.addToMap(e)}}}function S(e,t){return`${e}-${t.coreName}${t.idSuffix}`}function C(e){return null==e?(0,l.UE)():"number"==typeof e&&e>=0?e:void 0}var w=n(53179),b=n(29330);const T=(0,a.pn)(),k=(0,a.WG)((()=>({})));function P(e,t){(0,r.S4)(t),function(e){Object.assign(k.get(),T.set((0,i.c)(e)))}(e)}function A(){return k.get()}function I(e){const t=k.get();t.enablePerfTimeline=e,t.trackAllExp=e,t.enableEntityMetricsTimeline=e,t.traceLevel=i.Y.default,!(0,s.N)()&&(0,b.xb)(e)}const E=(e,t,n)=>function(e){const t=k.get();if(!t.enablePerfTimeline)return!1;const{experiencesForPerf:n}=t;if(n&&n[e])return!0;const{experiencesExcludedForPerf:i}=t;if(i&&i[e])return!1;return t.trackAllExp}(e)?function(e,t,n){const i=L(e,t),o=w.j.get(),a=k.get();return o[i]||(o[i]=(0,r.uk)(m,e,t,a.addPerformanceMarks,a.addPageTimings,n))}(e,t,n):void 0;function M(){const e=[],t=w.j.get();return Object.keys(t).forEach((n=>e.push(...t[n].getPageMeasures()))),e}function x(e){k.get().enableEntityMetricsTimeline&&(0,c.Yt)(e)}function L(e,t){return`${e}-${t||"0"}`}(0,s.N)()&&(window._getEntityMetricsCollection=e=>(0,c.HK)(Object.values(w.j.get()),(0,o.At)(e)))},90048:function(e,t,n){"use strict";n.d(t,{K:function(){return i},p:function(){return r}});class i{constructor(){this.counts={}}qualifyKey(e){e||(e="NA");return e+this.qualifySuffix(e)}qualifySuffix(e){return r(this.addCount(e)-1)}reset(){this.counts={}}addCount(e){return this.counts[e]=(this.counts[e]||0)+1}}function r(e){return e<=0?"":"-"+(e+1)}},43047:function(e,t,n){"use strict";n.d(t,{Am:function(){return f},F$:function(){return m},H7:function(){return c},Oq:function(){return d},bM:function(){return s},bg:function(){return o},dw:function(){return u},iA:function(){return p},zV:function(){return l}});var i=n(31558);const r=["vendors","microsoft","common","experience","widget-initializer"];function o(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("resource").filter((e=>"script"===e.initiatorType||"other"===e.initiatorType));for(const n of r){const i=t.find((e=>e.name.indexOf(n)>=0));i&&h(e,i,n+"JS")}}}const a="resolver/api/resolve";function s(e){if(e&&performance.getEntriesByType){const t=performance.getEntries().find((e=>e.name.indexOf(a)>0));t&&h(e,t,"CrsConfig")}}function c(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("resource").filter((e=>"script"===e.initiatorType||"other"===e.initiatorType));for(const n of r){const i=t.find((e=>e.name.indexOf(n)>=0));i&&g(e,i,n+"JS")}}}function d(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("navigation");if(t&&t.length){const n=t[0];n&&h(e,n,"html")}}}function l(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("resource");if(t&&t.length){const n=t.find((e=>e.name.indexOf("/Feed/me")>=0));n&&h(e,n,"feed")}}}function u(e){if(!(0,i.N)()||!e)return;const t=navigator;if(t.connection){const n=t.connection;"rtt"in n&&(e.rtt=n.rtt),"downlink"in n&&(e.downlink=n.downlink)}"hardwareConcurrency"in navigator&&(e.hardwareConcurrency=navigator.hardwareConcurrency)}function p(e){e&&(e.isIDBSupported=window.indexedDB?1:0,e.isSWSupported=window.navigator.serviceWorker?1:0,e.isWWPresent=window._isWebWorkerPresent?1:0)}function h(e,t,n){const i=m(t);null!=i&&(e[n+"Cached"]=i?1:0)}function g(e,t,n){const{responseEnd:i,responseStart:r}=t;e[n+"ResponseTime"]=Math.round(i-r),e[n+"ResponseStart"]=Math.round(r),e[n+"ResponseEnd"]=Math.round(i)}function m(e){return void 0!==e.transferSize?!(0!==e.transferSize&&300!==e.transferSize):void 0!==e.nextHopProtocol?!(""!==e.nextHopProtocol):void 0}function f(e){if(e&&performance.getEntriesByType){const t=performance.getEntriesByType("navigation");if(t.length){const n=t[0],i="useragent_launch";"type"in n&&(e.isBrowserLaunch=n.type===i?1:0)}}}},10754:function(e,t,n){"use strict";n.d(t,{A1:function(){return g},EN:function(){return a},O8:function(){return p},Ou:function(){return d},Th:function(){return m},UE:function(){return h},WP:function(){return u},Y9:function(){return l},fT:function(){return c},pU:function(){return s},zp:function(){return f}});var i=n(31558),r=n(55524);const o="ssrTimeOrigin",a="ssrTimeEnd",s="SSR.InfopaneRendered",c="ssrTimeServerEntry";function d(){return(0,i.N)()?window._pageTimings||(window._pageTimings={}):r.Gq.get("__diagnostics_pageTimings",(()=>({})))}function l(){return(0,i.N)()?window._secondaryPageTimings||(window._secondaryPageTimings={}):r.Gq.get("__diagnostics_secondaryPageTimings",(()=>({})))}function u(){return(0,i.N)()?window._webVitalsPageTimings||(window._webVitalsPageTimings={}):r.Gq.get("__diagnostics_webVitalsPageTimings",(()=>({})))}function p(e,t=!0){const n=d();if(!e||!n||t&&n.TTVR)return;const i=n[e]||(n[e]=0);n[e]=i+1}function h(){return(0,i.N)()?performance.now():performance.now()-d()[o]}function g(){if((0,i.N)()&&navigator)return{memory:navigator.deviceMemory,cpu:navigator.hardwareConcurrency,networkSpeed:navigator.connection&&navigator.connection.effectiveType}}function m(){if(!(0,i.N)())return;const e=(performance.getEntriesByType("navigation")||[])[0],t={};for(const n in e){const i=e[n];t[n]="number"==typeof i?Math.round(i):i}return t}function f(e="navigate"){if(!(0,i.N)())return!1;const t=performance.getEntriesByType("navigation");return t&&t[0]&&t[0].type===e}},36926:function(e,t,n){"use strict";n.d(t,{FF:function(){return a},hf:function(){return s},v0:function(){return c}});var i=n(10754),r=n(21930),o=n(20009);function a(e,t){const n=performance.now(),i=t&&t.firstTimeOnly;t&&t.logStart&&s(`${e}-start`,n,i);const r=t&&t.perfTimeline,o=r&&r.startMeasure(e).endMeasure;return function(){const r=performance.now();t&&t.logEnd&&s(`${e}-end`,r,i),t&&!t.logDuration||s(e,r-n,i),o&&o()}}function s(e,t=performance.now(),n){const r=(0,i.Ou)();return n&&void 0!==r[e]?r[e]:(r[e]=Math.round(10*t)/10,t)}function c(e,t=performance.now()){const n=e&&(0,r.TZ)(o.DB)||0;return t+(n>0?-n:0)}},30440:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var i=n(76733);const r="-start";class o{constructor(){this.endMarkSuffix="-end","undefined"!=typeof window&&this.initialize(window.performance)}static getInstance(){return o.instance||(o.instance=new o),o.instance}initialize(e){this.performance=e}startMark(e){this.singleMark(e+r)}endMark(e){this.singleMark(e+this.endMarkSuffix),this.measureStartEnd(e)}singleMark(e){const t=this.performance;t&&t.mark&&(t.mark(e),i.k.log(`[PerfMarker] ${e}`))}clearMark(e){const t=this.performance;t&&t.clearMarks&&t.clearMarks(e)}clearMeasures(e){const t=this.performance;t&&t.clearMeasures&&t.clearMeasures(e)}async measurePromise(e,t){this.startMark(e);const n=await t();return this.endMark(e),n}measurePerfMarker(e){if(!this.performance)return;const t={},n=this.performance.getEntriesByType("mark");if(!n)return t;for(let i=0;i<n.length;i++){let r=n[i].name;if(!r||null==n[i].startTime)continue;if(r=r.replace(/-(end|start)$/i,""),!r.startsWith(e))continue;const o=t[r]||new s(r);o.processPerfEntry(n[i]),o.isValid&&(t[r]=o)}return t}measureStartEnd(e){const t=this.performance;if(t&&t.measure)try{t.measure(e,e+r,e+this.endMarkSuffix)}catch(t){i.k.logError(`Error while attempting to measure start/end of '${e}'. Error: ${t}`)}}}const a=o.getInstance();class s{constructor(e){this.duration=0,this.markerName=e}get isValid(){return null!=this.startTime}processPerfEntry(e){e.name.endsWith(r)?(this.firstStartTime||(this.firstStartTime=e.startTime),this.startTime=e.startTime):null!=this.startTime&&(this.duration+=e.startTime-this.startTime,this.startTime=null)}}},20009:function(e,t,n){"use strict";n.d(t,{DB:function(){return c},Fz:function(){return m},Hm:function(){return g},IP:function(){return p},MV:function(){return o},O6:function(){return d},OM:function(){return l},P9:function(){return S},T8:function(){return i},U4:function(){return r},Wk:function(){return y},fR:function(){return h},iL:function(){return f},kc:function(){return s},pJ:function(){return u},qh:function(){return a},w:function(){return v},zJ:function(){return C}});const i="E2E",r="TTPV",o="TTVR",a="TTVS",s="htmlCached",c="pageRevealStart",d="pageRevealComplete",l="getTabTimingsTime",u="protocolLaunchStart",p="FromProtocolLaunchStart",h="userAgentStart",g="FromUserAgentStart",m="PCSToJSStart",f="JSStartToOnLoad",v="TTJSStart",y="timeToOnLoad",S="timeToFirstByte",C="FCP_Old"},21930:function(e,t,n){"use strict";n.d(t,{BW:function(){return G},EV:function(){return J},Gb:function(){return q},IJ:function(){return Q},IO:function(){return ee},Nv:function(){return re},O0:function(){return ye},OB:function(){return se},OZ:function(){return Se},O_:function(){return Y},Sc:function(){return pe},TZ:function(){return ve},Xl:function(){return te},YJ:function(){return ie},a8:function(){return R},aR:function(){return be},b1:function(){return ae},bO:function(){return le},bP:function(){return ce},cd:function(){return j},e3:function(){return oe},gh:function(){return de},hy:function(){return Te},l6:function(){return Ce},mb:function(){return z},nz:function(){return O},oN:function(){return i},o_:function(){return V},pT:function(){return ke},su:function(){return Z},sx:function(){return Ae},tW:function(){return ne},v9:function(){return we},wS:function(){return Pe}});var i,r=n(20009),o=n(31558),a=n(90215),s=n(10754),c=n(30440),d=n(19995),l=n(47969);let u,p,h,g,m,f,v;!function(e){e.Primary="primary",e.Secondary="secondary"}(i||(i={}));const y=new Map,S=new Map,C=new Map;let w,b,T,k,P,A,I,E=new Map,M=new Map,x=[];const L="TTF.",R="TTVR.",D="TTVS.",F="TTPR.",O="TTSR.";let B="",N=!1,_=!1,U="",W=!1;const H={};let $;function q(){return H}function G(e="",t=!1,n){(0,o.N)()&&(n=n||performance.now(),X(L,e,t,W?(0,l.F)(n):n))}function V(e="",t=!1,n,i=!0){if((0,o.N)()){if(n=n||performance.now(),i&&W&&n>0){const i=(0,l.F)(n);return X(R,e,t,i),K(e),i}return X(R,e,t,n),K(e),n}}function z(e){x.push(e)}function j(e){x=x.filter((t=>t!==e))}function K(e){if(x.length)try{x.map((t=>t(e)))}catch(e){}}function Q(e="",t=!1,n){(0,d.c)((()=>V(e,t,n)))}function J(e=""){const t=ve(r.DB),n=-1===t?-1:performance.now()-t;X(F,e,!1,n)}function Y(e,t,n){Z(e,n-t)&&(0,a.QP)({name:e,startTime:t,endTime:n})}function Z(e,t){if(M.get(e))return!1;const n=performance.getEntriesByName&&performance.getEntriesByName(e);let i;return Boolean(n&&n.length)?M.has(e)||(M.set(e,Math.round(n[0].startTime)),i=!0):(c.A.singleMark(e),M.set(e,isNaN(t)?-1:Math.round(t)),i=!0),p&&p.delete(e)&&0===p.size&&A&&A(de()),i}function X(e,t,n,i){if(!t||!t.length)return;if(!e||!e.length)return;const o=e+t;if(o.startsWith(R)&&(!m||!m.has(o))&&f&&f.has(o))return void Z(o,n?-1:i);if(C.has(o)&&C.get(o)(o),E.get(o))return;const a=performance.getEntriesByName&&performance.getEntriesByName(o);Boolean(a&&a.length)?E.set(o,Math.round(a[0].startTime)):(c.A.singleMark(o),n?E.set(o,-1):E.set(o,Math.round(i))),o.startsWith(R)&&(H.marker=o,H.value=E.get(o)),h&&h.delete(o)&&0===h.size&&b&&b(ge()),u&&u.delete(o)&&0===u.size&&k&&k(se()),e===D&&(Z("TTVS",n?-1:i),I&&I(me(D,r.qh)))}function ee(e){u=ue(e),h=ue(e,"TTVR"),g=ue(e,"TTPR"),m=new Set(fe(e,"TTVR")),b&&0===h.size&&k(ge()),k&&0===u.size&&k(se()),N=!0}function te(e){p||(p=new Set,f=new Set,e.forEach((e=>{M.get(e)||p.add(e),e.startsWith(R)&&f.add(e)})),0===p.size&&A&&A(de()))}function ne(e){v||(v=e)}function ie(e){e&&N&&u&&h&&(e.startsWith(R)||(e=R+e),E.has(e)||(u.add(e),h.add(e)),m.add(e))}function re(){return(0,o.N)()?function(){if(!(0,o.N)())return null;if(T)return T;if(u&&0===u.size)return Promise.resolve(se());return T=new Promise((e=>{k=e})),T}():null}function oe(){return(0,o.N)()?P||(p&&0!==p.size?(P=new Promise((e=>{A=e})),P):Promise.resolve(de())):null}function ae(){return(0,o.N)()?w||(h&&0===h.size?Promise.resolve(ge()):(w=new Promise((e=>{b=e})),w)):Promise.resolve([])}function se(){return[...ge(),...he()]}function ce(){return[...ge(!1),...he()]}function de(){return[...M]}function le(e){return e===i.Primary?Array.from(u||[]):Array.from(p||[])}function ue(e,t){const n=new Set;for(const i of fe(e,t))E.get(i)||n.add(i);return n}function pe(e){return E.get(F+e)}function he(){return me(L)}function ge(e=!0){return e&&!1!==$?me(R,r.MV,!0):me(R)}function me(e,t,n){const i=[];let o=0;if(E.forEach(((t,n)=>{if(n.startsWith(e)){var r,a;i.push([n,t]);const e=n.startsWith("TTVR");t>o&&(!e||null!==(r=m)&&void 0!==r&&null!==(a=r.has)&&void 0!==a&&a.call(r,n))&&(o=t,e&&(B=n));const s=y.get(n);null!=s&&s.name&&(S.get(s.name)<t&&S.set(s.name,t),s.preserve||i.pop())}})),S.forEach(((t,n)=>{n.startsWith(e)&&i.push([n,t])})),t&&i.push([t,o]),n&&t===r.MV){const e=(0,s.Ou)().refreshDelay||0;i.push(["TTVR.WithRefreshDelay",o+e])}return i}function fe(e,t){let n=[],i=[],r=[];return!e||!e.TTVR||t&&"TTVR"!==t||(n=e.TTVR.map((e=>R+e))),!e||!e.TTF||t&&"TTF"!==t||(r=e.TTF.map((e=>L+e))),e&&e.TTPR&&"TTPR"===t&&(i=e.TTPR.map((e=>F+e))),[...n,...r,...i]}function ve(e){const t=performance.getEntriesByName(e);return t&&t[0]&&t[0].startTime?t[0].startTime:-1}function ye(e){const t=M.get(e);return null!=t?t:-1}function Se(){return v}function Ce(e="",t=!1,n,i){let r=e;r.startsWith(R)||(r=R+e),N&&(m.has(r)||_)&&""!==e?V(e,t,n,i):K(e)}function we(e="",t=!1,n){let i=e;i.startsWith(R)||(i=R+e),N&&(m.has(i)||_)&&""!==e?Q(e,t,n):K(e)}function be(e="",t="",n=!1,i){let r=e,o=t;N&&""!==e&&""!==t&&(_||t!==U)&&(r.startsWith(R)||(r=R+e),o.startsWith(R)||(o=R+t),u.has(r)||E.has(r)||m.has(r)||(ie(r),y.set(r,{name:o,preserve:n}),S.set(o,-1),i&&C.set(r,i)))}function Te(e=!1,t=""){_=e,U=t}function ke(e){W=e}function Pe(){return W}function Ae(){return B}},42933:function(e,t,n){"use strict";function i(e,t,n,i=!1,r=!1,o){return new e(t,n,i,r,o)}n.d(t,{S4:function(){return o},fW:function(){return s},oA:function(){return a},uk:function(){return i}});const r=(0,n(96489).U1)();function o(e){r.set(e)}const a=(e,t,n)=>r.call(e,t,n);function s(e,t,n){return n?n.instrumentPromise(t,e):e()}},53179:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});const i=(0,n(96489).WG)((()=>({})))},19995:function(e,t,n){"use strict";n.d(t,{c:function(){return r},u:function(){return o}});var i=n(31558);function r(e,t=0){(0,i.N)()&&window.requestAnimationFrame((()=>window.setTimeout((()=>e()),t)))}async function o(){return new Promise((e=>r(e)))}},47969:function(e,t,n){"use strict";function i(e){const t=performance.getEntriesByType("visibility-state").filter((t=>t.startTime<e));if(0===t.length)return e;let n=0;for(let r=0;r<t.length;r++){const o=t[r];var i;if("visible"===o.name)n+=((null===(i=t[r+1])||void 0===i?void 0:i.startTime)??e)-o.startTime}return n}n.d(t,{F:function(){return i}})},59349:function(e,t,n){"use strict";n.d(t,{Dd:function(){return g},d0:function(){return m},n1:function(){return h}});var i=n(42933),r=n(96489),o=n(31558),a=n(19995),s=n(92062),c=n(31718),d=n(10754),l=n(8114);const u=(0,r.WG)((()=>({}))),p=new WeakMap;function h(){if(!(0,o.N)())return;const{enablePerfTimeline:e,traceLevel:t}=(0,c.dj)();if(!e||"undefined"==typeof customElements||t<s.Y.high)return;const n=customElements.define;customElements.define=function(...e){const[t,i]=e,r="connectedCallback",o=i.prototype[r];return"function"!=typeof o||"getExperienceType"in i.prototype||(i.prototype[r]=function(...e){const t=g(this.localName,this.instanceId),n=t&&t.startMeasure("init").endMeasure,i=o.apply(this,e);return n&&n(),m(this,t),(0,d.O8)("WC.Count"),i}),n.apply(customElements,e)}}function g(e,t){const n=u.get(),r=1===(n[e]=(n[e]||0)+1)?t:(0,l.Z)(t);return(0,i.oA)(e,r)}function m(e,t,n=a.u){if(!e||!e.shadowRoot||!t)return;const i=new f("update",t);i.tryStartMeasure(),n().then((()=>i.tryEndMeasure()));const{traceLevel:r}=(0,c.dj)();r&&function(e,t,n){let i=p.get(e);if(i)return;let r=0;i=new MutationObserver((e=>{t.tryStartMeasure();const i=e.reduce(((e,t)=>(t.addedNodes.forEach((t=>e.added.push(t.nodeName))),t.removedNodes.forEach((t=>e.removed.push(t.nodeName))),t.attributeName&&e.attrs.push(t.attributeName),e)),{added:[],removed:[],attrs:[]}),o={added:i.added.length?i.added.join(","):void 0,removed:i.removed.length?i.removed.join(","):void 0,attrs:i.attrs.length?i.attrs.join(","):void 0};t.addCustomData("mutation"+ ++r,o),n().then((()=>t.tryEndMeasure()))})),i.observe(e.shadowRoot,{childList:!0,subtree:!0,attributes:!0}),i.observe(e,{attributes:!0}),p.set(e,i)}(e,i,n||y)}class f{constructor(e,t){this.measureName=e,this.perfTimeline=t,this.customData={}}tryStartMeasure(){if(!this.coreEndMeasure){const e=this.perfTimeline.startMeasure(this.measureName).endMeasure;this.coreEndMeasure=()=>e({customData:this.customData})}}addCustomData(e,t){this.customData[e]=t}tryEndMeasure(){this.coreEndMeasure&&(this.coreEndMeasure(),this.customData={},this.coreEndMeasure=null)}}let v;function y(){return v||(v=new Promise((e=>(0,a.c)((()=>{v=null,e()})))))}},63818:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var i=n(90215),r=n(10754),o=n(56687);function a(e){const t=e||performance.now();return{end:e=>{const n=performance.now(),a="ClientInit";try{if(!e){(0,r.Ou)()[a]=Math.round(n-t)}(0,i.QP)({name:a,startTime:t,endTime:n,customSuffix:e?"error":void 0})}catch(e){console.error("ClientInit span error: "+(0,o.n)(e))}}}}},90215:function(e,t,n){"use strict";n.d(t,{DY:function(){return d},Ep:function(){return h},QP:function(){return l},ee:function(){return u},el:function(){return m},m8:function(){return g},zI:function(){return p}});var i=n(35164),r=n(96489),o=n(10754);const a=(0,r.pn)(),s=(0,r.pn)(),c=(0,r.pn)();function d(e){s.set([]),c.set([]),a.set(e)}function l(e){var t;null===(t=a.get())||void 0===t||t.startMeasure(e.name,void 0,{entityMeasure:!0,startTime:f(e.startTime,-1)}).endMeasure({endTime:f(e.endTime,-1)})}function u(e){const t=a.get();return t?(0,i.fJ)(t.getMeasureValues({entityMeasures:!0}),e,"from",!1):[]}function p(e){let t;const n=s.get();n&&null!=(t=v(e.duration))&&n.push({time:(0,o.UE)(),name:e.name,duration:t})}function h(e){let t;const n=c.get();n&&null!=(t=v(e.time))&&n.push({name:e.name,time:t})}function g(e){const t=s.get();return t?(0,i.fJ)(t,e,"time",!0):[]}function m(e){const t=c.get();return t?(0,i.fJ)(t,e,"time",!1):[]}function f(e,t){return null!=e?e:t}function v(e){if("number"==typeof e&&e>=0)return e}},59450:function(e,t,n){"use strict";n.d(t,{j:function(){return s},o:function(){return a}});var i=n(90215),r=n(10754),o=n(20009);function a(e){const t=(0,r.Ou)();for(const[n,i]of e)for(const e of i){const i=t[e];if(null!=i){t[n]=i;break}}}function s(){const e=`${o.MV}.BasicFeed`;a([[e,["TTVR.River","TTVR.GridViewFeed","TTVR.StripeFeed","TTVR.WaterfallViewFeed"]]]);const t=(e,t,r)=>{const o=r&&t?r-t:-1;n[e]=o,(0,i.QP)({name:e,startTime:t,endTime:r})},n=(0,r.Ou)(),s=n[e],c=n[`${o.MV}.SearchBox`],d=n[`${o.MV}.SDCards`],l=n.WpoResponseBack;t("SearchBoxToFeed",c,s),t("FeedSDRender",s,d),t("FeedBasicRender",l,s)}},15570:function(e,t,n){"use strict";n.d(t,{TG:function(){return ue},Yt:function(){return he},HK:function(){return pe}});var i=n(35164),r=n(23549),o=n(87603),a=n(96489),s=n(7476);const c=Object.freeze({experience:"e",page:"p",other:"o",script:"js",service:"s",container:"c",custom:"x"});var d;!function(e){e[e.keepPrevious=1]="keepPrevious",e[e.keepThis=2]="keepThis",e[e.keepAll=3]="keepAll"}(d||(d={}));var l=n(29330),u=n(78672),p=n(31558),h=n(90215),g=n(10754),m=n(20009),f=n(90048),v=n(43047),y=n(76733);const S=new Map([["min",e=>e.length?e.reduce(((e,t)=>Math.min(e,t)),1/0):void 0],["max",e=>e.length?e.reduce(((e,t)=>Math.max(e,t)),-1/0):void 0],["first",e=>{for(const t of e)if(null!=t)return t}]]),C={clientrtt:"tcp",origin:"origin",cdntime:"self"},w=/\/\/([^/]+)\/([^?&#]+)/,b=/^assets\.msn\.(com|cn)/i,T=/^(ent-)?api\.msn\.(com|cn)/i,k="service",P="[cdn]/",A="[1s]/",I="[self]/",E=`${I}[root]`,M="[1s-cdn]/",x=(0,a.pn)();function L(e,t,n,r){const o=(0,g.UE)(),a=function(e){const t=new Map,n=e=>function(e,t){const{name:n}=t;let i=e.get(n);i||e.set(n,i=[]);i.push(t)}(t,e);performance.getEntriesByType("navigation").forEach((e=>{n(function(e,t){return{name:e.name,startTime:e.startTime,requestStart:e.requestStart,responseEnd:e.responseEnd,transferSize:e.transferSize,duration:e.duration,serverTiming:e.serverTiming,initiatorType:e.initiatorType,nextHopProtocol:e.nextHopProtocol,...t}}(e,{name:E}))}));const r=(0,i.fJ)(performance.getEntriesByType("resource"),e,"startTime",!0);return r.forEach(n),t}(r),s={networkCounter:new f.K,networkMap:a,filterContext:r},d=function(e,t){const n={name:"experiences",data:{type:c.container}};return e&&e.forEach((e=>{const i=function(e,t){const{filterContext:n,networkMap:i}=t,r=z(e,["min",[["first","scripts","from"],["first","config","from"]]]),o=r?z(e,["max",[["first","scripts","to"],["first","config","to"]]]):void 0,a=r&&o?W(r,o,void 0,n):void 0;let s=j(e,["first","render","to"]);K(s)||(s=j(e,["first","update","to"]),s&&y.k.log(`${e.timelineName} is missing 'render' mark`));const d=s&&z(e,["min",[["first","render","from"],["first","update","from"]]]),u=d?W(d,s,void 0,n):void 0;if(!a&&!u)return;const p={name:e.timelineName,data:{type:c.experience}};U(p,"init",a),U(p,"render",u),a&&u&&U(p,"_self",W(r,s,void 0,n));const h=e.getMeasureValues({coreName:l.JS});h.forEach((e=>{const n=e.customData,r=function(e,t,n){const i=e&&t.get(e);if(!i)return;const r=N(i,(e=>Math.abs(e.startTime-n.from)));if(r>=0){const n=i.splice(r,1)[0];return i.length||t.delete(e),n}}(n&&n.url,i,e);F(D(e)||l.JS,c.service,p,r,e,t)}));const g=e.getMeasureValues({entityMeasures:!0});if(g.length){const e=_(p,{name:"custom",data:{type:c.custom}});g.forEach((t=>{O(e,t,n)}))}return p}(e,t);i&&_(n,i)})),n}(t,s),u=function(e){const t={name:"scripts",data:{type:c.container}},n={name:"services",data:{type:c.container}},i={name:"other",data:{type:c.container}};return(0,p.N)()?function(e,t,n,i){const{networkMap:r}=e;r.forEach((o=>{o.forEach((o=>{const{initiatorType:a,name:s}=o;if("img"===a)return;let d,u,p,h;const g=R(s);if(g&&g.endsWith(".js")){u=g.replace(/(\.[0-9a-f]{20})?\.js$/,"").replace(/bundles\/v1\/\w+\/[\w.]+\//,""),d=t,p=c.script}else if("css"===a||"iframe"===a||"other"===a||"beacon"===a)d=i,p=c.other;else{var m;d=n,p=c.service;const e=null===(m=(0,l.o4)())||void 0===m?void 0:m.getMeasureValues({coreName:s});if(e&&e.length){const{startTime:t}=o;h=e[N(e,(({from:e})=>Math.abs(e-t)))],u=D(h)}}let f=u||g;f&&(f=f.toLowerCase(),F(f,p,d,o,h,e),r.delete(s))}))}))}(e,t,n,i):function(e,t,n){var i;const r=null===(i=(0,l.o4)())||void 0===i?void 0:i.getMeasureValues({entityMeasures:!1});r&&r.forEach((i=>{var r;const{coreName:o,from:a,to:s}=i,d=null===(r=R(o))||void 0===r?void 0:r.toLowerCase();if(!d)return;let l,u;o.endsWith(".js")?(l=t,u=c.script):(l=n,u=c.service);F(d,u,l,{startTime:a,duration:s-a},void 0,e)}))}(e,t,n),[t,n,i]}(s),v=function(e){const t={name:"custom",data:{type:c.custom}};(0,h.ee)(e).forEach((n=>O(t,n,e))),(0,h.m8)(e).forEach((({name:e,duration:n})=>function(e,t,n){H(e,t,n)}(t,e,n))),(0,h.el)(e).forEach((({name:n,time:i})=>$(t,n,i,e)));const n=e===i.d9;if(n){const n=(0,g.Ou)();B(t,m.P9,e,n,m.P9,g.fT),B(t,m.MV,e,n,m.MV,g.EN)}else $(t,m.MV,e.timeFilter.end,e);return t}(r),S={name:"",data:{type:c.container}};U(S,"calc",W(o,(0,g.UE)(),void 0,i.d9));const C={metrics:S.data,...e||{}},w={_meta:C};let b=!1;if([v,d,...u].forEach((e=>{const{data:t}=e;(t.children||t.spans||t.durations||t.scalars||t.instants)&&(w[e.name]=t,b=!0)})),b)return n&&n.length&&(C.pivots=n.map((e=>e.key)),C.pivots64=n.map((e=>e.key64))),w}function R(e){if(e){const t=e.match(w);if(t){let[,e,n]=t;return n=n.toLowerCase(),e.match(b)?n=(n.startsWith(k)?M:P)+n:e.match(T)?n=A+n:e===x.get()&&(n=I+n),n}return e.toLowerCase()}}function D(e){const t=e&&e.customData;if(t){const{requestName:e,url:n,mappedUrl:i}=t;return e||R(i||n)}}function F(e,t,n,i,r,o){const{networkCounter:a,filterContext:s}=o,c=a.qualifyKey(e),d={name:c,data:{type:t}},l=function(e,t){if(!t)return;const{startTime:n,requestStart:i,responseEnd:r,transferSize:o,duration:a,serverTiming:s}=t,c=!!i,d={name:e,hasFullTimings:c,networkDur:a,networkStart:n};if(c){d.connectDur=i-n,d.requestDur=r-i;const e=(0,v.F$)(t);null!=e&&(d.cached=e?1:0,e||(d.transferSize=o))}if(!d.cached&&(e.startsWith(P)||e.startsWith(M))&&s&&s.length){const e=d.cdn={};s.forEach((({name:t,duration:n})=>{const i=C[t];i&&(e[i]=n)}))}return d}(c,i);if(l){const{cdn:e,networkStart:t,networkDur:n}=l;U(d,"network",W(t,void 0,n,s))&&(l.hasFullTimings&&(H(d,"connect",l.connectDur),H(d,"request",l.requestDur),q(d,"size",l.transferSize),q(d,"cache",l.cached)),e&&(H(d,"cdnTCP",e.tcp),H(d,"cdnSelf",e.self),H(d,"cdnOrigin",e.origin)))}if(r&&U(d,"app",W(r.from,r.to,void 0,s))){const e=r.customData,{perfCritical:t,error:n}=e||{};t&&q(d,"critical",1),n&&q(d,"error",1)}d.data.spans&&_(n,d)}function O(e,t,n){const i=W(t.from,t.to,void 0,n);if(i){U(e,t.coreName+t.idSuffix,i)}}function B(e,t,n,i,r,o){$(e,t,i[(0,p.N)()?r:o],n)}function N(e,t){const n=e&&e.length||0;if(n<=1)return n-1;let i=1/0,r=0;return e.length>1&&e.forEach(((e,n)=>{const o=t(e);o<i&&(i=o,r=n)})),r}function _(e,t){return V(e,"children",t.name,t.data),t}function U(e,t,n){return n?V(e,"spans",t,n):void 0}function W(e,t,n,{spanMapperFn:i}){return i(e,t,n)}function H(e,t,n){return G(e,t,n,"durations")}function $(e,t,n,{timeFilterFn:i,timeMapperFn:r}){if(i(n))return G(e,t,r(n),"instants")}function q(e,t,n){return G(e,t,n,"scalars")}function G(e,t,n,r){if(K(n)){return V(e,r,t,(0,i.NM)(n))}}function V(e,t,n,i){return(e.data[t]||(e.data[t]={}))[n]=i,i}function z(e,t){const[n,i]=t,r=[];for(const t of i){const n=j(e,t);null!=n&&r.push(n)}const o=S.get(n),a=o&&o(r);return K(a)?a:void 0}function j(e,t){const[n,i,r]=t,o=e.getMeasureValues({coreName:i});if(o&&o.length){const t=S.get(n);if(t){const n=function(e,t,n){return e.getMeasureValues({coreName:t}).map((e=>e[n])).filter((e=>null!=e))}(e,i,r),o=t(n);if(K(o))return o}}}function K(e){return null!=e&&!isNaN(e)}x.set((0,u.zw)());var Q=n(54096),J=n(88826),Y=n(73898),Z=n(53179),X=n(38869);const ee=6e4,te=(0,a.U1)(),ne=(0,a.pn)(),ie=(0,a.U1)(),re=(0,a.U1)(),oe=(0,a.pn)(),ae=(0,a.pn)(),se=()=>{},ce=(0,a.oN)(),de=(0,a.oN)(),le=(0,a.oN)();function ue(e,t,n,i,r){if([ce,de,le,ne,te,ae,oe].forEach((e=>e.unset())),re.set(i||Y.Z),ie.set(r||Y.Z),!i||!r||!t)return;const{bundleInfo:a,pcsInfo:s}=t.ClientSettings||{};ae.set({buildAlias:a&&a.alias,env:s&&s.env});const{pivotsFinalized:c}=(0,o.MB)(e,t,n),d=!e&&(0,X.g)(),l=e&&(0,o._P)();oe.set(!0),l&&c.then((()=>{(0,o._P)()||ge()})),(d||l)&&(ne.set(!0),te.set(me({props:{},dedupeBehavior:2,startTime:0,getMatches:()=>l?(0,o.aM)():[]})))}function pe(e,t,n){if(oe.get())return n=n||(0,o.aM)(),L(ae.get(),e,n,t)}function he(e){if(ge()&&e){ve(e,Object.values(Z.j.get()),(0,i.At)())}}function ge(){if(te.get())return te.call(!0),ne.unset(),te.unset(),!0}function me(e){0===ce.size&&(!ne.get()&&performance.clearResourceTimings(),re.call());const{props:t,dedupeBehavior:n,groupId:o,traceId:a}=e,c=(0,Q.s)(t)+`|${a||""}|${o||""}`,d=ce.get(c);if(d&&d.size)if(n&&2!==n){if(1===n)return se}else{const e=o&&le.get(o);e&&e.size&&d.forEach((t=>e.delete(t)));const t=a&&de.get(a);t&&t.size&&d.forEach((e=>t.delete(e))),d.clear()}let l;return l=t=>{const n=ce.get(c);if(n&&n.delete(l)){const d=a&&de.get(a);d&&d.delete(l);const u=o&&le.get(o);u&&(t?u.delete(l):(u.forEach((e=>e!==l&&e(!0))),u.clear())),n.size||!ce.delete(c)||ce.size||ie.call(),t||function(e){const t=(0,i.At)({start:e.startTime,end:performance.now()}),{spanFilterFn:n}=t,o=Object.values(Z.j.get()).filter((e=>{const{timeSpan:t}=e;return t&&n(t[0],void 0,t[1])})),a={},c=e.getMatches();if(!ve(a,o,t,c))return;try{r.M0.sendLoadTimeEvent({markers:a})}catch(e){(0,J.H)(s.GrI,"Failed to upload entity-metrics for manual trace",`Matches: ${c.map((e=>e.key)).join("|")}`)}}(e)}},fe(ce.getObj(),c,l),fe(de.getObj(),a,l),fe(le.getObj(),o,l),setTimeout((()=>l(!0)),e.stopTimeout||ee),l}function fe(e,t,n){if(t){let i=e.get(t);!i&&e.set(t,i=new Set),void 0!==n&&i.add(n)}}function ve(e,t,n,i){if(e&&oe.get()){const r=pe(t,n,i);if(r)return e.entityMetrics=r,!0}}},87603:function(e,t,n){"use strict";n.d(t,{aM:function(){return A},_P:function(){return P},MB:function(){return k},nm:function(){return E},Pj:function(){return M}});var i=n(76187),r=n(88975),o=n(96489),a=n(31558),s=n(43047);const c=/^winp(\d)/i;function d(e){if(!(0,a.N)())return;const{referrer:t}=document;if(t){if(t===location.href)return"self";const e=function(e){try{return new URL(e)}catch{return}}(t);if(e){const{host:t,pathname:n}=e,{host:i,pathname:r}=window.location;let o,a;if(a=t.match(/^([a-z]+)\.msn\.(com|cn)$/)){const[,e]=a;if("ntp"===e)return"edge-hp";if("www"===e){let e;if(!n||"/"===n)return"msn-hp";if(e=n.match(/^\/[a-z]{2}-[a-z]{2}(\/feed)?\/?$/i))return e[1]?"win-hp":"msn-hp";if(n.match(/\/(ar|ss|vi)-[A-Za-z0-9]+$/))return"msn-views"}return t===i&&l(n)===l(r)?"same-seg1-seg2":"msn-other"}if(o=t.match(/\.(bing|google|yahoo)\.com$/))return"search-engine"}}else{const{ocid:t}=e;let n;if(t&&(n=t.match(c)))return`prong-${n[1]}`}return"unknown"}function l(e){const t=e&&e.match(/^\/([^/]+(\/[^/]+)?)?/);return t&&t[0]}var u=n(54096),p=n(7476),h=n(10754),g=n(88826),m=n(38869);const f=(0,o.oN)(),v=(0,o.oN)(),y=(0,o.oN)(),S=(0,o.sR)(),C=null,w=(0,o.pn)(),b=(0,o.U1)(),T=(0,o.WG)((()=>new Promise((e=>b.set(e)))));function k(e,t,n){const{pivots:o,manualPivots:a}=e||{},l={pivotsFinalized:T.get()};if(!(e&&(o&&o.length||a&&a.length)&&t&&n))return l;const u=(0,h.A1)()||{},p=function(e){if(e){const{cpu:t}=e;if(t>=1&&t<=4)return"1-4";if(t>=6&&t<=8)return"6-8";if(t>=10)return"10+"}}(u),g=(0,i.p)((()=>d(n))),f=(0,i.p)((()=>function(e){const{ocid:t}=e;return t&&("windirect"===t||t.match(c))?"winfeed":"default"}(n))),v=(0,i.p)((()=>function(){let e,t=0,n=0;const i=/\/(vendors|microsoft|experience|common)\./,r=performance.getEntriesByType("resource");for(const o of r)if("script"===o.initiatorType&&(e=o.name.match(i))&&((0,s.F$)(o)?t++:n++,t+n>=4))break;return 4===t?"warm":4===n?"cold":n+t===4?"partial":void 0}()));O("audienceMode",(e=>(0,r.Uc)({audienceMode:e},n))),O("browser",(e=>(0,r.K4)({browser:e},n))),O("deviceFormFactor",(e=>(0,r.Ev)({deviceFormFactor:e},n))),O("displayLocale",(e=>(0,r.fb)({locale:e},n,!0))),O("domain",(e=>(0,r.hI)({domain:e},n))),O("experimentId",(e=>(0,r.W9)({experimentId:e},n))),O("locale",(e=>(0,r.fb)({locale:e},n,!1))),O("ocid",(e=>(0,r.K3)({ocid:e},n))),O("os",(e=>(0,r.zu)({os:e},n))),O("platform",(e=>(0,r.jF)({platform:e},n))),O("referrer",(e=>e===g())),O("ocidGroup",(e=>e===f())),O("network",(e=>e===u.networkSpeed)),O("cpu",(e=>e===u.cpu)),O("cpuGroup",(e=>e===p)),O("memory",(e=>e===u.memory)),O("coreJSCache",(e=>e===v()));const{pcsInfo:y,bundleInfo:S}=t.ClientSettings;return O("env",(e=>(0,r.Sh)(e,y&&y.env))),O("buildAlias",(e=>(0,r.Sh)(e,S&&S.alias))),F("pageType",((e,t)=>(0,r.oM)({pageType:t},{pageType:e}))),F("pageProduct",r.Sh),F("pageName",r.Sh),M("preRender",!!t.IsPrerender),w.set(function(e){const t=[],n=[],{pivots:i,manualPivots:r,_sampleRate:o}=e,a=(e,t)=>{e&&e.forEach((e=>{e&&(0,m.g)(e._sampleRate||o)&&t(e)}))},s=e=>{for(const{key:t,matcher:n}of R(e))n||B(t)};return a(i,(e=>{s(e);const n={config:e},i=I(n);(i||i===C)&&t.push(n)})),a(r,(e=>{s(e),n.push(e)})),{defaultPivots:t,manualPivotConfigs:n}}(e)),L(),l}function P(){var e;return!(null===(e=w.get())||void 0===e||!e.defaultPivots.some((e=>e.success||e.success===C)))}function A(){const e=w.get();if(!e)return[];const t=[];for(const n of e.defaultPivots)I(n)&&t.push(D(n.config));return S.size&&(0,g.H)(p.WXX,"Missing pivot field values",[...S.getObj()].toString()),t}function I(e){let{success:t}=e;if(null!=t)return t;t=!0;for(const{key:n,value:i,matcher:r}of R(e.config)){const e=r&&r.matchFn(i);if(e===C)t=C,S.add(n);else if(!e){t=!1;break}}return e.success=t}function E(e,t){y.set(e,t),x(e)}function M(e,t){null!=t&&(v.set(e,t),x(e))}function x(e){w.get()&&S.delete(e)&&L()}function L(){const e=w.get();if(e&&S.size<=0){for(const t of e.defaultPivots)I(t);b.call()}}function*R(e){for(const t in e)if((0,u.L)(t)){const n=f.get(t);yield{key:t,value:e[t],matcher:n}}}function D(e){const t=(0,u.s)(e);return{key:t,key64:btoa(t)}}function F(e,t){O(e,(n=>{const i=y.get(e);return i==C?C:t(i,n)}))}function O(e,t){N(e,(()=>t))}function B(e){N(e,(()=>function(e){return t=>{const n=v.get(e);return n==C?C:n===t}}(e)))}function N(e,t){f.get(e)||f.set(e,{matchFn:t()})}},29330:function(e,t,n){"use strict";n.d(t,{JS:function(){return c},Ud:function(){return p},ny:function(){return s},o4:function(){return a},xb:function(){return u}});var i=n(96489),r=n(31558);const o=(0,i.pn)(),a=o.get;function s(e){o.set(e)}const c="service",d=g().fetch;let l=d;function u(e){Object.defineProperty(g(),"fetch",{value:e?(...e)=>p()(...e):d})}function p(e={}){const{perfTimeline:t=a()}=e,n=e.fetchImpl||l;return t?h.bind(h,t,n):n}async function h(e,t,n,i){const r=(n.url||n).toString(),o={url:r};if(i){o.requestName=i.requestName,o.perfCritical=i.perfCritical,delete i.requestName,delete i.perfCritical;const{urlMapper:e}=i;e&&(o.mappedUrl=e(r),delete i.urlMapper)}const s=e===a()?r:c,d=e&&e.startMeasure(s).endMeasure;let l;try{const e=await t(n,i);return l=!e||!e.ok,e}catch(e){throw l=!0,e}finally{l&&(o.error=!0),d&&d({customData:o})}}function g(){return(0,r.N)()?window:globalThis}},54096:function(e,t,n){"use strict";n.d(t,{L:function(){return o},s:function(){return r}});var i=n(76733);function r(e){const t=[];return e&&a(e,t),t.join(",")}function o(e){return e&&!e.startsWith("_")}function a(e,t,n=""){const r=Object.keys(e).filter(o).sort();for(const o of r){const r=e[o];if(null==r)continue;const s=`${n}${n?".":""}${o}`;if("object"==typeof r)a(r,t,s);else{if(!(t.length<100)){i.k.logError("getSortedObjectKeyValuesDeep: circular reference suspect");break}t.push(`${s}=${r.toString().toLowerCase()}`)}}}},35164:function(e,t,n){"use strict";n.d(t,{At:function(){return p},NM:function(){return h},d9:function(){return s},fJ:function(){return d}});var i=n(51727),r=n(37641);const o=(e,t)=>n=>n>=e&&n<=t,a={start:-1/0,end:1/0},s={timeFilter:a,spanFilterFn:()=>!0,spanMapperFn:(e,t,n)=>l(e,t,n),timeMapperFn:e=>e,timeFilterFn:()=>!0},c={timeFilter:{start:1/0,end:-1/0},spanFilterFn:()=>!1,spanMapperFn:()=>{},timeMapperFn:()=>{},timeFilterFn:()=>!1};function d(e,{timeFilter:t},n,s){if(e&&n&&t!==a){const{start:a,end:c}=t;if(s){const t=(0,i.Z)(e,{[n]:a},n),o=(0,r.Z)(e,{[n]:c},n);e=e.slice(t,o)}else{const t=o(a,c);e=e.filter((e=>t(e[n])))}}return e}function l(e,t,n,i){if(null!=e&&(null!=t&&(n=t-e),null!=n&&n>=0)){if(i&&null==(e=i(e)))return;return[h(e),h(n)]}}function u(e,t){return(n,i,r)=>{if(e(n,i,r))return l(n,i,r,t)}}function p(e){if(!e)return s;const{start:t,end:n}=e;if(null==t||null==n||t>n)return c;const i=o(t,n),r=e=>h(e-t),a=function(e){const{start:t,end:n}=e;return(e,i,r)=>{if(null==e)return!1;let o;if(null!=i)o=i;else{if(null==r)return!1;o=e+r}return!(o<e)&&e<=n&&o>=t}}(e);return{timeFilter:e,spanFilterFn:a,spanMapperFn:u(a,r),timeMapperFn:r,timeFilterFn:e=>i(e)}}const h=e=>e<5?Math.round(10*e)/10:Math.round(e)},14908:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var i=n(7476),r=n(88826),o=n(23549),a=n(31558);class s{constructor(e,t,n,i){this.chromiumApiRetryCount=5,this.isNtpPrivateApiAvailable=e=>window&&window.chrome&&window.chrome.ntpSettingsPrivate&&"function"==typeof window.chrome.ntpSettingsPrivate[e],this.prefSettingKey=e,this.searchForKeyName=t,this.targetKeyName=n,this.defaultItem=i}async getPreferenceSetting(e,t){try{const n=await this.getPreferenceSettingValueArray(t),i=n.findIndex((t=>t[this.searchForKeyName]===e));return i>-1?n[i]:null}catch(t){const n=`Failed to find user preference key: ${e}`;return this.logAppError(i.Aps,n,t),null}}async savePreferenceSetting(e,t){try{const n=await this.getPreferenceSettingValueArray()||[],i=n.findIndex((t=>t[this.searchForKeyName]===e));if(i>-1){const e={...n[i],...t};n[i]=e}else{const i={...this.defaultItem,...t};i[this.searchForKeyName]=e,n.push(i)}return this.setAndSavePreferenceSetting(n)}catch(t){const n="Failed to store user preference setting";return this.logAppError(i.nS9,n,`Key:${e}.Error:${t}`),!1}}isApiAvailableToUse(){return new Promise((e=>{const t="Error in isApiAvailableToUse";try{this.isGoodToUseNtpSettingsPrivate("getAllPrefs")?void 0===this.isPrefSettingKeyAvailable?window.chrome.ntpSettingsPrivate.getAllPrefs((n=>{if(this.isPrefSettingKeyAvailable=n&&n.findIndex((e=>e.key===this.prefSettingKey))>-1,!this.isPrefSettingKeyAvailable){let e="";try{n&&n.forEach((t=>e+=`${t.key}+`))}catch(e){this.logAppError(i.Aps,"Error: Can not log keylist from preference setting",e)}this.logAppError(i.me0,t,`missing preference key: ${this.prefSettingKey}, available keys: ${e}`)}e(this.isPrefSettingKeyAvailable)})):e(this.isPrefSettingKeyAvailable):(this.logAppError(i.MFQ,t,"getAllPrefs not present"),e(!1))}catch(t){this.logAppError(i.MFQ,"Error: Unexpected throw in isApiAvailableToUse",t),e(!1)}}))}logAppError(e,t,n){null===o.M0||void 0===o.M0||o.M0.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:n}})}async getPreferenceSettingValueArray(e){try{if(this.settingValuesArray&&!e)return this.settingValuesArray;{const e=await this.getPreferenceValueFromBrowser();return this.settingValuesArray=e||[],this.settingValuesArray}}catch(e){const t=`Failed to read ${this.prefSettingKey} preference setting`;return this.logAppError(i.k8J,t,e),[]}}setAndSavePreferenceSetting(e){if(!(0,a.N)())return!1;try{if(this.isGoodToUseNtpSettingsPrivate("setPref"))return this.settingValuesArray=e,window.chrome.ntpSettingsPrivate.setPref(this.prefSettingKey,this.settingValuesArray),!0;{const e="window.chrome.ntpSettingsPrivate.setPref does not exist.";return this.logAppError(i.T5b,e,`Key:${this.prefSettingKey}`),!1}}catch(e){return!1}}isGoodToUseNtpSettingsPrivate(e){let t=this.isNtpPrivateApiAvailable(e),n=0;for(;n<this.chromiumApiRetryCount&&!t;)n++,setTimeout((()=>{t=this.isNtpPrivateApiAvailable(e),t&&(0,r.H)(i.$9$,`Chromium API retry succeed after ${n} retry`)}),50);if(!t){const t=`functionName: ${e},\n            canUseDOM: ${(0,a.N)()},\n            windows: ${window},\n            document: ${window&&window.document},\n            createElement: ${window&&window.document&&window.document.createElement},\n            chrome: ${window&&window.chrome},\n            ntpSettingsPrivate: ${window&&window.chrome&&window.chrome.ntpSettingsPrivate},\n            ntpSettingsPrivate funtions: ${window&&window.chrome&&window.chrome.ntpSettingsPrivate&&Object.getOwnPropertyNames(window.chrome.ntpSettingsPrivate).toString()}\n            `;(0,r.H)(i.Fe_,"Failed to get funtion from window.chrome.ntpSettingsPrivate.",void 0,{...i.Fe_.pb,customMessage:t})}return t}getPreferenceValueFromBrowser(){return new Promise(((e,t)=>{if(this.isGoodToUseNtpSettingsPrivate("getPref"))window.chrome.ntpSettingsPrivate.getPref(this.prefSettingKey,(function(t){t&&t.value?e(t.value):e(null)}));else{const e="window.chrome.ntpSettingsPrivate.getPref does not exist.";this.logAppError(i.pCD,e,""),t(e)}}))}}},67213:function(e,t,n){"use strict";n.d(t,{w$:function(){return ne},Wt:function(){return N},jL:function(){return j},Kr:function(){return H},$u:function(){return b},w4:function(){return V},RV:function(){return z},Zb:function(){return ee},_W:function(){return I},zx:function(){return k},x5:function(){return G},He:function(){return te},P:function(){return x},hp:function(){return ce},UU:function(){return B},H1:function(){return q},db:function(){return U},aT:function(){return A},a:function(){return P},Qw:function(){return W},y3:function(){return oe},n6:function(){return F},Nd:function(){return $},VS:function(){return E},OM:function(){return M},Tr:function(){return O},I9:function(){return L},W6:function(){return R},DH:function(){return D},$5:function(){return se},hK:function(){return re},$j:function(){return w},nz:function(){return Z},fL:function(){return X},mY:function(){return Y},LC:function(){return _}});var i=n(31156),r=n(30008),o=n(45870),a=n(92100),s=n(74161),c=n(88826),d=n(7476),l=n(10754),u=n(31558),p=n(78672),h=n(54297),g=n(13334),m=n(82486),f=n(23549);function v(e){if("undefined"==typeof window||!window.document||window.isRenderServiceEnv)return void(0,c.OO)(new Error("DOM is not available"),d.$oH,"DOM is not available to use trusted types API.");const t=window.trustedTypes;if(!t)return void(0,c.OO)(new Error("Trusted types API is not available"),d.yJi,"Trusted types API is not available to use.");if(!t.createPolicy)return void(0,c.OO)(new Error("Trusted types API createPolicy function is not available"),d.Bis,"Trusted types API createPolicy function is not available to use.");const n=window.trustedTypePolicies||(window.trustedTypePolicies={});if(n[e])return n[e];const i=t.createPolicy(e,{createScriptURL:e=>{const t=function(e){const t=["ntp.msn.com","ntp.msn.cn","assets.msn.cn","assets.msn.com","www.bing.com","assets2.msn.com","assets2.msn.cn","www.clarity.ms","int.msn.com","r.bing.com","business.bing.com","staticview.msn.com","staticview.msn.cn",document.location.hostname];let n;try{n=new URL(e,location.origin)}catch(t){return(0,c.OO)(new Error("Failed to construct URL"),d.OC2,"URL is invalid",`Invalid URL: ${e}`),"about:blank#error"}if(n.hostname&&!t.includes(n.hostname))return(0,c.OO)(new Error("URL violates Trusted Types"),d.w5E,"URL hostname is not allowed",`Invalid URL hostname: ${n.hostname}`),"about:blank#error";return e}(e);return t}});return n[e]=i,i}var y=n(36867),S=n(87172),C=n(43356);const w="edgenext-pageState-V1",b="edgenext-base-V1",T=[];function k(){return new Promise((e=>{const t=window.chrome;if(t){const n=t.ntpSettingsPrivate;if(n&&"function"==typeof n.getConfigData)return void n.getConfigData((t=>{e({enabled:(null==t?void 0:t.enabledFeatures)||[],disabled:(null==t?void 0:t.disabledFeatures)||[]})}))}e({enabled:[],disabled:[]})}))}async function P(){const{enabled:e}=await k();return null==e?void 0:e.filter((e=>e.includes("msNtpExp")))}async function A(e){const t=[];return e.forEach((e=>{if(e.startsWith("m")){const n=e.replace("msNtpExp",""),i=Number.parseInt(n);i>=0&&t.push(i)}})),t}function I(e){let t=0;return e.forEach((e=>{e<31&&(t|=1<<e)})),0===t?"":t.toString()}async function E(){const{enabled:e}=await k();return null==e?void 0:e.includes("msReducedNtpAdsForNewDevice_BlockAllAds")}async function M(){const{enabled:e}=await k();return null==e?void 0:e.includes("msReducedNtpAdsForNewDevice_BlockOnly3PAds")}async function x(){const{enabled:e}=await k(),t=null==e?void 0:e.filter((e=>e.startsWith("ReducedAdsSDCards")));return t&&t.length>0?t[0]:null}function L(){const e=window&&window.navigator;if(!e)return!1;const{hardwareConcurrency:t=-1,deviceMemory:n=-1}=e;return t<=2||n<4}function R(){const e=window&&window.navigator;if(!e)return!1;const{hardwareConcurrency:t=-1,deviceMemory:n=-1}=e;return t<=2&&n<=2}function D(){const e=window&&window.navigator;if(!e)return!1;const{hardwareConcurrency:t=-1,deviceMemory:n=-1}=e;return t<=2||n<=2}function F(){const e=window&&window.navigator;if(!e)return!1;return"4g"!==(e&&e.connection?e.connection.effectiveType:"4g")}function O(){return"1"===new URLSearchParams(window.location.search).get("startpage")&&(null===(e=window)||void 0===e||null===(e=e.navigator)||void 0===e?void 0:e.deviceMemory)<=4;var e}function B(){let e=!1;const t="os-sku";if(!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv))try{if(window&&window.external&&window.external.getHostEnvironmentValue(t)){const n=JSON.parse(window.external.getHostEnvironmentValue(t));e=n&&"192"===n[t]}}catch(e){}return e}function N(e){var t;null===(t=window)||void 0===t||null===(t=t.chrome)||void 0===t||null===(t=t.ntpSettingsPrivate)||void 0===t||null===(t=t.onPrerenderConversionFromDhpToNtp)||void 0===t||t.addListener(e)}function _(e,t,n,i,r){n!==i?(f.M0.addOrUpdateTmplProperty("layoutchange",`${e}|${t}|${n}|${i}|${r}`),async function(e,t,n,i,r){const o=await U()||{};e==s.st.User?o.userLayoutHistory={time:r,changeKey:t,from:n,to:i}:o.wpoLayoutHistory={time:r,changeKey:t,from:n,to:i};await S.U.savePreferenceSetting(s.Xm.layoutHistory,o)}(e,t,n,i,r)):f.M0.addOrUpdateTmplProperty("layoutUpdate",`${e}|${t}|${n}|${i}|${r}`)}async function U(){const e=await S.U.getPreferenceSetting(s.Xm.layoutHistory,!0);return e&&e.value}async function W(){const e=await S.U.getPreferenceSetting(s.Xm.wpo),t=e&&e.value,n=t&&t.recommendedLayoutRetargetHistory&&t.recommendedLayoutRetargetHistory.length;return n?n+"":"0"}function H(){const e=(0,h.$o)().getObject("AdminPortalSettings");if(!e)return!1;const{isOfficeContentEnabled:t,isShowCompanyAndIndustry:n}=e;return!t&&!n}async function $(){const{enabled:e}=await k();return!(null==e||!e.length)&&e.includes("msNtpExpBlockLayoutPromotions")}async function q(){try{var e,t;const n=await U();let i=n&&n.wpoLayoutHistory,r=n&&n.userLayoutHistory;const o={};return i||(i=await async function(){const e=await S.U.getPreferenceSetting(s.Xm.wpo),t=e&&e.value,n=t&&t.layoutHistory;if(n&&n.length){const e=n[0];return{time:e.time,changeKey:"layout",from:s.Uq[e.from],to:s.Uq[e.to]}}return null}()),r||(r=await async function(){const e=await y.L.getPreferenceSetting(s.nc.layout_mode,!0),t=e&&e;return t?{time:t.timestamp,changeKey:"layout",from:8,to:t.value}:null}()),null!==(e=i)&&void 0!==e&&e.time&&(o.promotion=`${i.time}_${"layout"==i.changeKey?"l":"f"}_${i.from}_${i.to}`),null!==(t=r)&&void 0!==t&&t.time&&(o.selection=`${r.time}_${"layout"==r.changeKey?"l":"f"}_${r.from}_${r.to}`),o}catch(e){return{}}}async function G(){if((0,u.N)()&&window.caches){return(await window.caches.open("edgenext-pre-V1").then((e=>e.matchAll()))).find((e=>e.url.includes("/common.")))}}async function V(e){if((0,u.N)()&&window.caches)return window.caches.delete(e)}async function z(){if((0,u.N)()&&window.caches){!async function(e,t,n,i=!0){if((0,u.N)()&&window.caches){const r=(i?"ntp/":"")+t;window.caches.open(e).then((e=>e.put(r,n)))}}(w,"wasSSRBasePageCacheCleared",new Response("true"),"localhost.msn.com"!==(0,p.Td)());const e=await window.caches.open(b),t=(await e.keys()).filter((e=>!e.url.includes("prerender"))),n=[];if(t.forEach((t=>{n.push(e.delete(t))})),n.length>0){await Promise.all(n)||(0,c.H)(d.Bpd,`Failed to delete non-prerender base page responses from ${b}`)}}}function j(){window&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.onNtpFeedbackSubmitted&&window.chrome.ntpSettingsPrivate.onNtpFeedbackSubmitted.addListener((()=>{K()}))}const K=async()=>{const e=g.Al.ClientSettings?g.Al.ClientSettings.aid:"";let t=f.M0.getPageMetadata().JoinIdProps.IDXId;if(t){const n=t.split(",");t=n.slice(0,10).toString();const i={serviceType:"oneservice",oneServiceTraceId:t,oneServiceActivityId:e};f.M0.sendTraceInfoEvent(i)}};function Q(){const e=g.Al&&g.Al.Diagnostics||{};return e&&(0,i.fB)(JSON.stringify(e))}function J(){const e=J;return new Promise((t=>{void 0!==e.cache&&t(e.cache);const n=i=>{i>3&&(e.cache=null,t(null));const r=document.getElementById("ntp-diagnostics");r&&r.innerText?(e.cache=r,t(r)):(i++,setTimeout((()=>n(++i)),3e3))};n(0)}))}async function Y(e,t,n,i){try{(e||t)&&T.push({id:e,debug:t}),await Promise.all([(0,C.F_)(),(0,m.lr)()]);const o=await J();if(o&&o.innerText){const e=JSON.parse(o.innerText);Object.assign(e,{traceInfo:T}),Object.assign(e,{prgDiagnostics:Q()}),Object.assign(e,{authTrail:n}),Object.assign(e,{countryConfidenceFactor:(0,r.q)()}),i&&Object.assign(e,{ocvSource:i}),o.innerText=JSON.stringify(e)}}catch{(0,c.H)(d.vxy,"Error throwed during update idxid into diagnostic element")}}function Z(e,t){const n=v(t);return n?n.createScriptURL(e):((0,c.OO)(new Error("Trusted Types policy creation error"),d.qS2,"Trusted Types policy creation failed, Trusted Types API is unavailable."),e)}async function X(){var e;if(null===(e=window)||void 0===e||null===(e=e.chrome)||void 0===e||null===(e=e.embeddedSearch)||void 0===e||null===(e=e.newTabPage)||void 0===e||!e.getTabTimings)return;const t=(0,l.Ou)();window.chrome.embeddedSearch.newTabPage.getTabTimings(((e,n)=>{e&&n&&void 0!==n.tabStartToNavigationStart&&(t.tabStartToNavigationStart=Math.round(n.tabStartToNavigationStart))}))}async function ee(){var e;const t=await S.U.getPreferenceSetting("background_setting_preferences",!0);return null==t||null===(e=t.value)||void 0===e?void 0:e.backgroundSelectionMetadata}async function te(){const e=window&&window.chrome&&window.chrome.ntpSettingsPrivate;if(e&&e.getPref)return new Promise((t=>{e.getPref("ntp.background_image",(function(e){t(null==e?void 0:e.value)}))}))}function ne(e){var t,n,i;if(null!==(t=window)&&void 0!==t&&null!==(t=t.chrome)&&void 0!==t&&null!==(t=t.ntpSettingsPrivate)&&void 0!==t&&t.activateTriggerWithPageType&&null!==(n=window)&&void 0!==n&&null!==(n=n.chrome)&&void 0!==n&&null!==(n=n.ntpSettingsPrivate)&&void 0!==n&&n.NTPTrigger&&null!==(i=window)&&void 0!==i&&null!==(i=i.chrome)&&void 0!==i&&null!==(i=i.ntpSettingsPrivate)&&void 0!==i&&i.PageType){var r,o;const t="1"===new URLSearchParams(null===(r=window)||void 0===r||null===(r=r.location)||void 0===r?void 0:r.search).get("startpage");window.chrome.ntpSettingsPrivate.activateTriggerWithPageType(null===(o=window.chrome.ntpSettingsPrivate.NTPTrigger)||void 0===o?void 0:o[e],t?window.chrome.ntpSettingsPrivate.PageType.DHP:window.chrome.ntpSettingsPrivate.PageType.NTP)}}const ie="widgetLockScreenLandingSessions";async function re(){const e=await oe()||[];return e.push({ts:Date.now()}),await S.U.savePreferenceSetting(ie,e)?e:null}async function oe(){return await S.U.getPreferenceSetting(ie).then((e=>null!=e&&e.value?e.value:null))}const ae="myFeed";function se(e){return!e||"null"===e||"undefined"===e||""===e||e.toLocaleLowerCase()===ae.toLocaleLowerCase()}async function ce(e){var t,n;if(!g.Al.EdgeNTPHeader&&!await y.L.isApiAvailableToUse())return;let i=null===(t=g.Al.EdgeNTPHeader)||void 0===t||null===(t=t.freSeenCount)||void 0===t?void 0:t.toString();if(!i){const e=await y.L.getPreferenceSetting(s.nc.seen_interest_fre_count,!0);i=e&&e.value?e.value.toString():"0"}let r=null===(n=g.Al.EdgeNTPHeader)||void 0===n?void 0:n.newProfFreTime;if(!r){var c;const e=new o.o;if(null===(c=window)||void 0===c||null===(c=c.chrome)||void 0===c||null===(c=c.ntpSettingsPrivate)||void 0===c||c.getConfigData((t=>e.set(t&&t.newProfileFreSeenTime||null))),r=await e.getResultAsync(),!r){var d;let e=null===(d=g.Al.EdgeNTPHeader)||void 0===d?void 0:d.seenNewDevFre;if(void 0===e){var l;const t=new o.o;null===(l=window)||void 0===l||null===(l=l.chrome)||void 0===l||null===(l=l.ntpSettingsPrivate)||void 0===l||l.getPref(s._9.hasUserSeenNewFre,(e=>t.set(null==e?void 0:e.value))),e=await t.getResultAsync()}var u;if(e)if(r=null===(u=g.Al.EdgeNTPHeader)||void 0===u?void 0:u.newDevFreTime,!r){var p;const e=new o.o;null===(p=window)||void 0===p||null===(p=p.chrome)||void 0===p||null===(p=p.ntpSettingsPrivate)||void 0===p||p.getConfigData((t=>e.set(t&&t.newDeviceFreSeenTime||null))),r=await e.getResultAsync()}}}const h=r&&Date.now()-r<864e5,m=a.c.getQueryParameterByName("firstlaunch",window.location.href);return(e||"1"===m||h)&&(i="10"),i}},28496:function(e,t,n){"use strict";n.d(t,{MN:function(){return s},j0:function(){return i}});var i,r,o,a=n(31558);!function(e){e.NTP_TOP_SITES_CLICK="NTP_TopSites_Click"}(i||(i={})),function(e){e.FunctionalNotification="ntp_profile_scope_tab_functional_notification",e.FeatureCampaign="ntp_profile_scope_tab_feature_campaign"}(r||(r={})),function(e){e.PrimaryCTAClicked="PrimaryCTA_Clicked",e.DismissedCTA_Clicked="DismissedCTA_Clicked",e.Notification_Ignored="Notification_Ignored"}(o||(o={}));class s{static isEdgeNurturingAvailable(){var e;return(0,a.N)()&&(null===(e=window.chrome)||void 0===e?void 0:e.edgeNurturingPrivate)}static async getToken(e,t){return new Promise((n=>{var i;(0,a.N)()?"function"==typeof(null===(i=window.chrome)||void 0===i||null===(i=i.edgeNurturingPrivate)||void 0===i?void 0:i.GetToken)?window.chrome.edgeNurturingPrivate.GetToken(e,t,"NTP",(e=>{n(e)})):n({Message:"window.chrome.edgeNurturingPrivate.GetToken API Unavailable"}):n({Message:"Cannot use DOM"})}))}static updateCTA(e,t){var n;(0,a.N)()&&"function"==typeof(null===(n=window.chrome)||void 0===n||null===(n=n.edgeNurturingPrivate)||void 0===n?void 0:n.UpdateCTA)&&window.chrome.edgeNurturingPrivate.UpdateCTA(e,t)}static notifyTriggerEvent(e){return new Promise((t=>{var n;(0,a.N)()&&"function"==typeof(null===(n=window.chrome)||void 0===n||null===(n=n.edgeNurturingPrivate)||void 0===n?void 0:n.NotifyTriggerEvent)&&window.chrome.edgeNurturingPrivate.NotifyTriggerEvent(e,(e=>{t(e)}))}))}}},37423:function(e,t,n){"use strict";n.d(t,{F:function(){return c}});var i=n(23549),r=n(7183),o=n(21789);const a=`reloadCount_${"undefined"!=typeof window?window.location.href:""}`;function s(e,t,n){if(i.M0.sendAppErrorEvent({...e,message:"Navigating to local ntp page on exception.",pb:{...e.pb,customMessage:t,stack:n&&n.stack}}),o.jG.IsDebug)return;const r=new URLSearchParams;e&&r.set("ntperror",e.id);const a=i.M0.getRequestId();a&&r.set("rid",a),i.M0.flush(!0,"AppError"),setTimeout((()=>{location.replace("chrome-search://local-ntp/local-ntp.html?"+r.toString())}),2e3)}const c={tryReloadNtpPage:function(e,t,n,o){if(!r.y7.supported)return void s(t,`sessionStorage is not supported. ${n}`);if(r.y7.getItem(a)){const e=r.y7.getItem(a),i=e&&parseInt(e)||0;if(!(i<2))return void s(t,`Max reload count (2) reached. ${n}`,o);r.y7.setItem(a,i+1+"")}else r.y7.setItem(a,"1");i.M0.sendAppErrorEvent({...e,message:"Reloading NTP page on exception.",pb:{...e.pb,customMessage:n,stack:o&&o.stack}}),i.M0.flush(!0,"AppError"),setTimeout((()=>{location.reload()}),2e3)},redirectToLocalNtp:s}},62929:function(e,t,n){"use strict";var i;function r(e,t,n=performance.now()){var i;const r=null===(i=window)||void 0===i||null===(i=i.chrome)||void 0===i||null===(i=i.embeddedSearch)||void 0===i?void 0:i.newTabPage;r&&(r.logEventWithTimestamp?r.logEventWithTimestamp(e,n,t):r.logEvent(e))}n.d(t,{f:function(){return r}}),function(e){e[e.NTP_ALL_TILES_LOADED=11]="NTP_ALL_TILES_LOADED",e[e.NTP_SHORTCUT_CUSTOMIZED=39]="NTP_SHORTCUT_CUSTOMIZED",e[e.NTP_CUSTOMIZE_ADD_SHORTCUT_CLICKED=44]="NTP_CUSTOMIZE_ADD_SHORTCUT_CLICKED",e[e.NTP_CUSTOMIZE_SHORTCUT_REMOVE=53]="NTP_CUSTOMIZE_SHORTCUT_REMOVE",e[e.NTP_CUSTOMIZE_SHORTCUT_CANCEL=54]="NTP_CUSTOMIZE_SHORTCUT_CANCEL",e[e.NTP_CUSTOMIZE_SHORTCUT_DONE=55]="NTP_CUSTOMIZE_SHORTCUT_DONE",e[e.NTP_CUSTOMIZE_SHORTCUT_ADD=58]="NTP_CUSTOMIZE_SHORTCUT_ADD",e[e.NTP_CUSTOMIZE_SHORTCUT_UPDATE=59]="NTP_CUSTOMIZE_SHORTCUT_UPDATE",e[e.NTP_BACKGROUND_IMAGE_LOADED=60]="NTP_BACKGROUND_IMAGE_LOADED",e[e.NTP_VISUALLY_READY=62]="NTP_VISUALLY_READY",e[e.NTP_SMARTLIST_ENABLED=63]="NTP_SMARTLIST_ENABLED",e[e.NTP_SMARTLIST_DISABLED=64]="NTP_SMARTLIST_DISABLED"}(i||(i={}))},36867:function(e,t,n){"use strict";n.d(t,{L:function(){return c}});var i=n(55524),r=n(291),o=n(14908),a=n(7476);class s extends o.N{constructor(){super("ntp.record_user_choices","setting","value",{setting:"default",source:"default layout",timestamp:0,value:-1})}static getInstance(){return i.Gq.get("__RecordUserChoicesManager__",(()=>new s))}async deleteKeyValueFromPSL(e){try{let t=await this.getPreferenceSettingValueArray()||[];return t=t.filter((t=>t&&t[this.searchForKeyName]!==e)),this.setAndSavePreferenceSetting(t)}catch(t){const n="Failed to delete user preference setting";return this.logAppError(a.nS9,n,`Key:${e}.Error:${t}`),!1}}}const c=(0,r.h)(s)},87172:function(e,t,n){"use strict";n.d(t,{H:function(){return h},U:function(){return g}});var i=n(55524),r=n(291),o=n(7476),a=n(14908),s=n(45870),c=n(23549),d=n(31558),l=n(52965);function u(e,t){return(e||[]).find((e=>(null==e?void 0:e.key)===t))||null}function p(e,t){const{key:n,value:i,deleteKey:r=!1}=t;let o=e||[];if(r)o=o.filter((e=>e&&(null==e?void 0:e.key)!==n));else{const e=o.findIndex((e=>(null==e?void 0:e.key)===n));if(e>-1)o[e]={...o[e],value:i};else{const e={key:n,value:i};o.push(e)}}return o}class h extends a.N{constructor(){super("ntp.user_nurturing","key","value",{key:"default",value:"none"}),this._latestItems=[],this._initializeCachedItemsPromise=new s.o}static getInstance(){return i.Gq.get("__UserNurturingManager__",(()=>new h))}async savePreferenceSetting(e,t,n=!1){try{return await this._initializeCachedItems(),this._updateCachedItems({key:e,value:t,deleteKey:n}),await this._updatePersistedItems({key:e,value:t,deleteKey:n})}catch(t){const n="Failed to store user nurturing preference";return this.logAppError(o.nS9,n,`Key:${e}.Error:${t}`),!1}}async getPreferenceSetting(e,t){try{if(await this._initializeCachedItems(),t){const t=await this._getPersistedItemByKey(e);return this._updateCachedItems({key:e,value:null==t?void 0:t.value,deleteKey:!1}),t}return this._getCachedItemByKey(e)}catch(t){const n=`Failed to find user preference key: ${e}`;return this.logAppError(o.Aps,n,t),null}}async getClonedPreferenceSetting(e,t){const n=await this.getPreferenceSetting(e,t);return(0,l.Z)(n)}async _initializeCachedItems(){var e,t;if(this._initializeCachedItemsPromise.wasSet())return this._initializeCachedItemsPromise.getResultAsync();const n=Date.now();null!==(e=window)&&void 0!==e&&null!==(e=e.chrome)&&void 0!==e&&null!==(e=e.ntpSettingsPrivate)&&void 0!==e&&e.getPref&&c.M0.addOrUpdateTmplProperty("psl_loading_time","-1");try{this._items=await this.getPreferenceValueFromBrowser()||[],this._latestItems=(0,l.Z)(this._items)}catch(e){const t="Failed to initialize cached items for UserNurturingManager";this.logAppError(o.Aps,t,e)}null!==(t=window)&&void 0!==t&&null!==(t=t.chrome)&&void 0!==t&&null!==(t=t.ntpSettingsPrivate)&&void 0!==t&&t.getPref&&c.M0.addOrUpdateTmplProperty("psl_loading_time",(Date.now()-n).toString()),this._initializeCachedItemsPromise.set(),this._listenToPreferenceChange()}_getCachedItemByKey(e){return u(this._items,e)}async _getPersistedItemByKey(e){return u(this._latestItems,e)}_updateCachedItems(e){this._items=p(this._items,e)}async _updatePersistedItems(e){const t=this._latestItems;return this.setAndSavePreferenceSetting(p(t,(0,l.Z)(e)))}deleteKeyValueFromPSL(e){this.savePreferenceSetting(e,null,!0)}_listenToPreferenceChange(){(0,d.N)()&&window.chrome&&window.chrome.ntpSettingsPrivate&&window.chrome.ntpSettingsPrivate.onPrefsChanged.addListener((e=>{const t=(e||[]).find((e=>(null==e?void 0:e.key)===this.prefSettingKey));t&&(this._latestItems=(0,l.Z)(t.value||[]))}))}}const g=(0,r.h)(h)},74161:function(e,t,n){"use strict";n.d(t,{Nn:function(){return l},QO:function(){return g},Uq:function(){return p},Xm:function(){return i},_9:function(){return d},dE:function(){return h},nc:function(){return s},rr:function(){return a},sj:function(){return o},st:function(){return c},ui:function(){return u}});const i={campaigns:"campaigns",feedLayout:"feed_layout",renderSingleColumn:"render_single_column",wpo:"wpo",wpoLytTmpl:"wpo_lyt_tmpl",topSites:"top_sites",recommendedSites:"recommended_sites",viewport:"viewport",wpo_nx:"wpo_nx",layoutPromotion:"layoutPromotion",layoutHistory:"layoutHistory",sptmarket:"sptmarket"};var r,o,a;!function(e){e.Ntp="ntp",e.Wpo="wpo"}(r||(r={})),function(e){e.MultiColumn="multi",e.SingleColumn="single"}(o||(o={})),function(e){e.apiError="api_error"}(a||(a={}));const s={tscollapsed:"tscollapsed",layout_mode:"layout_mode",left_rail:"left_rail",quick_links_options:"quick_links_options",single_column:"single_column",recommended_sites:"recommended_sites",news_below_searchbox:"news_below_searchbox",ntp_tips:"ntp_tips",search_history:"search_history",current_location_enabled:"current_location_enabled",enable_sponsored_content:"enable_sponsored_content",enable_split_screen:"enable_split_screen",enable_pulse:"enable_pulse",seen_interest_fre_count:"seen_interest_fre_count",visited_following_feed:"visited_following_feed",dismiss_scroll_down_button:"dismiss_scroll_down_button",breaking_news_dismissed:"breaking_news_dismissed",topsites_open_in_new_tab:"ntp.topsites_open_in_new_tab"};var c;!function(e){e.User="user",e.Wpo="wpo",e.Lpo="lpo"}(c||(c={}));const d={backgroundImageTypePolicy:"ntp.background_type_blocked_by_policy",currentBackgroundImageType:"ntp.background_image_type",hideDefaultTopSites:"ntp.hide_default_top_sites",customBackgroundImageInfo:"ntp.local_background_image",layout:"ntp.layout_mode",quickLinks:"ntp.show_top_sites",quickLinksDisplaySetting:"ntp.quick_links_options",imageOfTheDay:"ntp.show_image_of_day",feeds:"ntp.news_feed_display",greeting:"ntp.show_greeting",showSettings:"ntp.show_settings",verticalTabsCollapsed:"edge.vertical_tabs.collapsed",verticalTabsOpened:"edge.vertical_tabs.opened",singleColumnEnabled:"ntp.single_column.enabled",userNurturingUpdated:"ntp.user_nurturing",hasUserSeenNewFre:"new_device_fre.has_user_seen_new_fre",defaultBrowserSettingEnabled:"browser.default_browser_setting_enabled",showAppLauncher:"ntp.enable_app_launcher",userChoices:"ntp.record_user_choices",selectedFeedPivot:"ntp.selected_feed_pivot"},l="_split";var u,p,h,g;!function(e){e.NotInChinaCoachMarkButton="notInChinaCoachMarkButton",e.FeedbackLink="feedbackLink"}(u||(u={})),function(e){e[e.focused=0]="focused",e[e.inspirational=1]="inspirational",e[e.informational=2]="informational",e[e.custom=3]="custom"}(p||(p={})),function(e){e.MANUAL="manual",e.WPO_OPEN="wpo_open",e.WPO_CLOSE="wpo_close"}(h||(h={})),function(e){e[e.MANUAL=0]="MANUAL",e[e.WPO_BEFORE_CLOSE=1]="WPO_BEFORE_CLOSE",e[e.WPO_CLOSED=2]="WPO_CLOSED",e[e.WPO_BEFORE_OPEN=3]="WPO_BEFORE_OPEN",e[e.WPO_OPENED=4]="WPO_OPENED"}(g||(g={}))},20300:function(e,t,n){"use strict";n.d(t,{P6:function(){return f},YZ:function(){return y},vT:function(){return v}});var i=n(88672),r=n(88826),o=n(7476),a=n(23549),s=n(53629),c=n(45266),d=n(36867),l=n(74161),u=n(87172),p=n(55524),h=n(48278);const g="__storedRecommendedSitesState__",m="__storedRecommendedSitesCoachMarkState__";async function f(e){let t=p.Gq.get(g);if(t)return t;if(t="tworows",e.enableRecommendedSitesSelection){const n=await async function(){if(!await d.L.isApiAvailableToUse())return null;const e=await d.L.getPreferenceSetting(l.nc.recommended_sites);if(e&&void 0!==e.value)return c.$_[e.value];return null}();if(n)t=n;else{const n=function(){try{var e;const t=s.k.getWpoTreatmentsWithType(i._h.recommendedsitesCollapse),n=(null==t?void 0:t.length)>0&&(null===(e=t[0])||void 0===e||null===(e=e.properties)||void 0===e?void 0:e.recommendedSitesCollapsibleControlConfig);if(n)return n}catch(e){const t="Error in getting wpo recommended sites config";(0,r.H)(o.Od5,t,`error:${e}`)}return null}(),d=e.enableWpoRecommededSitesConfigOverride?n:null;if(d&&d.recommendedSiteStatus){const e=await async function(){if(!await u.U.isApiAvailableToUse())return null;const e=await u.U.getPreferenceSetting(l.nc.recommended_sites);if(e&&e.value&&void 0!==e.value.type)return c.$_[e.value.type];return null}();e&&e===d.recommendedSiteStatus?t=e:(t=d.recommendedSiteStatus,a.M0.addOrUpdateTmplProperty("WpoPromRecSite","1"),"off"===t?p.Gq.set(m,h.B.recommendedSitesPromotionOff):p.Gq.set(m,h.B.recommendedSitesPromotionNewLine),async function(e){if(!await u.U.isApiAvailableToUse())return;const t={source:"wpo",timestamp:(new Date).getTime(),type:c.$N[e]};u.U.savePreferenceSetting(l.Xm.recommendedSites,t)}(t))}}}return"onerow"===t&&(t="tworows"),a.M0.addOrUpdateTmplProperty("RecommendedSites",t.toString()),p.Gq.set(g,t),t}async function v(e){if(!await d.L.isApiAvailableToUse())return;const t={setting:l.nc.recommended_sites,source:"ntp",timestamp:(new Date).getTime(),value:c.$N[e]};d.L.savePreferenceSetting(l.nc.recommended_sites,t)}function y(){const e=p.Gq.get(m);return e||null}},84424:function(e,t,n){"use strict";n.d(t,{DU:function(){return v},NU:function(){return y},R:function(){return f},bC:function(){return w},jt:function(){return m}});var i=n(55524),r=n(31558),o=n(88826),a=n(7476),s=n(88672),c=n(13334),d=n(91046),l=n(36867),u=n(74161),p=n(53629);const h="__StoredTopSitesState__",g="__TopSitesCollapsibleControlConfig__";function m(e,t){if(t&&i.Gq.set(g,t),e){const e=f();e&&i.Gq.set(g,e)}}function f(){try{var e;const t=p.k.getWpoTreatmentsWithType(s._h.topsitesCollapse),n=p.k.getWpoTreatmentsWithType(s._h.topSites),r=[...t||[],...n||[]],o=(null==r?void 0:r.length)>0&&(null===(e=r[0])||void 0===e||null===(e=e.properties)||void 0===e?void 0:e.topSitesCollapsibleControlConfig)||void 0;return null!=o&&o.promoteTopSites2Row&&window.isSSREnabled&&(o.promoteTopSites2Row=!1),i.Gq.set(g,o),o||null}catch(e){const t="Error in getting wpo topSites config";(0,o.H)(a.Od5,t,`error:${e}`)}return null}function v(){try{const e=p.k.getWpoTreatmentsWithType(s._h.topSitesPromotion),t=p.k.getWpoTreatmentsWithType(s._h.topSites),n=[...e||[],...t||[]];if((null==n?void 0:n.length)>0&&n[0].properties)return n[0].properties}catch(e){const t="Error in getting wpo topSites config";(0,o.H)(a.Od5,t,`error:${e}`)}return null}async function y(e){const t=await l.L.getPreferenceSetting(u.nc.tscollapsed),n=null==t?void 0:t.value;(0,r.N)()||S(n);const o=C();if(void 0!==n||!o)return 1===n;const a=i.Gq.get(h);if(void 0!==a)return a;let s=o.collapsibleControlIsDefaultCollapsed;return s&&o.collapseForDefaultInformational&&(s="always"===e.selectedFeedDisplaySetting),i.Gq.set(h,!!s),!!s}function S(e){var t;const n=null===(t=c.Al.EdgeNTPHeader)||void 0===t?void 0:t.tscollapsed;if(void 0!==n&&n!==e){"true"===(0,d.L)().get("mock-ntp-header")||(0,o.H)(a.sFk,"SSR - Edge header mismatch.",void 0,{...a.sFk.pb,customMessage:`key: tsCollapsed, header: ${n}, state: ${e}`})}}function C(){return i.Gq.get(g)||f()}async function w(e,t){const n=await l.L.getPreferenceSetting(u.nc.tscollapsed),i=null==n?void 0:n.value;if((0,r.N)()||S(i),e){if(i===u.QO.WPO_BEFORE_OPEN)return!0;if(i===u.QO.WPO_CLOSED){const e=C();if(null!=e&&e.expandForAllLayout)return!0}}if(t&&i===u.QO.WPO_BEFORE_CLOSE){const e=C();if(null!=e&&e.expandForAllLayout)return!0}return!1}},78419:function(e,t,n){"use strict";n.d(t,{h:function(){return _}});var i=n(98619),r=n(50632),o=n(28467),a=n(76379),s=n(43438),c=n(13334),d=n(21789),l=n(95153),u=n(23549),p=n(60844),h=n(62433),g=n(67103),m=n(95244),f=n(72626);f.kP&&(window.telemetryEventsClear=()=>{window.telemetryEvents=[]},window.telemetryEventsFlush=()=>{const e={...window.telemetryEvents};return window.telemetryEventsClear(),e});const v=function(e){f.kP&&(window.telemetryEvents=window.telemetryEvents||[],window.telemetryEvents.push(e))},y=[{type:m.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.msn.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:m.G.Debug,mapper:new g.k,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new p.P,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new h.O,transporterConfig:{callback:v}}],S=[{type:m.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.msn.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:m.G.Debug,mapper:new g.k,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new p.P,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new h.O,transporterConfig:{callback:v}}],C=[{type:m.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.microsoftstart.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:m.G.Debug,mapper:new g.k,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new p.P,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new h.O,transporterConfig:{callback:v}}],w=[{type:m.G.OneDS,transporterConfig:{key:"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028",endpoint:"https://events-sandbox.data.microsoftstart.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}},{type:m.G.Debug,mapper:new g.k,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new p.P,transporterConfig:{callback:v}},{type:m.G.Debug,mapper:new h.O,transporterConfig:{callback:v}}],b=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],T=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],k=[{type:m.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],P=[{type:m.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.msn.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.msn.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],A=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.microsoftstart.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],I=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.microsoftstart.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],E=[{type:m.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.microsoftstart.com/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.com/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],M=[{type:m.G.OneDS,transporterConfig:{key:"c498711f02654edca8a715ca6e1cb4d4-dc31da17-845c-4cca-84e5-547d05dad708-6945",endpoint:"https://browser.events.data.microsoftstart.cn/OneCollector/1.0"}},{type:m.G.CTag,transporterConfig:{endpoint:"https://c.microsoftstart.cn/c.gif"}},{type:m.G.Comscore,transporterConfig:{endpoint:"https://sb.scorecardresearch.com/b"}}],x=[{type:m.G.SuperApp,transporterConfig:{enableConsoleLog:!0}}],L=[{type:m.G.OneDS,transporterConfig:{key:"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279",endpoint:"https://browser.events.data.msn.com/OneCollector/1.0"}}],R={};R.enterprise=k,R.enterpriseCN=P,R.enterpriseMicrosoftStart=E,R.enterpriseCNMicrosoftStart=M,R.int=y,R.intCN=S,R.intMicrosoftStart=C,R.intCNMicrosoftStart=w,R.prod=b,R.prodCN=T,R.prodMicrosoftStart=A,R.prodCNMicrosoftStart=I,R.superApp=x,R.superAppWeb=L;var D=n(31558),F=n(70956),O=n(85663),B=n(21930),N=n(74102);class _{static initPage(e,t,n){const i=c.Al&&c.Al.ClientSettings||{},{pageGenTime:r=null}=i||{};u.M0.initPage(e,n||d.jG.ActivityIdLowerCaseNoHypens,d.jG.BuildVersion,d.jG.FrontDoorMuid,r),t&&(0,B.b1)().then((()=>u.M0.initScrollPerformanceTrackers())),s.A.subscribe(s.U.Initialized,U)}static getAppTypeTelemetryContract(e,t,n,i){const r=c.Al&&c.Al.ClientSettings||{},o=c.Al&&c.Al.Diagnostics||{},{mc:a={}}=o||{},{geo_citycf:s=null,geo_countrycf:u=null,requestTrailInfo:p}=r||{},{cdn:h=null}=p||{},g=r.browser&&"true"===r.browser.ismobile||"phone"===r.deviceFormFactor,m="true"===r.static_page;let f,v,y,S;f=i.pageType?i.pageType:r.pagetype,v=i.pageContentTitle?i.pageContentTitle:(0,D.N)()?document.title:"",y=i.pageUrl?i.pageUrl:(0,D.N)()?document.URL:(0,l.DO)(t),S=i.pageViewType?i.pageViewType:_.trackCallbacks(n);let C,w=d.jG.CurrentMarket;i.locale&&(w=i.locale);const b=y&&(y.includes("vptest=1")||y.includes("reqsrc=vp")),T=_.hasFlight("prg-1sw-logbat");!b&&T&&(C={throttleClientLogs:T});return{browser:{isMobile:g},flight:{id:void 0},locale:{mkt:w,lang:d.jG.MarketRequestInputLanguage,region:d.jG.MarketRequestInputRegion,geo_cc:d.jG.MarketRequestInputGeoCountry,mktReason:d.jG.MarketDetectionType},page:{appType:d.jG.AppType,canvas:e.pageCanvas,config:e.pageConfiguration,content:{title:v,...!(0,O.isNullOrUndefined)(e.pageContentCategory)&&{category:e.pageContentCategory},...!(0,O.isNullOrUndefined)(e.pageContentSubCategory)&&{subcategory:e.pageContentSubCategory},...!(0,O.isNullOrUndefined)(e.pageContentDomainId)&&{domainId:e.pageContentDomainId},...!(0,O.isNullOrUndefined)(e.pageContentId)&&{id:e.pageContentId},...!(0,O.isNullOrUndefined)(e.pageContentVertical)&&{vertical:e.pageContentVertical}},isAdEnabled:!1,isAutoRefresh:!1,isJSEnabled:!0,isStatic:m,name:e.pageName,ocid:e.pageOcid,product:e.pageProduct,type:f,url:y,viewType:S,...!(0,O.isNullOrUndefined)(e.pageTheme)&&{theme:e.pageTheme},...!(0,O.isNullOrUndefined)(e.pageHas3PSearch)&&{has3PSearch:e.pageHas3PSearch}},debug:{cetoId:d.jG.ActivityIdLowerCaseNoHypens||null,cdn:h,cookies:a,geoCityCf:s,geoCountryCf:u,langMismatch:d.jG.MarketMismatchDetail||null},...(!(0,O.isNullOrUndefined)(e.userSignInStatus)||!(0,O.isNullOrUndefined)(e.userSsoStatus)||!(0,O.isNullOrUndefined)(e.userAadState))&&{user:{...!(0,O.isNullOrUndefined)(e.userSignInStatus)&&{isSignedIn:e.userSignInStatus},...!(0,O.isNullOrUndefined)(e.userSsoStatus)&&{isSso:e.userSsoStatus},...!(0,O.isNullOrUndefined)(e.userAadState)&&{aadState:e.userAadState}}},featureFlags:C}}static getAppTypeTrackingSystemConfig(e){const t=function(e,t,n,i){const r=e&&e.includes("microsoftstart.com")?"MicrosoftStart":"";let o;return o="prod"===t?i?"enterprise":"prod":"int",R[`${o}${n?"CN":""}${r}`]}(c.Al&&c.Al.ClientSettings&&c.Al.ClientSettings.domain,d.jG.Environment,d.jG.IsChinaCompliance,e);return(0,N.Ep)(t),t}static trackCallbacks(e){let t="";switch((0,i.Bn)().currentColumnArrangement){case e.singleColSupported&&r.K$.c1:t="size1column";break;case!e.singleColSupported&&r.K$.c1:case r.K$.c2:t="size2column";break;case r.K$.c3:t="size3column";break;case r.K$.c4:t="size4column";break;case e.fiveColSupported&&r.K$.c5:t="size5column"}return t}static hasFlight(e){const t=d.jG.CurrentRequestTargetScope&&d.jG.CurrentRequestTargetScope.pageExperiments,n=(0,F.M)(t);return n&&n.includes(e)}}function U(e){if(e){s.A.get(s.U.CookieConsentProvider)===o.i.OneTrustBanner&&window.addEventListener(a.C,(()=>{const e=u.M0.getPageMetadata();e&&e.contract&&e.contract.page&&(e.contract.page.consentChanged="occ")}))}}},74102:function(e,t,n){"use strict";n.d(t,{fi:function(){return d},uH:function(){return l},Ep:function(){return s}});var i=n(67103),r=n(31558),o=n(78672);var a=n(95244);function s(e){e&&l()&&e.push({type:a.G.Automation,mapper:new i.k,transporterConfig:{callback:c}})}function c(e){d.dispatch({type:a.G.OneDS,payload:e})}const d=new class{constructor(e){this.eventName=e,this.history=[]}dispatch(e){const t=new CustomEvent(this.eventName,{detail:e});this.history.push(t.detail),globalThis.dispatchEvent(t)}listen(e){const t=t=>e(t.detail);return globalThis.addEventListener(this.eventName,t),this.history.forEach(e),{remove:()=>globalThis.removeEventListener(this.eventName,t)}}}("telemetryPayload");function l(){if((0,r.N)()){const e=new URLSearchParams((0,o.zp)());return e.getAll("item").includes("tv:1")||"vp"===e.get("reqsrc")}}},11436:function(e,t,n){"use strict";n.d(t,{z:function(){return x}});var i=n(31718),r=n(59349),o=n(90215),a=n(15570),s=n(29330),c=n(42933);var d=n(92062),l=n(19995),u=n(10754),p=n(11923);function h(e={}){const t={...(0,u.Ou)(),...(0,u.Y9)()},n=[],r={WW:{pid:0},Resolver:{pid:1},Ads:{pid:2},Telemetry:{pid:3},"Content Preview":{pid:4},Images:{pid:5},JS:{pid:6},Statics:{pid:7},Configs:{pid:8},Services:{pid:9},nextPID:{pid:20}},o=100;!function(e,t,n){const i=[{name:"Ads",regex:/(\/srtb\.|taboola|outbrain)/i},{name:"Telemetry",regex:/(otf\.|\/c\.gif)/i},{name:"Content Preview",regex:/\/content\/view\/v[0-9]\/Preview\//i},{name:"Images",regex:/(img-s-msn-com|\.svg)/i},{name:"JS",regex:/\.js/i},{name:"Statics",regex:/statics/i},{name:"Configs",regex:/\/config/i},{name:"Services",regex:/(\/service\/|api|\/getappanoncookie|content|microsoftonline)/i}];let r=performance.getEntriesByType("resource").filter((t=>{const{duration:n,startTime:i}=t;return w(e,i,i+n)}));i.forEach((e=>{S(e.name,n);const i=[];r.filter((t=>{const n=t.name.match(e.regex);return n||i.push(t),n})).forEach(((n,i)=>{const r=new URL(n.name),o=r.pathname.length>1?r.pathname:r.hostname;t.push({async:!0,timelineName:e.name,coreName:o,idSuffix:`-${i}`,from:n.startTime,to:n.startTime+n.duration})})),r=i}))}(e,n,r),function(e,t,n,i){n.forEach((n=>{const{async:r,timelineName:o}=n;r&&S(o,i),w(e,n.from,n.to)&&t.push(n)}))}(e,n,(0,i.iG)(),r),y(e,n,t,r,/^WW\./,"WW");const a={...window._appTimings||{}};y(e,n,a,r,/.*/);const s=[];s.push(m(e,"Global","NavStart",o,0,"g")),Object.keys(t).filter((n=>n.match(/TT/)&&w(e,t[n]))).sort(((e,n)=>t[e]-t[n])).forEach((n=>s.push(m(e,"Global",n,o,t[n],"g")))),Object.keys(t).filter((n=>n.match(/^WW\./i)&&w(e,t[n]))).sort(((e,n)=>t[e]-t[n])).forEach((n=>s.push(m(e,"WW",n,r.WW.pid,t[n],"p")))),s.push(g("process_name",o,{name:"Main"})),s.push(g("process_sort_index",o,{sort_index:o}));const{uploadTrace:c}=e;return v(e,n,!0).forEach(((t,n)=>{const{pid:i}=r[t.name];t.measures.forEach(((t,r)=>{const{timelineName:o,coreName:a,idSuffix:d,from:l,to:u,customData:p}=t,h=("000"+r).substr(-3,3),g=a+d,m=c?function(e){const t=e.lastIndexOf("/");return t>=0?e.substr(t+1):e}(g):g,v=`${h}-${m}`;s.push(...function(e,t,n,i,r,o,a,s,c,d){return[f(e,t,n,d?"B":"b",i,r,a,{id:o}),f(e,t,n,d?"E":"e",i,r,s,{id:o,args:JSON.stringify(c)})]}(e,o,v,i,n,r,l,u,p))})),s.push(g("process_name",i,{name:t.name})),s.push(g("process_sort_index",i,{sort_index:i})),s.push(g("thread_name",i,{name:t.name},n)),s.push(g("thread_sort_index",i,{sort_index:n},n))})),v(e,n,!1).forEach(((t,n)=>{t.measures.forEach((t=>{const{timelineName:i,coreName:r,idSuffix:o,from:a,to:c,customData:d}=t,l=r+o;s.push(function(e,t,n,i,r,o,a,s){const c=C(a-o);return f(e,t,n,"X",i,r,o,{dur:c,args:JSON.stringify(s)})}(e,i,l,100,n,a,c,d))})),s.push(g("thread_name",100,{name:t.name},n)),s.push(g("thread_sort_index",100,{sort_index:n},n))})),s}function g(e,t,n,i){const r={name:e,ph:"M",pid:t,args:n};return null!=i&&(r.tid=i),r}function m(e,t,n,i,r,o){return f(e,t,n,"i",i,null,r,{s:o})}function f(e,t,n,i,r,o=null,a,s){const c={cat:t,name:n,ph:i,pid:r,tid:o,ts:C(a),...s};return null!=o&&(c.tid=o),c}function v(e,t,n){const i=(0,p.Z)(t.filter((t=>!!t.async===n&&w(e,t.from,t.to))),(e=>e.timelineName)),r=[];let o=0;return Object.keys(i).forEach((e=>{const t=i[e].sort(((e,t)=>e.from-t.from));o=Math.max(o,t[t.length-1].to),r.push({name:e,measures:t})})),r.sort(((e,t)=>e.measures[0].from-t.measures[0].from))}function y(e,t,n,i,r,o){const a=/-?[Ss]tart$/,s={"-Start":"-End","-start":"-end",Start:"End",start:"end"},c=[];Object.keys(n).filter((e=>e.match(r))).forEach((r=>{const d=r.match(a);if(!d)return;let l=r.replace(a,"");const u=`${l}${s[d[0]]}`,p=d&&n[u];if(!p)return;c.push(r),c.push(u);let h=o;if(!h){const e=l.match(/(.+)\.(.+)/);if(!e)return;h=e[1],l=e[2]}const g=n[r];w(e,g,p)&&t.push({async:!!i[h],timelineName:h,coreName:l,idSuffix:"",from:g,to:p})}));for(const e of c)delete n[e]}function S(e,t){if(!t[e])return t[e]={pid:t.nextPID.pid++},!0}function C(e){return Math.round(1e3*e)}function w(e,t,n){return!e.uploadTrace||!e.maxTime||(!t||t<=e.maxTime)&&(!n||n<=e.maxTime)}var b=n(31558),T=n(74102),k=n(76733),P=n(56687);const A=new(n(45870).o);let I;const E=async e=>{let t;const n=performance.now();try{const n=await A.getResultAsync();t=await n.getValidationResults(e)}catch(e){t={results:[{status:"aborted",error:(0,P.n)(e),timeTaken:0}],timeTaken:0}}const i=(e?0:I)+M(n);return{...t,timeTaken:i}};function M(e){return Math.round(10*(performance.now()-e))/10}function x(e,t,u,p,g){(0,i.g7)(e,t),(0,r.n1)(),function(e,t,n,i,r){(0,a.TG)(e,n,t,i,r),(0,s.ny)((0,c.oA)("fetch","fetch",!0)),(0,o.DY)((0,c.oA)("custom-em","custom-em",!0))}(g,p,u,(()=>(0,i.FH)(!0)),(()=>(0,i.FH)(!1))),(0,i.dj)().traceLevel>=d.Y.high&&(L("RAF",requestAnimationFrame),L("RAFTimer",l.c)),async function(){if(!(0,T.uH)())return;let e,t;const i=performance.now();try{const{telemetryValidationPackage:i}=await n.e("telemetry-validation").then(n.bind(n,7221)),r={telemetryPayloadListener:T.fi},o=await i.initialize(r);({error:e,manager:t}=o)}catch(t){e=t}finally{I=M(i)}if(t)A.set(t);else{var r;const t=(null===(r=e)||void 0===r?void 0:r.message)||"No error was provided.";A.setError(e=new Error(`TelemetryValidationManager initialization error: ${t}`))}e&&k.k.logError(e.message)}(),(0,b.N)()&&(window._getAppPerfTrace=h)}function L(e,t){const n=(0,c.oA)(e,e);n&&function e(){const{endMeasure:i}=n.startMeasure("frame");t((()=>{i(),e()}))}()}(0,b.N)()&&(window._getValidationResults=E)},47741:function(e,t,n){"use strict";n.d(t,{sG:function(){return W},ql:function(){return H},If:function(){return U}});var i=n(21930),r=n(10754),o=n(7476),a=n(88826),s=n(20009),c=n(90215);const d=e=>{let t=-1;const n=e[s.w],i=e[s.P9];n&&i&&(t=n-i),e[s.Fz]=t,(0,c.QP)({name:s.Fz,startTime:i,endTime:n})},l=e=>{let t=-1;const n=e[s.w],i=e[s.Wk];i&&n&&(t=i-n),e[s.iL]=t,(0,c.QP)({name:s.iL,startTime:n,endTime:i})};var u=n(43047);function p(e){window.windowsPerfMarker&&window.windowsPerfMarker(e)}var h=n(59450),g=n(58616),m=n(43356),f=n(41074),v=n(61153),y=n(77036),S=n(71778),C=n(21789),w=n(75776),b=n(47640),T=n(85205),k=n(96531),P=n(1573),A=n(13334);const I={didPreload:!1,timeTakenForRevealInMs:0,pageRevealed:!0};function E(){const e=k._.getInstance().rootReducer.connector(T.z.Preload);if(!e||!A.Al.IsPreload)return Promise.resolve(I);const t=e.getCurrentState();if(t&&t.pageRevealedData){const e=t.pageRevealedData;return Promise.resolve(e)}return new Promise((e=>{P.X.pageVisibilityChange.registerObserver((t=>{const n=t.params[0];e(n)}))}))}var M=n(82486),x=n(23549);const L={prefix:"SW",startTime:"StartTime",navigationFetchTime:"NavigationFetchTime",navigationCacheReadTime:"NavigationCacheReadTime",navFeedHandlerComplete:"NavFeedHandlerComplete",navFeedHandlerWillRespond:"NavFeedHandlerWillRespond",navFeedHandlerDidRespond:"NavFeedHandlerDidRespond",navFeedHandlerStart:"NavFeedHandlerStart",navFeedCacheDuration:"NavFeedCacheDuration",navParseDuration:"NavParseDuration",navFeedCachedStatus:"NavFeedCachedStatus",navFeedCacheReadTime:"NavFeedCacheReadTime",navFeedFetchTime:"NavFeedFetchTime",navFeedCacheOpenDuration:"NavFeedCacheOpenDuration"};function R(e){return[L.prefix,e].filter((e=>e.length>0)).join(".")}var D=n(74450);function F(e){const t=(0,r.Th)();O(t)&&(e[R(L.startTime)]=function(e){return e.requestStart-e.workerStart}(t),e[R(L.navigationFetchTime)]=function(e){const t=e.transferSize;if(0===t||300===t)return-1;return e.responseStart-e.requestStart}(t),e[R(L.navigationCacheReadTime)]=function(e){const t=e.transferSize;return 0===t||300===t?e.responseStart-e.requestStart:-1}(t),async function(e){if(!O())return;const t=await async function(){return(0,D.T)({type:"NAV_PERF_DATA"})}();e[s.kc]=t&&"hit"===t.cachedStatus?1:0,t&&t.cacheReadTime&&(e[R(L.navigationCacheReadTime)]=Math.round(t.cacheReadTime));t&&t.fetchTime&&(e[R(L.navigationFetchTime)]=Math.round(t.fetchTime))}(e))}function O(e){return!!(e=e||(0,r.Th)())&&Boolean(e.workerStart)}var B=n(31558),N=n(98850),_=n(45675);function U(e,t,n){if(!(0,B.N)())return;const s=(0,m.S0)();s&&t===i.oN.Primary&&f.g.updateAboveTheFoldVisuallyReady.getActionSender(s).send(performance.now());const c=t===i.oN.Primary,d=(0,i.bO)(t),l=(0,r.Ou)();if(l.IncompleteMarkers=null==d?void 0:d.join(","),(0,v.L)())return void e([]);let u=[];const p=c?o.LwW:o.Nxj;u=c?(0,i.bP)():(0,i.gh)();const h=(0,i.Gb)(),y=h.marker||"None",S=h.value||"None";let C=", Visual dependency callback was unavailable.";if(n){const e=n();C=e.length?`, Incomplete visual dependencies: ${JSON.stringify(e)}.`:", No pending visual dependencies."}if((0,a.H)(p,"Missing perf markers",`Missing perf markers: ${JSON.stringify(d)}${C} Last Marked: ${y} ${S}`),window.isSSRCompleted&&d.includes("TTF")){const e=[...(0,g.SM)().entries()].map((([e,t])=>`${e}:${t}`)).join(",");(0,a.H)(o.V2e,"Missing TTF marker in SSR page",`Elements that are still in top-down hydration process: ${e}`)}const w=(0,i.OZ)();w&&c&&d.includes(`TTVR.${w}`)&&((0,a.H)(o.MmB,"Expected feed timed out while loading",`Expected feed timed out while loading: ${w}`),l&&console.log(JSON.stringify(l))),window.renderCacheEnabled&&c&&(0,N.cB)(),e(u)}async function W(e,t={}){const n=(0,r.Ou)(),{onAfterPageTimingsUpdated:o,disableLoadTimeEvent:a,reportEntityMetrics:c}=t,g=(0,r.Th)();if(g){const{domComplete:e,loadEventStart:t,responseStart:i,domainLookupEnd:r,domainLookupStart:o,domInteractive:a,domContentLoadedEventStart:c,domContentLoadedEventEnd:p,fetchStart:h,connectEnd:m,connectStart:f,workerStart:v,responseEnd:y,requestStart:S,unloadEventStart:w,unloadEventEnd:b,type:T,systemEntropy:k,secureConnectionStart:P}=g;n.timeToFirstByte=i,n.timeToDomComplete=e,n.timeToOnLoad=t,n.domainLookupTime=r-o,n.timeToFetchStart=h,n.timeToWorkerStart=v,n.connectStart=f,n.connectTime=m-f,n.requestStart=S,n.requestTime=i-S,n.responseStart=i,n.responseTime=y-i,n.requestResponseTime=y-S,n.fetchTime=y-h,n.swInitTime=h-v,n.swFetchTime=o-h,n.timeToUnload=b-w,n.timeToInteractive=a,n.domContentLoadedEventStart=c,n.domContentLoadedEventEnd=p,n.navigationType=T,n.systemEntropy=k,n.timeToSecureConnection=P-f,function(e){e.buildVer=C.jG.BuildVersion||-1}(n),function(e){if(performance.getEntriesByType){const t=performance.getEntriesByType("paint").filter((e=>"first-contentful-paint"===e.name));t.length>0&&(e[s.zJ]=Math.round(t[0].startTime))}}(n),(0,u.Oq)(n),(0,u.bg)(n),(0,u.H7)(n),(0,u.zV)(n),(0,u.Am)(n),d(n),(0,u.bM)(n),l(n)}(0,u.dw)(n),(0,u.iA)(n);for(const t of e){const e=t[0];n[e]||(n[e]=t[1])}const m=(0,i.sx)();m&&(n.ReasonForTTVR=m);const f=n[w.dd];f&&(p(w.jh),p(w.H$),(0,b.Eu)(f),function(e){if(performance&&performance.getEntriesByType&&e&&e[s.MV]){const t=performance.getEntriesByType("navigation");if(t.length){const n=t[0];let i=0,r=0;s.pJ in n&&s.fR in n&&(i=n[s.pJ],r=n[s.fR]),i<0&&r<0&&(e["TTVR."+s.IP]=Math.round(e[s.MV]-i),e["TTVR."+s.Hm]=Math.round(e[s.MV]-r))}}}(n)),y.U.getConfigTimings(n),F(n),n.wasBrowserHiddenAtLeastOnce=(0,v.L)(),(0,h.j)(),o&&o(),(0,M.wY)(),Promise.all([E(),(0,M.lr)()]).then((()=>{(0,b.fv)(n),a||(0,_.J)(window,{reportEntityMetrics:c})})),y.U.refreshConfigCache().then((()=>{!function(){const e=y.U.getResolverErrors();e&&e.length>0&&e.forEach((e=>{x.M0.sendAppErrorEvent(e)}))}()})),(0,S.mS)({id:"PostTtvr",type:"command"})}async function H(e,t,n){const i=(0,r.Ou)(),o=(0,r.Y9)();if((e=e.filter((e=>!(e[0]in i)))).forEach((e=>{const t=e[0];t in i||(o[t]=e[1],i[t]=e[1])})),S.yb){const e=await(0,S.ot)({id:"perfmarkers"},4e3);if(e&&e.fetched){const t=e.payload;t&&t["WW.MyFeed"]&&(t.FeedRequest=t["WW.MyFeed"]),Object.assign(o,e.payload),Object.assign(i,e.payload)}}o.TimeToSendSecondaryPerfMarkers=Math.round(performance.now()),t&&t(),n||Promise.all([E(),(0,M.lr)()]).then((()=>{(0,_.J)(window,{isSecondaryBeacon:!0})}))}},56401:function(e,t,n){"use strict";n.d(t,{c:function(){return l},f:function(){return u}});var i=n(47741),r=n(47969),o=n(21930),a=n(23549),s=n(70280),c=n(45870),d=n(31558);function l(e,t){let n,i=t,o=(0,r.F)(performance.now());const a=()=>{const t=(0,r.F)(performance.now());i-=t-o,i<=0?e():(o=t,requestAnimationFrame((()=>{n=window.setTimeout(a,i)})))};return requestAnimationFrame((()=>{n=window.setTimeout(a,i)})),()=>{clearTimeout(n)}}async function u(e){if(!(0,d.N)())return;const t=new c.o;e=e||{};let n=!1;async function r(n){var r;null===(r=l)||void 0===r||r(),a.M0.config.autoCaptureContentView=!0,a.M0.observeElementTree(document);const o=!!e.pageLoadEventsAvailableCallback&&!e.pageLoadEventsAvailableCallback();o||a.M0.scheduleContentViewEvent(s.NS.Load);const{contentViewTimeoutOverride:c,onBeforeNotifyCallback:d,reportEntityMetrics:u}=e;c&&a.M0.setContentViewTimeout(c),(0,i.sG)(n,{onAfterPageTimingsUpdated:d&&(()=>{d(n)}),disableLoadTimeEvent:o,reportEntityMetrics:u}),t.set()}let l;const u=window.setTimeout((()=>{n=!0,(0,i.If)((e=>r(e)),o.oN.Primary,e.incompleteVisualDependencyCallback)}),e.timeoutOverride||2e4);return l=()=>window.clearTimeout(u),(0,o.Nv)().then((e=>{n||r(e)})),await t.getResultAsync()}},45675:function(e,t,n){"use strict";n.d(t,{J:function(){return u},O:function(){return c}});var i=n(23549),r=n(10754),o=n(31718),a=n(7476),s=n(96620);const c={};let d=!1;function l(){c.primaryLoadTimeEventSent=!1,c.secondaryLoadTimeEventSent=!1,d=!1}function u(e,t={}){const{isSecondaryBeacon:n,reportEntityMetrics:s}=t,l=Object.assign({},n?(0,r.Y9)():(0,r.Ou)());d||!s&&!n||((0,o.Xn)(l),d=!0),Object.keys(l).length&&(n?c.primaryLoadTimeEventSent||(l.isPrimaryLoadTimeEventSent=!1):l.TimeToSendPrimaryPageTimings=Math.round(performance.now()),function t(){try{if(i.M0&&i.M0.getPageMetadata()){const e=(0,r.A1)()||{};if(n){if(c.secondaryLoadTimeEventSent)return;c.secondaryLoadTimeEventSent=!0}else{if(c.primaryLoadTimeEventSent)return;c.primaryLoadTimeEventSent=!0}i.M0.sendLoadTimeEvent({markers:l,deviceCapabilities:e});const t=(0,r.Ou)();t&&n&&(t.telemetryBeaconFireTime=Math.round(performance.now()))}else e.setTimeout(t,500)}catch(e){i.M0&&i.M0.sendAppErrorEvent({...a.IU$,message:"Unable to send load time event"})}}())}l(),(0,s.U)(l)},38936:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var i,r=n(17556);class o{}(i=o).voiceSearchLoaded=new r.C("VoiceSearchLoaded"),i.imageSearchLoaded=new r.C("ImageSearchLoaded")},30523:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var i=n(76166),r=n(38936);class o extends i.e{voiceSearchLoaded(){r.f.voiceSearchLoaded.getActionSender(this).send()}imageSearchLoaded(){r.f.imageSearchLoaded.getActionSender(this).send()}}},79453:function(e,t,n){"use strict";n.d(t,{d:function(){return o}});var i=n(99551),r=n(38936);class o{reduce(e,t){if(!e)return{voiceSearchIsLoaded:!1,imageSearchIsLoaded:!1};if(!t)return e;let n;return i.G.handleAction(t,r.f.voiceSearchLoaded,(()=>{n={...e,voiceSearchIsLoaded:!0}})),i.G.handleAction(t,r.f.imageSearchLoaded,(()=>{n={...e,imageSearchIsLoaded:!0}})),n||e}}},40701:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var i=n(96531);const r=()=>{const e=i._.getInstance().rootReducer.connectors().find((e=>e.namespace.indexOf("ExperienceTracker")>=0));if(!e)return null;const t=e.getCurrentState().visuallyReadyDependencies;return t&&0!==t.size?[...t.keys()]:null}},59619:function(e,t,n){"use strict";n.r(t),n.d(t,{ExperienceTrackerEdgeNextDataConnector:function(){return B},ExperienceTrackerEdgeNextDataReducer:function(){return _},ToolingInfo:function(){return U}});var i,r=n(85205),o=n(79545),a=n(46986),s=n(98669),c=n(43356),d=n(41074),l=n(21930),u=n(9119);!function(e){e.VISUALLY_READY_WILL_FIRE="visuallyReadyWillFire",e.VISUALLY_READY_DID_FIRE="visuallyReadyDidFire",e.PAGE_REVEAL_START_WILL_FIRE="pageRevealStartWillFire",e.PAGE_REVEAL_START_DID_FIRE="pageRevealStartDidFire",e.PAGE_REVEAL_COMPLETE_WILL_FIRE="pageRevealCompleteWillFire",e.PAGE_REVEAL_COMPLETE_DID_FIRE="pageRevealCompleteDidFire"}(i||(i={}));var p,h=n(76166),g=n(17556);class m{}(p=m).addVisuallyReadyDependencies=new g.C("AddVisuallyReadyDependencies"),p.markVisuallyReadyComplete=new g.C("MarkVisuallyReadyComplete");class f extends h.e{constructor(){super(...arguments),this.ttvrMarkers=[],this.getIncompleteVisualDependencies=()=>{const{visuallyReadyDependencies:e}=this.getCurrentState(),t=[];return e.forEach((e=>{e.visuallyReady||t.push(e.experienceType)})),t}}addVisuallyReadyDependencies(e){m.addVisuallyReadyDependencies.getActionSender(this).send(e),e.forEach((e=>{this.ttvrMarkers.push(e),(0,u.w)(e,!0)}))}registerVisuallyReadyObserver(){d.g.updateVisuallyReadyTiming.registerObserver((e=>{const t=e.params[0];if(!t)return;const{experienceType:n,endTime:i}=t;if(null!=i){this.getCurrentState().visuallyReadyDependencies.has(n)&&this.markVisuallyReadyComplete(n)}}))}registerMarkersIfNecessary(e,t,n=!1){if(!(this.ttvrMarkers&&0!==this.ttvrMarkers.length||e&&0!==e.length||t&&0!==t.length))return;const i={};i.TTVR=t?[...this.ttvrMarkers,...t]:this.ttvrMarkers,e&&(i.TTF=e),n&&(i.TTPR=[...this.ttvrMarkers],i.TTPR.push("OverlayRemoval")),(0,l.IO)(i)}registerSecondaryPerfMarkers(e){(0,l.Xl)(e)}registerFeedPerfMarker(e){(0,l.tW)(e)}async markVisuallyReadyComplete(e){const{visuallyReadyDependencies:t}=this.getCurrentState();if(t.get(e).visuallyReady)return;m.markVisuallyReadyComplete.getActionSender(this).send(e);for(const e of t.values())if(!e.visuallyReady)return;const n=(0,c.S0)();n&&(await(0,c.FQ)(i.VISUALLY_READY_WILL_FIRE),performance.measure("VisuallyReady"),d.g.updateAboveTheFoldVisuallyReady.getActionSender(n).send(performance.now()),await(0,c.FQ)(i.VISUALLY_READY_DID_FIRE))}}var v=n(40701),y=n(67213),S=n(72322),C=n(48204),w=n(13334),b=n(21789),T=n(19233),k=n(47467),P=n(85663),A=n(82486),I=n(67044),E=n(14269),M=n(31558),x=n(23549);const L={eventType:s.Gg.aboveTheFoldVisuallyReady},R={eventType:s.Gg.pageVisuallyReady},D={eventType:s.Gg.belowTheFoldTransitionStart},F="prg-gamingfeed",O=[S.IY.ENUS,S.IY.ENGB,S.IY.ENAU,S.IY.ENCA,S.IY.ENIN];class B extends f{constructor(e,t,n,i,r,o,a){super(e,t,n,i,r,o,a),this.initializePromise=this.initialize()}waitForInitialize(){return this.initializePromise}async initialize(){var e,t;const n=await(0,I.oU)(r.z.ChromiumPageSettings),i=await n.getLayoutStateAsync();this.milestoneDataConnector=(0,c.S0)();const l=[],u=[],p=["TTF"];let{renderCacheConfig:h,feedContentSourceMap:g,enableGridViewFeed:m}=this.config||{};h=h||{};const f=(0,C.$z)(),S=!m&&(0,y.$5)(f);m||(x.M0.addOrUpdateTmplProperty("tracker_selectedPivot",JSON.stringify(f)),x.M0.addOrUpdateTmplProperty("tracker_shouldUseWaterfallFeed",JSON.stringify(S)));const B=S?o.x.waterfallViewFeed:o.x.gridViewFeed,N=!(0,P.isNullOrUndefined)(i.customBackgroundImageInfo)&&i.customBackgroundImageInfo.hasImage,_=i.imageOfTheDayEnabled&&"custom"!==i.currentBackgroundImageType||"custom"===i.currentBackgroundImageType&&N,U={eventType:s.Gg.visuallyReady,experienceType:o.x.commonSearchBoxEdgeNext};u.push(o.x.edgeChromiumPageWC),u.push(o.x.commonSearchBoxEdgeNext),i.quickLinksEnabled&&"off"!==i.selectedQuickLinksDisplaySetting&&u.push(o.x.topSitesEdgeNextWC),_&&u.push(o.x.backgroundImageWC),l.push((0,c.Qz)(U,o.x.topSitesEdgeNextWC)),l.push((0,c.Qz)(U,o.x.backgroundImageWC)),this.config.measureWatchTTVR&&u.push(o.x.watch);const W=(null===w.Al||void 0===w.Al||null===(e=w.Al.ClientSettings)||void 0===e?void 0:e.audienceMode)===a.F.Enterprise,H=(null===w.Al||void 0===w.Al||null===(t=w.Al.ClientSettings)||void 0===t?void 0:t.audienceMode)===a.F.Kids,$=("always"===i.selectedFeedDisplaySetting||"peek"===i.selectedFeedDisplaySetting&&!W)&&!H,q=g&&1===(0,k.f)(g),G=b.jG&&b.jG.CurrentRequestTargetScope&&b.jG.CurrentRequestTargetScope.os===E.Q.Xbox,V=2===(0,k.f)({gaming:2}),z=3===(0,k.f)({play:3});if($&&!H){const e=await b.jG.unsupportedEnterpriseCloud;if(q&&!e)u.push(o.x.productivityHub),u.push(o.x.frequentSitesCardWC),u.push(o.x.calendarCard),u.push(o.x.todoCardWC),(this.isFlightActive("prg-m365news-t")||this.isFlightActive("prg-3snews-t"))&&u.push(o.x.microsoftFeedCard),u.push("FlagshipFeed.render"),l.push((0,c.Qz)(U,o.x.productivityHub));else if(G&&V)this.isFlightActive(F)||O.includes(b.jG.CurrentMarket)?u.push(o.x.gridViewFeed):u.push(o.x.xboxFeedWC);else if(z);else{var j;const e=B;u.push(e),this.registerFeedPerfMarker(e),p.push("InfopaneFullyRendered");const t=(0,M.N)()&&(null===(j=window.ssrAdData)||void 0===j?void 0:j.length);this.config.disableAdsPerfMarkers||t||(p.push(T.qG.TimeToRequestAd),p.push(T.qG.TimeToServeAd),p.push(T.qG.ApiDuration),p.push(T.qG.RenderReady),p.push(T.qG.TimeToRenderAd))}}const K={eventType:s.Gg.visuallyReady,experienceType:B},Q={eventType:s.Gg.visuallyReady,experienceType:o.x.xboxFeedWC},J={eventType:s.Gg.visuallyReady,experienceType:o.x.casualGamesLandingV2};let Y,Z,X;switch(Y=G&&V&&!this.isFlightActive(F)?Q:z?J:K,i.selectedFeedDisplaySetting){case"headingsonly":case"onscroll":case"off":l.push((0,c.Qz)(L,o.x.breakingNewsWC)),l.push((0,c.Qz)(L,o.x.superBreakingNews)),l.push((0,c.Qz)(D,o.x.cardActionWC));break;default:l.push((0,c.Qz)(L,o.x.breakingNewsWC)),l.push((0,c.Qz)(L,o.x.superBreakingNews)),l.push((0,c.Qz)(Y,o.x.cardActionWC))}if($?(Z=U,X=q?L:Y):(Z=L,X=L),this.config.delayLoadPoweredByLegend){const e=$?L:D;l.push((0,c.Qz)(e,o.x.poweredByLegendWC))}const ee=[o.x.articleFre,o.x.autosCarousel,o.x.autosGarageCard,o.x.autosMarketplaceCard,o.x.casualGamesCard,o.x.channelFilterCard,o.x.companyNewsCard,o.x.contentGroupCard,o.x.dailyTriviaCard,o.x.digestCard,o.x.donationNpoCard,o.x.entertainmentPremierCard,o.x.esportsCard,o.x.esportsStreamsCard,o.x.followingFreFullWidth,o.x.gamingCompeteCard,o.x.gamingDiscoverStrip,o.x.gamingGamerModeUpsellCard,o.x.gamingMatchCard,o.x.gamingMediaCarousel,o.x.gamingPersonalizationCard,o.x.gamingRecentlyPlayedCard,o.x.gamingRecommendedCard,o.x.gamingRedditCard,o.x.gamingRewardsCard,o.x.gamingStreamCard,o.x.gamingTournamentCard,o.x.gamingUpcomingCard,o.x.gamingVideoCard,o.x.generalElections,o.x.horoscopeAnswerCardWC,o.x.hotListCard,o.x.learningNasaCard,o.x.learningTriviaCard,o.x.mangaCard,o.x.moneyInfoCardWC,o.x.newsGroupsCard,o.x.onThisDayCardWC,o.x.prayerTimesCard,o.x.prismCarouselCard,o.x.prismSdCard,o.x.qna,o.x.realEstateCard,o.x.recommendedSearchesCard,o.x.rewardsDailySetCard,o.x.sharedHeroNewsCard,o.x.shoppingBWMCard,o.x.shoppingBWMCarousel,o.x.shoppingCardWC,o.x.shoppingEdgeInsightsCard,o.x.shoppingEventsDealCard,o.x.shoppingRiverCard,o.x.shoppingSdCard,o.x.shoppingVerticalListsCard,o.x.sportsCardWC,o.x.sportsOlympicCardWC,o.x.sportsWorldCupCardWC,o.x.spotlightCardWC,o.x.travelDestination,o.x.travelSdThemesCard,o.x.trendingNowWC,o.x.trendingSearchCard,o.x.videoShoppingCard,o.x.videoShoppingCarouselCard,o.x.watchVideosVerticalCarousel,o.x.weatherCardWC];for(const e of ee)l.push((0,c.Qz)(Z,e));const te=this.config.delayNonVisibleComponents?[o.x.articleRelatedStories,o.x.articleTopComment,o.x.conditionalBannerWC,o.x.devTools,o.x.locationMarker,o.x.signInControlWC,o.x.msRewardsWC,o.x.nextdoorCard,o.x.nurturingBanner,o.x.nurturingCoachMark,o.x.officeCoachmark,o.x.officeLeftRail,o.x.personalizeNavButton,o.x.socialBarWC,o.x.socialLeadGenInArticle,o.x.superCoachMarkWC,o.x.waffleWC,o.x.welcomeGreetingLight,o.x.commonSettingsEdgeNext,o.x.marketLanguageToggleWC,o.x.weatherOneLiner]:[o.x.articleRelatedStories,o.x.articleTopComment,o.x.backgroundGallery,o.x.channelStore,o.x.conditionalBannerWC,o.x.devTools,o.x.feedbackLinkWC,o.x.interestFreCard,o.x.locationMarker,o.x.signInControlWC,o.x.signInFlyoutWC,o.x.msRewardsWC,o.x.mobileAppUpsell,o.x.nextdoorCard,o.x.nurturingBanner,o.x.nurturingCoachMark,o.x.officeCoachmark,o.x.officeLeftRail,o.x.personalizeNavButton,o.x.pillWC,o.x.signalOverlay,o.x.socialAvatar,o.x.socialBarWC,o.x.socialLeadGenInArticle,o.x.superCoachMarkWC,o.x.superNavCoachMark,o.x.waffleWC,o.x.welcomeGreetingLight,o.x.commonSettingsEdgeNext,o.x.marketLanguageToggleWC,o.x.feedLevelFeedbackWC,o.x.codexBingChat,o.x.contextualFeedbackWC,o.x.weatherOneLiner];this.config.disableDelayLoadNotification||te.push(o.x.notificationBellWC);for(const e of te)l.push((0,c.Qz)(X,e));if(l.push((0,c.Qz)(L,o.x.toastWC)),l.push((0,c.Qz)(L,o.x.voiceSearchWC)),l.push((0,c.Qz)(L,o.x.imageSearchWC)),l.push((0,c.Qz)(L,o.x.searchHistoryEdgeNextWC)),l.push((0,c.Qz)(L,o.x.newsHeadlineBelowSearchbox)),l.push((0,c.Qz)(L,o.x.recommendedSearchCarouselWC)),l.push((0,c.Qz)(L,o.x.coldStart)),l.push((0,c.Qz)(R,o.x.edgeShopping)),l.push((0,c.Qz)(R,o.x.publisherSubscribeFollowButton)),this.config.delayNonVisibleComponents){const e=[o.x.backgroundGallery,o.x.channelStore,o.x.feedbackLinkWC,o.x.interestFreCard,o.x.signInFlyoutWC,o.x.mobileAppUpsell,o.x.pillWC,o.x.signalOverlay,o.x.socialAvatar,o.x.superNavCoachMark,o.x.feedLevelFeedbackWC,o.x.codexBingChat,o.x.contextualFeedbackWC];for(const t of e)l.push((0,c.Qz)(R,t))}this.addVisuallyReadyDependencies(u),(0,M.N)()&&window._pageTimings&&(window._pageTimings.visualDependenciesConfigs=u);const ne=b.jG&&b.jG.CurrentRequestTargetScope&&"dhp"==b.jG.CurrentRequestTargetScope.pageType?this.config.entireRiverStaleMinutes:this.config.dhpEntireRiverStaleMinutes;let ie=(0,v.b)();if((0,M.N)()&&window._pageTimings&&(window._pageTimings.visualDependenciesConnector=ie,S&&(ie=u)),(0,A.Qc)(ie,this.config.prerenderForceRefresh,ne,this.config.sdCardStaleMinutes,this.config.delayReveal),this.registerSecondaryPerfMarkers(p),(0,M.N)()){var re;const e=null!==(re=window)&&void 0!==re&&re.isSSREnabled?l.filter((e=>e.deferralInfo!==L&&e.deferralInfo!==U&&e.deferralInfo!==Y)):l;d.g.updateExperienceLoadDeferralState.getActionSender(this.milestoneDataConnector).send(e)}this.registerVisuallyReadyObserver(),this.registerMarkersIfNecessary(["SearchBox"],["SearchBox"],w.Al.IsPrerender)}isFlightActive(e){var t;return!(null===w.Al||void 0===w.Al||null===(t=w.Al.CurrentFlightSet)||void 0===t||!t.has(e))}}var N=n(99551);class _{reduce(e,t){if(!e)return{visuallyReadyDependencies:new Map};if(!t)return e;let n=!1;const i={...e};return n=n||N.G.handleAction(t,m.addVisuallyReadyDependencies,(e=>{e&&e.forEach((e=>{e&&!i.visuallyReadyDependencies.has(e)&&i.visuallyReadyDependencies.set(e,{experienceType:e,visuallyReady:!1})}))})),n=n||N.G.handleAction(t,m.markVisuallyReadyComplete,((e,t)=>{if(e){const t=i.visuallyReadyDependencies.get(e);t&&(t.visuallyReady=!0,"GridViewFeed"!==e&&"WaterfallViewFeed"!==e||(0,A.Bj)())}})),n?i:e}}const U={experienceConfigSchema:{}}},40378:function(e,t,n){"use strict";n.d(t,{S:function(){return o},Y:function(){return r}});var i=n(21789);function r(){var e,t;if(null===(e=window)||void 0===e||!e.matchMedia)return;const n=null===(t=(0,i.Yq)().WidgetAttributes)||void 0===t||null===(t=t.propertyBag)||void 0===t?void 0:t.theme;if(n)return"dark"===n;const r=window.matchMedia("(prefers-color-scheme: dark)");return r?!!r.matches:void 0}function o(e){return!(null==e||!e.useMobile||null==e||!e.isDarkModeForMobile)}},69416:function(e,t,n){"use strict";n.d(t,{P5:function(){return d},Ve:function(){return c},Yw:function(){return s},dw:function(){return a},m0:function(){return o}});var i=n(33442),r=n(92531);const o="#000000",a="#FFFFFF",s=(0,i.l$)((()=>o))(r.ZP),c=(0,i.s5)((()=>o))(r.ZP),d=(0,i.$B)((()=>a))(r.ZP)},50632:function(e,t,n){"use strict";n.d(t,{GQ:function(){return p},K$:function(){return i},eH:function(){return w},hg:function(){return m},q7:function(){return g},rA:function(){return c},vW:function(){return C}});var i,r=n(97030),o=n(55524),a=n(25257),s=n(42166);!function(e){e.c1="c1",e.c2="c2",e.c3="c3",e.c4="c4",e.c5="c5"}(i||(i={}));const c={c1:1,c2:2,c3:3,c4:4,c5:5},d="__minViewportWidthOverrides__",l="__columnArrangementDefinitions__",u="__columnArrangementMap__",p=()=>(o.Gq.get(l)||v(),o.Gq.get(l)),h=()=>(o.Gq.get(u)||v(),o.Gq.get(u));function g(e){o.Gq.set(d,e)}function m(){const e=p(),t=h();if(a.p.fiveColSupported()&&4===e.length){const n=new f(i.c5,r.sc);e.push(n),t[i.c5]=n}}class f{constructor(e,t,n){this.arrangement=e,this.contentSizePx=t,this.isFirstBreakpoint=n}get minViewportWidthPx(){if(this.isFirstBreakpoint)return 0;const e=o.Gq.get(d);if(e){const t=e.get(this.arrangement);if(t)return t}return this.contentSizePx+y}}function v(){const e=[];e.push(new f(i.c1,r.xs,!0)),e.push(new f(i.c2,r._3)),e.push(new f(i.c3,r.Xn)),e.push(new f(i.c4,r.xX)),a.p.fiveColSupported()&&e.push(new f(i.c5,r.sc));const t={};for(const n of e)t[n.arrangement]=n;o.Gq.set(l,e),o.Gq.set(u,t)}const y=32;!function(){const e=[0],t=p();for(let i=1;i<t.length;i++){var n;e.push(null===(n=t[i])||void 0===n?void 0:n.minViewportWidthPx)}}();function S(e,t){const n=[],i=p(),r=h();if(e){const t=r[e],i=null==t?void 0:t.minViewportWidthPx;i>0&&n.push(`(min-width: ${(0,s.a)(i)})`)}if(t){const e=r[t],a=i.indexOf(e);var o;if(a<i.length-1)n.push(`(max-width: ${(0,s.a)((null===(o=i[a+1])||void 0===o?void 0:o.minViewportWidthPx)-1)})`)}return n.join(" and ")}function C(e,t){const n=S(e,t);return n?"@media "+n:""}function w(e){return C(e,e)}},91992:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});const i=1<<24,r=/\s+/g;const o=new class{rgbNumberToCssHexColor(e){let t=null;return"number"==typeof e&&e>=0&&e<i&&(t=this.rgbNumberToCssHexColorCore(e)),t}parseColor(e){if(e)return this.parseHexColor(e)||this.parseRgbaColor(e)}parsedColorToNumber(e,t){return e&&e.r<<16|e.g<<8|e.b||t}grayScale(e){const t=e.r,n=e.g,i=e.b;return this.isValidColorValue(t)&&this.isValidColorValue(n)&&this.isValidColorValue(i)?Math.min(255,Math.round(.299*t+.587*n+.114*i)):255}isValidColorValue(e){return!isNaN(e)&&null!=e&&e>=0&&e<=255}rgbNumberToCssHexColorCore(e){return"#"+(i|e).toString(16).slice(1)}parseHexColor(e){const t=e&&e.replace("#",""),n=parseInt(t,16);if(isNaN(n))return null;const i=t.length;return 3===i?{r:17*(n>>8),g:17*(n>>4&15),b:17*(15&n),a:1}:6===i||8===i?{r:n>>16&255,g:n>>8&255,b:255&n,a:6===i?1:(n>>24&255)/255}:null}parseRgbaColor(e){if(!e)return null;const t=e.replace(r,"").match(/^(?:rgba?)\(((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?),((?:\d+\.)?\d+%?)(?:,((:?\d*\.)?\d+))?\)$/);if(t){const e=t[4];return{r:this.normalizeColor(t[1],255,!0),g:this.normalizeColor(t[2],255,!0),b:this.normalizeColor(t[3],255,!0),a:e?this.normalizeColor(e,1,!1):1}}return null}normalizeColor(e,t,n){let i=parseFloat(e);return isNaN(i)?0:(i=e.indexOf("%")>=0?Math.max(0,Math.min(100,i))*t/100:Math.max(0,Math.min(t,i)),n?Math.round(i):Math.round(100*i)/100)}}},97030:function(e,t,n){"use strict";n.d(t,{Xn:function(){return u},_3:function(){return l},gf:function(){return f},iN:function(){return m},jU:function(){return v},lE:function(){return y},sc:function(){return h},xX:function(){return p},xs:function(){return d}});const i=624,r=948,o=1272,a=1596,s=1900,c=24,d=300;let l=i,u=r,p=o,h=a,g=null,m=c;const f=2200;function v(e){m=e;const t=function(e){return{Size1ColumnWidth:d,Size2ColumnWidth:2*d+e,Size3ColumnWidth:3*d+2*e,Size4ColumnWidth:4*d+3*e,Size5ColumnWidth:5*d+4*e,Size6ColumnWidth:6*d+5*e}}(e);g=t.Size6ColumnWidth,h=t.Size5ColumnWidth,p=t.Size4ColumnWidth,u=t.Size3ColumnWidth,l=t.Size2ColumnWidth}function y(){m=c,l=i,u=r,p=o,h=a,g=s}},98619:function(e,t,n){"use strict";n.d(t,{Bn:function(){return u},vi:function(){return h}});var i=n(50632),r=n(80329),o=n(20654),a=n(95153),s=n(31558),c=n(55524);const d="__FastBreakpointManager__";class l{get currentColumnArrangement(){return this.indexToStandardConverter(this.breakpointTracker.currentBreakpoint())}constructor(e){this.useRequestIsolatedTracker=!1,this.callbackMap=new Map,this.refreshBreakpoints(e)}refreshBreakpoints(e){const t=[0],n=(0,i.GQ)();(0,i.hg)();for(let e=1;e<n.length;e++){var r;t.push(null===(r=n[e])||void 0===r?void 0:r.minViewportWidthPx)}this.breakpointTracker.breakpoints=t,this.breakpointTracker.defaultBreakpoint=void 0!==e?(0,a.Nd)(e.data.breakpoint,"breakpoint"):0}set breakpoints(e){if(this.breakpointTracker.breakpoints=e,r.R1&&Array.isArray(r.R1)){const t=r.R1.length;for(let e=0;e<t;e++)r.R1.pop();e.forEach((e=>r.R1.push(e)))}}get breakpoints(){return this.breakpointTracker.breakpoints}updateBreakpointsBasedFromContainerWidth(e){const t=(0,i.GQ)();if(e>=t[3].contentSizePx)return;const n=[];for(let i=0;i<this.breakpoints.length;i++)(0===i||e>=t[i].contentSizePx)&&n.push(t[i].contentSizePx);this.breakpoints=n}subscribe(e){const t=t=>{e(this.indexToStandardConverter(t))};this.callbackMap.set(e,t),this.breakpointTracker.subscribe(t)}unsubscribe(e){this.breakpointTracker.unsubscribe(this.callbackMap.get(e)),this.callbackMap.delete(e)}indexToStandardConverter(e=0){const t=(0,i.GQ)();return t&&e>=t.length&&t[t.length-1]?t[t.length-1].arrangement:t[e].arrangement}get breakpointTracker(){return!(0,s.N)()&&this.useRequestIsolatedTracker?c.Gq.get("__FastBreakpointManager_breakpointTracker__",(()=>new o.Z.constructor)):o.Z}}const u=(e,t)=>(t&&c.Gq.set(d,new l(e)),c.Gq.get(d,(()=>new l(e)))),p="__FastBreakpointManager_viewType__",h=()=>{let e=null;switch(u().currentColumnArrangement){case i.K$.c1:e="size1column";break;case i.K$.c2:e="size2column";break;case i.K$.c3:e="size3column";break;case i.K$.c4:e="size4column";break;case i.K$.c5:e="size5column";break;default:return c.Gq.get(p,(()=>null))}return c.Gq.set(p,e),e}},58616:function(e,t,n){"use strict";n.d(t,{$L:function(){return S},Bg:function(){return d},NU:function(){return v},SM:function(){return k},ZH:function(){return h},_U:function(){return u},a5:function(){return C},bE:function(){return m},iA:function(){return l},l_:function(){return g},po:function(){return y},zb:function(){return I}});var i=n(10754),r=n(21930),o=n(45870),a=n(31558),s=n(55524);const c="defer-hydration",d="needs-hydration",l=window.location.search.includes("ssrhydrateperf"),u=new Map,p=e=>t=>{if(!t.hasAttribute(e))return Promise.resolve();const n=new o.o;return new MutationObserver(((i,r)=>{t.hasAttribute(e)||(n.set(),r.disconnect())})).observe(t,{attributeFilter:[e]}),n.getResultAsync()},h=p(c),g=p(d),m=(e,t=!1)=>{if(!(0,a.N)())return{start:()=>{},markEnd:()=>{}};const n=`${e}.start`;return{start:()=>{var e;return null===(e=performance)||void 0===e?void 0:e.mark(n)},markEnd:(r="end",o=t)=>{var a,s;const c=`${e}.${r}`;var d;(null===(a=performance)||void 0===a||a.mark(c),null===(s=performance)||void 0===s||s.measure(`${e}.${r}:duration`,n,c),o)&&((0,i.Ou)()[`${e}.${r}:duration`]=null===(d=performance)||void 0===d?void 0:d.getEntriesByName(`${e}.${r}:duration`)[0].duration)}}};let f=new Set;const v=e=>f=new Set(e.map((e=>e.toLocaleLowerCase()))),y=e=>{u.clear(),e.forEach((e=>{u.set(e.toLocaleLowerCase(),{selfHydrationComplete:new o.o,topDownHydrateComplete:new o.o})}))},S=e=>{e.forEach((e=>{var t,n;const i=e.toLocaleLowerCase();null===(t=u.get(i))||void 0===t||t.selfHydrationComplete.set(),null===(n=u.get(i))||void 0===n||n.topDownHydrateComplete.set()}))};var C;!function(e){e[e.Immediate=0]="Immediate",e[e.Never=1]="Never",e[e.IdleAfterTtvr=2]="IdleAfterTtvr",e[e.OnInteraction=3]="OnInteraction",e[e.OnHover=4]="OnHover",e[e.OnPageResize=5]="OnPageResize"}(C||(C={}));const w=["click","keydown"],b=["mouseenter","focusin"],T=Symbol("topDownHydratingComponents"),k=()=>s.Gq.get(T,(()=>new Map)),P=e=>{const t=k(),n=(t.get(e)??0)+1;t.set(e,n)},A=e=>{const t=k(),n=(t.get(e)??0)-1;n>0?t.set(e,n):t.delete(e)};async function I(e,t,n={}){const i=e.hasAttribute(c);if(i){var o;null==t||t.start(),e.removeAttribute(c);const n=e.tagName.toLocaleLowerCase();P(n),await g(e).then((()=>null==t?void 0:t.markEnd("selfHydrationComplete"))),null===(o=u.get(n))||void 0===o||o.selfHydrationComplete.set()}let a;var s;e.hasAttribute("needs-recreation")?a=[]:a=Array.from((null===(s=e.shadowRoot)||void 0===s?void 0:s.children)??[]).concat(Array.from(e.children));return Promise.all(a.map(((t,i)=>{var o;let a;const s=t.tagName.toLocaleLowerCase(),c=new AbortController,d=()=>{if(!c.signal.aborted)return c.abort(),f.has(s)?a=m(`${s}:hydration`,!0):l&&(a=m(`${e.tagName.toLocaleLowerCase()}>${s}[${i}]`,!1)),I(t,a,n)},u={once:!0,passive:!0,capture:!0,signal:c.signal},p=null===(o=n.hydrationModes)||void 0===o?void 0:o[s];var h;if(1!==(null==p?void 0:p.mode)){if(!Array.isArray(null==p?void 0:p.mode))return d();var g;null==p||null===(g=p.markTtvr)||void 0===g||g.call(p,t);for(const e of p.mode)switch(e){case 2:(0,r.b1)().then((()=>requestIdleCallback(d)));break;case 3:w.forEach((e=>{t.addEventListener(e,d,u)}));break;case 4:b.forEach((e=>{t.addEventListener(e,d,u)}));break;case 5:window.addEventListener("resize",d,u)}}else null==p||null===(h=p.markTtvr)||void 0===h||h.call(p,t)}))).then((()=>{if(i){var n;null==t||t.markEnd("topDownHydrateComplete");const i=e.tagName.toLocaleLowerCase();A(i),null===(n=u.get(i))||void 0===n||n.topDownHydrateComplete.set()}}))}},61633:function(e,t,n){"use strict";n.d(t,{Bs:function(){return g},E7:function(){return h},EH:function(){return m},Eg:function(){return p},Lr:function(){return i},S7:function(){return u},WX:function(){return f},Wi:function(){return l},ZG:function(){return s},d5:function(){return r},hE:function(){return o},il:function(){return c},kO:function(){return y},mw:function(){return v},pt:function(){return a},yV:function(){return d}});const i={PrivacyUrl:"https://go.microsoft.com/fwlink/?LinkID=286759",SamDomain:"https://srtb.msn.com/",SamEndpoint:"auction",SamOpenRtbEndpoint:"auctionopenrtb",LeadgenEndpoint:"leadgenads",AppId:"msnappid",PublisherId:"msn",Ecasession:"init",RiverRegion:"river",RiverDoubleWide:"river-dbl",RiverHalfTextOnly:"river-half-textonly",RiverHalf:"river-half",ReservedRiver:"resriver",UserOptOut:"userOptOut",UserOptOutOptions:"userOptOutOptions",DefaultPartnerCookieSyncTimeout:500,BulkCookieSyncTimeout:1e3,WaitForAdResponseAfterWPOResponseTimeout:1500,DefaultContentServiceBaseUrl:"https://assets.msn.com/content/",SamOpenRTBMinTimeout:800,LeadgenAdServiceTimeout:3e3},r={river:"oneriver.main",infopane:"oneriver.spartan.infopane","infopane-tab":"oneriver.spartan.tabinfopane",rivert:"oneriver.maint"},o={BeaconFormatDecoded:"decoded",BeaconFormatEncoded:"encoded",BeaconTypeAdServed:"adserved",BeaconTypeClick:"click",BeaconTypeJsTracker:"jsTracker",BeaconTypeVisibility:"visibility",BeaconTypeVideoProgress:"videoProgress",StartEvent:"start",FirstQuartileEvent:"firstquartile",ThirdQuartileEvent:"thirdquartile",MidPointEvent:"midpoint",CompleteEvent:"complete",ProgressEvent:"progress",UserActionEvent:"userAction"};var a;!function(e){e.Click="click",e.Ready="ready",e.Play="play",e.Pause="pause",e.Ended="ended",e.Telemetry="telemetry",e.VolumeChange="volumechange",e.TimeUpdate="timeupdate",e.Error="error",e.CanPlay="canplay",e.CanPlayThrough="canplaythrough"}(a||(a={}));const s={CMSListServiceUrl:"v1/cms/api/amp/Document/",CMSContentServiceURl:"view/v1/Preview/",DefaultProviderName:"Microsoft"},c={ContentType:"application/json",Method:"POST",CacheControl:"no-cache",Skipsessioncall:"false",ContentTypeKey:"Content-Type",FlightIdKey:"x-ms-flightId",CacheControlKey:"Cache-Control",ClientIdKey:"X-MSEdge-ClientID",MarketKey:"X-MSEdge-Market",AuthCookieNameKey:"x-ms-authCookieName",Timeout:3e3,BCPCookieKey:"BCP",UserAgent:"User-Agent"},d={MSAOptOut:"msaoptout",BrowserOptOut:"TOptOut",AppAnonCookieExist:"aace",TaboolaSessionCookieName:"ecasession",CookieDomain:"msn.com",AnonCookieName:"ANON",LiverampEnvelopeId:"adslrid"},l={"de-de":"BBGgbuP","en-gb":"BBI4NMr","en-us":"BBI4MeJ","it-it":"BBH0fea","de-at":"BBIbKRf","de-ch":"BBH6mkD","pl-pl":"BBGgsgw","tr-tr":"BBH3vBx","es-es":"BBGdmuQ","en-au":"BBGfT6j","es-ar":"BBH69zf","es-cl":"BBH6qTU","es-co":"BBH3TQV","es-pe":"BBIbVzn","es-mx":"BBGg7xs","pt-br":"BBI4jJ6","en-ca":"BBI4FN9","he-il":"BBIbHNd","fr-ch":"BBIfDNl","nl-be":"BBH6zcN","fr-be":"BBIclrE","fr-fr":"BBI4XBF","nl-nl":"BBGgoUg","pt-pt":"BBH3qlj","zh-cn":"BBPRWnl","ja-jp":"AAvs5xw","ko-kr":"AAvrTXp","en-xl":"AAxzSQi","es-us":"AAuAfA8","fr-ca":"BBH6Awm","es-xl":"BBIfH5i","cs-cz":"BBPwecC","da-dk":"BBGKGmb","el-gr":"BBIc8WA","fi-fi":"BBH6Cse","hu-hu":"BBPw6XX","nb-no":"BBI4EVt","ru-ru":"BBH3gvW","sv-se":"BBH3vHp","ar-ae":"BBIf1cG","ar-eg":"BBIcggw","ar-sa":"BBIc6wN","en-ae":"BBIbBRO","en-ie":"BBIclgh","en-za":"BBIc5NR","en-in":"BBGeThK","en-sg":"BBIfqX9","en-nz":"BBIc483","zh-hk":"BBIbPBb","hi-in":"BBH85g2","mr-in":"BBU7J93","te-in":"BBU7JcP","bn-in":"BBU7Qw4","id-id":"BBIc9Ls","th-th":"BBIbPH4","vi-vn":"BBIcbQS","es-ve":"BBIcaTp","fr-xl":"AAD4nFo","en-my":"BBIclH7","en-ph":"BBIcbaP","zh-tw":"BBH3qpv"},u={"de-de":"Anzeige","en-gb":"Ad","en-us":"Ad","it-it":"Ann.","de-at":"Anzeige","de-ch":"Anzeige","pl-pl":"Reklama","tr-tr":"R","es-es":"Publicidad","en-au":"Ad","es-ar":"Patrocinado","es-cl":"Patrocinado","es-co":"Patrocinado","es-pe":"Patrocinado","es-mx":"Patrocinado","pt-br":"Publicidade","en-ca":"Ad","he-il":"מודעה","fr-ch":"Sponsorisé","nl-be":"Advertentie","fr-be":"Sponsorisé","fr-fr":"Sponsorisé","nl-nl":"Advertentie","pt-pt":"Pub","zh-cn":"广告","ja-jp":"PR","ko-kr":"AD","en-xl":"Ad","es-us":"Patrocinado","fr-ca":"Pub","es-xl":"Patrocinado","cs-cz":"Reklama","da-dk":"Annonce","el-gr":"Ad","fi-fi":"Mainos","hu-hu":"Hird.","nb-no":"Annonse","ru-ru":"Реклама","sv-se":"Annons","ar-ae":"إعلان","ar-eg":"إعلان","ar-sa":"إعلان","en-ae":"Ad","en-ie":"Ad","en-za":"Ad","en-in":"Ad","en-sg":"Ad","en-nz":"Ad","zh-hk":"廣告","hi-in":"एड","mr-in":"जाहिरात","te-in":"ప్రకటన","bn-in":"বিজ্ঞাপন","id-id":"Ad","th-th":"Ad","vi-vn":"Ad","es-ve":"Patrocinado","fr-xl":"Sponsorisé","en-my":"Ad","en-ph":"Ad","zh-tw":"廣告"},p=["ja-jp","ko-kr","zh-cn"],h={MyFeedPivotId:"oneriver.myfeed",StripeMyFeedPivotId:"stripe.myfeed",EditInterestPivotId:"oneriver.editinterests"};var g;!function(e){e[e.AdBuffering=1]="AdBuffering",e[e.ContentBuffering=2]="ContentBuffering",e[e.AdError=10]="AdError",e[e.AdPlayStarted=11]="AdPlayStarted",e[e.AdPlayCompleted=13]="AdPlayCompleted",e[e.AdSkipped=15]="AdSkipped",e[e.AdTimeout=16]="AdTimeout",e[e.AdPause=17]="AdPause",e[e.AdResume=18]="AdResume",e[e.ContentError=20]="ContentError",e[e.ContentStart=21]="ContentStart",e[e.ContentContinue=22]="ContentContinue",e[e.ContentComplete=23]="ContentComplete",e[e.CC=30]="CC",e[e.Pause=31]="Pause",e[e.Seek=32]="Seek",e[e.Mute=33]="Mute",e[e.FullScreenEnter=34]="FullScreenEnter",e[e.Info=35]="Info",e[e.VideoQuality=36]="VideoQuality",e[e.Resume=37]="Resume",e[e.FullScreenExit=38]="FullScreenExit",e[e.Replay=39]="Replay",e[e.Unmute=40]="Unmute",e[e.ContentImpression3PP=41]="ContentImpression3PP",e[e.Facebook=51]="Facebook",e[e.Twitter=52]="Twitter",e[e.Email=53]="Email",e[e.CommonPlayerImpression=61]="CommonPlayerImpression",e[e.EndslateVideos=64]="EndslateVideos",e[e.EndslateContinuous=65]="EndslateContinuous",e[e.EndslateCancelCountdown=66]="EndslateCancelCountdown",e[e.EndslateShown=67]="EndslateShown",e[e.PlayerStarting=90]="PlayerStarting",e[e.AdLoading=91]="AdLoading",e[e.AdLoaded=92]="AdLoaded",e[e.VideoLoading=93]="VideoLoading",e[e.ContentOpen=101]="ContentOpen",e[e.Content25Percent=102]="Content25Percent",e[e.Content50Percent=103]="Content50Percent",e[e.Content75Percent=104]="Content75Percent",e[e.Canplay=105]="Canplay",e[e.Canplaythrough=106]="Canplaythrough"}(g||(g={}));const m=["en-it","de-at","fr-be","nl-be","cs-cz","da-dk","fi-fi","fr-fr","de-de","el-gr","hu-hu","it-it","nl-nl","no-no","pl-pl","pt-pt","es-es","sv-se","de-ch","de-fr","en-gb"],f=["cs-cz","da-dk","de-at","de-ch","de-de","en-gb","el-gr","fi-fi","fr-be","fr-ch","fr-fr","hu-hu","it-it","nb-no","nl-be","nl-nl","pl-pl","pt-br","pt-pt","ru-ru","sv-se","tr-tr","zh-cn"],v=["en-us","es-us"],y=["en-au","en-nz"]},82694:function(e,t,n){"use strict";n.d(t,{SI:function(){return o},di:function(){return r},hb:function(){return i},j3:function(){return s}});const i={_lowerBound:"invalid",_1by191:"1x1.91",_9by16:"9x16",_3by4:"3x4",_1by1:"1x1",_4by3:"4x3",_16by9:"16x9",_191by1:"1.91x1"};var r,o,a;!function(e){e.Adult="adult",e.Enterprise="enterprise"}(r||(r={})),function(e){e.AdFeedV2="feedv2-template",e.Default="msft-content-card",e.PatternOverlay="msn-pattern-overlay-card",e.PseudoVideo="msn-pseudo-video-card",e.Slideshow="msn-slideshow-card",e.ZIndex="msn-z-index-card",e.AdCarousel="msn-ad-carousel",e.AnimatedImagery="msn-animated-imagery",e.InfopaneHorizontal_1by1="msn-info-pane-horizontal-1-by-1",e.InfopaneHorizontal_3by4="msn-info-pane-horizontal-3-by-4",e.InfopaneHorizontal_4by3="msn-info-pane-horizontal-4-by-3",e.InfopaneHorizontal_9by16="msn-info-pane-horizontal-9-by-16",e.InfopanePatternOverlay_1by1="msn-info-pane-pattern-overlay-1-by-1",e.InfopanePatternOverlay_4by3="msn-info-pane-pattern-overlay-4-by-3",e.InfopaneDoubleCard_19by10="msn-card-19-by-10",e.RiverAnimatedImagery_9by16="msn-river-animated-imagery-9-by-16",e.RiverZIndex_9by16="msn-river-z-index-9-by-16",e.RiverZIndex_3by4="msn-river-z-index-3-by-4",e.HotspotSingle="msn-hotspot-single",e.BrandStory="msn-brand-story",e.CallToAction="msn-ad-cta",e.CallToActionLearnMore="msn-ad-cta-learn-more",e.CallToActionDarkMode="msn-ad-cta-learn-more-dark-mode",e.CallToActionIcon="msn-ad-cta-icon",e.CallToActionShortTitle="msn-ad-cta-short-title",e.CallToActionMaskMode="msn-ad-cta-mask-mode",e.ContentReveal="msn-content-reveal",e.DiscountScribble="msn-discount-scribble",e.BrandStoryNoDeco="msn-brand-story-no-deco",e.BrandStoryNoProgressiveDisplay="msn-brand-story-no-progressive-display",e.Gamification="msn-gamification",e.HighlightRating="msn-highlight-rating-card",e.DecorationDynamic="msn-decoration-dynamic",e.TitleMaxLine2="msn-title-max-line-2",e.TitleMaxLine2C="msn-title-max-line-2-c",e.InfopaneDynamicRendering="msn-info-pane-dynamic-rendering",e.Logo="msn-native-ad-logo",e.LogoWithBorderRadius="msn-native-ad-logo-radius",e.ShortTitle="msn-native-ad-short-title",e.Spotlight="msn-spotlight-image",e.Disclaimer="msn-ad-disclaimer",e.ZIndexV2Original="msn-ad-zindex-v2-original",e.ZIndexV2Polygon="msn-ad-zindex-v2-polygon",e.AdSlugV3="msn-ad-slug-v3",e.AdSlugV4="msn-ad-slug-v4",e.DrPerf="msn-ad-dr-perf",e.Video="msn-video",e.VideoIAS="msn-video-ias",e.Amplify="msn-amplify",e.SpecialOfferNonDR="msn-special-offer-nondr",e.SpecialOfferNonDRWithExp="msn-special-offer-nondr-with-exp",e.RatingHighlightRedNonDR="msn-highlight-rating-nondr-red",e.RatingHighlightYellowNonDR="msn-highlight-rating-nondr-yellow",e.RatingHighlightYellowNonDRStatic="msn-highlight-rating-nondr-yellow-static",e.RatingDefaultYellowNonDRStatic="msn-default-rating-nondr-yellow-static",e.FreeShippingPlainTextNonDR="msn-freeshipping-plain-text-nondr",e.FreeShippingInlineNonDR="msn-freeshipping-inline-nondr",e.FreeShippingTopLeftNonDR="msn-freeshipping-top-left-nondr",e.FreeShippingTopRightNonDR="msn-freeshipping-top-right-nondr",e.FreeShippingDR="msn-freeshipping-dr",e.ConditionNonDR="msn-condition-nondr",e.ConditionNonDRControl="msn-condition-nondr-c",e.ReturnPolicyNonDR="msn-return-policy-nondr",e.ReturnPolicyNonDRControl="msn-return-policy-nondr-c",e.SoldNonDR="msn-sold-nondr",e.SoldNonDRControl="msn-sold-nondr-c",e.EliteBadge="msn-elite-badge",e.RatingDR="msn-rating-dr",e.Trending="msn-trending",e.LikeButton="msn-like-button",e.SaleHighlightV1="msn-sale-highlight-v1",e.SaleHighlightV1Control="msn-sale-highlight-v1-c",e.SaleHighlightV3="msn-sale-highlight-v3",e.SaleHighlightV4="msn-sale-highlight-v4",e.SaleHighlightV3V4Control="msn-sale-highlight-v3v4-c",e.ShortTitleControl="msn-short-title-c",e.SpecialOfferControl="msn-special-offer-c",e.LogoControl="msn-logo-c",e.FreeShippingControl="msn-freeshipping-c",e.ZIndexControl="msn-z-index-c",e.RatingControl="msn-rating-c",e.TrendingControl="msn-trending-c",e.CallToActionControl="msn-cta-c",e.HoverEffectControl="msn-hover-effect-c",e.HoverEffect="msn-hover-effect",e.ComboRating="msn-combo-rating",e.ComboFreeShipping="msn-combo-freeshipping",e.ComboSpecialOffer="msn-combo-special-offer",e.ComboRatingNonDR="msn-combo-rating-nondr",e.ComboFreeShippingNonDR="msn-combo-freeshipping-nondr",e.ComboSpecialOfferNonDR="msn-combo-special-offer-nondr",e.ComboSaleHighlightNonDR="msn-combo-sale-highlight-nondr",e.ComboRatingNonDRControl="msn-combo-rating-nondr-c",e.ComboFreeShippingNonDRControl="msn-combo-freeshipping-nondr-c",e.ComboSpecialOfferNonDRControl="msn-combo-special-offer-nondr-c",e.ComboSaleHighlightNonDRControl="msn-combo-sale-highlight-nondr-c",e.CallToActionV2="msn-call-to-action-v2",e.CallToActionV3="msn-call-to-action-v3",e.CallToActionV3PA="msn-call-to-action-v3-pa",e.PESeasonalAds="msn-pe-seasonal",e.PESeasonalAdsV1="msn-pe-seasonal-v1",e.PESeasonalAdsV1P="msn-pe-seasonal-v1p",e.PESeasonalAdsControl="msn-pe-seasonal-control",e.ComboSoldNonDR="msn-combo-sold-nondr",e.ComboReturnPolicyNonDR="msn-combo-return-policy-nondr",e.ComboConditionNonDR="msn-combo-condition-nondr",e.ComboSoldNonDRControl="msn-combo-sold-nondr-c",e.ComboReturnPolicyNonDRControl="msn-combo-return-policy-nondr-c",e.ComboConditionNonDRControl="msn-combo-condition-nondr-c",e.ResponsiveImageSizing="msn-responsive-image-sizing",e.ResponsiveDescription="msn-responsive-description",e.GeometricAdWaves1="msn-geometric-ad-waves-1",e.GeometricAdWaves3="msn-geometric-ad-waves-3",e.GeometricAdWaves4="msn-geometric-ad-waves-4",e.GeometricAdNature3="msn-geometric-ad-nature-3",e.GeometricAdSparkles1="msn-geometric-ad-sparkles-1",e.GeometricAdSparkles2="msn-geometric-ad-sparkles-2",e.GeometricAdSparkles3="msn-geometric-ad-sparkles-3",e.GeometricAdSparkles4="msn-geometric-ad-sparkles-4",e.GeometricAdSparkles5="msn-geometric-ad-sparkles-5",e.GPTTitle="msn-native-ad-gpt-title",e.AlignmentRF="msn-native-ad-align-rf",e.AIImg="msn-native-ad-ai-img",e.CTAOnly="msn-native-ad-cta-only",e.LogoOnly="msn-native-ad-logo-only",e.CTALogo="msn-native-ad-cta-logo"}(o||(o={})),function(e){e.ScaleUp="scale-up",e.ScaleDown="scale-down",e.ScaleUpDown="scale-up-down"}(a||(a={}));const s={templateType:o.Default,animatedImage:"",landscapeOverlay:!1,allowedAssets:null,nativeAdMode:r.Adult,adCarousel:!1,progressiveDisplay:!1,discountThreshold:1,imageSizeConfig:{infopane:{w:604,h:296},river:{w:300,h:174}},badgeStyle:"blendedIn",useClickInGamify:!0,configType:void 0}},23019:function(e,t,n){"use strict";n.d(t,{XY:function(){return c},aT:function(){return s},bZ:function(){return i},fs:function(){return l},g2:function(){return r},hy:function(){return o},ih:function(){return a},xs:function(){return d}});const i=["HotelAd"],r={city:"location.svg"},o={img:{required:1,img:{type:3}},title:{required:1,title:{len:100}},providerName:{required:1,data:{type:1}},logo:{required:0,img:{w:16,h:16,type:1}},disclaimer:{required:0,data:{type:513}},city:{required:0,data:{type:9}},price:{required:0,data:{type:6}},callout:{required:0,data:{type:517}},callToAction:{required:0,data:{type:12,len:15}},advertiserLogo:{required:0,img:{type:501,w:16,h:16}}},a={price:e=>e.split(".")[0]},s={providerName:"data-1",rating:"data-3",likes:"data-4",price:"data-6",salePrice:"data-7",city:"data-9",callToAction:"data-12",installmentPrice:"data-500",priceDrop:"data-501",freeShipping:"data-502",viewed:"data-503",sold:"data-504",specialOffer:"data-505",eliteBadge:"data-506",condition:"data-507",localInventory:"data-508",curbsidePickup:"data-509",review:"data-510",shortTitle:"data-511",returnPolicy:"data-512",disclaimer:"data-513",callout:"data-517",discount:"data-600",title:"data-601",logo:"image-1",img:"image-3",transparentImage:"image-500",advertiserLogo:"image-501"},c={font:"p1",shipping:"p2",ratings:"p3"},d=["specialOffer"],l=[s.disclaimer]},54798:function(e,t,n){"use strict";var i;n.d(t,{Y:function(){return i}}),function(e){e.AR="AR",e.GA="GA",e.VI="VI",e.EDGECHRNTP="edgechrntp",e.EDGECHRDHP="edgechrdhp",e.MSNEWS="msnews",e.FirstParty="firstparty",e.SAAAR="saaar",e.SAAGA="saaga",e.SAAVI="saavi",e.SAAWATCH="saawatch",e.SAIAR="saiar",e.SAIGA="saiga",e.SAIVI="saivi",e.SAIWATCH="saiwatch",e.VerticalLandingPage="vlp",e.WINVLP="winvlp",e.WINAR="winar",e.WINGA="winga",e.WINVI="winvi",e.WEBCOMPAR="webcompar",e.WEBCOMPGA="webcompga",e.WEBCOMPVI="webcompvi",e.WATCH="watch",e.WINWEB="Winweb",e.SKYPEAR="skypear",e.SKYPEGA="skypega",e.SKYPEVI="skypevi",e.SKYPEWATCH="skypewatch",e.OUTLOOKAR="outlookar",e.OUTLOOKGA="outlookga",e.OUTLOOKVI="outlookvi",e.OUTLOOKWATCH="outlookwatch",e.SKYPEDESKTOPFEED="skypefeed"}(i||(i={}))},12756:function(e,t,n){"use strict";var i;n.d(t,{r:function(){return i}}),function(e){e[e.Logo=1]="Logo",e[e.HighResolution4K=3]="HighResolution4K",e[e.C1=2e4]="C1",e[e.C2=20001]="C2",e[e.C3=20002]="C3",e[e.C4=20003]="C4",e[e.C5=20004]="C5"}(i||(i={}))},27517:function(e,t,n){"use strict";var i;n.d(t,{x:function(){return i}}),function(e){e.Prong1="11730608",e.Prong2="11730609",e.NtpFeed="11726288"}(i||(i={}))},59489:function(e,t,n){"use strict";var i;n.d(t,{l:function(){return i}}),function(e){e.NO_ACCOUNT="NO_ACCOUNT",e.MSA="MSA",e.AAD="AAD"}(i||(i={}))},85205:function(e,t,n){"use strict";var i;n.d(t,{z:function(){return i}}),function(e){e.AdminPortalData="AdminPortalData",e.AdService="AdService",e.AdsManager="AdsManager",e.BackgroundData="BackgroundData",e.BingAdsManager="BingAdsManager",e.BingAdsService="BingAdsService",e.BingImageData="BingImageData",e.CasualGamesData="CasualGamesData",e.CategoryData="CategoryData",e.ChannelData="ChannelData",e.StoryData="StoryData",e.ChromiumPageSettings="ChromiumPageSettings",e.CoachmarkData="CoachmarkData",e.ConditionalBannerData="ConditionalBannerData",e.DailyBriefServiceClient="DailyBriefServiceClient",e.DisplayAdsManager="DisplayAdsManager",e.Esports="Esports",e.ExperienceLoadedData="ExperienceLoadedData",e.ExperienceLoadedDataConnector="ExperienceLoadedDataConnector",e.ExperienceTrackerCasualGamesLandingData="ExperienceTrackerCasualGamesLandingData",e.ExperienceTrackerChannelData="ExperienceTrackerChannelData",e.ExperienceTrackerCommunityData="ExperienceTrackerCommunityData",e.ExperienceTrackerContentToolsData="ExperienceTrackerContentToolsData",e.ExperienceTrackerData="ExperienceTrackerData",e.ExperienceTrackerEdgeData="ExperienceTrackerEdgeData",e.ExperienceTrackerEdgeNextData="ExperienceTrackerEdgeNextData",e.ExperienceTrackerFinanceData="ExperienceTrackerFinanceData",e.ExperienceTrackerFirstPartyData="ExperienceTrackerFirstPartyData",e.ExperienceTrackerGamingFeedData="ExperienceTrackerGamingFeedData",e.ExperienceTrackerHomePageData="ExperienceTrackerHomePageData",e.ExperienceTrackerHubData="ExperienceTrackerHubData",e.ExperienceTrackerMicrosoftNewsData="ExperienceTrackerMicrosoftNewsData",e.ExperienceTrackerMMXData="ExperienceTrackerMMXData",e.ExperienceTrackerEdgeMobileData="ExperienceTrackerEdgeMobileData",e.ExperienceTrackerPrismData="ExperienceTrackerPrismData",e.ExperienceTrackerQnaData="ExperienceTrackerQnaData",e.ExperienceTrackerRecipesData="ExperienceTrackerRecipesData",e.ExperienceTrackerWidgets="ExperienceTrackerWidgets",e.ExperienceTrackerShoppingData="ExperienceTrackerShoppingData",e.ExperienceTrackerSportsData="ExperienceTrackerSportsData",e.ExperienceTrackerSuperAppData="ExperienceTrackerSuperAppData",e.ExperienceTrackerTrafficData="ExperienceTrackerTrafficData",e.ExperienceTrackerTravelData="ExperienceTrackerTravelData",e.ExperienceTrackerHealthData="ExperienceTrackerHealthData",e.ExperienceTrackerUgcData="ExperienceTrackerUgcData",e.ExperienceTrackerViewsData="ExperienceTrackerViewsData",e.ExperienceTrackerWeatherData="ExperienceTrackerWeatherData",e.ExperienceTrackerWeatherMobileData="ExperienceTrackerWeatherMobileData",e.ExperienceTrackerWindowsNewsAndInterestsData="ExperienceTrackerWindowsNewsAndInterestsData",e.ExperienceTrackerWindowsData="ExperienceTrackerWindowsData",e.ExperienceTrackerSuperWindowsData="ExperienceTrackerSuperWindowsData",e.ExperienceTrackerWindowsShellData="ExperienceTrackerWindowsShellData",e.ExperienceTrackerWindowsShellV2Data="ExperienceTrackerWindowsShellV2Data",e.ExperienceTrackerWindowsWidgetsData="ExperienceTrackerWindowsWidgetsData",e.FeedbackData="FeedbackData",e.GamingChannelData="GamingChannelData",e.HubPageSettings="HubPageSettings",e.IrisData="IrisData",e.LayoutPreferenceData="LayoutPreferenceData",e.LocationFeed="LocationFeed",e.MarketSelector="MarketSelector",e.MilestoneData="MilestoneData",e.MsccCookieBannerData="MsccCookieBannerData",e.MsNewsPageSettings="MsNewsPageSettings",e.NavigationData="NavigationData",e.NurturingPlacementManager="NurturingPlacementManager",e.OfficeSharedData="OfficeSharedData",e.OneTrustCookieConsentData="OneTrustCookieConsentData",e.PageClickTrackerData="PageClickTrackerData",e.PageLayout="PageLayout",e.PageSettingsData="PageSettingsData",e.PlacementManager="PlacementManager",e.PollsService="PollsService",e.PoweredByData="PoweredByData",e.Preload="Preload",e.QnaFeedService="QnaFeedService",e.RewardsData="RewardsData",e.RewardsCoachmarkData="RewardsCoachmarkData",e.SearchHistoryEdgenextData="SearchHistoryEdgenextData",e.SharedState="SharedState",e.SharedTimestampUtil="SharedTimestampUtil",e.SharedStringsUtil="SharedStringsUtil",e.SignInData="SignInData",e.SocialEditorData="SocialEditorData",e.SocialPostData="SocialPostData",e.SportsAroundTheLeagueData="SportsAroundTheLeagueData",e.SportsData="SportsData",e.SportsDataUtils="SportsDataUtils",e.SportsGameSummaryData="SportsGameSummaryData",e.SportsInfoSharedState="SportsInfoSharedState",e.SportsOlympicData="SportsOlympicData",e.SportsPersonalizationData="SportsPersonalizationData",e.SportsPreviousMatchupsData="SportsPreviousMatchupsData",e.SportsWorldCupData="SportsWorldCupData",e.SuperComponentData="SuperComponentData",e.SuperMobileComponentData="SuperMobileComponentData",e.Telemetry="Telemetry",e.ShellNewTabData="ShellNewTabData",e.SmartListSharedData="SmartListSharedData",e.TelemetryData="TelemetryData",e.TelemetryDataEdgeChromium="TelemetryDataEdgeChromium",e.TelemetryEdgeChromium="TelemetryEdgeChromium",e.TopicData="TopicData",e.TopSitesLayoutData="TopSitesLayoutData",e.TravelData="TravelData",e.VerticalPropertyData="VerticalPropertyData",e.VideoDataManager="VideoDataManager",e.ViewsNativeAd="ViewsNativeAdConnector",e.ViewsFullPage="ViewsFullPage",e.WeatherActivityWatchlistData="WeatherActivityWatchlistData",e.WeatherData="WeatherData",e.WeatherCardData="WeatherCardData",e.WeatherFeedbackData="WeatherFeedbackData",e.WeatherLocationMapData="WeatherLocationMapData",e.WeatherPageMeta="WeatherPageMeta",e.WeatherPersonaData="WeatherPersonaData",e.WeatherMapData="WeatherMapData",e.WeatherWinAppHeader="WeatherWinAppHeader",e.WeatherWinAppHeader1w="WeatherWinAppHeader1w",e.FinanceData="FinanceData",e.MoneyInfoSharedState="MoneyInfoSharedState",e.SocialData="SocialData",e.WindowsNewsAndInterestsData="WindowsNewsAndInterestsData",e.WindowsShellData="WindowsShellData",e.WindowsPageSettings="WindowsPageSettings",e.HyperLocalPromotionCardClosedKey="weather-map-hyper-local-promotion-card-closed"}(i||(i={}))},93388:function(e,t,n){"use strict";var i;n.d(t,{g:function(){return i}}),function(e){e.backgroundThemeColorChange="backgroundThemeColorChange",e.trackValuesUpdated="trackvaluesupdated",e.desktopFeedFetchFailed="desktopFeedFetchFailed",e.pageContentViewportUpdated="pageContentViewportUpdated",e.requestPageContentViewport="requestPageContentViewport",e.launchChannelStoreCoachmark="launchChannelStoreCoachmark",e.launchChannelStore="launchChannelStore"}(i||(i={}))},79545:function(e,t,n){"use strict";var i;n.d(t,{x:function(){return i}}),function(e){e.ShoppingCategoryPage="ShoppingCategoryPage",e.aboveRiverBlock="AboveRiverBlock",e.actionTray="ActionTray",e.aiCharacterCard="AiCharacterCard",e.aicharacterLandingPage="AicharacterLandingPage",e.aicharacterPaintPage="AicharacterPaintPage",e.animator="Animator",e.articleCloseButton="ArticleCloseButton",e.articleFre="ArticleFre",e.articlePage="ArticlePage",e.articleRelatedStories="ArticleRelatedStories",e.articleTopComment="ArticleTopComment",e.autosCard="AutosCard",e.autosCarousel="AutosCarousel",e.autosEntityCardWC="AutosEntityCardWC",e.autosEntitySpan="AutosEntitySpan",e.autosGarageCard="AutosGarageCard",e.autosMarketplaceCard="AutosMarketplaceCard",e.backToTopButton="BackToTopButton",e.backgroundGallery="BackgroundGallery",e.backgroundGradient="BackgroundGradient",e.backgroundImageCommon="BackgroundImageCommon",e.backgroundImageEdge="BackgroundImageEdge",e.backgroundImageWC="BackgroundImageWC",e.bannerManager="BannerManager",e.baseHeader="BaseHeader",e.bingAdsManager="BingAdsManager",e.bingAnswers="BingAnswers",e.bingCards="BingCardsExperience",e.bingDailyQuizCard="BingDailyQuizCard",e.bingHealthCard="BingHealthCard",e.bingHealthFitnessCard="BingHealthFitnessCard",e.bingHomepageFeed="BingHomepageFeed",e.bingMiniShopping="BingMiniShopping",e.bingShopping="BingShopping",e.bingShoppingLifestyleCard="BingShoppingLifestyleCard",e.bingShoppingMeStripe="BingShoppingMeStripe",e.bingThisOrThatCard="BingThisOrThatCard",e.bingWebSSO="BingWebSSO",e.boostAd="BoostAd",e.boostAdCard="BoostAdCard",e.breakingNews="BreakingNews",e.breakingNewsWC="BreakingNewsWC",e.calendarCard="CalendarCard",e.cardAction="CardAction",e.cardActionV2="CardActionV2",e.cardActionWC="CardActionWC",e.cashbackCarousel="CashbackCarousel",e.cashbackCarouselCard="CashbackCarouselCard",e.casualGamesBanner="CasualGamesBanner",e.casualGamesCard="CasualGamesCard",e.casualGamesCarouselCard="CasualGamesCarouselCard",e.casualGamesDevelopersPage="CasualGamesDevelopersPage",e.casualGamesEventCard="CasualGamesEventCard",e.casualGamesFeed="CasualGamesFeed",e.casualGamesFrame="CasualGamesFrame",e.casualGamesGameCardCarousel="CasualGamesGameCardCarousel",e.casualGamesGameplay="CasualGamesGameplay",e.casualGamesGameplayRightRail="CasualGamesGameplayRightRail",e.casualGamesHub="CasualGamesHub",e.casualGamesLandingV2="CasualGamesLandingV2",e.casualGamesProng2CarouselCard="CasualGamesProng2CarouselCard",e.casualGamesStripeCarouselCard="CasualGamesStripeCarouselCard",e.casualGamesUserProfilePreview="CasualGamesUserProfilePreview",e.channelDesktopContent="ChannelDesktopContent",e.channelEntryPoint="ChannelEntryPoint",e.channelFilterCard="ChannelFilterCard",e.channelInterestsManager="ChannelInterestsManager",e.channelList="ChannelList",e.channelMobileContent="ChannelMobileContent",e.channelPage="ChannelPage",e.channelStore="ChannelStore",e.channelsNews="ChannelsNews",e.clarity="Clarity",e.cmsBaseExperience="CmsBaseExperience",e.cmsExperience="CmsExperience",e.codexBingChat="CodexBingChat",e.coldStart="ColdStart",e.coldStartWC="ColdStartWC",e.comboCard="ComboCard",e.comments="Comments",e.commonAutoSuggest="CommonAutoSuggest",e.commonHeader="CommonHeader",e.commonHeaderWC="CommonHeaderWC",e.commonSearchBoxEdgeNext="CommonSearchBoxEdgeNext",e.commonSettingsEdgeNext="CommonSettingsEdgeNext",e.communityCard="CommunityCard",e.communityComposeCopilotWC="CommunityComposeCopilotWC",e.communityInfoCard="CommunityInfoCard",e.commuteCard="CommuteCard",e.companyNewsCard="CompanyNewsCard",e.complexContentPreview="ComplexContentPreview",e.conditionalBanner="ConditionalBanner",e.conditionalBannerHpWC="ConditionalBannerHpWC",e.conditionalBannerWC="ConditionalBannerWC",e.consumptionFeed="ConsumptionFeed",e.consumptionFeedWC="ConsumptionFeedWC",e.consumptionPage="ConsumptionPage",e.contentCarouselMultiple="ContentCarouselMultiple",e.contentFlexInfoPane="ContentFlexInfoPane",e.contentGroup="ContentGroup",e.contentGroupCard="ContentGroupCard",e.contentNavigationBar="ContentNavigationBar",e.contentPreview="ContentPreview",e.contentPreviewSlide="ContentPreviewSlide",e.contentProvider="ContentProvider",e.contentRelated="ContentRelated",e.contentSharingToolbar="ContentSharingToolbar",e.contentTts="ContentTts",e.contextualFeedback="ContextualFeedback",e.contextualFeedbackWC="ContextualFeedbackWC",e.covidChatBot="CovidChatBot",e.cpcMonetizationDashboard="CpcMonetizationDashboard",e.dailyBrief="DailyBrief",e.dailyGreetingCard="DailyGreetingCard",e.dailyGreetingWindowsShell="DailyGreetingWindowsShell",e.dailyTriviaCard="DailyTriviaCard",e.dashboardFallback="DashboardFallback",e.dashboardSettings="DashboardSettings",e.debugButton="DebugButton",e.denseCard="DenseCard",e.desktopFeed="DesktopFeed",e.desktopFeedHubWC="DesktopFeedHubWC",e.desktopFeedViewsWC="DesktopFeedViewsWC",e.desktopFeedWC="DesktopFeedWC",e.devTools="DevTools",e.didYouKnowImageWCExperience="DidYouKnowImageWCExperience",e.didYouKnowWCExperience="DidYouKnowWCExperience",e.digestCard="DigestCard",e.displayAds="DisplayAds",e.displayAdsWC="DisplayAdsWC",e.displayAdsWithContentFallback="DisplayAdsWithContentFallback",e.distributionFeed="DistributionFeed",e.distributionHeader="DistributionHeader",e.distributionPage="DistributionPage",e.distributionPivotsNav="DistributionPivotsNav",e.donationNpoCard="DonationNpoCard",e.edgeChromiumPageWC="EdgeChromiumPageWC",e.edgeHeader="EdgeHeader",e.edgeNextPage="EdgeNextPage",e.edgePage="EdgePage",e.edgePageSettings="PageSettings",e.edgeShopping="EdgeShopping",e.editorsChoicePromoCard="EditorsChoicePromoCard",e.electionCard="ElectionCard",e.elections="Elections",e.emmxEntrypoint="EmmxEntrypoint",e.enterpriseComplianceBanner="EnterpriseComplianceBanner",e.entertainmentCard="EntertainmentCard",e.entertainmentPremierCard="EntertainmentPremierCard",e.entertainmentPremieresCard="EntertainmentPremieresCard",e.entryPoint="EntryPoint",e.entryPointEdgeNext="EntryPointEdgeNext",e.entryPointHpMobile="EntryPointHpMobile",e.entryPointHpWC="EntryPointHpWC",e.entryPointMobileHub="EntryPointMobileHub",e.entryPointViewsWC="EntryPointViewsWC",e.eoabViews="EoabViews",e.eoabViewsAutos="EoabViewsAutos",e.eoabViewsFinance="EoabViewsFinance",e.eoabViewsShopping="EoabViewsShopping",e.eoabViewsTravel="EoabViewsTravel",e.esportsCard="EsportsCard",e.esportsCasualGamesCard="EsportsCasualGamesCard",e.esportsLiveStreamCard="EsportsLiveStreamCard",e.esportsLivestreamCarouselWC="EsportsLivestreamCarouselWC",e.esportsStreamsCard="EsportsStreamsCard",e.eventHubFollowHeader="EventHubFollowHeader",e.eventHubHeroNav="EventHubHeroNav",e.eventHubPage="EventHubPage",e.exampleOfferCard="ExampleOfferCard",e.experiencePreviewCta="ExperiencePreviewCta",e.externalContentPreview="ExternalContentPreview",e.externalNativeAd="ExternalNativeAd",e.familyCard="FamilyCard",e.feedContainer="FeedContainer",e.feedLevelFeedbackWC="FeedLevelFeedbackWC",e.feedNavigationHp="FeedNavigationHp",e.feedToggle="FeedToggle",e.feedbackCard="FeedbackCard",e.feedbackDialog="FeedbackDialog",e.feedbackDialogWC="FeedbackDialogWC",e.feedbackLink="FeedbackLink",e.feedbackLinkWC="FeedbackLinkWC",e.financeAdvancedChart="FinanceAdvancedChart",e.financeAnalysisPage="FinanceAnalysisPage",e.financeAnalystRatingCard="FinanceAnalystRatingCard",e.financeAskLandingPage="FinanceAskLandingPage",e.financeBingAds="FinanceBingAds",e.financeCardCommon="FinanceCardCommon",e.financeCarousel="FinanceCarousel",e.financeChartPage="FinanceChartPage",e.financeCollectionDetailTable="FinanceCollectionDetailTable",e.financeCollectionPerformanceCard="FinanceCollectionPerformanceCard",e.financeCombinationCard="FinanceCombinationCard",e.financeCompanyPage="FinanceCompanyPage",e.financeCompanyProfileCard="FinanceCompanyProfileCard",e.financeCompareAdd="FinanceCompareAdd",e.financeCompareChartView="FinanceCompareChartView",e.financeCompareHeader="FinanceCompareHeader",e.financeComparePage="FinanceComparePage",e.financeCompareTable="FinanceCompareTable",e.financeCompositionTemplate="FinanceCompositionTemplate",e.financeCrashCourseFeed="FinanceCrashCourseFeed",e.financeCrashCourseViewer="FinanceCrashCourseViewer",e.financeCryptoInsights="FinanceCryptoInsights",e.financeCryptoLearnCard="FinanceCryptoLearnCard",e.financeCryptoMarketHighlight="FinanceCryptoMarketHighlight",e.financeCryptoQnA="FinanceCryptoQnA",e.financeCryptoTable="FinanceCryptoTable",e.financeCurrencyConverter="FinanceCurrencyConverter",e.financeDetailComposition="FinanceDetailComposition",e.financeDetailHeader="FinanceDetailHeader",e.financeDetailNavigation="FinanceDetailNavigation",e.financeDetailPageV2="FinanceDetailPageV2",e.financeDetailsCard="FinanceDetailsCard",e.financeDetailsCardV2="FinanceDetailsCardV2",e.financeDianomiAds="FinanceDianomiAds",e.financeDiscoverySection="FinanceDiscoverySection",e.financeEarningChart="FinanceEarningChart",e.financeEarningGameCard="FinanceEarningGameCard",e.financeEarningsCalendarCard="FinanceEarningsCalendarCard",e.financeEarningsCard="FinanceEarningsCard",e.financeEarningsEventCard="FinanceEarningsEventCard",e.financeEarningsForecast="FinanceEarningsForecast",e.financeEarningsReport="FinanceEarningsReport",e.financeEconomicCalendar="FinanceEconomicCalendar",e.financeEconomicIndicator="FinanceEconomicIndicator",e.financeEtfInvestors="FinanceEtfInvestors",e.financeEtfL3Holdings="FinanceEtfL3Holdings",e.financeEtfProfile="FinanceEtfProfile",e.financeEventBrief="FinanceEventBrief",e.financeEventLandingPage="FinanceEventLandingPage",e.financeEventsCalendarCard="FinanceEventsCalendarCard",e.financeEventsComposition="FinanceEventsComposition",e.financeEventsTimeline="FinanceEventsTimeline",e.financeExploreCenter="FinanceExploreCenter",e.financeFeeds="FinanceFeeds",e.financeFeedsSection="FinanceFeedsSection",e.financeFinancialsCard="FinanceFinancialsCard",e.financeFinancialsChartCard="FinanceFinancialsChartCard",e.financeFinancialsKeyratiosComposition="FinanceFinancialsKeyratiosComposition",e.financeFinancialsLineChart="FinanceFinancialsLineChart",e.financeFollowButton="FinanceFollowButton",e.financeFundCard="FinanceFundCard",e.financeFundCardWrapper="FinanceFundCardWrapper",e.financeGamificationCard="FinanceGamificationCard",e.financeGradeChart="FinanceGradeChart",e.financeIndicesCard="FinanceIndicesCard",e.financeInsiderTrades="FinanceInsiderTrades",e.financeInsights="FinanceInsights",e.financeInvestorBioCard="FinanceInvestorBioCard",e.financeInvestorDetailPage="FinanceInvestorDetailPage",e.financeInvestorHoldingsHighlight="FinanceInvestorHoldingsHighlight",e.financeInvestorHoldingsTable="FinanceInvestorHoldingsTable",e.financeInvestorNavigationRail="FinanceInvestorNavigationRail",e.financeInvestorPerformanceCard="FinanceInvestorPerformanceCard",e.financeInvestorPerformanceGraph="FinanceInvestorPerformanceGraph",e.financeInvestorPortfolioSectors="FinanceInvestorPortfolioSectors",e.financeInvestorProfileHeader="FinanceInvestorProfileHeader",e.financeKeyFactsCard="FinanceKeyFactsCard",e.financeL1TopStories="FinanceL1TopStories",e.financeL2NewsCard="FinanceL2NewsCard",e.financeL3FinancialsNavigation="FinanceL3FinancialsNavigation",e.financeL3HistoryTab="FinanceL3HistoryTab",e.financeL3OptionsPage="FinanceL3OptionsPage",e.financeL3OwnershipBasic="FinanceL3OwnershipBasic",e.financeL3OwnershipEventsList="FinanceL3OwnershipEventsList",e.financeL3OwnershipGraph="FinanceL3OwnershipGraph",e.financeL3OwnershipHoldersTable="FinanceL3OwnershipHoldersTable",e.financeL3PageComposition="FinanceL3PageComposition",e.financeL3RelatedPage="FinanceL3RelatedPage",e.financeL4IncomeStatementTable="FinanceL4IncomeStatementTable",e.financeL4KeyRatiosTable="FinanceL4KeyRatiosTable",e.financeL4PageComposition="FinanceL4PageComposition",e.financeLandingPageV2="FinanceLandingPageV2",e.financeLearnPage="FinanceLearnPage",e.financeListDetailHeader="FinanceListDetailHeader",e.financeListDetailPage="FinanceListDetailPage",e.financeListLandingPage="FinanceListLandingPage",e.financeMarketCard="FinanceMarketCard",e.financeMarketDescription="FinanceMarketDescription",e.financeMarketMoversCard="FinanceMarketMoversCard",e.financeMarketStatus="FinanceMarketStatus",e.financeMarketSummaryTrend="FinanceMarketSummaryTrend",e.financeMarketsPageComposition="FinanceMarketsPageComposition",e.financeMergeWatchlist="FinanceMergeWatchlist",e.financeMiddleLayer="FinanceMiddleLayer",e.financeNewInvestorQuickStarter="FinanceNewInvestorQuickStarter",e.financeNewsCard="FinanceNewsCard",e.financeNewsContent="FinanceNewsContent",e.financeNewsLandingpage="FinanceNewsLandingpage",e.financeNotificationBar="FinanceNotificationBar",e.financePerfRankCard="FinancePerfRankCard",e.financePortfolioList="FinancePortfolioList",e.financeProjectionPromoteCard="FinanceProjectionPromoteCard",e.financePwaTip="FinancePwaTip",e.financeRecentlyViewedCard="FinanceRecentlyViewedCard",e.financeRecommendationCard="FinanceRecommendationCard",e.financeRecommendationCardV2="FinanceRecommendationCardV2",e.financeRedLine="FinanceRedLine",e.financeRelatedEarnings="FinanceRelatedEarnings",e.financeReturnCalculator="FinanceReturnCalculator",e.financeScreener="FinanceScreener",e.financeSearchBox="FinanceSearchBox",e.financeSectionEarningsCard="FinanceSectionEarningsCard",e.financeSectionHealthCard="FinanceSectionHealthCard",e.financeSectionInvestorsCard="FinanceSectionInvestorsCard",e.financeSectionPerformanceCard="FinanceSectionPerformanceCard",e.financeSectionTopstoriesCard="FinanceSectionTopstoriesCard",e.financeSectionValuationCard="FinanceSectionValuationCard",e.financeSentimentChart="FinanceSentimentChart",e.financeSentimentWizard="FinanceSentimentWizard",e.financeStockDueDiligence="FinanceStockDueDiligence",e.financeStockL2="FinanceStockL2",e.financeStockL2Navigation="FinanceStockL2Navigation",e.financeTitleCard="FinanceTitleCard",e.financeTopRated="FinanceTopRated",e.financeTrendCard="FinanceTrendCard",e.financeTrendingRelated="FinanceTrendingRelated",e.financeUserNavigation="FinanceUserNavigation",e.financeVideosFeed="FinanceVideosFeed",e.financeWalkthrough="FinanceWalkthrough",e.financeWatchlistCard="FinanceWatchlistCard",e.financeWatchlistListView="FinanceWatchlistListView",e.financeWatchlistManagement="FinanceWatchlistManagement",e.financeWatchlistMiniView="FinanceWatchlistMiniView",e.financeWatchlistPage="FinanceWatchlistPage",e.financeWatchlistPageV2="FinanceWatchlistPageV2",e.financeWatchlistStart="FinanceWatchlistStart",e.financeWatchlistSuggestion="FinanceWatchlistSuggestion",e.financeWatchlistSummary="FinanceWatchlistSummary",e.firstPartyPage="FirstPartyPage",e.fitnessCard="FitnessCard",e.fitnessSingleVideo="FitnessSingleVideo",e.fitnessSingleVideoHealthapp="FitnessSingleVideoHealthapp",e.floatButtonGroupWC="FloatButtonGroupWC",e.flyoutCard="FlyoutCard",e.followingFreConfirmation="FollowingFreConfirmation",e.followingFreFullWidth="FollowingFreFullWidth",e.foodSimilarItems="FoodSimilarItems",e.forumDealsPage="ForumDealsPage",e.freMarketSelector="FreMarketSelector",e.frequentSitesCardWC="FrequentSitesCardWC",e.galleryPage="GalleryPage",e.gameCard="GameCard",e.gamingChannel="GamingChannel",e.gamingCompeteCard="GamingCompeteCard",e.gamingDiscoverStrip="GamingDiscoverStrip",e.gamingGamerModeUpsellCard="GamingGamerModeUpsellCard",e.gamingInterestGroupCard="GamingInterestGroupCard",e.gamingMatchCard="GamingMatchCard",e.gamingMediaCarousel="GamingMediaCarousel",e.gamingPage="GamingPage",e.gamingPersonalizationCard="GamingPersonalizationCard",e.gamingRecentlyPlayedCard="GamingRecentlyPlayedCard",e.gamingRecommendedCard="GamingRecommendedCard",e.gamingRedditCard="GamingRedditCard",e.gamingRewardsCard="GamingRewardsCard",e.gamingStreamCard="GamingStreamCard",e.gamingTournamentCard="GamingTournamentCard",e.gamingUpcomingCard="GamingUpcomingCard",e.gamingVideoCard="GamingVideoCard",e.generalElections="GeneralElections",e.gmailEmailPreview="GmailEmailPreview",e.gridViewFeed="GridViewFeed",e.groceryCouponSdCard="GroceryCouponSdCard",e.headerMenuWindowsShell="HeaderMenuWindowsShell",e.headerNavigationLogo="HeaderNavigationLogo",e.headerUpsellWindowsShell="HeaderUpsellWindowsShell",e.headerWindowsShellV2="HeaderWindowsShellV2",e.headerWindowsShellWC="HeaderWindowsShellWC",e.healthArticlesCardWC="HealthArticlesCardWC",e.healthAugmentCard="HealthAugmentCard",e.healthDietPlanScheduleWC="HealthDietPlanScheduleWC",e.healthDietPlansPage="HealthDietPlansPage",e.healthExpertCommunity="HealthExpertCommunity",e.healthExpertCreation="HealthExpertCreation",e.healthExpertTermsConditions="HealthExpertTermsConditions",e.healthFeedbackWC="HealthFeedbackWC",e.healthFitnessCarousel="HealthFitnessCarousel",e.healthFitnessChallengePage="HealthFitnessChallengePage",e.healthFoodAtoz="HealthFoodAtoz",e.healthFoodHealtheffectsWC="HealthFoodHealtheffectsWC",e.healthFoodRecipesWC="HealthFoodRecipesWC",e.healthHub="HealthHub",e.healthHubAskProfessionals="HealthHubAskProfessionals",e.healthHubCondition="HealthHubCondition",e.healthHubDiagnostics="HealthHubDiagnostics",e.healthHubDrugs="HealthHubDrugs",e.healthHubHealthapp="HealthHubHealthapp",e.healthHubHealthappShell="HealthHubHealthappShell",e.healthHubPage="HealthHubPage",e.healthHubProcedures="HealthHubProcedures",e.healthHubSymptoms="HealthHubSymptoms",e.healthInterestsManager="HealthInterestsManager",e.healthInterestsManagerShell="HealthInterestsManagerShell",e.healthQnAWCExperience="HealthQnAWCExperience",e.healthRiverWC="HealthRiverWC",e.healthTipReact="HealthTipReact",e.healthTipWC="HealthTipWC",e.healthTopSpan="HealthTopSpan",e.healthTopicFlyout="HealthTopicFlyout",e.healthTopicFlyoutShell="HealthTopicFlyoutShell",e.healthTranslationWC="HealthTranslationWC",e.healthWidget="HealthWidget",e.heroContainerWC="HeroContainerWC",e.hiddenContent="HiddenContent",e.holidayEffects="HolidayEffects",e.homePage="HomePage",e.homepageFooter="HomepageFooter",e.homepageHeader="HomepageHeader",e.horoscopeAnswerCard="HoroscopeAnswerCard",e.horoscopeAnswerCardWC="HoroscopeAnswerCardWC",e.horoscopeCard="HoroscopeCard",e.hotListCard="HotListCard",e.iframe="IFrame",e.imageSearch="ImageSearch",e.imageSearchWC="ImageSearchWC",e.immersiveFullscreen="ImmersiveFullscreen",e.industryNewsCard="IndustryNewsCard",e.infopane="Infopane",e.inspirationCard="InspirationCard",e.interestFreCard="InterestFreCard",e.interestManagementCard="InterestManagementCard",e.interests="Interests",e.interestsLeftRail="InterestsLeftRail",e.interestsManager="InterestsManager",e.interestsSearch="InterestsSearch",e.interestsV1Wrapper="InterestsV1Wrapper",e.interestsV2="InterestsV2",e.interestsV3="InterestsV3",e.interestsWC="InterestsWC",e.issueReportingWC="IssueReportingWC",e.languageToggle="LanguageToggle",e.languageToggleWC="LanguageToggleWC",e.layoutSwitcher="LayoutSwitcher",e.learningNasaCard="LearningNasaCard",e.learningTriviaCard="LearningTriviaCard",e.legacySharingToolbar="LegacySharingToolbar",e.linkedInCard="LinkedInCard",e.linkedInNewsCard="LinkedInNewsCard",e.localGuideCard="LocalGuideCard",e.localHubHeader="LocalHubHeader",e.localNews="LocalNews",e.localNewsViewCard="LocalNewsViewCard",e.localizeStringsTempExperience="LocalizeStringsTempExperience",e.locationContentCard="LocationContentCard",e.locationEditorDialog="LocationEditorDialog",e.locationMarker="LocationMarker",e.locationSelector="LocationSelector",e.locationTime="LocationTime",e.lottery="Lottery",e.mailSignoutBanner="MailSignoutBanner",e.mangaCard="MangaCard",e.mangaHub="MangaHub",e.mangaPage="MangaPage",e.mangaSlideShow="MangaSlideShow",e.marketAggregator="MarketAggregator",e.marketLanguageToggleWC="MarketLanguageToggleWC",e.marketSelector="MarketSelector",e.marketplaceCardWC="MarketplaceCardWC",e.meControl="MeControl",e.meControlWC="MeControlWC",e.meStripe="MeStripe",e.meStripeWC="MeStripeWC",e.mediaServices="MediaServices",e.meetNow="MeetNow",e.microsoftEdgeWidget="MicrosoftEdgeWidget",e.microsoftFeedCard="MicrosoftFeedCard",e.microsoftLogo="MicrosoftLogo",e.microsoftNewsPage="MicrosoftNewsPage",e.migrationConsent="MigrationConsent",e.miniHeader="MiniHeader",e.mmxPage="MMXPage",e.mns="Mns",e.mnsCreatorDashboard="MnsCreatorDashboard",e.mobileAppUpsell="MobileAppUpsell",e.mobileChannelSlider="MobileChannelSlider",e.mobileConsumptionPage="MobileConsumptionPage",e.mobileFeed="MobileFeed",e.mobileFeedHub="MobileFeedHub",e.mobileFeedWC="MobileFeedWC",e.mobileFooter="MobileFooter",e.mobileHeader="MobileHeader",e.mobileMarketSelector="MobileMarketSelector",e.mobileNotification="MobileNotification",e.mobilePopupWindow="MobilePopupWindow",e.mobileRewardsCard="MobileRewardsCard",e.mobileShoppingCard="MobileShoppingCard",e.mobileStoryViewer="MobileStoryViewer",e.mobileTip="MobileTip",e.mobileTrendingSearchCard="MobileTrendingSearchCard",e.mobileWidget="MobileWidget",e.modernRightRail="ModernRightRail",e.moneyAugmentCard="MoneyAugmentCard",e.moneyCard="MoneyCard",e.moneyCopilotWC="MoneyCopilotWC",e.moneyInfo="MoneyInfo",e.moneyInfoCard="MoneyInfoCard",e.moneyInfoCardWC="MoneyInfoCardWC",e.moneyInfoSpan="MoneyInfoSpan",e.msRewards="MsRewards",e.msRewardsWC="MsRewardsWC",e.msaAddressForm="MsaAddressForm",e.msnSettingMenu="MsnSettingMenu",e.myBriefRiverCard="MyBriefRiverCard",e.nativeAd="NativeAd",e.nativeAdWC="NativeAdWC",e.nativeTopAd="NativeTopAd",e.navigationPageExperience="NavigationPageExperience",e.nearbyCard="NearbyCard",e.newsFlipperCard="NewsFlipperCard",e.newsGroupsCard="NewsGroupsCard",e.newsGuard="NewsGuard",e.newsHeadlineBelowSearchbox="NewsHeadlineBelowSearchbox",e.newsSegmentCarousel="NewsSegmentCarousel",e.newsbarFeedFooter="NewsbarFeedFooter",e.newsbarFeedWC="NewsbarFeedWC",e.newsbarUpsell="NewsbarUpsell",e.newsbarUpsellWC="NewsbarUpsellWC",e.newsletterSignup="NewsletterSignup",e.newsletterSignupPage="NewsletterSignupPage",e.nextdoorCard="NextdoorCard",e.nextdoorPage="NextdoorPage",e.notificationBell="NotificationBell",e.notificationBellWC="NotificationBellWC",e.notificationMiniCard="NotificationMiniCard",e.nudgeSpotlightCard="NudgeSpotlightCard",e.nurturingBanner="NurturingBanner",e.nurturingCoachMark="NurturingCoachMark",e.office="Office",e.officeCoachmark="OfficeCoachmark",e.officeDocumentsTableWC="OfficeDocumentsTableWC",e.officeLeftRail="OfficeLeftRail",e.onThisDayCard="OnThisDayCard",e.onThisDayCardSmall="OnThisDayCardSmall",e.onThisDayCardWC="OnThisDayCardWC",e.oneFooter="OneFooter",e.overlay="Overlay",e.overlayWC="OverlayWC",e.pageRefresh="PageRefresh",e.pageRefreshWC="PageRefreshWC",e.panoPage="PanoPage",e.partnerUpsellCard="PartnerUpsellCard",e.partnerWidget="PartnerWidget",e.peregrineDocs="PeregrineDocs",e.personalFinanceExpenseDistribution="PersonalFinanceExpenseDistribution",e.personalFinanceTransactionsCard="PersonalFinanceTransactionsCard",e.personalizeNavButton="PersonalizeNavButton",e.photoCard="PhotoCard",e.pillWC="PillWC",e.pivotContent="PivotContent",e.pivotContentV2="PivotContentV2",e.pivotsMobileWC="PivotsMobileWC",e.pivotsNav="PivotsNav",e.pollsCard="PollsCard",e.pollsCardWC="PollsCardWC",e.portugueseElectionExperience="PortugueseElectionExperience",e.poweredByLegend="PoweredbyLegend",e.poweredByLegendWC="PoweredbyLegendWC",e.prayerTimesCard="PrayerTimesCard",e.premiumProfilePromoCard="PremiumProfilePromoCard",e.prideEventCard="PrideEventCard",e.prismCards="PrismCards",e.prismCarouselCard="PrismCarouselCard",e.prismFeed="PrismFeed",e.prismSdCard="PrismSdCard",e.proactiveCanvas="ProactiveCanvas",e.productivityHub="ProductivityHub",e.profileArticles="ProfileArticles",e.profilePromoCard="ProfilePromoCard",e.promoBanner="PromoBanner",e.promotedAdWC="PromotedAdWC",e.publisherCarousel="PublisherCarousel",e.publisherList="PublisherList",e.publisherSubscribeFollowButton="PublisherSubscribeFollowButton",e.publishersManagement="PublishersManagement",e.pullToRefresh="PullToRefresh",e.pulseEdgenext="PulseEdgenext",e.qna="Qna",e.qnaFeed404Page="QnaFeed404Page",e.qnaFeedCard="QnaFeedCard",e.qnaFeedCardMenu="QnaFeedCardMenu",e.qnaFeedCarousel="QnaFeedCarousel",e.qnaFeedCategoriesMenu="QnaFeedCategoriesMenu",e.qnaFeedExploreTopics="QnaFeedExploreTopics",e.qnaFeedList="QnaFeedList",e.qnaFeedMyTopics="QnaFeedMyTopics",e.qnaFeedPage="QnaFeedPage",e.qnaFeedRelatedQuestions="QnaFeedRelatedQuestions",e.qnaFeedReportCard="QnaFeedReportCard",e.qnaFeedSuggestedTopics="QnaFeedSuggestedTopics",e.qnaFeedTopicDetail="QnaFeedTopicDetail",e.qnaFeedTrendingQuestions="QnaFeedTrendingQuestions",e.quizCard="QuizCard",e.reactionBreakdownDialog="ReactionBreakdownDialog",e.realEstateCard="RealEstateCard",e.recipesCards="RecipesCards",e.recipesFeed="RecipesFeed",e.recipesSdCard="RecipesSdCard",e.recipesSearch="RecipesSearch",e.recipesSingleDetail="RecipesSingleDetail",e.recipesSingleVideo="RecipesSingleVideo",e.recommendedInterests="RecommendedInterests",e.recommendedSearch="RecommendedSearch",e.recommendedSearchBelowSearchBox="RecommendedSearchBelowSearchBox",e.recommendedSearchCarousel="RecommendedSearchCarousel",e.recommendedSearchCarouselWC="RecommendedSearchCarouselWC",e.recommendedSearchesCard="RecommendedSearchesCard",e.recommendedSites="RecommendedSites",e.recommendedSitesWC="RecommendedSitesWC",e.recommendedTopics="RecommendedTopics",e.relatedSearchSpan="RelatedSearchSpan",e.relatedSearchesCard="RelatedSearchesCard",e.rewardsCardWC="RewardsCardWC",e.rewardsDailyCheckinCard="RewardsDailyCheckinCard",e.rewardsDailySetCard="RewardsDailySetCard",e.richCalendarCard="RichCalendarCard",e.richCalendarLandingPage="RichCalendarLandingPage",e.richCalendarWindowsShell="RichCalendarWindowsShell",e.rightRailCarousel="RightRailCarousel",e.rightRailProviderCarousel="RightRailProviderCarousel",e.river="River",e.riverPlaceholder="RiverPlaceholder",e.scrollDownButton="ScrollDownButton",e.sdCardMaskWC="SdCardMaskWC",e.searchBoxCommon="SearchBoxCommon",e.searchBoxEdge="SearchBoxEdge",e.searchBoxWC="SearchBoxWC",e.searchHistoryCommon="SearchHistoryCommon",e.searchHistoryEdge="SearchHistoryEdge",e.searchHistoryEdgeNextWC="SearchHistoryEdgeNextWC",e.seeMoreButtonWindowsShell="SeeMoreButtonWindowsShell",e.selectCarousel="SelectCarousel",e.settingsDialogMsNews="SettingsDialogMsNews",e.sharedHeroNewsCard="SharedHeroNewsCard",e.sharedLinks="SharedLinks",e.sharedState="SharedState",e.sharedStrings="SharedStrings",e.sharepointNewsCard="SharepointNewsCard",e.shopContentCarousel="ShopContentCarousel",e.shoppingAllStoresPage="ShoppingAllStoresPage",e.shoppingArticlePage="ShoppingArticlePage",e.shoppingAugmentCard="ShoppingAugmentCard",e.shoppingBWMCard="ShoppingBWMCard",e.shoppingBWMCarousel="ShoppingBWMCarousel",e.shoppingBingProductDetails="ShoppingBingProductDetails",e.shoppingBlackjackDealPage="ShoppingBlackjackDealPage",e.shoppingBlackjackPage="ShoppingBlackjackPage",e.shoppingBuyingGuide="ShoppingBuyingGuide",e.shoppingBuyingGuidePremiumCard="ShoppingBuyingGuidePremiumCard",e.shoppingBuyingGuidesCard="ShoppingBuyingGuidesCard",e.shoppingCardWC="ShoppingCardWC",e.shoppingCarousel="ShoppingCarousel",e.shoppingCarouselProngWC="ShoppingCarouselProngWC",e.shoppingCarouselWC="ShoppingCarouselWC",e.shoppingCart="ShoppingCart",e.shoppingCashback="ShoppingCashback",e.shoppingCheckoutModal="ShoppingCheckoutModal",e.shoppingCheckoutPage="ShoppingCheckoutPage",e.shoppingColdStart="ShoppingColdStart",e.shoppingContentCard="ShoppingContentCard",e.shoppingCouponsPage="ShoppingCouponsPage",e.shoppingDealsHomePage="ShoppingDealsHomePage",e.shoppingDebugPage="ShoppingDebugPage",e.shoppingEdgeInsightsCard="ShoppingEdgeInsightsCard",e.shoppingEntryBaseExperience="ShoppingEntryBaseExperience",e.shoppingEventsDealCard="ShoppingEventsDealCard",e.shoppingFashionCarouselWC="ShoppingFashionCarouselWC",e.shoppingFeedCard="ShoppingFeedCard",e.shoppingForumFavorites="ShoppingForumFavorites",e.shoppingForumHome="ShoppingForumHome",e.shoppingForumLandingPage="ShoppingForumLandingPage",e.shoppingForumOrderCancelPage="ShoppingForumOrderCancelPage",e.shoppingForumOrderConfirmation="ShoppingForumOrderConfirmation",e.shoppingForumOrderDetails="ShoppingForumOrderDetails",e.shoppingForumOrdersPage="ShoppingForumOrdersPage",e.shoppingForumProductPage="ShoppingForumProductPage",e.shoppingForumRefundDetailsPage="ShoppingForumRefundDetailsPage",e.shoppingForumRefundOrderPage="ShoppingForumRefundOrderPage",e.shoppingForumReturnDetailsPage="ShoppingForumReturnDetailsPage",e.shoppingForumReturnOrderPage="ShoppingForumReturnOrderPage",e.shoppingForumSellerPage="ShoppingForumSellerPage",e.shoppingGrid="ShoppingGrid",e.shoppingGroupedCarousel="ShoppingGroupedCarousel",e.shoppingGuidesPage="ShoppingGuidesPage",e.shoppingHomepage="ShoppingHomepage",e.shoppingInspiration="ShoppingInspiration",e.shoppingLeaderboard="ShoppingLeaderboard",e.shoppingLiveEmbedPage="ShoppingLiveEmbedPage",e.shoppingLiveFeedPage="ShoppingLiveFeedPage",e.shoppingLiveProductDetailsPage="ShoppingLiveProductDetailsPage",e.shoppingModal="ShoppingModal",e.shoppingModelOverlay="ShoppingModelOverlay",e.shoppingMomentInTimePage="ShoppingMomentInTimePage",e.shoppingMultiTabCarousel="ShoppingMultiTabCarousel",e.shoppingPage="ShoppingPage",e.shoppingPageBase="ShoppingPageBase",e.shoppingPageContent="ShoppingPageContent",e.shoppingPivotFeed="ShoppingPivotFeed",e.shoppingProductDetailPage="ShoppingProductDetailPage",e.shoppingProductPage="ShoppingProductPage",e.shoppingRiverCard="ShoppingRiverCard",e.shoppingSdCard="ShoppingSdCard",e.shoppingSearch="ShoppingSearch",e.shoppingSearchNav="ShoppingSearchNav",e.shoppingSearchResultPage="ShoppingSearchResultPage",e.shoppingShippingAddress="ShoppingShippingAddress",e.shoppingShopTheLookPage="ShoppingShopTheLookPage",e.shoppingSmartList="ShoppingSmartList",e.shoppingSpinWheel="ShoppingSpinWheel",e.shoppingTopSpan="ShoppingTopSpan",e.shoppingVerticalListsCard="ShoppingVerticalListsCard",e.shoppingVideoShortsCarousel="ShoppingVideoShortsCarousel",e.shoppingViewsCarousel="ShoppingViewsCarousel",e.shorelineArticleFeed="ShorelineArticleFeed",e.showFeed="ShowFeed",e.signInControlWC="SignInControlWC",e.signInFlyoutWC="SignInFlyoutWC",e.signalOverlay="SignalOverlay",e.simpleBanner="SimpleBanner",e.slideShow="SlideShow",e.slideshowWC="SlideshowWC",e.smartList="SmartList",e.social="Social",e.socialAvatar="SocialAvatar",e.socialBar="SocialBar",e.socialBarV2="SocialBarV2",e.socialBarWC="SocialBarWC",e.socialComment="SocialComment",e.socialCommentBox="SocialCommentBox",e.socialCommentWC="SocialCommentWC",e.socialEditorData="SocialEditorData",e.socialEntrypoint="SocialEntrypoint",e.socialGiveSupportButton="SocialGiveSupportButton",e.socialLeadGenInArticle="SocialLeadGenInArticle",e.socialNotification="SocialNotification",e.socialPost="SocialPost",e.socialPostCard="SocialPostCard",e.socialPostEditorWC="SocialPostEditorWC",e.socialProfile="SocialProfile",e.socialProfileActionMenu="SocialProfileActionMenu",e.socialProfileAppeal="SocialProfileAppeal",e.socialProfileCard="SocialProfileCard",e.socialProfilePromo="SocialProfilePromotion",e.socialProfileRejectionDetails="SocialProfileRejectionDetails",e.socialProfileTopics="SocialProfileTopics",e.socialRelatedSources="SocialRelatedSources",e.socialReportMenu="SocialReportMenu",e.socialRewardsMedal="SocialRewardsMedal",e.socialRewardsPromotion="SocialRewardsPromotion",e.socialShareButton="SocialShareButton",e.socialStarRating="SocialStarRating",e.socialSubscriptionBanner="SocialSubscriptionBanner",e.socialSubscriptionNotification="SocialSubscriptionNotification",e.socialSubscriptionOverlay="SocialSubscriptionOverlay",e.socialSubscriptionOverlaySummary="SocialSubscriptionOverlaySummary",e.socialSubscriptionPaywall="SocialSubscriptionPaywall",e.socialSubscriptionUpsell="SocialSubscriptionUpsell",e.socialSupportResult="SocialSupportResult",e.socialTipHistory="SocialTipHistory",e.socialTipIntroduction="SocialTipIntroduction",e.socialTipPromotion="SocialTipPromotion",e.socialTipPromotionInArticle="SocialTipPromotionInArticle",e.socialTipSelection="SocialTipSelection",e.sportsAroundTheLeague="SportsAroundTheLeague",e.sportsAugmentCard="SportsAugmentCard",e.sportsBackgroundUx="SportsBackgroundUx",e.sportsBrackets="SportsBrackets",e.sportsCard="SportsCard",e.sportsCardWC="SportsCardWC",e.sportsCommentary="SportsCommentary",e.sportsCountdownTimer="SportsCountdownTimer",e.sportsCricketLayoutManager="SportsCricketLayoutManager",e.sportsCricketLeagueStats="SportsCricketLeagueStats",e.sportsCricketMatchRow="SportsCricketMatchRow",e.sportsCricketPartnerships="SportsCricketPartnerships",e.sportsCricketRankings="SportsCricketRankings",e.sportsCricketScorecard="SportsCricketScorecard",e.sportsCricketScoresAndSchedule="SportsCricketScoresAndSchedule",e.sportsEntityHeader="SportsEntityHeader",e.sportsFeaturedMatchesCard="SportsFeaturedMatchesCard",e.sportsFrePanel="SportsFrePanel",e.sportsFullStandings="SportsFullStandings",e.sportsFullStats="SportsFullStats",e.sportsGameInformation="SportsGameInformation",e.sportsGameScore="SportsGameScore",e.sportsGameSummary="SportsGameSummary",e.sportsGameSummaryFull="SportsGameSummaryFull",e.sportsGameTimeline="SportsGameTimeline",e.sportsGcPlayerStats="SportsGcPlayerStats",e.sportsGcTeamStats="SportsGcTeamStats",e.sportsGptAnalysis="SportsGptAnalysis",e.sportsHeadlinesFull="SportsHeadlinesFull",e.sportsHeadlinesHeader="SportsHeadlinesHeader",e.sportsHeadlinesMainStory="SportsHeadlinesMainStory",e.sportsHeadlinesStoryCarousel="SportsHeadlinesStoryCarousel",e.sportsHeadlinesTimelines="SportsHeadlinesTimelines",e.sportsInfo="SportsInfo";e.sportsInfoSpan="SportsInfoSpan",e.sportsInfoUtils="SportsInfoUtils",e.sportsLayoutRenderer="SportsLayoutRenderer",e.sportsMatchRow="SportsMatchRow",e.sportsMatchupCard="SportsMatchupCard",e.sportsMedalCountList="SportsMedalCountList",e.sportsMobileTabPanel="SportsMobileTabPanel",e.sportsOlympicCard="SportsOlympicCard",e.sportsOlympicCardWC="SportsOlympicCardWC",e.sportsOlympicsScheduleFull="SportsOlympicsScheduleFull",e.sportsPage="SportsPage",e.sportsPageContent="SportsPageContent",e.sportsPersonMatchRow="SportsPersonMatchRow",e.sportsPersonalizationStrip="SportsPersonalizationStrip",e.sportsPinLiveMatch="SportsPinLiveMatch",e.sportsPlayerBio="SportsPlayerBio",e.sportsPlayerInsights="SportsPlayerInsights",e.sportsPreviousMatchups="SportsPreviousMatchups",e.sportsPromoCard="SportsPromoCard",e.sportsRankingsFull="SportsRankingsFull",e.sportsRetentionFull="SportsRetentionFull",e.sportsScoresAndSchedule="SportsScoresAndSchedule",e.sportsScoresAndScheduleFull="SportsScoresAndScheduleFull",e.sportsSquad="SportsSquad",e.sportsStandings="SportsStandings",e.sportsStandingsList="SportsStandingsList",e.sportsStatLeaders="SportsStatLeaders",e.sportsStats="SportsStats",e.sportsTabLayout="SportsTabLayout",e.sportsTeamFormation="SportsTeamFormation",e.sportsTeamProbability="SportsTeamProbability",e.sportsTennisScoresAndScheduleFull="SportsTennisScoresAndScheduleFull",e.sportsTennisTournamentInfo="SportsTennisTournamentInfo",e.sportsTournamentInfo="SportsTournamentInfo",e.sportsTournamentLeaderboard="SportsTournamentLeaderboard",e.sportsTournamentMatchRow="SportsTournamentMatchRow",e.sportsTournamentResultsAndSchedule="SportsTournamentResultsAndSchedule",e.sportsTournamentSchedule="SportsTournamentSchedule",e.sportsTournamentStandings="SportsTournamentStandings",e.sportsUnavailablePlayers="SportsUnavailablePlayers",e.sportsVideoList="SportsVideoList",e.sportsWorldCupCard="SportsWorldCupCard",e.sportsWorldCupCardWC="SportsWorldCupCardWC",e.spotlightCard="SpotlightCard",e.spotlightCardWC="SpotlightCardWC",e.starterKit="StarterKit",e.starterKitWC="StarterKitWC",e.stickyPeek="StickyPeek",e.storyCarousel="StoryCarousel",e.storyPage="StoryPage",e.streaksBadgeWC="StreaksBadgeWC",e.stripe="Stripe",e.stripeFeed="StripeFeed",e.stripeView="StripeView",e.stripeWC="StripeWC",e.suggestedChannelPrompt="SuggestedChannelPrompt",e.summaryCardWC="SummaryCardWC",e.superAppPage="SuperAppHomepage",e.superBreakingNews="SuperBreakingNews",e.superCoachMark="SuperCoachMark",e.superCoachMarkWC="SuperCoachMarkWC",e.superListCard="SuperListCard",e.superNav="SuperNav",e.superNavCoachMark="SuperNavCoachMark",e.superappBannerWC="SuperappBannerWC",e.superappUpsellCardWC="SuperappUpsellCardWC",e.tabbedFeedWC="TabbedFeedWC",e.tabbedInfopane="TabbedInfopane",e.tabbedInfopaneTabPreview="TabbedInfopaneTabPreview",e.themePicker="ThemePicker",e.themePickerWC="ThemePickerWC",e.tipsCard="TipsCard",e.toast="Toast",e.toastWC="ToastWC",e.todoCardWC="TodoCardWC",e.topSites="TopSites",e.topSitesBookmarks="TopSitesBookmarks",e.topSitesCommon="TopSitesCommon",e.topSitesEdge="TopSitesEdge",e.topSitesEdgeNextWC="TopSitesEdgeNextWC",e.topSitesNewsbar="TopSitesNewsbar",e.topicTags="TopicTags",e.topicsHub="TopicsHub",e.trafficCard="TrafficCard",e.trafficCardWC="TrafficCardWC",e.trafficHero="TrafficHero",e.trafficMap="TrafficMap",e.trafficPage="TrafficPage",e.translateTemporary="TranslateTemporary",e.travelArticleCard="TravelArticleCard",e.travelArticlePageCard="TravelArticlePageCard",e.travelArticlePill="TravelArticlePill",e.travelCard="TravelCard",e.travelCarousel="TravelCarousel",e.travelCollectionCard="TravelCollectionCard",e.travelDestination="TravelDestination",e.travelDestinationBanner="TravelDestinationBanner",e.travelDestinationDetailsBanner="TravelDestinationDetailsBanner",e.travelFeed="TravelFeed",e.travelFlightCarousel="TravelFlightCarousel",e.travelHotelCarousel="TravelHotelCarousel",e.travelInspirationCard="TravelInspirationCard",e.travelInspirationCardWC="TravelInspirationCardWC",e.travelLandingPage="TravelLandingPage",e.travelMsnHpCard="TravelMsnHpCard",e.travelPage="TravelPage",e.travelSaveButton="TravelSaveButton",e.travelSdCarrentalsCard="TravelSdCarrentalsCard",e.travelSdDestinationsCard="TravelSdDestinationsCard",e.travelSdFlightsCard="TravelSdFlightsCard",e.travelSdHotelsCard="TravelSdHotelsCard",e.travelSdThemesCard="TravelSdThemesCard",e.travelTabCarousel="TravelTabCarousel",e.travelTourActivityCard="TravelTourActivityCard",e.trendingNews="TrendingNews",e.trendingNow="TrendingNow",e.trendingNowWC="TrendingNowWC",e.trendingSearchCard="TrendingSearchCard",e.trendingTopics="TrendingTopics",e.tripleCard="TripleCard",e.ugcCreator="UgcCreator",e.ugcCreatorHomepage="UgcCreatorHomepage",e.unifiedMobileFeed="UnifiedMobileFeed",e.userInitiatedPageRefresh="UserInitiatedPageRefresh",e.userProfileDisplay="UserProfileDisplay",e.verticalLeftNav="VerticalLeftNav",e.videoCard="VideoCard",e.videoCardWC="VideoCardWC",e.videoDetails="VideoDetails",e.videoDetailsKit="VideoDetailsKit",e.videoList="VideoList",e.videoShoppingCard="VideoShoppingCard",e.videoShoppingCarouselCard="VideoShoppingCarouselCard",e.videosFeed="VideosFeed",e.viewsCoachmark="ViewsCoachmark",e.viewsNativeAd="ViewsNativeAd",e.viewsRail="ViewsRail",e.voiceSearch="VoiceSearch",e.voiceSearchWC="VoiceSearchWC",e.waffleWC="WaffleWC",e.walletPersonalizedOfferSdCardWC="WalletPersonalizedOfferSdCardWC",e.watch="Watch",e.watchFilterChannel="WatchFilterChannel",e.watchTakeABreakHeader="WatchTakeABreakHeader",e.watchVideosVerticalCarousel="WatchVideosVerticalCarousel",e.watchWC="WatchWC",e.watchlistCard="WatchlistCard",e.watchlistView="WatchlistView",e.waterTrackerCard="WaterTrackerCard",e.waterfallViewFeed="WaterfallViewFeed",e.weatherAboveFold="WeatherAboveFold",e.weatherActivityPlanner="WeatherActivityPlanner",e.weatherActivityWatchlist="WeatherActivityWatchlist",e.weatherAds="WeatherAds",e.weatherAtContainer="WeatherAtContainer",e.weatherBingAds="WeatherBingAds",e.weatherCard="WeatherCard",e.weatherCardData="WeatherCardData",e.weatherCardWC="WeatherCardWC",e.weatherCarousel="WeatherCarousel",e.weatherColdStartGuide="WeatherColdStartGuide",e.weatherCurrentWC="WeatherCurrentWC",e.weatherCurrentWeather="WeatherCurrentWeather",e.weatherDailyForecast="WeatherDailyForecast",e.weatherDailyTrendChart="WeatherDailyTrendChart",e.weatherData="WeatherData",e.weatherDetailsAQI="WeatherDetailsAQI",e.weatherDetailsCloud="WeatherDetailsCloud",e.weatherDetailsFeelsTemp="WeatherDetailsFeelsTemp",e.weatherDetailsHumidity="WeatherDetailsHumidity",e.weatherDetailsLightning="WeatherDetailsLightning",e.weatherDetailsMoonPhase="WeatherDetailsMoonPhase",e.weatherDetailsPollen="WeatherDetailsPollen",e.weatherDetailsPrecip="WeatherDetailsPrecip",e.weatherDetailsPressure="WeatherDetailsPressure",e.weatherDetailsSection="WeatherDetailsSection",e.weatherDetailsSunMoon="WeatherDetailsSunMoon",e.weatherDetailsTemperature="WeatherDetailsTemperature",e.weatherDetailsUV="WeatherDetailsUV",e.weatherDetailsVisibility="WeatherDetailsVisibility",e.weatherDetailsWind="WeatherDetailsWind",e.weatherDrawerMobile="WeatherDrawerMobile",e.weatherEplant="WeatherEplant",e.weatherEplantTasksPhone="WeatherEplantTasksPhone",e.weatherEventAlert="WeatherEventAlert",e.weatherEventBanner="WeatherEventBanner",e.weatherExperienceTemplate="WeatherExperienceTemplate",e.weatherExtensionSection="WeatherExtensionSection",e.weatherFeedWC="WeatherFeedWC",e.weatherFeedback="WeatherFeedback",e.weatherFloatButtons="WeatherFloatButtons",e.weatherForecast="WeatherForecast",e.weatherForecastDayNightWC="WeatherForecastDayNightWC",e.weatherForecastDayWC="WeatherForecastDayWC",e.weatherForecastHistoryWC="WeatherForecastHistoryWC",e.weatherForecastListMobile="WeatherForecastListMobile",e.weatherForecastMobile="WeatherForecastMobile",e.weatherForecastPerHourWC="WeatherForecastPerHourWC",e.weatherForecastSunMoonPhaseWC="WeatherForecastSunMoonPhaseWC",e.weatherForecastSunMoonWC="WeatherForecastSunMoonWC",e.weatherForecastTab="WeatherForecastTab",e.weatherForecastVideo="WeatherForecastVideo",e.weatherFreDialog="WeatherFreDialog",e.weatherFreRightRail="WeatherFreRightRail",e.weatherFunFact="WeatherFunFact",e.weatherGuidedConversation="WeatherGuidedConversation",e.weatherHeroExperience="WeatherHeroExperience",e.weatherHistoricalRecordWC="WeatherHistoricalRecordWC",e.weatherHistoricalTemperatureWC="WeatherHistoricalTemperatureWC",e.weatherHistoricalTrends="WeatherHistoricalTrends",e.weatherHolidayEffects="WeatherHolidayEffects",e.weatherHomePage="WeatherHomePage",e.weatherHourlyHistogramWC="WeatherHourlyHistogramWC",e.weatherHourlyTab="WeatherHourlyTab",e.weatherImmersiveForecastWC="WeatherImmersiveForecastWC",e.weatherInfoCard="WeatherInfoCard",e.weatherInfoMini="WeatherInfoMini",e.weatherInfoSpan="WeatherInfoSpan",e.weatherInsightsSection="WeatherInsightsSection",e.weatherLifeAllQuiz="WeatherLifeAllQuiz",e.weatherLifeCurrent="WeatherLifeCurrent",e.weatherLifeCurrentV2="WeatherLifeCurrentV2",e.weatherLifeDayHourPanel="WeatherLifeDayHourPanel",e.weatherLifeEntryWC="WeatherLifeEntryWC",e.weatherLifeFactsCard="WeatherLifeFactsCard",e.weatherLifeHolidayCard="WeatherLifeHolidayCard",e.weatherLifeIndexEntry="WeatherLifeIndexEntry",e.weatherLifeNews="WeatherLifeNews",e.weatherLifeQuizCard="WeatherLifeQuizCard",e.weatherLifeSpecialToday="WeatherLifeSpecialToday",e.weatherLocationCardWC="WeatherLocationCardWC",e.weatherLocationMap="WeatherLocationMap",e.weatherLocationPanel="WeatherLocationPanel",e.weatherLocationPopup="WeatherLocationPopup",e.weatherLocationSearch="WeatherLocationSearch",e.weatherLocationSearchPhoneWC="WeatherLocationSearchPhoneWC",e.weatherLocationWC="WeatherLocationWC",e.weatherMapAlertCard="WeatherMapAlertCard",e.weatherMapAnimationBox="WeatherMapAnimationBox",e.weatherMapCarousel="WeatherMapCarousel",e.weatherMapContentModal="WeatherMapContentModal",e.weatherMapControlBox="WeatherMapControlBox",e.weatherMapDataFilter="WeatherMapDataFilter",e.weatherMapForecastCard="WeatherMapForecastCard",e.weatherMapGroupSwitcher="WeatherMapGroupSwitcher",e.weatherMapGroupSwitcherButtonWC="WeatherMapGroupSwitcherButtonWC",e.weatherMapHurricanePane="WeatherMapHurricanePane",e.weatherMapLayerChooser="WeatherMapLayerChooser",e.weatherMapLegendIndicator="WeatherMapLegendIndicator",e.weatherMapLegendWC="WeatherMapLegendWC",e.weatherMapLifeIndex="WeatherMapLifeIndex",e.weatherMapLifeTips="WeatherMapLifeTips",e.weatherMapMini="WeatherMapMini",e.weatherMapMiniV2="WeatherMapMiniV2",e.weatherMapNaviCard="WeatherMapNaviCard",e.weatherMapNews="WeatherMapNews",e.weatherMapPopup="WeatherMapPopup",e.weatherMapPromotionCard="WeatherMapPromotionCard",e.weatherMapSidebar="WeatherMapSidebar",e.weatherMapTimeline="WeatherMapTimeline",e.weatherMapTimelineWC="WeatherMapTimelineWC",e.weatherMapV2="WeatherMapV2",e.weatherMapWC="WeatherMapWC",e.weatherMapWeatherCard="WeatherMapWeatherCard",e.weatherMapsRotationWC="WeatherMapsRotationWC",e.weatherMinimapWC="WeatherMinimapWC",e.weatherMiniProgramUpsell="WeatherMiniProgramUpsell",e.weatherMonthCalendar="WeatherMonthCalendar",e.weatherMonthlyForecastSummary="WeatherMonthlyForecastSummary",e.weatherMonthlySummaryWC="WeatherMonthlySummaryWC",e.weatherMonthlyTrendChart="WeatherMonthlyTrendChart",e.weatherNotification="WeatherNotification",e.weatherNowcastHistogram="WeatherNowcastHistogram",e.weatherNpsCard="WeatherNpsCard",e.weatherOneLiner="WeatherOneLiner",e.weatherOverviewMobile="WeatherOverviewMobile",e.weatherOverviewV2="WeatherOverviewV2",e.weatherOverviewWC="WeatherOverviewWC",e.weatherPageMeta="WeatherPageMeta",e.weatherPageMobile="WeatherPageMobile",e.weatherPageRoot="WeatherPageRoot",e.weatherPageV2="WeatherPageV2",e.weatherPageWC="WeatherPageWC",e.weatherPersonaCard="WeatherPersonaCard",e.weatherPersonaSummary="WeatherPersonaSummary",e.weatherPollenCityList="WeatherPollenCityList",e.weatherPollenDailyInfo="WeatherPollenDailyInfo",e.weatherPollenImages="WeatherPollenImages",e.weatherPollenNodata="WeatherPollenNodata",e.weatherPollenTeaser="WeatherPollenTeaser",e.weatherPollenWeatherForecast="WeatherPollenWeatherForecast",e.weatherPwaPopup="WeatherPwaPopup",e.weatherRecommendation="WeatherRecommendation",e.weatherRightRail="WeatherRightRail",e.weatherSettingCenter="WeatherSettingCenter",e.weatherSlideDrawer="WeatherSlideDrawer",e.weatherSoftLanding="WeatherSoftLanding",e.weatherToast="WeatherToast",e.weatherTodayCard="WeatherTodayCard",e.weatherTodayHistoryWC="WeatherTodayHistoryWC",e.weatherTodayMini="WeatherTodayMini",e.weatherTodayMiniWC="WeatherTodayMiniWC",e.weatherTravelCarousel="WeatherTravelCarousel",e.weatherTrendClimate="WeatherTrendClimate",e.weatherTrendOverview="WeatherTrendOverview",e.weatherTrendToday="WeatherTrendToday",e.weatherTrivialHoster="WeatherTrivialHoster",e.weatherVideoEntryWC="WeatherVideoEntryWC",e.welcomeGreetingLight="WelcomeGreetingLight",e.welcomeGreetingWC="WelcomeGreetingWC",e.widgetPickerWC="WidgetPickerWC",e.widgets="Widgets",e.widgetsDynamicFeed="WidgetsDynamicFeed",e.widgetsHomePage="WidgetsHomePage",e.widgetsNotificationsCard="WidgetsNotificationsCard",e.widgetsStartFeed="WidgetsStartFeed",e.winAppWC="WinAppWC",e.windowsOfficeFeed="WindowsOfficeFeed",e.windowsShellAccountManager="WindowsShellAccountManager",e.windowsShellBannerManager="WindowsShellBannerManager",e.windowsShellBannersManager="WindowsShellBannersManager",e.windowsShellChannelFilter="WindowsShellChannelFilter",e.windowsShellChannelStore="WindowsShellChannelStore",e.windowsShellColdStartBanner="WindowsShellColdStartBanner",e.windowsShellColdStartCard="WindowsShellColdStartCard",e.windowsShellContentPreview="WindowsShellContentPreview",e.windowsShellDialogBox="WindowsShellDialogBox",e.windowsShellEntry="WindowsShellEntry",e.windowsShellFollowingLoader="WindowsShellFollowingLoader",e.windowsShellFreBanner="WindowsShellFreBanner",e.windowsShellHeader="WindowsShellHeader",e.windowsShellHotList="WindowsShellHotList",e.windowsShellInfopane="WindowsShellInfopane",e.windowsShellLocationDialog="WindowsShellLocationDialog",e.windowsShellMarketMismatchBanner="WindowsShellMarketMismatchBanner",e.windowsShellMorningDigest="WindowsShellMorningDigest",e.windowsShellNewsPromoCard="WindowsShellNewsPromoCard",e.windowsShellNotificationBanner="WindowsShellNotificationBanner",e.windowsShellNotificationCard="WindowsShellNotificationCard",e.windowsShellNotificationSettings="WindowsShellNotificationSettings",e.windowsShellPinOverlay="WindowsShellPinOverlay",e.windowsShellPreloader="WindowsShellPreloader",e.windowsShellPulse="WindowsShellPulse",e.windowsShellRail="WindowsShellRail",e.windowsShellRecommendedInterests="WindowsShellRecommendedInterests",e.windowsShellRefreshAnimationBanner="WindowsShellRefreshAnimationBanner",e.windowsShellRefreshDiscoveryBanner="WindowsShellRefreshDiscoveryBanner",e.windowsShellRiver="WindowsShellRiver",e.windowsShellSettingsMenu="WindowsShellSettingsMenu",e.windowsShellShoppingBanner="WindowsShellShoppingBanner",e.windowsShellSoftLanding="WindowsShellSoftLanding",e.windowsShellTopicsCard="WindowsShellTopicsCard",e.windowsShellWatchTakeABreakBanner="WindowsShellWatchTakeABreakBanner",e.windowsWidgetsHub="WindowsWidgetsHub",e.xboxFeedWC="XboxFeedWC",e.xfeed="Xfeed",e.xfeedWC="XfeedWC",e.yandexSearchBoxWC="YandexSearchBoxWC"}(i||(i={}))},73298:function(e,t,n){"use strict";var i,r;n.d(t,{V:function(){return i}}),function(e){e[e.init=0]="init",e[e.subsequent=1]="subsequent",e[e.refresh=2]="refresh"}(i||(i={})),function(e){e.Long="long",e.Short="short"}(r||(r={}))},48587:function(e,t,n){"use strict";n.d(t,{NH:function(){return c},PQ:function(){return i},SL:function(){return r},mX:function(){return o},my:function(){return a},pN:function(){return s}});const i="v3",r="v3.1",o="/resolver/api/resolve/",a="prg-crsfdheadrem",s="https://assets.msn.com",c="https://assets.msn.cn"},73425:function(e,t,n){"use strict";var i;n.d(t,{U:function(){return i}}),function(e){e.AkamaiProtocolKey="akmprotocol",e.BackfillContentDueToSSRAdsFailed="__backfillContentDueToSSRAdsFailed__",e.DelayNtpSSRFeedDuration="__DelayNtpSSRFeedDuration__",e.ErrorLogHistory="__ErrorLogHistory__",e.HydrationPromise="__hydrationPromise__",e.IsSSRWpoFeedConsumed="__isSSRWpoFeedConsumed__",e.NavEventEnabled="__navEventEnabled__",e.OriginalRequest="__originalRequest__",e.PlaceHolderResponse="__placeHolderResponse__"}(i||(i={}))},69233:function(e,t,n){"use strict";var i;n.d(t,{X:function(){return r},p:function(){return i}}),function(e){e.basicFeed="BasicFeed",e.desktopFeedStart="DesktopFeedStart",e.discoverCarouselSection="FinanceDiscoverSection_carouselCard",e.discoverFirstSection="FinanceDiscoverSection_first",e.discoverFollowedSection="FinanceDiscoverSection_followedCard",e.discoverSecondSection="FinanceDiscoverSection_second",e.feed="Feed",e.feedBasicRender="FeedBasicRender",e.feedRequest="FeedRequest",e.feedRequestFG="FeedRequest.FG",e.feedSDRender="FeedSDRender",e.isPrerenderedAd="isPrerenderedAd",e.firstSectionRenderStart="FirstSectionRenderStart",e.firstSectionRenderEnd="FirstSectionRenderEnd",e.riverFirstSection="RiverFirstSection",e.sdCards="SDCards",e.searchBox="SearchBox",e.searchBoxToFeed="SearchBoxToFeed",e.secondSectionRenderEnd="SecondSectionRenderEnd",e.secondSectionRenderStart="SecondSectionRenderStart",e.TTPR="TTPR",e.viewCards="ViewCards",e.wpoCallStart="WpoCallStart",e.wpoResponseBack="WpoResponseBack",e.feedCallStart="FeedCallStart",e.feedResponseBack="FeedResponseBack",e.feedParse="FeedParse",e.configEndToFeedStart="ConfigEndToFeedStart",e.feedResponseTo1SSectionProcessed="FeedResponseTo1SSectionProcessed",e.isSSREnabled="isSSREnabled",e.isSSRCompleted="isSSRCompleted",e.isSSRAborted="isSSRAborted",e.complete="Complete",e.sectionRenderStart="sectionRenderStart",e.ssrCpuCost="ssrCpuCost"}(i||(i={}));const r="WidgetsConfigsEnd"},67575:function(e,t,n){"use strict";n.d(t,{UH:function(){return i},lU:function(){return r}});const i="news",r="feed/personalize/settings"},58980:function(e,t,n){"use strict";var i;n.d(t,{d:function(){return i}}),function(e){e.InterestsNeedRefresh="interests-need-refresh",e.VideoGameInterestFollowed="video-game-interest-followed",e.GamingFeedEngagement="gaming-feed-engagement",e.HideGameCarouselInNtp="ntpkids_cgcarousel_hide",e.DisableShorelineArticlePage="shoreline_article_page_disabled"}(i||(i={}))},19233:function(e,t,n){"use strict";var i,r,o;n.d(t,{Q4:function(){return o},qG:function(){return i}}),function(e){e.TimeToRequestAd="TTNativeAd.Request",e.TimeToRequestAdBackground="TTNativeAd.Background.Request",e.TimeToServeAd="TTNativeAd.Serve",e.TimeToServeAdBackground="TTNativeAd.Background.Serve",e.TimeToRenderAd="TTVR.NativeAd",e.TimeToPrerenderAd="TTNativeAd.Prerender",e.TimeToAdResponse="TTNativeAd.Response",e.ApiDuration="NativeAd.ApiDuration",e.RenderReady="NativeAd.RenderReady",e.RequestInitiated="NAdInitiate",e.RequestSent="NAdInitiateToReq",e.AdFetched="NAdFetch",e.AdServerLatency="NAdServerLatency",e.AdProcessed="NAdProcess",e.RespToAdCallback="NAdRespToCallback",e.AdCallbackProcessed="NAdCallbackProcess",e.AdRendered="NAdRender",e.TimeToConsumeAds="TTNativeAd.Consume",e.TimeToConsumeAdsSSR="TTNativeAd.ConsumeSSR"}(i||(i={})),function(e){e.TimeToAdScriptRequest="TTDisplayAd.ScriptRequest",e.TimeToAdScriptLoaded="TTDisplayAd.ScriptLoaded",e.TimeToAdFetchStarted="TTDisplayAd.FetchStarted",e.TimeToAdFetchCompleted="TTDisplayAd.FetchCompleted",e.TimeToAdRenderCompleted="TTDisplayAd.RenderCompleted"}(r||(r={})),function(e){e.TimeToRenderAd="TTVR.MarqueeAd",e.TimeToPrerenderAd="TTPR.MarqueeAd"}(o||(o={}))},46986:function(e,t,n){"use strict";var i,r;n.d(t,{F:function(){return r}}),function(e){e.Article="article",e.ArticleFullScreen="articlefullscreen",e.CasualGames="casualgames",e.CasualGamesPlay="casualgamesplay",e.Channel="channel",e.ChannelSource="channel::source",e.ChannelTopic="channel::topic",e.CmsExperience="shopping::cms",e.CmsBaseExperience="shopping::cmsbase",e.DHP="dhp",e.EdgeWelcome="edgewelcome",e.ForumDealsPage="shopping::buydirect::superdeals",e.Gallery="gallery",e.GalleryFullScreen="galleryfullscreen",e.Homepage="hp",e.Launcher="launcher",e.Lenovo="lenovo",e.NewsAndInterests="newsandinterestshp",e.Newsbar="newsbar",e.NewsbarUpsell="newsbarupsell",e.NewsCoronavirus="news::coronavirus",e.NewsVLP="news",e.NTP="ntp",e.RichCalendarLandingPage="lifestyle::calendar",e.Sidebar="sidebar",e.Story="story",e.Shopping="shopping",e.ShoppingDealsCategory="shopping::deals-category",e.ShoppingProductDetails="shopping::product",e.ShoppingExpressCheckout="shopping::express-checkout",e.ShoppingForumCheckout="shopping::buydirect::checkout",e.ShoppingForumProductPage="shopping::buydirect::product",e.ShoppingForumcheckoutWidget="shopping::buydirect::checkout::widget",e.ShoppingForumProductDetails="shopping::buydirect::product1",e.ShoppingForumCancelOrder="shopping::buydirect::cancel-order",e.ShoppingForumReturnDetails="shopping::buydirect::return-details",e.ShoppingForumReturnOrder="shopping::buydirect::return-orders",e.ShoppingForumRefundDetails="shopping::buydirect::refund-details",e.ShoppingForumRefundOrder="shopping::buydirect::refund-orders",e.ShoppingLiveDetails="shoppinglivedetails",e.ShoppingLiveInmobiDetails="shoppingliveinmobidetails",e.ShoppingLiveEmbed="shopping::live::embed",e.ShoppingMomentInTime="shopping::mit",e.ShoppingExplore="shopping::explore",e.ShoppingExploreHalloween="shopping::explore::halloween",e.ShoppingCouponsPage="shopping::coupons",e.ShoppingDealsHomePage="shopping::deals::coupons",e.ShoppingStoreCouponsPage="shopping::store-coupons",e.ShoppingStyles="shopping::styles",e.ShoppingStylesHomePage="shopping::style-ideas",e.ShoppingLanding="shopping::buydirect",e.ShoppingSearchResult="shopping::buydirect::search",e.ShoppingCart="shopping::buydirect::cart",e.ShoppingOrders="shopping::buydirect::orders",e.ShoppingForumOrderConfirmation="shopping::buydirect::order-confirmation",e.ShoppingForumOrderDetails="shopping::buydirect::order-details",e.ShoppingForumHome="shopping::buydirect::home",e.Source="source",e.Sports="sports",e.StartFeed="startfeed",e.Topic="topic",e.Travel="travel",e.TravelPlaces="travel::places",e.TravelCollections="travel::collections",e.Video="video",e.VideoInf="videoinf",e.VideoWidget="video-widget",e.WebContent="webcontent",e.Widget="widget",e.Windows="windowshp",e.WindowsShellHP="windowsshellhp",e.ShoppingAllStoresPage="shopping::stores::popular",e.ShoppingLiveProductDetailsPage="shopping::live::product",e.ShoppingForumSellerPage="shopping::buydirect::stores",e.ShoppingForumFavorites="shopping::buydirect::favorites",e.ShoppingBlackjackPage="shopping::deals",e.ShoppingBlackjackDealPage="shopping::deals::product",e.ShoppingSearch="shopping::search",e.ShoppingBingProductDetails="shopping::product-details",e.ShoppingInspiration="shopping::inspire",e.ShoppingBuyingGuide="shopping::buying-guide",e.ShoppingAssistant="shopping::ai",e.ShoppingShopDeals="shopping::shopdeals",e.ShoppingArticlePage="shopping::shop-article",e.ShoppingGuidesPage="shopping::shop-guides",e.ShoppingDebugPage="shopping::debug",e.ShorelineArticle="shorelinearticle"}(i||(i={})),function(e){e.Adult="adult",e.Enterprise="enterprise",e.Kids="kids"}(r||(r={}))},83102:function(e,t,n){"use strict";var i,r,o;n.d(t,{Hy:function(){return i},Qm:function(){return r}}),function(e){e[e.Unknown=0]="Unknown",e[e.NotSignedIn=1]="NotSignedIn",e[e.SignedIn=2]="SignedIn"}(i||(i={})),function(e){e.MSA="MSA",e.AAD="AAD",e.UNSUPPORTED_SOVEREIGNTY="UNSUPPORTED_SOVEREIGNTY"}(r||(r={})),function(e){e[e.NonAadAccount=0]="NonAadAccount",e[e.AadAccount=1]="AadAccount",e[e.Unknown=2]="Unknown"}(o||(o={}))},88249:function(e,t,n){"use strict";n.d(t,{$n:function(){return i},bT:function(){return r},cN:function(){return o}});const i=[{id:"ar-ae",value:"ar-ae",displayString:"الإمارات العربية المتحدة (العربية)",direction:"rtl"},{id:"ar-eg",value:"ar-eg",displayString:"مصر (العربية)",direction:"rtl"},{id:"ar-sa",value:"ar-sa",displayString:"المملكة العربية السعودية (العربية)",direction:"rtl"},{id:"bn-in",value:"bn-in",displayString:"India (বাংলা)",direction:"ltr"},{id:"cs-cz",value:"cs-cz",displayString:"Česká republika (čeština)",direction:"ltr"},{id:"da-dk",value:"da-dk",displayString:"Danmark (Dansk)",direction:"ltr"},{id:"de-at",value:"de-at",displayString:"Österreich (Deutsch)",direction:"ltr"},{id:"de-ch",value:"de-ch",displayString:"Schweiz (Deutsch)",direction:"ltr"},{id:"de-de",value:"de-de",displayString:"Deutschland (Deutsch)",direction:"ltr"},{id:"el-gr",value:"el-gr",displayString:"Ελλάδα (ελληνικά)",direction:"ltr"},{id:"en-ae",value:"en-ae",displayString:"United Arab Emirates (English)",direction:"ltr"},{id:"en-au",value:"en-au",displayString:"Australia (English)",direction:"ltr"},{id:"en-ca",value:"en-ca",displayString:"Canada (English)",direction:"ltr"},{id:"en-gb",value:"en-gb",displayString:"United Kingdom (English)",direction:"ltr"},{id:"en-ie",value:"en-ie",displayString:"Ireland (English)",direction:"ltr"},{id:"en-in",value:"en-in",displayString:"India (English)",direction:"ltr"},{id:"en-my",value:"en-my",displayString:"Malaysia (English)",direction:"ltr"},{id:"en-nz",value:"en-nz",displayString:"New Zealand (English)",direction:"ltr"},{id:"en-ph",value:"en-ph",displayString:"Philippines (English)",direction:"ltr"},{id:"en-sg",value:"en-sg",displayString:"Singapore (English)",direction:"ltr"},{id:"en-us",value:"en-us",displayString:"United States (English)",direction:"ltr"},{id:"en-xl",value:"en-xl",displayString:"International Edition (English)",direction:"ltr"},{id:"en-za",value:"en-za",displayString:"South Africa (English)",direction:"ltr"},{id:"es-ar",value:"es-ar",displayString:"Argentina (español)",direction:"ltr"},{id:"es-cl",value:"es-cl",displayString:"Chile (español)",direction:"ltr"},{id:"es-co",value:"es-co",displayString:"Colombia (español)",direction:"ltr"},{id:"es-es",value:"es-es",displayString:"España (español)",direction:"ltr"},{id:"es-mx",value:"es-mx",displayString:"México (español)",direction:"ltr"},{id:"es-pe",value:"es-pe",displayString:"Perú (español)",direction:"ltr"},{id:"es-us",value:"es-us",displayString:"United States (español)",direction:"ltr"},{id:"es-ve",value:"es-ve",displayString:"Venezuela (español)",direction:"ltr"},{id:"es-xl",value:"es-xl",displayString:"América Latina (español)",direction:"ltr"},{id:"fi-fi",value:"fi-fi",displayString:"Suomi (suomi)",direction:"ltr"},{id:"fr-be",value:"fr-be",displayString:"Belgique (français)",direction:"ltr"},{id:"fr-ca",value:"fr-ca",displayString:"Canada (français)",direction:"ltr"},{id:"fr-ch",value:"fr-ch",displayString:"Suisse (français)",direction:"ltr"},{id:"fr-fr",value:"fr-fr",displayString:"France (français)",direction:"ltr"},{id:"fr-xl",value:"fr-xl",displayString:"Afrique francophone (français)",direction:"ltr"},{id:"he-il",value:"he-il",displayString:"ישראל (עברית)",direction:"rtl"},{id:"hi-in",value:"hi-in",displayString:"India (हिंदी)",direction:"ltr"},{id:"hu-hu",value:"hu-hu",displayString:"Magyarország (magyar)",direction:"ltr"},{id:"id-id",value:"id-id",displayString:"Indonesia (Bahasa Indonesia)",direction:"ltr"},{id:"it-it",value:"it-it",displayString:"Italia (italiano)",direction:"ltr"},{id:"ja-jp",value:"ja-jp",displayString:"日本 (日本語)",direction:"ltr"},{id:"ko-kr",value:"ko-kr",displayString:"한국 (한국어)",direction:"ltr"},{id:"mr-in",value:"mr-in",displayString:"India (मराठी)",direction:"ltr"},{id:"nb-no",value:"nb-no",displayString:"Norge (norsk, bokmål)",direction:"ltr"},{id:"nl-be",value:"nl-be",displayString:"België (Nederlands)",direction:"ltr"},{id:"nl-nl",value:"nl-nl",displayString:"Nederland (Nederlands)",direction:"ltr"},{id:"pl-pl",value:"pl-pl",displayString:"Polska (polski)",direction:"ltr"},{id:"pt-br",value:"pt-br",displayString:"Brasil (português)",direction:"ltr"},{id:"pt-pt",value:"pt-pt",displayString:"Portugal (Português)",direction:"ltr"},{id:"ru-xl",value:"ru-xl",displayString:"Международное издание (Pусский)",direction:"ltr"},{id:"ru-ru",value:"ru-ru",displayString:"Россия (Pусский)",direction:"ltr"},{id:"sv-se",value:"sv-se",displayString:"Sverige (svenska)",direction:"ltr"},{id:"te-in",value:"te-in",displayString:"India (తెలుగు)",direction:"ltr"},{id:"th-th",value:"th-th",displayString:"ไทย (ไทย)",direction:"ltr"},{id:"tr-tr",value:"tr-tr",displayString:"Türkiye (Türkçe)",direction:"ltr"},{id:"vi-vn",value:"vi-vn",displayString:"Việt Nam (Tiếng Việt)",direction:"ltr"},{id:"zh-cn",value:"zh-cn",displayString:"中华人民共和国 (简体中文)",direction:"ltr"},{id:"zh-hk",value:"zh-hk",displayString:"香港特别行政區 (繁體中文)",direction:"ltr"},{id:"zh-tw",value:"zh-tw",displayString:"台灣 (繁體中文)",direction:"ltr"}];function r(e,t){return e.displayString<t.displayString?-1:e.displayString>t.displayString?1:0}function o(e){if(""!==document.dir)return"rtl"===document.dir;const t=i.find((t=>t.id===e));return t&&"rtl"===t.direction}},94546:function(e,t,n){"use strict";n.d(t,{Di:function(){return i},SD:function(){return o},fw:function(){return r}});const i="peregrine-widgets",r="peregrine-widget-settings",o="prg-pw-"},81110:function(e,t,n){"use strict";n.d(t,{$s:function(){return h},$v:function(){return F},CO:function(){return B},GR:function(){return r},H0:function(){return p},I1:function(){return g},IA:function(){return N},J8:function(){return d},L3:function(){return c},LJ:function(){return x},Mo:function(){return a},Mt:function(){return P},P$:function(){return E},Pg:function(){return v},Qn:function(){return T},Qs:function(){return k},S1:function(){return H},SO:function(){return L},Td:function(){return f},UW:function(){return l},UY:function(){return b},YU:function(){return M},_O:function(){return $},bx:function(){return w},di:function(){return D},eK:function(){return C},gr:function(){return O},hE:function(){return i},hM:function(){return A},hZ:function(){return u},hk:function(){return s},i9:function(){return W},kJ:function(){return I},kX:function(){return S},lP:function(){return R},ly:function(){return m},n9:function(){return y},os:function(){return U},vy:function(){return _},xE:function(){return o}});const i={activityId:"activityId",apiKey:"apikey",audienceMode:"audienceMode",bypassTrigger:"bypass_trigger",cm:"cm",complexInfoPaneEnabled:"cipenabled",contentType:"contentType",delta:"delta",disableContent:"disablecontent",disableTypeSerialization:"DisableTypeSerialization",duotone:"duotone",infopaneCount:"infopaneCount",fdhead:"fdhead",feedLayoutRequestType:"t",filter:"$filter",includeFollowingFilters:"iff",ids:"ids",interestIds:"InterestIds",location:"location",market:"market",newsSkip:"newsSkip",newsTop:"newsTop",ocid:"ocid",pageConfiguration:"pgc",parentContentId:"parent-content-id",parentNamespace:"parent-ns",parentTitle:"parent-title",providerId:"ProviderId",queryQ:"q",query:"query",queryType:"queryType",qScope:"qscope",requestId:"rid",responseSchema:"responseschema",select:"$select",session:"session",signInCookieName:"scn",skip:"$skip",source:"source",timeOut:"timeOut",top:"$top",type:"type",user:"user",wrapOData:"wrapodata",wpoitems:"wpoitems",wpoPageId:"wpopageid",wpoSchema:"wposchema",caller:"caller",dhp:"dhp",webWorker:"webWorker",edgeNoAds:"edgenoads",edgeReduceAds:"edgereduceads",column:"column",anaheimPageLayout:"anaheimPageLayout",adRefreshVariant:"adRefreshVariant",gdpr:"gdpr",verticalName:"verticalName"},r="0QfOX3Vn51YCzitbLaRkTTBadtWpgTN8NZLW0C1SEM",o="Uj7u7bqBgMhDGBUVPSbcHUe0pU7X8TbVRviCO2fojo",a="service/news/feed/pages/",s="serviceak/news/feed/pages/",c="news/feed/pages/",d="ntpxfeed",l="wpoxfeed",u="news/feed/pages/",p="winxfeed",h="wpodhp",g="gamingfeed",m="ntpfollowfeed",f="filteredfollowingchannels",v="prong1followfeed",y="prong1xfeed",S="prong2followfeed",C="followingxfeed",w="ntp",b="weblayout",T="ntpxfeed",k="prong2xfeed",P="news/feed/Segments",A="https://api.msn.com",I="https://sf-ppe.oneservice-test.msn.com",E="wpo-usebasedomain",M="wpo-useintdomain",x="https://ppe-api.msn.com",L="news/feed/pages/ntpxfeed",R="news/feed/pages/",D=17,F="xbox-browser",O="jY4a3fYtgzb7PIcW0Kj6amp5k6LwDefg6RSnkmxjto",B="prg-useakmaipath",N="prg-ssr-ext1sdns",_="msnkids",U="dy0rQcQaYj5cKZ2Cy0cdaRDJcC5maS5hPj9w2SbeRf",W="anaheim-ntp-following",H="vevII5dbHfpd1fHIMlPxbas6GZQEFOm4CozFHehOgW";function $(e,t){t.set(i.wrapOData,"false").set(i.disableTypeSerialization,"true").set(i.queryType,e.queryType||"myfeed").set(i.timeOut,`${function(e){const{timeoutMs:t,query:n,customFeedTimeoutMs:i}=e;return n&&i?i:t}(e)}`).set(i.contentType,e.contentType).set(i.apiKey,r),(e.useDelta||e.sessionId)&&(t.set(i.delta,"true"),e.sessionId&&t.set(i.session,e.sessionId)),e.ocid&&t.set(i.ocid,e.ocid)}},68963:function(e,t,n){"use strict";n.d(t,{T3:function(){return c},Uo:function(){return a},q1:function(){return s},tz:function(){return o}});var i=n(55524);let r;function o(e){r=e}function a(e,t,n=!0){const i=d();let o=i[e];if(o||(o=[],i[e]=o),o.push(t),n){const n=r(e);if(n){const e=n.getCurrentState();e&&t(e)}}}function s(e,t){const n=d(),i=n[e];if(i&&i.length){for(let e=0;e<i.length;e++)if(i[e]===t){i.splice(e,1);break}n[e]=i}}function c(e,t){const n=d()[e];if(n&&t)for(const e of n)e(t)}function d(){return i.Gq.get("reducers__callbackMap",(()=>({})))}},96531:function(e,t,n){"use strict";n.d(t,{_:function(){return C}});var i=n(27670),r=n(24240),o=n(44446),a=n(90351),s=n(25514),c=n(46728),d=n(31558);const l=new Map;function u(e){return e+"."+r.B.connectorStateKey}const p={registerInjection:function(e,t){let n=l.get(t);n||(n=new Set,l.set(t,n)),n.add(u(e))},initializeExperience:function(e,t,n){const i=u(t),r={...(0,a.Z)(e,i,void 0),[n]:(0,a.Z)(e,u(n),void 0)};(0,s.Z)(e,i,r)},reportStateChange:function(e,t,n){const i=l.get(t);if(i)for(const r of i){const i=(0,a.Z)(e,r,void 0);i&&(0,s.Z)(e,r,{...i,[t]:n})}}};var h=n(85663),g=n(68963);class m{constructor(){this._connectorMap={},this._globalConnectors=[],this._allConnectors=[],this._getDataConnectorPendingPromises=new Map,this.reduce=this.reduce.bind(this)}connectors(){return this._allConnectors}connector(e){return this._connectorMap[e]}globalConnectors(){return this._globalConnectors}getDataConnector(e){const t=this.connector(e);if(t)return Promise.resolve(t);const n=this._getDataConnectorPendingPromises.get(e);if(n)return n.promise;let i,r;const o=new Promise(((e,t)=>{i=e,r=t}));return this._getDataConnectorPendingPromises.set(e,{promise:o,resolve:i,reject:r}),o}reduce(e,t){(0,h.isNullOrUndefined)(e)&&(e={});let n={...e},i=!1;const l=t.key;if(void 0!==t&&void 0!==l){const u="string"==typeof t.type;if(u&&t.type.endsWith(r.B.renderAction)){const t=l+"."+r.B.connectorStateKey,c=(0,o.Z)({},(0,a.Z)(e,t,void 0));(0,s.Z)(n,t,c),i=!0}else if(u&&t.type.endsWith(r.B.dataConnectorMergeInitAction)){const e=l,r=t.params[0];r&&(p.initializeExperience(n,e,r),i=!0)}else{const e=this._connectorMap[l];if(e){e.isGlobal&&(n=(0,c.Z)({},n));const r=this.computeNextStateForConnector(n,l,t);i=r.stateChanged,i&&(p.reportStateChange(n,l,r.newState),(0,d.N)()&&(0,g.T3)(l,r.newState))}else if(!(0,d.N)())throw new Error("Reducer for: "+l+" must not return undefined.")}}else Object.keys(this._connectorMap).forEach((e=>{this.computeNextStateForConnector(n,e,t).stateChanged&&(i=!0)}));return i?n:e}addSubReducerForConnector(e){if(!e)throw new Error("The parameter 'connector' cannot be null.");const t=e.fullNamespace;if(this._connectorMap[t]=e,this._allConnectors.push(e),e.isGlobal&&this._globalConnectors.push(e),this._getDataConnectorPendingPromises.has(e.namespace)){const t=this._getDataConnectorPendingPromises.get(e.namespace);try{t.resolve(e)}catch(e){t.reject(e)}this._getDataConnectorPendingPromises.delete(e.namespace)}e.store.dispatch({key:t,type:"@@connector-view/INIT"})}computeNextStateForConnector(e,t,n){const i=this._connectorMap[t],o=t+"."+r.B.connectorStateKey,c=(0,a.Z)(e,o,void 0),d=this.subReduce(i.reducer,c,n);if(void 0===d)throw new Error("Reducer for: "+t+" must not return undefined.");const l=d!==c;return l&&(0,s.Z)(e,o,d),{newState:d,stateChanged:l}}subReduce(e,t,n){const i=e.reduce(t,n);return i!==t?i:t}}var f=n(11365),v=n(76733),y=n(55524);const S="__PageBaseInstance__";class C{constructor(e){let t;const n=[];if(void 0!==v.k&&v.k&&v.k.isDebug()){t=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||i.qC)((0,f.md)(...n))}else t=(0,f.md)(...n);this._rootReducer=new m,this._store=(0,i.MT)(this.rootReducer.reduce,e,t)}static resetPageBaseInstance(e){y.Gq.set(S,new C(e))}static deletePageBaseInstance(){y.Gq.delete(S)}get store(){return this._store}get rootReducer(){return this._rootReducer}static getInstance(e){return y.Gq.get(S,(()=>new C(e)))}start(){this.rootReducer.connectors().forEach((e=>e.onApplicationStart()))}}},24240:function(e,t,n){"use strict";var i;n.d(t,{B:function(){return i}}),function(e){e.connectorStateKey="_@STATE@_",e.renderAction="@@connector-view/RENDER",e.dataConnectorMergeInitAction="@@data-connector/MERGE-INIT"}(i||(i={}))},76166:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var i=n(24240),r=n(68963),o=n(29330),a=n(42933),s=n(11365),c=n(25514),d=n(67044);(0,r.tz)(d.K0);class l{get store(){return this._subspace}get fullNamespace(){return this._fullNamespace}get configHref(){return this._configHref}set configHref(e){this._configHref=e}constructor(e,t,n,i,r,a,c,d=!1){this.namespace=e,this.parentNamespace=t,this.rootReducer=n,this.reducer=i,this.config=a,this.requestContext=c,this.isGlobal=d,this._fullNamespace=void 0!==t&&""!==t?t+"."+e:e,this.selectState=this.selectState.bind(this),this._subspace=(0,s.Z)(this.selectState,this.namespace)(r);const l=this.perfTimeline=this.tryGetPerfTimeline(e);this.fetch=(0,o.Ud)({perfTimeline:l}),n.addSubReducerForConnector(this)}getCurrentState(){const e=this.store.getState()[i.B.connectorStateKey];if(!this.isGlobal){const t=this.rootReducer.globalConnectors();0!==t.length&&t.forEach((t=>{(0,c.Z)(e,t.namespace,t.getCurrentState())}))}return e}onApplicationStart(){}selectState(e){return e[this.namespace]}tryGetPerfTimeline(e){const t=e.split("_"),[n]=t,i=t[t.length-1];return(0,a.oA)(n,i)}}},99551:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var i=n(58043),r=n(32771);class o{static handleAction(e,t,n){return!!o.endsWith(e.type+"",t.type)&&(n.apply(n,e.params),!0)}static handleActions(e,t,n){const r=e.type+"";return!!(0,i.Z)(t,(e=>o.endsWith(r,e.type)))&&(n.apply(n,e.params),!0)}static safeHandleAction(e,t,n){if(!o.endsWith(e.type+"",t.type))throw"The action payload does not match the action type.";return n.apply(n,e.params),!0}}o.endsWith=String.prototype.endsWith?function(e,t){return e.endsWith(t)}:r.Z},17556:function(e,t,n){"use strict";n.d(t,{C:function(){return h}});var i=n(96531);function r(e,t,n,i){let r;return e&&(r=e.parentNamespace?e.parentNamespace+"."+e.namespace:e.namespace),{key:r,experienceInstanceId:i,type:t,params:n}}function o(e,t){return e?e.store.dispatch(t):i._.getInstance().store.dispatch(t)}var a=n(24240);class s{get send(){return this.dispatchAction()}constructor(e,t,n){this.type=e,this.observers=t,this.connector=n}dispatchAction(){return function(...e){const t=this.tryGetPerfTimeline(),n=t&&t.startMeasure("action",this.type).endMeasure,{payload:i,result:s}=this.getDispatchResult(e);return this.observers.forEach((e=>{try{e.filterConnector&&this.connector!==e.filterConnector||e.observer(i)}catch(t){console.log(`Error calling observer: ${JSON.stringify(e.observer)}, with error: ${t}`)}if(e.dispatchConnector){const t=r(e.dispatchConnector,a.B.renderAction,[],void 0);o(e.dispatchConnector,t)}})),n&&n(),s}}}class c extends s{constructor(e,t,n){super(e,t,n)}getDispatchResult(e){const t=r(this.connector,this.type,e,void 0);return{payload:t,result:o(this.connector,t)}}tryGetPerfTimeline(){return this.connector.perfTimeline}}var d=n(42933);class l extends s{constructor(e,t,n){super(e,t,null),this.experienceInstanceId=n}getDispatchResult(e){const t=r(void 0,this.type,e,this.experienceInstanceId);return{payload:t,result:o(void 0,t)}}tryGetPerfTimeline(){return(0,d.oA)("GlobalActionSender",this.experienceInstanceId||"unknown")}}var u=n(55524);let p=1;class h{get observers(){return u.Gq.get(this.observerKey,(()=>[]))}set observers(e){u.Gq.set(this.observerKey,e)}constructor(e){this.type=e,this.observerKey=`__ActionMap_${e}_${p++}`}getActionSender(e){let t;if(t="string"==typeof e?i._.getInstance().rootReducer.connector(e):e,t)return new c(this.type,this.observers,t)}getGlobalActionSender(e){return new l(this.type,this.observers,e)}registerObserver(e,t){const{dispatchConnector:n,filterConnector:i}=t||{};this.observers.push({observer:e,dispatchConnector:n,filterConnector:i})}unregisterObserver(e){const t=this.observers.findIndex((t=>t.observer===e));t>-1&&this.observers.splice(t,1)}unregisterObservers(){this.observers=[]}}},67044:function(e,t,n){"use strict";n.d(t,{K0:function(){return f},Ki:function(){return v},oU:function(){return m}});var i=n(3104),r=n(66701),o=n(77036),a=n(95153),s=n(7476),c=n(88826),d=n(96531),l=n(55524),u=n(31558),p=n(68963);const h="GetDataConnector.skippedConnectors",g={};async function m(e){return e?await d._.getInstance().rootReducer.getDataConnector(e):null}function f(e){return d._.getInstance().rootReducer.connector(e)}async function v(e){const t=(0,i.M)(e);if(l.Gq.get(h,(()=>new Set)).has(t))return Promise.resolve();const n=l.Gq.get("dataConnectorLoadPromiseMap",(()=>({})));let m=n[t];if(m)return m;let f=g[t];return f||(f=r.n.loadExperience(t).catch((()=>{delete g[t]})),g[t]=f),m=new Promise((async t=>{try{const t=(0,i.M)(e),n=(0,i.Fr)(e),r=o.U.getConfig(n),s=await Promise.all([r,f]),c=s[0].properties,l=s[1],h=l[t+"Connector"],g=l[t+"Reducer"],m=d._.getInstance(),v=new h(t,"",m.rootReducer,new g(c),m.store,c,new a.fH);(0,u.N)()&&(0,p.T3)(t,v.getCurrentState())}catch(e){const t={...s.NGC};(0,c.OO)(e,t,"Loading data connector failed.")}t()})),n[t]=m,m}},94746:function(e,t,n){"use strict";n.d(t,{s:function(){return o}});var i,r=n(17556);class o{}(i=o).signedInStatus=new r.C("SignedInStatus"),i.signedInStatusConfirmed=new r.C("SignedInStatusConfirmed"),i.useEnterpriseCompliance=new r.C("UseEnterpriseCompliance"),i.useHistory=new r.C("UseHistory"),i.updateLocation=new r.C("UpdateLocation")},66365:function(e,t,n){"use strict";n.d(t,{n:function(){return S}});var i=n(85205),r=n(76166),o=n(83102),a=n(65505),s=n(10788),c=n(4619),d=n(21789),l=n(31558),u=n(54911),p=n(99551),h=n(94746),g=n(19464);class m{reduce(e,t){if(!e){return{signedIn:this.getSignInStatus(),useEnterpriseCompliance:!1,useHistory:!1}}if(!t)return e;let n,i=!1;return i=p.G.handleAction(t,h.s.signedInStatus,(t=>{n={...e,signedIn:t}})),i=i||p.G.handleAction(t,h.s.useEnterpriseCompliance,(t=>{n={...e,useEnterpriseCompliance:t}})),i=i||p.G.handleAction(t,h.s.useHistory,(t=>{n={...e,useHistory:t}})),i=i||p.G.handleAction(t,h.s.updateLocation,(t=>{n={...e,location:t}})),n||e}getSignInStatus(){if((0,a.TJ)()){return(0,s.XS)().isSignedIn}if(!(0,l.N)()){const{oneServiceHeaders:e}=(0,u.s)();if(e&&Object.keys(e).length>0&&e.authorization)return o.Hy.SignedIn}if((0,a.hk)())return o.Hy.Unknown;if((0,a.P8)())return(0,c.x6)()?o.Hy.SignedIn:o.Hy.NotSignedIn;const e=d.jG.AuthCookieName;if(""==e)return o.Hy.NotSignedIn;const t="app_anon"==e?"aace":"ace";return(0,g.ej)(t)?o.Hy.SignedIn:o.Hy.NotSignedIn}}var f=n(65774),v=n(23549);class y extends r.e{constructor(e,t,n,i,r,o,a){super(e,t,n,i,r,o,a,!0),this.initOverrides=()=>{}}static initialize(e,t,n){let r=e.connector(i.z.SharedState);return r||(r=new y(i.z.SharedState,"",e,new m,t,void 0,n)),(0,f.A)(r),r}getSignInState(){return this.getCurrentState().signedIn}setSignInState(e){const t=this.getCurrentState().signedIn;t!==e?(h.s.signedInStatus.getActionSender(this).send(e),v.M0.addOrUpdateTmplString(`auth-stateChange-${t}-${e}`)):h.s.signedInStatusConfirmed.getActionSender(this).send()}useEnterpriseCompliance(){return this.getCurrentState().useEnterpriseCompliance}}const S=y.initialize},82656:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var i=n(3104);function r(e){return"string"==typeof(t=(0,i.Fr)(e))?t:t.instanceSrc;var t}},69686:function(e,t,n){"use strict";n.d(t,{ITY:function(){return r}});const i={AboveRiverBlock:"above-river-block",ActionTray:"action-tray",AicharacterPaintPage:"aicharacter-paint-page",ArticleCloseButton:"article-close-button",ArticleFre:"article-fre",ArticleRelatedStories:"article-related-stories",ArticleTopComment:"article-top-comment",AutosCarousel:"autos-carousel",AutosEntityCardWC:"autos-entity-card-wc",AutosEntitySpan:"autos-entity-span",AutosGarageCard:"autos-garage-card",AutosMarketplaceCard:"autos-marketplace-card",BackToTopButton:"back-to-top-button",BackgroundGallery:"background-gallery",BackgroundImageWC:"background-image",BingDailyQuizCard:"bing-daily-quiz-card",BingHealthCard:"bing-health-card",BingHealthFitnessCard:"bing-health-fitness-card",BingHomepageFeed:"bing-homepage-feed",BingThisOrThatCard:"bing-this-or-that-card",BoostAdCard:"boost-ad-card",BreakingNewsWC:"breaking-news-wc",CalendarCard:"calendar-card",CardActionWC:"card-action",CashbackCarouselCard:"cashback-carousel-card",CasualGamesBanner:"casual-games-banner",CasualGamesCard:"casual-games-card",CasualGamesCarouselCard:"casual-games-carousel-card",CasualGamesFeed:"casual-games-feed",CasualGamesFrame:"casual-games-frame",CasualGamesGameCardCarousel:"casual-games-game-card-carousel",CasualGamesGameplay:"casual-games-gameplay",CasualGamesGameplayRightRail:"casual-games-gameplay-right-rail",CasualGamesHub:"casual-games-hub",CasualGamesLandingV2:"casual-games-landing-v2",CasualGamesProng2CarouselCard:"casual-games-prong2-carousel-card",CasualGamesStripeCarouselCard:"casual-games-stripe-carousel-card",CasualGamesUserProfilePreview:"casual-games-user-profile-preview",ChannelDesktopContent:"channel-desktop-content",ChannelEntryPoint:"channel-entry-point",ChannelFilterCard:"channel-filter-card",ChannelInterestsManager:"channel-interests-manager",ChannelList:"channel-list",ChannelMobileContent:"channel-mobile-content",ChannelPage:"channel-page",ChannelStore:"channel-store",ChannelsNews:"channels-news",CmsBaseExperience:"cms-base-experience",CmsExperience:"shopping-cms",CodexBingChat:"codex-bing-chat",ColdStartWC:"cold-start",CommonAutoSuggest:"common-auto-suggest",CommonHeaderWC:"common-header",CommonSearchBoxEdgeNext:"common-search-box-edgenext",CommonSettingsEdgeNext:"common-settings-edgenext",CommunityCard:"community-card",CommunityComposeCopilotWC:"community-compose-copilot",CommuteCard:"commute-card",CompanyNewsCard:"company-news-card",ConditionalBannerHpWC:"conditional-banner-hp-wc",ConditionalBannerWC:"conditional-banner-wc",ConsumptionFeedWC:"consumption-feed-wc",ConsumptionPage:"consumption-page",ContentFlexInfoPane:"content-flex-info-pane",ContentGroup:"content-group",ContentGroupCard:"content-group-card",ContentTts:"content-tts",ContextualFeedbackWC:"contextual-feedback-wc",CpcMonetizationDashboard:"cpc-monetization-dashboard",DailyGreetingCard:"daily-greeting-card",DailyTriviaCard:"daily-trivia-card",DashboardFallback:"dashboard-fallback",DashboardSettings:"dashboard-settings",DebugButton:"debug-button",DenseCard:"dense-card",DesktopFeedHubWC:"desktop-feed-hub",DesktopFeedViewsWC:"desktop-feed-views",DesktopFeedWC:"desktop-feed",DevTools:"dev-tools",DidYouKnowImageWCExperience:"did-you-know-image-wc-experience",DidYouKnowWCExperience:"did-you-know-wc-experience",DigestCard:"digest-card",DisplayAdsWC:"display-ads",DistributionFeed:"distribution-feed",DistributionHeader:"distribution-header",DistributionPage:"distribution-page",DistributionPivotsNav:"distribution-pivots-nav",DonationNpoCard:"donation-npo-card",EdgeChromiumPageWC:"edge-chromium-page",EdgeShopping:"edge-shopping",ElectionCard:"election-card",EmmxEntrypoint:"emmx-entrypoint",EntertainmentCard:"entertainment-card",EntertainmentPremierCard:"entertainment-premier-card",EntryPointHpMobile:"entry-point-hp-mobile",EntryPointHpWC:"entry-point",EntryPointMobileHub:"entry-point-mobile-hub",EntryPointViewsWC:"entry-point-views",EoabViews:"eoab-views",EoabViewsAutos:"eoab-views-autos",EoabViewsFinance:"eoab-views-finance",EoabViewsShopping:"eoab-views-shopping",EoabViewsTravel:"eoab-views-travel",EsportsCard:"esports-card",EsportsLivestreamCarouselWC:"esports-livestream-carousel-wc",EsportsStreamsCard:"esports-streams-card",EventHubFollowHeader:"event-hub-follow-header",ExampleOfferCard:"example-offer-card",ExperiencePreviewCta:"experience-preview-cta",FamilyCard:"family-card",FeedContainer:"feed-container",FeedLevelFeedbackWC:"feed-level-feedback-wc",FeedNavigationHp:"feed-navigation-hp",FeedbackCard:"feedback-card",FeedbackDialogWC:"feedback-dialog-wc",FeedbackLinkWC:"feedback-link",FinanceCarousel:"finance-carousel",FloatButtonGroupWC:"float-button-group",FollowingFreConfirmation:"following-fre-confirmation",FollowingFreFullWidth:"following-fre-full-width",FoodSimilarItems:"food-similar-items",ForumDealsPage:"forum-deals-page",FrequentSitesCardWC:"frequent-sites-card",GameCard:"game-card",GamingChannel:"gaming-channel",GamingCompeteCard:"gaming-compete-card",GamingDiscoverStrip:"gaming-discover-strip",GamingGamerModeUpsellCard:"gaming-gamer-mode-upsell-card",GamingInterestGroupCard:"gaming-interest-group-card",GamingMatchCard:"gaming-match-card",GamingMediaCarousel:"gaming-media-carousel",GamingPage:"gaming-page",GamingPersonalizationCard:"gaming-personalization-card",GamingRecentlyPlayedCard:"gaming-recentlyplayed-card",GamingRecommendedCard:"gaming-recommended-card",GamingRedditCard:"gaming-reddit-card",GamingRewardsCard:"gaming-rewards-card",GamingStreamCard:"gaming-stream-card",GamingTournamentCard:"gaming-tournament-card",GamingUpcomingCard:"gaming-upcoming-card",GamingVideoCard:"gaming-video-card",GeneralElections:"general-elections",GridViewFeed:"grid-view-feed",GroceryCouponSdCard:"grocery-coupon-sd-card",HeaderWindowsShellWC:"header-windows-shell-wc",HealthArticlesCardWC:"health-articles-card",HealthAugmentCard:"health-augment-card",HealthDietPlanScheduleWC:"health-diet-plan-schedule",HealthFeedbackWC:"health-feedback",HealthFitnessCarousel:"health-fitness-carousel",HealthFoodHealtheffectsWC:"health-food-healtheffects",HealthFoodRecipesWC:"health-food-recipes",HealthHubHealthapp:"healthhub-healthapp",HealthInterestsManager:"health-interests-manager",HealthQnAWCExperience:"health-qna-card-wc",HealthRiverWC:"health-river-wc",HealthTipWC:"health-tip-wc",HealthTopSpan:"health-top-span",HealthTopicFlyout:"health-topic-flyout",HealthTranslationWC:"health-translation",HealthWidget:"health-widget",HeroContainerWC:"hero-container-wc",HolidayEffects:"holiday-effects",HomepageFooter:"homepage-footer",HomepageHeader:"homepage-header",HoroscopeAnswerCardWC:"horoscope-answer-card",HotListCard:"hot-list-card",ImageSearchWC:"image-search-wc",ImmersiveFullscreen:"immersive-fullscreen",IndustryNewsCard:"industry-news-card",InspirationCard:"inspiration-card",InterestFreCard:"interest-fre-card",InterestManagementCard:"interest-management-card",InterestsManager:"interests-manager",InterestsWC:"interests-wc",IssueReportingWC:"issue-reporting",LanguageToggleWC:"language-toggle",LearningNasaCard:"learning-nasa-card",LearningTriviaCard:"learning-trivia-card",LinkedInCard:"linked-in-card",LocalHubHeader:"local-hub-header",LocalizeStringsTempExperience:"localize-strings-temp-experience",Lottery:"lottery-card",MailSignoutBanner:"mail-signout-banner",MangaCard:"manga-card",MarketLanguageToggleWC:"market-language-toggle",MarketplaceCardWC:"marketplace-card",MeControlWC:"me-control",MeStripeWC:"me-stripe",MicrosoftEdgeWidget:"microsoft-edge-widget",MicrosoftFeedCard:"microsoft-feed-card",MobileAppUpsell:"mobile-app-upsell",MobileChannelSlider:"mobile-channel-slider",MobileConsumptionPage:"mobile-consumption-page",MobileFeedHub:"mobile-feed-hub",MobileFeedWC:"mobile-feed-wc",MobileFooter:"mobile-footer",MobileHeader:"mobile-header",MobileMarketSelector:"mobile-market-selector",MobileNotification:"mobile-notification",MobilePopupWindow:"mobile-popup-window",MobileRewardsCard:"mobile-rewards-card",MobileShoppingCard:"mobile-shopping-card",MobileStoryViewer:"mobile-story-viewer",MobileTip:"mobile-tip",MobileTrendingSearchCard:"mobile-trending-search-card",MobileWidget:"mobile-widget",MoneyAugmentCard:"money-augment-card",MoneyCopilotWC:"money-copilot",MoneyInfo:"money-info",MoneyInfoCardWC:"money-info-card",MoneyInfoSpan:"money-info-span",MsRewardsWC:"ms-rewards",MsaAddressForm:"msa-address-form",NativeAdWC:"native-ad-wc",NavigationPageExperience:"navigation-page-experience",NearbyCard:"nearby-card",NewsGroupsCard:"news-groups-card",NewsGuard:"news-guard",NewsHeadlineBelowSearchbox:"news-headline-below-searchbox",NewsSegmentCarousel:"news-segment-carousel",NewsbarFeedFooter:"newsbar-feed-footer",NewsbarFeedWC:"newsbar-feed",NewsbarUpsellWC:"newsbar-upsell",NewsletterSignup:"newsletter-signup",NewsletterSignupPage:"newsletter-signup-page",NextdoorCard:"nextdoor-card",NextdoorPage:"nextdoor-page",NotificationBellWC:"notification-bell",NotificationMiniCard:"notification-mini-card",NudgeSpotlightCard:"nudge-spotlight-card",NurturingBanner:"nurturing-banner",NurturingCoachMark:"nurturing-coach-mark",OfficeCoachmark:"office-coachmark",OfficeDocumentsTableWC:"office-documents-table",OfficeLeftRail:"office-leftrail",OnThisDayCardSmall:"on-this-day-card-small",OnThisDayCardWC:"on-this-day-card",OverlayWC:"overlay-wc",PageRefreshWC:"page-refresh",PanoPage:"pano-page",PartnerUpsellCard:"partner-upsell-card",PeregrineDocs:"peregrine-docs",PersonalFinanceExpenseDistribution:"personal-finance-expense-distribution",PersonalFinanceTransactionsCard:"personal-finance-transactions-card",PersonalizeNavButton:"personalize-nav-button",PhotoCard:"photo-card",PillWC:"pill-wc",PivotsMobileWC:"pivots-mobile",PollsCardWC:"polls-card",PoweredbyLegendWC:"poweredby-legend",PrayerTimesCard:"prayer-times-card",PremiumProfilePromoCard:"premium-profile-promo-card",PrideEventCard:"pride-event-card",PrismCards:"prism-cards",PrismCarouselCard:"prism-carousel-card",PrismFeed:"prism-feed",PrismSdCard:"prism-sd-card",ProductivityHub:"productivity-hub",ProfileArticles:"profile-articles",ProfilePromoCard:"profile-promo-card",PromotedAdWC:"promoted-ad-wc",PublisherCarousel:"publisher-carousel",PublisherList:"publisher-list",PublisherSubscribeFollowButton:"publisher-subscribe-follow-button",PullToRefresh:"pull-to-refresh",PulseEdgenext:"pulse-edgenext",Qna:"qna-card",QnaFeed404Page:"qna-feed-404-page",QnaFeedCard:"qna-feed-card",QnaFeedCardMenu:"qna-feed-card-menu",QnaFeedCarousel:"qna-feed-carousel",QnaFeedCategoriesMenu:"qna-feed-categories-menu",QnaFeedExploreTopics:"qna-feed-explore-topics",QnaFeedList:"qna-feed-list",QnaFeedMyTopics:"qna-feed-my-topics",QnaFeedRelatedQuestions:"qna-feed-related-questions",QnaFeedReportCard:"qna-feed-report-card",QnaFeedSuggestedTopics:"qna-feed-suggested-topics",QnaFeedTopicDetail:"qna-feed-topic-detail",QnaFeedTrendingQuestions:"qna-feed-trending-questions",QuizCard:"quiz-card",ReactionBreakdownDialog:"reaction-breakdown-dialog",RealEstateCard:"real-estate-card",RecipesSdCard:"recipes-sd-card",RecommendedInterests:"recommended-interests",RecommendedSearchCarouselWC:"recommended-search-carousel",RecommendedSearchesCard:"recommended-searches-card",RecommendedSitesWC:"recommended-sites",RelatedSearchSpan:"related-search-span",RewardsCardWC:"rewards-card",RewardsDailyCheckinCard:"rewards-daily-checkin-card",RewardsDailySetCard:"rewards-daily-set-card",RichCalendarCard:"rich-calendar-card",RichCalendarLandingPage:"rich-calendar-landing-page",RightRailProviderCarousel:"right-rail-provider-carousel",ScrollDownButton:"scroll-down-button",SdCardMaskWC:"sd-card-mask",SearchBoxWC:"search-box-wc",SearchHistoryEdgeNextWC:"search-history-edgenext",SelectCarousel:"select-carousel",SharedHeroNewsCard:"shared-hero-news-card",SharedLinks:"shared-links",SharepointNewsCard:"sharepoint-news-card",ShoppingAllStoresPage:"shopping-all-stores-page",ShoppingArticlePage:"shopping-article-page",ShoppingAugmentCard:"shopping-augment-card",ShoppingBWMCard:"shopping-bwm-card",ShoppingBWMCarousel:"shopping-bwm-carousel",ShoppingBingProductDetails:"shopping-bing-product-details",ShoppingBlackjackDealPage:"shopping-blackjack-deal-page",ShoppingBlackjackPage:"shopping-blackjack-page",ShoppingBuyingGuide:"shopping-buying-guide",ShoppingBuyingGuidePremiumCard:"shopping-buying-guide-premium-card",ShoppingBuyingGuidesCard:"shopping-buying-guides-card",ShoppingCardWC:"shopping-card-wc",ShoppingCarouselProngWC:"shopping-carousel-prong-wc",ShoppingCarouselWC:"shopping-carousel",ShoppingCart:"shopping-cart",ShoppingCashback:"shopping-cashback",ShoppingCategoryPage:"shopping-category-page",ShoppingCheckoutModal:"shopping-checkout-modal",ShoppingCheckoutPage:"shopping-checkout-page",ShoppingColdStart:"shopping-cold-start",ShoppingCouponsPage:"shopping-coupons-page",ShoppingDealsHomePage:"shopping-deals-home-page",ShoppingDebugPage:"shopping-debug-page",ShoppingEdgeInsightsCard:"shopping-edge-insights-card",ShoppingEntryBaseExperience:"shopping-entry-base-experience",ShoppingEventsDealCard:"shopping-events-deal-card",ShoppingFashionCarouselWC:"shopping-fashion-carousel",ShoppingForumFavorites:"shopping-forum-favorites",ShoppingForumHome:"shopping-forum-home",ShoppingForumLandingPage:"shopping-forum-landing-page",ShoppingForumOrderCancelPage:"shopping-forum-order-cancel-page",ShoppingForumOrderConfirmation:"shopping-forum-order-confirmation",ShoppingForumOrderDetails:"shopping-forum-order-details",ShoppingForumOrdersPage:"shopping-forum-orders-page",ShoppingForumProductPage:"shopping-forum-product-page",ShoppingForumRefundDetailsPage:"shopping-forum-refund-details-page",ShoppingForumRefundOrderPage:"shopping-forum-refund-order-page",ShoppingForumReturnDetailsPage:"shopping-forum-return-details-page",ShoppingForumReturnOrderPage:"shopping-forum-return-order-page",ShoppingForumSellerPage:"shopping-forum-seller-page",ShoppingGrid:"shopping-grid",ShoppingGroupedCarousel:"shopping-grouped-carousel",ShoppingGuidesPage:"shopping-guides-page",ShoppingHomepage:"shopping-homepage",ShoppingInspiration:"shopping-inspiration",ShoppingLeaderboard:"shopping-leaderboard",ShoppingLiveEmbedPage:"shopping-live-embed-page",ShoppingLiveFeedPage:"shopping-live-feed-page",ShoppingLiveProductDetailsPage:"shopping-live-product-details-page",ShoppingModal:"shopping-modal",ShoppingModelOverlay:"shopping-model-overlay",ShoppingMomentInTimePage:"shopping-moment-in-time-page",ShoppingMultiTabCarousel:"shopping-multi-tab-carousel",ShoppingPageBase:"shopping-page-base",ShoppingPageContent:"shopping-page-content",ShoppingPivotFeed:"shopping-pivot-feed",ShoppingProductDetailPage:"shopping-product-detail-page",ShoppingProductPage:"shopping-product-page",ShoppingRiverCard:"shopping-river-card",ShoppingSdCard:"shopping-sd-card",ShoppingSearch:"shopping-search",ShoppingSearchResultPage:"shopping-search-result-page",ShoppingShippingAddress:"shopping-shipping-address",ShoppingShopTheLookPage:"shopping-shopthelook-page",ShoppingTopSpan:"shopping-top-span",ShoppingVerticalListsCard:"shopping-vertical-lists-card",ShoppingViewsCarousel:"shopping-views-carousel",ShorelineArticleFeed:"shoreline-article-feed",SignInControlWC:"sign-in-control",SignInFlyoutWC:"sign-in-flyout",SignalOverlay:"signal-overlay",SocialAvatar:"social-avatar",SocialBarWC:"social-bar-wc",SocialCommentBox:"social-comment-box",SocialCommentWC:"social-comment-wc",SocialEntrypoint:"social-entrypoint",SocialLeadGenInArticle:"social-lead-gen-in-article",SocialNotification:"social-notification",SocialPostEditorWC:"social-post-editor",SocialProfileActionMenu:"social-profile-action-menu",SocialProfileAppeal:"social-profile-appeal",SocialProfileCard:"social-profile-card",SocialProfilePromotion:"social-profile-promotion",SocialProfileRejectionDetails:"social-profile-rejection-details",SocialProfileTopics:"social-profile-topics",SocialRelatedSources:"social-related-sources",SocialReportMenu:"social-report-menu",SocialRewardsMedal:"social-rewards-medal",SocialRewardsPromotion:"social-rewards-promotion",SocialStarRating:"social-star-rating",SocialSubscriptionBanner:"social-subscription-banner",SocialSubscriptionNotification:"social-subscription-notification",SocialSubscriptionOverlay:"social-subscription-overlay",SocialSubscriptionOverlaySummary:"social-subscription-overlay-summary",SocialSubscriptionPaywall:"social-subscription-paywall",SocialSubscriptionUpsell:"social-subscription-upsell",SocialSupportResult:"social-support-result",SocialTipHistory:"social-tip-history",SocialTipIntroduction:"social-tip-introduction",SocialTipPromotion:"social-tip-promotion",SocialTipPromotionInArticle:"social-tip-promotion-in-article",SocialTipSelection:"social-tip-selection",SportsAroundTheLeague:"sports-around-the-league",SportsAugmentCard:"sports-augment-card",SportsBackgroundUx:"sports-background-ux",SportsBrackets:"sports-brackets",SportsCardWC:"sports-card",SportsCommentary:"sports-commentary",SportsCountdownTimer:"sports-countdown-timer",SportsCricketLayoutManager:"sports-cricket-layout-manager",SportsCricketLeagueStats:"sports-cricket-league-stats",SportsCricketMatchRow:"sports-cricket-match-row",SportsCricketPartnerships:"sports-cricket-partnerships",SportsCricketRankings:"sports-cricket-rankings",SportsCricketScorecard:"sports-cricket-scorecard",SportsCricketScoresAndSchedule:"sports-cricket-scores-and-schedule",SportsEntityHeader:"sports-entity-header",SportsFeaturedMatchesCard:"sports-featured-matches-card",SportsFrePanel:"sports-fre-panel",SportsFullStandings:"sports-full-standings",SportsFullStats:"sports-full-stats",SportsGameInformation:"sports-game-information",SportsGameScore:"sports-game-score",SportsGameSummary:"sports-game-summary",SportsGameSummaryFull:"sports-game-summary-full",SportsGameTimeline:"sports-game-timeline",SportsGcPlayerStats:"sports-gc-player-stats",SportsGcTeamStats:"sports-gc-team-stats",SportsGptAnalysis:"sports-gpt-analysis",SportsHeadlinesFull:"sports-headlines-full",SportsHeadlinesHeader:"sports-headlines-header",SportsHeadlinesMainStory:"sports-headlines-main-story",SportsHeadlinesStoryCarousel:"sports-headlines-story-carousel",SportsHeadlinesTimelines:"sports-headlines-timelines",SportsInfo:"sports-info",SportsInfoSpan:"sports-info-span",SportsLayoutRenderer:"sports-layout-renderer",SportsMatchRow:"sports-match-row",SportsMedalCountList:"sports-medal-count-list",SportsMobileTabPanel:"sports-mobile-tab-panel",SportsOlympicCardWC:"sports-olympic-card",SportsOlympicsScheduleFull:"sports-olympics-schedule-full",SportsPersonMatchRow:"sports-person-match-row",SportsPersonalizationStrip:"sports-personalization-strip",SportsPinLiveMatch:"sports-pin-live-match",SportsPlayerBio:"sports-player-bio",SportsPlayerInsights:"sports-player-insights",SportsPreviousMatchups:"sports-previous-matchups",SportsPromoCard:"sports-promo-card",SportsRankingsFull:"sports-rankings-full",SportsRetentionFull:"sports-retention-full",SportsScoresAndSchedule:"sports-scores-and-schedule",SportsScoresAndScheduleFull:"sports-scores-and-schedule-full",SportsSquad:"sports-squad",SportsStandings:"sports-standings",SportsStandingsList:"sports-standings-list",SportsStatLeaders:"sports-stat-leaders",SportsStats:"sports-stats",SportsTabLayout:"sports-tab-layout",SportsTeamFormation:"sports-team-formation",SportsTeamProbability:"sports-team-probability",SportsTennisScoresAndScheduleFull:"sports-tennis-scores-and-schedule-full",SportsTennisTournamentInfo:"sports-tennis-tournament-info",SportsTournamentInfo:"sports-tournament-info",SportsTournamentLeaderboard:"sports-tournament-leaderboard",SportsTournamentMatchRow:"sports-tournament-match-row",SportsTournamentResultsAndSchedule:"sports-tournament-result-and-schedule",SportsTournamentSchedule:"sports-tournament-schedule",SportsTournamentStandings:"sports-tournament-standings",SportsUnavailablePlayers:"sports-unavailable-players",SportsVideoList:"sports-video-list",SportsWorldCupCardWC:"sports-worldcup-card",SpotlightCardWC:"spotlight-card",StarterKitWC:"starter-kit",StickyPeek:"sticky-peek",StoryCarousel:"story-carousel",StreaksBadgeWC:"streaks-badge",StripeWC:"stripe-wc",SuggestedChannelPrompt:"suggested-channel-prompt",SummaryCardWC:"summary-card-wc",SuperBreakingNews:"super-breaking-news",SuperCoachMarkWC:"super-coach-mark",SuperListCard:"super-list-card",SuperNav:"super-nav",SuperNavCoachMark:"super-nav-coach-mark",SuperappBannerWC:"superapp-banner",SuperappUpsellCardWC:"superapp-upsell-card",TabbedFeedWC:"tabbed-feed-card",ThemePickerWC:"theme-picker",TipsCard:"tips-card",ToastWC:"ms-toast",TodoCardWC:"todo-card",TopSitesBookmarks:"top-sites-bookmarks",TopSitesEdgeNextWC:"top-sites-edgenext",TopSitesNewsbar:"top-sites-newsbar",TopicTags:"topic-tags",TrafficCardWC:"traffic-card",TrafficHero:"traffic-hero",TranslateTemporary:"translate-temporary",TravelArticleCard:"travel-article-card",TravelArticlePageCard:"travel-article-page-card",TravelArticlePill:"travel-article-pill",TravelCard:"travel-card",TravelCarousel:"travel-carousel",TravelCollectionCard:"travel-collection-card",TravelDestination:"travel-destination",TravelDestinationBanner:"travel-destination-banner",TravelDestinationDetailsBanner:"travel-destination-details-banner",TravelFeed:"travel-feed",TravelFlightCarousel:"travel-flight-carousel",TravelHotelCarousel:"travel-hotel-carousel",TravelInspirationCardWC:"travel-inspiration-card-wc",TravelLandingPage:"travel-landing-page",TravelMsnHpCard:"travel-msn-hp-card",TravelSaveButton:"travel-save-button",TravelSdCarrentalsCard:"travel-sd-carrentals-card",TravelSdDestinationsCard:"travel-sd-destinations-card",TravelSdFlightsCard:"travel-sd-flights-card",TravelSdHotelsCard:"travel-sd-hotels-card",TravelSdThemesCard:"travel-sd-themes-card",TravelTabCarousel:"travel-tab-carousel",TravelTourActivityCard:"travel-tour-activity-card",TrendingNowWC:"trending-now-card",TrendingSearchCard:"trending-search-card",TrendingTopics:"trending-topics-card",UgcCreatorHomepage:"ugc-creator-homepage",UnifiedMobileFeed:"unified-mobile-feed",VerticalLeftNav:"vertical-left-nav",VideoCardWC:"video-card",VideoDetails:"video-details",VideoDetailsKit:"video-details-kit",VideoShoppingCard:"video-shopping-card",VideoShoppingCarouselCard:"video-shopping-carousel-card",ViewsCoachmark:"views-coachmark",ViewsNativeAd:"views-native-ad",ViewsRail:"views-rail",VoiceSearchWC:"voice-search-wc",WaffleWC:"waffle-wc",WalletPersonalizedOfferSdCardWC:"wallet-personalized-offer-sd-card-wc",WatchFilterChannel:"watch-filter-channel",WatchTakeABreakHeader:"watch-take-a-break-header",WatchVideosVerticalCarousel:"watch-videos-vertical-carousel",WatchWC:"watch-wc",WaterTrackerCard:"water-tracker-card",WaterfallViewFeed:"waterfall-view-feed",WeatherCardWC:"weather-card",WeatherCurrentWC:"weather-current",WeatherFeedWC:"weather-feed-wc",WeatherForecastDayNightWC:"weather-forecast-day-night",WeatherForecastDayWC:"weather-forecast-day",WeatherForecastHistoryWC:"weather-forecast-history",WeatherForecastPerHourWC:"weather-forecast-per-hour",WeatherForecastSunMoonPhaseWC:"weather-forecast-sun-moon-phase",WeatherForecastSunMoonWC:"weather-forecast-sun-moon",WeatherHeroExperience:"weather-hero-experience",WeatherHistoricalRecordWC:"weather-historical-record",WeatherHistoricalTemperatureWC:"weather-historical-temperature",WeatherHourlyHistogramWC:"weather-hourly-histogram",WeatherImmersiveForecastWC:"weather-immersive-forecast-wc",WeatherInfoSpan:"weather-info-span",WeatherLifeEntryWC:"weather-life-entry",WeatherLocationCardWC:"weather-location-card",WeatherLocationSearchPhoneWC:"weather-location-search-phone",WeatherLocationWC:"weather-location",WeatherMapGroupSwitcherButtonWC:"weather-map-group-switcher-button",WeatherMapLegendWC:"weather-map-legend",WeatherMapTimelineWC:"weather-map-timeline",WeatherMapWC:"weather-map",WeatherMapsRotationWC:"weather-maps-rotation",WeatherMinimapWC:"weather-minimap",WeatherMonthlySummaryWC:"weather-monthly-summary",WeatherOneLiner:"weather-one-liner",WeatherOverviewWC:"weather-overview",WeatherPageWC:"weather-page",WeatherTodayHistoryWC:"weather-today-history",WeatherTodayMiniWC:"weather-today-mini",WeatherTravelCarousel:"weather-travel-carousel",WeatherVideoEntryWC:"weather-video-entry",WelcomeGreetingLight:"welcome-greeting-light",WelcomeGreetingWC:"welcome-greeting",WidgetPickerWC:"widget-picker-wc",WidgetsDynamicFeed:"widgets-dynamic-feed",WidgetsHomePage:"widgets-home-page",WidgetsNotificationsCard:"widgets-notifications-card",WidgetsStartFeed:"widgets-start-feed",WinAppWC:"win-app-wc",WindowsOfficeFeed:"windows-office-feed",WindowsShellBannersManager:"windows-shell-banners-manager",WindowsShellEntry:"windows-shell-entry",WindowsShellHeader:"windows-shell-header",WindowsShellLocationDialog:"windows-shell-location-dialog",WindowsShellNotificationSettings:"windows-shell-notification-settings",WindowsShellSettingsMenu:"windows-shell-settings-menu",WindowsShellSoftLanding:"windows-shell-soft-landing",WindowsWidgetsHub:"windows-widgets-hub",XboxFeedWC:"xbox-feed-wc",XfeedWC:"xfeed-wc",YandexSearchBoxWC:"yandex-search-box"};function r(e){return i[e]}},64902:function(e,t,n){"use strict";n.d(t,{Fg:function(){return x},pE:function(){return D}});var i,r,o,a,s=n(42933),c=n(7476),d=n(88826),l=n(3104),u=n(66701),p=n(77036);!function(e){e.OneColumn="OneColumn",e.TwoColumn="TwoColumn",e.ThreeColumn="ThreeColumn",e.FourColumn="FourColumn",e.FiveColumn="FiveColumn",e.Any="Any"}(i||(i={})),function(e){e.customExperience="customExperience",e.grid="grid",e.horizontalStack="horizontalStack",e.layout="layout",e.rail="rail",e.verticalStack="verticalStack"}(r||(r={})),function(e){e.actionTrigger="ActionTrigger",e.button="Button",e.heading="Heading",e.peregrineExperience="PeregrineExperience",e.typography="Typography",e.webComponentExperience="WebComponentExperience"}(o||(o={})),function(e){e.riverGridChildren="riverGridChildren"}(a||(a={}));var h,g=n(98619),m=n(50632),f=n(52965),v=n(85663);class y{static registerAppValidator(e){this.expValidatorMap=e.getAllValidators()}static processConfig(e,t){if(!this.expValidatorMap||this.expValidatorMap.size<1||!e||!e.childExpValidatorMap)return e;const n=e.childExpValidatorMap;let i=null,r=null;for(const o in n){const a=n[o];if(this.expValidatorMap.has(o)){this.expValidatorMap.get(o)(a.validationArgs)&&(null===r&&(r=this.expConfigMap.get(t)||e),null===i&&(i=(0,f.Z)(r)),e=this.filterConfig(a,r))}}return i?this.expConfigMap.set(t,i):null===r&&this.expConfigMap.has(t)&&(e=this.expConfigMap.get(t)),e}static removeFromRiverGridChildren(e,t){const n=t.riverGridChildren;return n&&n.forEach((t=>{const n=t.children;if(n){const i=e.childExperienceConfigInfo,r=(0,l.M)(i);t.children=n.filter((e=>{const t=e.childExperienceConfigInfo;return!t||!i||i.instanceId!==t.instanceId||r!==(0,l.M)(t)}))}})),t}static getChildrenDataConnectorConfigInfos(e){const t=[];if(e&&e.dataConnectors&&e.dataConnectors.length>0){const n=y.getOrdinalObjectForCurrentBreakpoint(e.dataConnectors);n&&n.children&&n.children.length>0&&n.children.forEach((e=>{t.push(e)}))}return t}static getMetadataByScreenWidth(e,t){return t.find((t=>t.screenWidth===e))||t.find((e=>e.screenWidth===i.Any))}static getOrdinalObjectForCurrentBreakpoint(e){switch((0,g.Bn)().currentColumnArrangement){case m.K$.c1:return y.getMetadataByScreenWidth(i.OneColumn,e);case m.K$.c2:return y.getMetadataByScreenWidth(i.TwoColumn,e);case m.K$.c3:return y.getMetadataByScreenWidth(i.ThreeColumn,e);case m.K$.c4:return y.getMetadataByScreenWidth(i.FourColumn,e);case m.K$.c5:return y.getMetadataByScreenWidth(i.FiveColumn,e);default:return y.getMetadataByScreenWidth(i.Any,e)}}static compositionOverrideResolver(e,t){const{getCompositionIdOverride:n}=t||{},{composition:i,compositionOverrides:r}=e;return r&&(0,v.isFunction)(n)&&r[n()]||i}static getChildrenExperienceConfigInfos(e,t){const n=[];if(e&&e.composition){const i=y.compositionOverrideResolver(e,t);switch(i.type){case r.rail:case r.horizontalStack:case r.layout:i.page.children.forEach((e=>{void 0!==e.children&&e.children.forEach((e=>{if(!e.children)return;const{childType:t}=e.children;t?t===o.peregrineExperience&&n.push(e.children.child):n.push(e.children)}))}));break;case r.grid:i.grid.rows.forEach((e=>{void 0!==e.columns&&e.columns.forEach((e=>{const{itemType:t}=e.item;t&&t===o.peregrineExperience&&n.push(e.item.child)}))}));break;case r.customExperience:{const e=i;n.push(e.experience);break}}}return n}static filterConfig(e,t){return e&&"string"==typeof e.sectionName&&e.sectionName.toLowerCase()===a.riverGridChildren.toLowerCase()?this.removeFromRiverGridChildren(e,t):t}static resetValidatorMap(){this.expValidatorMap.clear()}static resetConfigMap(){this.expConfigMap.clear()}}(h=y).expValidatorMap=new Map,h.expConfigMap=new Map;var S=n(43356),C=n(69686),w=n(67044),b=n(9791),T=n(43063);const k={DisplayAdsWC:(0,T.V8)("display-ads"),ViewsNativeAd:(0,T.V8)("views-native-ad")};var P=n(31558),A=n(55524);const I="WebComponentLoader.SkippedExperience",E="WebComponentLoader.LoadedExperience",M="WebComponentLoader.ModuleLoadPromiseMap",x=(0,P.N)()?(0,b.Z)(R,(e=>(0,l.B5)(e.configRef))):R,L=()=>A.Gq.get(E,(()=>[]));async function R(e){try{const{configRef:t,configRef:{experienceType:i}}=e;if(A.Gq.get(I,(()=>new Set)).has(i))return;const r=(0,S.gy)(i);r&&r.shouldResolve&&await r.shouldResolve();const o=(0,s.oA)(i,e.instanceId);if((0,P.N)()||L().push(e),window.customElements.get((0,C.ITY)(i)))return void await F(t,o);const a=F(t,o),c=function(e,t){const n=A.Gq.get(M,(()=>({})));let i=n[e];if(i)return i;return i=(0,s.fW)((()=>u.n.loadExperience(e)),"scripts",t),n[e]=i,i}(i,o),d=(await Promise.all([a,c]))[1];await async function(e,t){const i=t[e],r=t[e+"Template"];let o=t[e+"Styles"];if(!(0,P.N)()){const n=t[e+"SSRStyles"];o=n||o}const a=(0,C.ITY)(e),s=function(e,t){if(void 0!==t)return{DisplayAdsWC:(0,T.V8)("display-ads",t),ViewsNativeAd:(0,T.V8)("views-native-ad",t)}[e];return k[e]}(e),c=await Promise.resolve().then(n.bind(n,27815));if(c.FASTElement.define(i,{name:a,template:r,styles:o,...i.definition}),s){class e extends i{}c.FASTElement.define(e,{name:s,template:r,styles:o,...i.definition})}}(i,d)}catch(t){const n={...c.gzO};(0,d.OO)(t,n,"Loading web component experience failed.",void 0,{configInfo:e})}}async function D(e){await Promise.all(e.map((e=>x(e))))}async function F(e,t){const n=await(0,s.fW)((()=>p.U.getConfig(e)),"config",t);if(!n)return;const i=n.properties;if(!i||!i.dataConnectors||i.dataConnectors.length<=0)return;const r=t&&t.startMeasure("loadDataConnectors").endMeasure,o=y.getChildrenDataConnectorConfigInfos(i).map((e=>(0,w.Ki)(e)));await Promise.all(o),r&&r()}},47266:function(e,t,n){"use strict";n.d(t,{l:function(){return A}});var i=n(33940),r=n(77036),o=n(21789),a=n(28904),s=n(42590),c=n(59349),d=n(29330),l=n(10754),u=n(88826),p=n(7476),h=n(21930),g=n(19995),m=n(41074),f=n(43356),v=n(82898),y=n(58616);class S extends Event{constructor(e){super(S.type,{bubbles:!0,composed:!0}),this.complete=e}static isPendingTask(e){var t;return e.type===S.type&&"function"==typeof(null===(t=e.complete)||void 0===t?void 0:t.then)}}S.type="pending-task";var C=n(78951),w=n(31558);const b={};var T=n(26732),k=n(88070);const P="props-token";class A extends a.H{constructor(){super(...arguments),this.ensureObservableBeforeConnect=!1,this.hydratable=!1,this.isSSRRendered=!1,this.needPendingTask=!1}connectedCallback(){this.initializeCore().then((()=>{var e;return this.ttvrEnd=null===(e=this.perfTimeline)||void 0===e?void 0:e.startMeasure("render").endMeasure}))}async initializeCore(){const e=this.getExperienceType(),t=this.perfTimeline=(0,c.Dd)(e,this.instanceId);if(this.initStart=t&&(()=>this.initEnd=t.startMeasure("init").endMeasure),this.fetch=(0,d.Ud)({perfTimeline:t}),(0,l.O8)("WCE.Count"),(0,w.N)())this.hydratable=this.hasAttribute("defer-hydration")||this.hasAttribute("needs-hydration"),this.isSSRRendered=this.hasAttribute("needs-hydration"),this.initializeAsync();else{const e=this.initializeOnServerSide();this.needPendingTask&&this.dispatchEvent(new S(e))}}async initializeOnServerSide(){var e;null===(e=this.initStart)||void 0===e||e.call(this),this.needPendingTask=!1;const t=this.getExperienceType();try{var n;const e=this.getConfigRef();if(!this.config){let t;if("string"!=typeof e)try{t=r.U.getConfigSync(e)}catch(e){}t||(this.needPendingTask=!0,t=await r.U.getConfig(e)),this.config=t.properties}if(this.strings=this.config.localizedStrings,!this.telemetryObject){const e=this.getTelemetryContract();this.telemetryObject=new C.D(e)}const t=this.experienceConnected();t&&(this.needPendingTask=!0,await t),super.connectedCallback(),this.shadowDomPopulated(),null===(n=this.initEnd)||void 0===n||n.call(this)}catch(e){var i,o;null===(i=this.initEnd)||void 0===i||i.call(this,{customSuffix:"error"}),(0,u.OO)(e,p.xuo,`Exception web component experience(${t}) initializeOnServerSide.`,`ssrLayout:${null===(o=window.ssrLayoutState)||void 0===o?void 0:o.selectedFeedDisplaySetting};edgeHeader:${JSON.stringify(window.edgeNTPHeader)}`)}}async initializeAsync(){var e;this.hydratable&&await(0,y.ZH)(this),null===(e=this.initStart)||void 0===e||e.call(this),this.reportStartTimeToMilestoneConnector(m.g.updateVisuallyReadyTiming);const t=this.getExperienceType();try{var n;const e=this.getConfigRef();if(!this.config){const t=await r.U.getConfig(e);this.config=t.properties}if(this.strings=this.config.localizedStrings,!this.telemetryObject){const e=this.getTelemetryContract();this.telemetryObject=new C.D(e)}const{stalenessInfo:i}=this.config;i&&i.isStaleCheckRequired&&(0,T.MV)({experienceType:t,thresholdMinutes:i.staleThreshold,criticalCallback:()=>this.prerenderRefreshCritical(),delayCallback:()=>this.prerenderRefresh()}),this.ensureObservableBeforeConnect&&this.$fastController.bindObservables();const o=this.experienceConnected();if(o){const e=this.hydratable&&y.iA?(0,y.bE)(`${this.getExperienceType()}:experienceConnected`):void 0;null==e||e.start(),await o,null==e||e.markEnd()}if(this.hydratable){const e=y.iA?(0,y.bE)(`${this.getExperienceType()}:beforeHydration`):void 0;null==e||e.start(),await this.beforeHydration(),null==e||e.markEnd()}super.connectedCallback(),this.shadowDomPopulated(),this.hydratable&&await this.afterHydration(),this.perfTimeline&&(0,c.d0)(this,this.perfTimeline,k.y),null===(n=this.initEnd)||void 0===n||n.call(this)}catch(e){var i,o;(0,u.OO)(e,p.xuo,`Exception web component experience initializeAsync. ExperienceType: ${t}`,`ssrLayout:${null===(i=window.ssrLayoutState)||void 0===i?void 0:i.selectedFeedDisplaySetting};edgeHeader:${JSON.stringify(window.edgeNTPHeader)}`),this.logCriticalException(),null===(o=this.initEnd)||void 0===o||o.call(this,{customSuffix:"error"})}}experienceConnected(){}beforeHydration(){}afterHydration(){}shadowDomPopulated(){}prerenderRefreshCritical(){return Promise.resolve(void 0)}prerenderRefresh(){}logCriticalException(){}getConfigRef(){return o.jG.IsGitConfigs?{instanceSrc:this.instanceSrc,experienceType:this.getExperienceType(),sharedNs:this.sharedNs}:this.instanceSrc}getTelemetryContract(){return{type:v.c9.Module,name:this.getExperienceType()}}getApproxTTVRValue(e){const t=(0,l.Ou)();if(this.isSSRRendered&&t.isSSRCompleted)return t[h.nz+(e||this.getExperienceType())]||t[h.nz+"Complete"]}markVisuallyReady(e,t){var n,i;const r=this.getApproxTTVRValue();t??(t=void 0===r),e=r||e;const o=(0,h.o_)(this.getExperienceType(),!1,e,t);return this.reportEndTimeToMilestoneConnector(m.g.updateVisuallyReadyTiming,e),null===(n=this.ttvrEnd)||void 0===n||n.call(this,{endTime:e}),null===(i=this.visualReadinessCallback)||void 0===i||i.call(this),o}markVisuallyReadyRaf(e){(0,g.c)((()=>this.markVisuallyReady(e)))}reportStartTimeToMilestoneConnector(e){this.reportTimeToMilestoneConnector(e,performance.now())}reportEndTimeToMilestoneConnector(e,t){this.reportTimeToMilestoneConnector(e,void 0,t||performance.now())}reportTimeToMilestoneConnector(e,t,n){const i=(0,f.S0)();i&&e.getActionSender(i).send({experienceType:this.getExperienceType(),experienceInstance:this.instanceId,startTime:t,endTime:n})}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===P){const e=function(e){const t=b[e];return delete b[e],t}(n);Object.assign(this,e)}}}(0,i.gn)([(0,s.Lj)({attribute:"config-instance-src"})],A.prototype,"instanceSrc",void 0),(0,i.gn)([(0,s.Lj)({attribute:"config-shared-ns"})],A.prototype,"sharedNs",void 0),(0,i.gn)([(0,s.Lj)({attribute:"instance-id"})],A.prototype,"instanceId",void 0),(0,i.gn)([(0,s.Lj)({attribute:P})],A.prototype,"propsToken",void 0)},7275:function(e,t,n){"use strict";n.d(t,{Ot:function(){return S}});var i=n(31699),r=n(85594),o=n(49218),a=n(3104),s=n(82656),c=n(69686),d=n(64902),l=n(23549),u=n(82898),p=n(78951),h=n(7476),g=n(21930),m=n(31558);const f={};function v(e,t){if(!t)return;const{properties:n,attributes:r}=t;if(n&&Object.assign(e,n),r)for(const[t,n]of Object.entries(r))"boolean"==typeof n?i.S.setBooleanAttribute(e,t,n):"number"==typeof n?e.setAttribute(t,n.toString()):e.setAttribute(t,n)}class y extends r.Pq{bind(e){e.onUnbind(this);const t=e.targets[this.targetNodeId],{events:n,properties:i,instanceKey:r}=this.options||{};if(n)for(const[e,i]of Object.entries(n))t.addEventListener(e,i);let o;if(r&&(o=f[r]),o)return o.elements.push(t),!t.telemetryObject&&null!=i&&i.telemetryObject&&(t.telemetryObject=i.telemetryObject),void v(t,o.options);Object.assign(t,i)}unbind(e){var t,n;const i=e.targets[this.targetNodeId];if(null!==(t=this.options)&&void 0!==t&&t.events)for(const[e,t]of Object.entries(null===(r=this.options)||void 0===r?void 0:r.events)){var r;i.removeEventListener(e,t)}const o=null===(n=this.options)||void 0===n?void 0:n.instanceKey;if(o){const e=f[o];if(e){const t=e.elements.indexOf(i);t>=0&&e.elements.splice(t,1)}}}}function S(e,t){if(!e)return;if(!e.configRef||!e.configRef.experienceType)return void l.M0.sendAppErrorEvent({...h.tkv,message:`ConfigRef for InstanceId "${null==e?void 0:e.instanceId}" is ${null!=e&&e.configRef?"invalid":"missing"}`});t&&t.ttvrMarkerAggregate&&(0,g.aR)(e.configRef.experienceType,t.ttvrMarkerAggregate,!0);const n=function(e,t){const{configRef:n}=e,i=function(e){const t=null==e?void 0:e.properties;return null==t?void 0:t.cardLayout}(t),r=function(e){const t=null==e?void 0:e.properties;return null==t?void 0:t.cardType}(t),o=r?`_${r}`:"";return`${n.experienceType}_${n.instanceSrc}_${n.sharedNs||""}_${e.instanceId}_${i||""}${o}`}(e,t);if(!1!==(null==t?void 0:t.memoize)&&(0,m.N)()){const i=f[n];let r;if(i){if(t)for(const e of i.elements)v(e,t);i.options=t,r=i.template}else r=C(e,n,t),f[n]={template:r,options:t,elements:[]};return r}return C(e,n,t)}function C(e,t,n){let i=null==n?void 0:n.telemetryObject;if(!i){const t={type:u.c9.Module,name:e.configRef.experienceType};i=new p.D(t)}const r={...null==n?void 0:n.properties,telemetryObject:i};let l;!1!==(null==n?void 0:n.includeTelemetryTag)&&(l=i.getMetadataTag());const h={instanceKey:t,events:null==n?void 0:n.events,properties:r},g=(0,a.M)(e),m=(0,s.g)(e),f=(0,c.ITY)(g);(0,d.Fg)(e);const v=Object.entries((null==n?void 0:n.attributes)??{}).map((([e,t])=>"boolean"==typeof t?t?e:"":`${e}=${t}`)).join(" ");return o.dy`<${o.dy.partial(f)} config-instance-src=${o.dy.partial(m)} config-shared-ns=${t=>{var n;return null===(n=e.configRef)||void 0===n?void 0:n.sharedNs}} instance-id=${o.dy.partial(e.instanceId)} data-t=${e=>l} ${function(e){return e?new y(e):""}(h)} ${o.dy.partial(v)}></${o.dy.partial(f)}>`}r.m0.define(y)},88070:function(e,t,n){"use strict";n.d(t,{M:function(){return a},y:function(){return o}});var i=n(58968),r=n(49218);function o(){return new Promise((e=>i.H.enqueue((()=>e()))))}function a(e,t=!1){return r.dy`<ttsr-marker data-name="${e}" data-emit-event=${t?"true":"false"}></ttsr-marker>`}},7653:function(e,t,n){"use strict";n.d(t,{Bc:function(){return c},Kd:function(){return a},LB:function(){return o},W_:function(){return s}});var i=n(48587),r=n(94546);function o(e,t,n){return!(!n||!e||e<i.PQ)&&!t}function a(e){if(!e||!e.length)return e;const t=[];return e.forEach((e=>{const n=e.trim();n.startsWith(r.SD)&&t.push(n)})),t.sort()}function s(e,t,n){try{return e&&t&&t.includes(i.my)&&"weather"!==n&&"finance"!==n?i.SL:e}catch(e){}return e}function c(e,t=!1){const{itemOverrides:n}=e||{},i=n&&n.find((e=>"should1sUseFdheadQsp"===e.key));if(i&&i.value)return"true"===i.value;if(t)return!1;const r=n&&n.find((e=>"flights"===e.key||"appendflights"===e.key.toLowerCase()));return!!(r&&r.value&&r.value.length>0)}},70956:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});const i="prg-";function r(e){const t=i.length,n=[];return e&&e.length&&(e.forEach((e=>{const r=e&&e.trim();r&&r.length>=t&&r.substring(0,t).toLowerCase()===i&&n.push(r.toLowerCase())})),n.sort()),n}},58608:function(e,t,n){"use strict";n.d(t,{q:function(){return D}});var i=n(81110),r=n(46986),o=n(83102),a=n(62168),s=n(21789),c=n(32810),d=n(92100),l=n(13334),u=n(98463),p=n(74488),h=n(15165),g=n(91730),m=n(78672),f=n(31558),v=n(55524),y=n(35281),S=n(91668),C=n(34631),w=n(23549),b=n(88826),T=n(7476),k=n(5674),P=n(82486),A=n(67213);const I="gaming",E="following",M="filteredChannels",x="outlookchannels",L=new Map([["ReducedAdsSDCards_stage1","reducedadss1"],["ReducedAdsSDCards_stage2_group1","reducedadss2g1"],["ReducedAdsSDCards_stage2_group2","reducedadss2g2"],["ReducedAdsSDCards_stage3","reducedadss3"]]);function R(e){return!(null==e||""===e||"string"!=typeof e&&"number"!=typeof e||isNaN(e))}var D;!function(e){async function t(e,t,h){const y=new c.h((0,m.zp)()),F=s.jG.UserId,{CurrentRequestTargetScope:O={},WidgetAttributes:B={},CurrentMarket:N}=s.jG;let _=t&&t.flightData;if(B.telemetry&&B.telemetry.tmpl&&B.telemetry.tmpl.includes("pwbingads2")){const e="prg-binghplite";_=_?`${_},${e}`:e}let U=new c.h(e);if(t.nextPageUrl)U=new c.h(new URL(t.nextPageUrl).search),!s.jG.SendFeedCallActivityIdInHeader&&s.jG.ActivityId&&(!n()||!function(){const e=l.Al.CurrentFlightSet.has("prg-prsw");return"edgeMobile"!==s.jG.AppType&&"winWidgets"!==s.jG.AppType&&(!e||"edgeChromium"!==s.jG.AppType)}()&&U.get("activityId")||U.set("activityId",s.jG.ActivityId));else{const e=await(0,S.XJ)()===o.Hy.SignedIn;g.n.publish(g.j.userIsSignedIn,{isSignedIn:e,src:"main"});(e?p.$D.getOneServiceParamsWithAuth(F,t.ocid,!1,_||null):p.$D.getOneServiceParamsWithoutAuth(F||t.muidFallback&&`m-${s.jG.ActivityId}`,t.ocid,!1,_||null)).forEach((e=>e.value&&U.set(e.key,e.value))),U.set("contentType",t.contentType),t.requestType===a.xd.wpoService&&function(e,t,r,o){"startgg-feeds"===e.ocid?t.set("apikey",i.xE):t.set("apikey",i.GR);(e.useDelta||e.sessionId)&&(t.set("delta","true"),e.sessionId&&t.set("session",e.sessionId));!t.get("newsTop")&&n()&&t.set("newsTop",R(e.numberOfCards)?e.numberOfCards:"48");!t.get("newsSkip")&&n()&&t.set("newsSkip","0");e.feedId||t.get("infopaneCount")||!n()||t.set("infopaneCount",`${R(e.infopaneCount)?e.infopaneCount:i.di}`);if(!t.get("User")){const e=t.get("userid");e?t.set("User",`m-${e}`):(t.set("User",r),null===r&&function(e,t){(0,b.H)(T.jAy,"Cannot get MUID.",void 0,{...T.jAy.pb,customMessage:`${e}; ProbableCause: cannot access cookie`,url:t,activityId:s.jG.ActivityId})}("Using OneServiceUrl",o))}t.delete("user")}(t,U,F,h);if(t.feedName&&"default"!=t.feedName&&t.feedName===I){const e=y.get("gamingInterestId");if(e)U.set("query",e);else{const e=window.widget__query??t.query;U.set("query","string"==typeof e?e:"core gaming");const n=window.widget__interestIds??t.interestIds;n&&(U.delete("query"),U.set("InterestIds",n));const{pageType:i}=B;"gamingfeed-widget"===i&&U.set("wpopageid","wponoads");const r=window.widget__satoriId;"string"==typeof r&&U.set("satoriId",r)}}t.feedName===x&&(U.set("channels","true"),U.set("followersCount","true"),U.set("iff","true")),t.feedName===E&&"skype-desktop-following"===t.ocid&&U.set("renderedSegments","FollowCarousel");const r="true"===d.c.getQueryParameterByName("channels_available",window.location.href);("osmhp"===t.pageScenario&&"1s-excludefc"===t.flightData||r)&&U.set("efc","true")}const W=(t.feedName===E||t.feedName===M)&&"skype-desktop-following"!==t.ocid;if(t.feedId){const e=t.useProviderKey||W&&!t.feedId.startsWith("Y_")?"ProviderId":"InterestIds";U.set(e,t.feedId)}1===t.edgeMobile&&U.set("edgeMobile","1"),1===t.edgeMobileAds&&U.set("edgeMobileAds","1"),W&&U.set("iff","true");const H=y.get("OneSvc-Uni-Feat-Tun");H?U.set("OneSvc-Uni-Feat-Tun",H):"url"===v.Gq.get("oneSvcUniTunMode")&&U.set("OneSvc-Uni-Feat-Tun",await p.$D.getUniFeatTunHeader()),!0===t.disableContent&&U.set("disablecontent","true"),t.edgExpMask&&U.set("edgExpMask",t.edgExpMask),t.adsTimeout&&U.set("adsTimeout",t.adsTimeout.toString()),t.timeoutMs&&U.set("timeOut",t.timeoutMs.toString());const $=(0,k.Ee)();$>0&&U.set("cbypass",$.toString()),t.wpoPageId&&("wpoads"===t.wpoPageId.toLowerCase()&&"en-us"!==(null==N?void 0:N.toLowerCase())?U.set("wpopageid","wponoads"):U.set("wpopageid",t.wpoPageId)),t.wpoSchema&&U.set("wposchema",t.wpoSchema),t.newsTop&&n()&&U.set("newsTop",t.newsTop.toString()),t.newsSkip&&null==t.nextPageUrl&&n()&&U.set("newsSkip",t.newsSkip.toString()),(t.enableRightRailColumn||t.renderSingleColumn||t.renderEnterpriseSingleColumn)&&U.set("wpopageid",t.wpoPageId),t.installedWidgets&&t.installedWidgets.length&&U.set("installedWidgets",t.installedWidgets.join(",")),t.clientLayoutVersion&&U.set("clv",t.clientLayoutVersion),t.layout&&U.set("layout",t.layout),s.jG.SendFeedCallActivityIdInHeader&&U.delete("activityId"),s.jG.SendUserIdInHeader&&U.delete("User"),(0,f.N)()?t.isRetry?U.set("caller","retryForTimeout"):t.refreshType&&U.set("caller",t.refreshType):U.set("caller","ssr"),t.isDhp&&U.set("dhp","1"),t.isXFeed&&U.set("rid",t.requestId),t.private&&U.set("private","1"),t.viewportSize&&U.set("vpSize",t.viewportSize),t.apiKey&&U.set("apikey",t.apiKey),t.audienceMode&&(U.set("audienceMode",(null==O?void 0:O.audienceMode)||t.audienceMode),t.audienceMode===r.F.Kids&&D()&&(U.set("apikey",i.os),U.set("ocid",i.vy))),t.feedId&&t.feedName===E&&D()&&(U.set("ocid",i.i9),U.set("apikey",i.S1));const q=(0,A.UU)();if(t.feedName===I&&"anaheim-ntp-feeds"===t.ocid&&q&&(U.set("ocid",i.$v),U.set("apikey",i.gr)),t.enableWpoAdPlacements){const e=l.Al.ClientSettings.browser&&"true"===l.Al.ClientSettings.browser.ismobile||"phone"===l.Al.ClientSettings.deviceFormFactor?"true":"false";U.set("mobile",e);const t=(0,C.rv)()||(0,C.hI)();U.set("cookieWallPresent",t.toString())}const G=y.get("wpoitems");G&&U.set("wpoitems",G.toString());const V=y.get("bypass_trigger");V&&!t.feedId&&U.set("bypass_trigger",V.toString());for(const e in y.getAllSearchParams())if(e.toLowerCase().includes("adppc")){const t=y.get(e);t&&(U.set("adppc",t),w.M0.addOrUpdateTmplProperty("adppc","1"));break}const z=u.X.UpsellGamerMode&&t.feedName===I,j="prg-gmode-upsell";s.jG.ShouldUseFdheadQsp&&z?U.set("fdhead",`${t.fdhead},${j}`):s.jG.ShouldUseFdheadQsp&&t.fdhead?U.set("fdhead",t.fdhead):z&&U.set("fdhead",j),(0,P.TR)()&&U.set("prerender","1"),t.adRefreshVariant&&U.set("adRefreshVariant",t.adRefreshVariant),t.anaheimPageLayout&&U.set("anaheimPageLayout",t.anaheimPageLayout),t.gdpr&&U.set("gdpr","1"),t.verticalName&&U.set("verticalName",t.verticalName),t.freScenario&&U.set("freScenario",t.freScenario),t.freMode&&U.set("freMode",t.freMode),t.aver&&U.set("aver",t.aver),t.theme&&U.set("theme",t.theme),t.over&&U.set("over",t.over),t.oem&&U.set("oem",t.oem),t.devicetype&&U.set("devicetype",t.devicetype),t.smode&&U.set("smode",t.smode),t.usri&&U.set("usri",t.usri),t.duotone&&U.set("duotone",t.duotone.toString()),t.cardIds&&U.set("cardIds",t.cardIds),t.column&&U.set("column",t.column),t.fcl&&U.set("fcl","true"),t.idfc&&U.set("idfc","true"),t.layout&&U.set("layout",t.layout),t.colstatus&&U.set("colstatus",t.colstatus),t.colwidth&&U.set("colwidth",t.colwidth.toString()),t.adoffsets&&U.set("adoffsets",t.adoffsets),t.l3v&&U.set("l3v",t.l3v.toString()),t.wpoux&&U.set("wpoux",t.wpoux.toString()),"freinterests"===t.pageScenario&&(t.start&&U.set(t.freV2Params?"interestSkip":"$skip",`${t.start}`),t.count&&U.set(t.freV2Params?"interestCount":"$top",`${t.count}`),t.InterestIds&&U.set("InterestIds",`${t.InterestIds}`)),"number"==typeof t.pageConfiguration&&U.set("pgc",t.pageConfiguration.toString());const K=window&&window.navigator&&window.navigator.deviceMemory;K&&n()&&U.set("memory",K.toString());(l.Al.CurrentFlightSet.has("prg-forcenoads")||await(0,A.VS)())&&U.set("edgenoads","1");(l.Al.CurrentFlightSet.has("prg-forceredads")||await(0,A.OM)())&&U.set("edgereduceads","1");const Q=await(0,A.P)();Q&&L.has(Q)&&U.set(L.get(Q),"1"),l.Al.CurrentFlightSet.has("prg-reducedads")&&U.set("reducedadss1","1"),t.anaheimLayoutPromotion&&U.set("promotion",t.anaheimLayoutPromotion),t.anaheimContentSelection&&U.set("selection",t.anaheimContentSelection),void 0!==t.backgroundImageIsSet&&U.set("backgroundImageIsSet",t.backgroundImageIsSet.toString()),void 0!==t.inEdgeFeatures&&U.set("inEdgeFeatures",t.inEdgeFeatures.toString()),t.revertTimes&&U.set("revertTimes",t.revertTimes),void 0!==t.adminDisabled&&U.set("adminDisabled",t.adminDisabled.toString()),t.pageOcid&&U.set("pageOcid",t.pageOcid),t.segment&&U.set("segment",t.segment),t.scenario&&U.set("scenario",t.scenario);const J=l.Al.ClientSettings&&l.Al.ClientSettings.queryparams?l.Al.ClientSettings.queryparams:"",Y=new c.h(J).get("canid");Y&&U.set("triggerModules","promoxfeedupsell".concat(":",Y)),await async function(e,t){const{doNotTriggerFREInSession:n,feedName:i,enableFREOverlayMyFeed:r,sendFRESeenCount:o}=e;i===E&&w.M0.addOrUpdateTmplProperty("following-feed","1");if("edgeChromium"!==s.jG.AppType||"default"!==i||!r||!o)return;const a=await(0,A.hp)(n);a&&(t.set("overlay",a),parseInt(a)<3&&w.M0.addOrUpdateTmplProperty("fre-seen-ct","1"))}(t,U);const Z=d.c.getParamsWithItems(location.search);if(Z){const e=Z.find((e=>e.key===a.VL));if(e){const n=t.contentType?t.contentType:"article,video,slideshow",i=[...new Set(`${n},${e.value}`.split(","))];U.set("contentType",i.join(","))}const n=Z.find((e=>e.key===a.Ow));n&&n.value&&U.set("installedWidgets",n.value)}const X=new URLSearchParams((0,m.zp)()).get("feedParams");if(X){X.split(",").forEach((e=>{if(e.includes("=")){const[t,n]=e.split("=");U.set(t.trim(),n.trim())}}))}return U.toString()}function n(){return"channeldesktop"!==s.jG.AppType&&"channelmobile"!==s.jG.AppType}function D(){return n()}e.requestInit=async function(e){e=e||{};const t={method:"GET"},n=await p.$D.getOneServiceFeedCallHeaders((0,y.VQ)(),e.feedName,e.useXboxAccessToken);t.headers={...n,...e.additionalHeaders},e.credentialsOverride?t.credentials=e.credentialsOverride:t.credentials="include",e.enableWpoAdPlacements&&(t.headers["ads-referer"]=location.href,t.headers["taboola-sessionId"]=e.taboolaSessionId||"init");const i=s.jG.UserId;return e.requestType!==a.xd.wpoService||i||(t.headers.MUID=s.jG.ActivityId),s.jG.SendUserIdInHeader&&(t.headers.MUID=i),t},e.buildRequestURLForOneService=async function(e){let n,r;if((e=e||{}).feedName===E)r=e.feedId?i.eK:i.ly;else r=e.pageScenario;const o=`${i.lP}${r}`;return n=new c.h((0,m.zp)()).get(i.YU)?new URL(o,i.LJ):(0,h.fU)(o),n.search=await t(n.search,e,n.href),n.searchParams.sort(),n},e.buildServiceRequestURL=async function(e){let n;e=e||{};const{CurrentRequestTargetScope:o={},ConfigServiceBaseUrl:a}=s.jG,d=new c.h((0,m.zp)());let u=e.pageScenario??(e.shouldUseNewWpoEndpoint?i.bx:i.$s);"ntp"===e.pageScenario&&e.useWebLayoutEndpoint&&(u=i.UY);let p=e.requestPathOverride?`${e.requestPathOverride}${u}`:`${i.Mo}${u}`;p=function(e){return e&&e===`${i.Mo}${i.bx}`&&l.Al&&l.Al.CurrentFlightSet&&l.Al.CurrentFlightSet.has(i.CO)&&"edgeChromium"===s.jG.AppType?`${i.hk}${i.bx}`:e}(p);const g=e.feedName&&"default"!=e.feedName;if(e.feedId||g)switch(e.feedName){case M:case"dynamicfilteredchannels":p=`${i.Mo}${i.Td}`;break;case E:var v,y,S;if(e.feedId)p=`${i.Mo}${i.eK}`,w.M0.addOrUpdateTmplProperty("filtered-feed","1"),(null!==(v=e.nextPageUrl)&&void 0!==v&&v.includes(i.ly)||null===(y=e.nextPageUrl)||void 0===y||!y.includes(e.feedId))&&(e.nextPageUrl="");else p=`${i.Mo}${i.ly}`,null!==(S=e.nextPageUrl)&&void 0!==S&&S.includes(i.eK)&&(e.nextPageUrl="");break;case I:p=`${i.Mo}${i.I1}`;break;case"sports":p=`${i.Mo}${i.Qn}`;break;case x:p=`${i.Mo}${x}`;break;default:p="work"===e.feedSource?`${i.Mo}${i.UW}`:`${i.Mo}${i.J8}`}e.isXFeed&&e.xFeedPageScenario&&(p=`${i.Mo}${e.xFeedPageScenario}`);const C=(0,f.N)();if(C&&["enabled","true"].includes(d.get(i.YU)))e.audienceMode===r.F.Kids||(null==o?void 0:o.audienceMode)===r.F.Kids||e.feedId?n=new URL(i.SO,i.LJ):(p=`${i.lP}${u}`,n=new URL(p,i.LJ));else if(C&&"enabled"===d.get(i.P$))n=new URL(p,a.origin);else if(function(e){return!e&&"edgeChromium"===s.jG.AppType&&s.jG.OneServiceOverride&&l.Al&&l.Al.CurrentFlightSet&&l.Al.CurrentFlightSet.has(i.IA)}(C))p=`${i.L3}${i.bx}`,n=new URL(p,s.jG.OneServiceOverride);else{const t=e.domainOverride?e.domainOverride:(0,h.qQ)().origin;n=new URL(p,t)}return n.search=await t(n.search,e,n.href),n.searchParams.sort(),n}}(D||(D={}))},91730:function(e,t,n){"use strict";n.d(t,{j:function(){return s},n:function(){return a}});var i=n(5699),r=n(291),o=n(55524);const a=(0,r.h)({getInstance:()=>o.Gq.get("__feed-card-provider__serviceRequestAuthSubscription__",(()=>new i.X))}),s={userIsSignedIn:"userIsSignedIn"}},62168:function(e,t,n){"use strict";var i,r,o,a;n.d(t,{Ow:function(){return c},Rx:function(){return a},VL:function(){return s},xd:function(){return o}}),function(e){e.activityId="x-client-activityid",e.authorization="Authorization",e.entAuthorization="Ent-Authorization",e.muid="MUID",e.adsReferer="ads-referer",e.taboolaSessionId="taboola-sessionId"}(i||(i={})),function(e){e.actionType="actionType",e.activityId="activityId",e.adsTimeout="adsTimeout",e.apiKey="apikey",e.audienceMode="audienceMode",e.aver="aver",e.bypassTrigger="bypass_trigger",e.cacheBypassQueryStringParamName="cbypass",e.channel="channel",e.channels="channels",e.cm="cm",e.complexInfoPaneEnabled="cipenabled",e.contentType="contentType",e.delta="delta",e.devicetype="devicetype",e.disableContent="disablecontent",e.dhp="dhp",e.disableTypeSerialization="DisableTypeSerialization",e.duotone="duotone",e.edgExpMask="edgExpMask",e.edgeSignalAdppc="adppc",e.gamingInterestId="gamingInterestId",e.infopaneCount="infopaneCount",e.fcl="fcl",e.fdhead="fdhead",e.feedParams="feedParams",e.feedLayoutRequestType="t",e.filter="$filter",e.followersCount="followersCount",e.idfc="idfc",e.ids="ids",e.infoPaneItemCount="t =InfoPane.itemCount",e.location="location",e.market="market",e.memory="memory",e.newsTop="newsTop",e.newsSkip="newsSkip",e.ocid="ocid",e.oem="oem",e.oneSvcUni="OneSvc-Uni-Feat-Tun",e.over="over",e.overlay="overlay",e.parentContentId="parent-content-id",e.parentNamespace="parent-ns",e.parentTitle="parent-title",e.queryQ="q",e.query="query",e.queryType="queryType",e.qScope="qscope",e.responseSchema="responseSchema",e.satoriId="satoriId",e.select="$select",e.session="session",e.signInCookieName="scn",e.skip="$skip",e.smode="smode",e.source="source",e.targetType="targetType",e.theme="theme",e.timeOut="timeOut",e.top="$top",e.type="type",e.User="User",e.user="user",e.userid="userid",e.usri="usri",e.wpoitems="wpoitems",e.wpoPageId="wpopageid",e.wpoSchema="wposchema",e.wrapOData="wrapodata",e.caller="caller",e.installedWidgets="installedWidgets",e.clientLayoutVersion="clv",e.pageConfiguration="pgc",e.requestId="rid",e.interestIds="InterestIds",e.providerId="ProviderId",e.includeFollowingFilters="iff",e.freScenario="freScenario",e.freMode="freMode",e.mobile="mobile",e.clientLocation="clientLocation",e.clientLocationProvider="clientLocationProvider",e.clientLocationAccuracy="clientLocationAccuracy",e.clientLocationTimeStamp="clientLocationTimeStamp",e.collectionIds="collectionIds",e.endTime="EndTime",e.eventType="EventType",e.exchangeCode="ExchangeCode",e.listIds="listIds",e.requireQuoteDetail="requireQuoteDetail",e.skipNum="skip",e.startTime="StartTime",e.topNum="top",e.prerender="prerender",e.layout="layout",e.triggerModules="triggerModules",e.promoXFeed="promoxfeedupsell",e.canid="canid",e.edgeNoAds="edgenoads",e.edgeReduceAds="edgereduceads",e.edgeMobile="edgeMobile",e.edgeMobileAds="edgeMobileAds",e.private="private",e.viewportSize="vpSize",e.removeStoryCarousel="efc",e.promotion="promotion",e.selection="selection",e.cardIds="cardIds",e.renderedSegments="renderedSegments",e.column="column",e.colstatus="colstatus",e.colwidth="colwidth",e.adoffsets="adoffsets",e.l3v="l3v",e.wpoux="wpoux",e.cookieWallPresent="cookieWallPresent",e.anaheimPageLayout="anaheimPageLayout",e.adRefreshVariant="adRefreshVariant",e.gdpr="gdpr",e.verticalName="verticalName",e.pageOcid="pageOcid",e.scenario="scenario",e.segment="segment",e.backgroundImageIsSet="backgroundImageIsSet",e.inEdgeFeatures="inEdgeFeatures",e.revertTimes="revertTimes",e.adminDisabled="adminDisabled",e.interestCount="interestCount",e.interestSkip="interestSkip"}(r||(r={})),function(e){e[e.oneService=0]="oneService",e[e.wpoService=1]="wpoService"}(o||(o={})),function(e){e.Bgtask="bgtask",e.Api="api",e.App="app",e.RetryFetch="retryFetch",e.Scroll="scroll"}(a||(a={}));const s="idxContentTypeOverride",c="installedWidgetsOverride"},4055:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});const i={_60x60:{width:60,height:60},_82x82:{width:82,height:82},_104x84:{width:104,height:84},_141x250:{width:141,height:250},_180x88:{width:180,height:88},_203x114:{width:203,height:114},_216x114:{width:216,height:114},_220x124:{width:220,height:124},_220x178:{width:220,height:178},_238x120:{width:238,height:120},_240x129:{width:240,height:129},_240x253:{width:240,height:253},_242x144:{width:242,height:144},_242x176:{width:242,height:176},_300x156:{width:300,height:156},_300x169:{width:300,height:169},_300x174:{width:300,height:174},_300x179:{width:300,height:179},_300x180:{width:300,height:180},_300x200:{width:300,height:200},_300x225:{width:300,height:225},_300x282:{width:300,height:282},_300x304:{width:300,height:304},_300x326:{width:300,height:326},_300x462:{width:300,height:462},_306x197:{width:306,height:197},_385x225:{width:385,height:225},_362x272:{width:362,height:272},_406x304:{width:406,height:304},_486x304:{width:486,height:304},_468x304:{width:468,height:304},_604x296:{width:604,height:296},_612x304:{width:612,height:304},_612x326:{width:612,height:326},_612x328:{width:612,height:328},_612x462:{width:612,height:462},_628x372:{width:628,height:372}}},69792:function(e,t,n){"use strict";var i,r;n.d(t,{u:function(){return i},w:function(){return r}}),function(e){e[e.ALL=3]="ALL",e[e.VP=1]="VP",e[e.TTVR=2]="TTVR"}(i||(i={})),function(e){e.image="image",e.provider="provider",e.socialBar="socialBar"}(r||(r={}))},67295:function(e,t,n){"use strict";n.d(t,{C7:function(){return a},Nv:function(){return i},OO:function(){return s},X9:function(){return c},sn:function(){return o}});var i,r=n(9791);!function(e){e._1x_halfy="_1x_halfy",e._2x_halfy="_2x_halfy",e._halfx_2y="_.5x_2y",e._1x_1y="_1x_1y",e._1x_2y="_1x_2y",e._1x_3y="_1x_3y",e._1x_4y="_1x_4y",e._1x_5y="_1x_5y",e._2x_1y="_2x_1y",e._2x_2y="_2x_2y",e._2x_3y="_2x_3y",e._2x_4y="_2x_4y",e._2x_6y="_2x_6y",e._3x_1y="_3x_1y",e._3x_2y="_3x_2y",e._3x_3y="_3x_3y",e._4x_1y="_4x_1y",e._4x_2y="_4x_2y",e._5x_1y="_5x_1y",e._5x_2y="_5x_2y",e._25u="0.25u",e._05u="0.5u",e._075u="0.75u",e._1u="1u",e._125u="1.25u",e._175u="1.75u",e._2c="_2x_2y",e._2u="_1x_4y",e._3u="_1x_6y"}(i||(i={}));const o=146,a=300,s=12,c=(0,r.Z)((e=>Array(e).fill(o)))},15778:function(e,t,n){"use strict";var i;n.d(t,{U:function(){return i}}),function(e){e.TopicFeedCard="topic-feed-card",e.articleFreCard="article-fre-card",e.autosCarouselCard="autos-carousel-card",e.autosGarageCard="autos-garage-card",e.autosMarketplaceCard="autos-marketplace-card",e.bingDailyQuizCard="bing-daily-quiz-card",e.bingThisOrThatCard="bing-this-or-that-card",e.bingVideoCarousel="bing-video-carousel",e.boostAdCard="boost-ad-card",e.cashbackCarouselCard="cashback-carousel-card",e.casualGamesCard="casual-games-card",e.casualGamesCarouselCard="casual-games-carousel-card",e.casualGamesProng2CarouselCard="casual-games-prong2-carousel-card",e.casualGamesStripeCarouselCard="casual-games-stripe-carousel-card",e.channelCarouselCard="channel-carousel-card",e.channelFilterCard="channel-filter-card",e.coldStartCard="cold-start-card",e.comicsCarouselCard="comics-carousel-card",e.communityCard="community-card",e.commuteCard="commute-card",e.companyNewsCard="company-news-card",e.contentCard="content-card",e.contentCardPreview1x="content-card-preview-1x",e.contentGroup="content-group",e.contentGroupCard="content-group-card",e.dailyFixGamesCarouselCard="daily-fix-games-carousel-card",e.dailyGreetingCard="daily-greeting-card",e.dailyGreetingWindowsShell="daily-greeting-windows-shell",e.dailyTriviaCard="daily-trivia-card",e.denseCard="dense-card",e.digestCard="digest-card",e.displayAdCard="display-ad-card",e.donationNpoCard="donation-npo-card",e.edgeShoppingCard="edge-shopping-card",e.editorsPickCarouselCard="editors-pick-carousel-card",e.electionCard="election-card",e.electionsCard="elections-card",e.entertainmentPremierCard="entertainment-premier-card",e.esportsCard="esports-card",e.esportsStreamsCard="esports-streams-card",e.flexArticleCard="flex-article-card",e.followingFREInlineCard="following-fre-inline-card",e.gamingCompeteCard="gaming-compete-card",e.gamingGamerModeUpsellCard="gaming-gamer-mode-upsell-card",e.gamingInterestGroupCard="gaming-interest-group-card",e.gamingMatchCard="gaming-match-card",e.gamingMediaCarouselCard="gaming-media-carousel-card",e.gamingPersonalizationCard="gaming-personalization-card",e.gamingRecentlyPlayedCard="gaming-recentlyplayed-card",e.gamingRecommendedCard="gaming-recommended-card",e.gamingRedditCard="gaming-reddit-card",e.gamingRewardsCard="gaming-rewards-card",e.gamingStreamCard="gaming-stream-card",e.gamingTournamentCard="gaming-tournament-card",e.gamingUpcomingCard="gaming-upcoming-card",e.gamingVideoCard="gaming-video-card",e.groceryCouponSdCard="grocery-coupon-sd-card",e.healthArticlesCard="health-articles-card",e.healthCard="health-card",e.healthFitnessCard="health-fitness-card",e.healthRiverCard="health-river-card",e.healthTipCard="health-tip-card",e.hideStoryCard="hide-story-card",e.horoscopeAnswerCard="horoscope-card",e.hotListCard="hot-list-card",e.industryNewsCard="industry-news-card",e.infopaneCard="infopane-card",e.infopaneSlideCard="infopane-slide-card",e.interestManagementCard="interest-management-card",e.leadGenCard="lead-gen-card",e.learningNasaCard="learning-nasa-card",e.learningTriviaCard="learning-trivia-card",e.linkedInCard="linked-in-card",e.localNewsCarCard="local-news-carousel-card",e.lotteryCard="lottery-card",e.mangaCard="manga-card",e.marketplaceCard="marketplace-card",e.microsoftFeedCard="microsoft-feed-card",e.mobileRewardsCard="mobile-rewards-card",e.mobileShoppingCard="mobile-shopping-card",e.mobileTrendingSearchCard="mobile-trending-search-card",e.moneyAddWatchlistCard="money-add-watchlist-card",e.moneyCard="money-card",e.moneyEdgeCard="money-edge-card",e.moneyInfoCardWC="money-info-card",e.moneyTopicStripeCarouselCard="money-topic-stripe-carousel-card",e.nativeAdCard="native-ad-card",e.nativeTopAdCard="native-top-ad-card",e.nearbyCard="nearby-card",e.newsGroupsCard="news-groups-card",e.newsSegmentCarousel="news-segment-carousel",e.onThisDayCard="on-this-day-card",e.panoCard="pano-card",e.partnerUpsellCard="partner-upsell",e.perspectiveCard="perspective-card",e.placeholderCard="placeholder-card",e.pollsCard="polls-card",e.prayerTimesCard="prayer-times-card",e.prismCard="prism-card",e.prismCarouselCard="prism-carousel-card",e.profileCarouselCard="profile-carousel-card",e.promotedAdCard="promoted-ad-card",e.publisherCarouselCard="publisher-carousel-card",e.publisherListCard="publisher-list-card",e.qnaCard="qna-card",e.quizCard="quiz-card",e.realEstateCard="real-estate-card",e.recipesCard="recipes-card",e.recommendedInterestsCard="recommended-interests-card",e.recommendedSearchCarousel="recommended-search-carousel",e.recommendedSearchesCard="recommended-searches-card",e.responsiveAdCard="responsive-ad-card",e.responsiveCard="responsive-card",e.responsiveInfopaneCard="responsive-infopane",e.rewardsCard="rewards-card",e.rewardsDailyCheckinCard="rewards-daily-checkin-card",e.rewardsDailySetCard="rewards-daily-set-card",e.richCalendarCard="rich-calendar-card",e.richCalendarWindowsShell="rich-calendar-windows-shell",e.sectionHeaderCard="section-header-card",e.selectCarouselCard="select-carousel-card",e.serendipityCard="serendipity-card",e.sharedHeroNewsCard="shared-hero-news-card",e.shoppingBWMCard="shopping-bwm-card",e.shoppingBWMCarousel="shopping-bwm-carousel",e.shoppingBuyingGuidePremiumCard="shopping-buying-guide-premium-card",e.shoppingCard="shopping-card",e.shoppingCarouselCard="shopping-carousel-card",e.shoppingCarouselProngWC="shopping-carousel-prong-wc",e.shoppingEventsDealCard="shopping-events-deal-card",e.shoppingFashionCarouselWC="shopping-fashion-carousel-wc",e.shoppingRiverCard="shopping-river-card",e.shoppingSdCard="shopping-sd-card",e.shoppingVideoCarouselCard="shopping-video-carousel-card",e.sportsCard="sports-card",e.sportsOlympicCard="sports-olympic-card",e.sportsTopicStripeCarouselCard="sports-topic-stripe-carousel-card",e.sportsWorldCupCard="sports-worldcup-card",e.spotlightCard="spotlight-card",e.superListCard="super-list-card",e.superappUpsellCard="superapp-upsell-card",e.tabbedFeedCard="tabbed-feed-card",e.tabbedInfopaneCard="tabbed-infopane-card",e.topPicksCard="top-picks-card",e.topSitesCard="top-sites-card",e.topStoriesCard="top-stories-card",e.trafficCard="traffic-card",e.trafficHero="traffic-hero",e.travelArticleCard="travel-article-card",e.travelDestinationCard="travel-destination-card",e.travelDestinationCarouselCard="travel-destination-carousel-card",e.trendingNowCard="trending-now-card",e.trendingSearchCard="trending-search-card",e.trendingTopicsCard="trending-topics-card",e.videoCard="video-card",e.videoShoppingCard="video-shopping-card",e.videoShoppingCarouselCard="video-shopping-carousel-card",e.weatherCard="weather-card",e.weatherHeroExperienceCarouselCard="weather-hero-experience-carousel-card",e.webContentCard="web-content-card",e.widgetPlaceholderCard="widget-placeholder-card",e.widgetsNotificationsCard="widgets-notifications-card",e.winAppCard="win-app-card"}(i||(i={}))},43879:function(e,t,n){"use strict";n.d(t,{J:function(){return Nt},Q:function(){return _t}});var i=n(15778),r=n(37477),o=n(76187);const{TopicFeedCard:a,articleFreCard:s,autosCarouselCard:c,autosGarageCard:d,autosMarketplaceCard:l,bingDailyQuizCard:u,bingThisOrThatCard:p,bingVideoCarousel:h,boostAdCard:g,cashbackCarouselCard:m,casualGamesCard:f,casualGamesCarouselCard:v,casualGamesProng2CarouselCard:y,casualGamesStripeCarouselCard:S,channelCarouselCard:C,channelFilterCard:w,comicsCarouselCard:b,communityCard:T,commuteCard:k,companyNewsCard:P,contentCard:A,contentGroupCard:I,dailyFixGamesCarouselCard:E,dailyGreetingCard:M,dailyTriviaCard:x,denseCard:L,digestCard:R,donationNpoCard:D,editorsPickCarouselCard:F,electionCard:O,electionsCard:B,entertainmentPremierCard:N,esportsCard:_,esportsStreamsCard:U,followingFREInlineCard:W,gamingCompeteCard:H,gamingGamerModeUpsellCard:$,gamingInterestGroupCard:q,gamingMatchCard:G,gamingMediaCarouselCard:V,gamingPersonalizationCard:z,gamingRecentlyPlayedCard:j,gamingRecommendedCard:K,gamingRedditCard:Q,gamingRewardsCard:J,gamingStreamCard:Y,gamingTournamentCard:Z,gamingUpcomingCard:X,groceryCouponSdCard:ee,healthCard:te,healthFitnessCard:ne,healthRiverCard:ie,healthTipCard:re,horoscopeAnswerCard:oe,industryNewsCard:ae,infopaneCard:se,interestManagementCard:ce,leadGenCard:de,learningNasaCard:le,learningTriviaCard:ue,localNewsCarCard:pe,lotteryCard:he,mangaCard:ge,marketplaceCard:me,microsoftFeedCard:fe,mobileRewardsCard:ve,mobileShoppingCard:ye,mobileTrendingSearchCard:Se,moneyCard:Ce,moneyInfoCardWC:we,moneyTopicStripeCarouselCard:be,nativeAdCard:Te,nativeTopAdCard:ke,nearbyCard:Pe,newsGroupsCard:Ae,newsSegmentCarousel:Ie,onThisDayCard:Ee,partnerUpsellCard:Me,placeholderCard:xe,pollsCard:Le,prayerTimesCard:Re,prismCard:De,prismCarouselCard:Fe,profileCarouselCard:Oe,promotedAdCard:Be,publisherCarouselCard:Ne,publisherListCard:_e,qnaCard:Ue,quizCard:We,realEstateCard:He,recipesCard:$e,recommendedInterestsCard:qe,recommendedSearchCarousel:Ge,recommendedSearchesCard:Ve,rewardsCard:ze,rewardsDailyCheckinCard:je,rewardsDailySetCard:Ke,richCalendarCard:Qe,sectionHeaderCard:Je,selectCarouselCard:Ye,serendipityCard:Ze,sharedHeroNewsCard:Xe,shoppingBWMCard:et,shoppingBWMCarousel:tt,shoppingBuyingGuidePremiumCard:nt,shoppingCard:it,shoppingCarouselCard:rt,shoppingCarouselProngWC:ot,shoppingEventsDealCard:at,shoppingFashionCarouselWC:st,shoppingRiverCard:ct,shoppingSdCard:dt,shoppingVideoCarouselCard:lt,sportsCard:ut,sportsOlympicCard:pt,sportsTopicStripeCarouselCard:ht,sportsWorldCupCard:gt,spotlightCard:mt,superListCard:ft,tabbedFeedCard:vt,tabbedInfopaneCard:yt,topPicksCard:St,topStoriesCard:Ct,trafficCard:wt,trafficHero:bt,travelArticleCard:Tt,travelDestinationCard:kt,travelDestinationCarouselCard:Pt,trendingNowCard:At,trendingSearchCard:It,trendingTopicsCard:Et,videoShoppingCard:Mt,videoShoppingCarouselCard:xt,weatherCard:Lt,weatherHeroExperienceCarouselCard:Rt,webContentCard:Dt,widgetPlaceholderCard:Ft,widgetsNotificationsCard:Ot,winAppCard:Bt}=i.U,Nt={[r.PL.NearbyCard]:Pe,[r.PL.DailyGreetingCard]:M,[r.PL.DailyTriviaCard]:x,[r.PL.LearningNasaCard]:le,[r.PL.LearningTriviaCard]:ue,[r.PL.AutosGarageCard]:d,[r.PL.WidgetsNotificationsCard]:Ot,[r.PL.DonationNpoCard]:D,[r.PL.EntertainmentPremierCard]:N,[r.PL.EventSDCardOscarsPrm]:N,[r.PL.BingThisOrThatCard]:p,[r.PL.BingDailyQuizCard]:u,[r.PL.GamingGamerModeUpsellCard]:$,[r.PL.RewardsDailyCheckinCard]:je,[r.PL.EventSDCardElectionMIT1]:O,[r.PL.EventSDCardElectionMIT2]:O,[r.PL.EventSDCardElectionMIT3]:O,[r.PL.RichCalendarCard]:Qe,[r.PL.CommunityCard]:T,[r.PL.MobileRewardsCard]:ve,[r.PL.TabbedInfopaneCard]:yt,[r.PL.MangaCard]:ge,[r.PL.MobileShoppingCard]:ye,[r.PL.MobileShoppingCard2]:ye,[r.PL.MobileShoppingCard3]:ye,[r.PL.MobileShoppingCard4]:ye,[r.PL.VideoShoppingCard]:Mt,[r.PL.VideoShoppingCarouselCard]:xt,[r.PL.SuperListCard]:ft,[r.PL.RealEstateCard]:He,[r.PL.RealEstateCarousel]:He,[r.PL.PrismCarouselCard]:Fe,[r.PL.PrayerTimesCard]:Re,[r.PL.TrendingSearchCard]:It,[r.PL.CommuteCard]:k,[r.PL.DigestCard]:R,[r.PL.Article]:A,[r.PL.Slideshow]:A,[r.PL.Video]:A,[r.PL.Infopane]:se,[r.PL.LeadGenCard]:de,[r.PL.PartnerUpsell]:Me,[r.PL.GroupedContent]:I,[r.PL.UserInterestTopic]:I,[r.PL.UserInterestNTPProvider]:I,[r.PL.UserInterestTopicAndProvider]:W,[r.PL.ColdStartArticleFreCard]:s,[r.PL.HalfPane]:null,[r.PL.HeadToHead]:null,[r.PL.Mosaic]:null,[r.PL.Triptych]:null,[r.PL.DenseList]:null,[r.PL.WebContent]:Dt,[r.PL.ExternalLink]:null,[r.PL.TabbedInfopane]:null,[r.PL.TabbedInfopaneTab]:null,[r.PL.PlaceholderCard]:xe,[r.PL.BingHealthCovid19StatsCard]:te,[r.PL.BingHealthFitnessCard]:ne,[r.PL.HealthTipCard]:re,[r.PL.HealthRiverCard]:ie,[r.PL.AutosCarousel]:c,[r.PL.AutosEntityList]:l,[r.PL.BingVideoCarousel]:h,[r.PL.CashbackAds]:m,[r.PL.CasualGamesCarousel]:v,[r.PL.CasualGamesProng2Carousel]:y,[r.PL.CasualGamesStripeCarousel]:S,[r.PL.ChannelCarousel]:C,[r.PL.ChannelFilterCard]:w,[r.PL.DynamicFilteredChannel]:w,[r.PL.TabbedFeedCard]:vt,[r.PL.WatchVideoCard]:_,[r.PL.EsportsCasualGames]:f,[r.PL.EsportsLiveStream]:U,[r.PL.GamingClip]:Y,[r.PL.GamingClipsCarousel]:V,[r.PL.GamingHighlightClipsCarousel]:V,[r.PL.GamingCompete]:H,[r.PL.GamingHighlight]:Y,[r.PL.GamingHighlightsCarousel]:V,[r.PL.GamingInterestGroup]:q,[r.PL.GamingLiveStream]:Y,[r.PL.GamingLiveStreamCarousel]:V,[r.PL.GamingMatch]:G,[r.PL.GamingPersonalize]:z,[r.PL.GamingRecentlyPlayed]:j,[r.PL.GamingRecommendedGames]:K,[r.PL.GamingReddit]:Q,[r.PL.GamingRewards]:J,[r.PL.GamingTournament]:Z,[r.PL.GamingUpcomingGames]:X,[r.PL.GamingVideoCarousel]:V,[r.PL.GamingVod]:Y,[r.PL.GroceryCouponSdCard]:ee,[r.PL.StockQuote]:Ce,[r.PL.MoneyInfo]:we,[r.PL.FinanceHeroMarket]:we,[r.PL.FinanceHeroMarketChart]:we,[r.PL.FinanceHeroNews]:Xe,[r.PL.FinanceHeroMovers]:we,[r.PL.FinanceHerowlsummary]:we,[r.PL.FinanceHeroSuggested]:we,[r.PL.FinanceHeroWatchlistIdeas]:we,[r.PL.FinanceHeroUpcomingEarnings]:we,[r.PL.FinanceHeroCurrencies]:we,[r.PL.FinanceHeroCrypto]:we,[r.PL.MoneyTopicStripe]:be,[r.PL.WeatherHero]:Rt,[r.PL.SportsTopicStripe]:ht,[r.PL.MoneyPreWL]:we,[r.PL.MoneyCrypto]:we,[r.PL.MoneyMarketBrief]:we,[r.PL.MoneyMoreForYouCard]:we,[r.PL.SportsMatch]:ut,[r.PL.SportsOlympics]:pt,[r.PL.SportsHeroFre]:ut,[r.PL.SportsHeroLeagueTodaysEvents]:ut,[r.PL.SportsHeroMatch1SeasonStats]:ut,[r.PL.SportsHeroMatch1Stats]:ut,[r.PL.SportsHeroMatch2SeasonStats]:ut,[r.PL.SportsHeroMatch2Stats]:ut,[r.PL.SportsHeroMatch3SeasonStats]:ut,[r.PL.SportsHeroMatch3Stats]:ut,[r.PL.SportsHeroMatchStatistics]:ut,[r.PL.SportsHeroNews]:Xe,[r.PL.SportsHeroOneVsManyEventResult]:ut,[r.PL.SportsHeroOneVsOneEventResult]:ut,[r.PL.SportsHeroSeasonStatistics]:ut,[r.PL.SportsHeroStandingsRankings]:ut,[r.PL.SportsHeroTeamStandings]:ut,[r.PL.SportsHeroTeamStandingWithEvents]:ut,[r.PL.SportsHeroTeamStandingWithMedals]:ut,[r.PL.SportsHeroTeamVsTeam]:ut,[r.PL.SportsHeroTeamVsTeamEventResult]:ut,[r.PL.SportsHeroVideo]:ut,[r.PL.EventSDCardSportsMIT1]:ut,[r.PL.EventSDCardSportsMIT2]:ut,[r.PL.EventSDCardSportsMIT3]:ut,[r.PL.EventSDCardWorldCup]:gt,[r.PL.EventSDCardWorldCup2]:gt,[r.PL.MyBriefRiverCard]:St,[r.PL.TrafficDelays]:wt,[r.PL.TrafficInfo]:wt,[r.PL.Transit]:wt,[r.PL.TrafficIncidents]:bt,[r.PL.TrafficCameras]:bt,[r.PL.TrafficCamerasWithSummary]:bt,[r.PL.TravelTimesWithSummary]:bt,[r.PL.TrafficMap]:bt,[r.PL.TrafficNews]:bt,[r.PL.TrafficTransit]:bt,[r.PL.TrafficSummary]:bt,[r.PL.WeatherSummary]:Lt,[r.PL.ShoppingCard]:dt,[r.PL.ShoppingBWMCard]:et,[r.PL.ShoppingBWMCarousel]:tt,[r.PL.EdgeShoppingCard]:rt,[r.PL.ShoppingCarousel]:rt,[r.PL.ShoppingCarousel2]:rt,[r.PL.ShoppingVideoCarousel]:lt,[r.PL.ShoppingRiver]:ct,[r.PL.EventSDCardShopping]:at,[r.PL.ComicsCarousel]:b,[r.PL.SelectCarousel]:Ye,[r.PL.EditorsPickCarousel]:F,[r.PL.DailyFixGamesCarousel]:E,[r.PL.SageGroupedFeed]:R,[r.PL.TopicFeed]:a,[r.PL.NewsSegmentCarousel]:Ie,[r.PL.ShoppingProng2c]:nt,[r.PL.ShoppingMerchantCategoryDeals]:it,[r.PL.ShoppingProngCardResponse]:ot,[r.PL.ShoppingProngCarousel]:st,[r.PL.SectionHeader]:Je,[r.PL.TrendingInTenMinutes]:At,[r.PL.TopicFeedTrendingNow]:At,[r.PL.TopicFeedTopStories]:At,[r.PL.TrendingTopics]:Et,[r.PL.TopStories]:Ct,[r.PL.WorkHeadlines]:Ct,[r.PL.Trending]:Ze,[r.PL.Horoscope]:oe,[r.PL.Elections]:B,[r.PL.RecommendedInterests]:qe,[r.PL.RecommendedSearchCarousel]:Ge,[r.PL.RecommendedSearchesCard]:Ve,[r.PL.MobileTrendingSearchCard]:Se,[r.PL.OnThisDay]:Ee,[r.PL.Lottery]:he,[r.PL.Dense]:L,[r.PL.Qna]:Ue,[r.PL.quizcard]:We,[r.PL.Recipes]:$e,[r.PL.Inspiration]:De,[r.PL.InterestManagementCard]:ce,[r.PL.Rewards]:ze,[r.PL.SubscriptionCarousel]:Ne,[r.PL.TravelArticleCard]:Tt,[r.PL.TravelDestinationCard]:kt,[r.PL.TravelDestinationCarouselCard]:Pt,[r.PL.LocalNews]:ft,[r.PL.LocalNewsFeed]:pe,[r.PL.BeaconProviderUpsell]:Oe,[r.PL.Marketplace]:me,[r.PL.MarketplaceEvent]:me,[r.PL.PollsCard]:Le,[r.PL.PromotedAd]:Be,[r.PL.NewsGroups]:Ae,[r.PL.NewsAnswerModule]:Ae,[r.PL.TopicFeedDiversity]:R,[r.PL.TopicFeedLearnSomethingNew]:R,[r.PL.TopicFeedWeekends]:R,[r.PL.TopicFeedMomentInTime1]:mt,[r.PL.TopicFeedShopping]:mt,[r.PL.TopicFeedWeather]:mt,[r.PL.WinAppAds]:Bt,[r.PL.NativeAd]:Te,[r.PL.CmsAd]:Te,[r.PL.FirstPartyAd]:Te,[r.PL.AmplifyAd]:Te,[r.PL.EventSDCardAmplifyAds]:Te,[r.PL.NativeTopAd]:ke,[r.PL.BoostAd]:g,[r.PL.Promotion]:m,[r.PL.IndustryNewsCard]:ae,[r.PL.MicrosoftFeedCard]:fe,[r.PL.CompanyNewsCard]:P,[r.PL.Calendar]:Ft,[r.PL.Entertainment]:Ft,[r.PL.Family]:Ft,[r.PL.M365]:Ft,[r.PL.Photos]:Ft,[r.PL.ThirdPartyWidget]:Ft,[r.PL.Tips]:Ft,[r.PL.ToDo]:Ft,[r.PL.XboxGamePass]:Ft,[r.PL.Tombstone]:Ft,[r.PL.RewardsDailySet]:Ke,[r.PL.UserInterestProvider]:_e},_t=(0,o.p)((()=>{const e=new Ut;for(const[t,n]of Object.entries(Nt))e.set(t,n);return e}));class Ut extends Map{set(e,t){return super.set(e.toLowerCase(),t)}get(e){return super.get(e.toLowerCase())}}},8076:function(e,t,n){"use strict";n.d(t,{Ae:function(){return y},K7:function(){return T},Nn:function(){return M},P9:function(){return A},PZ:function(){return P},UN:function(){return S},Xe:function(){return I},Xh:function(){return m},e_:function(){return E},i2:function(){return f},ji:function(){return w},lP:function(){return b},pt:function(){return g},wZ:function(){return C}});var i=n(23648),r=n(32614),o=n(37477),a=n(80512),s=n(13334),c=n(21789),d=n(92100),l=n(62512),u=n(23549),p=n(40378);const h=new Set;function g(e){if(!e)return;if(h.has(e))return;const t=document.createElement("link");t.rel="preload",t.as="image",t.href=e,document.head.appendChild(t),h.add(e)}function m(e){try{const t=new Date(e),n=(new Date).getTime()-t.getTime();return Math.ceil(n/864e5)>3}catch(e){return!0}}function f(e,t,n,i){if(!e)return{logoImage:"",name:void 0};const o=i??16;let a="";const s={width:o,height:o,enableDpiScaling:!1,quality:100,format:r.D3.PNG};!t&&e.logo&&e.logo.id?a=(0,r.zz)(e.logo.id,s):(e.logoUrl||e.logo&&e.logo.url)&&(a=(0,r.mL)(e.logoUrl||e.logo.url,s));const c={logoImage:a,id:e.id,name:e.name,profileId:e.profileId};return n&&(c.immersiveCardSvgLogo=v(n,e.darkThemeSVGLogo),c.svgLogo=(0,p.Y)()?c.immersiveCardSvgLogo:v(n,e.lightThemeSVGLogo)),c}function v(e,t){if(!t)return t;const n=t.width&&t.height?e*t.width/t.height:void 0;return{url:t.url,height:e,width:n}}function y(e){var t,n,i,r;if(null!=e&&null!==(t=e.cardContent)&&void 0!==t&&t.isPanoCard&&1==(null==e||null===(n=e.cardContent)||void 0===n?void 0:n.panocardType))e.cardContent.images=[{url:null===(i=e.cardContent)||void 0===i||null===(i=i.panoCaption)||void 0===i||null===(i=i.thumbnail)||void 0===i?void 0:i.url,title:null===(r=e.cardContent)||void 0===r||null===(r=r.panoCaption)||void 0===r?void 0:r.title,width:2e3,height:3e3}];else if(!(e&&e.cardContent&&e.cardContent.images&&e.cardContent.images.length&&e.cardContent.images[0]&&e.cardContent.images[0].url)){var o,a;return null!=e&&null!==(o=e.cardContent)&&void 0!==o&&o.isPanoCard&&2==(null==e||null===(a=e.cardContent)||void 0===a?void 0:a.panocardType)&&(e.cardContent.isPanoCard=!1,e.cardContent.panoCaption=null),null}return e.cardContent.images[0]}function S(e){return e&&e.images&&e.images.length&&e.images[0]&&e.images[0].url?e.images[0]:null}function C(e,t){var n,i;const{type:r,cardContent:a}=e;return t&&r==o.PL.Article&&a&&(null==a||null===(n=a.panoCaption)||void 0===n||null===(n=n.publishers)||void 0===n?void 0:n.length)&&(null==a||null===(i=a.panoCaption)||void 0===i?void 0:i.eventId)}function w(e,t){null==t||t.preventDefault(),e&&e.panoCaption&&window.open(e.panoCaption.destinationUrl.toString(),"_blank"),null!=t&&t.currentTarget&&(t.currentTarget.classList.add("clicked"),u.M0.sendActionEvent(null==t?void 0:t.currentTarget))}function b(e,t){e.panoCaption.articleDestinationUrl&&(e&&e.panoCaption&&window.open(e.panoCaption.articleDestinationUrl.toString(),"_blank"),u.M0.sendActionEvent(null==t?void 0:t.currentTarget))}function T(e,t){return s.Al.CurrentFlightSet.has("prg-ad-no-label")&&"bing"===(null==e?void 0:e.toLowerCase())&&c.jG.IsChinaCompliance&&t}var k;function P(e,t){var n;if(null!=e&&null!==(n=e.placement)&&void 0!==n&&n.isAdFeedbackEnabled&&(t|=i.O7.enabled),!(t&&t&i.O7.enabled))return i.O7.none;let{actions:r=[]}=e.metadata||e;const o=e.cardContent?e.cardContent.badges:e.badges,a=e.metadata?e.metadata.reasons:e.reasons;(o&&o.some((e=>"followedPublisher"===e.type))||a&&a.some((e=>"followPublisher"===e.type)))&&(r=[...r||[],k.followedPublisher]),a&&a.some((e=>"followTopic"===e.type))&&(r=[...r||[],k.followedTopic]);let s=i.O7.enabled;return r.forEach((e=>{"save"===e&&(e="saved"),"liked"!==e&&"like"!==e||(e="showMore");const n=i.O7[e];n&t&&(s|=n)})),s}function A(e,t,n){if(!e)return;if(!t)return e.cardActionsTooltips;const{cardActionsTooltips:i,showMoreV2:r,showFewerV2:o,undoShowMoreV2:s}=e,c=i&&(t.enableSaveButton||!r),d=((t,i,r)=>{switch(null==n?void 0:n.type){case a.pR.FOLLOWEDPUBLISHER:case a.pR.FOLLOWEDTOPIC:return e.followConfirmationText&&(null===(t=n.follow)||void 0===t?void 0:t.name)&&(0,l.WU)(e.followConfirmationText,n.follow.name);case a.pR.LOCAL:return null===(i=e.cardActionsTooltips)||void 0===i?void 0:i.whyAmISeeLocal;case a.pR.TRENDING:return null===(r=e.cardActionsTooltips)||void 0===r?void 0:r.whyAmISeeTrending;case a.pR.EXPLORE:{var o,s;const t=null===(o=e.cardActionsTooltips)||void 0===o?void 0:o.whyAmISeeExplore;return t&&(null==n||null===(s=n.follow)||void 0===s?void 0:s.name)&&(0,l.WU)(t,n.follow.name)}}})()??(null==i?void 0:i.whyAmISee);return{...i,showMore:c?i.showMore:r,showFewer:c?i.showFewer:o,undoShowMore:c?i.undoShowMore:s,whyAmISee:d}}function I(e){if(e&&e.cardContent){const t=e.cardContent.destinationUrl;return e.type===o.PL.EventInfopaneShoppingAI&&(e.cardContent.isShoppingArticleCard=!0),t&&(e.cardContent.destinationUrl=E(t)),e}const t=e;let n;n=t.type===o.PL.Slideshow?"SlideshowPreview":t.type===o.PL.Video?"VideoPreview":t.type===o.PL.WebContent?"WebContentPreview":"ArticlePreview",t.cardContent={id:t.id,destinationUrl:E(t.url),type:n,title:t.title,aiComments:t.aiComments,abstract:t.abstract,customTransitionSpeed:t.customTransitionSpeed,provider:t.provider,locale:t.locale,images:t.images,publishedDateTime:t.publishedDateTime,colorSamples:t.colorSamples,badges:t.badges,topics:t.topics,videoFiles:t.externalVideoFiles||{},videoMetadata:t.videoMetadata||{},isLocalContent:t.isLocalContent};const i=t.type;return t.metadata||i===o.PL.AmplifyAd||i===o.PL.NativeAd||i===o.PL.CmsAd||(t.metadata=function(e){var t,n,i,r,a,s,c;if(e&&e.metadata)return e.metadata;const d=e;if(!d)return null;const l=d.type===o.PL.EventInfopaneShoppingAI?/[/?]/:"/",u=null===(t=d.cardContent)||void 0===t||null===(t=t.destinationUrl)||void 0===t?void 0:t.split(l);return{abstract:d.abstract,abstractLength:null===(n=d.abstract)||void 0===n?void 0:n.length,titleLength:null===(i=d.title)||void 0===i?void 0:i.length,category:d.category||(null==u?void 0:u.length)>=5&&u[4],subCategory:(null==u?void 0:u.length)>=6&&u[5],primaryImage:{height:d.images&&(null===(r=d.images[0])||void 0===r?void 0:r.height),width:d.images&&(null===(a=d.images[0])||void 0===a?void 0:a.width)},locale:d.locale,feed:{id:null===(s=d.feed)||void 0===s?void 0:s.id},kicker:[d.feed],actions:null===(c=d.actions)||void 0===c?void 0:c.map((e=>k[e]||e)),reactionStatus:d.reactionStatus,commentStatus:d.commentStatus,reactionSummary:d.reactionSummary,commentSummary:d.commentSummary,topComments:d.topComments,reasons:d.reasons,source:d.source,ref:d.ref,relatedCards:d.relatedCards,topics:d.topics,topQuestions:d.topQuestions,highlights:d.highlights,debugId:d.debugId,isFirstSectionCard:d.isFirstSectionCard,videoMetadata:d.videoMetadata}}(t)),t}function E(e){if(!e)return;const t=new URLSearchParams(window.location.search),n=new URL(e);if(M()){const e=t.get("ocid");if(e){const t=new URLSearchParams(n.search);t.set("ocid",e),n.search=`?${t.toString()}`}}const i=t.getAll("item");return i&&i.length?(i.forEach((e=>{const t=n.search?"&":"?";-1===n.search.indexOf(e)&&(n.search+=`${t}item=${e}`)})),n.toString()):n.toString()}function M(){const e=window.location.href;return null!==d.c.getQueryParameterByName("disti",e)}!function(e){e.liked="like",e.unliked="unlike",e.saved="save",e.followedPublisher="followedPublisher",e.followedTopic="followedTopic"}(k||(k={}))},2186:function(e,t,n){"use strict";n.d(t,{PA:function(){return f},yg:function(){return y}});var i=n(21789),r=n(857),o=n(88826),a=n(7476),s=n(85205),c=n(37477),d=n(29458),l=n(37922),u=n(31983),p=n(67044),h=n(23549),g=n(55524),m=n(291);const f={followingChannelsUpdated:"femFollowingUpdated",recommendedChannelsUpdated:"femRecommendedUpdated",showFallbackFeed:"showFallbackFeed",hideFallbackFeed:"hideFallbackFeed"};class v{constructor(){this.currentFeedId="",this.overrideFeedConfig=null,this.feedManager=null,this.channels=[],this.onChannelChange=null,this.prevChannelStoreFollows=[],this.isProng2=()=>i.jG.isWindowsDashboard,this.isWinHP=()=>"windows"===i.jG.AppType,this.isNTP=()=>"edgeChromium"===i.jG.AppType,this.isCanvasSupported=()=>this.isProng2()||this.isWinHP()||this.isNTP(),this.transformResponse=(e,t)=>{if(e){var n,i;const o=null===(n=e.regions)||void 0===n?void 0:n.filter((e=>"river"===e.region)),a=o&&o.length&&o[0]&&o[0].sections,{type:s}=(null==a||null===(i=a[0])||void 0===i||null===(i=i.cards)||void 0===i?void 0:i[0])||{};var r;if(s===c.PL.ChannelFilterCard||s===c.PL.DynamicFilteredChannel||t&&s===c.PL.ChannelCarousel)return null==o||null===(r=o[0])||void 0===r||null===(r=r.sections)||void 0===r||r.shift(),!0}return!1},this.fetchChannelFilter=async(e,t)=>{const n=!(null!=t&&t.fcl),i=await(this.isProng2()?this.fetchFromWindowsCardProvider(t):this.fetchFromWpoCardProvider(t,n));if(!i)throw(0,o.H)(a.nZQ,`Failed to load filtered channels for ${e}.`),new Error;const r=this.getCardsFromResponse(i)[0];var s;if(!r||r.type===c.PL.ChannelFilterCard||r.type===c.PL.DynamicFilteredChannel)return h.M0.addOrUpdateTmplProperty("numberOfFollowedChannels",(null==r||null===(s=r.subCards)||void 0===s?void 0:s.length.toString())||"0"),r||{};r.type!==c.PL.ChannelCarousel&&(0,o.H)(a.k2Y,"The first card of filtered following channels response is not Channel Filter or Channel Carousel",`{ debugID: ${i.debugId}, nextPageUrl: ${i.nextPageUrl}, sections: ${JSON.stringify(i.sections)} }`)},this.fetchPublishers=async()=>{try{var e;const t=await(null===(e=this.publisherServiceClient)||void 0===e?void 0:e.getUserFollowedSources());if(null!=t&&t.length)return t}catch(e){(0,o.H)(a.T4Y,"Failed to fetch publisher metadata",`{${e}}`)}},this.fetchChannel=async({id:e})=>{const t={feedId:e};return this.isProng2()?this.fetchFromWindowsCardProvider(t):this.fetchFromWpoCardProvider(t)},this.mapChannel=(e,t)=>{var n,i,r,o,a;const s=["InterestChannel","InterestFeed"].includes(e.type);return{id:s?null==e||null===(n=e.feed)||void 0===n?void 0:n.id:null==e||null===(i=e.provider)||void 0===i?void 0:i.id,imgSrc:(null===(r=e.images)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.url)||"",title:s?null==e||null===(o=e.feed)||void 0===o?void 0:o.feedName:null==e||null===(a=e.provider)||void 0===a?void 0:a.name,isFollowing:!0,isTopic:s,index:t,providerProfileId:!s&&e.provider&&e.provider.profileId}},this.getCardsFromResponse=e=>{var t,n;if(!e)return[];const i=null===(t=e.sections)||void 0===t?void 0:t.filter((e=>"river"===e.region)),r=i&&i.length?i:e.sections,{cards:o=[],subSections:a}=r&&r.length&&r[0]||{};return(a?null===(n=a[0])||void 0===n?void 0:n.cards:o)||[]},this.fetchFromWindowsCardProvider=(e={})=>{const t={contextSource:"winWidgets",count:12,feedId:"",isXfeed:!0,ocid:"winp2",useRawJson:!0,pivotId:"Following",...e};return(new d.X).fetch(t)},this.fetchFromWpoCardProvider=(e={},t=!0)=>{let n=(0,r.ku)();"widgetonlockscreen"!==n&&"widgetonlockscreenwin10"!==n||(n="msedgntp");const i={ocid:n,timeoutMs:2e3,feedName:"following",requestId:h.M0.getRequestId(),shouldUseNewWpoEndpoint:!0,wpoSchema:"byregion",...e};return new l.fy({initialRequest:{timeoutMs:2e3}},!1).fetchFromWpoService(i,t)},this.resetChannelFeedId=()=>{this.currentFeedId=""},this.setChannelFeed=async e=>{if(e!==this.currentFeedId&&(e||this.currentFeedId))if(this.currentFeedId=e,this.overrideFeedConfig)this.overrideFeedConfig((t=>{var n;return null!==(n=t.riverSectionCardProviderConfig)&&void 0!==n&&n.initialRequest&&(t.riverSectionCardProviderConfig.initialRequest.feedName="following",t.riverSectionCardProviderConfig.initialRequest.feedId=e,t.riverSectionCardProviderConfig.initialRequest.isXFeed=!0,t.riverSectionCardProviderConfig.initialRequest.timeoutMs=3e3),t}));else if(this.feedManager){const t=this.isProng2()?"Following":"following",n=this.isProng2()?"winWidgets":"",i={isXFeed:!0,feedId:e,pivotId:t,contextSource:n};await this.feedManager.callRefreshRegionsData(i)}else this.onChannelChange&&this.onChannelChange(e)},this.setFeedConfigOverrider=e=>{this.overrideFeedConfig=e},this.setFeedManager=e=>{this.feedManager=e},this.setChannelCallback=e=>{this.onChannelChange=e},this.setChannels=e=>{this.channels=e,window.dispatchEvent(new CustomEvent(f.followingChannelsUpdated))},this.setChannelsRecommendations=e=>{this.channels=e,window.dispatchEvent(new CustomEvent(f.recommendedChannelsUpdated))},this.isProviderChannel=e=>this.channels.some((({id:t,isTopic:n})=>e===t&&!n)),this.showFallbackFeed=()=>{window.dispatchEvent(new CustomEvent(f.showFallbackFeed))},this.hideFallbackFeed=()=>{window.dispatchEvent(new CustomEvent(f.hideFallbackFeed))},this.isFeedFetching=()=>this.feedManager&&this.feedManager.isFeedFetching()}static getInstance(){return g.Gq.get("__FollowingExperienceManager__",(()=>new v))}initializeServiceClients(){this.topicsDataConnector||(this.topicsDataConnector=(0,p.K0)(s.z.TopicData)),this.publisherServiceClient||(this.publisherServiceClient=new u.PublisherServiceClient(window.fetch.bind(window),!1)),this.topicsDataConnector||(0,o.H)(a.T4K,"Topic Data Connector is not defined in ChannelFilter experience.")}}const y=(0,m.h)(v)},20434:function(e,t,n){"use strict";n.d(t,{l:function(){return d}});var i=n(38869),r=n(88826),o=n(7476),a=n(13334),s=n(21789),c=n(31558);function d(e){const{debugId:t,fdHead:n,fdFlightingVersion:d,requestHeaderMuid:u}=e||{},{CurrentFlightSet:p,ClientSettings:h}=a.Al;if(!(0,c.N)()||!p||p.size<1||!h||!(0,i.g)(5))return;const{requestMuid:g,requestTrailInfo:m}=h,f=null==m?void 0:m.flightVersion,v=null==g?void 0:g.toLowerCase(),y=null==u?void 0:u.replace(/-/g,"").toLowerCase();v&&y&&y!==v&&(0,r.H)(o.Zdq,"Muid mismatch between PCS and 1S",void 0,{pcsMuid:v,oneServiceMuid:y});const S=n&&n.toLocaleLowerCase().split(",");if(!S)return;const C={prg1sFlights:[],prg1swFlights:[],prgOnlyFlights:[],oneSFlights:[]};for(const e of p)S.includes(e)||l(e,C);const w={prg1sFlights:[],prg1swFlights:[],prgOnlyFlights:[],oneSFlights:[]};S.forEach((e=>{p.has(e)||l(e,w)}));const{prg1sFlights:b=[],prg1swFlights:T,prgOnlyFlights:k,oneSFlights:P}=w,{prg1sFlights:A,prg1swFlights:I,prgOnlyFlights:E,oneSFlights:M}=C,x={pcsFlightBlobVersion:f,oneServicefdHeadVersion:d,pcsMuid:v,oneServiceMuid:y,oneServiceDebugId:t};(T.length>0||I.length>0)&&(0,r.H)(o.tNY,"prg-1sw-* flight mismatch between PCS and 1S",void 0,{flightNotPresentInPcs:T,flightNotPresentIn1S:I,commonProps:x}),"windowsShell"!==s.jG.AppType&&((b.length>0||A.length>0)&&(0,r.H)(o.jcj,"prg-1s-* flight mismatch between PCS and 1S",void 0,{flightNotPresentInPcs:b,flightNotPresentIn1S:A,commonProps:x}),(k.length>0||E.length>0)&&(0,r.H)(o.qjh,"prg-* flight mismatch excluding prg-1s-* and prg-1sw-* between PCS and 1S",void 0,{flightNotPresentInPcs:k,flightNotPresentIn1S:E,commonProps:x}),(P.length>0||M.length>0)&&(0,r.H)(o.KzD,"1s-* flight mismatch between PCS and 1S",void 0,{flightNotPresentInPcs:P,flightNotPresentIn1S:M,commonProps:x}))}function l(e,t){e&&(e.startsWith("1s-")?t.oneSFlights.push(e):e.startsWith("prg-")&&(e.startsWith("prg-1sw")?t.prg1swFlights.push(e):e.startsWith("prg-1s")?t.prg1sFlights.push(e):t.prgOnlyFlights.push(e)))}},21789:function(e,t,n){"use strict";n.d(t,{Vh:function(){return _},jG:function(){return W},Yq:function(){return U}});var i,r,o,a=n(92095),s=n(46986),c=n(83102),d=n(48587),l=n(7476),u=n(10754),p=n(75592);!function(e){e.WWW="www",e.MicrosoftStart="microsoftstart",e.INT="int",e.INT1="int1",e.MicrosoftStartINT="microsoftstart-int",e.MicrosoftStartINT1="microsoftstart-int1"}(i||(i={})),function(e){e.MSN="msn",e.MicrosoftStart="microsoftstart"}(r||(r={})),function(e){e.COM="com",e.CN="cn"}(o||(o={}));var h,g=n(99035),m=n(23357);!function(e){e.getHostPageFromUrl=function(e){if(!e)return;const t=new URL(e),n=t.hostname,i=t.pathname.split("/"),r=(n.match(/[^.]+\.[^.\d]+$/)||{})[0]||"";if(i.length<=m.Qw)return{originalUrl:e,categoryKey:null,verticalKey:null,hostName:n,topDomain:r};const o=5===i[1].length&&2===i[1].split("-").length?1:0,a={originalUrl:e,categoryKey:i[2+o],verticalKey:i[1+o],hostName:n,topDomain:r};return i.length>=m.Qw&&(a.subcategoryKey=i[3+o]),a}}(h||(h={}));var f,v,y=n(31558),S=n(78672),C=n(55524),w=n(291),b=n(19464);!function(e){e.Anon="ANON",e.AppAnon="APP_ANON",e.Unknown=""}(f||(f={})),function(e){e.AnonCookieExists="ace",e.AppAnonCookieExists="aace"}(v||(v={}));var T=n(37413),k=n(34832),P=n(57042);var A,I=n(36941),E=n(52681);!function(e){e.prod="prod",e.prodssr="prod-ssr",e.staging="staging",e.int1="int1",e.int="int",e.intpr="intpr",e.intperf="intperf"}(A||(A={}));var M=n(7653),x=n(92100),L=n(22140),R=n(65505),D=n(23979),F=n(13334);var O=n(79022),B=n(49595);const N="__AppEnvironmentInstance__";class _{get ShouldUseFdheadQsp(){return this.shouldUseFdheadQsp}set ShouldUseFdheadQsp(e){this.shouldUseFdheadQsp=e}get DisableInMemoryCache(){return!!this.disableInMemoryCache}set DisableInMemoryCache(e){this.disableInMemoryCache=e}get OneServiceContentMarketQspKey(){return this.oneServiceContentMarketQspKey}get Ecasession(){return void 0===this.ecasession&&(this.ecasession=(0,b.ej)("ecasession")||"init"),this.ecasession}get BrowserOptOut(){return void 0===this.browserOptOut&&(this.browserOptOut="1"===(0,b.ej)("TOptOut")),this.browserOptOut}get MachineId(){return this.machineId}set MachineId(e){this.machineId=e}get isMobile(){var e,t;const n=(null===F.Al||void 0===F.Al||null===(e=F.Al.ClientSettings)||void 0===e?void 0:e.ocid)||"",i=(null===F.Al||void 0===F.Al||null===(t=F.Al.ClientSettings)||void 0===t?void 0:t.deviceFormFactor)||"";return n.startsWith("msnaroverlay")||"phone"===i}get isMiniProgram(){var e;const t=F.Al.ClientSettings||{ocid:"",deviceFormFactor:""},n=(0,y.N)()?"weatherminiprogram"===t.ocid||((null===(e=navigator)||void 0===e?void 0:e.userAgent)||"").indexOf("miniProgram")>-1:"weatherminiprogram"===t.ocid;return"phone"===t.deviceFormFactor&&n}get isOverlayFrame(){var e;return((null===F.Al||void 0===F.Al||null===(e=F.Al.ClientSettings)||void 0===e?void 0:e.ocid)||"").startsWith("msnaroverlay")}get ActivityId(){return this.activityId}set ActivityId(e){this.activityId=e,F.Al.ClientSettings={...F.Al.ClientSettings,aid:e}}get FrontDoorMuid(){return this.frontDoorMuid}get EnvironmentConfigUrl(){const e=new URL("",this.environmentConfigUrl);"dev"===new URLSearchParams((0,S.zp)()).get("env")&&e.searchParams.set("env.config","dev");const t=new URLSearchParams((0,S.zp)()).get("env.config");return t&&e.searchParams.set("env.config",t),e}get ContentServiceUrlBase(){const e=new URL("",this.contentServiceUrlBase);"dev"===new URLSearchParams((0,S.zp)()).get("env")&&e.searchParams.set("env.content","dev");const t=new URLSearchParams((0,S.zp)()).get("env.content");return t&&e.searchParams.set("env.content",t),e}get CurrentRequestTargetScope(){return this.currentRequestTargetScope}set CurrentRequestTargetScope(e){this.currentRequestTargetScope=e}get LocaleContentMarket(){var e,t;return(0,I.H)(F.Al.ClientSettings&&F.Al.ClientSettings.locale)||(null===(e=this.currentRequestTargetScope)||void 0===e||null===(e=e.locale)||void 0===e?void 0:e.content)||(null===(t=this.currentRequestTargetScope)||void 0===t?void 0:t.locale)}get LocaleDisplayLanguage(){return(0,I.H)(F.Al.ClientSettings&&F.Al.ClientSettings.locale,!0)||this.LocaleContentMarket}get LocaleContentMarketString(){const e=this.LocaleContentMarket;return e&&e.language&&e.market?(0,I.p)(e):""}get LocaleDisplayLanguageString(){const e=this.LocaleDisplayLanguage;return e&&e.language&&e.market?(0,I.p)(e):""}get SourceUrl(){let e=W.HostPage.originalUrl;const t=W.CurrentRequestTargetScope.pageType,n=W.HostPage.verticalKey;if("localhost.msn.com"===W.HostPage.hostName&&"ntp"===t)return e="https://ntp.msn.com/edge/ntp",e;if(t&&n){const i=t.toLowerCase();(i.indexOf("dhp")>-1||i.indexOf("ntp")>-1)&&(e="https://"+W.HostPage.hostName+"/"+n+"/"+t)}return e}get CurrentMarket(){return this.currentMarket}set CurrentMarket(e){this.currentMarket=e}get EnableFiveColLayout(){return this.enableFiveColLayout}set EnableFiveColLayout(e){this.enableFiveColLayout=e}get Environment(){return this.environment}set Environment(e){this.environment=e}get StaticDomain(){return this.staticDomain}get HostPage(){return this.hostPage}set HostPage(e){this.hostPage=e}get AppType(){return this.appType}get AuthCookieName(){return this.authCookieName}set AuthCookieName(e){this.authCookieName=e}get UseAuthFetch(){return this.useAuthFetch}set UseAuthFetch(e){this.useAuthFetch=e}get AccountInfoPromise(){return this.accountInfoPromise}set AccountInfoPromise(e){this.accountInfoPromise=e}get ResolvedAccountInfo(){return this.resolvedAccountInfo}set ResolvedAccountInfo(e){this.resolvedAccountInfo=e}get BuildVersion(){return this.buildVersion||""}get ClarityEnabled(){return this.clarityEnabled}set ClarityEnabled(e){this.clarityEnabled=e}get IsWinAADUser(){return this.isWinAADUser}set IsWinAADUser(e){this.isWinAADUser=e}get RootTelemetryId(){return this.rootTelemetryId}set RootTelemetryId(e){this.rootTelemetryId=e}get TrackInfo(){return this.trackInfo}set TrackInfo(e){this.trackInfo=e}get UserId(){return this.getUserMuid()||this.userId}set UserId(e){this.userId=e}get OneServiceApiKey(){return this.oneServiceApiKey}set OneServiceApiKey(e){this.oneServiceApiKey=e}get OneServiceOverride(){return this.oneServiceOverride}set OneServiceOverride(e){this.oneServiceOverride=e}get EnvInstanceOverride(){return this.envInstanceOverride}get IsDebug(){return this.isDebug}get ShowMnsCreatorDashboard(){return this.showMnsCreatorDashboard}get NavTargetHostName(){return this.navTargetHost}get UseCachedApp(){return(0,y.N)()&&!!window.__useCachedApp}get NavTargetUrlWithLocale(){return`https://${this.NavTargetHostName}/${this.CurrentMarket}`}get IsChinaCompliance(){return this.isChinaCompliance}get IsCaliforniaRegion(){return this.isCaliforniaRegion}get AssetsUrl(){return this.staticAssetsUrl}set AssetsUrl(e){this.staticAssetsUrl=e}get StaticsUrl(){return this.staticsUrl}get topDomain(){return this.isChinaCompliance?o.CN:o.COM}get isGccModUser(){if((0,R.TJ)()){const e=(0,D.yL)();Promise.resolve(e===a.iN.GCC_MODERATE)}if(this.AccountInfoPromise)return this.AccountInfoPromise.then((e=>(null==e?void 0:e.region_scope)===a.iN.GCC_MODERATE))}get unsupportedEnterpriseCloud(){if((0,R.TJ)()){const e=(0,D.yL)();Promise.resolve(!(e===a.iN.GLOBAL))}if(this.AccountInfoPromise)return this.AccountInfoPromise.then((e=>!((null==e?void 0:e.region_scope)===a.iN.GLOBAL)))}get WidgetAttributes(){return this.widgetAttributes}get ServiceUrlBase(){const e=new URL("",this.serviceUrlBase);"dev"===new URLSearchParams((0,S.zp)()).get("env")&&e.searchParams.set("env.service","dev");const t=new URLSearchParams((0,S.zp)()).get("env.service");return t&&e.searchParams.set("env.service",t),e}get FeedServiceUrlBase(){if(!this.feedServiceUrlBase)return null;const e=new URL("",this.feedServiceUrlBase);"dev"===new URLSearchParams((0,S.zp)()).get("env")&&e.searchParams.set("env.service","dev");const t=new URLSearchParams((0,S.zp)()).get("env.service");return t&&e.searchParams.set("env.service",t),e}get EnterpriseServiceUrlBase(){if(!this.enterpriseServiceDomainUrl)return;const e=new URL("",this.enterpriseServiceDomainUrl);"dev"===new URLSearchParams((0,S.zp)()).get("env")&&e.searchParams.set("env.service","dev");const t=new URLSearchParams((0,S.zp)()).get("env.service");return t&&e.searchParams.set("env.service",t),e}get isAadAccountUser(){return this.CurrentRequestTargetScope&&this.CurrentRequestTargetScope.audienceMode===s.F.Enterprise&&this.ResolvedAccountInfo&&this.ResolvedAccountInfo.account_type&&this.ResolvedAccountInfo.account_type===c.Qm.AAD}get IsFrePage(){return this.isFrePage}get DisableCachingConfigs(){return this.disableCachingConfigs}get EnableConfigService(){const e=x.c.getQueryParameterByName("enableConfigService",(0,S.zp)());return e?"true"===e.toLocaleLowerCase():this.enableConfigService}get EnableCMSPPEConfigs(){return F.Al&&F.Al.EnableCMSPPEConfigs}get IsMultiConfigRetrievalEnabled(){return this.isMultiConfigRetrievalEnabled}get SendFeedCallActivityIdInHeader(){return this.sendFeedCallActivityIdInHeader}get SendUserIdInHeader(){return this.sendUserIdInHeader}set SendUserIdInHeader(e){this.sendUserIdInHeader=e}get ConfigServiceBaseUrl(){return this.configServiceBaseUrl}get CrsRetryBaseUrl(){return this.crsRetryBaseUrl}get FeatureFlags(){return this.featureFlags}get HostHeaderOverride(){return this.hostHeaderOverride}get ConfigRootUrl(){if(!this.configRootUrl)return null;const e=new URL("",this.configRootUrl);"dev"===new URLSearchParams((0,S.zp)()).get("env")&&e.searchParams.set("env.config","dev");const t=new URLSearchParams((0,S.zp)()).get("env.config");return t&&e.searchParams.set("env.config",t),e}get CacheBustingIdentifier(){return this.cacheBustingIdentifier}get IsGitConfigs(){return this.isGitConfigs}get CountryCode(){return this.countryCode}set CountryCode(e){this.countryCode=e}get ActivityIdLowerCaseNoHypens(){return(F.Al&&F.Al.ClientSettings&&F.Al.ClientSettings.aid||"").toLowerCase()}get Latitude(){return this.latitude}get Longitude(){return this.longitude}get ConfigOrigins(){return this.configOrigins}get CrsVersion(){return this.crsVersion}get CrsPath(){return this.crsPath}get CrsDisableServerCache(){return this.crsDisableServerCache}set CrsDisableServerCache(e){this.crsDisableServerCache=e}get LanguageRegionMismatch(){return this.findLanguageRegionMismatch()?"marketmismatch":""}get isWindowsDashboard(){return"newsAndInterests"===W.AppType||"windowsNewsPlus"===W.AppType||"winWidgets"===W.AppType}get LanguageRegionMismatchExplicit(){return this.findLanguageRegionMismatchExplicit()?"marketmismatch":""}get MarketRequestInputLanguage(){return this.marketRequestInputLanguage}get MarketRequestInputRegion(){return this.marketRequestInputRegion}get MarketRequestInputGeoCountry(){return this.marketRequestInputGeoCountry}get MarketDetectionType(){return this.marketDetectionType}get EnableAppErrorBatching(){return F.Al&&F.Al.CurrentFlights&&F.Al.CurrentFlights.includes("batcherrors")}get ConfigStaticFallbackBaseUrl(){return`${this.IsChinaCompliance?d.NH:d.pN}/periconfigs/`}findLanguageRegionMismatch(){var e,t,n,i,r,o;if(F.Al.ClientSettings&&"true"===F.Al.ClientSettings.static_page)return!1;const a=F.Al.ClientSettings&&(null===(e=F.Al.ClientSettings)||void 0===e?void 0:e.market)&&(null===(t=F.Al.ClientSettings)||void 0===t||null===(t=t.market)||void 0===t?void 0:t.detection),s=F.Al.ClientSettings&&(null===(n=F.Al.ClientSettings)||void 0===n?void 0:n.market)&&(null===(i=F.Al.ClientSettings)||void 0===i||null===(i=i.market)||void 0===i?void 0:i.requestInput),c=(0,I.H)(F.Al.ClientSettings&&(null===(r=F.Al.ClientSettings)||void 0===r?void 0:r.locale)&&(null===(o=F.Al.ClientSettings)||void 0===o||null===(o=o.locale)||void 0===o?void 0:o.content));if(a&&("implicitExisting"===a.type||"implicitNew"===a.type||"cm"===a.type||"implicitReset"===a.type)&&s){if(c){if(s.language.toLowerCase()!==c.language.toLowerCase())return this.marketMismatchDetails.type="language",this.marketMismatchDetails.mismatchItem1=s.language.toLowerCase(),this.marketMismatchDetails.mismatchItem2=c.language.toLowerCase(),!0;if(s.region&&s.region.toLowerCase()!==c.market.toLowerCase())return this.marketMismatchDetails.type="region",this.marketMismatchDetails.mismatchItem1=s.region.toLowerCase(),this.marketMismatchDetails.mismatchItem2=c.market.toLowerCase(),!0}if("implicitExisting"===a.type&&s.geo_country.toLowerCase()!==a.geo_country.toLowerCase())return this.marketMismatchDetails.type="geo_country",this.marketMismatchDetails.mismatchItem1=s.geo_country.toLowerCase(),this.marketMismatchDetails.mismatchItem2=a.geo_country.toLowerCase(),!0}return!1}get MarketMismatchDetail(){return this.findLanguageRegionMismatch()||this.findLanguageRegionMismatchExplicit()?this.marketMismatchDetails:null}findLanguageRegionMismatchExplicit(){var e,t,n,i,r,o;if(F.Al.ClientSettings&&"true"===F.Al.ClientSettings.static_page)return!1;const a=F.Al.ClientSettings&&(null===(e=F.Al.ClientSettings)||void 0===e?void 0:e.market)&&(null===(t=F.Al.ClientSettings)||void 0===t||null===(t=t.market)||void 0===t?void 0:t.detection),s=F.Al.ClientSettings&&(null===(n=F.Al.ClientSettings)||void 0===n?void 0:n.market)&&(null===(i=F.Al.ClientSettings)||void 0===i||null===(i=i.market)||void 0===i?void 0:i.requestInput),c=(0,I.H)(F.Al.ClientSettings&&(null===(r=F.Al.ClientSettings)||void 0===r?void 0:r.locale)&&(null===(o=F.Al.ClientSettings)||void 0===o||null===(o=o.locale)||void 0===o?void 0:o.content));if(a&&"compliance"!==a.type&&"url"!==a.type&&s){if(c){if(s.language.toLowerCase()!==c.language.toLowerCase())return this.marketMismatchDetails.type="language",this.marketMismatchDetails.mismatchItem1=s.language.toLowerCase(),this.marketMismatchDetails.mismatchItem2=c.language.toLowerCase(),!0;if(s.region&&s.region.toLowerCase()!==c.market.toLowerCase())return this.marketMismatchDetails.type="region",this.marketMismatchDetails.mismatchItem1=s.region.toLowerCase(),this.marketMismatchDetails.mismatchItem2=c.market.toLowerCase(),!0}if(s.geo_country.toLowerCase()!==a.geo_country.toLowerCase())return this.marketMismatchDetails.type="geo_country",this.marketMismatchDetails.mismatchItem1=s.geo_country.toLowerCase(),this.marketMismatchDetails.mismatchItem2=a.geo_country.toLowerCase(),!0}return!1}setConfigOrigin(){const e={feature:p.w.Production,loc:p.w.Production};return this.IsGitConfigs&&!this.EnableConfigService||(e.feature=p.w.Production,e.loc=p.w.Production),e}constructor(e,t,n,i,r){this.assetsGlobalUrl="https://assets.msn.com",this.assetsCNUrl="https://assets.msn.cn",this.marketMismatchDetails={type:"",mismatchItem1:"",mismatchItem2:""},this.initializeAppEnvironment(e,t,n,i,r)}static getInstance(e=null,t=null,n=null,i=null,r=null){return C.Gq.get(N,(()=>new _(e,t,n,i,r)))}static resetInstance(e=null,t=null,n=null,i=null,r=null){const o=new _(e,t,n,i,r);return C.Gq.set(N,o),W=(0,w.h)(_),W}initializeAppEnvironment(e,t,n,i,r){const o=(0,S.Td)(),a=(0,y.N)()?(0,S.$w)(m.Xs):null,s=(0,S.l4)(),c=(0,S.Dp)(),u=(0,S.zp)();let p=null;const f=F.Al&&F.Al.ClientSettings,v=x.c.getParamsWithItems(u,!0);let C=!1;if(f){this.isCaliforniaRegion=f.geo_subdivision&&"california"==f.geo_subdivision.toLocaleLowerCase(),this.isChinaCompliance=function(e,t){return!!(e.hostname.toLowerCase().endsWith(".cn")||t.isChinaCompliance||t.useCnDomain||e.search.match(/item=revip:cn/))}({hostname:o,search:u},f),(0,E.sV)(this.isChinaCompliance),this.activityId=this.tryReformatGuid(f.aid),this.currentMarket=this.LocaleContentMarketString||f.apps_locale,this.countryCode=f.geo_country,this.frontDoorMuid=f.fd_muid,this.latitude=f.geo_lat,this.longitude=f.geo_long,this.configRootUrl=f.configRootUrl?new URL("",f.configRootUrl):null,p=(0,g.s)(f.pcsInfo&&f.pcsInfo.env||"prod"),this.setAccountInfoPromise(),this.appType=f.apptype||"",this.authCookieName=this.getAuthCookieName(),this.useAuthFetch=!1;const{featureFlags:e}=f;this.featureFlags=e,C=e&&"true"===e.disableCachingConfigs,this.enableConfigService=!e||!e.enableConfigService||"true"===e.enableConfigService,this.sendFeedCallActivityIdInHeader=(!e||!e.disableActivityIdInHeader||"true"!==e.disableActivityIdInHeader)&&"hub"===this.appType,this.cacheBustingIdentifier=f.cbid;const{bundleInfo:t,pcsInfo:n}=f||{},i=this.getRunTimePropertyBag(t,n);(0,l.GQ)(i),(0,B.r7)(i),this.configIndexDocId=f.configIndexDocId,this.widgetAttributes=f.widgetAttributes}const w=(0,g.s)(x.c.getQueryParameterByName("env",s));this.environment=w||p||g.q.prod,this.envInstanceOverride=x.c.getQueryParameterByName("instance",s);const b=f&&f.servicesEndpoints,T=b&&b.feedService&&b.feedService.domain||c;this.serviceDomainUrl=n||T,this.oneServiceOverride=r,this.staticDomain=new URL(T).host,this.staticAssetsUrl=b&&b.staticConfig&&b.staticConfig.domain||(this.isChinaCompliance?"https://assets.msn.cn":"https://assets.msn.com"),this.staticsUrl=`${this.staticAssetsUrl}/staticsb/statics/`,this.enterpriseServiceDomainUrl=b&&b.enterpriseFeedService&&b.enterpriseFeedService.domain;const{crs:k={}}=b||{},{v:P,domain:A,path:I}=k;this.crsVersion=P,this.crsDomain=A,this.crsPath=I||d.mX;const{requestInput:L={},detection:R={}}=f&&f.market||{},{language:D="",region:O="",geo_country:N=""}=L||{},{type:_=""}=R||{};this.marketRequestInputLanguage=D,this.marketRequestInputRegion=O,this.marketRequestInputGeoCountry=N,this.marketDetectionType=_,this.serviceUrlBase=e||a&&a.getAttribute(m.X8)&&new URL("",a.getAttribute(m.X8))||new URL("/service/",this.serviceDomainUrl),this.feedServiceUrlBase=this.serviceDomainUrl&&new URL("/service/",this.serviceDomainUrl)||void 0,this.hostPage=h.getHostPageFromUrl(s),this.isFrePage="1"===x.c.getQueryParameterByName("fre",s),this.userId=this.getUserMuid(),this.rootTelemetryId=a?Number(a.getAttribute(m.DB)):0;const U=a&&a.getAttribute(m.uw),W=a&&a.getAttribute(m.Kz);this.trackInfo={sitePage:{page_product:U,page_type:W}},this.setNavTargetHostName(),this.setTargetScope();const H=this.currentRequestTargetScope&&this.currentRequestTargetScope.pageExperiments||[];this.disableCachingConfigs=C||(0,y.N)()&&H.includes("inlincrscall"),this.crsVersion=(0,M.W_)(this.crsVersion||"",H,this.appType||""),this.isGitConfigs=this.useGitConfigs(),this.configOrigins=this.setConfigOrigin(),this.contentServiceUrlBase=this.serviceDomainUrl?new URL("/content/",this.serviceDomainUrl):void 0,this.isMultiConfigRetrievalEnabled=this.useMultiConfigsRetrieval();const $=this.getConfigServiceBaseUrl(this.isMultiConfigRetrievalEnabled,t);this.configServiceBaseUrl=$?new URL("",$):null,this.environmentConfigUrl=this.serviceDomainUrl?new URL("/config/v1/",this.serviceDomainUrl):void 0,this.isDebug=(x.c.getQueryParameterByName("debug",s)||"").toLowerCase()in{1:1,true:1}||(x.c.getQueryParameterByName("item",s)||"").toLowerCase().indexOf("/debug")>0||o.includes("localhost"),this.showMnsCreatorDashboard=null!=x.c.getQueryParameterByName("mnsDash",s),this.oneServiceApiKey=this.getOneServiceApiKey(),this.enableFiveColLayout=!1,i&&(this.hostHeaderOverride=i);const q={appType:this.appType,flights:F.Al.CurrentFlights,itemOverrides:v},G=u&&(u.includes("vptest=1")||u.includes("reqsrc=vp")),V="edgeChromium"===this.appType&&!(0,y.N)();this.shouldUseFdheadQsp=G||(0,M.Bc)(q,V),this.oneServiceContentMarketQspKey=this.shouldUseFdheadQsp?"market":"cm"}getOneServiceApiKey(){var e,t,n;if(this.widgetAttributes&&this.widgetAttributes.feed&&this.widgetAttributes.feed.apiKey)return this.widgetAttributes.feed.apiKey;const i="0QfOX3Vn51YCzitbLaRkTTBadtWpgTN8NZLW0C1SEM";let r;switch(this.appType){case"windowsShell":case"windowsShellV2":r="pWw5OmQehOA0XNfgcgrTrwEJZJJJzE83ovtTQx6JRG";break;case"newsAndInterests":case"windowsNewsPlus":r="AEbyVYqTQAPvg4lWwMSFHaLkDzl3weRKKIDDInLQUj";break;case"winWidgets":r="sidebar"===(null===(e=this.currentRequestTargetScope)||void 0===e?void 0:e.pageType)?i:"AEbyVYqTQAPvg4lWwMSFHaLkDzl3weRKKIDDInLQUj";break;case"edgeChromium":r="1hYoJsIRvPEnSkk0hlnJF2092mHqiz7xFenIFKa9uc";break;case"bingHomepage":case"distribution":r="lenovo"===F.Al.ClientSettings.pagetype?"OrorOEMX3w4Hsk49OXMM6YayCYQw3OHcpzqiXEk9xd":"edgewelcome"===F.Al.ClientSettings.pagetype?"oPFhbDSAghltCuG6UvQCcxmngSVye65eXQHHu3voxZ":"QMmdky7jrTlM4mWJmMYQTi71lp678KyZJBKHCAyKCg";break;case"sharedWidgets":r="hFWgtnoLG1BXruRRhEVJo5ACP8414XUG0Ric6JbyND";break;case"gaming":r="play"===(null===(t=this.currentRequestTargetScope)||void 0===t?void 0:t.pageType)?i:"gaming"===(null===(n=this.currentRequestTargetScope)||void 0===n?void 0:n.pageType)?"1hYoJsIRvPEnSkk0hlnJF2092mHqiz7xFenIFKa9uc":"Uj7u7bqBgMhDGBUVPSbcHUe0pU7X8TbVRviCO2fojo";break;case"travel":r="8RwD77wJgNQmmVBdGmZsK6vvPCrG58iRCQRoPsE4JJ";break;case"health":r="FywQv6H345wNCU4yKWraF2esI9qiMQFx90v53mMHrm";break;default:r=i}return r}getUserMuid(){let e;const t=(0,b.jG)();return(0,O.Z)(t)&&(e="m-"+t),e}getConfigServiceBaseUrl(e=!0,t=null){const n=function(e,t,n=!1){switch(t){case A.prod:case A.prodssr:case A.staging:return e;default:return n?location.origin||null:(0,S.Dp)()||null}}(this.crsDomain||(this.isChinaCompliance?d.NH:d.pN),this.environment),i=this.isGitConfigs?`${this.crsPath}${this.crsVersion||d.PQ}/config/`:`${this.crsPath}${e?"v2/":""}configindex/`,r=(0,S.Dp)();if(this.crsRetryBaseUrl=r?r+i:null,t)return t+i;if((0,y.N)()&&(this.renderWidgets()||"sharedWidgets"===this.appType||"bingHomepage"===this.appType||"distribution"===this.appType||"gaming"===this.appType||("sports"===this.appType||"finance"===this.appType||"weather"===this.appType)&&this.widgetAttributes)){const e=(this.crsDomain||"https://www.msn."+(this.IsChinaCompliance?"cn":"com"))+i;return this.crsRetryBaseUrl=e,n?`${n}`+i:e}return n||(0,S.Dp)()?(n||(0,S.Dp)())+i:null}useMultiConfigsRetrieval(){const e=(0,S.zp)();if(e){const t=x.c.getQueryParameterByName("isMultiConfigRetrievalEnabled",e);if(t)return"true"===t.toLocaleLowerCase()}return!this.featureFlags||!this.featureFlags.isMultiConfigRetrievalEnabled||"true"===this.featureFlags.isMultiConfigRetrievalEnabled}useGitConfigs(){const e=(0,S.zp)();if(e){const t=x.c.getQueryParameterByName("isGitConfig",e);if(t)return"true"===t.toLocaleLowerCase()}return(0,M.LB)(this.crsVersion,this.configIndexDocId,this.appType)}renderWidgets(){const e=(0,S.zp)();if(e){const t=x.c.getQueryParameterByName("renderWidget",e);if(t)return"true"===t.toLocaleLowerCase()}return!1}getAuthCookieName(){if(this.authCookieName)return this.authCookieName;let e;switch((F.Al&&F.Al.ClientSettings).apptype||""){case"windows":e="windowshp"===F.Al.ClientSettings.pagetype?"anon":"app_anon";break;case"aicharacter":case"bingHomepage":case"community":case"contentTools":case"finance":case"gaming":case"health":case"homePage":case"hub":case"personalize":case"sharedWidgets":case"shopping":case"sports":case"traffic":case"travel":case"ugc":case"views":case"weather":default:e="anon";break;case"edgeChromium":case"edgeMobile":case"distribution":case"newsAndInterests":case"windowsNewsbar":case"windowsNewsPlus":case"winWidgets":case"windowsShell":case"windowsShellV2":case"office":case"channeldesktop":case"channelmobile":case"superApp":e="app_anon"}return e}setAccountInfoPromise(){this.ResolvedAccountInfo=null,this.AccountInfoPromise=new Promise((e=>{if(!((0,y.N)()&&window.chrome&&window.chrome.authPrivate&&window.chrome.authPrivate.getPrimaryAccountInfo))return e(null);const t=Math.round(performance.now());window.chrome.authPrivate.getPrimaryAccountInfo((n=>{const i=Math.round(performance.now());return(0,u.Ou)()["Auth.GetPrimaryAccountInfo"]=i-t,this.ResolvedAccountInfo=n,e(n)}))})),this.AccountInfoPromise}tryReformatGuid(e){if(e&&32===e.length){const t=e.match(/(\w{8})(\w{4})(\w{4})(\w{4})(\w{12})/i);t&&(e=t.slice(1).join("-"))}return e}setTargetScope(){if(!F.Al||!F.Al.ClientSettings)return;const e=function(e,t){let n;const i=decodeURIComponent((0,T.F)(e,"aace")),{child:r}=i&&(0,k.d)(i)||{},o=(0,T.F)(e,"child");return n=i&&(1===r||o)?P.F.Kids:t.audienceMode||P.F.Adult,n}((0,S.G8)(),F.Al.ClientSettings),{browser:t,deviceFormFactor:n,domain:i,ocid:r,os:o,pagetype:a}=F.Al.ClientSettings,s=F.Al.CurrentFlights.split(",");if(this.currentRequestTargetScope={audienceMode:e,browser:t,deviceFormFactor:n,domain:i,locale:{content:this.LocaleContentMarket,display:this.LocaleDisplayLanguage},ocid:r,os:o,platform:"web",pageType:a,pageExperiments:s},!this.currentRequestTargetScope.locale&&L.b.stringHasData(this.LocaleContentMarketString)){const e=this.LocaleContentMarketString.split("-");e.length>1&&(this.currentRequestTargetScope.locale={language:e[0],market:e[e.length-1],content:{language:e[0],market:e[e.length-1]},display:{language:e[0],market:e[e.length-1]}})}}setNavTargetHostName(){let{subDomain:e,domainName:t,topLevelDomain:n}={subDomain:i.WWW,domainName:r.MSN,topLevelDomain:o.COM};const a="homePage"!==this.appType&&F.Al&&F.Al.CurrentFlightSet&&F.Al.CurrentFlightSet.has("1s-viewurldomain");switch(this.environment){case g.q.prod:case g.q.staging:e=a?i.MicrosoftStart:i.WWW;break;case g.q.int1:e=a?i.MicrosoftStartINT1:i.INT1;break;case g.q.int:case g.q.intpr:case g.q.intperf:e=a?i.MicrosoftStartINT:i.INT}this.isChinaCompliance&&(n=o.CN),this.navTargetHost=`${e}.${t}.${n}`}getRunTimePropertyBag(e,t){const n={appType:this.appType};t&&(n.pcsVersion=t.v,n.pcsEnv=t.env);const{alias:i,v:r}=e||{};this.buildVersion=r||"",n.build=this.buildVersion,i&&(n.buildAlias=i);const o=F.Al.CurrentFlights;return o&&(n.shouldDelayUntilLoadTime="edgeChromium"===this.appType&&F.Al.IsPrerender,n.shouldSupressWarnings=o.includes("warningsremoved"),n.shouldSampleErrorsForTreatement1=o.includes("errorsamplingb"),n.shouldSampleErrorsForTreatement2=o.includes("errorsamplingc")),n}getStaticUrls(e){return{com:`${this.assetsGlobalUrl}/staticsb/statics/${e}`,cn:`${this.assetsCNUrl}/staticsb/statics/${e}`}}}const U=_.getInstance;let W=(0,w.h)(_)},62713:function(e,t,n){"use strict";n.d(t,{Qe:function(){return c},_Y:function(){return d}});var i=n(34832),r=n(31156),o=n(31558),a=n(23357),s=n(94546);function c(){var e;return(0,o.N)()?(0,i.d)(document.head.dataset.clientSettings||(null===(e=document.getElementsByClassName(s.fw)[0])||void 0===e?void 0:e.getAttribute(a.nr))):null}function d(e){if(!(0,o.N)()||!e)return;const t=(0,r.Vm)(e);t&&document.head.setAttribute(a.nr,t)}},30008:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});var i=n(13334);const r=()=>{const e=i.Al&&i.Al.ClientSettings||{},{geo_citycf:t,geo_countrycf:n}=e;return e&&{citycf:t,countrycf:n}}},92095:function(e,t,n){"use strict";var i;n.d(t,{Ak:function(){return a},I4:function(){return r},d3:function(){return o},iN:function(){return i},oD:function(){return s}}),function(e){e.GLOBAL="GLOBAL",e.GCC_MODERATE="GCC_MODERATE"}(i||(i={}));const r="d7b530a4-7680-4c23-a8bf-c52c121d2e87",o="https://enterprisenews.microsoft.com",a="EnterpriseOneService",s=87},99035:function(e,t,n){"use strict";var i;function r(e){switch(e){case i.prod:case i.staging:return i.prod;case i.int1:return i.int1;case i.int:case i.intpr:case i.intperf:return i.int;default:return null}}n.d(t,{q:function(){return i},s:function(){return r}}),function(e){e.prod="prod",e.staging="staging",e.int1="int1",e.int="int",e.intpr="intPR",e.intperf="intPerf"}(i||(i={}))},98463:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});class i{static get UpsellGamerMode(){return i.upsellGamerMode}static set UpsellGamerMode(e){i.upsellGamerMode=e}}},13334:function(e,t,n){"use strict";n.d(t,{nP:function(){return P},Al:function(){return A}});var i=n(61633),r=n(46986),o=n(55524),a=n(291),s=n(78672),c=n(31558),d=n(23357),l=n(36941),u=n(92100),p=n(54297),h=n(7183),g=n(34832),m=n(88826),f=n(7476),v=n(76733),y=n(53525);function S(e){return"shd_"+e}var C=n(92095),w=n(94546),b=n(23549);const T="__HeadDataInstance__";class k{get Locale(){return this.locale}get MarketDir(){return this.marketDir}set MarketDir(e){this.marketDir=e}get CurrentFlights(){return this.currentFlights||""}set CurrentFlights(e){this.currentFlights=e,this.currentFlightSet=new Set((e||"").split(",")),this.setSweeperStoredHeadData(i.il.FlightIdKey,this.currentFlights)}get CurrentFlightSet(){return this.currentFlightSet}get ClientSettings(){return this.clientSettings}set ClientSettings(e){this.clientSettings=e}get Diagnostics(){return this.diagnostics}set Diagnostics(e){this.diagnostics=e}get EnableCMSPPEConfigs(){return this.enableCMSPPEConfigs}get EdgeNTPHeader(){return this.edgeNTPHeader}set EdgeNTPHeader(e){this.edgeNTPHeader=e}get UserIsSignedIn(){return this.userIsSignedIn}get IsPreload(){return this.isPreload}set IsPreload(e){this.isPreload=e}get IsPrerender(){return this.isPrerender}set IsPrerender(e){this.isPrerender=e}get IsBlendedEnterprise(){return this.isBlendedEnterprise}set IsBlendedEnterprise(e){this.isBlendedEnterprise=e}get IsServiceWorkerCache(){return this.isServiceWorkerCache}get LastKnownAppVersion(){return this.lastKnownAppVersion}get AnonCookieName(){return this.anonCookieName}set AnonCookieName(e){this.anonCookieName=e}get SsoComplete(){return this.ssoComplete}get AadState(){return this.aadState}set AadState(e){this.aadState=e}set LocaleName(e){this.locale=e}get SelectedFeedPivot(){return this.selectedFeedPivot}set SelectedFeedPivot(e){this.selectedFeedPivot=e}get LastSelectedPivot(){return this.lastSelectedPivot}set LastSelectedPivot(e){this.lastSelectedPivot=e}get SwitchedPivot(){return this.switchedPivot}set SwitchedPivot(e){this.switchedPivot=e}constructor(e){this.enableCMSPPEConfigs=!1,this.initializeHeadData(e)}static getInstance(){return o.Gq.get(T,(()=>new k))}static resetInstance(e){const t=new k(e);return o.Gq.set(T,t),A=(0,a.h)(k),A}initializeHeadData(e){if(e)return void this.initializeFromData(e);if(this.newRidNeeded=void 0,this.lastUsedActivityIdBacking=void 0,this.locationSearch=(0,s.zp)(),this.htmlElement=(0,c.N)()?(0,s.SV)(d.x$.html)[0]:null,this.headElement=(0,c.N)()?(0,s.SV)(d.x$.head)[0]:null,this.applicationCache=(0,c.N)()?window.applicationCache:null,this.selectedFeedPivot="",this.widgetSettingsElement=(0,c.N)()?(0,s.ZI)(w.fw)[0]:null,!this.htmlElement||!this.headElement)return;this.initializeFromDom(),window&&window.navigator&&window.navigator.serviceWorker&&window.navigator.serviceWorker.controller&&(this.isServiceWorkerCache=!0),this.isServiceWorkerCache&&(this.initializeFromStorage(),this.initializeLastUsedActivityId());const t=(0,l.H)(this.clientSettings&&this.clientSettings.locale),n=this.clientSettings&&t&&t.language&&t.market;this.locale=n?(0,l.p)(t):"";const i=this.htmlElement.getAttribute(d.cp);this.marketDir=i&&i.toLocaleLowerCase()||"",this.setQueryItemProvidedValues();const r=(this.widgetSettingsElement||this.headElement).getAttribute(d.js);if(r){const e=(0,g.d)(r);this.anonCookieName=e.anonckname,this.userIsSignedIn=1===e.signedin}u.c.getQueryParameterByName("backgroundpreload",this.locationSearch)&&"hidden"===document.visibilityState&&(this.isPreload=!0,this.logDocumentVisibility()),u.c.getQueryParameterByName("prerender",this.locationSearch)&&"hidden"===document.visibilityState&&(this.isPrerender=!0,this.logDocumentVisibility()),(0,c.N)()&&window.ShellFeedsApp&&window.ShellFeedsApp.shellFeedsExperienceInfo&&!window.ShellFeedsApp.shellFeedsExperienceInfo.isWebviewVisible&&0===window.ShellFeedsApp.shellFeedsExperienceInfo.buttonInteraction&&(this.isPreload=!0),this.setIsBlendedEnterprise()}get lastUsedActivityId(){if(this.lastUsedActivityIdBacking)return this.lastUsedActivityIdBacking;const e=this.getStoredActivityIdKey(),t=(0,p.$o)().getItem(e);return t&&(this.lastUsedActivityIdBacking=(0,g.d)(t)),this.lastUsedActivityIdBacking}set lastUsedActivityId(e){const t=this.getStoredActivityIdKey();if(e){if(e.id&&e.ts){try{(0,p.$o)().setItem(t,JSON.stringify(e),!1)}catch(e){const t=e&&e.message;(0,b.dK)().then((()=>{(0,m.H)(f.dw4,t)}))}this.lastUsedActivityIdBacking=e}}else(0,p.$o)().removeItem(t)}get storedHeadData(){return function(e){const t=S(e),n=(0,p.$o)().getItem(t);return n?(0,g.d)(n):null}(this.clientSettings.pagetype)}set storedHeadData(e){!function(e,t){const n=S(e);t?(0,p.$o)().setItem(n,JSON.stringify(t)):(0,p.$o)().removeItem(n)}(this.clientSettings.pagetype,e)}initializeFromData(e){var t,n;this.clientSettings=e.clientSettings,this.edgeNTPHeader=e.edgeNTPHeader,this.selectedFeedPivot=null===(t=e.edgeNTPHeader)||void 0===t?void 0:t.selectedFeedPivot,this.setFlights(e.clientInfo),this.setQueryItemProvidedValues();const i=(0,l.H)(this.clientSettings&&(null===(n=this.clientSettings)||void 0===n?void 0:n.locale)),r=this.clientSettings&&i&&i.language&&i.market;this.locale=r?(0,l.p)(i):"",this.marketDir=e.marketDir&&e.marketDir.toLocaleLowerCase()||"",this.setIsBlendedEnterprise()}initializeFromDom(){this.setFlights((this.widgetSettingsElement||this.headElement).getAttribute(d.um));const e=(this.widgetSettingsElement||this.headElement).getAttribute(d.IX);this.diagnostics=(0,g.d)(e);const t=(this.widgetSettingsElement||this.headElement).getAttribute(d.nr);if(!t)return;if(this.clientSettings=(0,g.d)(t),!this.clientSettings)return;this.calculateForwardableParams();const{pagetype:n}=this.clientSettings;if(!n){const e=(this.widgetSettingsElement||this.headElement).getAttribute(d.AU);this.clientSettings.pagetype=null==e?void 0:e}if(n)try{const e=(0,p.$o)().getObject(d.It.pageVersions)||{};this.lastKnownAppVersion=e[n];const{bundleInfo:t}=this.clientSettings;t&&this.lastKnownAppVersion!==t.v&&(e[n]=t.v,(0,p.$o)().setObject(d.It.pageVersions,e))}catch{v.k.log(`${this.logPrefix()} couldn't complete local storage related operation.`)}}initializeFromStorage(){const e=this.storedHeadData;e&&this.populateFromApiResponse(e)}populateFromApiResponse(e){if(!e)return;const t=e.clientSettings,n=e.info;if(!t||!n)return;if(this.clientSettings.pageGenTime>=t.pageGenTime)return void(this.storedHeadData=null);const i=this.clientSettings.queryparams,r=this.clientSettings&&this.clientSettings.bundleInfo&&this.clientSettings.bundleInfo.v;this.clientSettings=t,this.clientSettings.bundleInfo=Object.assign(this.clientSettings.bundleInfo||{},{v:r}),this.clientSettings.queryparams=i,this.calculateForwardableParams(),this.setFlights(n)}calculateForwardableParams(){const e=this.clientSettings?this.clientSettings.queryparams:"";if(!e)return;const t=e.toLocaleLowerCase(),n=["fdhead","item"].map((e=>{const n=u.c.getQueryParameterByName(e,t);return n?`${e}=${encodeURIComponent(n)}`:null})).filter((e=>e));this.clientSettings.forwardablequeryparams=n.join("&")}initializeLastUsedActivityId(){const e=this.lastUsedActivityId,t=this.clientSettings.aid,n=(0,y.Z)(this.clientSettings.pageGenTime).getTime();this.newRidNeeded=!(!e||!n||e.id!==t),n&&(!e||n>e.ts)&&(this.lastUsedActivityId={id:t,ts:n})}setFlights(e){this.CurrentFlights=((/f:\s*([^;]+)/i.exec(e)||{})[1]||"").toLowerCase(),this.currentFlightSet=new Set(this.currentFlights.split(","))}setSweeperStoredHeadData(e,t){if(!e)return;const n=S("sweeper"),i=h.y7.getObject(n)||{};t?i[e]=t:delete i[e],h.y7.setObject(n,i)}setIsBlendedEnterprise(){this.IsBlendedEnterprise=this.clientSettings&&this.clientSettings.audienceMode===r.F.Enterprise&&this.clientSettings.browser&&"edgeChromium"===this.clientSettings.browser.browserType&&parseInt(this.clientSettings.browser.version)>=C.oD}setQueryItemProvidedValues(){const e=u.c.getParamsWithItems((0,s.zp)(),!0),t=e.find((e=>"cms"===e.key));this.enableCMSPPEConfigs=t&&"ppe"===t.value,this.setCurrentFlightsTestOverride(e)}setCurrentFlightsTestOverride(e){if((0,s.Td)().toLowerCase().includes("localhost")&&e){const t=e.find((e=>"flights"===e.key));t&&(this.currentFlights=t.value,this.currentFlightSet=new Set(this.currentFlights.split(",")))}}getStoredActivityIdKey(){return"sai_"+this.clientSettings.pagetype}logPrefix(){return"HeadData:"+((0,c.N)()?"":` [Head:${this.widgetSettingsElement||this.headElement}] and [Html:${this.htmlElement}]`)}logDocumentVisibility(){(0,c.N)()&&((0,f.GQ)({isVisible:"visible"===document.visibilityState}),document.addEventListener("visibilitychange",(()=>{(0,f.GQ)({isVisible:"visible"===document.visibilityState})})))}}const P=k.getInstance;let A=(0,a.h)(k)},72322:function(e,t,n){"use strict";var i;n.d(t,{IY:function(){return i}}),function(e){e.BR="pt-br",e.DEDE="de-de",e.ENAU="en-au",e.ENCA="en-ca",e.ENGB="en-gb",e.ENIN="en-in",e.ENUS="en-us",e.ENIE="en-ie",e.ESES="es-es",e.ESMX="es-mx",e.FRCA="fr-ca",e.FRFR="fr-fr",e.ITIT="it-it",e.IN="en-in",e.HUHU="hu-hu",e.KOKR="ko-kr",e.JAJP="ja-jp",e.PLPL="pl-pl",e.PTBR="pt-br",e.RURU="ru-ru",e.RUXL="ru-xl",e.ZHCN="zh-cn"}(i||(i={}))},65505:function(e,t,n){"use strict";n.d(t,{P8:function(){return A},Pz:function(){return D},TJ:function(){return x},_K:function(){return R},aS:function(){return F},hk:function(){return M},iG:function(){return E},kD:function(){return W},lT:function(){return I},me:function(){return O},qn:function(){return k},tx:function(){return B},yd:function(){return U}});var i=n(94546),r=n(67575),o=n(62713),a=n(23357),s=n(89912),c=n(4619),d=n(31558),l=n(78672),u=n(88749),p=n(54557),h=n(18562),g=n(89315),m=n(76733),f=n(76187);const v=(0,o.Qe)()||{},y={newsAndInterests:1,windowsNewsbar:1,windowsNewsPlus:1,winWidgets:1,windowsShell:1,windowsShellV2:1,distribution:1,superApp:1,channeldesktop:1,channelmobile:1,edgeMobile:1},S={edgeChromium:1},C={winWidgets:1},w={edgeChromium:1,shopping:1,newsAndInterests:1,windowsNewsbar:1,windowsNewsPlus:1,winWidgets:1,windowsShell:1,windowsShellV2:1},b={edgeChromium:1,channeldesktop:1,channelmobile:1,cgHomePage:1,distribution:1,newsAndInterests:1,windowsNewsbar:1,windowsNewsPlus:1,winWidgets:1,windowsShell:1,windowsShellV2:1,superApp:1,edgeMobile:1},T=(0,f.p)((()=>v&&v.apptype)),k=(0,f.p)((()=>(0,d.N)()&&T()in C)),P=(0,f.p)((()=>(0,d.N)()&&!(0,g.pE)()&&!(T()in y)&&!x()&&!L())),A=(0,f.p)((()=>P()&&!(T()in S))),I=((0,f.p)((()=>P()&&(!(T()in S)||!(0,c.mb)()))),(0,f.p)((()=>P()&&!N()&&!_())));function E(){return!!(0,p.AE)(a.Li)}function M(){return _()||N()}const x=(0,f.p)((()=>!(T()in w)&&W()&&function(){const e=new URLSearchParams((0,l.zp)()).get("ocid")||(null==v?void 0:v.ocid),t=null==e?void 0:e.toLowerCase(),n=!a.Oj.has(t)&&"homePage"!==T()&&!a.up.has(t);return n}()&&!function(){const e="windows"==T()&&"windowshp"==(v&&v.pagetype)&&(0,l.l4)().includes(`${r.lU}`);return e}())),L=()=>(0,d.N)()&&document&&document.body&&document.body.getElementsByClassName(i.Di).length>0,R=(0,f.p)((()=>(0,h.Nv)("prg-1s-workid")||(0,h.Nv)("prg-1s-sm-workid")||(0,h.Nv)("prg-1s-twid")||(0,h.Nv)("prg-1s-mm-wid-t"))),D=(0,f.p)((()=>T()in b||x()));function F(){const e=(0,s.nh)();if(e)return m.k.log("dual-auth: tryGet1SAuthToken returned live tokens"),e;const t=(0,s.Wl)();if(t)return m.k.log(`dual-auth: tryGet1SAuthToken returned cached tokens that are ${(0,s.wX)()}`),t;m.k.log("dual-auth: tryGet1SAuthToken returned empty tokens")}function O(e){const t={};return e&&(t[a.Yu.authorization]=`Bearer ${e}`),t}function B(e){const t={};return e&&(t[a.Yu.entAuthorization]=e),t}function N(){return A()&&(0,u.YU)()||function(){const e=A()&&!(0,u.YU)()&&(0,c.x6)()&&("expired"==(0,s.wX)()||(0,u.hU)());return e}()||(0,u.SY)()||(0,u.jG)()}function _(){return A()&&!(0,c.x6)()&&(0,u.KK)()}function U(){(0,c.$v)(),A.cache.clear()}const W=(0,f.p)((()=>{const{browser:e}=v,{browserType:t="",detected:n={}}=e||{},{browserType:i=""}=n||{};return/edgeChromium/i.test(t)||/edgeAndroid/i.test(t)||/edgeiOS/i.test(t)||/edge/i.test(i)}));(0,f.p)((()=>A()&&!x()))},89912:function(e,t,n){"use strict";n.d(t,{Wl:function(){return c},nh:function(){return p},tx:function(){return u},wX:function(){return d}});var i=n(54297);const r="1s-tokens";var o;let a,s;function c(){return a=l(),a&&a.accessToken?a:void 0}function d(){if(a=l(),!a)return"notAvailable";const e=a.expiresOn,t=new Date(e),n="expired";if(!t.getTime())return n;return t>new Date?"valid":n}function l(){return a=a||void 0===a&&(0,i.$o)().getObject(r)||null,a}function u(e){a=void 0,s=e;const{accessToken:t,expiresOn:n}=e||{};t&&n?(0,i.$o)().setObject(r,{accessToken:t,expiresOn:n}):(0,i.$o)().removeItem(r)}function p(){return s}!function(e){e.NotAvailable="notAvailable",e.Expired="expired",e.Valid="valid"}(o||(o={}))},4619:function(e,t,n){"use strict";n.d(t,{$v:function(){return l},ac:function(){return s},mb:function(){return d},sM:function(){return a},x6:function(){return c}});var i=n(54557),r=n(76187),o=n(34832);const a="currentaccount",s=365,c=(0,r.p)((()=>{const e=(0,i.AE)(a,!0),t=e&&(0,o.d)(e),{login_hint:n}=t||{};return n&&t})),d=(0,r.p)((()=>!!(0,i.AE)(a)));function l(){d.cache.clear(),c.cache.clear()}},10788:function(e,t,n){"use strict";n.d(t,{KO:function(){return u},XS:function(){return l},g8:function(){return d}});var i=n(83102),r=n(54557),o=n(34832);const a=()=>{const e=(()=>{const e=(0,r.AE)("els",!0),t=e&&(0,o.d)(e);return t&&Object.prototype.hasOwnProperty.call(t,"account_type")&&t})();if(e){if("MSA"===e.account_type)return i.Qm.MSA;if("AAD"===e.account_type)return i.Qm.AAD}};var s=n(23979),c=n(76187);const d="lt",l=(0,c.p)((()=>{let e,t;return(0,s.vs)()?(e=i.Hy.SignedIn,t=(0,s.Yn)()):(0,r.AE)("els")?(t=a(),e=t?i.Hy.SignedIn:i.Hy.NotSignedIn):(0,r.AE)(d)||(0,r.AE)("aace")?(t=i.Qm.MSA,e=i.Hy.SignedIn):e=i.Hy.NotSignedIn,{isSignedIn:e,accountType:t}}));function u(){l.cache.clear()}},23979:function(e,t,n){"use strict";n.d(t,{E1:function(){return c},Rn:function(){return a},Yn:function(){return s},vs:function(){return l},yL:function(){return d}});var i=n(83102),r=n(54557),o=n(34832);const a=()=>{const e=(0,r.AE)("elt",!0),t=e&&(0,o.d)(e),{access_token:n,account_type:i,login_hint:a,region_scope:s}=t||{};return(n||i||a||s)&&t},s=()=>{const e=a();if(e){if("MSA"===e.account_type)return i.Qm.MSA;if("AAD"===e.account_type)return i.Qm.AAD}},c=()=>{const e=a();return e&&e.login_hint},d=()=>{const e=a();return e&&e.region_scope},l=()=>!!(0,r.AE)("elt")},18562:function(e,t,n){"use strict";n.d(t,{Nv:function(){return s}});var i=n(55524),r=n(31558);const o="__PageExperimentInstance__";function a(e){i.Gq.set(o,e)}function s(e){if(!i.Gq.has(o)&&(0,r.N)()){var t;a(c(document.head.dataset.info||(null===(t=window.document.getElementsByClassName("peregrine-widget-settings")[0])||void 0===t||null===(t=t.dataset)||void 0===t?void 0:t.info)||""))}const n=i.Gq.get(o);return n&&n.has(e)}function c(e){const t=(e||"").replace(/(^f:|;.*$)/g,"").split(",");return new Set(t)}},65774:function(e,t,n){"use strict";n.d(t,{A:function(){return c},m:function(){return s}});var i,r=n(83102);class o{constructor(){this._signInState=r.Hy.Unknown,this.initOverrides=()=>{}}getSignInState(){return this._signInState}setSignInState(e){this._signInState=e}useEnterpriseCompliance(){return!1}}(i=o)._instance=new i;let a=o._instance;function s(e){if(a!==o._instance||!e)return a;e()}function c(e){a=e}},76716:function(e,t,n){"use strict";n.d(t,{E:function(){return a},M:function(){return i}});var i,r=n(65505),o=n(76187);!function(e){e.App="app",e.EdgeId="edgeid",e.Web="web"}(i||(i={}));const a=(0,o.p)((()=>(0,r.TJ)()?i.EdgeId:(0,r.P8)()?i.Web:i.App))},6914:function(e,t,n){"use strict";n.d(t,{EX:function(){return h},YY:function(){return p},u6:function(){return l}});var i=n(23357),r=n(21789),o=n(52681),a=n(54557),s=n(76187),c=n(34832),d=n(19464);function l(e){const t=e||(0,o.g8)()||"al_app_anon",n=u();return!!(n&&(["anon","al_anon"].includes(t)&&n.AL_ANON||["app_anon","al_app_anon"].includes(t)&&n.AL_APP_ANON))}const u=(0,s.p)((()=>{const e=(0,a.AE)(i.tX,!0);return(0,c.d)(e)}));function p(){(0,d.sq)(i.tX,"",-1,r.jG.HostPage.topDomain,"/"),h()}function h(){u.cache.clear()}},88749:function(e,t,n){"use strict";n.d(t,{KK:function(){return b},SY:function(){return m},YU:function(){return h},bf:function(){return f},bq:function(){return y},dy:function(){return g},hU:function(){return v},hq:function(){return C},jG:function(){return S},m5:function(){return w}});var i=n(91197),r=n(31558),o=n(18562),a=n(76187),s=n(34832);const c="uxlogin",d="uxlogout",l="uxedit",u="useRedirect",p="uxswitch",h=(0,a.p)((()=>{const e=(0,i.U)();return e&&"1"===e.getItem(c)||(0,r.N)()&&location.search&&location.search.includes(`${c}=1`)}));function g(){const e=(0,i.U)();e&&h()&&(e.removeItem(c),h.cache.clear())}const m=(0,a.p)((()=>{const e=(0,i.N)();return e&&!!e.getItem(d)}));function f(){const e=(0,i.N)();e&&m()&&(e.removeItem(d),m.cache.clear())}const v=(0,a.p)((()=>{const e=(0,i.U)();return e&&"1"===e.getItem(l)}));function y(){const e=(0,i.U)();e&&v()&&(e.removeItem(l),v.cache.clear())}const S=(0,a.p)((()=>{const e=(0,i.U)();return!(0,o.Nv)("prg-noredirect")&&e&&"1"===e.getItem(u)&&function(){const e=document.head.dataset.clientSettings||"",{browser:t}=(0,s.d)(e)||{},{browserType:n=""}=t||{};return!!/safari/i.test(n)}()}));function C(){const e=(0,i.U)();e&&"1"===e.getItem(u)&&(e.removeItem(u),S.cache.clear())}function w(){const e=(0,i.U)();e&&e.setItem(u,"1"),S.cache.clear()}const b=(0,a.p)((()=>{const e=(0,i.U)();return e&&"1"===e.getItem(p)}))},23357:function(e,t,n){"use strict";n.d(t,{AU:function(){return s},Cd:function(){return W},Cw:function(){return C},DB:function(){return p},Eo:function(){return B},IX:function(){return a},Ib:function(){return U},It:function(){return D},JJ:function(){return I},Ji:function(){return f},Kj:function(){return _},Kz:function(){return g},Li:function(){return y},Oj:function(){return q},Qw:function(){return m},V3:function(){return A},X8:function(){return u},Xs:function(){return i},Yu:function(){return M},Z7:function(){return N},cp:function(){return l},cs:function(){return S},gb:function(){return E},js:function(){return d},m$:function(){return v},nM:function(){return w},nr:function(){return o},og:function(){return k},rD:function(){return x},tX:function(){return b},uD:function(){return H},um:function(){return c},up:function(){return $},uw:function(){return h},wG:function(){return P},x$:function(){return r},yz:function(){return T}});const i="msnewsroot",r={html:"html",head:"head",body:"body"},o="data-client-settings",a="data-diagnostics",s="data-pagetype",c="data-info",d="data-js",l="dir",u="data-service-url",p="data-telemetry-id",h="data-page-product",g="data-page-type",m=2,f="APP_ANON",v="aace",y="ace",S="OSATE",C="OSAT",w="child",b="AL_STATE",T="WID",k="APP_WID",P="search-history-enabled",A="split-screen",I="left-rail-enabled",E="no-search-history-expected-auth",M={activityId:"x-client-activityid",adsReferer:"ads-referer",authorization:"Authorization",entAuthorization:"Ent-Authorization",muid:"MUID",rpsToken:"UserAuthToken",taboolaSessionId:"taboola-sessionId",xboxToken:"s-xbox-token",traceParent:"traceparent",uniFeatTun:"OneSvc-Uni-Feat-Tun"},x={traceId:"ddd-activityid",debugId:"ddd-debugid",userType:"ddd-usertype",isStatic:"X-Statics-Fallback"};var L,R;!function(e){e.Presentation="presentation"}(L||(L={})),function(e){e.Unknown="Unknown",e.Portrait="Portrait",e.Landscape="Landscape"}(R||(R={}));const D={pageVersions:"pageVersions"},F={instanceId:"InterestsWC",configRef:{experienceType:"InterestsWC",instanceSrc:"default"}},O={instanceId:"InterestsWC",configRef:{experienceType:"InterestsWC",instanceSrc:"default",sharedNs:"msn-ns"}},B=e=>{let t;switch(e){case"default":t=F;break;case"shared":t=O;break;default:t=void 0}return t},N="https://microsoftnews.msn.com/",_="switchedPivot",U="pivotSelectionSource";var W,H;!function(e){e[e.Undefined=0]="Undefined",e[e.Basic=1]="Basic",e[e.Advanced=2]="Advanced",e[e.Premium=3]="Premium"}(W||(W={})),function(e){e.Init="init",e.Config="config",e.Targeted="targeted",e.Sticky="sticky",e.NoSticky="no_sticky",e.Admin="admin",e.Forced="forced",e.Manual="manual"}(H||(H={}));new Set(["winp0dash","winp1taskbar","winp1taskbarent","winp1taskbardirect","winp1taskbardirectent","winp1taskbarent","winp2juntaskbar","winp2juntaskbarent","winp2","winp2ent","winp2fp","winp2fpent","winp2fptaskbar","winp2fptaskbarent","winp2fptaskbarhover","winp2fptaskbarhoverent","winp2widget","winp2widgetent"]);const $=new Set(["finance-app-win","weather-app-win","winpstoreapp"]),q=(new Set(["msedgdhp","msedgdhphdr","msedgntphdr","msedgntp","msedgdhp","entnewsntp"]),new Set(["hpmsn"]))},91046:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var i=n(31558);let r;function o(){var e,t;if(!(0,i.N)())return new URLSearchParams(null===(e=window)||void 0===e?void 0:e.location.search);r||(r=new URLSearchParams(null===(t=window)||void 0===t?void 0:t.location.search));return r}},8780:function(e,t,n){"use strict";function i(e){return new Promise((t=>setTimeout(t,e)))}n.d(t,{qn:function(){return r},rh:function(){return i}});const r=async(e,t,n)=>{if(!t||isNaN(e))return;if(!e&&0!==e||e<0||e===1/0)return await t;const i=(e=>{let t,n=()=>{},i=()=>!1;const r=new Promise(((r,o)=>{n=()=>{t&&(clearTimeout(t),t=null,o())},i=()=>null!==t,t=setTimeout((()=>{t=null,r()}),e)}));return{cancel:n,isActive:i,promise:r}})(e),r=await Promise.race([t,i.promise]);return i.isActive()?i.cancel():n&&n(),r}},29597:function(e,t,n){"use strict";n.d(t,{Sm:function(){return p},br:function(){return g},cb:function(){return h}});var i=n(54911);function r(e){const t=(0,i.s)();return function(n,i){if(i||(i={}),!o(i,"Referer")){const e="string"==typeof n?n:n.url;!function(e,t,n,i){const r=(s[i]||s[a])(e,t);if(delete n.referrerPolicy,!r)return;n.headers=n.headers||{},n.headers.Referer=r}(t.url,e,i,i.referrerPolicy)}return o(i,"User-Agent")||function(e,t){e.headers=e.headers||{},e.headers["User-Agent"]=`${t} (via node-fetch)`}(i,t.userAgent),e(n,i)}}function o(e,t){return e.headers&&void 0!==e.headers[t]}const a="strict-origin-when-cross-origin",s={"no-referrer":(e,t)=>{},"no-referrer-when-downgrade":(e,t)=>c(e,t)?void 0:e.href,origin:(e,t)=>e.origin+"/","origin-when-cross-origin":(e,t)=>d(e,t)?e.href:e.origin+"/","same-origin":(e,t)=>d(e,t)?e.href:void 0,"strict-origin":(e,t)=>c(e,t)?void 0:e.origin+"/","strict-origin-when-cross-origin":(e,t)=>d(e,t)?e.href:s["strict-origin"](e,t),"unsafe-url":(e,t)=>e.href};function c(e,t){return"https:"===e.protocol&&t.startsWith("http:")}function d(e,t){return t.startsWith(e.origin+"/")}n(73040),n(91898),n(9683),n(92100);let l;class u{constructor(){"undefined"!=typeof AbortController&&(this.controller=new AbortController)}abort(){return!!this.controller&&(this.controller.abort(),!0)}setAbortSignal(e){this.controller&&(e.signal=this.controller.signal)}}async function p(e,t,n,i,r,o,a=!1){r||(r=fetch);const s=()=>async function(e,t,n,i,r,o,a=!1){r||(r=fetch),i||(i=new u),o=!1;let s=null,c=null;void 0===t?t=l:l>0&&(t=Math.min(t,l)),t>0&&(s=1e4,s=setTimeout((()=>{c=setTimeout((()=>{if(!i.abort())throw new Error(`Fetch for ${e} aborted due to timeout of ${t} ms. AbortController is not supported.`)}),0)}),t)),n||(n={method:"GET"}),n.signal||i.setAbortSignal(n),performance.now();let d,p=0;const h={};let g;const m=()=>{s&&clearTimeout(s),c&&clearTimeout(c)};return r(e,n).then((e=>{var t,n;return p=e.status,g=null===(t=e.headers)||void 0===t?void 0:t.get("onewebservicelatency"),o&&(h.cluster=e.headers.get("x-fabric-cluster")||(null===(n=e.headers.get("ddd-debugid"))||void 0===n||null===(n=n.split("|"))||void 0===n?void 0:n[3]),h.afd=e.headers.get("x-msedge-ref"),h.dddDebugId=e.headers.get("ddd-debugid"),h.wpoId=e.headers.get("x-wpo-activityid")),e})).catch((n=>{if(d=n,"AbortError"===n.name)throw new Error(`Fetch for ${e} aborted due to timeout of ${t} ms.`);throw new Error(n)})).then((e=>(m(),e)),(e=>{throw m(),e}))}(e,t,n,i,r,o,a);return s()}function h(){return{abortToken:null,timeoutMs:900,fetchImpl:r(fetch)}}async function g(e,t,n){return n||(n=h()),p(e,n.timeoutMs,t,n.abortToken,n.fetchImpl,n.trackApiClusterInServer)}},54557:function(e,t,n){"use strict";n.d(t,{AE:function(){return o}});var i=n(31156);let r;function o(e,t){if(!e)return null;if(t)return function(e){var t;const n=null===(t=document.cookie)||void 0===t?void 0:t.match(`\\b${e}=([^;]*)`);return n?(0,i.fB)(n[1]):null}(e);if(!r){const e="undefined"!=typeof document&&document.cookie.split("; ");r={};const t=e&&e.length;for(let n=0;n<t;n++){const t=e[n].indexOf("=");r[e[n].slice(0,t).toLocaleLowerCase()]=(0,i.fB)(e[n].slice(t+1))}}const n=e.toLocaleLowerCase();return r[n]||null}},25586:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var i=n(13334),r=n(21789);function o(){const e=i.Al&&i.Al.Diagnostics||{},t=i.Al&&i.Al.ClientSettings,{mc:n={}}=e||{},{pageGenTime:o="",geo_citycf:a="",geo_countrycf:s="",requestTrailInfo:c}=t||{},{cdn:d=""}=c||{},l={refs:{refA:r.jG.ActivityIdLowerCaseNoHypens||"",refC:o},cookies:n,geoConfidence:{cityConfidence:a,countryConfidence:s},langMismatch:r.jG.MarketMismatchDetail,cdn:d};return JSON.stringify(l)}},21931:function(e,t,n){"use strict";n.d(t,{N6:function(){return s},j3:function(){return a}});var i=n(55524);const r=()=>i.Gq.get("__core_DisplayModeCoordination_displayModeMap__",(()=>({}))),o=()=>i.Gq.get("__core_DisplayModeCoordination_callbackMap__",(()=>({})));function a(e,t){const n=r();if(n[e]===t)return;n[e]=t;const i=o()[e];if(i)for(const e of i)e(t)}function s(e,t){const n=o(),i=r();let a=n[e];a||(a=[],n[e]=a),a.push(t);const s=i[e];s&&t(s)}},84231:function(e,t,n){"use strict";function i(e){return!(e&&e.length)}n.d(t,{x:function(){return i}})},86522:function(e,t,n){"use strict";n.d(t,{Xw:function(){return d},Z3:function(){return u},h_:function(){return p},nF:function(){return h},rP:function(){return l}});var i=n(67575),r=n(92100),o=n(21789),a=n(78672);const s="{hostName}",c=/\{localeCode\}|\{0\}/;function d(e,t){const n=r.c.encodeURIComponentForPrime(t).toLowerCase(),{HostPage:i}=o.jG;if(i){const t=new URL(i.originalUrl);return t.origin+"/"+i.verticalKey+"/"+i.categoryKey+"/interests/"+n+"/"+o.jG.CurrentMarket+"/f-"+e+t.search}return"https://www.msn.com"}function l(){return`${o.jG.NavTargetUrlWithLocale}/${i.lU}`}function u(e=i.UH){return`${o.jG.NavTargetUrlWithLocale}/${e}`}function p(e){return e&&(e=e.replace(s,o.jG.NavTargetHostName).replace(c,o.jG.CurrentMarket)),e}function h(e){if(!e)return;const{Environment:t,EnvInstanceOverride:n}=o.jG;n===t&&(e.host=(0,a.zw)(),e.searchParams.set("instance",n))}},91197:function(e,t,n){"use strict";function i(){try{return localStorage}catch(e){return null}}function r(){try{return sessionStorage}catch(e){return null}}n.d(t,{N:function(){return r},U:function(){return i}})},89315:function(e,t,n){"use strict";n.d(t,{H2:function(){return h},Rz:function(){return m},_3:function(){return v},aH:function(){return I},ce:function(){return C},dx:function(){return b},lI:function(){return A},pE:function(){return E},s_:function(){return T},t4:function(){return P},tr:function(){return p},tu:function(){return S},wq:function(){return y},xc:function(){return k},yE:function(){return f}});var i=n(31558),r=n(76187);const o={outlookMobile:"OnOOutlookMobile",officeMobile:"OnOOfficeMobile",sapphire:"OnOStartApp",skype:"OnOSkype",winWeatherApp:"weather-app-win",xiaomiApp:"xmweather-",launcher:"launcherntp",launcherInterests:"launcherInterests",moto:"moto",swiftKey:"swiftKey",winMoneyApp:"finance-app-win"},a="superappdhp",s=["ios","android","ipados"];let c=M("ocid").toLowerCase(),d=M("chpltfm"),[l,u]=d.toLowerCase().split("-");function p(){if(!(0,i.N)())return!1;const e=window.sapphireWebViewBridge,t=window.webkit,n=e&&e.send,r=t&&t.messageHandlers&&t.messageHandlers.send&&t.messageHandlers.send.postMessage;return!(!n&&!r)}function h(){const e=d&&"outlook"===l&&s.includes(u),t=c===o.outlookMobile.toLowerCase();return e||t}function g(){const e=d&&["office","union"].includes(l)&&s.includes(u),t=c===o.officeMobile.toLowerCase();return e||t}function m(){return h()||g()}function f(){return"true"===M("is2ndWV")}function v(){const e=c===o.skype.toLowerCase()||"skype"===l;return(0,i.N)()&&(null===(t=window.skypeWebviewBridge)||void 0===t?void 0:t.isSkype)||e;var t}function y(){return p()||c===o.sapphire.toLowerCase()||c===a.toLowerCase()}function S(){return"mmx"===c}function C(){const e=M("edge");return("emmx"===l||"1"===e)&&y()||S()}function w(){return"3rdp"===l||c.startsWith(o.xiaomiApp)||b()||k()}function b(){return c===o.moto.toLowerCase()}function T(){return[o.launcher.toLowerCase(),o.launcherInterests.toLowerCase()].includes(c)&&y()}function k(){return c.toLowerCase()===o.swiftKey.toLowerCase()||"swiftkey"==l.toLowerCase()}function P(){return-1!==location.href.indexOf("huawei")||-1!==location.href.indexOf("airfind")||-1!==location.href.indexOf("aloha")||"vivo"===c&&w()}function A(){return-1!==location.href.indexOf("metaos=true")}function I(){return y()&&!("emmxinterests"===c)&&!(c===o.launcherInterests.toLowerCase())&&!w()}const E=(0,r.p)((()=>p()||v()||g()||h()||y()||c===o.winWeatherApp.toLowerCase()||c===o.winMoneyApp.toLowerCase()||C()||w()||T()||k()||P()||A()));function M(e){try{return new URL(location.href).searchParams.get(e)||""}catch(e){return""}}},14792:function(e,t,n){"use strict";n.d(t,{Ie:function(){return i},_T:function(){return s},ou:function(){return u}});var i,r=n(7476),o=n(21789),a=n(31558);function s(){return c}!function(e){e.Unknown="unknown",e.Connected="connected",e.Disconnected="disconnected",e.Aborted="aborted"}(i||(i={}));let c=i.Unknown,d=null,l=!1;function u(e=5e3){(0,a.N)()&&(c=i.Unknown,p(e))}async function p(e=5e3,t){return l=!1,t&&(d=window.setTimeout((()=>{l=!0,t.abort()}),e)),function(e){const t={method:"HEAD",cache:"reload"};e&&(t.signal=e);return fetch(`https://assets.msn.${o.jG.IsChinaCompliance?"cn":"com"}/statics/icons/favicon.ico`,t)}(t&&t.signal).then((()=>(c=i.Connected,(0,r.GQ)({networkStatus:c}),!0))).catch((e=>(c=e&&"AbortError"===e.name?i.Aborted:i.Disconnected,(0,r.GQ)({networkStatus:c}),!1))).finally((()=>{clearTimeout(d)}))}},25257:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});var i,r=n(21789),o=n(13334);!function(e){e.isDhpPage=function(){return"dhp"===o.Al.ClientSettings.pagetype},e.isNtpPage=function(){return"ntp"===o.Al.ClientSettings.pagetype},e.fiveColSupported=function(){return r.jG.EnableFiveColLayout}}(i||(i={}))},31156:function(e,t,n){"use strict";function i(e,t){const n=parseInt(e);return isNaN(n)?t:n}function r(e){try{return JSON.stringify(e)}catch{return null}}function o(e){try{return decodeURIComponent(e)}catch(e){}}n.d(t,{Vm:function(){return r},fB:function(){return o},hh:function(){return i}})},5699:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});class i{constructor(e){this.onSubscriptionCallbackError=e,this.eventLookup={}}publish(e,t){let n=this.eventLookup[e];if(void 0!==n){n=n.slice();let i=n.length;for(;i-- >0;)try{n[i](t)}catch(n){this.onSubscriptionCallbackError&&this.onSubscriptionCallbackError(n,e,i,t)}}}subscribe(e,t){void 0===this.eventLookup[e]&&(this.eventLookup[e]=[]);const n=this.eventLookup[e];return n.push(t),{dispose(){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}}subscribeOnce(e,t){const n=this.subscribe(e,(function(e){n.dispose(),t(e)}));return n}}},49155:function(e,t,n){"use strict";n.d(t,{Z:function(){return o},l:function(){return a}});var i=n(31558);let r={};function o(e){e=e||{},(async()=>{const{newUrl:t,invalidatePageCache:n=!0}=e;if(n){const{invalidatePageCacheHandler:e}=r;if(e){const t=e();t&&t.then&&await t}}t?window.location.replace(t):window.location.reload(n)})()}const a={resetHandlers:function(){r={}},setHandlers:function(e){(0,i.N)()&&e&&(r=e)}}},20196:function(e,t,n){"use strict";n.d(t,{C:function(){return i}});const i=e=>"function"==typeof window.requestIdleCallback?window.requestIdleCallback(e):window.setTimeout(e,0)},48204:function(e,t,n){"use strict";n.d(t,{$z:function(){return h},Cv:function(){return g},NJ:function(){return f},SD:function(){return p},cf:function(){return m},kJ:function(){return v},ll:function(){return y},nl:function(){return S}});var i=n(23357),r=n(7183),o=n(54297),a=n(31558),s=n(91046),c=n(13334);const d="ntp.selected_feed_pivot",l="selectedPivot",u="gamermode";function p(){m("myFeed")}function h(){if("1"===(0,s.L)().get(u)&&!r.y7.getItem(u))return"gaming";const e=(0,s.L)().get("selectedNavItemMock");if(e)return JSON.parse(e);let t=null===c.Al||void 0===c.Al?void 0:c.Al.SelectedFeedPivot;if((0,a.N)()){const e=(0,o.$o)().getItem(l);t&&e!==t?m(t):t=e}return t}function g(e){"1"===e.get("gaming")&&m("gaming")}function m(e){if(v(e),(0,a.N)()){const t="undefined"!=typeof window&&window&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&t.setPref&&t.setPref(d,e)}c.Al.SelectedFeedPivot=e,(0,o.$o)().setItem(l,e),"1"!==(0,s.L)().get(u)||r.y7.getItem(u)||r.y7.setItem(u,"0")}function f(){return(0,o.$o)().getItem(i.Kj)}function v(e){(0,o.$o)().setItem(i.Kj,e)}function y(){return(0,o.$o)().getItem(i.Ib)??i.uD.Init}function S(e){(0,o.$o)().setItem(i.Ib,e)}},45870:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});class i{constructor(e){this.promise=new Promise(((e,t)=>{this.resolver=e,this.reject=t})),e&&setTimeout((()=>this.set(void 0)),e)}set(e){this.resolver(e),this.valueSet=!0}setError(e){this.reject(e)}wasSet(){return this.valueSet}getResultAsync(){return this.promise}}},96620:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});const i=[];function r(e){i.push(e)}},2518:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});const i=e=>e&&"string"==typeof e&&e.trim&&!!e.trim()},857:function(e,t,n){"use strict";n.d(t,{GI:function(){return d},Qc:function(){return c},ku:function(){return a},w_:function(){return s}});var i=n(23549),r=n(21789),o=n(23357);function a(){var e;if(!i.M0)return;const t=null===(e=i.M0.getPageMetadata)||void 0===e?void 0:e.call(i.M0);return t&&t.contract&&t.contract.page?t.contract.page.ocid:void 0}function s(e){if("windowsShell"===r.jG.AppType||"windowsShellV2"===r.jG.AppType)return c(e);const t=a(),n=e.toLowerCase();if(!t||-1!=n.indexOf("?ocid=")||-1!=n.indexOf("&ocid="))return e;const i=-1==e.indexOf("?")?"?":"&";return`${e}${i}ocid=${encodeURIComponent(t)}`}function c(e){if(!e)return e;try{const t=new URL(e),n=t.searchParams;return a()&&n.set("ocid",a()),n.set("cvid",i.M0.getRequestId()),t.toString()}catch{return e}}function d(e){if(!e)return null;const t={...e};return t[o.Yu.entAuthorization]&&(t[o.Yu.entAuthorization]="*****"),t[o.Yu.rpsToken]&&(t[o.Yu.rpsToken]="*****"),t[o.Yu.authorization]&&(t[o.Yu.authorization]="*****"),t}},34479:function(e,t,n){"use strict";n.d(t,{Kb:function(){return r}});setTimeout;let i=setTimeout;async function r(e){return new Promise(((t,n)=>{i(t,e)}))}},32810:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});class i{constructor(e){this.searchParams=Object.create(null),this.parseQueryString(e)}set(e,t){return null!=t&&(this.searchParams[e]=t),this}get(e){return this.searchParams[e]}getAllSearchParams(){return this.searchParams}delete(e){delete this.searchParams[e]}toString(){const e=Object.keys(this.searchParams);return e.length?e.sort().map((e=>`${e}=${this.searchParams[e]}`)).join("&"):""}parseQueryString(e){if(!e)return;const t=e.indexOf("?");t>-1&&(e=e.substring(t+1)),e.split("&").forEach((e=>{const t=e.split("="),n=t[0];this.get(n)||(this.searchParams[n]=t[1])}))}}},92100:function(e,t,n){"use strict";n.d(t,{K:function(){return g},c:function(){return i}});var i,r=n(22140),o=n(79022),a=n(54433),s=n(92170),c=n(13578),d=n(50769),l=n(37242),u=n(76733),p=n(56687),h=n(78672);function g(e,t){try{const n=new URL(e,(0,h.Dp)());return t&&t.forEach((([e,t])=>e&&null!=t&&n.searchParams.append(e,t))),n}catch(e){u.k.logError((0,p.n)(e))}}!function(e){const t=/[^A-Za-z0-9]+/g;function n(e,t=!1){if(!(0,o.Z)(e))return null;return u((e||"").split("?")[1],t)}function i(e){return e=e.replace(/\+/g," "),e=decodeURIComponent(e)}function u(e,t=!1){const n=[];if(e&&e.startsWith("?")&&(e=e.substring(1)),e){const r=(e=e.split("#")[0]).split("&");for(let e=0;e<r.length;e++){const o=r[e].split("=");let s=o[0],c=o[1];t&&(s=i(s),c&&(c=i(c)));const d={key:s,value:c},l=(0,a.Z)(n,(e=>e.key===d.key));-1===l?n.push(d):n[l]=d}}return n}e.getParamsFromUrl=n,e.encodeURIComponentForPrime=function(e){return encodeURIComponent(e.replace(t,"-"))},e.getParams=u,e.getParamsWithItems=function(e,t=!1,n="item"){const r=[];if(e){e.startsWith("?")&&(e=e.substring(1));const o=(e=e.split("#")[0]).split("&");for(let e=0;e<o.length;e++){const a=o[e].split("=");let s=a[0],c=a[1];if(t&&(s=i(s),c&&(c=i(c))),s.toLowerCase()===n){c=c.replace("::::",";;;;");const e=c.split(":");if(2===e.length){s=e[0],c=e[1].replace(";;;;","::::");const t={key:s,value:c};-1===r.findIndex((e=>e.key===t.key))&&r.push(t)}}}}return r};const p={};function g(e){const t={},i=n(e,!0);return i&&i.length&&i.forEach((e=>t[e.key]=e.value)),t}e.getQueryParameterByName=function(e,t){p[t]||(p[t]=g(t));const n=p[t][e];return void 0!==n?n:null},e.isValidUrl=function(e,t){return(0,o.Z)(e)&&e.length>0&&(!t||t&&0===e.indexOf("http"))},e.keyValueArrayToQueryString=function(e){return!(0,s.Z)(e)||(0,c.Z)(e)?"":e.filter((e=>r.b.isKeyValuePair(e,(e=>"string"==typeof e),(e=>"string"==typeof e)))).map((e=>e.key+"="+e.value)).join("&")},e.getParamsObj=g,e.joinSubpathToURL=function(e,t){const n=e.href,i=(0,d.Z)(n,"/"),r=(0,l.Z)(t,"/");return new URL(`${i}/${r}`)},e.updateSearchParam=function(e,t,n){return e&&e.searchParams&&e.searchParams.get(t)&&e.searchParams.set(t,n),e},e.appendSearchParam=function(e,t,n,i){return e&&(e.searchParams||i?e.searchParams.append(t,n):e=new URL(e.href+(e.search.indexOf("?")>=0?"&":"?")+t+"="+n)),e},e.getAbsoluteUrl=function(e){return e.indexOf("://")>0||0===e.indexOf("//")?e:(0,h.Dp)()+e};const m=new Set(["/","$","^","+",".","(",")","=","!","|"]);e.urlPatternToRegExp=function(e){if(0==e.indexOf("/")&&e.lastIndexOf("/")>0){const t=e.slice(1,e.lastIndexOf("/")),n=e.substring(e.lastIndexOf("/")+1)||void 0;return new RegExp(t,n)}return function(e){const t=["^"];let n;for(let i=0;i<e.length;++i){const r=e[i];if(m.has(r))t.push("\\"+r);else if("*"!==r)switch(r){case"?":t.push(".");break;case"{":n=!0,t.push("(");break;case"}":n=!1,t.push(")");break;case",":if(n){t.push("|");break}t.push("\\"+r);break;default:t.push(r)}else{const n=e[i-1];let r=1;for(;"*"===e[i+1];)r++,i++;const o=e[i+1];!(r>1)||"/"!==n&&void 0!==n||"/"!==o&&void 0!==o?t.push("([^/]*)"):(t.push("((?:[^/]*(?:/|$))*)"),i++)}}return t.push("$"),new RegExp(t.join(""))}(e)},e.compareURLs=function(e,t){try{const n=new URL(e),i=new URL(t),r=n.searchParams,o=i.searchParams,a=[],s=[],c=[];return r.forEach(((e,t)=>{o.has(t)?o.get(t)!==r.get(t)&&c.push(t):s.push(t)})),o.forEach(((e,t)=>{r.has(t)||a.push(t)})),{hostMismatch:n.hostname!==i.hostname,pathMismatch:n.pathname!==i.pathname,paramsMissingLeft:a.join(","),paramsMissingRight:s.join(","),paramsDiff:c.join(",")}}catch(e){return{}}}}(i||(i={}))},22140:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var i,r=n(79022),o=n(43698);!function(e){function t(e){return null!=e}e.isNotNullOrUndefined=t,e.isDefined=function(e){return void 0!==e},e.isKeyValuePair=function(t,n,i){return e.isNonNullObject(t)&&n(t.key)&&i(t.value)},e.isNonNullObject=function(e){return e&&"object"==typeof e},e.isNotNull=function(e){return null!==e},e.isNullOrWhiteSpace=function(e){return!(0,r.Z)(e)||""===e.trim()},e.toNumber=function(e,t=-1){if(!e)return t;const n=(0,o.Z)(e);return isNaN(n)?t:n},e.arrayHasData=function(e){return!!t(e)&&(e.constructor===Array&&e.length>0)},e.stringHasData=function(e){return(0,r.Z)(e)&&e.trim().length>0},e.objectToString=function e(t){let n="",i=!0;if("object"!=typeof t)return n;for(const r in t)"object"==typeof t[r]?n+=i?`${e(t[r])}`:`-${e(t[r])}`:n+=i?`${t[r]}`:`-${t[r]}`,i=!1;return n},e.removeHyphens=function(e){if(e)return e.replace(/-/g,"")}}(i||(i={}))},71778:function(e,t,n){"use strict";n.d(t,{Fr:function(){return m},R0:function(){return l},mS:function(){return v},ot:function(){return f},rh:function(){return y},yb:function(){return d}});var i=n(42933),r=n(7476),o=n(76733),a=n(56687),s=n(31558),c=n(21789);let d,l;const u=new Map;let p;const h=(0,i.oA)("WebWorkerUtility","WebWorkerUtility",!0),g=new Map,m=e=>{if(!e)return;const t=g.get(e);return t?(g.delete(e),t):void 0};function f(e,t,n=!0,i=!0){const a={id:e&&e.id||"",fetched:!1,payload:null};if(!e||!e.id)return Promise.resolve(a);if(!d&&(!l||l&&"appanoncookie"!==e.id))return Promise.resolve(a);const s=h&&h.startMeasure(e.id).endMeasure,c=g.get(e.id);if(c)return i&&g.delete(e.id),s&&s({customSuffix:"standbymessage"}),Promise.resolve(c);let m,f;t&&(f=new Promise((i=>{m=setTimeout((()=>{u.delete(e.id);const c=`Web worker request timed out after ${t}ms for request id: [${e.id}]`;n&&(p?p({...r.s7S,message:"Web worker request timed out",pb:{...r.s7S.pb,customMessage:c}}):o.k.logError(c)),s&&s({customSuffix:"timeout"}),i({...a,timeout:!0})}),t)})));const v=new Promise((t=>{u.set(e.id,{type:e.type||"data",callback:e=>{m&&clearTimeout(m),s&&s(),t(e)}})}));return window.webWorker.postMessage({id:e.id,type:e.type||"data",payload:e.payload}),t?Promise.race([v,f]):v}function v(e){d&&e&&e.id&&window.webWorker.postMessage({id:e.id,type:e.type||"command",payload:e.payload||null})}function y(e){if(!d||!e||"function"!=typeof e)return;p=function(t){try{e(t)}catch(e){o.k.logError(`Failed to log web worker AppError. Error: ${(0,a.n)(e)}`)}},window.webWorker.onerror=S;var t,n;t={id:"WebWorkerError",type:"subscription"},n=e=>{if(e.payload&&"object"==typeof e.payload){const t=e.payload;t.pb={...t.pb,...(0,r.mnt)()},p(t)}else p({...r.ckW,message:"Web worker error",pb:{...r.ckW.pb,customMessage:JSON.stringify(e.payload||"")}})},d&&t&&"subscription"===t.type&&n&&(u.set(t.id,{type:"subscription",callback:n}),window.webWorker.postMessage(t)),setTimeout((()=>{window.webWorkerErrors&&Array.isArray(window.webWorkerErrors)&&(window.webWorkerErrors.forEach((e=>{S(e)})),delete window.webWorkerErrors)}))}function S(e){if(!e.filename)return d=!1,window._isWebWorkerPresent=d,window.webWorker.terminate(),void p({...r.ZI3,message:"Web worker script not found",pb:{...r.ZI3.pb,customMessage:JSON.stringify(C(e))}});p({...r.Z3R,message:"Web worker runtime error",pb:{...r.Z3R.pb,customMessage:JSON.stringify(C(e))}})}function C(e){return JSON.stringify({filename:e.filename,message:e.message,lineno:e.lineno})}var w;d=!1,l=!1,(0,s.N)()&&(d=void 0!==w?w:!!window.webWorker,window._isWebWorkerPresent=d,l=d),"edgeChromium"===c.jG.AppType&&(d=!1,c.jG.StaticDomain&&c.jG.StaticDomain.endsWith("cn")&&(l=!1)),(d||l)&&(window.webWorker.onmessage=e=>{const{data:t}=e,n=u.get(t.id);if(!n)return void g.set(t.id,t);"data"===n.type&&u.delete(t.id);const i=n.callback;i&&i(t)},setTimeout((()=>{window.webWorkerMessages&&Array.isArray(window.webWorkerMessages)&&(window.webWorkerMessages.forEach((e=>{e.id&&g.set(e.id,e)})),delete window.webWorkerMessages)})))},26181:function(e,t,n){"use strict";var i;n.d(t,{K:function(){return i}}),function(e){e[e.Banner=999999]="Banner",e[e.CookieWall=1100]="CookieWall",e[e.Dialog=900]="Dialog",e[e.Flyout=700]="Flyout",e[e.Overlay=600]="Overlay",e[e.Nav=500]="Nav",e[e.Over=300]="Over",e[e.Above=100]="Above",e[e.Default=0]="Default",e[e.Below=-1]="Below",e[e.Buried=-2]="Buried"}(i||(i={}))},30376:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var i=n(29597),r=n(31558);function o(){return(0,r.N)()?window.fetch.bind(window):i.br}},61153:function(e,t,n){"use strict";n.d(t,{L:function(){return c},j:function(){return d}});var i=n(31558);let r=!1,o=!1,a=!1;function s(){!r&&document.hidden?o=!0:"visible"===document.visibilityState&&(a=!0)}function c(){return o}function d(){return a}(0,i.N)()&&(window.addEventListener&&window.addEventListener("beforeunload",(function(){r=!0})),void 0!==document.hidden&&null!==document.hidden&&document.addEventListener("visibilitychange",s),s())},99528:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});var i=n(34479);async function r(e=1){for(let t=0;t<e;t++)await(0,i.Kb)(0)}},54297:function(e,t,n){"use strict";n.d(t,{$o:function(){return a}});var i=n(18043),r=n(31558);class o extends i.C{constructor(){let e=null;if((0,r.N)())try{e=localStorage}catch(e){}super(e)}}function a(){return s}let s=new o},79993:function(e,t,n){"use strict";n.d(t,{D:function(){return s},z:function(){return c}});var i=n(7476),r=n(31558),o=n(54297),a=n(20196);function s(e){if((0,r.N)()){const t="storageTest";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){(e||"function"==typeof e)&&e({...i.F0_,message:`Local Storage is not defined ${t}`})}}return!1}function c(e,t,n){const i=(0,o.$o)();return null!=i&&i.supported?()=>{let r;const o=i.getObject(e,null);let s=null;return o&&o.version===t&&null!==o.value?(s=o.value,r=n):(s=n(),r=()=>s),(0,a.C)((()=>i.setObject(e,{version:t,value:r()}))),s}:n}},7183:function(e,t,n){"use strict";n.d(t,{G:function(){return s},y7:function(){return a}});var i=n(18043),r=n(31558);class o extends i.C{constructor(){let e=null;if((0,r.N)())try{e="sessionStorage"in window&&window.sessionStorage}catch(e){}super(e)}}let a=new o;function s(){return a}},87188:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var i=n(7476),r=n(31558);function o(e){if((0,r.N)()){const t="storageTest";try{return window.sessionStorage.setItem(t,t),window.sessionStorage.removeItem(t),!0}catch(t){(e||"function"==typeof e)&&e({...i.EIi,message:`Session Storage is not defined: ${t}`})}}return!1}},18043:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var i=n(34832),r=n(76733);class o{get supported(){return!!this.storage}constructor(e){this.storage=e}getItem(e){if(this.supported)return this.storage.getItem(e)}getObject(e,t){const n=this.getItem(e);if(null!=n){const e=(0,i.d)(n);if(null!=e)return e}return t}key(e){if(this.supported&&e>=0)return this.storage.key(e)}keys(){return this.supported?Object.keys(this.storage):[]}setObject(e,t){void 0!==t?this.setItem(e,JSON.stringify(t)):this.removeItem(e)}removeObject(e){const t=this.removeItem(e);if(null!=t)return(0,i.d)(t)}setItem(e,t,n=!0){if(this.supported)try{if(!t)throw"Attempted to store null/undefined value: "+t;this.storage.setItem(e,t)}catch(e){if(!n)throw e;r.k.logError(e)}else if(!n)throw new Error("WebStorage not supported")}get length(){if(this.supported)return this.storage.length}removeItem(e){if(this.supported){const t=this.getItem(e);return this.storage.removeItem(e),t}}clear(){this.supported&&this.storage.clear()}removeSubstringKeys(e){if(!this.supported||!e)return;const t=[];for(let n=0;n<this.storage.length;n++){const i=this.key(n);i&&i.includes(e)&&t.push(i)}for(let e=0;e<t.length;e++)this.removeItem(t[e])}}},84515:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});const i={backgroundInnerHolder:"backgroundInnerHolder",backgroundOuterHolder:"backgroundOuterHolder",cardAction:"cardAction",complianceHyperlink:"complianceHyperlink",feedToggle:"feedToggle",financeGreeting:"financeGreeting",following:"following",myInterests:"myInterests",gaming:"gaming",gridViewFeed:"gridViewFeed",headerSpaceHolder:"headerSpaceHolder",locationGreeting:"locationGreeting",marketSelector:"marketSelector",myFeed:"myFeed",navBar:"navBar",notificationBell:"notificationBell",nurturingCoachMark:"nurturingCoachMark",office365:"office365",overlayArticleReader:"overlayArticleReader",personalizeButton:"personalizeButton",pillWC:"pillWC",recommendedSites:"recommendedSites",rewardsIcon:"rewardsIcon",rewardsButton:"rewardsButton",rightRailSectionKey:"rightRailSectionKey",scrollableContainer:"scrollableContainer",searchBox:"search-box-edgenext",searchBoxInput:"searchBoxInput",searchBoxVoiceButton:"searchBoxVoiceButton",searchHistory:"searchHistoryEdgeNext",settingsButton:"SettingsButton",settingsCloseButton:"settingsCloseButton",settingsInformationalButton:"settingsInformationalButton",shoppingNav:"shoppingNav",signInButton:"signInButton",singleColumnFeedRoot:"singleColumnFeedRoot",superCoachMark:"superCoachMark",topSites:"topSites",unifiedMobileFeed:"unifiedMobileFeed",weatherNav:"weatherNav",waffle:"waffle",watchNav:"watchNav",waterfallViewFeed:"waterfallViewFeed",welcomeGreeting:"welcomeGreeting",navigationPage:"navigationPage",videoPlayButton:"videoPlayButton",imageEditButton:"imageEditButton",headerGrid:"headerGrid",floatButtonGroupWC:"floatButtonGroupWC",weatherHeroExperience:"weatherHeroExperience",pr2RefreshReminder:"pr2RefreshReminder"}},66415:function(e,t,n){"use strict";n.d(t,{FY:function(){return s},b_:function(){return c},h_:function(){return d}});var i=n(45870),r=n(55524);const o=()=>r.Gq.get("__global-element-map_elementMap__",(()=>new Map)),a=()=>r.Gq.get("__global-element-map_waitForElementMap__",(()=>new Map));function s(e,t){if(!t)return;o().set(e,t);const n=a().get(e);n&&n.set(t)}function c(e){return e?o().get(e):null}function d(e){if(!e)return Promise.reject(null);const t=c(e);if(c(e))return Promise.resolve(t);const n=a();if(n.has(e))return n.get(e).getResultAsync();const r=new i.o;return n.set(e,r),r.getResultAsync()}},66963:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});var i=n(23549);class r{static registerTrackAppErrorEventCallback(e){e&&(this.trackAppErrorEventCallback=e)}static trackAppErrorEvent(e){this.trackAppErrorEventCallback&&this.trackAppErrorEventCallback(e)}}r.trackAppErrorEventCallback=e=>{i.M0&&i.M0.sendAppErrorEvent(e)}},53621:function(e,t,n){"use strict";n.r(t),n.d(t,{IrisDataConnector:function(){return O},IrisDataReducer:function(){return B},IrisImageHotSpotsDataValidator:function(){return _},IrisSurfaceName:function(){return u._l},RegisterErrorTrackingCallback:function(){return y.i},ToolingInfo:function(){return W},irisStorageUtility:function(){return i.Vv},isAadAccount:function(){return i.Jw}});var i=n(51683),r=n(93624),o=n(76733),a=n(7476),s=n(21789),c=n(54297),d=n(22140),l=n(92100),u=n(73348),p=n(52817),h=n(71568),g=n(63815),m=n(95063),f=n(59952),v=n(76166),y=n(66963),S=n(85205),C=n(14269);const w={edge:"1",chrome:"2",internetExplorer:"3",firefox:"4",safari:"5",chromium:"6",edgeChromium:"6",[C.Q.Android]:"12",[C.Q.Ios]:"13"},b={homePage:"1",edgeChromiumdhp:"2",edgeChromiumntp:"3",windows:"7",windowsShell:"7",finance:"8",hub:"8",weather:"8",views:"9"},T={[C.Q.Windows]:"WIN10",[C.Q.Macos]:"MACOS",[C.Q.Linux]:"LINUX",[C.Q.Xbox]:"OTHER",[C.Q.Android]:"ANDROID",[C.Q.Ios]:"IOS"};var k=n(59489),P=n(13334),A=n(60189),I=n(90351),E=n(19464),M=n(85663),x=n(67044);class L{static async runValidation(e,t){switch(e){case u._l.MSNAnaheimNewsNTPImages:case u._l.MSNAnaheimNewsNTPImages+u.Yq:{const n=!(0,M.isNullOrUndefined)(t)&&t,r=u.S5[e],a=i.Vv.hasUpdateTimeExpired(r,24),c=i.Vv.hasMarketChanged(r);if(!c&&!a&&!n||s.jG.IsFrePage)return void o.k.log(`IrisDataConnector: Image surface blocked: market changed - ${c}, has image expired - ${a}, dislike triggered - ${n}, FRE - ${s.jG.IsFrePage}.`);let d=null;const l=i.Vv.getImageInfo(r);if(n&&l){d={xSdkIaf:i.Vv.getDislikeList(l.dislikedCreatives)}}const p={addToCall:!0,headers:{...d},parameters:{...await this.getCallParametersWithSessionContext(e,"1")}};return o.k.log(`IrisDataConnector: Image surface validated: market changed - ${c}, has image expired - ${a}, dislike triggered - ${n}, FRE - ${s.jG.IsFrePage}.`),p}case u._l.MSNNewsCoachmark:case u._l.MSNNewsCoachmark+u.Yq:{const t=i.Vv.hasUpdateTimeExpired(u.S5[e],24),n=i.Vv.hasMarketChanged(u.S5[e]);if(!t&&!n)return void o.k.log(`IrisDataConnector: Coachmark surface blocked: last update time expired - ${t}, market changed - ${n}.`);const r={addToCall:!0,parameters:{...await this.getCallParametersWithSessionContext(e,"0")}};return o.k.log(`IrisDataConnector: Coachmark surface validated: last update time expired - ${t}, market changed - ${n}.`),r}case u._l.WinHPCoachmark:case u._l.WinHPCoachmark+u.Yq:if(!e.endsWith(".int")){const t=i.Vv.hasUpdateTimeExpired(u.S5[e],24),n=i.Vv.hasMarketChanged(u.S5[e]);if(!t&&!n)return void o.k.log(`IrisDataConnector: WinHP Coachmark surface blocked: last update time expired - ${t}, market changed - ${n}.`)}return{addToCall:!0,parameters:{...await this.getCallParametersWithSessionContext(e,"0")}};case u._l.ConditionalBanner:case u._l.ConditionalBanner+u.Yq:{const t=i.Vv.hasUpdateTimeExpired(u.S5[e],24),n=i.Vv.hasMarketChanged(u.S5[e]);if(!t&&!n)return void o.k.log(`IrisDataConnector: Conditional Banner surface blocked: last update time expired - ${t}, market changed - ${n}.`);const r={addToCall:!0,parameters:{...await this.getCallParametersWithSessionContext(e,"0"),...L.getConditionalBannerIrisCallParameters(e)}};return o.k.log(`IrisDataConnector: Conditional Banner surface validated: last update time expired - ${t}, market changed - ${n}.`),r}case u._l.MSNewsRewards:case u._l.MSNewsRewards+u.Yq:{const t=i.Vv.hasUpdateTimeExpired(u.S5[e],24),n=i.Vv.hasMarketChanged(u.S5[e]);if(!t&&!n)return void o.k.log(`IrisDataConnector: Rewards surface blocked: last update time expired - ${t}, market changed - ${n}.`);const r={addToCall:!0,parameters:{...await this.getCallParametersWithSessionContext(e,"0")}};return o.k.log(`IrisDataConnector: Rewards surface validated: last update time expired - ${t}, market changed - ${n}.`),r}default:return void y.i.trackAppErrorEvent({...a.i29,message:"Subscriber validation function not found.",pb:{...a.i29.pb,customMessage:"Subscriber: "+e}})}}static async getCallParametersWithSessionContext(e,t){const n={},r=[];n.nocookie="0"===t||"1"===t?t:"0";if("edgeChromium"===s.jG.AppType)for(const e in u.uS){const t=await i.Vv.getIrisSessionContextAttribute(u.uS[e]);(0,M.isNullOrUndefined)(t)||""===t?u.uS[e]!==u.uS.AcquisitionPath&&u.uS[e]!==u.uS.ConsumerVsEnterprise&&u.uS[e]!==u.uS.PrimaryBrowser&&u.uS[e]!==u.uS.DefaultBrowser&&r.push(u.uS[e]):n[u.uS[e]]=t}const o=this.getPageConfiguration();return""!==o&&(n.pageConfig=o),s.jG&&"edgeChromium"===s.jG.AppType&&""===o&&r.push("pg.c"),r.length>0&&y.i.trackAppErrorEvent({...a.UX3,message:"Missing parameters for subscriber",pb:{...a.UX3.pb,customMessage:`parameters ${r.toString()} for subscriber ${e}`}}),n}static getConditionalBannerIrisCallParameters(e){var t,n;const i={nocookie:"0"},r=(0,E.ej)(P.Al.AnonCookieName);i.ISSIGNEDIN=r?"1":"0";const o=(0,I.Z)(P.Al,"ClientSettings.apptype"),c=(0,I.Z)(P.Al,"ClientSettings.pagetype"),d=L.mapCanvasId(o,c),l=null===s.jG||void 0===s.jG||null===(t=s.jG.CurrentRequestTargetScope)||void 0===t?void 0:t.os;d&&(i.MSN_CANVAS=d),l&&("homePage"!==o&&"views"!==o||(i.OPSYS=T[l]));const u=(0,I.Z)(P.Al,"ClientSettings.browser"),p=(0,I.Z)(P.Al,"ClientSettings.deviceFormFactor"),h="TRUE"===(null==u||null===(n=u.ismobile)||void 0===n?void 0:n.toUpperCase())||"phone"===p?"1":"0";let g;i.ISMOBILE=h,!l||"1"!==h||"homePage"!==o&&"views"!==o?u&&(g=w[u.browserType]):g=w[l],g&&(i.BROWSER=g);const m=[];return"ISSIGNEDIN"in i||m.push("ISSIGNEDIN"),"MSN_CANVAS"in i||m.push("MSN_CANVAS"),"ISMOBILE"in i||m.push("ISMOBILE"),"BROWSER"in i||m.push("BROWSER"),m.length>0&&y.i.trackAppErrorEvent({...a.MWq,message:"Missing parameters for subscriber",pb:{...a.MWq.pb,customMessage:`parameters ${m.toString()} for subscriber ${e}`}}),i}static getPageConfiguration(){if(s.jG&&"edgeChromium"!==s.jG.AppType)return"";const e=(0,x.K0)(S.z.ChromiumPageSettings);if(!e)return"";const t=e.getCurrentState();if(!t)return"";let n=!1;"function"==typeof e.getPrimaryAccountInfoAsync&&e.getPrimaryAccountInfoAsync().then((e=>{n=e.accountType===k.l.MSA}));const i=(0,A.y)(t,n);return i&&!isNaN(i)?i.toString():void 0}static mapCanvasId(e,t){let n=null;if("edgeChromium"===e)n=[e+t];else n=e;return b[n]}}var R=n(23549),D=n(78672),F=n(67213);class O extends v.e{constructor(e,t,n,r,o,a,d){if(super(e,t,n,r,o,a,d),this.availableCreatives=new Map,this.headers=[void 0],this.queryParameters=[void 0],this.surfaceInfoMap=new Map,a.disableIrisCalls||!a.subscribers)return void(this.callWasMade=!1);this.irisDataPromise=new Promise((async e=>{await i.Vv.configDataPromise,i.Vv.IrisDataConfig=a,this.appType=s.jG&&s.jG.AppType,this.internalPlacementUsed=this.config.isInternal||(0,u.cF)(),this.appType?(this.isBlackoutPeriodOver="edgeChromium"!==this.appType||await i.Vv.isBlackoutPeriodOver(),await i.Vv.populateCachedSurfaceMap(),Object.keys(this.config.subscribers).forEach((async e=>{const t=this.internalPlacementUsed?e+u.Yq:e,n=u.S5[t],r=i.Vv.getCachedSurface(n);r&&r.placement&&this.surfaceInfoMap.set(n,r)})),await this.prepareCallData(),!this.queryParameters||this.queryParameters.length<1?this.callWasMade=!1:(this.callIris(),this.callWasMade=!0),e()):this.callWasMade=!1})),this.irisDataPromise;const l=this.config.subscribers;Object.keys(l).forEach((e=>{const t=l[e].captureInitialStateOfCampaigns;if(t)for(const e in t)(0,c.$o)().getObject(e)&&R.M0.addOrUpdateTmplString(`userEligibleToSeeCoachmark_${e}:1`)}))}sendActionUpdate(e,t,n,r,a){let s;e&&t&&!this.isImagePlacement(e)&&(n===p.R.Impression?i.Vv.markCreativeAsSeenByUser(e,t):i.Vv.updateAction(e,t,a),i.Vv.persistAllSurfaces()),s=n===p.R.Impression?r.impressionUrl:h._.formatTelemetryActionUrl(r.actionUrl,a);try{g.c.sendActionUpdate(s)}catch(e){o.k.log(`IrisDataConnector: Failed to report iris action update beacon due to error: ${JSON.stringify(e)}`)}}async getImagePayload(e){return e&&(await this.prepareCallData(!0),this.callIris(),this.callWasMade=!0),await this.getPayload(u._l.MSNAnaheimNewsNTPImages)}async tryGetPreviousImagePayload(){return await this.getPayload(u._l.MSNAnaheimNewsNTPImages,!0)}clearPreviousImagePayload(){this.surfaceInfoMap.delete(u.S5[u._l.MSNAnaheimNewsNTPImages+u.u7])}async getPayload(e,t=!1){await this.irisDataPromise,this.callWasMade&&await this.callIrisPromise;let n=this.shouldUseRequestedIrisSurface();if(n&&n===e){this.internalPlacementUsed&&(n+=u.Yq);const e=u.S5[n];return await this.tryGetSurfaceInfo(e)}let i=e;if(this.internalPlacementUsed?i=e+u.Yq:t&&(i=e+u.u7),!(0,M.isNullOrUndefined)(u.S5[i])){const e=u.S5[i];return await this.tryGetSurfaceInfo(e)}return o.k.log(`IrisDataConnector: Surface requested ${i} was not found. `),null}async tryGetSurfaceInfoInternal(e){if(!this.surfaceInfoMap.has(e))return o.k.log(`IrisDataConnector: Placement: ${e} was not populated by local/persistent storage nor downloaded by network call.`),null;let t=this.surfaceInfoMap.get(e);return t=i.Vv.getSurfaceWithSelectedCreative(t),t}async tryGetSurfaceInfo(e){if(!this.surfaceInfoMap.has(e))return o.k.log(`IrisDataConnector: Placement: ${e} was not populated by local/persistent storage nor downloaded by network call.`),null;let t=this.surfaceInfoMap.get(e);return u.S5[u._l.MSNAnaheimNewsNTPImages]===e||u.S5[u._l.MSNAnaheimNewsNTPImages+u.u7]===e||u.S5[u._l.MSNAnaheimNewsNTPImages+u.Yq]===e||this.shouldBlockPsl()?t:await(0,i.Jw)()?(o.k.log(`IrisDataConnector: This is AAD user so not returning SurfaceInfo for: ${e} to experience.`),null):i.Vv.haveWeShownCurrentCreativeRecently(t)?(o.k.log(`IrisDataConnector: Already shown a campaign within 14 days so not returning SurfaceInfo for: ${e} to experience.`),null):i.Vv.haveWeShownCreativeTooManyTimes(t)?(o.k.log(`IrisDataConnector: Already shown a campaign too many times: ${e}.`),null):(t=i.Vv.getSurfaceWithSelectedCreative(t),t.creatives.length>0&&t.creatives[0].creativeId===this.creativeToShowUser?(o.k.log(`IrisDataConnector: Returning SurfaceInfo for: ${e} to experience.`),t):(o.k.log(`IrisDataConnector: Tried to return unselected campaign: ${e}.`),null))}async prepareCallData(e){this.queryParameters=[null],this.headers=[null];const t=[],n=[];let r,o,s=[];for(const l of Object.keys(this.config.subscribers)){let p;if(!this.config.subscribers[l].active)continue;const h=this.queryParameters.length,g=this.internalPlacementUsed?l+u.Yq:l,v=u.S5[g];if(!v){y.i.trackAppErrorEvent({...a.LRf,message:"Subscriber not found in iris placement dictionary",pb:{...a.LRf.pb,customMessage:`Subscriber ${g} not found in dictionary`}});continue}const S=this.isImagePlacement(v),C=!(0,M.isNullOrUndefined)(e)&&e;if(!S&&(C||!this.isBlackoutPeriodOver))continue;const{creativeCount:w,performValidation:b,staticQueryParams:T,aflights:k}=this.config.subscribers[l];let P,A,I;if(this.config.enableBackgroundGallery&&S&&!e&&(P=await m.p.getBackgroundGalleryEligibilityAsync()),P){const e=await m.p.getBackgroundPreferences();A=e&&e.changeBackgroundDaily,I=e&&e.backgroundSelectionMetadata}if(A&&I&&"Iris"===I.provider)continue;if(b&&(p=await L.runValidation(g,C),!p||!p.addToCall))continue;!S||e||i.Vv.hasMarketChanged(v)||(this.previousNtpSurfaceInfoInRotation=this.surfaceInfoMap.get(v)),this.config.enableBackgroundGallery&&S&&(0,c.$o)().removeItem(f.gf);let E=w||1;E=p&&p.parameters&&p.parameters.bcnt?p.parameters.bcnt:E,E<=0?y.i.trackAppErrorEvent({...a.TVf,message:"Creative count value is negative or zero",pb:{...a.TVf.pb,customMessage:`Creative count value is negative or zero : ${g}`}}):(S?this.queryParameters[h]={bcnt:E,placement:v}:(n.push(E),t.push(v)),d.b.isNotNullOrUndefined(T)&&(S?this.queryParameters[h]={...this.queryParameters[h],...T}:o={...o,...T}),p&&p.parameters&&d.b.isNotNullOrUndefined(p.parameters)&&(S?this.queryParameters[h]={...this.queryParameters[h],...p.parameters}:o={...o,...p.parameters}),p&&p.headers&&d.b.isNotNullOrUndefined(p.headers)&&(S?this.headers[h]=p.headers:this.headers[0]={...this.headers[0],...p.headers}),d.b.isNotNullOrUndefined(k)&&"object"==typeof k&&(S?this.queryParameters[h].aflights=k.join(";"):s=k),u.S5[u._l.MSNNewsCoachmark+u.Yq]===v&&(r=(0,u.M1)()))}if(d.b.isNotNullOrUndefined(this.config.dynamicQueryParams)){o={...o,...this.config.dynamicQueryParams};for(let e=1;e<this.queryParameters.length;e++)this.queryParameters[e]={...this.queryParameters[e],...this.config.dynamicQueryParams}}t.length>0&&(this.queryParameters[0]=o||{placement:void 0},this.queryParameters[0].placement=t.join("|"),this.queryParameters[0].bcnt=n.join("|"),this.queryParameters[0].aflights=s.join(";"),r&&parseInt(r)>-1&&(this.queryParameters[0].testingNum=r));const l=(await(0,F.a)()).join(";");for(let e=0;e<this.queryParameters.length;e++)this.queryParameters[e]&&(this.queryParameters[e].SCS_msNtpExp=l||"");const p=(0,u.So)();if(p)for(let e=0;e<this.queryParameters.length;e++)this.queryParameters[e]&&(this.queryParameters[e].ocid=p)}callIris(){this.callIrisPromise=new Promise((async e=>{try{for(let e=0;e<this.queryParameters.length;e++){if((0,M.isNullOrUndefined)(this.queryParameters[e]))continue;this.surfaceCollectionContext=await g.c.requestSurfaceInfo(this.queryParameters[e],this.headers[e]);const t=this.getSurfacesFromCollection();await i.Vv.addSurfacesToStorage(t)}}catch(e){this.callWasMade=!1,R.M0.sendAppErrorEvent({...a.IrA,message:"IrisDataConnector: Exception requesting iris surfaces from data connector.",pb:{...a.IrA.pb,customMessage:`Error: ${JSON.stringify(e)} requestUrl: ${this.config.irisEndpoint} queryParameters: ${JSON.stringify(this.queryParameters)} headers: ${JSON.stringify(this.headers)}`}})}e()})),this.callIrisPromise}getSurfacesFromCollection(){const e=this.config.subscribers;if(!(e&&this.surfaceCollectionContext&&this.surfaceCollectionContext.collection&&this.surfaceCollectionContext.reqContext&&this.surfaceCollectionContext.reqContext.queryParams&&this.surfaceCollectionContext.reqContext.queryParams.placement))return R.M0.sendAppErrorEvent({...a.cZM,message:`Surface collection context missing parameters. Surface Context: ${JSON.stringify(this.surfaceCollectionContext)}`}),null;const t=[];Object.keys(e).forEach((n=>{const i=this.getSurfaceFromCollection(n);if(i&&i.placement){if(o.k.log(`IrisDataConnector: Parsed response for ${i.placement} from Iris network call. Now adding to map.`),t.push(i),this.surfaceInfoMap.set(i.placement,i),this.isImagePlacement(i.placement)){const e=u.S5[u._l.MSNAnaheimNewsNTPImages+u.u7];this.previousNtpSurfaceInfoInRotation&&this.surfaceInfoMap.set(e,this.previousNtpSurfaceInfoInRotation)}this.captureInitialEligibilityStateOfCampaigns(i,e[n].captureInitialStateOfCampaigns)}}));const n=this.shouldUseRequestedIrisSurface(),i=this.internalPlacementUsed&&n?n+u.Yq:n;if((0,M.isNullOrUndefined)(i)){const e=Math.floor(Math.random()*(t.length-1));let n=0;this.availableCreatives.forEach(((t,i)=>{e!==n?n++:this.creativeToShowUser=this.availableCreatives.get(i)}))}else this.creativeToShowUser=this.availableCreatives.get(u.S5[i]);return t}getSurfaceFromCollection(e){const t=this.internalPlacementUsed?e+u.Yq:e,n=u.S5[t];if(this.surfaceCollectionContext.collection.hasUnclaimedErrors()){this.surfaceCollectionContext.collection.getUnclaimedErrors().forEach((e=>{2040!=(e&&e.code?e.code:e.errors&&e.errors.length>0&&e.errors[0].code)&&y.i.trackAppErrorEvent({...a.jWk,message:"Surface errors discovered",pb:{...a.jWk.pb,customMessage:`Error with surface: ${t} Code: ${e.code} Message: ${e.msg} queryParams: ${JSON.stringify(this.surfaceCollectionContext.reqContext.queryParams)}`}})}))}const i=this.surfaceCollectionContext.collection.get(n);return i&&i.placement&&i.creatives&&i.creatives.length>0&&!this.isImagePlacement(i.placement)&&this.availableCreatives.set(i.placement,i.creatives[0].creativeId),i}captureInitialEligibilityStateOfCampaigns(e,t){e.creatives&&t&&"object"==typeof t&&e.creatives.forEach((n=>{let i=!1;for(const r in t)if(e.placement===t[r]&&n.creativeId===r){i=!0;break}const r=(0,c.$o)().getObject(n.creativeId);(0,M.isNullOrUndefined)(r)&&(0,c.$o)().setObject(n.creativeId,i)}))}shouldUseRequestedIrisSurface(){const e=(0,D.zp)();if(e){const t=l.c.getQueryParameterByName("irisSurface",e);if(t)return t}return null}shouldBlockPsl(){const e=(0,D.zp)();if(e){const t=l.c.getQueryParameterByName("blockPsl",e);if(t)return"true"===t.toLocaleLowerCase()}return!1}isImagePlacement(e){return u.S5[u._l.MSNAnaheimNewsNTPImages]===e||u.S5[u._l.MSNAnaheimNewsNTPImages+u.Yq]===e}fetchedNewImage(){const e=this.internalPlacementUsed?u._l.MSNAnaheimNewsNTPImages+u.Yq:u._l.MSNAnaheimNewsNTPImages,t=u.S5[e],n=this.surfaceCollectionContext&&this.surfaceCollectionContext.collection&&this.surfaceCollectionContext.collection.get(t);return!(0,M.isNullOrUndefined)(n)}resetImageLastUpdateTime(){const e=this.internalPlacementUsed?u._l.MSNAnaheimNewsNTPImages+u.Yq:u._l.MSNAnaheimNewsNTPImages,t=u.S5[e];i.Vv.resetSurfaceLastUpdateTime(t)}}class B{reduce(){return null}}var N=n(87095);class _{static hasCTASupportData(e){return!(0,M.isNullOrUndefined)(e)&&this.stringHasLength(e.cta)}static hasHotSpotData(e){return!(0,M.isNullOrUndefined)(e)&&e.hs&&"object"==typeof e.hs&&e.hs.length>0}static hasImageData(e){return!(0,M.isNullOrUndefined)(e)&&this.stringHasLength(e.LANDSCAPE)&&this.stringHasLength(e.PORTRAIT)}static hasImageRefreshData(e){return!(0,M.isNullOrUndefined)(e)&&this.stringHasLength(e.update_period)}static hasMuseumData(e){return!(0,M.isNullOrUndefined)(e)&&this.stringHasLength(e.title)&&this.stringHasLength(e.copyright)}static hasPositionData(e){return this.stringHasLength(e.x_percent)&&this.stringHasLength(e.y_percent)&&e.x_percent.length<=this.MaxPositionLength&&e.y_percent.length<=this.MaxPositionLength&&/^0?\.\d{1,3}$/.test(e.x_percent)&&/^0?\.\d{1,3}$/.test(e.y_percent)}static hasPositions(e){return!(0,M.isNullOrUndefined)(e.landscape)&&this.hasPositionData(e.landscape)&&!(0,M.isNullOrUndefined)(e.portrait)&&this.hasPositionData(e.portrait)}static hasTelemetryIndex(e){return this.stringHasLength(e.hs)}static hasTextComponents(e){return this.stringHasLength(e.title)}static hasValidCTAType(e){return!((0,M.isNullOrUndefined)(e)||!this.stringHasLength(e.cta_type)||e.cta_type!==N.W.offPageNavigation)}static hotSpotIsValid(e){return!(0,M.isNullOrUndefined)(e)&&this.hasTelemetryIndex(e)&&this.hasTextComponents(e)&&this.hasPositions(e)}static isValidImageHotSpotsCreative(e){return _.hasImageData(e)&&_.hasImageRefreshData(e)}static isValidStoredData(e){return!(0,M.isNullOrUndefined)(e)&&!(0,M.isNullOrUndefined)(e.imgExpiration)&&this.stringHasLength(e.imgLandURL)&&this.stringHasLength(e.imgPortURL)&&this.stringHasLength(e.reqMarket)}static stringHasLength(e){return!(0,M.isNullOrUndefined)(e)&&"string"==typeof e&&e.length>0}static hasValidCTASupportData(e,t){return!(!e||!t)&&(e===N.W.offPageNavigation&&this.isValidOffPageNavData(t))}static isValidOffPageNavData(e){return/^((microsoft-edge:)?https:\/\/((www)|(cn)|(go))\.((msn)|(bing)|(skype)|(microsoft))\.com)|(edge:\/\/)/.test(e)}}_.MaxPositionLength=5;var U=n(88642);const W={experienceConfigSchema:r.IrisDataConfigSchema,mockConfig:U.mockConfig}},51683:function(e,t,n){"use strict";n.d(t,{Vv:function(){return b},Jw:function(){return T}});var i=n(76733),r=n(7476),o=n(87172),a=n(23549);const s=new class{getAllCampaigns(){return new Promise((async e=>{try{await o.U.isApiAvailableToUse()?o.U.getPreferenceSetting("campaigns").then((t=>{const n=t&&t.value;n||i.k.logError("PSL: window.chrome.ntpSettingsPrivate.getPref does not have campaigns."),e(n||[])})):(a.M0.sendAppErrorEvent({...r.f_s,message:"PSL: Error fetching campaigns due to window.chrome.ntpSettingsPrivate.getPref api not available for this version of EDGE"}),i.k.logError("PSL: Error fetching campaigns due to window.chrome.ntpSettingsPrivate.getPref api not available for this version of EDGE"),e([]))}catch(t){a.M0.sendAppErrorEvent({...r.CBf,message:`PSL fetch error. ${JSON.stringify(t)}`}),i.k.logError(t),e([])}}))}persistCampaigns(e){return new Promise((async t=>{try{await o.U.isApiAvailableToUse()?(await o.U.savePreferenceSetting("campaigns",e),i.k.log(`PSL: Number of campaigns persisted: ${e.length||0}.`),t(!0)):(a.M0.sendAppErrorEvent({...r.RLb,message:"PSL: Error persisting campaigns due to window.chrome.ntpSettingsPrivate.getPref api not available for this version of EDGE"}),i.k.logError("PSL: Error persisting campaigns due to window.chrome.ntpSettingsPrivate.getPref api not available for this version of EDGE"))}catch(e){a.M0.sendAppErrorEvent({...r.CBf,message:`PSL persist error. ${JSON.stringify(e)}`}),i.k.logError(e)}t(!1)}))}clearPersistentStorage(){return this.persistCampaigns([])}};var c=n(54297);const d=new class{constructor(){this.storageKey="irisNewsLocalStorage"}getAllCampaigns(){try{return(0,c.$o)().getObject(this.storageKey)}catch(e){return i.k.logError(`Exception ${e} occurred retrieving user nurturing campaigns from local storage`),[]}}storeCampaigns(e){try{return(0,c.$o)().setObject(this.storageKey,e),i.k.log(`Number of campaigns persisted in local storage: ${e.length||0}.`),!0}catch(e){return i.k.logError(`Exception ${e} occurred storing user nurturing campaigns in local storage`),!1}}clearLocalStorage(){return this.storeCampaigns([])}};var l=n(21789),u=n(92100),p=n(22140),h=n(13334),g=n(83102),m=n(43438),f=n(73348),v=n(31558),y=n(78672),S=n(68054),C=n(66963),w=n(85663);const b=new class{constructor(){this.cachedSurfaceMap=new Map,this.enabledFeatures=[],this.irisSessionContextAttributes=new Map,this.millisecondsInADay=864e5,this.timeNow=(new Date).getTime(),(0,v.N)()&&(this.appType=l.jG&&l.jG.AppType,"edgeChromium"===this.appType&&(this.configDataPromise=this.getConfigDataAsync()),this.currentURL=(0,y.zp)())}get isEnabled(){return!!this.shouldUseCache()||!(!this.irisDataConfig||!this.irisDataConfig.enableCaching)&&this.isCookieConsentNotRequired()}set IrisDataConfig(e){this.irisDataConfig=e}clearCachedSurfaceMap(){this.isEnabled&&this.cachedSurfaceMap.clear()}async populateCachedSurfaceMap(){if(this.isEnabled)try{if(this.purgeCacheWithQsp())return await this.clearCachedSurfacesFromStorage(),void i.k.log("Cache purged!");this.clearCachedSurfaceMap();let e=[];if(e="edgeChromium"===l.jG.AppType?await s.getAllCampaigns():d.getAllCampaigns(),!e||0===e.length)return void i.k.log("Bulk read of surfaces from local/persistent storage didn't return a surface.");const{subscribers:t}=this.irisDataConfig,n=[];Object.keys(t).forEach((e=>{t[e].active||n.push(f.S5[e])})),e.forEach((e=>{e&&e.placement&&(0===n.length||-1===n.indexOf(e.placement))&&(this.cachedSurfaceMap.set(e.placement,e),i.k.log(`Populated ${e.placement} from local/persistent storage.`))}))}catch(e){i.k.logError(`Bulk read of surfaces from local/persistent storage threw error: ${e}`)}}getCachedSurface(e){if(!e||0===e.length||0===this.cachedSurfaceMap.size)return null;if(!this.cachedSurfaceMap.has(e))return null;const t=this.cachedSurfaceMap.get(e);return t&&t.creatives&&0!==t.creatives.length?t:null}addSurfaceToCachedSurfaceMap(e){if(!e||!e.placement)return;const t=e.placement,n=new Map;let r;if(this.cachedSurfaceMap.has(t)&&(r=this.cachedSurfaceMap.get(t),r.creatives.forEach((e=>{n.set(e.creativeId,e)}))),e.creatives&&e.creatives.length>0){const t=(0,f.cF)()?f._l.MSNAnaheimNewsNTPImages+f.Yq:f._l.MSNAnaheimNewsNTPImages,i=f.S5[t];if(e.placement===i){if(r&&r.imageInfo)e.imageInfo=r.imageInfo;else{const t={dislikedCreatives:[],dislikedCreativeCountCurrentPeriod:0};e.imageInfo=t}this.hasUpdateTimeExpired(i,24)&&(e.imageInfo.dislikedCreativeCountCurrentPeriod=0),n.clear(),n.set(e.creatives[0].creativeId,e.creatives[0])}e.creatives.forEach((e=>{const t=n.get(e.creativeId);if(t&&(t.content=e.content,n.set(e.creativeId,t)),!t){const t={lastAddedTime:this.timeNow,useCount:0,useTime:0};e.storageInfo=t,n.set(e.creativeId,e)}}))}e.creatives=[...n.values()],this.cachedSurfaceMap.set(t,e),i.k.log(`Adding/Updating SurfaceInfo ${t} in storage.`)}async addSurfacesToStorage(e){e&&e.length>0&&(e.forEach((e=>{this.addSurfaceToCachedSurfaceMap(e)})),await this.persistAllSurfaces())}async persistAllSurfaces(){if(this.isEnabled){if("edgeChromium"===l.jG.AppType)return void await s.persistCampaigns([...this.cachedSurfaceMap.values()]);d.storeCampaigns([...this.cachedSurfaceMap.values()])}}async clearCachedSurfacesFromStorage(){this.isEnabled&&(this.clearCachedSurfaceMap(),"edgeChromium"!==l.jG.AppType?d.clearLocalStorage():await s.clearPersistentStorage())}async resetSurfaceLastUpdateTime(e){if(!this.isEnabled&&!this.cachedSurfaceMap.get(e))return;const t=this.cachedSurfaceMap.get(e);t.lastUpdatedTime=-1,this.cachedSurfaceMap.set(e,t),this.persistAllSurfaces()}getCachedSurfaceMap(){return this.cachedSurfaceMap}haveWeShownCurrentCreativeRecently(e){if((0,w.isNullOrUndefined)(e.currentCreativeId))return!0;if(this.ignoreCreativeUseTime())return!1;let t=!0;return e.creatives.forEach((n=>{n.creativeId===e.currentCreativeId&&n.storageInfo&&n.storageInfo.useTime+14*this.millisecondsInADay<this.timeNow&&(t=!1)})),t}haveWeShownCreativeTooManyTimes(e){if((0,w.isNullOrUndefined)(e)||(0,w.isNullOrUndefined)(e.currentCreativeId))return!0;if(this.ignoreMaxCapPerCreative())return!1;let t=!0;return e.creatives.forEach((n=>{e.currentCreativeId===n.creativeId&&n.storageInfo&&n.storageInfo.useCount<=2&&(t=!1)})),t}getSurfaceWithSelectedCreative(e){if((0,w.isNullOrUndefined)(e.currentCreativeId))return null;let t;return e.creatives.forEach((n=>{e.currentCreativeId===n.creativeId&&(t=n)})),{...e,creatives:[t]}}updateAction(e,t,n){if(e&&t&&this.cachedSurfaceMap.has(e)){const i=this.cachedSurfaceMap.get(e);i&&i.creatives&&i.creatives.forEach((e=>{e.creativeId===t&&e.storageInfo&&(e.storageInfo.irisAction=n)}))}}markCreativeAsSeenByUser(e,t){if(e&&t&&this.cachedSurfaceMap.has(e)){const n=this.cachedSurfaceMap.get(e);n&&n.creatives&&n.creatives.forEach((e=>{e&&e.creativeId&&e.creativeId===t&&e.storageInfo&&(e.storageInfo.useCount++,e.storageInfo.lastAddedTime=this.timeNow,e.storageInfo.useTime=this.timeNow)}))}}updateCreativeLatestAddedTime(e,t,n){if(!this.cachedSurfaceMap.has(e))return;const i=this.cachedSurfaceMap.get(e);i&&i.creatives&&0!==i.creatives.length&&i.creatives.forEach((e=>{e&&e.creativeId===t&&e.storageInfo&&e.storageInfo.lastAddedTime&&(e.storageInfo.lastAddedTime=n)}))}purgeCacheWithQsp(){if(this.currentURL){const e=u.c.getQueryParameterByName("purgeCache",this.currentURL);if(e&&"true"===e.toLocaleLowerCase())return!0}return!1}shouldUseCache(){if(this.currentURL){const e=u.c.getQueryParameterByName("useCache",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}ignoreMaxCapPerCreative(){if(this.currentURL){const e=u.c.getQueryParameterByName("ignoreMaxCapPerCreative",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}ignoreUpdateTimeExpiration(){if(this.currentURL){const e=u.c.getQueryParameterByName("ignoreUpdateTimeExpiration",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}ignoreCreativeUseTime(){if(this.currentURL){const e=u.c.getQueryParameterByName("ignoreCreativeUseTime",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}ignoreBlackout(){if(this.currentURL){const e=u.c.getQueryParameterByName("ignoreBlackout",this.currentURL);if(e)return"true"===e.toLocaleLowerCase()}return!1}isCookieConsentNotRequired(){return m.A.get(m.U.CookieConsentStatus)===S._.NotRequired}async getConfigDataAsync(){return this.getConfigDataPromise=new Promise((e=>{try{(0,v.N)()&&window&&window.chrome&&window.chrome.ntpSettingsPrivate&&"function"==typeof window.chrome.ntpSettingsPrivate.getConfigData?window.chrome.ntpSettingsPrivate.getConfigData((t=>{void 0!==t?(this.profileCreationTimeInMs=t.profileCreationTime,this.enabledFeatures=t.enabledFeatures,this.setIrisSessionContextAttributes(t.irisAttributes),this.configData=t,e()):(C.i.trackAppErrorEvent({...r.Zt_,message:"Config data is undefined"}),e())})):(C.i.trackAppErrorEvent({...r.Ez4,message:"Failed to fetch config data from chromium API"}),e())}catch(t){C.i.trackAppErrorEvent({...r._bN,message:"Exception fetching config data from chromium API",pb:{...r._bN.pb,customMessage:`Exception: ${t}`}}),e()}})),this.getConfigDataPromise}async isBlackoutPeriodOver(){if(this.ignoreBlackout())return!0;if("edgeChromium"===this.appType){if(l.jG.IsFrePage)return!1;await this.getConfigDataPromise}const e=this.irisDataConfig.blackoutPeriodInDays&&this.irisDataConfig.blackoutPeriodInDays*this.millisecondsInADay||7*this.millisecondsInADay;return!!this.profileCreationTimeInMs&&this.timeNow-this.profileCreationTimeInMs>e}async getIrisSessionContextAttribute(e){return"edgeChromium"===this.appType&&await this.getConfigDataPromise,this.irisSessionContextAttributes.has(e)?this.irisSessionContextAttributes.get(e):""}setIrisSessionContextAttributes(e){if(p.b.isNotNullOrUndefined(e)&&e.length>0){e.startsWith("&")&&e.length>=1&&(e=e.substring(1));e.split("&").map((e=>e.split("="))).forEach((e=>{this.irisSessionContextAttributes.set(e[0],e[1])}))}}getConfigData(){return this.configData}hasUpdateTimeExpired(e,t){if(this.ignoreUpdateTimeExpiration())return!0;const n=this.cachedSurfaceMap.get(e);if((0,w.isNullOrUndefined)(n))return i.k.log(`IrisDataConnector: Has update time expired. placement: ${e}. Placement not in PSL.`),!0;const r=(0,w.isNullOrUndefined)(n.lastUpdatedTime)?-1:n.lastUpdatedTime;if(r<0)return i.k.log(`IrisDataConnector: Has update time expired. placement: ${e}. Invalid lastUpdatedTime.`),!0;const o=r+36e5*t;return i.k.log(`IrisDataConnector: Has update time expired. placement: ${e}. Current time: ${this.timeNow}, lastUpdatedTime: ${o}. Result: ${o<this.timeNow}`),o<this.timeNow}getDislikeList(e){return e&&e.length>0?e.join(";"):""}hasMarketChanged(e){const t=this.cachedSurfaceMap.get(e);if((0,w.isNullOrUndefined)(t))return i.k.log(`IrisDataConnector: has market changed. placement: ${e}. Placement not in PSL.`),!0;const n=!!(0,w.isNullOrUndefined)(t.lastUpdatedMarket)||t.lastUpdatedMarket!==l.jG.CurrentMarket;return i.k.log(`IrisDataConnector: has market changed. placement: ${e} - ${n}.`),n}getImageInfo(e){const t=this.cachedSurfaceMap.get(e);return t&&t.imageInfo?t.imageInfo:null}addImageCreativeToDislikeList(){const e=(0,f.cF)()?f.S5[f._l.MSNAnaheimNewsNTPImages+f.Yq]:f.S5[f._l.MSNAnaheimNewsNTPImages],t=this.cachedSurfaceMap.get(e),n=t.creatives[0].creativeId;if((0,w.isNullOrUndefined)(t)||(0,w.isNullOrUndefined)(t.imageInfo))return!1;if(t.imageInfo.dislikedCreativeCountCurrentPeriod>=5)return!1;if((0,w.isNullOrUndefined)(t.imageInfo.dislikedCreatives))t.imageInfo.dislikedCreatives=[n];else{const e=t.imageInfo.dislikedCreatives.length;let i=!1;if(t.imageInfo.dislikedCreatives.forEach((e=>{e!==n||(i=!0)})),i)return!0;e>=20&&t.imageInfo.dislikedCreatives.shift(),t.imageInfo.dislikedCreatives.push(n)}return t.imageInfo.dislikedCreativeCountCurrentPeriod+=1,b.persistAllSurfaces(),!0}};async function T(){await l.jG.AccountInfoPromise;const e=l.jG.ResolvedAccountInfo;return(0,w.isNullOrUndefined)(h.Al.AadState)?g.Qm.AAD===(e&&e.account_type):h.Al.AadState}},71568:function(e,t,n){"use strict";n.d(t,{_:function(){return p}});var i=n(7476),r=n(76733),o=n(88826),a=n(8037),s=n(13015),c=n(73348),d=n(23549),l=n(21789),u=n(85663);class p{static createIrisRequestContext(e,t){return{queryParams:e,...t?{includedHeaders:t}:{}}}static async callIris(e){if((0,u.isNullOrUndefined)(e))throw a.l.create(a.N.MissingContext,"IRIS: Request context undefined or null",i.YSG,`Request context: ${JSON.stringify(e)}`);const t=this.validateQParams(e.queryParams);if(t)throw a.l.create(a.N.QueryParametersInvalid,"IRIS: Invalid query parameters",i.LIN,`Error validating query parameters: ${t} query parameters: ${JSON.stringify(e.queryParams)}`);const n=p.generateGuid();e.queryParams.asid=n;const d=this.assembleQParameters(e.queryParams),l=this.formatQParameters(d),h=new URL(c.TY+"?"+l),g=this.getHeaders(e.includedHeaders),m=this.getRequestInit(g);let f;const v=(0,s.zq)();setTimeout((()=>{f="Timeout occurred.",v.resolve()}),c.KI);const y=await Promise.race([v.waiting,fetch(h,m).catch((e=>{f=`Fetch failure caused by ${JSON.stringify(e)}`}))]),S=y&&y.status;if(!y||S&&!(S>=200&&S<300))throw f&&(/^Timeout/.test(f)||/^Fetch/.test(f))&&(r.k.log(`Iris: Arc call failed due to ${f}`),(0,o.H)(i.S2e,`Arc call failed due to ${f}`)),a.l.create(a.N.ResponseFailure,"Iris: Arc call failed.",i._ig,`Request url: ${h} Response status code: ${S} Response: ${JSON.stringify(y)}`);let C;try{if(C=await y.text(),!C)throw"empty response body";const t=JSON.parse(C);if(!t)throw"error parsing json response";return{parsedResponse:t,reqContext:e}}catch(e){const t=C??y;throw a.l.create(a.N.ResponseFailure,`Iris: Unable to parse iris resposne due to ${e}`,i.hnc,`Request url: ${h} Response status code: ${S} Response: ${JSON.stringify(t)}`)}}static formatTelemetryActionUrl(e,t){return e&&t?e.replace(/\{ACTION\}/,t):null}static async updateIris(e,t){if((0,u.isNullOrUndefined)(e))throw a.l.create(a.N.ActionUrlInvalid,"Iris: Action beacon undefined or null",void 0,`Iris action url: ${e} headers: ${JSON.stringify(t)}`);const n=new URL(e),o=this.getHeaders(t),l=this.getRequestInit(o);let p;const h=(0,s.zq)();setTimeout((()=>{p="Timeout occurred.",h.resolve()}),c.VT);const g=await Promise.race([h.waiting,fetch(n,l).catch((e=>{p=`fetch failure caused by: ${JSON.stringify(e)}`}))]),m=g&&g.status;if(!g||m&&m<200&&m>=300)throw p&&(/^Timeout/.test(p)||/^Fetch/.test(p))&&(r.k.log(`Iris: Arc call failed due to ${p}`),d.M0.sendAppErrorEvent({...i.s51,message:`Arc call failed due to ${p}`})),a.l.create(a.N.ActionResponseInvalid,"Iris: Arc call failed.",i.a2y,`Request url: ${n} Response status code: ${m} Response: ${JSON.stringify(g)}`);return g}static createPropertyBagErrorMessage(e,t,n,i){return`Placement=${e}, Asid=${t}, Market=${n}, ${i}`}static getHeaders(e){const t=new Headers;return e&&((0,u.isNullOrUndefined)(e.xSdkIaf)||t.set("x-sdk-iaf",e.xSdkIaf)),t}static formatQParameters(e){if((0,u.isNullOrUndefined)(e))return null;const t=/[^=]/,n=[];for(const i in e)!(0,u.isNullOrUndefined)(e[i])&&t.test(e[i])&&n.push(`${i}=${e[i]}`);return n.length>0?n.join("&"):null}static getDefaultAppParameters(e){if(!l.jG)return r.k.log(`Iris: Missing App Environment Object: ${l.jG}`),d.M0.sendAppErrorEvent({...i.EXN,message:`App environment undefined. Placement: ${JSON.stringify(e.placement)}`}),null;let t;const n={locale:l.jG.CurrentMarket,country:l.jG.CountryCode,muid:l.jG.UserId?l.jG.UserId.replace(/^m-/,""):null};return n.muid||(t=`UserId: ${n.muid}`),n.locale||(t=(t?", ":"")+`Market: ${n.locale}`),n.country||(t=(t?", ":"")+`CountryCode: ${n.country}`),t&&(r.k.log(`Iris: Missing ${t} from App Environment Object`),(0,o.H)(i.yyJ,`Missing App environment properties. Placement: ${JSON.stringify(e.placement)}. Error: ${t}`)),n}static getRequiredStaticParameters(){return{nct:"1",fmt:"json",nocookie:"1"}}static assembleQParameters(e){if((0,u.isNullOrUndefined)(e))return(0,o.H)(i.Vsq,"Undefined query param for ARC request."),null;const t=this.getRequiredStaticParameters(),n=this.getDefaultAppParameters(e),r=(0,c.bu)(),a=(0,c.rB)();return Object.assign({},t,n||{},r||{},a,e)}static validateQParams(e){if((0,u.isNullOrUndefined)(e))return"untargetable; no query params";if(!e.placement)return"untargetable; no placement";if(/\|/.test(e.placement)){if(!e.bcnt)return"untargetable; no bcnt for batch request";const t=e.placement.split("|").length,n=e.bcnt.split("|").length;if(t!==n)return"untargetable; batch size mismatch p="+t+" b="+n}}static getDigit(e){let t=(new Date).getTime();const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:7&n|8).toString(16)}static generateGuid(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,p.getDigit)}static getRequestInit(e){return{method:"GET",headers:e,credentials:"include"}}}},52817:function(e,t,n){"use strict";var i,r;n.d(t,{M:function(){return r},R:function(){return i}}),function(e){e.Impression="imp",e.Action="act"}(i||(i={})),function(e){e.Click="click",e.Conversion="conversion",e.Dislike="dislike",e.Dismiss="dismiss",e.Like="like",e.Hover="hover"}(r||(r={}))},73348:function(e,t,n){"use strict";n.d(t,{KI:function(){return r},M1:function(){return p},S5:function(){return l},So:function(){return h},TY:function(){return a},VT:function(){return o},Yq:function(){return s},_l:function(){return d},bu:function(){return m},cF:function(){return u},rB:function(){return g},u7:function(){return c},uS:function(){return f}});var i=n(92100);const r=5e3,o=1e4,a="https://arc.msn.com/v4/api/selection",s=".int",c=".prev";var d;!function(e){e.MSNAnaheimNewsNTPImages="MSNAnaheimNewsNTPImages",e.MSNNewsCoachmark="MSNNewsCoachmark",e.WinHPCoachmark="WinHPCoachmark",e.MSNewsRewards="MSNewsRewards",e.ConditionalBanner="ConditionalBanner"}(d||(d={}));const l={[d.MSNAnaheimNewsNTPImages]:"88000244",[d.MSNAnaheimNewsNTPImages+s]:"88000245",[d.MSNAnaheimNewsNTPImages+c]:"88000246",[d.MSNNewsCoachmark]:"88000308",[d.MSNNewsCoachmark+s]:"88000309",[d.WinHPCoachmark]:"88000789",[d.WinHPCoachmark+s]:"88000788",[d.MSNewsRewards]:"88000321",[d.MSNewsRewards+s]:"88000322",[d.ConditionalBanner]:"10837393",[d.ConditionalBanner+s]:"10837394"},u=()=>{const e=location.search;return!!e&&/(\?|&)irisInternal=true/.test(e)},p=()=>{const e=location.search,t=new URLSearchParams(e);return t.has("testingNum")?t.get("testingNum"):"-1"},h=()=>{const e=location.search,t=new URLSearchParams(e);return t.has("ocid")?t.get("ocid"):""},g=()=>(()=>{const e=location.search;return!!e&&/(\?|&)irisStatic=true/.test(e)})()?{app:"anaheimstatic"}:{},m=()=>{const e=location.search;if(e&&/(\?|&)irisSegment=/.test(e)){const t=i.c.getQueryParameterByName("irisSegment",e);if(t)return{[t]:"1"}}return null};var f;!function(e){e.AcquisitionPath="AREF",e.BrowserChannel="ACHANNEL",e.BrowserVersion="ABUILD",e.Caller="clr",e.ClientID="edgeid",e.ConsumerVsEnterprise="ISU",e.DefaultBrowser="ADEFAB",e.DeviceOSVersion="devosver",e.OperatingSystem="OPSYS",e.PrimaryBrowser="APRIMB",e.TailoredExperiencesToggle="poptin",e.UITheme="UITHEME"}(f||(f={}))},8037:function(e,t,n){"use strict";n.d(t,{N:function(){return i},l:function(){return o}});var i,r=n(85663);!function(e){e[e.Unknown=0]="Unknown",e[e.MissingContext=1]="MissingContext",e[e.QueryParametersInvalid=2]="QueryParametersInvalid",e[e.FetchFailure=3]="FetchFailure",e[e.ResponseFailure=4]="ResponseFailure",e[e.Unparsable=5]="Unparsable",e[e.UnconvertableCreative=6]="UnconvertableCreative",e[e.ActionUrlInvalid=7]="ActionUrlInvalid",e[e.ActionCallFail=8]="ActionCallFail",e[e.ActionResponseInvalid=9]="ActionResponseInvalid"}(i||(i={}));class o{static create(e,t,n,i){return{appError:n,customMessage:i,errorMessage:t,irisErr:e}}static typeCheck(e){return e&&"object"==typeof e&&!(0,r.isNullOrUndefined)(e.irisErr)}}},87095:function(e,t,n){"use strict";var i;n.d(t,{W:function(){return i}}),function(e){e.offPageNavigation="nav-newtab",e.inPageNavigation="nav-inpage",e.executeAction="execute-action"}(i||(i={}))},63815:function(e,t,n){"use strict";n.d(t,{c:function(){return p}});var i=n(71568),r=n(85663),o=n(2518),a=n(7476),s=n(23549);class c{static isError(e){return!(0,r.isNullOrUndefined)(e)&&"object"==typeof e&&!(0,r.isNullOrUndefined)(e.error)||!(0,r.isNullOrUndefined)(e.code)}static handleError(e,t){if(e&&"number"==typeof e.code)if(e.code>=1e3&&e.code<=1999)this.sendAppError(a.ZHI,e.code,t);else if(e.code>=3e3&&e.code<=3999)this.sendAppError(a.gAu,e.code,t);else switch(e.code){case 0:case 2e3:case 2040:break;case 2010:this.sendAppError(a.MRH,e.code,t);break;case 2020:this.sendAppError(a.CBH,e.code,t);break;default:this.sendAppError(a.CPU,e.code,t)}}static isValidSingleResponse(e){return!(0,r.isNullOrUndefined)(e)&&"object"==typeof e&&!(0,r.isNullOrUndefined)(e.prm)&&(0,o.R)(e.prm._id)&&(0,o.R)(e.prm._imp)&&!(0,r.isNullOrUndefined)(e.tracking)&&(0,o.R)(e.tracking.baseUri)&&!(0,r.isNullOrUndefined)(e.ad)&&!(0,r.isNullOrUndefined)(e.rdr)&&e.rdr.length>0&&(0,o.R)(e.rdr[0].c)&&(0,o.R)(e.rdr[0].u)&&(0,o.R)(e.f)&&(0,o.R)(e.v)}static isBatchResponse(e){return!(0,r.isNullOrUndefined)(e)&&"object"==typeof e&&!(0,r.isNullOrUndefined)(e.batchrsp)}static batchContainsItems(e){return e&&!(0,r.isNullOrUndefined)(e.items)&&"object"==typeof e.items&&e.items.length>0}static batchContainsErrors(e){return e&&!(0,r.isNullOrUndefined)(e.errors)&&"object"==typeof e.errors&&e.errors.length>0}static decodeSingleResponseString(e){if(!(0,o.R)(e))return null;try{return JSON.parse(e)}catch(t){return s.M0.sendAppErrorEvent({...a.FQ3,message:"Exception parsing JSON",pb:{...a.FQ3.pb,customMessage:`Error parsing json encodedString: ${e}`}}),null}}static sendAppError(e,t,n){s.M0.sendAppErrorEvent({...e,message:`err: ${t}`,pb:{...e.pb,customMessage:n&&n.queryParams?i._.createPropertyBagErrorMessage(n.queryParams.placement,n.queryParams.asid,n.queryParams.locale):""}})}}var d=n(21789);class l{constructor(){this._infoMap=new Map,this._unknown=[],this._errors=[]}static createSurfaceInfo(e,t,n,i){return{creatives:e||[],currentCreativeId:t,errors:n||[],lastUpdatedMarket:d.jG.CurrentMarket,lastUpdatedTime:(new Date).getTime(),placement:i}}static infoHasId(e){return e&&!(0,r.isNullOrUndefined)(e.placement)}static infoHasCreatives(e){return e&&!(0,r.isNullOrUndefined)(e.creatives)&&e.creatives.length>0}static infoHasErrors(e){return e&&!(0,r.isNullOrUndefined)(e.errors)&&e.errors.length>0}get(e){return!(0,r.isNullOrUndefined)(e)&&this._infoMap.has(e)?this._infoMap.get(e):null}add(e,t){e&&(t?this._infoMap.set(t,e):this._unknown.push(e))}addCreative(e,t){t&&"object"==typeof t?(0,r.isNullOrUndefined)(e)?this._unknown.push(l.createSurfaceInfo([t],null,null,null)):this.addData(e,t,!1):(0,r.isNullOrUndefined)(e)||this._infoMap.set(e,l.createSurfaceInfo(null,null,null,e))}addError(e,t){t&&"object"==typeof t&&0!==Object.keys(t).length&&((0,r.isNullOrUndefined)(e)?this._errors.push(t):this.addData(e,t,!0))}hasUnknowns(){return this._unknown.length>0}getUnknowns(){return this._unknown}hasUnclaimedErrors(){return this._errors.length>0}getUnclaimedErrors(){return this._errors}addData(e,t,n){if((0,r.isNullOrUndefined)(e)){const e=t;this._unknown.push(l.createSurfaceInfo([e],e.creativeId,null,null))}else if(this._infoMap.has(e)){this._infoMap.get(e)[n?"errors":"creatives"].push(t)}else{const i=t;this._infoMap.set(e,l.createSurfaceInfo(n?null:[i],n?null:i.creativeId,n?[t]:null,e))}}}var u=n(8037);class p{static async requestSurfaceInfo(e,t){if(!e)return s.M0.sendAppErrorEvent({...a.cL8,message:"Attempted iris call without any params."}),Promise.reject("Attempted iris call without any params.");const n=i._.createIrisRequestContext(e,t);return await i._.callIris(n).then(p.mapResponse).then(p.handleUnclaimedErrors).catch((e=>{let t,i,r;return u.l.typeCheck(e)&&(t=e.appError,i=e.customMessage,r=e.errorMessage),t=t||a.bUp,s.M0.sendAppErrorEvent({...t,message:r||"Unhandled error encountered requesting/processing iris call",pb:{...t.pb,customMessage:i||`Error: ${JSON.stringify(e)} requestContext: ${JSON.stringify(n)}`}}),Promise.reject(e)}))}static async sendActionUpdate(e,t){try{return await i._.updateIris(e,t)}catch(n){let i,r,o;return u.l.typeCheck(n)&&(i=n.appError,r=n.customMessage,o=n.errorMessage),i=i||a.bUp,s.M0.sendAppErrorEvent({...i,message:o||"Unhandled error encountered requesting/processing iris action update call",pb:{...i.pb,customMessage:r||`Error: ${JSON.stringify(n)} actionUrl: ${JSON.stringify(e)} includedHeaders: ${JSON.stringify(t)}`}}),Promise.reject(n)}}static async handleUnclaimedErrors(e){if(e&&e.collection&&e.collection.hasUnclaimedErrors()){e.collection.getUnclaimedErrors().forEach((t=>{c.handleError(t,e.reqContext)}))}return e}static async mapResponse(e){if(!e||!e.parsedResponse)return Promise.resolve(null);const t=e.parsedResponse,n=e.reqContext&&e.reqContext.queryParams&&/^[^|]*$/.test(e.reqContext.queryParams.placement)?e.reqContext.queryParams.placement:null,i=new l,r={collection:i,reqContext:e.reqContext};if(c.isError(t))return i.addError(n,{...t,placement:n}),Promise.resolve(r);if(c.isBatchResponse(t)){if(c.batchContainsItems(t.batchrsp)){t.batchrsp.items.forEach((e=>{const t=e.placement?e.placement:n;p.extractCreativesFromItem(e,t,i)}))}if(c.batchContainsErrors(t.batchrsp)){t.batchrsp.errors.forEach((e=>{i.addError(e.placement||n,e)}))}}else{const r=p.convertToCreative(t);if(i.addCreative(n,r),!r){const t=e.reqContext&&e.reqContext.queryParams&&e.reqContext.queryParams.asid;s.M0.sendAppErrorEvent({...a.EhB,message:"Iris: Attempt to convert iris response to creative failed",pb:{...a.EhB.pb,customMessage:`ASID: ${t} RequestContext: ${JSON.stringify(e.reqContext)} Response: ${JSON.stringify(e.parsedResponse)}`}})}}return Promise.resolve(r)}static convertToCreative(e){const t=e&&"string"==typeof e?c.decodeSingleResponseString(e):e;if(t&&c.isValidSingleResponse(t))return{creativeName:t.rdr[0].c,creativeNamespace:t.rdr[0].u,content:t.ad,creativeId:t.prm._id,telemetry:{impressionUrl:t.prm._imp,actionUrl:t.tracking.baseUri}};const n=t&&t.prm&&t.prm._id;return s.M0.sendAppErrorEvent({...a.N6m,message:"Iris: Response format invalid - creativeId",pb:{...a.N6m.pb,customMessage:`Error converting response into creative due to invalid format creativeId: ${n}\n                    encodedString: ${"object"==typeof e?JSON.stringify(e):e}\n                    decodedString: ${"object"==typeof t?JSON.stringify(t):t}`}}),null}static addIrisEntityToCollection(e,t,n){if(!t||!n)return;const i=p.convertToCreative(t);i&&n.addCreative(e,i)}static extractCreativesFromItem(e,t,n){n&&e&&(e.items&&e.items.length>0&&e.items.forEach((e=>{p.addIrisEntityToCollection(t,e,n)})),e.item&&p.addIrisEntityToCollection(t,e.item,n))}}},78672:function(e,t,n){"use strict";n.d(t,{$w:function(){return g},Dp:function(){return d},FK:function(){return p},G8:function(){return h},SJ:function(){return u},SV:function(){return m},Td:function(){return s},ZI:function(){return f},b0:function(){return S},bs:function(){return v},ij:function(){return o},l4:function(){return a},x_:function(){return y},zp:function(){return l},zw:function(){return c}});var i=n(31558),r=n(54911);function o(){return(0,i.N)()?window.navigator.userAgent:(0,r.s)().userAgent}function a(){return(0,i.N)()?window.location.href:(0,r.s)().url.href}function s(){return(0,i.N)()?window.location.hostname:(0,r.s)().url.hostname}function c(){return(0,i.N)()?window.location.host:(0,r.s)().url.host}function d(){return(0,i.N)()?window.location.origin:(0,r.s)().url.origin}function l(){return(0,i.N)()?window.location.search:(0,r.s)().url.search}function u(){return(0,i.N)()?window.location.protocol:(0,r.s)().url.protocol}function p(){return(0,i.N)()?window.location.hash:(0,r.s)().url.hash}function h(){return(0,i.N)()?window.document.cookie:(0,r.s)().cookie}function g(e){if(!(0,i.N)())throw new Error("getDocumentElementById is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementById(e)}function m(e){if(!(0,i.N)())throw new Error("getDocumentElementsByTagName is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementsByTagName(e)}function f(e){if(!(0,i.N)())throw new Error("getDocumentElementsByClassName is unsupported server side. This call should be wrapped in canUseDOM().");return window.document.getElementsByClassName(e)}function v(){return(0,i.N)()?window.indexedDB:null}function y(){return(0,i.N)()?window.devicePixelRatio:(0,r.s)().devicePixelRatio}function S(e=void 0,t=void 0,n=!0,r="anonymous",o,a){if(!(0,i.N)())throw new Error("createScriptTag is unsupported server side. This call should be wrapped in canUseDOM().");const s=document.createElement("script");return t&&(s.id=t),o&&s.setAttribute("class",o),a&&(s.onload=a),s.type="text/javascript",e&&(window&&window.trustedTypesURLValidation?s.src=window.trustedTypesURLValidation(e,"scriptSrcUrlPolicy"):s.src=e,s.async=n,s.crossOrigin=r),window&&window.NONCE_ID&&(s.nonce=window.NONCE_ID),s}},31558:function(e,t,n){"use strict";function i(){return!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv)}n.d(t,{N:function(){return i}})},55524:function(e,t,n){"use strict";n.d(t,{Gq:function(){return r},TG:function(){return o}});let i=new Map;const r=Object.freeze({set(e,t){return i.set(e,t),this},get:function(e,t){let n=i.get(e);return void 0===n&&t&&(n=t(),i.set(e,n)),n},clear(){i.clear()},delete:e=>i.delete(e),has:e=>i.has(e)});function o(e){const t=Symbol();return{get current(){return r.get(t,(()=>e))},set current(e){r.set(t,e)}}}},96489:function(e,t,n){"use strict";n.d(t,{U1:function(){return u},WG:function(){return l},oN:function(){return p},pn:function(){return d},sR:function(){return h}});var i=n(55524);let r=0;function o(){return r>1e8&&(r=0),"__mlv-"+r++}const{get:a,set:s,delete:c}=i.Gq,d=()=>v(g()),l=e=>v(m(e));function u(){const e=g();return v(e,{call:(...t)=>{var n;return null===(n=e.get())||void 0===n?void 0:n(...t)}})}function p(){const e=m((()=>new Map));return v(f(e),{getObj:()=>e.get(),set:(t,n)=>e.get().set(t,n),get:t=>e.get().get(t)})}function h(){const e=m((()=>new Set));return v(f(e),{getObj:()=>e.get(),add:t=>e.get().add(t)})}function g(){const e=o();return{get:()=>a(e),set:t=>(s(e,t),t),unset:()=>{c(e)}}}function m(e){const t=o();return{get:()=>a(t,e),unset:()=>{c(t)}}}function f(e){const t=()=>e.get();return{has:e=>t().has(e),get size(){return t().size},delete:e=>t().delete(e),unset:()=>e.unset()}}function v(e,t){return Object.freeze(t?Object.assign(e,t):e)}},32687:function(e,t,n){"use strict";n.d(t,{Cw:function(){return a},cs:function(){return o},j4:function(){return s},mx:function(){return r}});var i=n(99628);const r="rd",o="OSATE",a="OSAT",s={ver:"0.1.0",spec:{innerWidth:{clientValue:()=>window.innerWidth},innerHeight:{clientValue:()=>window.innerHeight},outerWidth:{clientValue:()=>window.outerWidth},breakpoint:{clientValue:()=>function(e,t){for(let n=t.length-1;n>=0;n--)if(e>=t[n])return n}(window.innerWidth,i.A)},locationHash:{clientValue:()=>window.location.hash},locationHref:{clientValue:()=>window.location.href},locationHost:{clientValue:()=>window.location.host},locationHostName:{clientValue:()=>window.location.hostname},locationOrigin:{clientValue:()=>window.location.origin},locationPathName:{clientValue:()=>window.location.pathname},locationProtocol:{clientValue:()=>window.location.protocol},locationSearch:{clientValue:()=>window.location.search},screenTop:{clientValue:()=>window.screenTop},screenY:{clientValue:()=>window.screenY},canUseCssGrid:{clientValue:()=>window.CSS&&window.CSS.supports&&CSS.supports("display","grid")||!1},devicePixelRatio:{clientValue:()=>window.devicePixelRatio},language:{clientValue:()=>document.documentElement.lang},direction:{clientValue:()=>document.documentElement.dir}}}},99628:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});const i=[0,656,980,1304]},291:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var i=n(31558);function r(e,t={bindMethod:!0}){return"object"==typeof n.g&&n.g.TEST_ENV&&!n.g.TEST_SINGLETONPROXY||(0,i.N)()?e.getInstance():new Proxy(e,{get(e,n,i){const r=e.getInstance(),o=Reflect.get(r,n,r);return t.bindMethod&&"function"==typeof o?o.bind(r):o},set(e,t,n,i){const r=e.getInstance();return Reflect.set(r,t,n,r)}})}},54911:function(e,t,n){"use strict";n.d(t,{s:function(){return d}});var i=n(55524),r=n(32687);const o="__RequestDataInstance__";class a{constructor(e,t){if(this.url=new URL(e.href),this.innerHeight=e.innerHeight,this.devicePixelRatio=e.devicePixelRatio,this.canUseCssGrid=e.canUseCssGrid,this.requestId=e.requestId,this.cookie=e.cookie,this.referer=e.referer,this.userAgent=e.userAgent,this.clientData=e.clientData,this.oneServiceHeaders=function(e){try{if(e)return JSON.parse(e)}catch(e){}}(e.oneServiceHeaders)||{},this.isPssrMode=t,t){const e=s(r.cs,this.cookie),t=!!e&&"1"===e,n=s(r.Cw,this.cookie);if(t&&n||!e&&!n)return this.msalAuthReady=!0,void(n&&(this.oneServiceHeaders.Authorization=`Bearer ${n}`));this.msalAuthReady=!1,this.pssrRejectedReason=e&&!t?"interactiveLogin":e&&!n?"missOSAT":"missOSATE"}}static getInstance(){const e=i.Gq.get(o);return e||(n.g.TEST_ENV?c({href:"http://localhost:8080/",innerHeight:768,devicePixelRatio:1,canUseCssGrid:!1,requestId:"0",cookie:"",userAgent:"",referer:"",oneServiceHeaders:""}):c({href:"http://localhost:8080/",innerHeight:0,devicePixelRatio:0,canUseCssGrid:!1,requestId:"0",cookie:"",userAgent:"",referer:"",oneServiceHeaders:""}))}static resetInstance(e,t=!1){const n=new a(e,t);return i.Gq.set(o,n),n}}function s(e,t){if(t&&e){const n=new RegExp("\\b"+e+"\\s*=\\s*([^;]*)","i").exec(t);return n&&n.length>1?n[1]:null}return null}const c=a.resetInstance,d=()=>a.getInstance()},59967:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var i=n(7476),r=n(23549);class o extends Map{constructor(e,t={}){super(),this.identifier=e,this.subscriptions=new Map,t.initialState&&Object.keys(t.initialState).forEach((e=>{super.set(e,t.initialState[e])}))}set(e,t){super.set(e,t);const n=this.subscriptions.get(e);return n&&n.size?(n.forEach((n=>{try{n&&n(t)}catch(t){r.M0.sendAppErrorEvent({...i.fG_,message:"Failed to execute subscription callback",pb:{...i.fG_.pb,customMessage:`Error executing subscription callback for key [${e}]`,instanceId:this.identifier,errorMessage:t&&t.message}})}})),this):this}subscribe(e,t,n={}){if(!t||"function"!=typeof t)return;let i=this.subscriptions.get(e);i||(this.subscriptions.set(e,new Set),i=this.subscriptions.get(e)),i.add(t),this.has(e)&&!1!==n.fireImmediately&&t(this.get(e)),n.signal&&n.signal.addEventListener("abort",(()=>{this.unsubscribe(e,t)}))}unsubscribe(e,t){const n=this.subscriptions.get(e);n&&n.delete(t)}reset(){this.clear(),this.subscriptions.clear()}}},25598:function(e,t,n){"use strict";n.d(t,{J:function(){return o}});var i,r=n(17556);class o{}(i=o).updateLayout=new r.C("updateLayout"),i.initialize=new r.C("initialize")},56591:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var i=n(45266);function r(e,t,n,r){if(!n||r)return"custom";const o=i.Wi.focused,a=i.Wi.informational,s=i.Wi.inspirational;return e===o.feeds_position&&t===o.current_background_image_type?"focused":e===a.feeds_position&&t===a.current_background_image_type?"informational":e===s.feeds_position&&t===s.current_background_image_type?"inspirational":"custom"}},98106:function(e,t,n){"use strict";n.d(t,{A$:function(){return r},FQ:function(){return i},FT:function(){return o},Jx:function(){return s},cN:function(){return c}});const i=78,r=50;let o;const a=[];function s(e){a.push(e)}function c(e){if(e!==o){o=e;for(const t of a)t(e)}}},45266:function(e,t,n){"use strict";n.d(t,{$B:function(){return f},$N:function(){return y},$_:function(){return S},F5:function(){return w},L_:function(){return C},MT:function(){return m},Uq:function(){return s},VE:function(){return p},Wi:function(){return T},YZ:function(){return k},Z3:function(){return h},_9:function(){return b},_U:function(){return g},gp:function(){return c},iz:function(){return i}});var i,r=n(46986),o=n(21789);!function(e){e[e.MicrosoftNews=0]="MicrosoftNews",e[e.Office365=1]="Office365",e[e.Gaming=2]="Gaming",e[e.Play=3]="Play",e[e.NavigationPage=4]="NavigationPage",e[e.Following=5]="Following"}(i||(i={}));var a,s,c,d,l,u,p,h;!function(e){e.Enforced="ENFORCED",e.Recommended="RECOMMENDED"}(a||(a={})),function(e){e[e.focused=0]="focused",e[e.inspirational=1]="inspirational",e[e.informational=2]="informational",e[e.custom=3]="custom"}(s||(s={})),function(e){e[e.always=0]="always",e[e.peek=1]="peek",e[e.headingsonly=2]="headingsonly",e[e.onscroll=3]="onscroll",e[e.off=4]="off"}(c||(c={})),function(e){e.focused="focused",e.inspirational="inspirational",e.informational="informational",e.custom="custom"}(d||(d={})),function(e){e.bing="bing",e.custom="custom",e.iris="iris",e.off="off",e.theme="theme",e.enterprise="enterprise",e.imageAndVideo="imageAndVideo"}(l||(l={})),function(e){e[e.allowAll=0]="allowAll",e[e.disableImageOfTheDay=1]="disableImageOfTheDay",e[e.disableCustomImage=2]="disableCustomImage",e[e.disableAll=3]="disableAll"}(u||(u={})),function(e){e[e.off=0]="off",e[e.onerow=1]="onerow",e[e.tworows=2]="tworows",e[e.top=3]="top"}(p||(p={})),function(e){e.off="off",e.onerow="onerow",e.tworows="tworows",e.top="top"}(h||(h={}));const g={0:"off",1:"onerow",2:"tworows",3:"top"},m={0:"allowAll",1:"disableImageOfTheDay",2:"disableCustomImage",3:"disableAll"},f={off:0,onerow:1,tworows:2,threerows:4,top:3};var v;!function(e){e.off="off",e.onerow="onerow",e.tworows="tworows",e.threerows="threerows"}(v||(v={}));const y={off:0,tworows:1,threerows:2,onerow:3},S={0:"off",1:"tworows",2:"threerows",3:"onerow"},C={backgroundImageTypePolicy:0,currentBackgroundImageType:"imageAndVideo",currentLayout:"inspirational",quickLinksEnabled:!0,showQuickBrief:!0,hideDefaultTopSites:!1,imageOfTheDayEnabled:!0,selectedFeedDisplaySetting:"headingsonly",selectedQuickLinksDisplaySetting:"onerow"},w={0:"focused",1:"inspirational",2:"informational",3:"custom"},b={backgroundImage:"ntp.background_image",backgroundImageTypePolicy:"ntp.background_type_blocked_by_policy",currentBackgroundImageType:"ntp.background_image_type",hideDefaultTopSites:"ntp.hide_default_top_sites",customBackgroundImageInfo:"ntp.local_background_image",layout:"ntp.layout_mode",quickLinks:"ntp.show_top_sites",quickLinksDisplaySetting:"ntp.quick_links_options",imageOfTheDay:"ntp.show_image_of_day",feeds:"ntp.news_feed_display",greeting:"ntp.show_greeting",showSettings:"ntp.show_settings",showQuickBrief:"ntp.show_quick_brief",verticalTabsCollapsed:"edge.vertical_tabs.collapsed",verticalTabsOpened:"edge.vertical_tabs.opened",singleColumnEnabled:"ntp.single_column.enabled",userNurturingUpdated:"ntp.user_nurturing",hasUserSeenNewFre:"new_device_fre.has_user_seen_new_fre",defaultBrowserSettingEnabled:"browser.default_browser_setting_enabled",showAppLauncher:"ntp.enable_app_launcher",userChoices:"ntp.record_user_choices",selectedFeedPivot:"ntp.selected_feed_pivot",layoutModeInstrumentation:"instrumentation.ntp.layout_mode",newsFeedDsiplayInstrumentation:"instrumentation.ntp.news_feed_display",gamerModeEnabled:"browser.gamer_mode_enabled",codexBingUpsellEnabled:"ntp.enable_bing_chat_by_policy",companyLogoEnabled:"ntp.enable_company_logo_by_policy",windowsIndexerPromotedTopSites:"ntp.promoted_top_sites",minVisitAffiliateSites:"ntp.min_visit_affiliate_sites"},T=(o.jG.CurrentRequestTargetScope&&(o.jG.CurrentRequestTargetScope.audienceMode,r.F.Enterprise),{focused:{quick_links:!0,feeds_position:"headingsonly",current_background_image_type:"off",greeting:!0,hide_promoted_links:!1},inspirational:{quick_links:!0,feeds_position:"peek",current_background_image_type:"imageAndVideo",greeting:!0,hide_promoted_links:!1},informational:{quick_links:!0,feeds_position:"always",current_background_image_type:"imageAndVideo",greeting:!0,hide_promoted_links:!1}}),k={currentBackgroundImageType:T.informational.current_background_image_type,currentLayout:"informational",quickLinksEnabled:T.informational.quick_links,hideDefaultTopSites:T.informational.hide_promoted_links,imageOfTheDayEnabled:!0,selectedFeedDisplaySetting:T.informational.feeds_position,greetingEnabled:T.informational.greeting}},83710:function(e,t,n){"use strict";n.d(t,{V1:function(){return i}});function i(){return!0===window.__peregrine_litePVSent}},39731:function(e,t,n){"use strict";n.d(t,{K:function(){return a}});var i=n(10754),r=n(23549),o=n(83710);function a(e,t,n,a,s){if((0,o.V1)())r.M0.getPageMetadata().updateContract();else{(0,i.Ou)().TimeToSendPageView=Math.round(performance.now()),r.M0.sendPageView(e,t,n,a,s)}}},14959:function(e,t,n){"use strict";n.d(t,{B8:function(){return r}});function i(){window.standbyClickEventsHandler&&(window.removeEventListener("click",window.standbyClickEventsHandler),window.removeEventListener("auxclick",window.standbyClickEventsHandler),window.removeEventListener("contextmenu",window.standbyClickEventsHandler),delete window.standbyClickEventsHandler)}function r(e){window.standbyClickEventsHandler&&(e&&e instanceof Promise?e.then((()=>{i()})):i())}},56363:function(e,t,n){"use strict";n.d(t,{Q2:function(){return i},lS:function(){return a},mL:function(){return o},ub:function(){return r}});const i="ntps",r="marketPref",o=182,a="unimarket"},39409:function(e,t,n){"use strict";n.d(t,{TU:function(){return m},l_:function(){return h}});var i=n(88826),r=n(7476),o=n(21789),a=n(54297),s=n(13334),c=n(19464),d=n(56363),l=n(23549),u=n(19779),p=n(91668);async function h(e){if(!window.navigator.cookieEnabled)return;await(0,p.rr)();let t="";try{t=await async function(){var e;const t=await u.N.getPdpUserPreference(!0);if(!t||!t.value||0===t.value.length)return"";const n=t.value[0];if(!n)return"";return(null===(e=n.userSettings)||void 0===e?void 0:e.preferredMarket)??""}()}catch{return void(0,i.H)(r.Xa2,"There was an error getting preferredMarket from PDP services.")}const n=function(){let e="";const t=m(),n=(0,c.ej)(t);if(!n)return"";if("homePage"===o.jG.AppType)return n;const i=JSON.parse(n);i&&i.m&&(e=i.m);return e}();"edgeChromium"!=o.jG.AppType&&(e=g);let s=!1,d="";if(d=(0,a.$o)().getItem("marketConsolidationTmpl"),t)n?t!==n?(d=`MarketConsolidationSync_Mismatch_${t}_${n}`,e(t),(0,a.$o)().setObject("showMarketRoamingCoachmark",!0),s=!0,"edgeChromium"==o.jG.AppType&&(0,i.H)(r.i05,`Market missmatch. Server market: ${t}, Client market: ${n}`)):t!==n||d||(d="MarketConsolidationSync_Match",s=!0):(d="MarketConsolidationSync_Client_"+t,e(t),s=!0);else if(n){s=!0;await u.N.updateMarketPreference(n)?d="MarketConsolidationSync_Server_"+n:(s=!1,(0,i.H)(r.CTH,"PDP Service failed to update market preference from MarketConsolidation",`market: ${n}`))}d&&(0,a.$o)().setItem("marketConsolidationTmpl",d),(s||d)&&(l.M0.addOrUpdateTmplProperty("MarketConsolidationSync",s?"1":"0"),l.M0.addOrUpdateTmplProperty(d,"1"))}function g(e){const t=(0,s.nP)().CurrentFlights;if(null==t||!t.includes("prg-market-roam"))return;const n=`.${o.jG.HostPage.topDomain}`,a=m(),d="homePage"===o.jG.AppType?e:JSON.stringify({m:e});(0,c.sq)(a,"",-1),(0,c.sq)(a,d,182,n,"/"),(0,i.H)(r.i05,`Client cookie udpdated to ${d}`)}function m(){return"homePage"===o.jG.AppType?d.ub:d.Q2}},43356:function(e,t,n){"use strict";n.d(t,{Qz:function(){return w},bn:function(){return b},v:function(){return T},FQ:function(){return f},gy:function(){return h},S0:function(){return u},F_:function(){return g},Qm:function(){return m}});var i,r=n(98669);!function(e){e[e.StandardEventBasedDeferral=0]="StandardEventBasedDeferral",e[e.CustomEventBasedDeferral=1]="CustomEventBasedDeferral"}(i||(i={}));var o=n(41074),a=n(52516),s=n(85205),c=n(96531),d=n(68042);const l={filter:(e,t)=>e.filter((e=>t in e))};function u(){return c._.getInstance().rootReducer.connector(s.z.MilestoneData)}function p(e){const t=u();if(!t)return;const n=t.getCurrentState().perExperienceMilestones,i=n&&n.get(e);let r;return i&&(r=i.perInstanceMilestones.get(a.t)),r}function h(e){const t=p(e);if(!t||function(e){let t;switch(e.loadAfter.eventType){case r.Gg.pageVisuallyReady:t=function(){const e=u();if(!e)return!1;const{pageCompleteTiming:t}=e.getCurrentState();return Boolean(t&&t.endTime!==a.n)}();break;case r.Gg.aboveTheFoldVisuallyReady:t=v();break;case r.Gg.belowTheFoldTransitionStart:t=y();break;case r.Gg.hydrationComplete:t=C();break;default:t=(0,d.c)(e.loadAfter.experienceType,e.loadAfter.eventType)}return t}(t))return null;if(t.shouldLoad&&t.loadAfter){return{deferralType:S(t.loadAfter),shouldResolve:t.shouldLoad}}return null}function g(){return u()?v()?Promise.resolve():new Promise((e=>{o.g.updateAboveTheFoldVisuallyReady.registerObserver((t=>{e()}))})):Promise.resolve()}function m(){return u()?y()?Promise.resolve():new Promise((e=>{o.g.updateBelowTheFoldTransitionStart.registerObserver((t=>{e()}))})):Promise.resolve()}async function f(e){const t=u();if(!t)return;const n=t.getCurrentState().plugins;if(!n||0===n.length)return;const i=l.filter(n,e);for(const t of i)void 0!==t[e]&&await t[e].call(t)}function v(){const e=u();if(!e)return!1;const{aboveTheFoldVisuallyReady:t}=e.getCurrentState();return Boolean(t&&t.endTime!==a.n)}function y(){const e=u();return!!e&&e.getCurrentState().belowTheFoldTransitionStart}function S(e){return e.eventType in r.ic?i.CustomEventBasedDeferral:i.StandardEventBasedDeferral}function C(){const e=u();return!!e&&e.getCurrentState().hydrationComplete}function w(e,t,n,i){return{deferralInfo:e,experienceType:t,experienceGroup:n,experienceInstance:i}}function b(e,t,n,i){return{experienceType:e,currentState:t,experienceGroup:n,experienceInstance:i}}function T(e,t,n,i,r){return{experienceType:e,experienceGroup:t,experienceInstance:n,startTime:i,endTime:r}}},41074:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var i=n(17556);class r{constructor(){this.updateHydrationComplete=new i.C("updateHydrationRenderComplete"),this.updateRiverHydrationComplete=new i.C("updateRiverHydrationRenderComplete"),this.updateAboveTheFoldVisuallyReady=new i.C("updateAboveTheFoldVisuallyReady"),this.updateBelowTheFoldTransitionStart=new i.C("updateBelowTheFoldTransitionStart"),this.updateExperienceLoadDeferralState=new i.C("updateExperienceLoadDeferralState"),this.updateExperienceCurrentState=new i.C("updateExperienceCurrentState"),this.updateExperiencePublicState=new i.C("updateExperiencePublicState"),this.updateExperienceRenderDeferralState=new i.C("updateExperienceRenderDeferralState"),this.updateInitTiming=new i.C("UpdateInitTiming"),this.updatePageComplete=new i.C("updatePageCompleteTiming"),this.updateRenderTiming=new i.C("UpdateRenderTiming"),this.updateVisuallyReadyTiming=new i.C("UpdateVisuallyReadyTiming"),this.updateStartLoadingTiming=new i.C("UpdateStartLoadingTiming"),this.updateMediaContentReadyTiming=new i.C("UpdateMediaContentReadyTiming"),this.updateDomCompleteTiming=new i.C("UpdateDomCompleteTiming"),this.updateMilestonePlugins=new i.C("updateMilestonePlugin")}resetInstance(){this.updateHydrationComplete.unregisterObservers(),this.updateRiverHydrationComplete.unregisterObservers(),this.updateAboveTheFoldVisuallyReady.unregisterObservers(),this.updateBelowTheFoldTransitionStart.unregisterObservers(),this.updateExperienceLoadDeferralState.unregisterObservers(),this.updateExperienceCurrentState.unregisterObservers(),this.updateExperiencePublicState.unregisterObservers(),this.updateExperienceRenderDeferralState.unregisterObservers(),this.updateInitTiming.unregisterObservers(),this.updatePageComplete.unregisterObservers(),this.updateRenderTiming.unregisterObservers(),this.updateVisuallyReadyTiming.unregisterObservers(),this.updateDomCompleteTiming.unregisterObservers(),this.updateMilestonePlugins.unregisterObservers(),o=new r}}let o=new r},42465:function(e,t,n){"use strict";n.d(t,{m:function(){return g}});var i=n(41074),r=n(98669),o=n(43356),a=n(51602),s=n(68042),c=n(9119);function d(e,t){e.registerObserver((e=>{((e.params||[])[0]||[]).forEach((({deferralInfo:e,experienceType:n})=>{e&&n&&function(e,t,n){if(!e||!t||!(t.eventType in r.Gg)||!t.experienceType&&!t.experienceGroup)return;const{eventType:i,experienceType:o}=t,d=o||t.experienceGroup,l=s.v.get(d);if(l&&l.referencedDependentsDeferralMap){if(l.currentState<i){const t=l.referencedDependentsDeferralMap.get(i);t?t.size>0&&t.set(e,n):l.referencedDependentsDeferralMap.set(i,new Map([[e,n]]))}}else s.v.set(d,{currentState:a.D.notStarted,referencedDependentsDeferralMap:new Map([[i,new Map([[e,n]])]])}),o&&(0,c.w)(o,!0)}(n,e,t)}))}))}function l(){d(i.g.updateExperienceLoadDeferralState,a.D.loadDeferred),d(i.g.updateExperienceRenderDeferralState,a.D.renderDeferred),i.g.updateExperienceCurrentState.registerObserver((e=>{const t=[];if(((e.params||[])[0]||[]).forEach((({experienceType:e,currentState:n})=>{if(!e||!n)return;const i=s.v.get(e);if(!i)return;i.currentState=n;const c=r.ez.get(n),d=c&&i.referencedDependentsDeferralMap.get(c);d&&d.forEach(((e,n)=>{if(!n)return;const i=e===a.D.loadDeferred?a.D.resolvedForLoad:a.D.resolvedForRender;t.push((0,o.bn)(n,i))}))})),t.length){const e=(0,o.S0)();e&&i.g.updateExperienceCurrentState.getActionSender(e).send(t)}}))}var u=n(96620);let p=new Map;(0,u.U)((()=>{p=new Map}));var h=n(76166);class g extends h.e{constructor(e,t,n,r,s,c,d){super(e,t,n,r,s,c,d),this.startObservers(),i.g.updateInitTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.initialized))),i.g.updateRenderTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.rendered))),i.g.updateVisuallyReadyTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.visuallyReady))),i.g.updateStartLoadingTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.startLoading))),i.g.updateMediaContentReadyTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.mediaContentReady))),i.g.updateDomCompleteTiming.registerObserver((e=>this.updateExperienceTiming(e.params[0],a.D.domComplete))),i.g.updateExperienceLoadDeferralState.registerObserver((e=>{const t=((e.params||[])[0]||[]).map((({experienceType:e,experienceGroup:t,experienceInstance:n})=>(0,o.bn)(e,a.D.loadDeferred,t,n)));t.length&&i.g.updateExperienceCurrentState.getActionSender(this).send(t)})),i.g.updateExperienceRenderDeferralState.registerObserver((e=>{const t=((e.params||[])[0]||[]).map((({experienceType:e,experienceGroup:t,experienceInstance:n})=>(0,o.bn)(e,a.D.renderDeferred,t,n)));t.length&&i.g.updateExperienceCurrentState.getActionSender(this).send(t)}))}startObservers(){l(),i.g.updateExperienceCurrentState.registerObserver((e=>{((e.params||[])[0]||[]).forEach((e=>{e.currentState===a.D.domComplete&&p.forEach(((t,n)=>{let i=!0;const{DomCompleteDependencies:r,DomCompleteCallback:o}=t;for(const t of r.values()){const{dependencyId:{experienceType:n,experienceGroup:r,experienceNamespace:o}}=t;if(n&&n!==e.experienceType||r&&r!==e.experienceGroup||o&&o!==e.experienceInstance||(t.milestoneReached=!0),!t.milestoneReached){i=!1;break}}i&&(t.dependenciesMet=!0,o&&(p.delete(n),o()))}))}))}))}updateExperienceTiming(e,t){e&&e.endTime&&i.g.updateExperienceCurrentState.getActionSender(this).send([(0,o.bn)(e.experienceType,t,e.experienceGroup,e.experienceInstance)])}}},52516:function(e,t,n){"use strict";n.d(t,{n:function(){return r},t:function(){return i}});const i="default",r=-1},39882:function(e,t,n){"use strict";n.d(t,{c:function(){return C}});var i,r=n(99551),o=n(41074);!function(e){e[e.domComplete=0]="domComplete",e[e.error=1]="error",e[e.initialized=2]="initialized",e[e.rendered=3]="rendered",e[e.visuallyReady=5]="visuallyReady",e[e.startLoading=6]="startLoading",e[e.mediaContentReady=7]="mediaContentReady"}(i||(i={}));var a=n(51602),s=n(76733);function c(){return g(o.g.updatePageComplete,(()=>!0))}function d(){return g(o.g.updateAboveTheFoldVisuallyReady,(()=>!0))}function l(){return g(o.g.updateBelowTheFoldTransitionStart,(()=>!0))}function u(e){return h(e,a.D.resolvedForLoad)}function p(e){return h(e,a.D.resolvedForRender)}function h(e,t){return g(o.g.updateExperienceCurrentState,(n=>((n.params||[])[0]||[]).some((n=>n.currentState===t&&n.experienceType===e))))}function g(e,t){return new Promise(((n,i)=>{try{e.registerObserver((e=>{t(e)&&n(!0)}))}catch(e){s.k.logError(e),i(!1)}}))}function m(){return new Promise(((e,t)=>{try{o.g.updateHydrationComplete.registerObserver((()=>{e(!0)}))}catch(e){s.k.logError(e),t(!1)}}))}var f=n(52516),v=n(98669);class y{static updateExperienceCurrentState(e,t,n,i,r){const o=this.getOrCreateExperienceInstanceMilestone(e,t,i,r);o&&(o.currentState=n)}static updateMilestoneTiming(e,t,n,r,o,s,c){const d=this.getOrCreateExperienceInstanceMilestone(e,t,s,c);let l;if(d)switch(n){case i.initialized:l=d.initializationTime;break;case i.rendered:l=d.renderTime;break;case i.visuallyReady:l=d.visuallyReadyTime;break;case i.domComplete:l=d.domCompleteTime;break;case i.startLoading:return void(l=d.startLoadingTime);case i.error:return void(d.currentState=a.D.error);case i.mediaContentReady:l=d.mediaContentReadyTime;break;default:throw new Error("Invalid Argument: Unrecognized eventType")}if(!l)throw new Error(`Invalid experience time object while processing timing update for ${n}`);r&&(l.startTime=r),o&&(l.endTime=o)}static updateHydrationComplete(e,t){if(!e)throw new Error(y.invalidMilestoneModelMessage);e.hydrationComplete=t}static updateBelowTheFoldTransitionStart(e,t){if(!e)throw new Error(y.invalidMilestoneModelMessage);e.belowTheFoldTransitionStart=t}static updateMilestonePlugin(e,t){if(!e)throw new Error(y.invalidMilestoneModelMessage);e.plugins&&0!==e.plugins.length?e.plugins=e.plugins.concat(t):e.plugins=t}static updateAboveTheFoldVisuallyReady(e,t){if(!e)throw new Error(y.invalidMilestoneModelMessage);if(!e.aboveTheFoldVisuallyReady)throw new Error("AboveTheFold start not set");e.aboveTheFoldVisuallyReady.startTime=0,e.aboveTheFoldVisuallyReady.endTime=t}static updatePageComplete(e,t){if(!e)throw new Error(y.invalidMilestoneModelMessage);if(!e.aboveTheFoldVisuallyReady)throw new Error("AboveTheFold start not set");e.pageCompleteTiming.startTime=0,e.pageCompleteTiming.endTime=t}static deferExperienceLoad(e,t,n,i,r){const o=this.getOrCreateExperienceInstanceMilestone(e,t,i,r);o.loadAfter={experienceType:n.experienceType,experienceGroup:n.experienceGroup,eventType:n.eventType},y.updateLoadDeferralHandler(o,t)}static deferExperienceRender(e,t,n,i,r){const o=this.getOrCreateExperienceInstanceMilestone(e,t,i,r);o.renderAfter={experienceType:n.experienceType,experienceGroup:n.experienceGroup,eventType:n.eventType},y.updateRenderDeferralHandler(o,t)}static getOrCreateExperienceMilestone(e,t,n){if(!t)throw new Error("Invalid Argument: experienceType");e||(e={aboveTheFoldVisuallyReady:void 0,pageCompleteTiming:void 0,perExperienceMilestones:void 0}),e.perExperienceMilestones||(e.perExperienceMilestones=new Map);let i=e.perExperienceMilestones.get(t);return i||(i={experienceType:t,experienceGroup:n,perInstanceMilestones:new Map},e.perExperienceMilestones.set(t,i)),i}static getOrCreateExperienceInstanceMilestone(e,t,n,i){const r=this.getOrCreateExperienceMilestone(e,t,n),o=i||f.t;let s=r.perInstanceMilestones.get(o);return s||(s={currentState:a.D.notStarted,initializationTime:{endTime:f.n,startTime:f.n},loadAfter:{experienceType:void 0,eventType:void 0},renderAfter:{experienceType:void 0,eventType:void 0},renderTime:{endTime:f.n,startTime:f.n},visuallyReadyTime:{endTime:f.n,startTime:f.n},startLoadingTime:{endTime:f.n,startTime:f.n},mediaContentReadyTime:{endTime:f.n,startTime:f.n},domCompleteTime:{endTime:f.n,startTime:f.n}},r.perInstanceMilestones.set(o,s)),s}static updateLoadDeferralHandler(e,t){switch(e.loadAfter.eventType){case v.Gg.pageVisuallyReady:e.shouldLoad=c;break;case v.Gg.aboveTheFoldVisuallyReady:e.shouldLoad=d;break;case v.Gg.belowTheFoldTransitionStart:e.shouldLoad=l;break;case v.Gg.hydrationComplete:e.shouldLoad=m;break;default:return void(e.shouldLoad=u.bind(this,t))}}static updateRenderDeferralHandler(e,t){switch(e.renderAfter.eventType){case v.Gg.aboveTheFoldVisuallyReady:e.shouldRender=d;break;case v.Gg.belowTheFoldTransitionStart:e.shouldRender=l;break;case v.Gg.hydrationComplete:e.shouldRender=m;break;default:return void(e.shouldRender=p.bind(this,t))}}}y.invalidMilestoneModelMessage="Invalid Argument: milestoneModel";var S=n(85663);class C{reduce(e,t){let n;if(n=e?{...e}:{aboveTheFoldVisuallyReady:{endTime:f.n,startTime:f.n},pageCompleteTiming:{endTime:f.n,startTime:f.n},perExperienceMilestones:new Map},!t)return n;let i=!1;return i=i||this.handlePageLevelActions(i,t,n),i=i||this.handleExperienceLevelActions(i,t,n),n||e}handleExperienceLevelActions(e,t,n){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e||r.G.handleAction(t,o.g.updateInitTiming,(e=>this.updateTiming(i.initialized,n,e))))||r.G.handleAction(t,o.g.updateRenderTiming,(e=>this.updateTiming(i.rendered,n,e))))||r.G.handleAction(t,o.g.updateVisuallyReadyTiming,(e=>this.updateTiming(i.visuallyReady,n,e))))||r.G.handleAction(t,o.g.updateStartLoadingTiming,(e=>this.updateTiming(i.startLoading,n,e))))||r.G.handleAction(t,o.g.updateMediaContentReadyTiming,(e=>this.updateTiming(i.mediaContentReady,n,e))))||r.G.handleAction(t,o.g.updateDomCompleteTiming,(e=>this.updateTiming(i.domComplete,n,e))))||r.G.handleAction(t,o.g.updateExperienceLoadDeferralState,(e=>e.forEach((({deferralInfo:e,experienceType:t,experienceGroup:i,experienceInstance:r})=>{e&&t&&y.deferExperienceLoad(n,t,e,i,r)})))))||r.G.handleAction(t,o.g.updateExperienceRenderDeferralState,(e=>e.forEach((({deferralInfo:e,experienceType:t,experienceGroup:i,experienceInstance:r})=>{e&&t&&y.deferExperienceRender(n,t,e,i,r)})))))||r.G.handleAction(t,o.g.updateExperienceCurrentState,(e=>e.forEach((({experienceType:e,currentState:t,experienceGroup:i,experienceInstance:r})=>{t&&e&&y.updateExperienceCurrentState(n,e,t,i,r)})))))||r.G.handleAction(t,o.g.updateExperiencePublicState,(e=>{}))}handlePageLevelActions(e,t,n){return e=(e=(e=(e=(e=e||r.G.handleAction(t,o.g.updatePageComplete,(e=>y.updatePageComplete(n,e))))||r.G.handleAction(t,o.g.updateAboveTheFoldVisuallyReady,(e=>y.updateAboveTheFoldVisuallyReady(n,e))))||r.G.handleAction(t,o.g.updateBelowTheFoldTransitionStart,(e=>{(0,S.isNullOrUndefined)(e)||y.updateBelowTheFoldTransitionStart(n,e)})))||r.G.handleAction(t,o.g.updateHydrationComplete,(()=>{y.updateHydrationComplete(n,!0)})))||r.G.handleAction(t,o.g.updateMilestonePlugins,(e=>{e.length>0&&y.updateMilestonePlugin(n,e)}))}updateTiming(e,t,n){const{startTime:i,endTime:r,experienceType:o,experienceGroup:a,experienceInstance:s}=n;y.updateMilestoneTiming(t,o,e,i,r,a,s)}}},68042:function(e,t,n){"use strict";n.d(t,{c:function(){return o},v:function(){return r}});var i=n(96620);let r=new Map;function o(e,t){const n=r.get(e);return!n||n.currentState>=t}(0,i.U)((()=>{r=new Map}))},9119:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var i=n(96620);let r={};function o(e,t){return null!=t?r[e]=t:r[e]}(0,i.U)((()=>{r={}}))},98669:function(e,t,n){"use strict";n.d(t,{Gg:function(){return r},ez:function(){return a},ic:function(){return i}});var i,r,o=n(51602);!function(e){e[e.belowTheFoldTransitionStart=0]="belowTheFoldTransitionStart"}(i||(i={})),function(e){e[e.startLoading=14]="startLoading",e[e.loaded=4]="loaded",e[e.rendered=8]="rendered",e[e.domComplete=10]="domComplete",e[e.visuallyReady=11]="visuallyReady",e[e.mediaContentReady=15]="mediaContentReady",e[e.aboveTheFoldVisuallyReady=16]="aboveTheFoldVisuallyReady",e[e.belowTheFoldTransitionStart=0]="belowTheFoldTransitionStart",e[e.hydrationComplete=1]="hydrationComplete",e[e.pageVisuallyReady=2]="pageVisuallyReady"}(r||(r={}));const a=new Map([[o.D.loaded,r.loaded],[o.D.rendered,r.rendered],[o.D.domComplete,r.domComplete],[o.D.visuallyReady,r.visuallyReady],[o.D.mediaContentReady,r.mediaContentReady]])},51602:function(e,t,n){"use strict";var i;n.d(t,{D:function(){return i}}),function(e){e[e.notStarted=1]="notStarted",e[e.loadDeferred=2]="loadDeferred",e[e.resolvedForLoad=3]="resolvedForLoad",e[e.loaded=4]="loaded",e[e.initialized=5]="initialized",e[e.renderDeferred=6]="renderDeferred",e[e.resolvedForRender=7]="resolvedForRender",e[e.rendered=8]="rendered",e[e.domComplete=10]="domComplete",e[e.visuallyReady=11]="visuallyReady",e[e.error=12]="error",e[e.startLoading=14]="startLoading",e[e.mediaContentReady=15]="mediaContentReady"}(i||(i={}))},48278:function(e,t,n){"use strict";var i;n.d(t,{B:function(){return i}}),function(e){e.AccountLinkPromoENTP="accountLinkPromoENTP",e.BinaryReactionPromotion="binaryReactionPromotion",e.BinaryReactionControl="binaryReactionControl",e.BingIntlUpsellPromotion="bingIntlUpsellPromotion",e.ChinaLanguageMismatch="chinaLanguageMismatch",e.bingChatDallePromotion="bingChatDallePromotion",e.FollowingFeedPromotion="followingFeedPromotion",e.PersonalizeManageText="personalizeManageText",e.PersonalizeManageImage="personalizeManageImage",e.GamingFeedPromotion="gamingFeedPromotion",e.LayoutPromotion="layoutPromotion",e.LocationAccuracyRevIP="locationAccuracyRevIP",e.MarketLanguage="marketLanguage",e.multiLocationsCarouselV2="multiLocationsCarouselV2",e.PersonalizeFeedControl="personalizeFeedControl",e.PersonalizeFeedPromotion="personalizeFeedPromotion",e.recommendedSitesPromotionNewLine="recommendedSitesPromotionNewLine",e.recommendedSitesPromotionOff="recommendedSitesPromotionOff",e.RecommendedSitesSelection="recommendedSitesSelection",e.TopQuestionsPromotion="topQuestionsPromotion",e.informationalSwitchOffer="informationalSwitchOffer",e.informationalSwitchCompletion="informationalSwitchCompletion",e.informationalKeepCompletion="informationalKeepCompletion",e.OfficeCoachmarkO365Tab="o365tab2_psl",e.OfficeCoachmarkO365Layout="OfficeCoachmarkO365Layout",e.WeatherPromotion="weatherPromotion",e.SplitScreen="splitScreen",e.OfficeCoachmarkWorkFeedTab="OfficeCoachmarkWorkFeedTab",e.EdgeFeedBelowTheFoldCoachmark="EdgeFeedBelowTheFoldCoachmark",e.TopSitesCloseByWpo="topSitesCloseByWpo",e.stickyPeekOnLoadAutoScroll="OnLoadAutoScrollPrompt",e.stickyPeekOnLoad="OptInStickPromptLoad",e.SignInUpsellPromotionSignIn="signInUpsellPromotionSignIn",e.SignInUpsellPromotionToJoin="signInUpsellPromotionToJoin",e.SignInUpsellPromotionJoined="SignInUpsellPromotionJoined",e.SignInUpsellPromotionClaimed="signInUpsellPromotionClaimed",e.PinProng1Flyout="pinProng1Flyout",e.NewYearThemeStore="newYearThemeStore",e.NewLayoutReviewCoachmark="newLayoutReview",e.LockScreenLocationCoachmark="lockScreenLocationCoachmark",e.LockScreenPersonalizeCoachmark="lockScreenPersonalize",e.OptInFeedLayout="optInFeedLayout",e.prong1RotationSettingsButton="prong1RotationSettingsButton",e.Prong1SettingsButtonDialog="prong1SettingsButtonDialog",e.prong1ShuffleButton="prong1ShuffleButton",e.RefreshAnimationCoarchmarkKey="prong1RefreshButton",e.prong2ProfileMigration="prong2ProfileMigration",e.prong2PersonalizedButton="prong2PersonalizedButton",e.prong2PlayPivotButton="prong2PlayPivotButton",e.NurturingPlacementManagerTestKey="nurturingPlacementManagerTestKey",e.actionTrayComment="actionTrayComment",e.actionTrayCommentControl="actionTrayCommentControl",e.actionTrayCommentFirst="actionTrayCommentFirst",e.actionTrayCommentFirstControl="actionTrayCommentFirstControl",e.consumptionTopicTag="consumptionTopicTag"}(i||(i={}))},12912:function(e,t,n){"use strict";n.d(t,{$0:function(){return O},og:function(){return R},Qw:function(){return F}});var i=n(98150);class r extends i.r{getPlacementRules(){return[...super.getPlacementRules(),...this._platformData.placementRules??[]]}get id(){return this._platformData.id}get placementSource(){return"Internal"}get group(){return this._platformData.group}}var o=n(94409),a=n(32002),s=n(60030);class c extends s.L{get IsValid(){return!!this._contentData&&super.IsValid}get _contentData(){return this._platformData.contentModel}get title(){return this._contentData.title}get description(){return this._contentData.description}get contentImage(){return this._contentData.contentImage}get logoImage(){return this._contentData.logoImage}get disclaimerContent(){return this._contentData.disclaimerContent}get engageContentAction(){if(this._contentData.engageContentAction)return{...this._contentData.engageContentAction,actionDelegate:async()=>{var e,t;this.interactionEvent.dispatchEvent({type:"Engaged",ts:Date.now(),followUpPlacementPromise:null===(e=this._contentData.engageContentAction)||void 0===e||null===(t=e.actionDelegate)||void 0===t?void 0:t.call(e)})}}}get dismissContentAction(){if(this._contentData.dismissContentAction||this._contentData.engageContentAction)return{label:this._platformData.defaultDismissLabel,ariaLabel:this._platformData.defaultDismissAriaLabel,...this._contentData.dismissContentAction,actionDelegate:async()=>{var e,t;this.interactionEvent.dispatchEvent({type:"Dismissed",ts:Date.now(),followUpPlacementPromise:null===(e=this._contentData.dismissContentAction)||void 0===e||null===(t=e.actionDelegate)||void 0===t?void 0:t.call(e)})}}}}var d=n(94608);class l extends d.v{get contentType(){return o.J.CallToChoice}get IsValid(){return!!this.title&&!!this.description}}class u extends l{get IsValid(){return!!this._contentData&&super.IsValid&&this.validateOptionValues()}get _contentData(){return this._platformData.contentModel}get title(){return this._contentData.title}get description(){return this._contentData.description}get contentImage(){return this._contentData.contentImage}get logoImage(){return this._contentData.logoImage}get currentValue(){return this._contentData.currentValue}get choiceOptions(){return this._contentData.choiceOptions||[]}get dismissContentAction(){if(this._contentData.dismissContentAction)return{label:this._platformData.defaultDismissLabel,ariaLabel:this._platformData.defaultDismissAriaLabel,...this._contentData.dismissContentAction,actionDelegate:async()=>{var e,t;this.interactionEvent.dispatchEvent({type:"Dismissed",ts:Date.now(),followUpPlacementPromise:null===(e=this._contentData.dismissContentAction)||void 0===e||null===(t=e.actionDelegate)||void 0===t?void 0:t.call(e)})}}}get engageContentAction(){if(this._contentData.engageContentAction)return{...this._contentData.engageContentAction,actionDelegate:async e=>{var t,n;this.interactionEvent.dispatchEvent({type:"Engaged",ts:Date.now(),followUpPlacementPromise:null===(t=this._contentData.engageContentAction)||void 0===t||null===(n=t.actionDelegate)||void 0===n?void 0:n.call(t,e)})}}}validateOptionValues(){const e=new Set;for(const t of this.choiceOptions){if(!t.value)return!1;if(e.has(t.value))return!1;e.add(t.value)}return!0}}var p=n(26488);class h extends p.r0{get IsValid(){return!!this._surfaceData&&super.IsValid}get _surfaceData(){return this._platformData.surfaceModel}get position(){return this._surfaceData.position}get size(){return this._surfaceData.size}get enableGradientBorderBottom(){return this._surfaceData.enableGradientBorderBottom}get dismissAfterSeconds(){return this._surfaceData.dismissAfterSeconds||120}get displaySurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(e=(t=super.displaySurfaceAction).actionDelegate)||void 0===e||e.call(t),null===(n=this._surfaceData.displaySurfaceAction)||void 0===n||null===(i=n.actionDelegate)||void 0===i||i.call(n)}}}get hideSurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(e=super.hideSurfaceAction)||void 0===e||null===(t=e.actionDelegate)||void 0===t||t.call(e),null===(n=this._surfaceData.hideSurfaceAction)||void 0===n||null===(i=n.actionDelegate)||void 0===i||i.call(n)}}}get closeSurfaceAction(){var e;return{ariaLabel:null===(e=this._platformData)||void 0===e?void 0:e.defaultCloseAriaLabel,...this._surfaceData.closeSurfaceAction,actionDelegate:()=>{var e,t,n,i;null===(e=super.closeSurfaceAction)||void 0===e||null===(t=e.actionDelegate)||void 0===t||t.call(e),null===(n=this._surfaceData.closeSurfaceAction)||void 0===n||null===(i=n.actionDelegate)||void 0===i||i.call(n)}}}}var g=n(8366);class m extends g.C{get surfaceType(){return"ContextualFeedbackCardLevel"}}class f extends m{get IsValid(){return!!this._surfaceData}get _surfaceData(){return this._platformData.surfaceModel}get dismissAfterSeconds(){return this._surfaceData.dismissAfterSeconds}get displaySurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(e=(t=super.displaySurfaceAction).actionDelegate)||void 0===e||e.call(t),null===(n=this._surfaceData.displaySurfaceAction)||void 0===n||null===(i=n.actionDelegate)||void 0===i||i.call(n)}}}get hideSurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(e=super.hideSurfaceAction)||void 0===e||null===(t=e.actionDelegate)||void 0===t||t.call(e),null===(n=this._surfaceData.hideSurfaceAction)||void 0===n||null===(i=n.actionDelegate)||void 0===i||i.call(n)}}}}class v extends g.C{get surfaceType(){return"ContextualFeedback"}}class y extends v{get IsValid(){return!!this._surfaceData}get _surfaceData(){return this._platformData.surfaceModel}get dismissAfterSeconds(){return this._surfaceData.dismissAfterSeconds}get displaySurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(e=(t=super.displaySurfaceAction).actionDelegate)||void 0===e||e.call(t),null===(n=this._surfaceData.displaySurfaceAction)||void 0===n||null===(i=n.actionDelegate)||void 0===i||i.call(n)}}}get hideSurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(e=super.hideSurfaceAction)||void 0===e||null===(t=e.actionDelegate)||void 0===t||t.call(e),null===(n=this._surfaceData.hideSurfaceAction)||void 0===n||null===(i=n.actionDelegate)||void 0===i||i.call(n)}}}}var S=n(33881);class C extends S.F3{get IsValid(){return!!this._surfaceData&&super.IsValid}get _surfaceData(){return this._platformData.surfaceModel}get transitionEffect(){return this._surfaceData.transitionEffect}get position(){return this._surfaceData.position}get dismissAfterSeconds(){return this._surfaceData.dismissAfterSeconds||120}get bannerType(){return this._surfaceData.bannerType}get displaySurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(e=(t=super.displaySurfaceAction).actionDelegate)||void 0===e||e.call(t),null===(n=this._surfaceData.displaySurfaceAction)||void 0===n||null===(i=n.actionDelegate)||void 0===i||i.call(n)}}}get hideSurfaceAction(){return{actionDelegate:()=>{var e,t,n,i;null===(e=super.hideSurfaceAction)||void 0===e||null===(t=e.actionDelegate)||void 0===t||t.call(e),null===(n=this._surfaceData.hideSurfaceAction)||void 0===n||null===(i=n.actionDelegate)||void 0===i||i.call(n)}}}get closeSurfaceAction(){return{...this._surfaceData.closeSurfaceAction,actionDelegate:()=>{var e,t,n,i;null===(e=super.closeSurfaceAction)||void 0===e||null===(t=e.actionDelegate)||void 0===t||t.call(e),null===(n=this._surfaceData.closeSurfaceAction)||void 0===n||null===(i=n.actionDelegate)||void 0===i||i.call(n)}}}}var w,b=n(92100);function T(){const e=(t="nurturingMockPlacement",n=window.location.search,b.c.getQueryParameterByName(t,n)||b.c.getQueryParameterByName(t.toLowerCase(),n));var t,n;return e?e.split(",").map((e=>e.trim())):[]}!function(e){e.InternalCoachmark="internal-coachmark",e.InternalHorizontalBanner="internal-horizontal-banner",e.InternalContextualFeedback="internal-contextual-feedback",e.WalktroughCoachmark="walktrough-coachmark",e.FloatingCoachmark="floating-coachmark"}(w||(w={}));var k=n(84515),P=n(21789);function A(){return{id:"feedFreCoachmark",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:p.dm.Large,position:{coachmarkAnchor:k._.myFeed,anchoringPosition:p.RC.Above,hasPointer:!0,pointerPosition:p.Jt.Opposite}},contentModel:{contentType:o.J.CallToAction,title:"Discover your Feed Experience",description:"Get more out of your feed experience through this walk-thru.",contentImage:{url:`${(0,P.Yq)().StaticsUrl}latest/nurturing/rewards/signin-upsell-signin.png`,altText:"Feed Image"},engageContentAction:{label:"Get Started"},dismissContentAction:{label:"Maybe Later"}}}}const I={[w.InternalCoachmark]:A,[w.InternalHorizontalBanner]:()=>({id:"nurturingPlacementManagerTestKey",placementSource:"Internal",group:"Functional",surfaceModel:{surfaceType:"HorizontalBanner",position:"Top",displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}}},contentModel:{title:"Take Action",description:"Learn about promotion trough descriptions.",contentType:o.J.CallToAction,contentImage:{url:"https://www.bing.com/th?id=OADD2.10239253524416_1IRFPKC9YUHNF27KA&pid=21.2&c=16&roil=0&roit=0&roir=1&roib=1&w=300&h=225&dynsize=1",altText:"Image Alt Text"},engageContentAction:{label:"Engage",actionDelegate:()=>{}},dismissContentAction:{label:"Not Now",actionDelegate:()=>{}},disclaimerContent:{text:"Disclaimer text should be defined here and need to be informative.",links:[{linkText:"Term",linkUrl:"https://microsoft.com"},{linkText:"Privacy",linkUrl:"https://microsoft.com"}]}}}),[w.InternalContextualFeedback]:()=>({id:"nurturingPlacementManagerTestKey",placementSource:"Internal",group:"Functional",surfaceModel:{surfaceType:"ContextualFeedback",displaySurfaceAction:{actionDelegate:()=>{}},hideSurfaceAction:{actionDelegate:()=>{}}},contentModel:{title:"Do you like this feed?",description:"Description should be defined here and need to be informative.",contentType:o.J.CallToChoice,contentImage:{url:"https://www.bing.com/th?id=OADD2.10239253524416_1IRFPKC9YUHNF27KA&pid=21.2&c=16&roil=0&roit=0&roir=1&roib=1&w=300&h=225&dynsize=1",altText:"Image Alt Text"},choiceOptions:[{label:"Yes",actionDelegate:()=>{}},{label:"No",actionDelegate:()=>{}},{label:"Not sure",actionDelegate:()=>{}}],engageContentAction:{label:"Engage",actionDelegate:()=>{}},dismissContentAction:{label:"Not Now",actionDelegate:()=>{}},disclaimerContent:{text:"Disclaimer text should be defined here and need to be informative.",links:[{linkText:"Term",linkUrl:"https://google.com"},{linkText:"Privacy",linkUrl:"https://google.com"}]}}}),[w.WalktroughCoachmark]:()=>{const e=A(),t={id:"personalizeFreCoachmark",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:p.dm.Large,position:{coachmarkAnchor:k._.myInterests,anchoringPosition:p.RC.Above,hasPointer:!0,pointerPosition:p.Jt.Opposite}},contentModel:{contentType:o.J.CallToAction,title:"Personalize your feed",description:"This is personalization settings, where you can personalize your feed.",contentImage:{url:`${(0,P.Yq)().StaticsUrl}nurturing/rewards/signin-upsell-signin.png`,altText:"Personalization Image"},engageContentAction:{label:"Next"}}},n={...t,contentModel:{...t.contentModel,engageContentAction:{...t.contentModel.engageContentAction}}};return{...e,contentModel:{...e.contentModel,engageContentAction:{...e.contentModel.engageContentAction,actionDelegate:async()=>(await new Promise((function(e){setTimeout(e,1e4)})),n)}}}},[w.FloatingCoachmark]:function(){return{id:"floatingCoachMark",group:"Functional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:p.dm.Medium,position:p.pY.BottomEnd},contentModel:{contentType:o.J.CallToAction,title:"Discover your Feed Experience",description:"Get more out of your feed experience through this walk-thru.",contentImage:{url:`${(0,P.Yq)().StaticsUrl}latest/nurturing/rewards/signin-upsell-signin.png`,altText:"Feed Image"},engageContentAction:{label:"Get Started"},dismissContentAction:{label:"Maybe Later"}}}}};var E=n(88826),M=n(7476);const x={Coachmark:e=>new h(e),HorizontalBanner:e=>new C(e),ContextualFeedback:e=>new y(e),ContextualFeedbackCardLevel:e=>new f(e)},L={[o.J.CallToAction]:e=>new c(e),[o.J.CallToChoice]:e=>new u(e)};class R extends a.Dz{constructor(e={}){super(),this._providerStaticContext=e,this.showMockPlacements()}createPlacement(e){const t=x[e.surfaceModel.surfaceType],n=L[e.contentModel.contentType];if(!t||!n)return;let i;const o={...this._providerStaticContext.localizedStrings};try{i=new r({...e,...o},t,n)}catch(t){return void(0,E.H)(M.ejn,"Internal data is not valid or missing.",void 0,e)}return i.interactionEvent.dispatchDecorator=e=>{var t;const n=e.followUpPlacementPromise?null===(t=e.followUpPlacementPromise)||void 0===t?void 0:t.then((e=>{if(e)return this.createPlacement(e)})):void 0;return{...e,followUpPlacementPromise:n}},i}sendInternalPlacement(e,t=[]){const n=this.createPlacement({...e,placementRules:t});n&&this.providePlacement(n)}showMockPlacements(){T().forEach((e=>{const t=I[e];t&&this.sendInternalPlacement(t())}))}}let D;const F=e=>{D=e},O=()=>D},98150:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var i=n(76187),r=n(37575);class o{get surfaceModel(){return(0,i.p)((()=>{const e=this._surfaceTemplateMapper(this._platformData);return e.interactionEvent.addEventListener(this.interactionEvent.dispatchEvent.bind(this.interactionEvent)),e}))()}get contentModel(){return(0,i.p)((()=>{const e=this._contentTemplateMapper(this._platformData);return e.interactionEvent.addEventListener(this.interactionEvent.dispatchEvent.bind(this.interactionEvent)),e}))()}get IsValid(){return!!this.id&&this.surfaceModel.IsValid&&this.contentModel.IsValid}constructor(e,t,n){if(this._platformData=e,this._surfaceTemplateMapper=t,this._contentTemplateMapper=n,this.interactionEvent=new r.z,!e)throw new Error("Platform data is required for PlacementModel")}getPlacementRules(){return[]}}},37575:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});class i{constructor(){this._eventListeners=new Set}addEventListener(e){this._eventListeners.add(e)}removeEventListener(e){this._eventListeners.delete(e)}dispatchEvent(e){this._eventListeners.forEach((t=>this.dispatchDecorator?t(this.dispatchDecorator(e)):t(e)))}}},94608:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var i=n(37575);class r{constructor(e){if(this._platformData=e,this.interactionEvent=new i.z,!e)throw new Error("Platform data is required for ContentTemplateModel")}}},60030:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var i=n(94608),r=n(94409);class o extends i.v{get contentType(){return r.J.CallToAction}get IsValid(){return!!this.title&&!!this.description}}},94409:function(e,t,n){"use strict";var i;n.d(t,{J:function(){return i}}),function(e){e.CallToAction="CallToAction",e.CallToChoice="CallToChoice"}(i||(i={}))},78617:function(e,t,n){"use strict";n.d(t,{Un:function(){return b},E0:function(){return S},c0:function(){return w}});var i,r,o,a=n(32802),s=n(76871),c=n(92100);function d(e,t){return c.c.getQueryParameterByName(e,t)||c.c.getQueryParameterByName(e.toLowerCase(),t)}!function(e){e.IrisCoachmark="iris-coachmark",e.IrisHorizontalBanner="iris-horizontal-banner",e.AmplifyCoachmark="amplify-coachmark",e.AmplifyHorizontalBanner="amplify-horizontal-banner"}(i||(i={})),function(e){e.LocalStore="local-store",e.PersistentStore="persistent-store"}(r||(r={})),function(e){e.Individual="individual",e.Group="group"}(o||(o={}));var l=n(64726),u=n(88826),p=n(7476);class h{constructor(){this._placementsSurfaceMap={}}addPlacements(e){e&&e.length&&e.forEach((e=>{const t=e.surfaceModel.surfaceType,n=this._placementsSurfaceMap[t];n?n.push(e):this._placementsSurfaceMap[t]=[e]}))}getPlacementsBySurface(e){const{surfaceType:t,supportedContentTypes:n}=e,i=this._placementsSurfaceMap[t];if(i&&i.length)return i.filter((e=>n.includes(e.contentModel.contentType)))}}var g=n(45870);class m{addSurface(e,t){e&&t&&(this.addSurfaceToRegistry(e,t),this._expectedSurfaces.length&&(this._expectedSurfaces=this._expectedSurfaces.filter((t=>t!==e.surfaceType)),this._expectedSurfaces.length)||this._surfacesRegisteredCallback([e]))}getSurfaceCallbackForPlacement(e){const t=e.surfaceModel.surfaceType,n=this._surfaceRegistry[t];if(!n)return;return n[e.contentModel.contentType]}constructor(e,t=[]){this._surfacesRegisteredCallback=e,this._expectedSurfaces=t,this._surfaceRegistry={}}addSurfaceToRegistry(e,t){const{surfaceType:n,supportedContentTypes:i}=e;i.forEach((e=>{const i=this._surfaceRegistry[n];i?i[e]=t:this._surfaceRegistry[n]={[e]:t}}))}}var f=n(23549),v=n(43356);const y={Default:a.p.NurturingPromotions,Promotional:a.p.NurturingPromotions,Functional:a.p.NurturingFunctional,FeedLayout:a.p.FeedLayoutPromotions,Feature:a.p.NurturingPromotions};class S{getInteractions(){return this._interactionsTracker.getPlacementsInteractions()}registerSurface(e,t){const{surfaceType:n,supportedContentTypes:i}=e||{};n&&i.length&&t?this._surfaceRegistry.addSurface(e,t):(0,u.H)(p.gY$,"Surface Type, Supported Content Types or Surface Callback are not provided.")}constructor(e,t,n,i){this._placementProviders=e,this._interactionsTracker=t,this._rules=n,this._extensionContext=i,this._placementRegistry=new h,this._surfaceRegistry=new m(this.onSurfacesRegistered.bind(this),null==i?void 0:i.expectedSurfaces),this.initializeProviders().then((()=>{Promise.all([(0,l.eC)(),(0,v.F_)()]).then((()=>{var e;return null===(e=(0,s.HD)())||void 0===e?void 0:e.startProcessing()}))}))}async initializeProviders(){this._placementProviders.filter((e=>null==e?void 0:e.subscribeForPlacementStream)).forEach((e=>e.subscribeForPlacementStream((e=>this.onPlacementsReceived([e])))));const e=this._placementProviders.filter((e=>null==e?void 0:e.getAvailablePlacements)).map((e=>e.getAvailablePlacements())),t=(await Promise.all(e)).flat();this.onPlacementsReceived(t)}onPlacementsReceived(e){if(null==e||!e.length)return;e.forEach((e=>{e.interactionEvent.addEventListener((t=>{var n,i;null===(n=this._extensionContext)||void 0===n||null===(i=n.onPlacementInteraction)||void 0===i||i.call(n,e,t),this._interactionsTracker.logPlacementInteraction(e.id,t)})),e.interactionEvent.dispatchEvent({type:"Served",ts:Date.now()})})),this._placementRegistry.addPlacements(e);const t=e.filter((e=>!!this._surfaceRegistry.getSurfaceCallbackForPlacement(e)));t.length&&this.enqueuePlacementsForProcessing(t)}onSurfacesRegistered(e){const t=e.flatMap((e=>this._placementRegistry.getPlacementsBySurface(e)||[]));t.length&&this.enqueuePlacementsForProcessing(t)}enqueuePlacementsForProcessing(e){var t;const n=e.map((e=>{const t=this._surfaceRegistry.getSurfaceCallbackForPlacement(e);if(t)return{id:e.id,evaluator:async()=>(await(0,l.hR)(),await this.evaluatePlacement(e)),display:async()=>await this.sendPlacementToSurface(e,t),priorityGroup:y[e.group]}})).filter((e=>!!e));null===(t=(0,s.HD)())||void 0===t||t.enqueuePlacements(n)}async evaluatePlacement(e){const t=function(){const e=d("ignoreNurturingPlacementRules",window.location.search);return e?e.split(",").map((e=>e.trim())):[]}(),n=await this._interactionsTracker.getPlacementsInteractions(),i=Object.keys(n).map((e=>({placementId:e,interactionsCount:n[e].length})));if(f.M0.addOrUpdateTmplProperty("nf_cache_interactions",i.map((({placementId:e,interactionsCount:t})=>`${e}_${t}`)).join(",")),!t.includes(o.Individual))for(const t of e.getPlacementRules()){if(!await t(e,n))return!1}if(!t.includes(o.Group)){const t=this._rules[e.group]||[];for(const i of t){if(!await i(e,n))return!1}}const r=function(){const e=d("filterNurturingPlacements",window.location.search);return e?e.split(",").map((e=>e.trim())):[]}();return!(("1"===d("vptest",window.location.search)||null!=r&&r.length)&&!r.includes(e.id))}async sendPlacementToSurface(e,t){const n=new g.o;let i,r;e.interactionEvent.addEventListener((async e=>{"Hidden"!==e.type&&(r=e.type),e.followUpPlacementPromise&&(i=e.followUpPlacementPromise),"Hidden"===e.type&&(await i,n.set(r||"Viewed"))})),f.M0.addOrUpdateTmplProperty(`nf_ssfc_${e.surfaceModel.surfaceType}`,"1"),t(e);const o=e.surfaceModel.dismissAfterSeconds?1e3*e.surfaceModel.dismissAfterSeconds:0,s=o?await Promise.race([n.getResultAsync(),new Promise((e=>setTimeout((()=>e("Viewed")),o)))]):await n.getResultAsync(),c=await i,d=c&&this._surfaceRegistry.getSurfaceCallbackForPlacement(c);if(c&&d)return await this.sendPlacementToSurface(c,d);switch(s){case"Engaged":return a.Y.Engaged;case"Dismissed":case"Closed":return a.Y.Dismissed;default:return a.Y.Ignored}}}let C;const w=e=>{C=e},b=()=>C},32002:function(e,t,n){"use strict";n.d(t,{Dz:function(){return r},iU:function(){return i}});class i{}class r extends i{constructor(){super(...arguments),this._placementsQueue=[]}providePlacement(e){this._callback?this._callback(e):this._placementsQueue.push(e)}subscribeForPlacementStream(e){this._callback||(this._callback=e,this._placementsQueue.forEach((t=>e(t))))}}},8366:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});var i=n(37575);class r{get displaySurfaceAction(){return{actionDelegate:()=>{this.interactionEvent.dispatchEvent({type:"Viewed",ts:Date.now()})}}}get hideSurfaceAction(){return{actionDelegate:()=>{this.interactionEvent.dispatchEvent({type:"Hidden",ts:Date.now()})}}}get closeSurfaceAction(){return{actionDelegate:()=>{this.interactionEvent.dispatchEvent({type:"Closed",ts:Date.now()})}}}constructor(e){if(this._platformData=e,this.interactionEvent=new i.z,!e)throw new Error("Platform data is required for PlacementSurfaceModel")}}},26488:function(e,t,n){"use strict";n.d(t,{Jt:function(){return a},RC:function(){return i},dm:function(){return o},jO:function(){return s},pY:function(){return r},r0:function(){return d}});var i,r,o,a,s,c=n(8366);!function(e){e.Above="Above",e.Below="Below",e.Left="Left",e.Right="Right"}(i||(i={})),function(e){e.TopStart="TopStart",e.TopEnd="TopEnd",e.BottomStart="BottomStart",e.BottomEnd="BottomEnd"}(r||(r={})),function(e){e.Mini="Mini",e.Small="Small",e.Medium="Medium",e.Large="Large"}(o||(o={})),function(e){e.Adjacent="Adjacent",e.Center="Center",e.Opposite="Opposite"}(a||(a={})),function(e){e.Outside="Outside",e.Target="Target",e.OutsideAndTarget="OutsideAndTarget"}(s||(s={}));class d extends c.C{get IsValid(){return!!this.size}get surfaceType(){return"Coachmark"}}},33881:function(e,t,n){"use strict";n.d(t,{F3:function(){return s}});var i,r,o,a=n(8366);!function(e){e.Promotional="Promotional",e.LegalCompliance="LegalCompliance"}(i||(i={})),function(e){e.SlideUp="SlideUp",e.FadeIn="FadeIn",e.SlideRight="SlideRight"}(r||(r={})),function(e){e.Top="Top",e.Bottom="Bottom"}(o||(o={}));class s extends a.C{get IsValid(){return!!this.position}get surfaceType(){return"HorizontalBanner"}}},23234:function(e,t,n){"use strict";function i(e,t,n){if(!e||!t)throw new Error("PlacementInteractionLimit: Invalid parameters.");return(i,r)=>{var o;if(!i)return!1;let a=(null==r?void 0:r[i.id])||[];const{relatedPlacementIds:s,repeat:c}=n||{};if(null!=s&&s.length){const e=s.filter((e=>e!==i.id)).flatMap((e=>(null==r?void 0:r[e])||[]));a=[...a,...e]}const d=null===(o=a)||void 0===o?void 0:o.filter((t=>t.type===e));if(!d.length)return!0;if(!c)return d.length<t;const{lookbackIntervalMS:l,repeatsNumber:u}=c;return!(d.length>=u*t)&&a.filter((e=>e.ts>Date.now()-l)).length<t}}n.d(t,{l:function(){return i}})},76040:function(e,t,n){"use strict";function i(e,t){if(!e||!t)throw new Error("PlacementInteractionsThrottle: Invalid parameters.");return(n,i)=>{if(!n)return!1;if(!i)return!0;let r;return Object.values(i).flat().forEach((t=>{(null==t?void 0:t.type)===e&&null!=t&&t.ts&&(!r||r.ts<t.ts)&&(r=t)})),!(r&&Date.now()-r.ts<=t)}}function r(e,t,n){return(i,r)=>{if(!i)return!1;let o=(null==r?void 0:r[i.id])||[];const{relatedPlacementIds:a}=n||{};if(null!=a&&a.length){const e=a.filter((e=>e!==i.id)).flatMap((e=>(null==r?void 0:r[e])||[]));o=[...o,...e]}if(!o.length)return!0;let s;return o.forEach((t=>{(null==t?void 0:t.type)===e&&null!=t&&t.ts&&(!s||s.ts<t.ts)&&(s=t)})),!s||Date.now()-s.ts>t}}n.d(t,{H:function(){return r},S:function(){return i}})},42809:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});const i=864e5},47467:function(e,t,n){"use strict";n.d(t,{f:function(){return c}});var i=n(48204),r=n(54297),o=n(14116),a=n(85205),s=n(67044);function c(e,t){const n=(0,i.$z)();let c;if(e&&n&&(c=e[n]),!t){const e=(0,s.K0)(a.z.AdminPortalData),n=e&&e.getCurrentState();t=n?n.settings:(0,r.$o)().getObject(o.Ai)}if(!t)return c;const{adminSelectedNavId:d,isOfficeContentEnabled:l,isShowCompanyAndIndustry:u}=t;let p;return e&&d&&(p=e[d]),l&&u?c||p||0:l?1:0}},67422:function(e,t,n){"use strict";n.d(t,{$N:function(){return m},$S:function(){return l},AD:function(){return u},De:function(){return T},EB:function(){return c},Gl:function(){return f},H2:function(){return E},IC:function(){return w},JS:function(){return i},Kf:function(){return a},SO:function(){return h},X:function(){return p},Zh:function(){return C},iL:function(){return s},ic:function(){return v},iu:function(){return o},jf:function(){return M},mL:function(){return b},no:function(){return r},o2:function(){return I},r8:function(){return y},sx:function(){return g},uB:function(){return A},v4:function(){return S},xY:function(){return d},yL:function(){return k},ye:function(){return P}});var i,r;!function(e){e.Excel="Excel",e.Forms="Forms",e.OneNote="OneNote",e.Pdf="PdfViewer",e.Portfolio="Portfolio",e.PowerPoint="PowerPoint",e.Project="Project",e.PowerBI="PowerBI",e.Sway="Sway",e.Visio="Visio",e.Word="Word",e.Video="Video",e.NewsArticle="NewsArticle"}(i||(i={})),function(e){e.DocumentsTableMenu="documents-table-menu",e.DocumentsTableHover="documents-table-hover",e.DocumentCardMenu="document-card-menu"}(r||(r={}));const o="edgeEnterpriseNtp",a="ContextMenuItem",s="ContextMenu",c="Copy file",d="-CopyFile",l="DocumentListItem",u="Download file",p="-Download",h="FileLocation",g="Open file location",m="-OpenFileLocation",f="Open file",v="Open in browser",y="-OpenInBrowser",S="Open in desktop",C="-OpenInDesktop",w="Remove file",b="-RemoveFromList",T="More options",k="ShareButton",P="Share file",A="-Share";var I,E,M;!function(e){e.Graph="https://graph.microsoft.com",e.Loki="394866fc-eedb-4f01-8536-3ff84b16be2a",e.MRU="https://api.office.net",e.Sharepoint="https://microsoft.sharepoint.com",e.Substrate="https://substrate.office.com",e.Yammer="https://www.yammer.com"}(I||(I={})),function(e){e.Activity="Activity",e.EnterpriseOneService="EnterpriseOneService",e.EnterpriseWaffle="EnterpriseWaffle",e.Graph="Graph",e.Loki="Loki",e.MRU="MRU",e.Share="Share",e.Sharepoint="Sharepoint",e.SharepointSites="SharepointSites",e.Substrate="Substrate",e.Yammer="Yammer"}(E||(E={})),function(e){e.Activities="Activities",e.AdminPortal="AdminPortal",e.Calendar="Calendar",e.CompanyNewsCard="CompanyNewsCard",e.Discover="Discover",e.DiscoverSharepoint="DiscoverSharepoint",e.EnterpriseWaffle="EnterpriseWaffle",e.EdgeWorth="EdgeWorth",e.EdgeWorthHide="EdgeWorthHide",e.Feeds="Feeds",e.Images="Images",e.IndustryNewsCard="IndustryNewsCard",e.MRU="MRU",e.MRUUpdate="MRUUpdate",e.OneDriveLink="OneDriveLink",e.Pinned="Pinned",e.Recommended="Recommended",e.RemoveRecommended="RemoveRecommended",e.ProfilePhoto="ProfilePhoto",e.RecentFiles="RecentFiles",e.SharedLink="SharedLink",e.SharedWithMe="SharedWithMe",e.SharepointNewsCard="SharepointNewsCard",e.SharepointNewsCardImages="SharepointNewsCardImages",e.SharePointSites="SharePointSites",e.Shell="Shell",e.StreamPreviewImages="StreamPreviewImages",e.TaskCreate="TaskCreate",e.TaskDelete="TaskDelete",e.Tasks="Tasks",e.TaskUpdate="TaskUpdate",e.Topics="Topics"}(M||(M={}))},29458:function(e,t,n){"use strict";n.d(t,{X:function(){return w}});var i=n(32810),r=n(21789),o=n(23357),a=n(13334),s=n(92100),c=n(15165),d=n(44672),l=n(74488),u=n(81110),p=n(83102),h=n(88826),g=n(7476),m=n(5674),f=n(37477),v=n(23549),y=n(78672),S=n(91668),C=n(95378);class w{constructor(e){this.treatmentQueryStringParam="Treatment",this.wpoitemsStringParam=u.hE.wpoitems,this.cardContext=e}async fetch(e={}){const t=await this.getRequestInit(),{ocid:l,flightData:p,treatment:f,apiVersion:S="v1",scenario:w,feedCluster:b,pivotId:T,templateId:k,nextPageUrl:P,isConsumptionFeed:A,contentId:I}=e||{},E=(0,m.Ee)(),M=e&&("shell"===e.contextSource||"shellv2"===e.contextSource),x=M&&e.isXfeed;let L=`${S}/news/feed/windows/${k}`;L=M?this.buildShellRequest(e,L):this.buildWinWidgetsRequest(e,L),L=A?"v1/news/feed/pages/viewspage":L;const R=new URLSearchParams((0,y.zp)()).get(u.YU)?new URL(L,u.LJ):(0,c.fU)(L),D=T&&"following"===T.toLowerCase();if(P){const t=new i.h(new URL(P).search);E>0&&t.set(m.i$,E.toString()),r.jG.SendFeedCallActivityIdInHeader||!r.jG.ActivityId||M||t.set("activityId",r.jG.ActivityId),M&&!t.get("scn")&&t.set("scn",o.Ji),D&&e.feedId&&t.get("query")&&(0,h.H)(g.cM_,"Windows Card Provider's following xfeed next page url has query QSP",void 0,{...g.cM_.pb,customMessage:`{ "nextPageUrl": "${P}", "feedID": "${e.feedId}" }`}),R.search=t.toString()}else{const e=[...await this.getCommonParams(l,p)];E>0&&e.push({key:m.i$,value:E.toString()}),e.forEach((e=>e.value&&R.searchParams.set(e.key,e.value))),f&&R.searchParams.set(this.treatmentQueryStringParam,f)}if(M){R.searchParams.set("caller","peregrine");const{column:t,wpoNote:n}=e||{};D&&R.searchParams.set("wposchema","byregion"),t&&R.searchParams.set("column",t),n&&R.searchParams.set("wpoNote",n);const i=location.search||"",r=u.hE.wpoitems;if(new RegExp(`[?&]${r}=`).test(i)){const e=new URLSearchParams(i),t=e&&e.get(r);t&&R.searchParams.set(r,t)}}if(A&&(R.searchParams.set("ContentId",I),R.searchParams.set(u.hE.skip,"3")),(e&&"winWidgets"===e.contextSource||x)&&e.feedId){const t=D&&!e.feedId.startsWith("Y_")?u.hE.providerId:u.hE.interestIds;R.searchParams.set(t,e.feedId)}D&&(a.Al.CurrentFlightSet.has("prg-idfc")?R.searchParams.set("idfc","true"):R.searchParams.set(u.hE.includeFollowingFilters,"true"),e.feedId&&(R.searchParams.delete("query"),a.Al.CurrentFlightSet.has("prg-pr2fol-time")&&(R.searchParams.set(u.hE.ocid,u.i9),R.searchParams.set(u.hE.apiKey,u.S1)))),b&&(R.searchParams.set("query","UserFre"),R.searchParams.set("entityids",b),R.searchParams.set("DisableTypeSerialization","true"),R.searchParams.set("wrapodata","false")),e&&e.count&&R.searchParams.set("$top",`${e.count}`);const F=R.searchParams.get(r.jG.OneServiceContentMarketQspKey);F&&R.searchParams.set("osLocale",F),r.jG.SendFeedCallActivityIdInHeader&&R.searchParams.delete("activityId");const O=s.c.getParamsWithItems(location.search);if(O){const t=O.find((e=>"idxExperienceTypeOverride"===e.key)),n=O.find((e=>"idxContentTypeOverride"===e.key)),i=O.find((e=>"idxTreatmentOverride"===e.key)),r=O.find((e=>"idxWpoKnobidsOverride"===e.key)),o=O.find((e=>"idxWpoEventRuleOverride"===e.key));if(t&&R.searchParams.set("Experience",t.value),n){const t=e.contentType?e.contentType:"article,video,slideshow",i=[...new Set(`${t},${n.value}`.split(","))];R.searchParams.set("contentType",i.join(","))}i&&R.searchParams.set(this.treatmentQueryStringParam,i.value),r&&R.searchParams.set(this.wpoitemsStringParam,`knobids:${r.value}`),o&&R.searchParams.set(this.wpoitemsStringParam,`byPassEventRule:${o.value}`)}w&&R.searchParams.set("scenario",w),R.searchParams.sort();try{const i=await(0,d.w)((async()=>await fetch(decodeURIComponent(R.href),t)),"WindowsCardProvider.fetch"),{status:a,statusText:s}=i||{},c=D&&204===a&&!R.searchParams.has("skip");if(!(i&&i.ok||D))return void v.M0.sendAppErrorEvent({...g.mfB,message:i?"OneService returned error response":"OneService response was null",pb:{...g.mfB.pb,fetchNetworkResponse:{statusCode:a,statusText:s,activityId:r.jG.ActivityId,requestUrl:R.href,requestHeaders:JSON.stringify(t&&t.headers),xfeed:x?`feedID: ${e.feedId} is not valid with respect to locale and market`:"not XFeed"},responseHeaders:this.getResponseHeaders(i)}});if(204===i.status&&(M&&v.M0.sendAppErrorEvent({...g.U7j,message:"OneService returned empty content 204 response",pb:{...g.U7j.pb,fetchNetworkResponse:{statusCode:i.status,statusText:i.statusText,activityId:r.jG.ActivityId,requestUrl:R.href,requestHeaders:JSON.stringify(t&&t.headers)},responseHeaders:this.getResponseHeaders(i)}}),!c))return{cards:[],netStatus:204};let l,p,h;if(i.headers){if(p=i.headers.get("X-Statics-Fallback"),p){(0,m.e5)(p);const e={...g.kiM.pb,activityId:r.jG.ActivityId,responseHeaders:this.getResponseHeaders(i),requestUrl:R.href};x&&(e.isXFeed=1),v.M0.sendAppErrorEvent({...g.kiM,pb:e,message:"Static fallback content received"})}const e=i.headers.get(o.rD.traceId);l=v.M0.addOrUpdateIdxId(e,!P)}const f=i&&(!i.ok||204===a||404===a);if(D&&(!i||f))if(M){h=await n.e("weather-card-wc-ntp").then(n.t.bind(n,21158,19));R.pathname.includes(u.n9)&&window.dispatchEvent(new CustomEvent("showFallbackFeed"))}else h=await n.e("weather-card-wc-ntp").then(n.t.bind(n,81096,19));else h=await i.json();if(b&&h){return{layoutTemplate:e&&e.count&&24===e.count?"ShellTwoColumn-14HalfCard-HalfTopstory":"ShellTwoColumn-Four1U",cards:h.subCards}}return"winWidgets"!==e.contextSource&&!x||!h.sections||e.useRawJson?{...h,traceIdIndex:l,isStatic:p}:h.sections[0]}catch(e){const n=(0,C.Z)(t,"headers.Authorization");v.M0.sendAppErrorEvent({...g.IVG,message:"Error while fetching OneService response",pb:{...g.IVG.pb,customMessage:`Error: ${e}`,fetchNetworkResponse:{activityId:r.jG.ActivityId,requestUrl:R.href,requestHeaders:JSON.stringify(n&&n.headers)}}})}}async getRequestInit(e={method:"GET"}){return e.credentials="include",e.headers=await l.$D.getOneServiceFeedCallHeaders(),e}async getCommonParams(e,t){return await(0,S.XJ)()===p.Hy.SignedIn?l.$D.getOneServiceParamsWithAuth(r.jG.UserId,e,!1,t):l.$D.getOneServiceParamsWithoutAuth(r.jG.UserId,e,!1,t)}getResponseHeaders(e){return e&&e.headers?JSON.stringify({"Akamai-Request-ID":e.headers.get("Akamai-Request-ID"),"Akamai-Server-IP":e.headers.get("Akamai-Server-IP"),"X-MSEdge-Ref":e.headers.get("X-MSEdge-Ref")}):null}buildShellRequest(e,t){const{pivotId:n,isXfeed:i}=e||{};let{nextPageUrl:r}=e||{};if(i)if("following"===n){const n=e.feedId?u.n9:u.Pg;t=`${u.hZ}${n}`,r&&r.includes(u.H0)&&(r="")}else e.feedId&&(t=`${u.hZ}${u.H0}`);return t}buildWinWidgetsRequest(e,t){const{feedCluster:n,pivotId:i,isXfeed:r}=e||{};let{nextPageUrl:o}=e||{};if(r)if("Following"===i)if(e.feedId)t=`${u.hZ}${u.Qs}`,v.M0.addOrUpdateTmplProperty("filtered-feed","1"),o&&(o.includes(u.kX)||o.includes(u.Td)||!o.includes(e.feedId))&&(o="");else{var a;const n="filteredChannels"===e.feedName||e.feedName===f.PL.DynamicFilteredChannel?u.Td:u.kX;t=`${u.hZ}${n}`,null!==(a=o)&&void 0!==a&&a.includes(u.Qs)&&(o="")}else e.feedId&&(t=n?"news/feed":`${u.hZ}${u.H0}`);return t}}},5674:function(e,t,n){"use strict";n.d(t,{Dz:function(){return S},Ee:function(){return f},N:function(){return y},T1:function(){return g},e5:function(){return C},i$:function(){return c},j9:function(){return m},s6:function(){return v}});var i=n(48503),r=n(21789),o=n(71778),a=n(19464);const s=10/1440,c="cbypass";let d="",l=!1,u=0;const p=10;let h=parseInt((0,a.ej)(c))||0;async function g(){h=Date.now(),(0,a.sq)(c,h.toString(),s,r.jG.HostPage.topDomain,"/"),await i.U.purgeCacheAsync(i.R.river),(0,o.mS)({id:"updatemyfeed",payload:h})}async function m(){h=Date.now(),(0,a.sq)(c,h.toString(),s,r.jG.HostPage.topDomain,"/"),await i.U.purgeCacheAsync(i.R.river)}function f(){return h}function v(e){h>0&&e.searchParams.set(c,h.toString())}function y(){return d}function S(e,t){if(!e)return;if(t)return d=e,void(u=1);if(u>=p)return;const n=d?`${d},${e}`:e;u+=1,d=n}function C(e){!0!==e&&"true"!==e||(l=!0)}},65128:function(e,t,n){"use strict";n.d(t,{fK:function(){return m},rg:function(){return v},tW:function(){return f}});var i=n(88826),r=n(7476),o=n(13334),a=n(29597);const s="OneWebServiceLatency",c="//assets.msn",d="//assets2.msn",l="//api.msn",u="prg-1s-bkupdmnt",p="prg-1s-bkupdmnt1",h="prg-1s-bkupdmnt2",g="prg-1s-bkupdmnt3";function m(){const e=o.Al.CurrentFlightSet;return!(!e||!(e.has(u)||e.has(p)||e.has(h)||e.has(g)))}function f(){const e=o.Al.CurrentFlightSet;return!(!e||!e.has(u)&&!e.has(p))}async function v(e,t={},n,u=!1){let p;try{if(p=await(0,a.Sm)(e,n,t),p&&p.ok)return p}catch(t){(0,i.OO)(t,r.Qsh,r.Qsh.message,`Failed URL: ${e}`)}return p&&p.headers&&p.headers.get(s)||u?p:(e=o.Al.CurrentFlightSet&&o.Al.CurrentFlightSet.has(g)?e.replace(c,l).replace("/service/","/"):e.replace(c,d),(0,a.Sm)(e,n,t))}},74488:function(e,t,n){"use strict";n.d(t,{$D:function(){return D}});var i=n(83102),r=n(21789),o=n(76716),a=n(13334),s=n(23357),c=n(65505),d=n(92095),l=n(54297);var u=n(22140),p=n(32810),h=n(76187),g=n(35281),m=n(96694),f=n(91668),v=n(42429),y=n(31558),S=n(54911),C=n(90158),w=n(31490),b=n(25534),T=n(62846),k=n(47647);function P(e){if(!(0,C.wq)())return;const t=(0,k._4)();null!=t&&t.isProd||(0,b.gR)({appId:T.Au,type:"Debug",name:"HP_WEBVIEW_SERVER_LOG",data:{message:e}})}var A=n(23549),I=n(56921),E=n(63011),M=n(79022),x=n(34479);const L="prg-telemetry-trace",R="traceparent";var D;!function(e){function t(e=null,t,n=!1,i=null,s=!1,c=(0,g.VQ)(),d=!1){const l=(0,r.Yq)(),u=[{key:"apikey",value:l.OneServiceApiKey},{key:"activityId",value:l.ActivityId},{key:"ocid",value:n?b(l.TrackInfo,t):t},{key:l.OneServiceContentMarketQspKey,value:l.CurrentMarket},{key:"it",value:(0,o.E)()}],p=(0,a.nP)().CurrentFlights;if(l.SendUserIdInHeader||!e||null!=p&&p.includes("1s-r-user-qsp")||u.push({key:"user",value:e}),c&&u.push({key:g.rZ,value:g.AN}),a.Al.IsBlendedEnterprise&&u.push({key:"audienceMode",value:"enterprise"}),l.ShouldUseFdheadQsp){let e=p;if(i){e=e?`${e},${i}`:i;const t="prg-bngimg-t";-1===e.indexOf(t)&&(e+=","+t),!0===s&&(e=i)}u.push({key:"fdhead",value:e})}if(null!=p&&p.includes(L)){const e=I.U.getTraceInstance(),t="00-"+e.getTraceId(!0)+"-"+e.getSpanId(!0)+"-00";u.push({key:"traceparent",value:t})}if(!d){const e=l.AuthCookieName;e&&u.push({key:"scn",value:e.toUpperCase()})}return u}async function n(e=(0,g.VQ)(),t,n,o){const u={};let p;const h=(0,r.Yq)()||{};if((0,a.nP)().CurrentFlights&&(0,a.nP)().CurrentFlights.includes("prg-tracingheader")){const e=I.U.getTraceInstance(),t=e.getTraceId(!0),n=e.getSpanId(!0);u[s.Yu.traceParent]="00-"+t+"-"+n+"-00"}if("windowsShell"===h.AppType||"windowsShellV2"===h.AppType)h.IsWinAADUser&&(p=await T(),Object.assign(u,(0,c.tx)(p)));else if("winWidgets"===h.AppType){if((0,y.N)()&&"function"==typeof window.createWindowsWidget1SAuthHeaders){const e=await window.createWindowsWidget1SAuthHeaders();Object.assign(u,e)}}else{if(h.WidgetAttributes){p=(await(0,m.yb)()).tokenValue}if(("shopping"==h.AppType||"views"==h.AppType)&&(0,C.wq)()){if((await(0,f.YX)()).accountType==i.Qm.MSA){Object.assign(u,await(0,w.d)());for(const e in u)0===e.indexOf("X-MSEdge")&&delete u[e];return u.SiteName=`api.msn.${h.topDomain}`,P(u),u}}if(!p)if(e&&!await h.isGccModUser){var b;const e={id:d.d3,friendlyName:d.Ak},t=await(null===(b=(0,E.Kf)())||void 0===b?void 0:b.getAuthData(e));p=null==t?void 0:t.authToken}else if("gaming"===n&&o&&(0,y.N)()){const e=(0,l.$o)().getObject("xboxXTokenId");e&&e.notAfter&&new Date(e.notAfter)>new Date&&(u[s.Yu.xboxToken]=JSON.stringify(e))}else if((null==t||!t.skipDualAuthHeader)&&(0,c.P8)()&&!(0,c.TJ)()){const e=(0,c.hk)()?await(0,v.IY)():(0,c.aS)();p=null==e?void 0:e.accessToken}Object.assign(u,(0,c.me)(p))}if(h.SendUserIdInHeader&&Object.assign(u,function(){var e;const t={},n=document.head.hasAttribute("data-client-settings")?document.head:window.document.getElementsByClassName("peregrine-widget-settings")[0],i=n&&n.getAttribute("data-client-settings"),r=i?null===(e=JSON.parse(i))||void 0===e?void 0:e.fd_muid:void 0;return r&&(t.MUID=`m-${r}`),t}()),!(0,y.N)()){var k;const{oneServiceHeaders:e,cookie:t,referer:n,clientData:i,userAgent:r}=(0,S.s)();e&&Object.assign(u,e),i&&(u["X-Client-Data"]=i),t&&(u.Cookie=t),n&&(u.Referer=n),r&&(u["User-Agent"]=r);const o=null===(k=(0,a.nP)().ClientSettings)||void 0===k||null===(k=k.detection)||void 0===k?void 0:k.ip;o&&(u["X-FD-ClientIP"]=o,u["X-MSEdge-ClientIP"]=o)}return u}function b(e,t){return u.b.isNonNullObject(e)&&u.b.isNonNullObject(e.sitePage)&&(0,M.Z)(e.sitePage.page_product)&&(0,M.Z)(e.sitePage.page_type)?e.sitePage.page_product+"-"+e.sitePage.page_type+(t?"-"+t:""):t}e.serviceRequestOnComplete=async function(e,t){try{const n=await e();return t(),n}catch(e){throw t(),e}},e.getOneServiceParamsWithoutAuth=t,e.getOneServiceNonDynamicParamsWithoutAuth=function(e,t=!1){const n=(0,r.Yq)(),i=[{key:"apikey",value:n.OneServiceApiKey},{key:"ocid",value:t?b(n.TrackInfo,e):e},{key:n.OneServiceContentMarketQspKey,value:n.CurrentMarket}];return(0,g.VQ)()&&i.push({key:g.rZ,value:g.AN}),i},e.getOneServiceParamsWithAuth=function(e=null,n,i=!1,o=null,a=!1){return(0,r.Yq)(),[...t(e,n,i,o,a)]},e.getOneServiceHeaders=n,e.getOneServiceFeedCallHeaders=async function(e,t,i){const o=await n(e,null,t,i),a=(0,r.Yq)(),c=a.ActivityId;return a.SendFeedCallActivityIdInHeader&&c&&(o[s.Yu.activityId]=c),o},e.getLocationParams=function(e,t){const n=(0,r.Yq)(),i=e||n.Latitude,o=t||n.Longitude;return i&&o?{key:"location",value:`${i}|${o}`}:null},e.getOneServiceOCID=b,e.getBaseRequestData=async function(t,n){return{headers:await e.getOneServiceHeaders((0,g.VQ)(),n),method:t}},e.getCommonParams=function(e,t=!1){return(0,a.nP)().UserIsSignedIn?this.getOneServiceParamsWithAuth((0,r.Yq)().UserId,e,t):this.getOneServiceParamsWithoutAuth((0,r.Yq)().UserId,e,t)},e.getCommonParams2=function(e,t=!1,n=!1){return(0,f.hC)()?this.getOneServiceParamsWithAuth((0,r.Yq)().UserId,e,t,n):this.getOneServiceParamsWithoutAuth((0,r.Yq)().UserId,e,t,n)},e.urlContainsOcidParam=function(e){if(!e)return!1;const t=e.split("?");if(t.length<2)return!1;const n=t[1].split("#")[0];return!!new p.h(n).get("ocid")},e.removeOcidFromUrl=function(e){if(!e)return e;const t=e.split("?");if(t.length<2)return e;const n=t[1].split("#")[0],i=new p.h(n);if(i.get("ocid")){i.delete("ocid");let t=e.replace(n,i.toString());return"?"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t}return e},e.removeOcidFromRiverCardProviderResponse=function(t){t&&t.cardMetadata&&t.cardMetadata.length&&t.cardMetadata.forEach((t=>{t.cardContent&&t.cardContent.destinationUrl?t.cardContent.destinationUrl=e.removeOcidFromUrl(t.cardContent.destinationUrl):t.subItems&&t.subItems.length&&t.subItems.forEach((t=>{t.cardContent&&t.cardContent.destinationUrl&&(t.cardContent.destinationUrl=e.removeOcidFromUrl(t.cardContent.destinationUrl))})),t.metadata&&t.metadata.relatedCards&&t.metadata.relatedCards.forEach((t=>{t.url=e.removeOcidFromUrl(t.url)}))}))},e.removeOcidFromWindowsOneServiceResponse=function(t){t&&t.cards&&t.cards.forEach((t=>{t.subCards.forEach((t=>{t.url?t.url=e.removeOcidFromUrl(t.url):t.subCards&&t.subCards.forEach((t=>{t.url&&(t.url=e.removeOcidFromUrl(t.url))}))}))}))};const T=(0,h.p)((async()=>{if(!((0,y.N)()&&window&&window.ShellFeedsApp&&window.ShellFeedsApp.getQueryHeadersAsync))return;const e=await Promise.race([window.ShellFeedsApp.getQueryHeadersAsync(),(0,x.Kb)(3e3).then((()=>null))]),t=e&&e[s.Yu.entAuthorization]||null;return t&&setTimeout((()=>T.cache.clear()),36e5),t}));e.getUniFeatTunHeader=async function(){const e={},t=(0,r.Yq)()||{};(0,y.N)()&&"edgeChromium"===t.AppType&&(e.EdgeInterestTier1Ids=(0,l.$o)().getItem("userTopics"));const n=A.M0.getPageMetadata(),i=null==n?void 0:n.combinedContract;var o,a,s,c,d,u,p;return i&&(e.LoginState=null===(o=i.user)||void 0===o?void 0:o.loginState,e.Product=null===(a=i.page)||void 0===a?void 0:a.product,e.PageName=null===(s=i.page)||void 0===s?void 0:s.name,e.PageType=null===(c=i.page)||void 0===c?void 0:c.type,e.OCID=null===(d=i.page)||void 0===d?void 0:d.ocid,e.ViewPortWidth=null===(u=i.browser)||void 0===u?void 0:u.width,e.ViewPortHeight=null===(p=i.browser)||void 0===p?void 0:p.height),function(e){let t="";return Object.keys(e).forEach((n=>{t+=`${n}:${Array.isArray(e[n])?e[n].join(","):e[n]};`})),t}(e)},e._reset=function(){T.cache.clear()},e.addTelemetryTracingQueryParam=function(e){if(a.Al&&a.Al.CurrentFlightSet&&a.Al.CurrentFlightSet.has(L)){const t=I.U.getTraceInstance(),n="00-"+t.getTraceId(!0)+"-"+t.getSpanId(!0)+"-00";e.searchParams.set(R,n)}}}(D||(D={}))},44672:function(e,t,n){"use strict";n.d(t,{O:function(){return C},w:function(){return w}});var i,r=n(29597),o=n(7476),a=n(9947),s=n(23549),c=n(31558);class d{constructor(e,t,n,i,r,o,s){if(!e)throw new Error("loggingService is required for ExponentialBackoffRetry.");const l=new a.K(e);this.logInvalidParams(l,t,n,i,r,s),this.loggingService=e,this.maxRetries=t||d.defaultMaxRetries,this.baseRetryDelayInMs=n||d.defaultBaseRetryDelayInMs,this.maxRetryDelayInMs=i||d.maxAllowedRetryDelayInMs,this.factor=r||d.defaultFactor,this.minOffsetInMs=o||d.defaultMinOffsetInMs,this.maxOffsetInMs=s||d.defaultMaxOffsetInMs,(0,c.N)()&&this.loggingService.infoCallback((()=>"ExponentialBackoffRetry has been configured."),null,{maxRetries:t,minTimeout:n,maxTimeout:i,factor:r})}async executeRequest(e,t,n,i,r){return new Promise((async(o,a)=>{await this.tryRequest(e,o,a,0,t,n,i,r)}))}logInvalidParams(e,t,n,i,r,o){t&&(t<1||t>d.maxAllowedRetries)&&e.fatal(`maxRetries should be at least 1 and less than ${d.maxAllowedRetries}.`),n&&n<d.defaultBaseRetryDelayInMs&&e.fatal("baseRetryDelay has to be a positive value greater than or equal to 100."),n&&o&&n<=o&&e.fatal("baseRetryDelay must not be smaller than the maximum delay offset."),i&&(i<=0||i>d.maxAllowedRetryDelayInMs)&&e.fatal(`maxRetryDelay has to be a positive value less than ${d.maxAllowedRetryDelayInMs}.`),r&&r<=0&&e.fatal("factor has to be a positive value.")}async tryRequest(e,t,n,i,r,a,d,l){const u=()=>(0,c.N)()&&i<this.maxRetries&&!l;try{const n=d||1e4;let r=null;r=d&&d<0?await e(i):await this.timeoutServiceRequest(n,e(i)),t(r)}catch(c){if(u()){const o=3,s=parseFloat((Math.random()*(this.minOffsetInMs-this.maxOffsetInMs)+this.maxOffsetInMs).toFixed(o)),l=.5,u=Math.random()<l?-1:1,p=Math.min(this.baseRetryDelayInMs*Math.pow(this.factor,i),this.maxRetryDelayInMs)+s*u;this.loggingService.warnCallback((()=>`Retrying the request in ${p} milliseconds.`),a,{error:c,currentRetry:i+1,requestInfo:r}),setTimeout((()=>this.tryRequest(e,t,n,i+1,r,a,d)),p)}else{if(s.M0&&s.M0.sendAppErrorEvent){const e=("string"==typeof c?c:c.message)||"";s.M0.sendAppErrorEvent({...o.CKi,pb:{...o.CKi.pb,retryAttemptsMade:i,serviceFailed:a&&a.Message,maxRetries:this.maxRetries,customMessage:`${this.getActivityName(a)}. Error details: '${e}'. All retry attempts failed.`}},!1)}this.loggingService.errorCallback((()=>u()?`ExponentialBackoffRetry has exceeded maximum retries ${this.maxRetries}`:"Request has failed."),a,{error:c,currentRetry:i,requestInfo:r}),n(c)}}}async timeoutServiceRequest(e,t){return new Promise((async(n,i)=>{const r=setTimeout((()=>i(new Error(`Service Request Timed out after ${e} milliseconds!`))),e);try{n(await t),clearTimeout(r)}catch(e){i(e),clearTimeout(r)}}))}getActivityName(e){return`Activity name: '${e&&e.Message||"None"}'`}}(i=d).defaultBaseRetryDelayInMs=100,i.defaultFactor=2,i.defaultMaxOffsetInMs=25,i.defaultMaxRetries=5,i.defaultMinOffsetInMs=1,i.maxAllowedRetries=10,i.maxAllowedRetryDelayInMs=2e3;var l=n(65128),u=n(13010),p=n(1970),h=n(42147),g=n(84147),m=n(74488),f=n(76733);let v,y;const S=3;function C(e,t={},n,i=!1){return(0,l.fK)()?(0,l.rg)(e,t,n,i):(0,r.Sm)(e,n,t)}async function w(e,t,n,i){const r=b().activityLoggingService.createActivity(t);return i=i||(0,l.tW)(),await m.$D.serviceRequestOnComplete((()=>function(){if(y)return y;return y=new d(b().loggingService,S),y}().executeRequest(e,null,r,n,i)),(()=>b().activityLoggingService.endActivity(r)))}function b(){if(v)return v;const e=u.u.getInstance("ExperienceActivityLogger");return(0,c.N)()&&f.k.isDebug()&&e.addAppender(new p.N(g.i.Activity)),v=new h.N(f.k.getLoggingService(),e),v}},15165:function(e,t,n){"use strict";n.d(t,{PH:function(){return u},Ph:function(){return c},fU:function(){return p},qQ:function(){return d}});var i=n(21789),r=n(13334),o=n(76733);let a,s;const c=new URL("","https://api.msn.com/");function d(){const e=(0,i.Yq)();var t;return a||(t=e.ServiceUrlBase,a=new URL("",t),h(a)),a}function l(){const e=(0,i.Yq)();var t;return s||(t=e.FeedServiceUrlBase,s=new URL("",t),h(s)),s}function u(e,t=d()){return new URL(e+(null==t?void 0:t.search),t)}function p(e,t=l()){return new URL(e+(null==t?void 0:t.search),t)}function h(e){let t=!1;"dev"!==e.searchParams.get("env.service")&&(0,r.nP)().UserIsSignedIn&&(t=!0),o.k.log("u-si: "+(0,i.Yq)().UserId),o.k.log("a-si: "+t),o.k.log("ss-si: "+(0,r.nP)().UserIsSignedIn)}},32802:function(e,t,n){"use strict";var i,r;n.d(t,{Y:function(){return r},p:function(){return i}}),function(e){e.FeedLayoutPromotions="FeedLayoutPromotions",e.FreOverlay="FreOverlay",e.NurturingFunctional="NurturingFunctional",e.NurturingPromotions="NurturingPromotions"}(i||(i={})),function(e){e.Engaged="Engaged",e.Dismissed="Dismissed",e.Ignored="Ignored"}(r||(r={}))},76871:function(e,t,n){"use strict";n.d(t,{HD:function(){return v}});var i=n(45870);class r{constructor(e){this.compareFn=e,this._itemsArray=[]}enqueue(e){var t;e&&e.length&&(this._itemsArray.push(...e),this._itemsArray.sort(this.compareFn),null===(t=this._settablePromise)||void 0===t||t.set())}async dequeue(){this._itemsArray.length||(this._settablePromise=new i.o,await this._settablePromise.getResultAsync());const e=this._itemsArray.shift();if(!e)throw new Error("Queue is empty but attempted to return an item.");return e}}var o=n(67213),a=n(28496),s=n(32802);const c=["msNurturingMetadataTemplate","msNurturingOnboardNTPToCE"],d={[s.p.FreOverlay]:"ntp_profile_scope_tab_functional_notification",[s.p.FeedLayoutPromotions]:"ntp_profile_scope_tab_functional_notification",[s.p.NurturingFunctional]:"ntp_profile_scope_tab_functional_notification",[s.p.NurturingPromotions]:"ntp_profile_scope_tab_functional_notification"},l={[s.Y.Engaged]:"PrimaryCTA_Clicked",[s.Y.Dismissed]:"DismissedCTA_Clicked",[s.Y.Ignored]:"Notification_Ignored"};async function u(e,t){a.MN.updateCTA(e,l[t])}async function p(e){const t=d[e.priorityGroup],n=await a.MN.getToken(e.id,t);return!(null==n||!n.success)}const h={[s.p.FreOverlay]:1e3,[s.p.FeedLayoutPromotions]:100,[s.p.NurturingFunctional]:10,[s.p.NurturingPromotions]:1},g=(e,t)=>h[t.priorityGroup]-h[e.priorityGroup];class m{constructor(e=[],t=g){this._additionalEvaluators=e,this._placementPrioritizationStrategy=t,this._placementProcessingQueue=new r(this._placementPrioritizationStrategy)}enqueuePlacements(e){this._placementProcessingQueue.enqueue(e)}async startProcessing(){const e=await async function(){const{enabled:e,disabled:t}=await(0,o.zx)();return c.every((n=>e.includes(n)||t.includes(n)))}();for(e&&this._additionalEvaluators.push(p);;){const t=await this._placementProcessingQueue.dequeue();if(t.evaluator&&!await t.evaluator(t))continue;if((await Promise.all(this._additionalEvaluators.map((async e=>await e(t))))||[]).some((e=>!e)))continue;const n=await t.display();e&&u(t.id,n)}}}let f;const v=()=>(f||(f=new m),f)},45539:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var i=n(23615);function r(e){const t=window&&window.chrome&&window.chrome.ntpSettingsPrivate;t&&t.logLoadingError&&(0,i.e)().then((()=>{t.logLoadingError(e)}))}},23615:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});const i="visibilitychange";function r(){return"visible"===document.visibilityState?Promise.resolve():new Promise((e=>{document.addEventListener(i,(()=>{"visible"===document.visibilityState&&e()}))}))}},30023:function(e,t,n){"use strict";n.d(t,{C7:function(){return g},FK:function(){return v},Qf:function(){return p},U4:function(){return m},VX:function(){return r},W1:function(){return o},WM:function(){return a},Y5:function(){return c},Z6:function(){return s},dd:function(){return l},eO:function(){return h},m:function(){return f},pM:function(){return u},pc:function(){return d},v3:function(){return i}});const i="epdu",r="ppreload",o="ppage",a="ppmuid",s="fpr",c="TTPR",d="TTF.SearchBox",l="TTVR",u="TTVR.SearchBox",p="TTVR.BackgroundExecution",h="backgroundpreload",g="prerender",m="TTPV",f="TTVR.E2E",v="ReasonForTTPR"},82486:function(e,t,n){"use strict";n.d(t,{Qc:function(){return H},TR:function(){return V},wY:function(){return q},Bj:function(){return G},lr:function(){return $}});var i=n(10754),r=n(21930),o=n(88826),a=n(7476),s=n(20009),c=n(76733),d=n(19995),l=n(79545),u=n(30023);const p="TTVR.",h="OverlayRemoval",g="TTVR.BackgroundExecution.";var m=n(91735),f=n(54297),v=n(49155),y=n(19464),S=n(23549);let C,w;function b(){const e=(0,f.$o)().removeObject(u.Z6);if(e){c.k.logObjects("pageRevealDelegate:isForceReloadRequested, time: "+new Date(e.time).toTimeString());const t=e.time;if(C=e.data,t>performance.timeOrigin)return!0}return function(){const e=(0,y.jG)()||"";if(w!==e)return C=1,(0,f.$o)().setItem(u.WM,`Previous MUID: ${e}, New MUID: ${w}`),!0;return!1}()}function T(e,t=!1){!function(e){C&&((0,f.$o)().setItem(u.VX,C+""),(0,f.$o)().setItem(u.W1,Math.round(e-performance.timeOrigin).toString()))}(e),(0,v.Z)({newUrl:k(t),invalidatePageCache:!1})}function k(e=!1){const t=location.href;return t?t.replace(/prerender(=\d)?/,"invalidaterender=1")+(e?"&stale=1":""):""}var P=n(26732),A=n(64726),I=n(45870),E=n(31558),M=n(13334),x=n(43356);let L,R,D,F,O,B=!1;const N=new I.o,_=new I.o,U=(new I.o,new I.o),W=new I.o;function H(e,t,n,d,v){if(!M.Al.IsPrerender)return(0,E.N)()&&((0,i.Ou)()[u.C7]=0),void function(){const e=(0,f.$o)().removeItem(u.VX),t=(0,f.$o)().removeItem(u.W1),n=(0,f.$o)().removeItem(u.WM);e&&S.M0.addOrUpdateCustomProperty(u.VX,e),t&&S.M0.addOrUpdateCustomProperty(u.W1,t),n&&(0,o.H)(a.smA,"",void 0,{...a.smA.pb,customMessage:n},!1)}();"visible"!==document.visibilityState?(S.M0.addOrUpdateTmplProperty("isprerender","1"),D=e,F=t,(0,A.Hv)(),w=(0,y.jG)()||"",j()?(0,r.su)("PrerenderStart",performance.now()):function(e){L=document.createElement("div");const t=document.body,n=L.style;e?n.backgroundColor="var(--fill-color)":n.background="transparent";n.position="fixed",n.bottom=n.left=n.right=n.top="0",n.zIndex="2147483647",t?(t.appendChild(L),c.k.logObjects("pageRevealDelegate:addOverlay: Added overlay")):c.k.logObjects("pageRevealDelegate:addOverlay: Document body is not available, failed to add overlay.");(0,r.su)("PrerenderStart",performance.now())}(v),O=()=>async function(e){document.removeEventListener("visibilitychange",O);const t=function(){if(!M.Al||!M.Al.CurrentFlightSet)return-1;if(M.Al.CurrentFlightSet.has("prg-prerend12h"))return 43200;if(M.Al.CurrentFlightSet.has("prg-prerend6h"))return 21600;if(M.Al.CurrentFlightSet.has("prg-prerend3h"))return 10800;if(M.Al.CurrentFlightSet.has("prg-prerend1h"))return 3600;if(M.Al.CurrentFlightSet.has("prg-prerend30m"))return 1800;if(M.Al.CurrentFlightSet.has("prg-prerend10m"))return 600;if(M.Al.CurrentFlightSet.has("prg-prerend1d"))return 86400;if(M.Al.CurrentFlightSet.has("prg-prerend2d"))return 172800;return-1}();if(t>0){Math.round((0,m.Hk)()-performance.timeOrigin)/1e3>t&&(0,m.yV)(11)}M.Al.CurrentFlightSet.has("preinvttvr")&&function(){const e=(0,i.Ou)();if(e.TTVR)return!1;const t=e.IncompleteMarkers;return t&&(t.includes("TTVR.GridViewFeed")||t.includes("TTVR.WaterfallViewFeed"))&&!e.FirstSectionRenderStart}()&&(0,m.yV)(13);if(b())return S.M0.addOrUpdateTmplProperty("ReloadPrerenderPage","1"),t>0&&(document.body.style.display="none"),void T((0,m.Hk)());(function(){var e;if(null===(e=window)||void 0===e||null===(e=e.chrome)||void 0===e||null===(e=e.embeddedSearch)||void 0===e||null===(e=e.newTabPage)||void 0===e||!e.getTabTimings)return;const t=(0,i.Ou)();window.chrome.embeddedSearch.newTabPage.getTabTimings(((e,n)=>{e&&n&&void 0!==n.tabStartToNavigationStart&&(t.tabStartToNavigationStart=Math.round(n.tabStartToNavigationStart))}))})(),performance.mark(s.DB);const n=performance.now();(0,i.Ou)()[s.DB]=Math.round(n),await(0,x.F_)(),B=!0;const c=j();c||(R=setTimeout((()=>{z()}),1e3));d=(0,m.Hk)(),void function(e){S.M0.addOrUpdateTmplProperty("isbackgroundpreload","1"),S.M0.addOrUpdateCustomProperty(u.W1,Math.round(e-performance.timeOrigin).toString()),(0,r.su)("PrerenderRevealed",e);const t=(0,r.O0)("PrerenderStart");(0,r.su)("PrerenderAge",e-t)}(d),await(0,P.XX)(n,D,F),e&&await new Promise((t=>setTimeout(t,e)));var d;L&&!c&&(z(),await _.getResultAsync());c&&(0,r.EV)(h);if(function(){const e=window._pageTimings;if(!e)return;const t=performance.getEntriesByType("visibility-state").find((e=>"visible"===e.name));e[u.U4]=t&&Math.round(t.startTime)||Math.round(performance.now())}(),function(e){const t=window._pageTimings;if(!t)return;const n=(0,r.Sc)(h);t[u.C7]=1,t[u.eO]=1;let s=n,c=h,d=-1;e.forEach((e=>{const i=t[p+e];let o=(0,r.Sc)(e);o=Math.max(o,n),t[g+e]=i,t[p+e]=o||-1,e===l.x.commonSearchBoxEdgeNext&&(d=o),o>s&&(s=o,c=e)}));const m=t[u.dd];let f=!1;if(isNaN(m)||null===m){let n=t.IncompleteMarkers;if(!n){const e=(0,r.bO)(r.oN.Primary);n=null==e?void 0:e.join(",")}const s=(0,r.Gb)(),c=s.marker||"None",d=s.value||"None",l=t[p+"WaterfallViewFeed"]||0;let u="";l&&(u=`TTVR.Waterfall: ${l}.`);let h="";const g=t.visualDependenciesConfigs||[];g.length&&(h=`DependenciesConfigs: ${g.join("|")}.`),(0,o.H)(a.lFV,"TTVR missing during prerender.",void 0,{...a.lFV.pb,customMessage:`Incomplete markers: ${n}. visuallyReadyDependencies: ${e.join("|")}. Last Marked: ${c} ${d}. ${h} ${u}`,pageTimings:(0,i.Ou)()}),f=!0}if((isNaN(s)||null===s)&&((0,o.H)(a.HYO,"TTPR missing during prerender."),f=!0),f)return;const v=Math.min(s,m);if(t[u.Y5]=t[u.dd]=v,t[u.FK]=c,t[u.Qf]=m,t.tabStartToNavigationStart&&t[u.U4]){const e=t.tabStartToNavigationStart+t[u.U4];t[u.m]=t[u.dd]+e}const y=t[u.pM],S=t[u.pc],C=t[`${u.Y5}.SearchBox`]=Math.min(d,y);isNaN(y)||null===y?(0,o.H)(a.Cab,"TTVR.SearchBox missing during prerender."):t[u.pM]=Math.min(C,y),isNaN(S)||null===S?(0,o.H)(a.bor,"TTF.SearchBox missing during prerender."):t[u.pc]=Math.min(C,S)}(D),performance.mark(s.O6),performance.measure("StaleRevalidation",s.DB,s.O6),M.Al.CurrentFlightSet.has("prg-fsprfp")&&PerformanceObserver.supportedEntryTypes.includes("paint")){if(performance.getEntriesByType("paint").find((({name:e})=>"first-contentful-paint"===e)))N.set(),(0,A.mB)();else{const e=new PerformanceObserver((t=>{for(const n of t.getEntries())"first-contentful-paint"===n.name&&(N.set(),(0,A.mB)(),e.disconnect())}));e.observe({entryTypes:["paint"]})}}else N.set(),(0,A.mB)();(0,P.Gy)(),S.M0.runContentVisibilityCallbacks()}(v),document.addEventListener("visibilitychange",O),function(e,t){e&&window.setTimeout((()=>{"visible"!==document.visibilityState&&(0,o.H)(a.GI7,"",void 0,{...a.GI7.pb,customMessage:"Prerender content staled"})}),6e4*e);t&&window.setTimeout((()=>{"visible"!==document.visibilityState&&(0,o.H)(a.DxP,"",void 0,{...a.DxP.pb,customMessage:"Prerender sd staled"})}),6e4*t)}(n,d)):N.set()}function $(){return M.Al.IsPrerender?N.getResultAsync():Promise.resolve()}function q(){U.set()}function G(){W.set()}function V(){return M.Al.IsPrerender&&!B}function z(){try{R&&clearTimeout(R),document.body.removeChild(L),c.k.logObjects("pageRevealDelegate:removeOverlay: Removed overlay"),(0,d.c)((()=>{(0,r.EV)(h),_.set()}))}catch(e){}L=null}function j(){var e;return!(null===(e=M.Al.CurrentFlightSet)||void 0===e||!e.has("prg-no-overlay"))}},91735:function(e,t,n){"use strict";n.d(t,{Ge:function(){return a},HQ:function(){return s},Hk:function(){return l},ih:function(){return c},yV:function(){return d}});var i=n(30023),r=n(54297);const o=new Set;function a(e){const t=(0,r.$o)().getObject(i.v3)||{},n=t[e];return!isNaN(n)&&(o.has(e)||o.add(e),delete t[e],(0,r.$o)().setObject(i.v3,t),n>performance.timeOrigin)}function s(e){return o&&o.has(e)}function c(e){const t=(0,r.$o)().getObject(i.v3)||{},n=t[e];isNaN(n)&&(t[e]=l(),(0,r.$o)().setObject(i.v3,t))}function d(e){const t={time:l(),data:e};(0,r.$o)().setObject(i.Z6,t)}function l(){return Math.round(performance.timeOrigin+performance.now())}},26732:function(e,t,n){"use strict";n.d(t,{Gy:function(){return m},MV:function(){return y},XX:function(){return g}});var i=n(21930),r=n(88826),o=n(7476),a=n(45870),s=n(43356),c=n(91735),d=n(19995);let l=[],u=[],p=new Set,h=new a.o;function g(e,t,n){const r=(0,s.S0)().getCurrentState().aboveTheFoldVisuallyReady.endTime,o=new Set;for(const e of l){const{experienceType:n}=e;t.includes(n)&&p.add(n)}0==p.size&&h.set();for(const t of l){const{experienceType:a}=t,s=(0,c.Ge)(a),d=0===t.thresholdMinutes||null!=t.thresholdMinutes&&e-r>6e4*t.thresholdMinutes;n||s||d?(f(t),u.push(t.delayCallback)):((0,i.EV)(a),v(a)),o.add(a)}for(const e of t)o.has(e)||(0,i.EV)(e);return h.getResultAsync()}function m(){for(const e of u)e()}async function f(e){try{await e.criticalCallback(),(0,d.c)((()=>{(0,i.EV)(e.experienceType),v(e.experienceType)}))}catch(t){(0,r.OO)(t,o.NKp,"Exception when running stale revalidate callback","Experience: "+e.experienceType)}}function v(e){p.delete(e)&&0==p.size&&h.set()}function y(e){l.push(e)}},64726:function(e,t,n){"use strict";n.d(t,{Hv:function(){return s},eC:function(){return d},hR:function(){return p},mB:function(){return c}});var i=n(45870);let r,o,a=!1;function s(){a=!0}function c(){a=!1,u()}function d(e){return"visible"!==document.visibilityState||e&&a?(r||(r=new i.o,document.addEventListener("visibilitychange",l)),r.getResultAsync()):Promise.resolve()}function l(){"visible"===document.visibilityState&&u()}function u(){!a&&r&&(r.set(),r=null,document.removeEventListener("visibilitychange",l))}function p(){return o||(o=new Promise((e=>{"visible"===document.visibilityState&&e(),document.addEventListener("visibilitychange",(function t(){"visible"===document.visibilityState&&(e(),document.removeEventListener("visibilitychange",t))}))}))),o}},84237:function(e,t,n){"use strict";n.d(t,{o:function(){return y}});var i=n(30440),r=n(10754),o=n(7476),a=n(69686),s=n(64902),c=n(23549),d=n(82898),l=n(78951),u=n(59997),p=n(92100),h=n(13334),g=n(78125),m=n(58616);function f(){const e=[];let t=document.body,n=0,i=!1;for(;t;){var r,o;if(e.push(`[index:${n};inShadow:${i}]${t.nodeName}`),t.children&&t.children.length)n=t.children.length-1,t=t.children[n],i=!1;else if(null!==(r=t.shadowRoot)&&void 0!==r&&r.children&&(null===(o=t.shadowRoot)||void 0===o?void 0:o.children.length)>0){var a,s;n=(null===(a=t.shadowRoot)||void 0===a?void 0:a.children.length)-1,t=null===(s=t.shadowRoot)||void 0===s?void 0:s.children[n],i=!0}else t=null}return e.join(">")}function v(e){{var t;const e=null===(t=document.querySelector("html"))||void 0===t?void 0:t.style.getPropertyValue("--body-bg-color");if(e)return e}return e?"#242424":"#F7F7F7"}async function y(e,t,n,y,S){let C;i.A.startMark("WC.Render"),C=void 0===n||"boolean"==typeof n?{noPaint:!!n}:n;const w=e.configRef,b=(0,a.ITY)(w.experienceType),T=matchMedia("(prefers-color-scheme:dark)");if(window.isSSREnabled&&!window.isSSRCompleted){var k;if(null===c.M0||void 0===c.M0||c.M0.addOrUpdateTmplProperty("SSRIncomplete","1"),(0,r.Ou)().isSSRAborted="1","vp"===p.c.getQueryParameterByName("reqsrc",location.href))return void document.write("SSR didn't complete successfully, CSR fallback is disabled for VP tests");if(null===c.M0||void 0===c.M0||c.M0.sendAppErrorEvent({...o.O5q,message:"SSR didn't complete successfully, remove the existing design system provider element to avoid broken UI",pb:{...o.O5q.pb,lastElements:f()}}),window.isCSRFallback=!0,null===(k=document.querySelector(t))||void 0===k||k.remove(),window.disableCSRFallback)return Promise.resolve()}const P=document.querySelector(t)||document.createElement(t),A=S??T.matches;P.baseLayerLuminance=A?g.h.DarkMode:g.h.LightMode,P.direction="rtl"===h.Al.MarketDir?u.N.rtl:u.N.ltr,P.setAttribute("fill-color",v(A));for(const e in C)Reflect.set(P,e,Reflect.get(C,e));const I=window.isSSREnabled?(0,m.bE)("WholePageHydration",!0):void 0,E=(0,m.zb)(P,I,y);T.addEventListener("change",(e=>{P.baseLayerLuminance=e.matches?g.h.DarkMode:g.h.LightMode,P.setAttribute("fill-color",v(e.matches))})),P.isConnected||document.body.appendChild(P);const M=new l.D({type:d.c9.Module,name:w.experienceType,content:{}});let x=P.querySelector(b);return x||(x=document.createElement(b)),x.parentTelemetry=M,x.setAttribute("config-instance-src",null==w?void 0:w.instanceSrc),x.setAttribute("instance-id",e.instanceId||""),x.setAttribute("data-t",M.getMetadataTag()),await(0,s.Fg)(e),x.isConnected||P.appendChild(x),i.A.endMark("WC.Render"),E}},9565:function(e,t,n){"use strict";var i;n.d(t,{m:function(){return i}}),function(e){e.small="OneByOne",e.medium="OneByTwo",e.large="OneByThree"}(i||(i={}))},92378:function(e,t,n){"use strict";var i;n.d(t,{f:function(){return i}}),function(e){e.AiCharacter="aicharacterCardEnabled",e.AutosMarketplaceCard="autosmarketplaceCardEnabled",e.BoostCard="boostCardEnabled",e.HoroscopeCard="horoscopeCardEnabled",e.WeatherCard="weatherCardEnabled",e.SportsCard="sportsCardEnabled",e.MoneyCard="moneyCardEnabled",e.FinanceCard="financeCardEnabled",e.OnThisDayCard="onthisdayCardEnabled",e.SavingsCard="savingsCardEnabled",e.ShoppingCard="shoppingCardEnabled",e.ShoppingFashionCarousel="shoppingFashionCardEnabled",e.VideoShoppingCard="videoshoppingCardEnabled",e.ShoppingEventCard="eventSDCardShoppingEnabled",e.TrafficCard="trafficCardEnabled",e.EsportsCard="esportsCardEnabled",e.EsportsStreamsCard="esportsStreamsCardEnabled",e.ElectionsCard="genericelectionCardEnabled",e.LotteryCard="lotteryCardEnabled",e.QnaCard="qnaCardEnabled",e.RecipesCard="recipeCardEnabled",e.PrismFeedCard="prismFeedCardEnabled",e.PrismCarouselCard="prismFeedCarouselCardEnabled",e.TravelCard="travelCardEnabled",e.HealthCard="healthCardEnabled",e.TopStoriesCard="topstoriesCardEnabled",e.TrendingTopics="TrendingTopicsUpsellEnabled",e.LocalGuideCard="localGuideCardEnabled",e.GroceryCard="groceryCardEnabled",e.RewardsCard="rewardsCardEnabled",e.RecommendedSearchesCard="recommendedSearchCardEnabled",e.PersonalizedOffersCard="personalizedoffersCardEnabled",e.PollsCard="pollsCardEnabled",e.MarketPlaceCard="marketplaceCardEnabled",e.QuizCard="quizcardCardEnabled",e.CasualGamesCard="esportsCardEnabled",e.CommuteCard="commuteCardEnabled",e.MobileShoppingCard1="mobileShoppingCard1Enabled",e.MobileShoppingCard2="mobileShoppingCard2Enabled",e.MobileShoppingCard3="mobileShoppingCard3Enabled",e.MobileShoppingCard4="mobileShoppingCard4Enabled",e.MobileShoppingCard5="mobileShoppingCard5Enabled",e.TrendingSearchCard="trendingsearchCardEnabled",e.RealEstateCard="realestateCardEnabled",e.MangaCard="mangaCardEnabled",e.RichCalendarCard="richCalendarCardEnabled",e.DailyGreetingCard="dailyGreetingCardEnabled",e.DonationNpoCard="DonationNpoCardEnabled",e.PrayerTimesCard="prayertimesCardEnabled",e.Crypto="CryptoCard",e.MarketBrief="MarketBriefCard",e.ElectionCard="ElectionCardEnabled",e.EntertainmentPremierCard="entertainmentCardEnabled",e.EntertainmentPremieresCard="entertainmentCardEnabled",e.CommunityCard="CommunityCardEnabled"}(i||(i={}))},45447:function(e,t,n){"use strict";var i;n.d(t,{L:function(){return i}}),function(e){e.Location="Location",e.Weather="Weather",e.Finance="Finance",e.Team="Team",e.League="League",e.Player="Player",e.Traffic="Traffic",e.Widget="Widget",e.TopicFeed="TopicFeed",e.CasualGame="CasualGame"}(i||(i={}))},19779:function(e,t,n){"use strict";n.d(t,{N:function(){return w}});var i=n(76733),r=n(88826),o=n(7476),a=n(83102),s=n(21789),c=n(13334),d=n(92100),l=n(71778),u=n(30376),p=n(74488),h=n(15165),g=n(44672),m=n(45447),f=n(92378),v=n(9565),y=n(23549),S=n(91668);class C{constructor(e){this.fetchImpl=e,this.userUpdateEndpoint="msn/user",this.pdpServiceEndpoint="graph/actions",this.locationsServiceEndPoint="v1/news/users/me/locations",this.userActionServiceEndPoint="news/users/me/actions",this.ocid="pdp-peregrine",this.ocidOverride=!0,this.marketQSPOverride=!1}getCommonParams(e,t){return e?p.$D.getOneServiceParamsWithAuth(t??(0,s.Yq)().UserId,this.ocid,!this.ocidOverride):p.$D.getOneServiceParamsWithoutAuth(t??(0,s.Yq)().UserId,this.ocid,!this.ocidOverride)}async getUserDefaultLocation(e){const t=await this.getRequestInit({method:"GET"}),n=(0,h.PH)(this.locationsServiceEndPoint);let i;[...p.$D.getCommonParams2(this.ocid,!this.ocidOverride),{key:"autodetect",value:e&&`${e}`}].forEach((e=>{e.value&&n.searchParams.set(e.key,e.value)}));try{i=await(0,g.w)((async()=>{const e=await this.fetchImpl(n.href,t);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: getUserDefaultLocation}`;throw new Error(t)}return e}),"getUserDefaultLocation")}catch(e){return i}return i}async addToFavoriteLocation(e,t){const n="Location",i="Follow",r=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:i,targetType:n,definitionName:t,degree:"FavoriteLocation",metaData:e})}),o=(0,h.PH)(this.pdpServiceEndpoint),s=await(0,S.XJ)()===a.Hy.SignedIn;let c;this.getCommonParams(s).forEach((e=>{e.value&&o.searchParams.set(e.key,e.value)}));try{c=await(0,g.w)((async()=>{const e=await this.fetchImpl(o.href,r);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: ${i}, targetType: ${n}`;throw new Error(t)}return e.json()}),"addToFavoriteLocation")}catch(e){return!1}return!0}async removeFavoriteLocation(e,t=!1){return await this.deleteFromPdp(m.L.Location,"definitionName",[e],void 0,void 0,void 0,void 0,void 0,t)}async removeLocation(e,t=!1){return await this.deleteFromPdp(m.L.Location,"definitionName",[e],void 0,void 0,void 0,void 0,void 0,t)}async updatePdpHomeLocation(e,t,n={},i,r=!1){const o=m.L.Location,s="Follow",c=await this.getRequestInit({method:"POST"},n,r);c.body=JSON.stringify({actionType:s,targetType:o,definitionName:t,degree:"DefaultLocation",metaData:e});const d=(0,h.PH)(this.pdpServiceEndpoint),l=await(0,S.XJ)()===a.Hy.SignedIn;return this.getCommonParams(l&&!r,i).forEach((e=>{e.value&&d.searchParams.set(e.key,e.value)})),await(0,g.w)((async()=>{const e=await this.fetchImpl(d.href,c);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: ${s}, targetType: ${o}`;throw new Error(t)}return e}),"setPdpHomeLocation"),this.tryInvalidateBulkFetchedPdpTargetType(o),!0}async updateTrafficMyRoutes(e,t,n,r,o,a,s){const c=n.replace(/[^a-zA-Z0-9\-.,_]/g,""),d=m.L.Traffic,l="Follow",u=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:l,targetType:d,targetId:c,degree:e,definitionName:t,metadata:r,createdDateTime:a})},s),p=await this.getTrafficPdpUrl(null,null,o);try{await(0,g.w)((async()=>{const e=await this.fetchImpl(p.href,u);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: ${l}, targetType: ${d}`;throw new Error(t)}return e.json()}),"updateTrafficMyRoutes");this.tryInvalidateBulkFetchedPdpTargetType(d)}catch(e){return i.k.logError(e.message),!1}return!0}async deleteTrafficMyRoutes(e,t,n){const i=await this.getRequestInit({method:"DELETE"}),r=await this.getTrafficPdpUrl(e,t,n);try{await(0,g.w)((async()=>{const e=await this.fetchImpl(r.href,i);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${m.L.Traffic}`;throw new Error(t)}return e}),"deleteTrafficFromPdp"),this.tryInvalidateBulkFetchedPdpTargetType(m.L.Traffic)}catch(e){return!1}return!0}async getTrafficMyRoutes(e,t){const n=await this.getRequestInit({method:"GET"}),i=await this.getTrafficPdpUrl(e,null,t);try{var r;const e=await(0,g.w)((async()=>{const e=await this.fetchImpl(i.href,n);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${m.L.Traffic}`;throw new Error(t)}return e}),"getTrafficFromPdp");return null===(r=await e.json())||void 0===r?void 0:r.value}catch(e){return null}}async getTrafficPdpUrl(e,t,n,i="Follow",r){const o=(0,h.PH)(this.pdpServiceEndpoint),c=await(0,S.XJ)()===a.Hy.SignedIn,d=(0,s.Yq)().UserId,l=c?p.$D.getOneServiceParamsWithAuth(d,this.ocid,!this.ocidOverride):p.$D.getOneServiceParamsWithoutAuth(d,this.ocid,!this.ocidOverride);if(e||t){const n=`targetType eq '${m.L.Traffic}'`,a=e?`degree eq '${e}'`:"",s=t?`definitionName eq '${t}'`:"",c=r?`targetId eq '${r}'`:"";o.searchParams.set("$filter",`actionType eq '${i}' and (${n})${a?` and (${a})`:""}${s?` and (${s})`:""}${c?` and (${c})`:""}`)}return[...l,...n||[]].forEach((e=>{e.value&&o.searchParams.set(e.key,e.value)})),o}async addToWatchList(e,t=0,n={},i={}){var r;const o=m.L.Finance,d="Follow",l=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:d,targetType:o,targetId:e,metadata:{securityType:t,tickerId:this.generateUUID(),...i}})},n),u=(0,h.PH)(this.pdpServiceEndpoint),f="zh-cn"!==(0,s.Yq)().CurrentMarket,v=await(0,S.XJ)()===a.Hy.SignedIn,y=(null===(r=(0,c.nP)().CurrentFlights)||void 0===r?void 0:r.split(",").filter((e=>e.includes("1s"))).join(","))||"";let C;(v&&f?p.$D.getOneServiceParamsWithAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,y,!0):p.$D.getOneServiceParamsWithoutAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,y,!0)).forEach((e=>{e.value&&u.searchParams.set(e.key,e.value)}));try{C=await(0,g.w)((async()=>{const e=await this.fetchImpl(u.href,l);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: ${d}, targetType: ${o}`;throw new Error(t)}return e.json()}),"addToWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(o)}catch(e){return!1}return!0}async addListToWatchList(e,t={},n={}){var i;const r=m.L.Finance,o="Follow",d=await this.getRequestInit({method:"POST",body:JSON.stringify(e.map((e=>({actionType:o,targetType:r,targetId:e.key,metadata:{securityType:e.value,tickerId:this.generateUUID(),...n}}))))},t),l=(0,h.PH)(this.pdpServiceEndpoint),u="zh-cn"!==(0,s.Yq)().CurrentMarket,f=await(0,S.XJ)()===a.Hy.SignedIn,v=(null===(i=(0,c.nP)().CurrentFlights)||void 0===i?void 0:i.split(",").filter((e=>e.includes("1s"))).join(","))||"";let y;(f&&u?p.$D.getOneServiceParamsWithAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,v,!0):p.$D.getOneServiceParamsWithoutAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,v,!0)).forEach((e=>{e.value&&l.searchParams.set(e.key,e.value)}));try{y=await(0,g.w)((async()=>{const e=await this.fetchImpl(l.href,d);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: ${o}, targetType: ${r}`;throw new Error(t)}return e.json()}),"addToWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(r)}catch(e){return!1}return!0}generateUUID(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}async sortWatchList(e,t={}){var n,i;const r=m.L.Finance,o="Follow",d=(null===(n=(0,c.nP)().CurrentFlights)||void 0===n?void 0:n.split(",").filter((e=>e.includes("1s"))).join(","))||"",l=[{key:"fdhead",value:d}],u=await w.readPdpWithTargetType(m.L.Finance,!0,200,t,!1,l),f=u&&(null===(i=u.value)||void 0===i?void 0:i.filter((e=>e.actionType===o&&e.targetId)));if(!f||f.length<e.length)return!1;const v={};let y=e.length;f.forEach((t=>{let n=e.findIndex((e=>e===t.targetId));n<0&&(n=y,y++),v[t.targetId]=JSON.stringify({actionType:o,targetId:t.targetId,targetType:r,rank:n,metadata:t.metadata})}));const C=await this.getRequestInit({method:"PUT",body:JSON.stringify(v)},t),b=(0,h.PH)(this.pdpServiceEndpoint);(await(0,S.XJ)()===a.Hy.SignedIn?p.$D.getOneServiceParamsWithAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,d,!0):p.$D.getOneServiceParamsWithoutAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,d,!0)).forEach((e=>{e.value&&b.searchParams.set(e.key,e.value)}));try{await(0,g.w)((async()=>{const e=await this.fetchImpl(b.href,C);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: ${o}, targetType: ${r}`;throw new Error(t)}return e.json()}),"sortWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(m.L.Finance)}catch(e){return!1}return!0}async updateWeatherInterests(e,t,n={},r){const o=m.L.Weather,s=await this.getRequestInit({method:"POST",body:JSON.stringify({actionType:"Follow",targetType:o,targetId:e,metadata:t})},n),c=(0,h.PH)(this.pdpServiceEndpoint),d=await(0,S.XJ)()===a.Hy.SignedIn;this.getCommonParams(d,r).forEach((e=>{e.value&&c.searchParams.set(e.key,e.value)}));try{const e=await this.fetchImpl(c.href,s);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update weather interests call`;throw new Error(t)}}catch(e){return i.k.logError(e.message),!1}return!0}async getWeatherInterest(e={},t="",n){const i=await this.getRequestInit({method:"GET"},e),r=this.getWeatherInterestUrl(null,t),o=await(0,S.XJ)()===a.Hy.SignedIn;this.getCommonParams(o,n).forEach((e=>{e.value&&r.searchParams.set(e.key,e.value)}));try{var s;const e=await(0,g.w)((async()=>{const e=await this.fetchImpl(r.href,i);if(e.status>=400){const t=`returned error response. Status: ${e.status} for actionType: Follow, targetType: ${m.L.Weather}`;throw new Error(t)}return e}),"getWeatherInterest");return null===(s=await e.json())||void 0===s?void 0:s.value}catch(e){return null}}getWeatherInterestUrl(e,t,n="Follow"){const i=(0,h.PH)(this.pdpServiceEndpoint),r=`targetType eq '${m.L.Weather}'`;return i.searchParams.set("$filter",`actionType eq '${n}' and (${r})${t?` and (${t})`:""}`),[...e||[]].forEach((e=>{e.value&&i.searchParams.set(e.key,e.value)})),i}async updateWeatherSettings(e,t,n={},i,r=!1){if(!e&&!t)return!0;let o="";o=e&&!t?'{"weatherDisplayUnit":"'+e+'"}':!e&&t?'{"userSettings":{"weatherLocationSettingMode":"'+t+'"}}':'{"weatherDisplayUnit":"'+e+'","userSettings":{"weatherLocationSettingMode":"'+t+'"}}';const s=await this.getRequestInit({method:"POST"},n,r);s.body=o;const c=(0,h.PH)(this.userUpdateEndpoint),d=await(0,S.XJ)()===a.Hy.SignedIn;this.getCommonParams(d&&!r,i).forEach((e=>{e.value&&c.searchParams.set(e.key,e.value)}));const l=await this.fetchImpl(c.href,s);if(l.status>=400){const e=`OneService returned error response. Status: ${l.status} for update weather setting call`;throw new Error(e)}return!0}async updateFinanceInterests(e){var t;if(!e)return!1;const n={financeInterests:e},i=JSON.stringify(n),r=await this.getRequestInit({method:"POST"});r.body=i;const o=(0,h.PH)(this.userUpdateEndpoint),d="zh-cn"!==(0,s.Yq)().CurrentMarket,l=await(0,S.XJ)()===a.Hy.SignedIn,u=(null===(t=(0,c.nP)().CurrentFlights)||void 0===t?void 0:t.split(",").filter((e=>e.includes("1s"))).join(","))||"";(l&&d?p.$D.getOneServiceParamsWithAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,u,!0):p.$D.getOneServiceParamsWithoutAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,u,!0)).forEach((e=>{e.value&&o.searchParams.set(e.key,e.value)}));const g=await this.fetchImpl(o.href,r);if(g.status>=400){const e=`OneService returned error response. Status: ${g.status} for update finance interests call`;throw new Error(e)}return!0}async updateUserSettings(e,t={},n){if(!e)return!0;const r=JSON.stringify({userSettings:e},((e,t)=>t??void 0)),o=await this.getRequestInit({method:"POST"},t);o.body=r;const c=(0,h.PH)(this.userUpdateEndpoint),d=await(0,S.XJ)()===a.Hy.SignedIn?p.$D.getOneServiceParamsWithAuth(n??(0,s.Yq)().UserId,this.ocid,!this.ocidOverride):p.$D.getOneServiceParamsWithoutAuth(n??(0,s.Yq)().UserId,this.ocid,!this.ocidOverride);for(const{key:e,value:t}of d)t&&c.searchParams.set(e,t);try{const e=await this.fetchImpl(c.href,o);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update weather setting call`;throw new Error(t)}}catch(e){return i.k.logError(e.message),!1}return!0}async getPdpUserPreference(e,t={},n){const r=await this.getRequestInit({method:"GET"},t),o=(0,h.PH)(this.userUpdateEndpoint),c=await(0,S.XJ)()===a.Hy.SignedIn?p.$D.getOneServiceParamsWithAuth(n||(0,s.Yq)().UserId,this.ocid,!this.ocidOverride):p.$D.getOneServiceParamsWithoutAuth(n||(0,s.Yq)().UserId,this.ocid,!this.ocidOverride);for(const{key:e,value:t}of c)t&&o.searchParams.set(e,t);try{const e=await(0,g.w)((async()=>{const e=await this.fetchImpl(o.href,r);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;throw Error(e.statusText)}return e}),"readPDPData");if(!e.ok&&404!=e.status)throw Error(`code=${e.status}, ${e.statusText}`);return{...await e.json(),is404:404==e.status}}catch(t){if(i.k.logError(t.message),e)throw Error(t.message);return null}}async updatePdpLayoutPreference(e){const t={method:"PUT",credentials:"include",body:JSON.stringify({dummyid:{userLayoutPreference:e}})},n=(0,h.PH)(this.userUpdateEndpoint);(await(0,S.XJ)()===a.Hy.SignedIn?p.$D.getOneServiceParamsWithAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride):p.$D.getOneServiceParamsWithoutAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride)).forEach((e=>{e.value&&n.searchParams.set(e.key,e.value)}));try{const e=await this.fetchImpl(n.href,t);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update layout preference setting call`;throw new Error(t)}}catch(e){return i.k.logError(e.message),!1}return!0}async updateSegmentCardsEnableStatus(e,t=null){if(!e&&!e.length)return!0;const n=[];if(t){let e;for(e in t)null!=t[e]&&n.push('"'+e+'": '+JSON.stringify(t[e]))}const i=e.map((e=>e.cardType!=f.f.TopStoriesCard?`\\"${e.cardType}\\":${e.enabled?'\\"1\\"':'\\"0\\"'}`:"")).join(","),r=n.length>0?'{"segmentCardSettings":"{'+i+'}","userSettings":{'+n.join(", ")+"}}":'{"segmentCardSettings":"{'+i+'}"}';return this.updateUserPreference(r)}async updateProductivityCardsEnableStatus(e){if(!e&&!e.length)return!0;const t=`{userSettings:{enterpriseCardsEnabled:"{${e.map((e=>`\\"is${e.cardType}Enabled\\":${e.enabled?"true":"false"}`)).join(",")}}"}}`;return this.updateUserPreference(t)}async updateGamingCardsEnableStatus(e){if(!e&&!e.length)return!0;const t=`{userSettings:{gamingCards:"{${e.map((e=>`\\"is${e.cardType}Enabled\\":${e.enabled?"true":"false"}`)).join(",")}}"}}`;return this.updateUserPreference(t)}async updateMorningDigestEnableStatus(e){if(!e&&!e.length)return!0;const t=`{userSettings:{WindowsShellMorningDigest:"{${e.map((e=>`\\"is${e.cardType}Enabled\\":${e.enabled?"true":"false"}`)).join(",")}}"}}`;return this.updateUserPreference(t)}async updateCommunitySettingsOptOutStatus(e){if(!e&&!e.length)return!0;const t={};e.forEach((e=>{t[e.settingType]=e.optedOut?"1":"0"}));const n={communitySettings:t};return this.updateUserPreference(JSON.stringify(n))}async updateWidgetSettings(e,t={},n){if(!e)return!1;const i=e.filter((e=>{var t;return!(null!==(t=e.region)&&void 0!==t&&t.startsWith("wbcol"))})).map((e=>({actionType:"Follow",targetId:e.cardType,targetType:m.L.Widget,metadata:{prongsv2:{region:e.region,size:v.m[e.size],position:e.position,widgetDefinitionId:e.widgetDefinitionId}}})));return this.sendGenericActionRequest({additionalHeaders:t,endpoint:this.pdpServiceEndpoint,method:"POST",payload:JSON.stringify(i),appError:n})}async muteWidget(e,t={},n){if(!e||!e.length)return!1;const i=e.map((e=>({actionType:"Mute",targetId:e,targetType:m.L.Widget})));return this.sendGenericActionRequest({additionalHeaders:t,endpoint:this.pdpServiceEndpoint,method:"POST",payload:JSON.stringify(i),appError:n})}async disableSpotlightCard(e,t){if(!e)return!1;const n={actionType:"Disabled",definitionName:e,targetId:e,targetType:m.L.TopicFeed};return this.sendGenericActionRequest({endpoint:this.pdpServiceEndpoint,method:"POST",payload:JSON.stringify(n),appError:t})}async sendGenericActionRequest(e){const{additionalHeaders:t,additionalParams:n,endpoint:i,method:r,payload:o,appError:c}=e;if(!i||!r)return this.logError(new Error("Missing arguments: 'endpoint' and 'method' should be provided and valid"),c),!1;const d=(0,h.PH)(i);let l;(await(0,S.XJ)()===a.Hy.SignedIn?p.$D.getOneServiceParamsWithAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride):p.$D.getOneServiceParamsWithoutAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride)).forEach((e=>{e.value&&d.searchParams.set(e.key,e.value)})),n&&n.forEach((e=>{e.value&&d.searchParams.set(e.key,e.value)}));try{JSON.parse(o),l=o}catch(e){l=JSON.stringify(o)}const u=await this.getRequestInit({method:r,body:l},t),m="GET"==r;try{return await(0,g.w)((async()=>{const e=await this.fetchImpl(d.href,u);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for payload: ${o}`;throw new Error(t)}return!m||await e.json()}),"sendActions")}catch(e){return this.logError(e,c),!1}}async getUserActions(e){const t=[{key:"actionType",value:e}],n=await this.sendGenericActionRequest({additionalParams:t,endpoint:this.userActionServiceEndPoint,method:"GET"});return n&&n.value}async setUserAction(e,t,n){return!!await this.sendGenericActionRequest({endpoint:n?this.pdpServiceEndpoint:this.userActionServiceEndPoint,method:"POST",payload:{actionType:e,...t}})}async deleteUserAction(e,t){const n=[{key:"actionType",value:e},{key:"targetId",value:t.targetId},{key:"definitionName",value:t.definitionName}];return!!await this.sendGenericActionRequest({additionalParams:n,endpoint:this.userActionServiceEndPoint,method:"DELETE"})}async deleteUserActionRelatedTraffic(e,t){const n=await this.getRequestInit({method:"DELETE"}),i=await this.getTrafficPdpUrl("Default",null,null,e,t.targetId);try{await(0,g.w)((async()=>{const t=await this.fetchImpl(i.href,n);if(t.status>=400){const n=`OneService returned error response. Status: ${t.status} for actionType: ${e}, targetType: ${m.L.Traffic}`;throw new Error(n)}return t}),"deleteActionRelatedTraffic"),this.tryInvalidateBulkFetchedPdpTargetType(m.L.Traffic)}catch(e){return!1}return!0}async updateUserPreference(e){const t=await this.getRequestInit({method:"POST"});t.body=e;const n=(0,h.PH)(this.userUpdateEndpoint);(await(0,S.XJ)()===a.Hy.SignedIn?p.$D.getOneServiceParamsWithAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride):p.$D.getOneServiceParamsWithoutAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride)).forEach((e=>{e.value&&n.searchParams.set(e.key,e.value)}));try{const i=await this.fetchImpl(n.href,t);if(i.status>=400){const t=`OneService returned error response while updating user preference. Status: ${i.status}, payload: ${e}`;throw new Error(t)}}catch(e){return!1}return!0}setPdpTargetTypesForBulkLoad(e){e&&e.length&&!this.bulkGraphActionTargetTypes&&(this.bulkGraphActionTargetTypes=e)}async readPdpWithTargetType(e,t=!1,n=void 0,i={},a=!0,s=[]){if(a){const t=await this.getFromWebWorker(e);if(t)return t}if(this.bulkGraphActionTargetTypes&&this.bulkGraphActionTargetTypes.length)if(this.bulkGraphActionTargetTypes.indexOf(e)>=0){this.bulkGraphActionResultCache=this.bulkGraphActionResultCache||await(this.bulkGraphActionPromise||(this.bulkGraphActionPromise=this.fetchPdpWithTargetTypes(this.bulkGraphActionTargetTypes,t,n,i,s)));const r=this.bulkGraphActionResultCache.get(e);if(r)return{value:r}}else(0,r.H)(o.srQ,`Received an unknown target type "${e}" that was not in the bulk graph action target types list "${this.bulkGraphActionTargetTypes}". Falling back to new network call. Please update the EntryPoint config's "graphActionsToBulkLoad" property to include this type.`);const c=(await this.fetchPdpWithTargetTypes([e],t,n,i,s)).get(e);if(c)return{value:c}}async deleteFromPdp(e,t,n,i={},r=void 0,o="Follow",s,c=[],d=!1){const l=await this.getRequestInit({method:"DELETE"},i,d),u=(0,h.PH)(this.pdpServiceEndpoint),p=await(0,S.XJ)()===a.Hy.SignedIn,m=this.getCommonParams(p&&!d),f=`targetType eq '${e}'`,v=n.map((e=>`${t} eq '${e}'`)).join(" or ");let C=`actionType eq '${o}' and (${v}) and (${f})`;r&&(C+=` and (degree eq '${r}')`),u.searchParams.set("$filter",C),[...m,...c].forEach((e=>{e.value&&u.searchParams.set(e.key,e.value)}));try{await(0,g.w)((async()=>{const t=await this.fetchImpl(u.href,l);if(t.status>=400){const n=`OneService returned error response. Status: ${t.status} for actionType: ${o}, targetType: ${e}`;throw new Error(n)}return t}),"deleteFromPdp"),this.tryInvalidateBulkFetchedPdpTargetType(e)}catch(e){return s&&y.M0.sendAppErrorEvent({...s,pb:{...s.pb,actionType:o,error:e.message}}),!1}return!0}tryInvalidateBulkFetchedPdpTargetType(e){this.bulkGraphActionResultCache&&this.bulkGraphActionResultCache.delete(e)}async fetchPdpWithTargetTypes(e,t=!1,n=void 0,i={},r=[]){if(!e.length)return new Map;const o=e.map((e=>`targetType eq '${e}'`)).join(" or "),s=[{key:"$top",value:`${n=n||10*e.length*2}`},{key:"$filter",value:`actionType eq 'Follow' and (${o})`}],c=await this.getRequestInit({method:"GET"},i);!0===t&&(c.cache="no-store");const d=(0,h.PH)(this.pdpServiceEndpoint),l=await(0,S.XJ)()===a.Hy.SignedIn;[...s,...this.getCommonParams(l),...r].forEach((e=>{e.value&&d.searchParams.set(e.key,e.value)}));const u=await(0,g.w)((async()=>{const e=await this.fetchImpl(d.href,c);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;throw Error(e.statusText)}return e}),"readPDPData");if(!u.ok)throw Error(`code=${u.status}, ${u.statusText}`);const p=new Map,f=await u.json();if(!f)return p;if(f.value)for(const e of f.value){let t=p.get(e.targetType);t||p.set(e.targetType,t=[]),t.push(e)}for(const t of e)if(p.get(t)||p.set(t,[]),t===m.L.Finance){if("all-cgcombo"===d.searchParams.get("interestType")){const e=p.get(m.L.CasualGame)||[];let n=p.get(m.L.Finance)||[];n=n.concat(e),p.set(t,n)}}return p}async updateMarketPreference(e){const t={method:"POST",credentials:"include",body:JSON.stringify({userSettings:{preferredMarket:e}})},n=(0,h.PH)(this.userUpdateEndpoint);(await(0,S.XJ)()===a.Hy.SignedIn?p.$D.getOneServiceParamsWithAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride):p.$D.getOneServiceParamsWithoutAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride)).forEach((e=>{e.value&&n.searchParams.set(e.key,e.value)}));try{const i=await this.fetchImpl(n.href,t);if(!i.ok)throw new Error(`Failed to update market preference: Status: ${i.status}`);return this.marketQSPOverride&&window.history.pushState(null,"",d.c.updateSearchParam(new URL(window.location.href),"cm",e)),!0}catch(e){return i.k.logError(e.message),!1}}async getFromWebWorker(e){let t=null;if(l.yb){const n=this.maptoWebWorkerId(e);if(n&&n.trim()){const n=await(0,l.ot)({id:this.maptoWebWorkerId(e)});n.fetched&&(t=n.payload)}}return t}maptoWebWorkerId(e){switch(e){case m.L.Location:return"weatherpdp";case m.L.League:return"sportsleaguepdp";case m.L.Player:return"sportsplayerpdp";case m.L.Team:return"sportsteampdp";case m.L.Finance:return"moneypdp";default:return""}}async getRequestInit(e={method:"GET"},t={},n=!1){const i=await p.$D.getOneServiceHeaders();return e.headers={...n?{}:i,...t},e.credentials="include",e}async getFollowedLists(){var e;const t=await this.getRequestInit({method:"GET"}),n=(0,h.PH)(this.userUpdateEndpoint),d=await(0,S.XJ)()===a.Hy.SignedIn,l=(null===(e=(0,c.nP)().CurrentFlights)||void 0===e?void 0:e.split(",").filter((e=>e.includes("1s"))).join(","))||"",u=d?p.$D.getOneServiceParamsWithAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,l,!0):p.$D.getOneServiceParamsWithoutAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,l,!0);for(const{key:e,value:t}of u)t&&n.searchParams.set(e,t);try{const e=await(0,g.w)((async()=>{const e=await this.fetchImpl(n.href,t);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;(0,r.OO)(null,o.G9t,"Error get followed list")}return e}),"getFollowedLists");return e.ok||(0,r.OO)(null,o.G9t,"Error get followed list"),await e.json()}catch(e){return i.k.logError(e.message),null}}async addToFollowedLists(e){var t;const n=m.L.Finance,i=await this.getRequestInit({method:"POST",body:JSON.stringify({financeListIds:e})}),r=(0,h.PH)(this.userUpdateEndpoint),o=await(0,S.XJ)()===a.Hy.SignedIn,d=(null===(t=(0,c.nP)().CurrentFlights)||void 0===t?void 0:t.split(",").filter((e=>e.includes("1s"))).join(","))||"";let l;(o?p.$D.getOneServiceParamsWithAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,d,!0):p.$D.getOneServiceParamsWithoutAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,d,!0)).forEach((e=>{e.value&&r.searchParams.set(e.key,e.value)}));try{l=await(0,g.w)((async()=>{const e=await this.fetchImpl(r.href,i);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: FollowList, targetType: ${n}`;throw new Error(t)}return e.json()}),"addToFollowedLists")}catch(e){return!1}return!0}async deleteFromFollowedLists(e){var t;const n=m.L.Finance,i=await this.getRequestInit({method:"DELETE"}),r=(0,h.PH)(this.userUpdateEndpoint),o=await(0,S.XJ)()===a.Hy.SignedIn,d=(null===(t=(0,c.nP)().CurrentFlights)||void 0===t?void 0:t.split(",").filter((e=>e.includes("1s"))).join(","))||"";let l;[...o?p.$D.getOneServiceParamsWithAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,d,!0):p.$D.getOneServiceParamsWithoutAuth((0,s.Yq)().UserId,this.ocid,!this.ocidOverride,d,!0),...[{key:"financeListIds",value:e.toString()}]].forEach((e=>{e.value&&r.searchParams.set(e.key,e.value)}));try{l=await(0,g.w)((async()=>{const e=await this.fetchImpl(r.href,i);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: UnFollowList, targetType: ${n}`;throw new Error(t)}return e.json()}),"deleteFromFollowedLists")}catch(e){return!1}return!0}logError(e,t){t?y.M0.sendAppErrorEvent({...t,pb:{...t.pb,error:e.message}}):i.k.logError(e.message)}}const w=new class extends C{constructor(){var e;(super((0,u.j)()),"windowsNewsPlus"===s.jG.AppType||"newsAndInterests"===s.jG.AppType||"winWidgets"===s.jG.AppType)?(this.ocid="sidebar"===(null===(e=c.Al.ClientSettings)||void 0===e?void 0:e.pagetype)?"shoreline":"winp2",this.ocidOverride=!0):"sharedWidgets"===s.jG.AppType?(this.ocid="hpwidget",this.ocidOverride=!0):"windowsNewsbar"===s.jG.AppType?(this.ocid="winp0dash",this.ocidOverride=!0):"travel"===s.jG.AppType?(this.ocid="travel-verthp-feeds",this.ocidOverride=!0):"gaming"===s.jG.AppType?(this.ocid="startgg-feeds",this.ocidOverride=!0):"bingHomepage"===s.jG.AppType?(this.ocid="BingHp01",this.ocidOverride=!0):"windowsShellV2"===s.jG.AppType?(this.ocid="pdp-peregrine",this.ocidOverride=!0):"edgeChromium"===s.jG.AppType&&window.location.search.includes("ocid=widgetonlockscreen")&&(this.marketQSPOverride=!0)}}},3883:function(e,t,n){"use strict";var i=n(82099);function r(e,t){const n=new URLSearchParams(e.location.search);if(n){const e=new URLSearchParams(t.search);if(null==n?void 0:n.keys())for(const t of n.keys())if(n.getAll(t)&&!e.getAll(t).length){n.getAll(t).forEach((n=>e.append(t,n)))}let i="";e.forEach(((e,t)=>i=i.concat(`&${t}=${e}`))),t.search=i.slice(1)}return t}function o(e,t,n){return"string"==typeof e?{pathname:e,state:t,search:n}:e}const a=(0,n(31558).N)()?function(e){const t=e(),n=t.push,i=t.replace;return t.push=(e,i,a)=>n.apply(t,[r(t,o(e,i,a))]),t.replace=(e,n,a)=>i.apply(t,[r(t,o(e,n,a))]),t}(i.lX):null;t.ZP=a},36560:function(e,t,n){"use strict";n.d(t,{lY:function(){return m}});var i,r=n(21789),o=n(19494);!function(e){e.NavigationData="NavigationDataAdapter",e.TopicsData="TopicsDataAdapter"}(i||(i={}));var a=n(7486),s=n(85205),c=n(96531),d=n(43356);class l{constructor(e,t){this.onUpdateFollowedTopics=()=>{if(!this.connector)return this.onRouteUpdateCallback([]);const e=this.connector.getCurrentState(),t=e.followedTopicIds,n=e.topicMap,r=[];t&&n&&t.forEach((e=>{const t=n[e],a={path:(0,o.qC)(t.name||t.canonicalName,e),display:t.name,experienceInfo:this.dynamicRouteExperienceInfo,context:{feedId:e},pivotId:e,dynamicPivotSource:i.TopicsData};r.push(a)})),this.onRouteUpdateCallback(r)},this.onRouteUpdateCallback=e,this.dynamicRouteExperienceInfo=t}async getDynamicPivotsFromDataConnector(e){switch(e){case s.z.TopicData:await this.getPivotsFromTopicData();break;case s.z.NavigationData:await this.getPivotsFromNavigationData();break;default:return}}async getPivotsFromTopicData(){await(0,d.F_)(),c._.getInstance().rootReducer.getDataConnector(s.z.TopicData).then((e=>{this.connector=e,this.connector.getFollowedTopics(!1).then((()=>{this.onUpdateFollowedTopics()}))})),a.G.followedTopics.registerObserver(this.onUpdateFollowedTopics),a.G.updateTopicFollowedState.registerObserver(this.onUpdateFollowedTopics)}async getPivotsFromNavigationData(){if(this.connector=await c._.getInstance().rootReducer.getDataConnector(s.z.NavigationData),this.connector){const e=await this.connector.getNavigationItems(r.jG.HostPage.verticalKey,r.jG.HostPage.categoryKey);this.onRouteUpdateCallback(this.mapNavigationItemsToDynamicRoutes(e))}else this.onRouteUpdateCallback([])}mapNavigationItemsToDynamicRoutes(e){return e.map((e=>({path:e.targetUrl,externalUrl:e.targetUrl,display:e.displayText,pivotId:e.categoryKey,dynamicPivotSource:i.NavigationData})))}}var u,p=n(3883);class h{constructor(e){if(this.staticRoutes=[],this.dynamicRoutes=[],this.onUpdateRoutesCallbacks=[],this.switchListeners=[],this.useCustomRoutingEvent=!1,this.callSwitchListeners=e=>{if(!this.switchListeners.length)return;const t=this.getPivotSelectionInfoFromPath(e.state&&e.state.previousPath),n={newSelection:this.getPivotSelectionInfoFromPath(e.pathname,e),oldSelection:t};this.switchListeners.sort(((e,t)=>e.order-t.order));for(const e of this.switchListeners)e.callback(n)},e&&(this.useCustomRoutingEvent=e.useCustomRoutingEvent,(0,o.Vk)(e.enableLocaleFeedPrefix),(0,o.I8)(e.includeFeedPrefixForAppType),this.setRoutes(e)),p.ZP.listen(this.callSwitchListeners),"windows"===r.jG.AppType||this.useCustomRoutingEvent){const e=window.history.pushState;window.history.pushState=(t,n,i)=>{e.apply(window.history,[t,n,i]);const r=new CustomEvent("pushstate",{detail:{state:t,title:n,url:i}});window.dispatchEvent(r)},window.addEventListener("pushstate",(e=>{e.detail&&e.detail.state&&e.detail.state.shouldPush&&p.ZP.replace(window.location.pathname,{context:e.detail.state},window.location.search)}))}}setRoutes(e){this.config=e,this.setStaticRoutes(),this.config.disableLoadingDynamicRoutes||this.setDynamicRoutes()}pushHistory(e,t,n,i){const r=p.ZP.location.pathname;p.ZP.push((0,o.qC)(e,t,!0,n&&n.excludeFeedPrefix),{previousPath:r,context:n},i)}getStaticRoutes(){return this.staticRoutes}getDynamicRoutes(){return this.dynamicRoutes}getDynamicRoute(){const e=p.ZP.location.pathname.split("/"),t=e.findIndex((e=>"interest"===e.toLowerCase())),n=t>-1&&t<e.length-1?e[t+1]:"";return{path:(0,o.qC)("interest"),experienceInfo:this.config.dynamicRouteExperienceInfo,pivotId:"oneriver.xfeed",display:decodeURIComponent(n)}}isDynamicRoute(e){let t="";return o.T6&&(t="windows"===r.jG.AppType||o.uO?`/${r.jG.CurrentMarket}/feed`:`/${r.jG.CurrentMarket}`),t+="/interest",0===e.indexOf(t)}getCurrentRoute(){const e=p.ZP.location.pathname,t=this.staticRoutes.find((t=>t.path===e));return t||(/\/interest\/.+\//.test(e)?this.getDynamicRoute():null)}addDynamicRouteListener(e){this.onUpdateRoutesCallbacks.push(e)}addSwitchListener(e,t=u.AfterLoadContent){this.switchListeners.push({callback:e,order:t})}getPivotSelectionInfoFromPath(e,t){if(!e)return null;const n=this.config.staticRoutes.find((t=>(0,o.qC)(t.canonicalName,void 0,!0,t.context&&t.context.excludeFeedPrefix)===e));if(n)return{pivotId:n.pivotId,telemetryPageName:n.telemetryPageName,telemetryPivotCategory:n.telemetryPivotCategory,display:n.display||n.canonicalName,categoryKey:n.categoryKey,subCategoryKey:n.subCategoryKey,pageTitle:n.pageTitle};if(!this.isDynamicRoute(e))return null;const i=e.split("/");let a=0;o.T6&&(a="windows"===r.jG.AppType||o.uO?2:1);const s=t&&t.state&&t.state.context;return{telemetryPageName:"xfeed",telemetryPivotCategory:"news",pivotId:s&&t.state.context.feedId||i.length>=4+a&&i[3+a],display:s&&(t.state.context.display||t.state.context.query)||i.length>=3+a&&decodeURIComponent(i[2+a])}}setStaticRoutes(){const{staticRoutes:e}=this.config;e.forEach((e=>{let t;t=e.canonicalName?(0,o.qC)(e.canonicalName,void 0,!0,e.context&&e.context.excludeFeedPrefix):(0,o.Or)(e.externalUrl);const n={path:t,externalUrl:e.externalUrl,experienceInfo:e.experienceInfo,queryParamOverrides:e.queryParamOverrides,display:e.display||e.canonicalName,pivotId:e.pivotId,context:e.context,categoryKey:e.categoryKey,subCategoryKey:e.subCategoryKey,pageTitle:e.pageTitle};this.staticRoutes.push(n)}))}async setDynamicRoutes(){const e=new l(this.onUpdateDynamicRoute.bind(this),this.config.dynamicRouteExperienceInfo);await e.getDynamicPivotsFromDataConnector(this.config.dynamicRouteDataConnector)}onUpdateDynamicRoute(e){this.dynamicRoutes=e;for(const e of this.onUpdateRoutesCallbacks)e(this.dynamicRoutes)}}let g;!function(e){e[e.Telemetry=0]="Telemetry",e[e.Monetization=1]="Monetization",e[e.LoadContent=2]="LoadContent",e[e.AfterLoadContent=3]="AfterLoadContent"}(u||(u={}));const m=e=>g?(e&&g.setRoutes(e),g):(g=new h(e),g)},19494:function(e,t,n){"use strict";n.d(t,{He:function(){return d},I8:function(){return s},Or:function(){return l},T6:function(){return r},Vk:function(){return o},n8:function(){return u},qC:function(){return c},uO:function(){return a}});var i=n(21789);let r=!1;function o(e){r=e}let a=!1;function s(e){a=e}function c(e,t,n=!0,o=!1){if(r&&n){let n=`/${i.jG.CurrentMarket}`;if("windows"!==i.jG.AppType&&!a||o||(n+="/feed"),!e)return n;if(t)return n+`/interest/${encodeURIComponent(e)}/${encodeURIComponent(t)}`;const r="/"===e[0]?e.slice(1):e;return n+(p[r]?`${p[r]}`:`/${r}`)}{if(!e)return"";if(t)return`/interest/${encodeURIComponent(e)}/${encodeURIComponent(t)}`;const n="/"===e[0]?e.slice(1):e;return p[n]||`/${n}`}}function d(e){return!!(e&&e.oldSelection&&e.newSelection)&&(!(!e.oldSelection||!e.oldSelection.pivotId)&&!(!e.newSelection||!e.newSelection.pivotId))}function l(e){try{return new URL(e).pathname}catch{return null}}var u;!function(e){e.MyFeed="myFeed",e.Personalize="personalize",e.Saves="saves"}(u||(u={}));const p={myFeed:"/",personalize:"/personalize",interest:"/interest/*/:id",saves:"/personalize/saves"}},78324:function(e,t,n){"use strict";n.d(t,{l:function(){return l}});var i=n(81949),r=n(23549);class o{constructor(){this.callbacks=[],this.clickCallbacks=[]}getSelectedPivot(){return this.selectedPivot}setSelectedPivot(e){e&&e.pivotId&&(this.selectedPivot={...e})}switchPivot(e,t){var n;const i=this.selectedPivot;this.selectedPivot={...e};const o={hash:null===(n=this.selectedPivot.context)||void 0===n?void 0:n.hash,navIsSticky:this.selectedPivot.navIsSticky,newSelection:this.selectedPivot,oldSelection:i};this.callbacks.sort(((e,t)=>e.switchCallbackOrder-t.switchCallbackOrder)),t&&r.M0.addOrUpdateTmplProperty("pvcb",this.callbacks.length.toString());for(const e of this.callbacks)e.callback(o)}clickPivot(e=!0,t){for(const n of this.clickCallbacks)n(e,t)}addSwitchListener(e,t=i.I.AfterLoadContent){this.callbacks.find((n=>n.callback===e&&n.switchCallbackOrder===t))||this.callbacks.push({callback:e,switchCallbackOrder:t})}removeSwitchListener(e){this.callbacks=this.callbacks.filter((t=>t.callback!==e))}addClickListener(e){this.clickCallbacks.push(e)}removeClickListener(e){this.clickCallbacks=this.clickCallbacks.filter((t=>t!==e))}reportLoadComplete(){this.loadComplete=!0,this.loadCompleteResolveCallback&&this.loadCompleteResolveCallback()}waitForLoadComplete(){return this.loadCompletePromise?this.loadCompletePromise:this.loadComplete?Promise.resolve():(this.loadCompletePromise=new Promise((e=>{this.loadCompleteResolveCallback=e})),this.loadCompletePromise)}}var a=n(96620),s=n(55524);const c="__PivotManager_default__",d="__PivotManager_namedSwitchers__";function l(e){if(e){const t=s.Gq.get(d,(()=>new Map));let n=t.get(e);return n||(n=new o,t.set(e,n)),n}return s.Gq.get(c,(()=>new o))}(0,a.U)((()=>{s.Gq.delete(c),s.Gq.delete(d)}))},81949:function(e,t,n){"use strict";var i;n.d(t,{I:function(){return i}}),function(e){e[e.Telemetry=0]="Telemetry",e[e.Monetization=1]="Monetization",e[e.LoadContent=2]="LoadContent",e[e.AfterLoadContent=3]="AfterLoadContent"}(i||(i={}))},1573:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var i,r=n(17556);class o{}(i=o).pageVisibilityChange=new r.C("PageVisibilityChange"),i.timeForPageReveal=new r.C("TimeForPageReveal"),i.forcePageReload=new r.C("ForcePageReload"),i.updateCurrentPageRefreshState=new r.C("UpdateCurrentPageRefreshState"),i.updateDidRenderStartInBackgroundRenderFlag=new r.C("UpdateDidRenderStartInBackgroundRenderFlag")},47640:function(e,t,n){"use strict";n.d(t,{Eu:function(){return p},bY:function(){return u},fv:function(){return h}});var i=n(85205),r=n(75776),o=n(96531),a=n(1573),s=n(52176),c=n(88826),d=n(7476),l=n(13334);function u(e){const t=o._.getInstance().rootReducer.connector(i.z.Preload);t&&a.X.forcePageReload.getActionSender(t).send(e||s.T.SettingsChange)}function p(e){const t=o._.getInstance().rootReducer.connector(i.z.Preload);t&&a.X.timeForPageReveal.getActionSender(t).send(e)}function h(e){if(!l.Al.IsPreload)return;if("windowsShell"===l.Al.ClientSettings.apptype||"windowsShellV2"===l.Al.ClientSettings.apptype)return e.Win10PerfDCREnabled=1,e[r.Qf]=e[r.dd],delete e[r.dd],void delete e.launchType;const t=function(){const e=o._.getInstance().rootReducer.connector(i.z.Preload);if(!e)return!1;return e.getCurrentState().didRenderStartInBackground}();t&&("edgeChromium"===l.Al.ClientSettings.apptype?(e[r.C7]=1,e[r.eO]=1):e[r.eO]=1);const n=e[r.Lh],a=e[r.dd],s=e[r.pM],u=e[r.pc];let p=!1;if((isNaN(a)||null===a)&&((0,c.H)(d.vAF,"TTVR missing during preload."),p=!0),(isNaN(n)||null===n)&&((0,c.H)(d.Hif,"TFPR missing during preload."),p=!0),p)return;const h=e[r.Lh]=e[r.dd]=Math.min(n,a);t&&(e[r.Qf]=a),isNaN(s)||null===s?(0,c.H)(d.vwD,"TTVR.SearchBox missing during preload."):e[r.pM]=Math.min(h,s),isNaN(u)||null===u?(0,c.H)(d.sEv,"TTF.SearchBox missing during preload."):e[r.pc]=Math.min(h,u)}},75776:function(e,t,n){"use strict";n.d(t,{C7:function(){return l},H$:function(){return i},Lh:function(){return s},Qf:function(){return c},dd:function(){return o},eO:function(){return d},jh:function(){return u},pM:function(){return a},pc:function(){return r}});const i="TTPR2",r="TTF.SearchBox",o="TTVR",a="TTVR.SearchBox",s="TFPR",c="TTVR.BackgroundExecution",d="backgroundpreload",l="prerender",u="TTAF"},52176:function(e,t,n){"use strict";var i;n.d(t,{T:function(){return i}}),function(e){e[e.StalePage=1]="StalePage",e[e.SettingsChange=2]="SettingsChange",e[e.MuidChange=3]="MuidChange",e[e.GizmoSettingChange=4]="GizmoSettingChange",e[e.TopSites=5]="TopSites",e[e.PivotSwitch=6]="PivotSwitch",e[e.SignInStateChange=7]="SignInStateChange",e[e.MutePublisher=8]="MutePublisher",e[e.UnMutePublisher=9]="UnMutePublisher",e[e.Dislike=10]="Dislike",e[e.Like=11]="Like",e[e.Save=12]="Save",e[e.Hide=13]="Hide",e[e.KidsMode=14]="KidsMode",e[e.MarketChange=15]="MarketChange",e[e.InterestsSdCardSettingChange=16]="InterestsSdCardSettingChange",e[e.InterestsChange=17]="InterestsChange",e[e.WeatherChange=18]="WeatherChange",e[e.MoneyCardChange=19]="MoneyCardChange",e[e.Disabled=20]="Disabled"}(i||(i={}))},21610:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});const i=e=>new Promise((t=>setTimeout(t,e)))},20578:function(e,t,n){"use strict";n.d(t,{h:function(){return b}});var i=n(34004),r=n(63011),o=n(21789),a=n(72626);const s=404,c=429,d="Authorization",l="Content-Type",u="Retry-After",p="application/json; charset=utf-8";var h=n(18860),g=n(88826);const m="color:white;background-color:green;border-radius:6px;padding:2px 5px;font-weight:bold;text-align:center",f=e=>{var t;const n=new Date(Date.now()),i=n.toISOString?n.toISOString():n.toString();if(!e)return{utcNow:i,invalidReason:"NoToken"};let r;try{r=JSON.parse(atob(e.split(".")[1]))}catch{return{utcNow:i,invalidReason:"InvalidToken"}}if(null===(t=r)||void 0===t||!t.exp)return{utcNow:i,invalidReason:"NoExpiration"};const o=1e3*r.exp,a=new Date(o),s=a.toISOString?a.toISOString():a.toString();return{isExpired:a<n,expiration:s,expirationMilliseconds:o,utcNow:i}},v=(e,t,n,i,r,o,a=void 0,s=void 0,c=void 0)=>{const d=new Date(Date.now()),l=d.toISOString?d.toISOString():d.toString();return{id:e,type:t,message:n,apiName:r.apiName,name:r.name,clientRequestId:i,retryCount:o,utcNow:l,tokenExpiration:f(a),authenticationMilliseconds:s,fetchMilliseconds:c}},y=e=>{(0,g.H)(e.id,e.message,JSON.stringify(e),{},!1)},S=e=>{((e,...t)=>{console.error(`%c${e}`,m,...t)})(`${e.apiName}.${e.name}`,e.message,e)};var C=n(21610);const w=async e=>{const t=performance.now(),n=await e(),i=performance.now();return{result:n,durationMilliseconds:Math.round(i-t)}},b=async e=>(async(e,t,n,i=3)=>{if(i<1)throw new Error("Maximum number of retries must be more than zero.");let r;for(let o=0;o<i&&(r=await e(o),t(r));++o){const e=n(o,r);await(0,C.g)(e)}return r})((t=>T(e,t)),(e=>{var t;return(null===(t=e.error)||void 0===t?void 0:t.authenticationStatus)===i.H.MaySucceedOnRetry||(null==e?void 0:e.status)===c}),k,3),T=async(e,t)=>{const n=(0,a.pW)();if(await(0,o.Yq)().unsupportedEnterpriseCloud){const i=((e,t,n)=>{const i=v(t.errors.unsupportedEnterpriseCloud,"UnsupportedCloud","Unsupported enterprise cloud.",e,t,n);return y(i),S(i),i})(n,e,t);return{clientRequestId:n,ok:!1,error:i,url:e.url,retryCount:t}}let g,m,f;try{const{result:o,durationMilliseconds:a}=await w((()=>{var t;return null===(t=(0,r.Kf)())||void 0===t?void 0:t.getAuthData(e.authentication)}));if(g=o,m=a,g.error){const r=((e,t,n,r,o)=>{var a,s,c,d;let l,u,p;(null===(a=r.error)||void 0===a?void 0:a.status)===i.H.InteractionRequired?(l=t.errors.authenticationUserInteractionRequired,u="UserInteractionRequired",p="Failed to authenticate. User interaction required."):(null===(s=r.error)||void 0===s?void 0:s.status)===i.H.AuthProviderNotSupported?(l=t.errors.authenticationProviderNotSupported,u="AuthenticationProviderNotSupported",p="Failed to authenticate. Authentication provider is not supported."):(l=t.errors.authenticationError,u="AuthenticationFailed",p="Failed to authenticate.");const g={...v(l,u,p,e,t,n,r.authToken,o),authenticationStatus:null===(c=r.error)||void 0===c?void 0:c.status};y(g);const m={...g,authenticationError:r.error?(0,h.P)(r.error,t.authentication):void 0,authenticationErrorString:null===(d=r.error)||void 0===d||null===(d=d.internalError)||void 0===d?void 0:d.error_string};return S(m),m})(n,e,t,g,m);return{clientRequestId:n,ok:!1,error:r,url:e.url,retryCount:t}}g.authToken&&(e.headers={[d]:`Bearer ${g.authToken}`,...e.headers}),e.content&&(e.body=JSON.stringify(e.content),e.headers={[l]:p,...e.headers});const{result:C,durationMilliseconds:b}=await w((()=>globalThis.fetch(e.url.toString(),e)));f=b;const T=I(e,C);let k,E,M;return T?k=await P(e,C):E=await A(e,C),C.status===c?M=((e,t,n,i,r,o,a)=>{const s={...v(t.errors.tooManyRequests,"TooManyRequests","Too many requests.",e,t,i,r,o,a),retryAfterHttpHeader:n.headers.get(u)};return y(s),S(s),s})(n,e,C,t,g.authToken,m,f):T||(M=((e,t,n,i,r,o,a,c)=>{var d;const l=t.errors.notFoundStatusCode&&c===s?t.errors.notFoundStatusCode:t.errors.unsuccessfulStatusCode,u={...v(l,"UnsuccessfulStatusCode","Unsuccessful status code returned.",e,t,n,i,r,o),contentErrorCode:null==a||null===(d=a.error)||void 0===d?void 0:d.code};return y(u),S(u),u})(n,e,t,g.authToken,m,f,E,C.status)),{ok:C.ok,headers:C.headers,redirected:C.redirected,status:C.status,statusText:C.statusText,type:C.type,url:e.url,clientRequestId:n,content:k,contentError:E,error:M,retryCount:t}}catch(i){var C;const r=((e,t,n,i,r,o,a)=>{const s={...v(t.errors.unhandledException,"UnhandledException","Unhandled exception thrown.",e,t,n,r,o,a),exceptionMessage:null==i?void 0:i.message};return y(s),S(s),s})(n,e,t,i,null===(C=g)||void 0===C?void 0:C.authToken,m,f);return{clientRequestId:n,ok:!1,error:r,url:e.url,retryCount:t}}},k=(e,t)=>{try{var n;const e=null===(n=t.headers)||void 0===n?void 0:n.get(u);if(e)return 1e3*parseInt(e)}catch{}return 1e3*(2^e)},P=async(e,t)=>{if(t.body)return e.transform?await e.transform(t):await t.json()},A=async(e,t)=>{if(t.body)return e.transformError?await e.transformError(t):await t.json()},I=(e,t)=>e.isSuccess?e.isSuccess(t):t.ok},31983:function(e,t,n){"use strict";var i;n.d(t,{S:function(){return i},PublisherServiceClient:function(){return v}}),function(e){e.More="More",e.Mute="Mute",e.Read="Read"}(i||(i={}));var r=n(89315),o=n(13334),a=n(21789),s=n(15165),c=n(74488),d=n(44672),l=n(47647),u=n(90158),p=n(31490),h=n(25086),g=n(5674),m=n(83102),f=n(91668);class v{constructor(e,t=!0){this.fetchImpl=e,this.addPageInfoToOcid=t,this.followedPublishersEndpoint="v1/News/Users/Me/PreferredProviders",this.followedSourcesEndpoint="msn/sources",this.publishersServiceEndpoint="Msn/Providers",this.actionsServiceEndpoint="Graph/Actions",this.followActionSourceEndpoint="community/follows",this.ocid="feeds"}getOcid(){return this.ocid}async getUserMutedPublishers(){const e=await this.getUserActions(i.Mute);if(!e||!e.value)return null;if(!e.value.length)return[];const t=e.value.reduce(((e,t)=>(e[t.targetId]=t,e)),{}),n=await this.getPublisherDetails(Object.keys(t));if(!n||!n.value||!n.value.length)return null;return n.value.map((e=>{const n={createdDateTime:t[e.id].createdDateTime};return{...e,...n}}))}async getUserFollowedPublishers(e=100){const t=await this.getRequestInit(),n=[...await this.getCommonParams(),{key:"$top",value:`${e}`}],i=(0,s.PH)(this.followedPublishersEndpoint);this.appendQs(n,i),(0,r.aH)()||(0,g.s6)(i);const o=await this.sendRequest(decodeURIComponent(i.href),t,"getFollowedPublishers");return null==o?void 0:o.value}async getUserFollowedSources(e=100){var t,n;const i=await this.getRequestInit(),o=[...await this.getCommonParams(),{key:"$top",value:`${e}`},{key:"queryType",value:"MyFeed"}],a=(0,s.PH)(this.followedSourcesEndpoint);let c;this.appendQs(o,a),(0,r.aH)()||(0,g.s6)(a);try{c=await this.sendRequest(decodeURIComponent(a.href),i,"getFollowedSources")}catch(e){throw new Error(`{url: ${a.href}}`)}return(null===(t=c)||void 0===t||null===(t=t.value)||void 0===t?void 0:t.length)>0?null===(n=c)||void 0===n||null===(n=n.value[0])||void 0===n?void 0:n.subCards.map((e=>{var t;const n=e.intAttributes&&1==e.intAttributes.disableProfile;return{...e,profileId:n?null:e.profileId,displayName:e.name,logos:[{imageLink:{href:null===(t=e.image)||void 0===t?void 0:t.url}}]}})):[]}async publisherUserAction(e,t,n){if(!e||!t)return null;const i=await this.getRequestInit();i.method=n;let r=await this.getCommonParams();"POST"===n?i.body=JSON.stringify({actionType:t,targetId:e,targetType:"SourceProvider"}):"DELETE"===n&&(r=[...r,{key:"$filter",value:`actionType eq '${t}' and targetId eq '${e}'`}]);const o=(0,s.PH)(this.actionsServiceEndpoint);this.appendQs(r,o);const a=await this.sendRequest(decodeURIComponent(o.href),i,`deleteUserAction ${t}`,!0,!0);if(a.status>=400){const n=`OneService returned error response. Status: ${a.status} for actionType: ${t}, targetId: ${e}`;throw new Error(n)}return a}async updateSourceFollowState(e,t,n){if(!e)return null;const i=await this.getRequestInit();let r=await this.getCommonParams();r=[...r],t?(i.method="POST",i.body=JSON.stringify({targetId:e})):(i.method="DELETE",r=[...r,{key:"targetId",value:e}]),n&&o.Al.CurrentFlightSet.has("prg-followdata-t")&&r.push({key:"communitymetadata",value:`itemid:${(null==n?void 0:n.contentId)||"undefined"},lineage:${(null==n?void 0:n.actionPosition)||`${a.jG.AppType}>PublisherServiceClient>UndefinedLineage`}`});const c=(0,s.PH)(this.followActionSourceEndpoint);this.appendQs(r,c);const d=t?"follow":"unfollow";try{return await this.sendRequest(decodeURIComponent(c.href),i,`updateSourceFollowState ${d}`,!0,!0)}catch(t){throw new Error(`OneService returned error response. Community follow service  for targetId: ${e}, action: ${d}`)}}async updatePublisherReadTime(e,t,n){if(!e)return null;const r=await this.getRequestInit(),o=await this.getCommonParams(),a=i.Read;r.method="POST",r.body=JSON.stringify({actionType:a,targetType:n,targetId:e,updatedDateTime:t});const c=(0,s.PH)(this.actionsServiceEndpoint);this.appendQs(o,c);try{return await this.sendRequest(decodeURIComponent(c.href),r,`updateSourceReadTime ${a}`,!0,!0)}catch(t){throw new Error(`OneService returned error response for actionType: ${a}, targetId: ${e}`)}}async getUserPublishersReadTimes(){try{const e=await this.generatePublisherStatusRequest(void 0,i.Read);return null==e?void 0:e.value}catch(e){throw new Error("OneService returned error response for fetching followed sources read times.")}}async getUserPublisherStatus(e,t){var n;return!(null===(n=(await this.generatePublisherStatusRequest(e,t)).value)||void 0===n||!n.length)}async generatePublisherStatusRequest(e,t){const n=await this.getRequestInit();n.method="GET";const i=e?`and targetId eq '${e}'`:"";let o=await this.getCommonParams();o=[...o,{key:"$filter",value:`actionType eq '${t}' ${i} `}];const a=(0,s.PH)(this.actionsServiceEndpoint);return this.appendQs(o,a),(0,r.aH)()||(0,g.s6)(a),await this.sendRequest(decodeURIComponent(a.href),n,`getUserPublisherStatus ${t}`)}async getUserActions(e,t=100){const n=await this.getRequestInit(),i=[...await this.getCommonParams(),{key:"$filter",value:`actionType eq '${e}' and deleted eq false and targetType eq 'SourceProvider'`},{key:"$top",value:`${t}`}],o=(0,s.PH)(this.actionsServiceEndpoint);return this.appendQs(i,o),(0,r.aH)()||(0,g.s6)(o),await this.sendRequest(decodeURIComponent(o.href),n,`getUserActions ${e}`)}async getPublisherDetails(e){const t=await this.getRequestInit(),n=(0,s.PH)(this.publishersServiceEndpoint),i=[...c.$D.getOneServiceParamsWithoutAuth(null,this.ocid,this.addPageInfoToOcid),{key:"ids",value:e.join(",")}];return this.appendQs(i,n),await this.sendRequest(decodeURIComponent(n.href),t,"getPublisherDetails")}async getCommonParams(){var e;"winWidgets"===a.jG.AppType&&(this.ocid="sidebar"===(null===(e=o.Al.ClientSettings)||void 0===e?void 0:e.pagetype)?"shoreline":"winp2",this.addPageInfoToOcid=!1);if("windowsShell"===a.jG.AppType&&(this.ocid="windows-windowsshellhp-feeds",this.addPageInfoToOcid=!1),(0,r.ce)()&&(this.addPageInfoToOcid=!1),(0,r.aH)())return this.getSapphireQueryParams();this.forcedApiKey&&(this.addPageInfoToOcid=!1),(0,r._3)()&&(this.ocid="OnOSkypeChannels");const t=await this.isUserSignedIn()?c.$D.getOneServiceParamsWithAuth(a.jG.UserId||a.jG.ActivityId,this.ocid,this.addPageInfoToOcid):c.$D.getOneServiceParamsWithoutAuth(a.jG.UserId||a.jG.ActivityId,this.ocid,this.addPageInfoToOcid);if(this.forcedApiKey){t.find((e=>"apikey"==e.key)).value=this.forcedApiKey}return t}getSapphireQueryParams(){const e=c.$D.getOneServiceNonDynamicParamsWithoutAuth(this.ocid,this.addPageInfoToOcid),t=(0,l._4)();return t&&(e.push({key:a.jG.OneServiceContentMarketQspKey,value:t.market}),a.jG.ShouldUseFdheadQsp&&e.push({key:"fdhead",value:t.features}),e.push({key:"activityId",value:t.activityId}),t.latitude&&t.longitude&&e.push({key:"location",value:`${t.latitude}|${t.longitude}`})),e}async getRequestInit(e=null){return null==e&&(e={method:"GET"}),e.credentials="include",e.headers=(0,u.wq)()?await(0,p.d)():await c.$D.getOneServiceHeaders(),e}async isUserSignedIn(){const e=(0,o.nP)().UserIsSignedIn;if(void 0!==e)return e;return await(0,f.XJ)()===m.Hy.SignedIn}async sendRequest(e,t,n,i,o){return(0,r.aH)()?await this.sapphireRequest(decodeURIComponent(e),t):await this.networkRequest(decodeURIComponent(e),t,n,i,o)}async sapphireRequest(e,t){const n={url:e,headers:t.headers,body:t.body,refresh:!0};let i;switch(t.method){case"POST":i=await(0,h.Ef)(n);break;case"DELETE":i=await(0,h.o9)(n);break;default:i=await(0,h.FM)(n)}return JSON.parse(i||"{}")}async networkRequest(e,t,n,i,r){return(0,d.w)((async()=>{const n=await this.fetchImpl(e,t);if(!n.ok)throw Error(n.statusText);return i&&(0,g.T1)(),r?n:n.json()}),n)}appendQs(e,t){e.forEach((e=>{e.value&&t.searchParams.set(e.key,e.value)}))}setForcedApiKey(e){this.forcedApiKey=e}}},98850:function(e,t,n){"use strict";n.d(t,{cB:function(){return d}});var i=n(54297);"undefined"!=typeof window&&window.location.href;const r="timestamp_",o="force_timestamp_",a="_jssMap",s="keys_",c="lastKnown_";function d(){(0,i.$o)().supported&&((0,i.$o)().removeSubstringKeys(c),(0,i.$o)().removeSubstringKeys(r),(0,i.$o)().removeSubstringKeys(o),(0,i.$o)().removeSubstringKeys(s),(0,i.$o)().removeSubstringKeys(a))}},80512:function(e,t,n){"use strict";n.d(t,{LZ:function(){return c},b8:function(){return a},gZ:function(){return i},pR:function(){return r},wc:function(){return s}});var i,r,o=n(37477);function a(e){switch(e){case o.PL.Article:return 13;case o.PL.Slideshow:return 14;case o.PL.Video:return 15;default:return null}}function s(e,t){return t?e.find((e=>t.includes(e.type))):null}function c(e,t){return t?e.find((n=>{if(!t.includes(n.type))return!1;if(n.type===r.EXPLORE){const t=new Set([r.EXPLICITLIKE,r.FOLLOWEDTOPIC,r.FOLLOWEDPUBLISHER]);return e.every((e=>!t.has(e.type)))}return!0})):null}!function(e){e.TRENDING="trending",e.TOPQUESTIONS="topQuestions",e.HIGHLIGHTS="highlights",e.HOT="hot",e.VIEWS="views",e.OPINION="opinion",e.LOCAL="local",e.EXPLICITLIKE="explicitLike",e.FOLLOWEDTREATMENT="followed",e.FOLLOWEDTREATMENTTOPIC="followedTopic",e.FOLLOWEDTREATMENTPUBLISHER="followedPublisher"}(i||(i={})),function(e){e.FOLLOWEDTOPIC="followTopic",e.FOLLOWEDPUBLISHER="followPublisher",e.TRENDING="trending",e.LOCAL="local",e.EXPLICITLIKE="explicitLike",e.EXPLORE="explore"}(r||(r={}))},37477:function(e,t,n){"use strict";n.d(t,{PL:function(){return i},TU:function(){return a},ne:function(){return o}});var i,r=n(82898);function o(e){switch(e){case"ArticlePreview":case"article":return r.uH.Article;case"SlideshowPreview":case"slideshow":return r.uH.Gallery;case"video":case"VideoPreview":return r.uH.Video;case"WebContentPreview":return r.uH.WebContent;case"WebContentExternal":return r.uH.ExternalLink;default:return null}}!function(e){e.NearbyCard="LocalNearby",e.MobileTrendingSearchCard="mobile-trending-search-card",e.DailyTriviaCard="EventSDCardDailyTrivia",e.LearningNasaCard="EventSDCardLearningNasa",e.LearningTriviaCard="EventSDCardTriviaNasa",e.AutosGarageCard="AutosCGCard",e.WidgetsNotificationsCard="widgetsNotificationsCard",e.DonationNpoCard="DonationNpoCard",e.EntertainmentPremierCard="premier-sd-card",e.EventSDCardOscarsPrm="EventSDCardOscarsPrm",e.BingThisOrThatCard="bing-this-or-that-card",e.BingDailyQuizCard="bing-daily-quiz-card",e.RewardsDailyCheckinCard="RewardsDailyCheckIn",e.RichCalendarCard="RichCalendarSD",e.DailyGreetingCard="DailyGreeting",e.EventSDCardElectionMIT1="EventSDCardElectionMIT1",e.EventSDCardElectionMIT2="EventSDCardElectionMIT2",e.EventSDCardElectionMIT3="EventSDCardElectionMIT3",e.CommunityCard="CommunityInfo",e.HotListCard="hotlist",e.MobileRewardsCard="Rewards",e.TabbedInfopaneCard="tabbedinfopane",e.TabbedInfopaneCardTab="tabbed-infopane-tab",e.MangaCard="MangaCard",e.MobileShoppingCard="ShoppingFeed1",e.MobileShoppingCard2="ShoppingFeed2",e.MobileShoppingCard3="ShoppingFeed3",e.MobileShoppingCard4="ShoppingFeed4",e.VideoShoppingCard="VideoShoppingSDCard",e.VideoShoppingCarouselCard="VideoShoppingCarousel",e.SuperListCard="super-list-card",e.RealEstateCard="real-estate-card",e.RealEstateCarousel="RealEstateCarousel",e.PrayerTimesCard="PrayerTimes",e.PrismCarouselCard="PrismFeedCarousel",e.TrendingSearchCard="TrendingSearchCard",e.CommuteCard="CommuteMetadata",e.DigestCard="digest-card",e.Article="article",e.Slideshow="slideshow",e.Video="video",e.Spotlight="content360",e.Infopane="infopane",e.TabbedInfopane="tabbedInfopane",e.HalfPane="HalfPane",e.HeadToHead="HeadToHead",e.Mosaic="Mosaic",e.Triptych="Triptych",e.TabbedFeedCard="GroupedXfeedUpsell",e.TabbedInfopaneTab="tabbedInfopaneTab",e.WebContent="webcontent",e.ExternalLink="link",e.ChannelCarousel="followCarousel",e.ChannelFilterCard="filteredChannels",e.DynamicFilteredChannel="dynamicfilteredchannels",e.InterestManagementCard="InterestManager",e.GamingInterestGroup="GamingInterestGroup",e.DenseList="DenseList",e.BackFillContent="BackfillContent",e.MyBriefRiverCard="toppicks",e.panoCard="panocard",e.NativeAd="nativead",e.NativeTopAd="nativetopad",e.CmsAd="cmsad",e.BuyDirectAd="directbuyad",e.AmplifyAd="amplifyad",e.BoostAd="BoostAd",e.EventSDCardAmplifyAds="EventSDCardAmplifyAds",e.FirstPartyAd="firstpartyad",e.ShoppingCard="ShoppingCard",e.ShoppingBWMCard="BuyWithMicrosoftCard",e.ShoppingBWMCarousel="BuyWithMicrosoftCarousel",e.EdgeShoppingCard="EdgeShoppingCard",e.ShoppingCarousel="ShoppingCarousel",e.ShoppingCarousel2="ShoppingCarousel2",e.ShoppingRiver="ShoppingRiver",e.EventSDCardShopping="EventSDCardShopping",e.EventInfopaneShoppingAI="EventInfopaneShoppingAI",e.ComicsCarousel="ComicsCarousel",e.EditorsPickCarousel="EditorsPickCarousel",e.SelectCarousel="SelectCarousel",e.DailyFixGamesCarousel="DailyFixGamesCarousel",e.NewsSegmentCarousel="NewsSegmentCarousel",e.SubscriptionCarousel="SubscriptionCarousel",e.GroceryCouponSdCard="GroceryCouponSdCard",e.BeaconProviderUpsell="BeaconProviderUpsell",e.MoneyTopicStripe="MoneyTopicStripe",e.SportsTopicStripe="SportsTopicStripe",e.LinkedInCard="linkedInNewsCard",e.SectionHeader="GreetingsUpsell",e.TopStories="topStories",e.TopStoriesV2="cgtopStories",e.NewsGroups="newsGroups",e.NewsAnswerModule="NewsAnswerModule",e.WorkHeadlines="workNews",e.Trending="trendingnow",e.TrendingTopics="TrendingTopicsUpsellAnaheim",e.LocalNews="XfeedUpsell",e.LocalNewsFeed="LocalNewsFeed",e.SageGroupedFeed="SageGroupedFeed",e.TrendingInTenMinutes="trendingInTenMinutes",e.Horoscope="Horoscope",e.Elections="EventSDCardElection",e.RecommendedSearchCarousel="RecommendedSearchCarousel",e.RecommendedSearchesCard="RecommendedSearch",e.OnThisDay="OnThisDay",e.Lottery="Lottery",e.PartnerUpsell="PartnerUpsell",e.LeadGenCard="LeadGenCard",e.Qna="qnacard",e.quizcard="quizcard",e.Recipes="recipecard",e.Inspiration="PrismFeedCard",e.Rewards="rewardscard",e.TravelDestinationCard="TravelDestinationCard",e.TravelDestinationCarouselCard="TravelDestinationCarouselCard",e.TravelInspirationCard="TravelInspirationCard",e.TravelArticleCard="TravelArticleCard",e.BingHealthCovid19StatsCard="Covid19Stats",e.BingHealthFitnessCard="healthcard",e.HealthTipCard="healthtipcard",e.HealthRiverCard="healthrivercard",e.PollsCard="pollscard",e.PlaceholderCard="placeholder",e.WinAppAds="WinAppAds",e.CashbackAds="CashbackAds",e.Promotion="Promotion",e.PromotedAd="PromotedAd",e.BingVideo="BingVideo",e.BingVideoCarousel="BingVideoCarousel",e.CasualGamesCarousel="CasualGamesCarousel",e.CasualGamesProng2Carousel="CasualGamesProng2Carousel",e.CasualGamesStripeCarousel="CasualGamesStripeCarousel",e.EsportsCasualGames="esportsCasualGames",e.EsportsHighlight="esportsHighlight",e.EsportsLiveStream="esportsLiveStream",e.EsportsMatch="esportsMatch",e.EsportsTournament="esportsTournament",e.EventSDCardWorldCup="EventSDCardWorldCup",e.EventSDCardWorldCup2="EventSDCardWorldCup2",e.ShoppingFeedCard="ShoppingFeedCard",e.WeatherHero="WeatherHero",e.WeatherSummary="WeatherSummary",e.WeatherSummary_spotlight="WeatherSummary_spotlight",e.StockQuote="StockQuote",e.StockQuote_spotlight="StockQuote_spotlight",e.MoneyInfo="MoneyInfo",e.MoneyPreWL="MoneyPreWL",e.MoneyCrypto="CryptoCard",e.MoneyMarketBrief="MarketBrief",e.MoneyMoreForYouCard="MoneyMoreForYouCard",e.FinanceHeroMarket="FinanceHeroMarket",e.FinanceHeroMarketChart="FinanceHeroMarketChart",e.FinanceHeroNews="FinanceHeroNews",e.FinanceHeroMovers="FinanceHeroMovers",e.FinanceHerowlsummary="FinanceHerowlsummary",e.FinanceHeroSuggested="FinanceHeroSuggested",e.FinanceHeroWatchlistIdeas="FinanceHeroWatchlistIdeas",e.FinanceHeroUpcomingEarnings="FinanceHeroUpcomingEarnings",e.FinanceHeroCurrencies="FinanceHeroCurrencies",e.FinanceHeroCrypto="FinanceHeroCrypto",e.SportsMatch="SportsMatch",e.SportsOlympics="SportsOlympics",e.SportsHeroFre="SportsHeroFre",e.SportsHeroLeagueTodaysEvents="SportsHeroLeagueTodaysEvents",e.SportsHeroMatch1SeasonStats="SportsHeroMatch1SeasonStats",e.SportsHeroMatch1Stats="SportsHeroMatch1Stats",e.SportsHeroMatch2SeasonStats="SportsHeroMatch2SeasonStats",e.SportsHeroMatch2Stats="SportsHeroMatch2Stats",e.SportsHeroMatch3SeasonStats="SportsHeroMatch3SeasonStats",e.SportsHeroMatch3Stats="SportsHeroMatch3Stats",e.SportsHeroMatchStatistics="SportsHeroMatchStatistics",e.SportsHeroNews="SportsHeroNews",e.SportsHeroOneVsManyEventResult="SportsHeroOneVsManyEventResult",e.SportsHeroOneVsOneEventResult="SportsHeroOneVsOneEventResult",e.SportsHeroSeasonStatistics="SportsHeroSeasonStatistics",e.SportsHeroStandingsRankings="SportsHeroStandingsRankings",e.SportsHeroTeamStandings="SportsHeroTeamStandings",e.SportsHeroTeamStandingWithEvents="SportsHeroTeamStandingWithEvents",e.SportsHeroTeamStandingWithMedals="SportsHeroTeamStandingWithMedals",e.SportsHeroTeamVsTeam="SportsHeroTeamVsTeam",e.SportsHeroTeamVsTeamEventResult="SportsHeroTeamVsTeamEventResult",e.SportsHeroVideo="SportsHeroVideo",e.TrafficDelays="TrafficDelays",e.TrafficInfo="TrafficInfo",e.Transit="Transit",e.TrafficIncidents="TrafficIncidents",e.TrafficCameras="TrafficCameras",e.TrafficCamerasWithSummary="TrafficCamerasWithSummary",e.TravelTimesWithSummary="TravelTimesWithSummary",e.TrafficMap="TrafficMap",e.TrafficNews="TrafficNews",e.TrafficTransit="TrafficTransit",e.TrafficSummary="TrafficSummary",e.ShoppingProng2c="ShoppingProng2c",e.ShoppingProngCardResponse="ShoppingProngCardResponse",e.ShoppingProngCarousel="ShoppingProngCarousel",e.ShoppingProngTracking="ShoppingProngTracking",e.ShoppingMerchantCategoryDeals="ShoppingMerchantCategoryDeals",e.ShoppingVideoCarousel="ShoppingVideoCarousel",e.WatchVideoCard="WatchVideoCard",e.Group="group",e.Upsell="FreUpsell",e.Dense="densetab",e.LocalGuide="localdaycard",e.Marketplace="MarketPlace",e.MarketplaceEvent="EventSDCardMarketplace",e.GamingNews="gaming",e.GamingClip="GamingClip",e.GamingClipsCarousel="GamingClipsCarousel",e.GamingHighlightClipsCarousel="GamingHighlightClipsCarousel",e.GamingCompete="GamingCompete",e.GamingGamerModeUpsellCard="GamingGamerModeUpsell",e.GamingHighlight="GamingHighlight",e.GamingHighlightsCarousel="GamingHighlightsCarousel",e.GamingLiveStream="GamingLiveStream",e.GamingLiveStreamCarousel="GamingLiveStreamCarousel",e.GamingMatch="GamingMatch",e.GamingPersonalize="GamingPersonalize",e.GamingRecentlyPlayed="GamingRecentlyPlayed",e.GamingRecommendedGames="GamingRecommendedGames",e.GamingReddit="GamingReddit",e.GamingRewards="GamingRewardsCard",e.GamingTournament="GamingTournament",e.GamingUpcomingGames="GamingUpcomingGames",e.GamingVideoCarousel="GamingVideoCarousel",e.GamingVod="GamingVod",e.GamingVideo="GamingVideo",e.AiCharacterCard="AicharacterCard",e.MicrosoftFeedCard="MicrosoftFeedCard",e.IndustryNewsCard="IndustryNewsCard",e.RecommendedInterests="RecommendedInterests",e.WindowsShellRecommendedInterests="WindowsShellRecommendedInterests",e.CompanyNewsCard="CompanyNewsCard",e.AutosEntityList="AutosEntityList",e.AutosCarousel="AutosCarousel",e.ContainerizedHalfu="containerizedHalfu",e.ComboCard="Combo",e.TopicFeed="TopicFeed",e.TopicFeedLearnSomethingNew="learnsomethingnew",e.TopicFeedDiversity="diversitycard",e.TopicFeedWeekends="eventcontentcardweekend",e.TopicFeedMomentInTime1="eventcontentcardmit1",e.TopicFeedSports="eventcontentcardsports",e.TopicFeedTrendingNow="trending now",e.TopicFeedTopStories="topstories",e.TopicFeedShopping="eventcontentcardshopping",e.TopicFeedWeather="eventdynamiccontentcardweather",e.Calendar="Calendar",e.Entertainment="Entertainment",e.Family="Family",e.M365="M365",e.Photos="Photos",e.ThirdPartyWidget="3pwidget",e.Tips="Tips",e.ToDo="ToDo",e.XboxGamePass="xboxgamepass",e.Tombstone="tombstone",e.GroupedContent="GroupedContentFeed",e.UserInterestTopic="UserInterestTopic",e.UserInterestNTPProvider="UserInterestNTPProvider",e.SuggestedInterest="SuggestedInterest",e.TopicSuggestionforConsumptionPage="TopicSuggestionforConsumptionPage",e.ProviderSuggestionForConsumptionPage="ProviderSuggestionForConsumptionPage",e.InterestFeed="InterestFeed",e.ProviderFeed="ProviderFeed",e.InterestChannel="InterestChannel",e.ProviderChannel="ProviderChannel",e.UserInterestTopicAndProvider="UserInterestTopicAndProvider",e.NewsFlipper="NewsFlipper",e.ColdStartArticleFreCard="ArticleFre",e.NewsPromotionCard="PromotionFre",e.WindowsShellTopicsCard="WindowsShellTopicsCard",e.WindowsShellNotificationBanner="genericbadge",e.RewardsDailySet="RewardsDailySet",e.BoostAdsBanner="BoostAdsBanner",e.BoostAdsCoachmark="BoostAdsCoachmark",e.EventSDCardSportsMIT1="EventSDCardSportsMIT1",e.EventSDCardSportsMIT2="EventSDCardSportsMIT2",e.EventSDCardSportsMIT3="EventSDCardSportsMIT3",e.UserInterestProvider="UserInterestProvider",e.WindowsShellMorningDigest="NewsDigest",e.TopicsAndProviders="TopicsAndProviders",e.NotificationCard="NotificationCard",e.NTPMorningDigest="MorningDigest"}(i||(i={}));const a=[i.NativeAd,i.CmsAd,i.AmplifyAd,i.EventSDCardAmplifyAds,i.BoostAd,i.BoostAdsBanner,i.BoostAdsCoachmark,i.BuyDirectAd,i.NativeTopAd,i.FirstPartyAd]},62846:function(e,t,n){"use strict";n.d(t,{Au:function(){return i},Y:function(){return a},pW:function(){return r},tD:function(){return o}});const i="0067acd6d05f4168b92f510d33b9ed74",r="service::api.msn.com::MBI_SSL",o="service::www.msn.com::MBI_SSL",a="api://www.msn.com/OneService.Read"},90158:function(e,t,n){"use strict";n.d(t,{dw:function(){return c},wq:function(){return o}});var i=n(31558);const r={};function o(){var e,t;if(!(0,i.N)())return!1;const n=null===(e=window.sapphireWebViewBridge)||void 0===e?void 0:e.send,r=null===(t=window.webkit)||void 0===t||null===(t=t.messageHandlers)||void 0===t||null===(t=t.send)||void 0===t?void 0:t.postMessage;return n||r}let a;function s(e,t){var n,i,r,o;console.log(e,t);const s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),c={scenario:e,data:{data:t},id:s};a&&!c.data.data.appId&&(c.data.data.appId=a);const d=JSON.stringify(c);return(null===(n=window.webkit)||void 0===n||null===(n=n.messageHandlers)||void 0===n||null===(n=n.send)||void 0===n?void 0:n.postMessage)&&(null===(i=window.webkit)||void 0===i||null===(i=i.messageHandlers)||void 0===i||null===(i=i.send)||void 0===i||i.postMessage(d)),(null===(r=window.sapphireWebViewBridge)||void 0===r?void 0:r.send)&&window.sapphireWebViewBridge.send(d),(null===(o=window.VPsapphireWebViewBridge)||void 0===o?void 0:o.send)&&window.VPsapphireWebViewBridge.send(d),s}function c(e,t,n){if(!(0,i.N)())return;const o=s(e,t);n&&function(e,t){r[e]?r[e].push(t):r[e]=[t]}(o,n)}},47647:function(e,t,n){"use strict";n.d(t,{Nz:function(){return s},Vx:function(){return p},_4:function(){return l},gR:function(){return a}});var i=n(55524),r=n(31558);const o="__SapphireUserInformation__",a=()=>i.Gq.get(o,(()=>null)),s=e=>{i.Gq.set(o,e)},c="__SapphireSSRUserConfig__",d="__SapphireUserConfig__",l=e=>(0,r.N)()?i.Gq.get(d,(()=>e)):(0,r.N)()?null:i.Gq.get(c,(()=>null)),u="__SapphireUserConfigReady__",p=()=>i.Gq.get(u,(()=>!1))},25086:function(e,t,n){"use strict";n.d(t,{o9:function(){return l},FM:function(){return c},Ef:function(){return d}});var i=n(90158),r=n(62846);function o(e,t){if(function(e){try{return(null==e?void 0:e.needHeader)??!1}catch(e){s(`Failed to get feed needHeader Failed with exception : ${e}`)}}(e))try{const e=JSON.parse(t),n=JSON.parse((null==e?void 0:e.header)??null),i=(null==n?void 0:n["ddd-activityid"])??null;i&&async function(e){const t=window.localStorage.getItem(a);if(void 0!==t&&""!==t&&null!==t){const n=t.split(",");return void(n.length<10&&!n.includes(e)&&window.localStorage.setItem(a,`${t},${e}`))}window.localStorage.setItem(a,e)}(i)}catch(e){s(`Failed to get feed needHeader Failed with exception : ${e}`)}}const a="activityIds";function s(e){(0,i.wq)()&&function(e){new Promise(((t,n)=>{!function(e,t){(0,i.dw)("logEvent",e,t)}(e,(e=>{t(e)}))}))}({appId:r.Au,type:"Debug",name:"HP_WEBVIEW_SERVER_LOG",data:{message:e}})}function c(e){return new Promise(((t,n)=>{!function(e,t){(0,i.dw)("getHttp",e,t)}(e,(n=>{t(n),o(e,n)}))}))}function d(e){return new Promise(((t,n)=>{!function(e,t){(0,i.dw)("postHttp",e,t)}(e,(e=>{t(e)}))}))}function l(e){return new Promise(((t,n)=>{!function(e,t){(0,i.dw)("deleteHttp",e,t)}(e,(e=>{t(e)}))}))}},25534:function(e,t,n){"use strict";n.d(t,{_k:function(){return o},gR:function(){return r}});var i=n(90158);function r(e){return new Promise(((t,n)=>{!function(e,t){(0,i.dw)("logEvent",e,t)}(e,(e=>{t(e)}))}))}function o(e){return new Promise(((t,n)=>{!function(e,t){(0,i.dw)("logError",e,t)}(e,(e=>{t(e)}))}))}},31490:function(e,t,n){"use strict";n.d(t,{d:function(){return g}});var i=n(62846),r=n(90158);function o(e){return new Promise(((t,n)=>{!function(e,t){(0,r.dw)("getUserInfo",e,t)}(e,(e=>{t(e)}))}))}var a=n(47647),s=n(25534);function c(e,t){(0,s._k)({type:"Failure",name:"HP_WEBVIEW_APP_ERROR",error:t,data:{error:e,customMessage:t}})}async function d(e){let t=(0,a.gR)();if(t||await async function(){const e=await o({});try{const t=JSON.parse(e);(0,a.Nz)(t)}catch(e){c(e,"SapphireUserConfig.getUserInformationInternal: Failed to parse response")}}(),t=(0,a.gR)()??{},t.isSignedIn){if(t.accessToken)return t.accessToken;{const n=await o({refresh:!0,accountType:t.accountType,type:"AccessToken",scope:e});try{const e=JSON.parse(n);if(!e||!1===e.succeed)return null;if(e.succeed){const n=e.accessToken.startsWith("t=")?e.accessToken.substring(2):e.accessToken;return t.accessToken=n,n}if(Object.keys(e).length>0){return Object.values(e).find((e=>e&&"boolean"!=typeof e&&"AAD"!==e))||null}}catch(e){c(e,`SapphireUserConfig.getAccessTokenByOAuth: Failed to parse ${t.accountType} access token`)}}}return null}var l=n(83102),u=n(31558);var p=n(21789);let h;async function g(e=!1,t=!1){if(void 0===h&&(h="edgeMobile"===(null===p.jG||void 0===p.jG?void 0:p.jG.AppType)),h)return await async function(){var e;const t={};t.SiteName="www.msn."+(null!==p.jG&&void 0!==p.jG&&p.jG.IsChinaCompliance?"cn":"com");const n=await d(i.Y);return n&&(t.Authorization="Bearer "+n),null!==p.jG&&void 0!==p.jG&&p.jG.UserId&&null!==p.jG&&void 0!==p.jG&&null!==(e=p.jG.CurrentRequestTargetScope)&&void 0!==e&&null!==(e=e.pageExperiments)&&void 0!==e&&e.includes("1s-r-user-qsp")&&(t.Muid=p.jG.UserId),t}();const n=await async function(e=!1,t=!1){const n={},r=e&&t,s=await async function(e){const t=(0,a._4)();if(!(0,u.N)()){const{accountType:e,ssrAccessToken:n}=t||{};return e===l.Qm.AAD&&n?`Bearer ${n}`:e===l.Qm.MSA&&n?n:null}const n=(0,a.gR)()??{};if(n.isSignedIn&&"AAD"===n.accountType){const e=await o({refresh:!0,accountType:"AAD",type:"AccessToken"});try{const t=JSON.parse(e);if(t.accessToken&&t.accessToken.length>0)return`Bearer ${t.accessToken}`}catch(e){c(e,"SapphireUserConfig.getAccessToken: Failed to parse AAD access token")}}if(n.isSignedIn&&"MSA"===n.accountType){const t=await o({refresh:!0,accountType:"MSA",type:"AccessToken",scope:e});try{const e=JSON.parse(t);if(e.succeed)return e.accessToken}catch(e){c(e,"SapphireUserConfig.getAccessToken: Failed to parse MSA access token")}}return null}(function(e){return e?i.tD:i.pW}(r));if(!s)return n;if(r)n.Authorization=s;else{const{accountType:e}=(0,a._4)()??{};"MSA"===e?n.UserAuthToken=s:"AAD"===e&&(n.Authorization=s)}return n}(e,t),{muid:r}=(0,a._4)()??{};return r&&(n.MUID=r),n}},48503:function(e,t,n){"use strict";n.d(t,{R:function(){return o},U:function(){return r}});let i=!1;const r={purgeCacheAsync:async function(e){if(this.isServiceWorkerActive()){const t=(await caches.keys()).filter((t=>t.includes(e)));await Promise.all(t.map((e=>caches.delete(e))))}},purgeEntryInCache:async function(e,t,n){if(this.isServiceWorkerActive()){const i=await caches.open(e),r=(await i.keys()).filter((e=>e.url.startsWith(t)&&e.method===n));await Promise.all(r.map((e=>i.delete(e))))}},isServiceWorkerActive:function(){const{navigator:e}=window,t=e&&e.serviceWorker&&e.serviceWorker.controller;return t&&"activated"===t.state},getIsServiceWorkerEnabled:function(){return i},setIsServiceWorkerEnabled:function(e){i=e}};var o;!function(e){e.base="base",e.followedTopics="followedTopics",e.publishersProfile="publishersProfile",e.river="river",e.subscribedPublishers="subscribedPublishers",e.financeGraphAction="financeGraphAction"}(o||(o={}))},74450:function(e,t,n){"use strict";function i(e){if(!navigator.serviceWorker)return;const t=navigator.serviceWorker.controller;return t?r(t,e):navigator.serviceWorker.ready.then((t=>{const n=t.active;if(n)return r(n,e)}))}function r(e,t){return new Promise((n=>{const i=new MessageChannel;i.port1.onmessage=e=>{n(e.data)},e.postMessage(t,[i.port2])}))}n.d(t,{T:function(){return i}})},31499:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var i,r=n(17556);class o{}(i=o).layoutAnimationStart=new r.C("layoutAnimationStart"),i.layoutAnimationComplete=new r.C("layoutAnimationComplete"),i.headerTransitionEnd=new r.C("headerTransitionEnd")},81959:function(e,t,n){"use strict";n.d(t,{O:function(){return o},y:function(){return a}});var i,r=n(17556);class o{}function a(){o.setSignInState.unregisterObservers()}(i=o).setSignInState=new r.C("setSignInStateSignature"),i.updateFlyoutDisplayState=new r.C("setFlyoutDisplayStateSignature")},71247:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var i=n(76166),r=n(81959),o=n(31558);class a extends i.e{constructor(e,t,n,i,r,a,s){super(e,t,n,i,r,a,s),this._authPrivateApi=(0,o.N)()&&window&&window.chrome&&window.chrome.authPrivate,this.registerSignInEventChangedCallback()}updateSignInState(e){var t;null===r.O||void 0===r.O||null===(t=r.O.setSignInState)||void 0===t||null===(t=t.getActionSender(this))||void 0===t||t.send(e)}updateSignInFlyoutDisplayState(e){var t;null===r.O||void 0===r.O||null===(t=r.O.updateFlyoutDisplayState)||void 0===t||null===(t=t.getActionSender(this))||void 0===t||t.send(e)}registerSignInEventChangedCallback(){this._authPrivateApi&&this._authPrivateApi.onSignInStateChanged.addListener((e=>{const t=e;this.updateSignInState(!!t.account_id)}))}}},64999:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(99551),r=n(81959);class o{reduce(e,t){if(!e)return{isUserSignedIn:void 0,isFlyoutDisplayed:!1};if(!t)return e;let n;return i.G.handleAction(t,r.O.setSignInState,(t=>{n={...e,isUserSignedIn:t}})),i.G.handleAction(t,r.O.updateFlyoutDisplayState,(t=>{n={...e,isFlyoutDisplayed:t}})),n||e}}},56090:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var i,r=n(17556);class o{}(i=o).disableSmartList=new r.C("disableSmartList"),i.registerSmartList=new r.C("registerSmartList"),i.persistSmartList=new r.C("persistSmartList"),i.updateSmartListBadgeProps=new r.C("updateSmartListBadgeProps"),i.updateSmartListState=new r.C("updateSmartListState"),i.userSignInSignature=new r.C("userSignInSignature"),i.userSignOutSignature=new r.C("userSignOutSignature"),i.smartListItemsReadySignature=new r.C("smartListItemsReadySignature")},19216:function(e,t,n){"use strict";n.r(t),n.d(t,{SmartListSharedActions:function(){return r.j},SmartListSharedDataConnector:function(){return s},SmartListSharedDataReducer:function(){return d},ToolingInfo:function(){return l}});var i,r=n(56090);!function(e){e[e.notStarted=0]="notStarted",e[e.initialized=1]="initialized",e[e.rendered=2]="rendered",e[e.unmounted=3]="unmounted"}(i||(i={}));var o=n(76166),a=n(79545);class s extends o.e{initSmartList(e,t){if(!e)return;const n=this.getSmartList(e);n&&n.initCallback&&n.currentState===i.notStarted&&(e===a.x.edgeShopping?t&&(n.initCallback(t),r.j.updateSmartListState.getActionSender(this).send(e,i.initialized)):(n.initCallback(),r.j.updateSmartListState.getActionSender(this).send(e,i.initialized)))}moveFocusToSmartList(e,t){const n=this.getSmartList(e);return!!(n&&n.focusCallback&&n.renderCallback&&n.currentState===i.rendered)&&(n.focusCallback(t),!0)}renderSmartList(e,t){if(!e||!t)return;const n=this.getSmartList(e);n&&n.renderCallback&&(n.renderCallback(t),r.j.updateSmartListState.getActionSender(this).send(e,i.rendered))}unmountSmartList(e,t){if(!e||!t)return;const n=this.getSmartList(e);n&&n.unmountCallback&&n.currentState===i.rendered&&(n.unmountCallback(t),r.j.updateSmartListState.getActionSender(this).send(e,i.unmounted))}updateSignInStatus(e,t){const n=this.getSmartList(e);return!(!n||!n.updateSignInStatusCallback)&&(n.updateSignInStatusCallback(t),!0)}getSmartList(e){if(!e)return;const t=this.getCurrentState().smartLists;return t&&0!==t.size?t.get(e):void 0}}var c=n(99551);class d{reduce(e,t){if(!e)return{smartLists:new Map};if(!t)return e;let n=!1;const o={...e};return n=n||c.G.handleAction(t,r.j.disableSmartList,(e=>{if(e){const t=o.smartLists.get(e);t&&(t.currentState=i.notStarted)}})),n=n||c.G.handleAction(t,r.j.registerSmartList,(e=>{e&&(o.smartLists.has(e.experienceType)||o.smartLists.set(e.experienceType,{badgeProps:void 0,currentState:i.notStarted,focusCallback:e.focusShouldMove,initCallback:e.initShouldFire.bind(e),isUserSignedIn:!1,renderCallback:e.renderShouldFire,shouldPersist:void 0,unmountCallback:e.unmountShouldFire,updateSignInStatusCallback:e.updateSignInStatus}))})),n=n||c.G.handleAction(t,r.j.persistSmartList,(e=>{if(e){const t=o.smartLists.get(e);t&&(t.shouldPersist=!0)}})),n=n||c.G.handleAction(t,r.j.updateSmartListState,((e,t)=>{if(e){const n=o.smartLists.get(e);n&&(n.currentState=t)}})),n=n||c.G.handleAction(t,r.j.updateSmartListBadgeProps,((e,t)=>{if(e){const n=o.smartLists.get(e);n&&t&&(n.badgeProps=t)}})),n=n||c.G.handleAction(t,r.j.userSignInSignature,(e=>{if(e){const t=o.smartLists.get(e);t&&(t.isUserSignedIn=!0)}})),n=n||c.G.handleAction(t,r.j.userSignOutSignature,(e=>{if(e){const t=o.smartLists.get(e);t&&(t.badgeProps=null,t.isUserSignedIn=!1)}})),n?o:e}}const l={experienceConfigSchema:{}}},56117:function(e,t,n){"use strict";var i,r,o;n.d(t,{FE:function(){return r},H:function(){return i}}),function(e){e.like="like",e.love="love",e.surprised="surprised",e.thinking="thinking",e.sad="sad",e.angry="angry",e.share="share"}(i||(i={})),function(e){e.upvote="upvote",e.downvote="downvote"}(r||(r={})),function(e){e.star1="star1",e.star2="star2",e.star3="star3",e.star4="star4",e.star5="star5"}(o||(o={}))},28914:function(e,t,n){"use strict";n.d(t,{o:function(){return p}});var i=n(56401),r=n(23549),o=n(47969),a=n(7476);const s=/^fe-b\S+fe-b$/,c=/^fe-repeat\S+fe-repeat$/,d=e=>e.nodeType===Node.COMMENT_NODE&&(s.test(e.textContent)||c.test(e.textContent)),l=(e,t="")=>{const n=[];for(const i in e){const r=e[i],o=t+">"+`[nodeidx:${i}]${r.nodeName}`;if(d(r))n.push({text:r.textContent,path:o.toLowerCase()});else{const e=u(r,o);n.push(...e)}}return n},u=(e,t="")=>{var n;const i=[],r=t+">"+e.nodeName;if(null!==(n=e.shadowRoot)&&void 0!==n&&n.childNodes.length){var o;const t=l(null===(o=e.shadowRoot)||void 0===o?void 0:o.childNodes,r+">shadowRoot");i.push(...t)}if(e.childNodes){const t=l(e.childNodes,r);i.push(...t)}return i},p=(e,t)=>{if(!window.isSSRCompleted)return;const n=(0,o.F)(performance.now());let s=!1;const c=()=>l("10s timeout"),d=()=>l("beforeunload");function l(i){if((0,o.F)(performance.now())-n<1e4||s||t.wasSet())return;s=!0,window.removeEventListener("beforeunload",d);const c=performance.now(),l=u(e,"body"),p=performance.now()-c;l.length&&r.M0.sendAppErrorEvent({...a.fLy,message:"SSR unhydrated marker detected.",pb:{...a.fLy,customMessage:`${l.length} unhydrated marker detected. Trigger condition: ${i}.`+(l.length>10?`Unhydrated markers are truncated due to lenghth ${l.length} > 10.`:""),hydrationMarkers:l.slice(0,10),scanCost:p}})}(0,i.c)((()=>window.requestIdleCallback(c)),1e4),window.addEventListener("beforeunload",d)}},40015:function(e,t,n){"use strict";n.d(t,{AF:function(){return c},li:function(){return d},yC:function(){return a}});var i=n(55524);const r=()=>i.Gq.get("__ssr_util__preload_bundles",(()=>new Set)),o=()=>i.Gq.get("__ssr_util__pending_preload_bundles",(()=>new Set)),a=()=>{const e=(()=>{const e=r(),t=[...e];return e.clear(),t})();return e.length?`<script nonce="${window.NONCE_ID}">window.ssrLoadedBundles.publish(${JSON.stringify(e)});<\/script>`:""},s=new Map,c=(e,t)=>{if(s.has(e))throw new Error(`Bundle ${e} is already registered.`);s.set(e,t);const n=o();return n.has(e)&&(n.delete(e),t()),()=>(r().add(e),t())},d=e=>{const t=o(),n=e.map((async e=>{if(s.has(e))return s.get(e)();t.add(e)}));return Promise.all(n)}},45492:function(e,t,n){"use strict";let i;function r(){return i||(i=new Promise((e=>{if(!window.isSSREnabled)return void e();const t=new URLSearchParams(location.search).get("delayTopDownHydration");"1"===t||"true"===t?window.startHydration=e:"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{e()}),{once:!0}):e()}))),i}function o(){const e=window.customElements.define,t=window.customElements.get,n=[];window.customElements.define=function(e,t,i){n.push({name:e,ctor:t,options:i})},window.customElements.get=function(e){return t.call(window.customElements,e)||!!n.find((t=>t.name===e))},r().then((()=>{window.customElements.define=e,n.forEach((({name:e,ctor:t,options:n})=>{customElements.define(e,t,n)})),window.customElements.get=t}))}n.d(t,{B:function(){return o},L:function(){return r}})},16356:function(e,t,n){"use strict";n.d(t,{$e:function(){return i}});n(24478);function i(){const e=performance.getEntriesByType("navigation")[0].serverTiming;if(e){const t=e.find((e=>"rsClusterName"===e.name));if(t)return t.description}}},34061:function(e,t,n){"use strict";n(10863);var i=n(7476),r=n(88826),o=n(56687),a=n(7279),s=n(49820),c=n(23549),d=n(21789),l=n(67213);class u extends a.Hi{constructor(e,t){null!=e&&e.shadowRoot&&(null===c.M0||void 0===c.M0||c.M0.observeShadowRoot(e.shadowRoot)),super(e,t)}connect(){try{super.connect()}catch(n){if(this.needsHydration){var e;this.needsHydration=!1;const o={...i.qbM.pb,customMessage:`Error: ${null==n?void 0:n.message}`};if(n instanceof s.AH){const e=new XMLSerializer;o.targetNodeId=n.factory.targetNodeId,o.targetTagName=n.factory.targetTagName,o.viewMarkup=e.serializeToString(n.fragment),o.templateString=n.templateString}var t;if(n.factories)o.factories=JSON.stringify(null===(t=n.factories)||void 0===t?void 0:t.map((e=>{var t;return{...e,dataBinding:{...null==e?void 0:e.dataBinding,evaluate:null==e||null===(t=e.dataBinding)||void 0===t||null===(t=t.evaluate)||void 0===t?void 0:t.toString()}}})));n.node&&(o.nodeHTML=n.node.outerHTML||""),n.templateString&&(o.templateString=n.templateString),n.stack&&(o.stack=n.stack);((null===d.jG||void 0===d.jG||null===(e=d.jG.CurrentRequestTargetScope)||void 0===e?void 0:e.pageExperiments)||[]).includes("prg-swssrbspg-v1")&&(0,l.RV)(),this.source.tagName.includes("HERO")?c.M0.sendAppErrorEvent({...i.C3T,message:`Error while hydrating component: ${this.source.tagName}`,pb:o}):"BACKGROUND-IMAGE"==this.source.tagName?c.M0.sendAppErrorEvent({...i.ZAB,message:`Error while hydrating component: ${this.source.tagName}`,pb:o}):(0,r.H)(i.qbM,`Error while hydrating component: ${this.source.tagName}`,void 0,o),super.connect()}else c.M0.sendAppErrorEvent({...i.FvO,message:`Error while connecting component: ${this.source.tagName}`,pb:{...i.FvO.pb,stack:(0,o.n)(n,!0)}})}}}a.t3.setStrategy(u)},93893:function(e,t,n){"use strict";n.d(t,{L:function(){return s}});var i=n(77036),r=n(55524),o=n(291);class a{constructor(){this.config={},this.strings={},this.initialized=!1}static getInstance(){return r.Gq.get("__SuperComponentDataHelper__",(()=>new a))}async initConfig(e){this.initialized||(this.config=await this.getConfigFromRef(e)||{},this.strings=this.config&&this.config.localizedStrings||{},this.initialized=!!this.config&&!!this.config.localizedStrings)}getConfig(){return this.config}getLocStrings(){return this.strings}async getConfigFromRef(e){try{const t=(null==e?void 0:e.configRef)||{experienceType:"SuperComponentData",instanceSrc:"default"},n=await i.U.getConfig(t);return n&&n.properties}catch(e){return{}}}}const s=(0,o.h)(a)},78460:function(e,t,n){"use strict";n.d(t,{k:function(){return b}});var i,r=n(55524),o=n(291),a=n(99452),s=n(33940),c=n(31558),d=n(21789);!function(e){e.MatchMedia="MatchMedia",e.BaseLayerLuminance="BaseLayerLuminance",e.External="External",e.Defalut="MatchMedia"}(i||(i={}));const l="DefaultConfig",u=Object.freeze(new Map([["windows",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["edgeChromium",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["winWidgets",{notifyThemeSwitch:!0,themeSwitchNotifier:"External"}],["superApp",{notifyThemeSwitch:!0,themeSwitchNotifier:"BaseLayerLuminance"}],["homePage",{notifyThemeSwitch:!0,themeSwitchNotifier:"MatchMedia"}],["channelmobile",{notifyThemeSwitch:!0,themeSwitchNotifier:"External"}],["channeldesktop",{notifyThemeSwitch:!0,themeSwitchNotifier:"External"}],[l,{notifyThemeSwitch:!0,themeSwitchNotifier:"MatchMedia"}]]));function p(){const e=d.jG.AppType,t=u.get(e)||u.get(l);return(null==t?void 0:t.notifyThemeSwitch)??!0}var h=n(78125),g=n(38492),m=n(89315),f=n(99809);class v{constructor(){this.mediaQueryCallback=()=>{},this.appThemeState=null}eventListener(e){this.appThemeState&&this.appThemeState.setAppInDarkMode(e.currentTarget.matches)}initialize(e){var t;if(this.mediaQueryList||!e)return!0;if(null===(t=window)||void 0===t||!t.matchMedia)return!1;if(this.mediaQueryList=window.matchMedia("(prefers-color-scheme: dark)"),!this.mediaQueryList)return!1;if(this.appThemeState=e,this.appThemeState)if((0,m.pE)()){const e=sessionStorage.getItem("nativeAppUserConfig");if(e){const t=e&&JSON.parse(e);t&&void 0!==t.isDarkMode&&this.appThemeState.setAppInDarkMode(t.isDarkMode)}else this.appThemeState.setAppInDarkMode(!!this.mediaQueryList.matches)}else this.appThemeState.setAppInDarkMode(!!this.mediaQueryList.matches);return this.mediaQueryCallback=this.eventListener.bind(this),this.mediaQueryList.addEventListener("change",this.mediaQueryCallback),!0}uninitialize(){return this.mediaQueryList&&(this.mediaQueryList.removeEventListener("change",this.mediaQueryCallback),this.mediaQueryCallback=()=>{},this.mediaQueryList=void 0,this.appThemeState=null),!0}}class y{constructor(e=null){this.initialized=!1,this.source=e,this.appThemeState=null}handleChange(e,t){if(this.source&&t.target===this.source){const t=e.getValueFor(this.source),n=(0,f.s)(t.toColorString())<=h.h.DarkMode;this.appThemeState&&this.appThemeState.setAppInDarkMode(n)}}updateSource(e=null){this.source=e}initialize(e){if(this.initialized)return!0;if(this.appThemeState=e,!this.source){const e=document.querySelector("fluent-design-system-provider[fill-color]");if(null==e)return!1;this.source=e}const t={target:this.source,token:g.I};return this.handleChange(g.I,t),g.I.subscribe(this),this.initialized=!0,this.initialized}uninitialize(){return this.initialized&&(g.I.unsubscribe(this),this.initialized=!1,this.appThemeState=null),!0}}class S{constructor(){this.appThemeInDarkMode=!1,this.themeSwitchSubscription=null;let e=null;if((0,c.N)())switch(function(){const e=d.jG.AppType,t=u.get(e)||u.get(l);return(null==t?void 0:t.themeSwitchNotifier)??"MatchMedia"}()){case"BaseLayerLuminance":e=new y;break;case"External":break;default:e=new v}else e=new v;e&&this.setThemeSubscription(e)}setThemeSubscription(e){if(this.themeSwitchSubscription&&this.themeSwitchSubscription.uninitialize(),this.themeSwitchSubscription=e,!this.themeSwitchSubscription)return;var t;this.themeSwitchSubscription.initialize(this)||(this.themeSwitchSubscription=new v,null===(t=this.themeSwitchSubscription)||void 0===t||t.initialize(this))}setAppInDarkMode(e){this.appThemeInDarkMode=e}appInDarkMode(){return this.appThemeInDarkMode}}(0,s.gn)([a.LO],S.prototype,"appThemeInDarkMode",void 0);const C=new WeakMap;class w{constructor(){this._appThemeMode=null}get appThemeMode(){return this._appThemeMode||(this._appThemeMode=new S),this._appThemeMode}static getInstance(){return r.Gq.get("__SuperComponentThemeHelper__",(()=>new w))}setThemeSwitchSubscription(e){this.appThemeMode.setThemeSubscription(e)}setAppInDarkMode(e){this.appThemeMode.setAppInDarkMode(e)}appInDarkMode(){return this.appThemeMode.appInDarkMode()}subscribeThemeChange(e){if(!e||!this.appThemeMode||C.get(e))return;if(e.handleThemeChange(b.appInDarkMode()),!p())return;const t={handleChange:()=>{e.handleThemeChange(b.appInDarkMode())}};C.set(e,t),a.y$.getNotifier(this.appThemeMode).subscribe(t,"appThemeInDarkMode")}unsubscribeThemeChange(e){if(!p()||!e||!this.appThemeMode)return;const t=C.get(e);t&&(a.y$.getNotifier(this.appThemeMode).unsubscribe(t,"appThemeInDarkMode"),C.delete(e))}}const b=(0,o.h)(w)},548:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});var i=n(48204),r=n(79545),o=n(41201);const a=async(e,t,n)=>{const a=(0,i.$z)(),s="headingsonly"===(null==t?void 0:t.selectedFeedDisplaySetting)||"off"===(null==t?void 0:t.selectedFeedDisplaySetting);if(!["gaming","productivityHub","following"].includes(a)&&!s){var c;const t=n?r.x.waterfallViewFeed:r.x.gridViewFeed,i={experienceType:t,instanceSrc:"default"},a=await e.getConfig(i),s=(0,o.e)(a.properties,t,!0);if(null!==(c=a.properties)&&void 0!==c&&c.auctionRidOverride)return;s.fetchSamPredictContent([]),s.fetchCmsPredictContent()}}},41201:function(e,t,n){"use strict";n.d(t,{e:function(){return R}});var i=n(27933),r=n(54297);const o="1adindices",a=e=>{try{return JSON.parse(e,c)}catch{return null}},s=(e,t)=>t instanceof Map?{dataType:"Map",value:Array.from(t.entries())}:t,c=(e,t)=>"object"==typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t;var d=n(23549),l=n(13334);const u=(e,t,n)=>{p(n,void 0,`Config: ${e}, Response: ${t}`,!0)},p=(e,t,n,i)=>{const r={...e,pb:{...e.pb}};t&&(r.message=t),n&&r.pb&&(r.pb.customMessage=n),i&&r.pb&&(r.pb.isPrerender=null===l.Al||void 0===l.Al?void 0:l.Al.IsPrerender),d.M0.sendAppErrorEvent(r)};var h=n(23019),g=n(46058),m=n(65751),f=n(21882),v=n(78672),y=n(31558),S=n(55524),C=n(88826),w=n(7476),b=n(30440),T=n(40755),k=n(52965),P=n(25156),A=n(37477),I=n(45870),E=n(47647),M=n(82486),x=n(5362);class L{constructor(e,t){this.cardsIndexList=[],this.nativeAdIndexList=[],this.cmsAdIndexList=[],this.infopanePlacementList=[],this.originalInfopaneRegion=new Map,this.getCmsAdsConfig=()=>this.cmsAdsConfig,this.getAdRegionTupleListMap=()=>this.adRegionTupleListMap,this.getPlacementsBySectionIndex=(e,t)=>{const n=this.getAdIndexList(t)[this.config.auctionPreSectionsNum||0],i=L.isFilteredRegion[t]?(0,T.Z)(e,(e=>e<=n))+1:e.length,r=[];return e.forEach(((e,t)=>{t<i&&r.push(e)})),r},this.getCmsRequestFromTuple=(e=0)=>{const t={placements:[]};return this.adRegionTupleListMap.forEach(((n,i)=>{if(!n[0]){if(this.shouldDeferInfopaneAuctionOnPrerender(i,e))return;const r=n[1],o=this.getAdIndexList(i)[e]||-1,a=L.isFilteredRegion[i]?(0,T.Z)(r,(e=>e<=o))+1:r.length,s=r.splice(0,a);this.checkAndAddPlacement(t,!n[0],i,s)}})),t},this.fireCmsAuction=async(e=0)=>{var t;let n;if(null!==(t=this.cmsRequest)&&void 0!==t&&null!==(t=t.placements)&&void 0!==t&&t.length?(n=this.cmsRequest,this.cmsRequest=void 0):n=this.getCmsRequestFromTuple(e),n&&n.placements.length)try{const{infopane:e,river:t,documentId:i}=this.cmsAdsConfig,r=n.placements.find((({region:e})=>e.includes("resinfopane"))),o=n.placements.find((({region:e})=>e.includes("resriver"))),a=e.splice(0,(null==r?void 0:r.indices.length)??0),s=t.splice(0,(null==o?void 0:o.indices.length)??0);this.isFirstCmsAdsBatch=!1,this.cmsRequestPromise=this.nativeAdService.fetchCmsAds(n,i,[...a,...s]);const{placements:c}=await this.cmsRequestPromise;return c}catch(e){(0,C.OO)(e,w.NF_,"Call to CMS Ad Service failed")}},this.getRegionImgForMobile=e=>{const{river:t,infopane:n}=this.overrideImageSize||{};switch(e){case"river":return t;case"infopane":return n;default:return}},this.fetchSamPredictContent=async(e=[])=>{if(this.isFirstSamAdsBatch){this.samPredictResponsePromise=new I.o;try{const t=this.getPredictedAdRequest();if(this.samRequest=t,!t||!t.placements||!t.placements.length)return;b.A.startMark("AdServiceCall.SuperFeed");const n=this.nativeAdService.fetchSamAds(t,!0,e,this.getIsPrerenderAds());this.samRequestPromise=n;const i=(0,x.pl)(this.config);[this.predictSamResponse]=await Promise.all([n,i])}catch(e){(0,C.OO)(e,w.R0M,"Call to SAM Ad Service failed")}finally{this.samPredictResponsePromise.set(),b.A.endMark("AdServiceCall.SuperFeed")}}},this.waitForSamPredictResponse=async()=>{var e;return null===(e=this.samPredictResponsePromise)||void 0===e?void 0:e.getResultAsync()},this.waitForSamAuctionCall=async()=>this.samRequestPromise,this.addToCallbackList=e=>{this.nativeAdService.addToCallbackList(e)},this.getSamRequestFromTupleWithSectionIndex=(e=0)=>{const t={placements:[],adsTmaxBidder:this.config.adsTmaxBidder&&l.Al.IsPrerender&&this.isFirstSamAdsBatch?this.config.adsTmaxBidder:void 0};return this.adRegionTupleListMap.forEach(((n,i)=>{if(n[0]){if(this.shouldDeferInfopaneAuctionOnPrerender(i,e))return;const r=n[1],o=this.getAdIndexList(i)[e]||-1,a=L.isFilteredRegion[i]?(0,T.Z)(r,(e=>e<=o))+1:r.length,s=r.splice(0,a);this.checkAndAddPlacement(t,n[0],i,s)}})),t},this.getSamRequestFromTuple=()=>{const e={placements:[]};return this.adRegionTupleListMap.forEach(((t,n)=>{t[0]&&this.checkAndAddPlacement(e,t[0],n,t[1])})),e},this.shouldDeferInfopaneAuctionOnPrerender=(e,t)=>e.includes("infopane")&&(this.getIsPrerenderAds()&&0==t||this.config.deferInfopanePrerender&&l.Al.IsPrerender&&this.isFirstSamAdsBatch),this.getAdIndexList=e=>{var t,n;return null===(t=this.config.riverSectionCardProviderConfig)||void 0===t||!t.useRelativeAdPlacement||"river"!==e&&"riverlock"!==e?null!==(n=this.config.riverSectionCardProviderConfig)&&void 0!==n&&n.useRelativeAdPlacement&&e.includes("resriver")?this.cmsAdIndexList:this.cardsIndexList:this.nativeAdIndexList},this.overrideTopAdSamRequest=(e,t)=>{const n=(0,E._4)();var i;null!=t&&t.isSuperAppTopAd&&this.config.enableTopAdCard&&null!=n&&n.isOEM&&(e[0]&&(e[0].region="top",e[0].img=null===(i=this.config)||void 0===i||null===(i=i.adTemplateConfig)||void 0===i||null===(i=i.imageSizeConfig)||void 0===i?void 0:i.top));return e},this.fireSamAuction=async(e=[],t,n)=>{var i;let r;if(null!==(i=this.samRequest)&&void 0!==i&&null!==(i=i.placements)&&void 0!==i&&i.length?(r=this.samRequest,this.samRequest=void 0):r=this.config.enableNativeAdBatchCall?this.getSamRequestFromTuple():this.getSamRequestFromTupleWithSectionIndex(t),r&&r.placements.length)return n?(r={placements:this.overrideTopAdSamRequest(r.placements,n),pageType:n.pageType,locale:n.locale,adid:n.adid,anid:n.anid,muid:n.muid,sapphireid:n.sapphireid,appName:n.appName,clientVersion:n.clientVersion,packageName:n.packageName,tmax:n.tmax},"prime_mobile"===n.appName&&"mobilefeed"===n.pageType&&r.placements.forEach((e=>{e.isStrictIndices=!0}))):r.tmaxbidder=this.config.adsTmaxBidder&&l.Al.IsPrerender&&this.isFirstSamAdsBatch?this.config.adsTmaxBidder:void 0,await this.fetchSamAds(r,e)},this.fetchSamAds=async(e,t=[])=>{try{b.A.startMark("AdServiceCall.SuperFeed");const{isFirstSamAdsBatch:i,nativeAdService:r}=this,o=i?t:[];this.isFirstSamAdsBatch=!1;const a=r.fetchSamAds(e,i,o,this.getIsPrerenderAds());if(!this.config.loadAdTemplate)return await a;if(this.config.enableNativeAdWC||this.config.enableNativeAdWCInfopane){var n;const[e]=await Promise.all([a,this.lazyLoadDRBundle(null===(n=this.config)||void 0===n||null===(n=n.adTemplateConfig)||void 0===n?void 0:n.configType)]);return e}{const[e]=await Promise.all([a,(0,x.pl)(this.config)]);return e}}catch(e){(0,C.OO)(e,w.R0M,"Get SAM data failed")}finally{b.A.endMark("AdServiceCall.SuperFeed")}},this.initNativeAdConfig(e),this.initAdRegionTupleListMap(),this.beaconService=new g.A(null==e?void 0:e.adBeaconServiceConfig)}initNativeAdConfig(e){var t,n,i;this.isFirstSamAdsBatch=!0,this.isFirstCmsAdsBatch=!0,this.config=(0,k.Z)(e)||{},this.cmsAdsConfig=(null===(t=this.config)||void 0===t?void 0:t.cmsAds)??{documentId:"",infopane:[],river:[]},this.tallAdProcessed=!(null!==(n=this.config)&&void 0!==n&&n.enableAdsWaterfall);const r={};this.config.backfillContentForMissingPlacements&&(r.useEmptyPlacementsForNoContent=!0),this.config.enablePrerenderAds&&this.config.enablePrerenderAuctionFlag&&(r.enablePrerenderAdsAuctionFlag=!0),this.config.auctionTimeoutOverride&&(r.auctionTimeoutOverride=this.config.auctionTimeoutOverride),this.config.auctionRidOverride&&(r.auctionRidOverride=!0),this.config.enableBuyDirectAd&&(r.enableBuyDirectAd=!0),this.nativeAdService=(0,m.d)((null===(i=this.config)||void 0===i?void 0:i.adTemplateConfig)||{},r)}initAdRegionTupleListMap(){var e,t;this.adRegionTupleListMap=new Map([["infopane",[!0,[],[]]],["infopanelock",[!0,[],[]]],["rightrail",[!0,[],[]]],["triver",[null===(e=this.config)||void 0===e?void 0:e.enable1stRowAd,[],[]]],["river",[!0,[],[]]],["riverlock",[!0,[],[]]],["infopane-tab",[!0,[],[]]],["resinfopane",[this.config.enableInfopaneLeadgenNative,[],[]]],["resinfopanelock",[this.config.enableInfopaneLeadgenNative,[],[]]],["resriver",[this.config.enableRiverLeadgenNative,[],[]]],["resriverlock",[this.config.enableRiverLeadgenNative,[],[]]],["dense-river",[!0,[],[]]],["rivert",[(null===(t=this.config)||void 0===t?void 0:t.enableAdsWaterfall)||!0,[],[]]],["infopane1u",[this.config.enableInfopane1uCard,[],[]]]])}loadCmsBackfillList(){return this.nativeAdService.loadCmsBackFillList()}fillAdsMap(e){if(!e)return;const{adLabelText:t,isGreyAdsLabelEnabled:n}=this.nativeAdService.getAdTagStyleByLocale(),r=(0,i.AH)({adLabelText:t,isGreyAdsLabelEnabled:n,...this.config},e),o=(0,E._4)();this.adRegionTupleListMap.forEach(((e,t)=>{("river"===t||"riverlock"===t)&&this.config.enableTopAdCard&&null!=o&&o.isOEM&&r.top&&e[2].push(...r.top),e[2].push(...r[t]??[])}))}createNativeAdCardMetadata(e,t,n,i,r,o){var a,s,c,d,l;let u=e.includes("resinfopane")||e.includes("resriver")?A.PL.CmsAd:A.PL.NativeAd;null!==(a=this.config)&&void 0!==a&&a.enableAdsWaterfall&&"river"===e&&t===(null===(s=this.config)||void 0===s?void 0:s.tallAdsIndex)&&(e="rivert"),null!==(c=this.config)&&void 0!==c&&c.enable1stRowAd&&o===A.PL.FirstPartyAd&&(e="triver",u=A.PL.FirstPartyAd),null!==(d=this.config)&&void 0!==d&&d.enableInfopane1uCard&&f.cE.includes(e)&&(e="infopane1u");const p=null===(l=this.adRegionTupleListMap.get(e))||void 0===l?void 0:l[2],h=null==p?void 0:p.find((e=>e.regionIndex===t));return h?{type:u,regionIndex:t,id:this.getNativeAdId(e,h.regionIndex),placement:h,wpoRank:n,wpoAdRank:i,wpoId:r}:{type:u,regionIndex:t,placement:{items:[]},wpoRank:n,wpoAdRank:i,wpoId:r}}getPredictCmsAdsData(){var e;if(!this.isFirstCmsAdsBatch)return;const t=this.getCmsRequestFromTuple();if(this.predictCmsResponse&&this.validateCmsAdPlacementConfig(t),this.cmsRequest=t,null!==(e=this.cmsRequest)&&void 0!==e&&null!==(e=e.placements)&&void 0!==e&&e.length&&(this.isFirstCmsAdsBatch=!1),this.predictCmsResponse){const e=this.predictCmsResponse;return this.predictCmsResponse=void 0,e}}async waitForCmsAuction(){this.cmsRequestPromise&&await this.cmsRequestPromise}getAssets(e,t){const n=[];if(t){const i=t.reduce(((t,n,i)=>{const r=(0,P.Z)(h.aT,(e=>e===n));if(r){const n={...h.hy[r],id:i+1};"img"===r&&(n.img={...this.getRegionImg(e),...n.img}),t.push(n)}return t}),[]);n.push(i)}return n}getVAAssets(e){var t;const n=null===(t=this.config.adTemplateConfig)||void 0===t?void 0:t.supportedVAAssets;return this.getAssets(e,n)}getCTALogoAssets(e){var t;const n=null===(t=this.config.adTemplateConfig)||void 0===t?void 0:t.supportedCTALogoAssets;return this.getAssets(e,n)}checkAndAddPlacement(e,t,n,i){if(e&&t&&i.length){var r;let t,o=this.getRegionImg(n);if(this.config.overrideSAMAdImageSize&&this.overrideImageSize){const e=this.getRegionImgForMobile(n);e&&(o=e)}null!==(r=this.config.adTemplateConfig)&&void 0!==r&&r.enableVA&&this.config.excludeFeed3AdCard&&"rightrail"!==n&&(t=this.getVAAssets(n)),(this.config.enableCTA||this.config.enableLogo)&&(t=this.getCTALogoAssets(n));const a={assets:t,region:n,indices:i.splice(0),img:o};this.config.enableSAMAdStrictIndices&&(a.isStrictIndices=!0),this.config.enableHeroStrictIndices&&(0,v.zp)().includes("ocid=widgetonlockscreen")&&(a.isStrictIndices=!0),this.config.enable1stRowAd&&"triver"===n&&(a.isStrictIndices=!0),e.placements.push(a)}}async fetchCmsPredictContent(){if(!this.isFirstCmsAdsBatch)return;const e=this.getPredictedAdRequest(!0);if(this.cmsRequest=e,e.placements.length)try{const{infopane:t,river:n,documentId:i}=this.cmsAdsConfig,r=e.placements.find((({region:e})=>e.includes("resinfopane"))),o=e.placements.find((({region:e})=>e.includes("resriver"))),a=t.splice(0,(null==r?void 0:r.indices.length)??0),s=n.splice(0,(null==o?void 0:o.indices.length)??0),{placements:c}=await this.nativeAdService.fetchCmsAds(e,i,[...a,...s]);return this.predictCmsResponse=c,c}catch(e){(0,C.OO)(e,w.NF_,"Call to CMS Ad Service failed")}}lazyLoadDRBundle(e){switch(e){case"prg-ad-like":return n.e("na-like-button").then(n.bind(n,85135));case"prg-trending":return n.e("na-trending").then(n.bind(n,18347));case"prg-ad-ctav2":case"prg-ad-ctav3":return n.e("na-call-to-action").then(n.bind(n,81068));case"prg-ad-sh-v1":return n.e("nas-highlight-v1").then(n.bind(n,37756));case"prg-ad-sh-v3":case"prg-ad-sh-v4":return Promise.all([n.e("nas-highlight-v3v4").then(n.bind(n,18235)),n.e("nas-highlight-v3v4").then(n.bind(n,78361))]);case"prg-ad-combo":return Promise.all([n.e("na-decoration-combo").then(n.bind(n,94738)),n.e("na-decoration-combo").then(n.bind(n,32675)),n.e("na-decoration-combo").then(n.bind(n,64295)),n.e("na-decoration-combo").then(n.bind(n,73258))])}}getPredictedAdRequest(e){const t={placements:[]};return this.adRegionTupleListMap.forEach(((n,i)=>{const r=e?this.getCmsIndices(i):this.getSamIndices(i),o=e?!n[0]:n[0];o&&null!=r&&r.length&&this.checkAndAddPlacement(t,o,i,r)})),t}getPredictSamAdsData(){var e;if(!this.isFirstSamAdsBatch)return;const t=this.getSamRequestFromTupleWithSectionIndex();if(this.predictSamResponse&&this.validateSamAdPlacementConfig(t),this.samRequest=t,null!==(e=this.samRequest)&&void 0!==e&&null!==(e=e.placements)&&void 0!==e&&e.length&&(this.isFirstSamAdsBatch=!1),this.predictSamResponse){const e=this.predictSamResponse;return this.predictSamResponse=void 0,e}}shouldPrefetchInfopaneSamAds(e){return-1!==this.infopanePlacementList.findIndex((({index:t})=>t===e+i.h2))}prefetchInfopaneSamAds(e){const t=this.getAndUpdateInfopanePrefetchPlacementList(e);if(t.length)return this.fetchSamAdsInPlacementList(t)}getAndUpdateInfopanePrefetchPlacementList(e){if(!this.config.infopaneViewOptAdCount)return[];const t=this.infopanePlacementList.findIndex((({index:t})=>t>e));return-1===t?[]:this.infopanePlacementList.splice(t,this.config.infopaneViewOptAdCount)}mapViewOptimizationRegion(e){if(this.config.infopaneViewOptAdCount){e.placements.forEach((e=>{f.PB.includes(e.region)&&(1===this.config.infopaneViewOptAdCount?e.region=f.BU[0]:2===this.config.infopaneViewOptAdCount&&(e.region=f.BU[1]))}));const t={};e.placements.forEach((e=>{const n=e.region;t[n]?t[n].indices.push(...e.indices):t[n]={...e}})),e.placements=Object.values(t)}}mapSamAdRegionToOriginal(e){var t,n;this.config.infopaneViewOptAdCount&&(null!=e&&null!==(t=e.samResponse)&&void 0!==t&&t.placements&&e.samResponse.placements.forEach((e=>{const{index:t}=e;this.originalInfopaneRegion.get(t)&&(e.region=this.originalInfopaneRegion.get(t))})),null!=e&&null!==(n=e.placeHolderResponse)&&void 0!==n&&n.placements&&e.placeHolderResponse.placements.forEach((e=>{const{regionIndex:t}=e;this.originalInfopaneRegion.get(t)&&(e.region=this.originalInfopaneRegion.get(t))})))}async fetchSamAdsInPlacementList(e){const t={placements:[]};(0,i.EC)(e).forEach(((e,n)=>{this.checkAndAddPlacement(t,!0,n,e)})),this.mapViewOptimizationRegion(t);const n=await this.fetchSamAds(t);return this.mapSamAdRegionToOriginal(n),n}fireServedTrackingCallForPlacements(e){if(!e)return;const t=this.beaconService.sendBeaconForAdServed.bind(this.beaconService);e.map((({beaconsJson:e,bingTrackerUrls:t=[],videoViewabilityData:n,beaconsSupportHttpPOST:i})=>!e||t.length>0&&n?null:{beaconsJson:e,beaconsSupportHttpPOST:i})).filter((e=>!(!e||!e.beaconsJson))).forEach(t)}updateAdRegionTupleListMap(e){var t,n,i;const{adRegionTupleListMap:r}=this;r.forEach(((t,n)=>{t[1].push(...(e.get(n)??[]).sort(((e,t)=>e-t)))})),null!==(t=this.config)&&void 0!==t&&t.enableAdsWaterfall&&!1===this.tallAdProcessed&&this.updatePlacementsForTallAd(r,this.config.tallAdsIndex),null!==(n=this.config)&&void 0!==n&&n.infopaneViewOptAdCount&&this.updatePlacementsForInfopane(r),null!==(i=this.config)&&void 0!==i&&i.enableInfopane1uCard&&this.updatePlacementsForInfopane1u(e)}updatePlacementsForTallAd(e,t=0){if(0===t)return;const n=this.getOrDefault(e,"rivert",[!0,[],[]]),i=this.getOrDefault(e,"river",[!0,[],[]]),r=[t],o=this.removeItemFromPlacementArray(i[1],t);e.set("river",[i[0],o,i[2]]),e.set("rivert",[n[0],r,n[2]]),this.tallAdProcessed=!0}updatePlacementsForInfopane(e){e.forEach(((e,t)=>{e[0]&&f.PB.includes(t)&&(e[1].forEach((e=>{this.infopanePlacementList.push({region:t,index:e}),this.originalInfopaneRegion.set(e,t)})),e[1]=[])})),this.infopanePlacementList.sort(((e,t)=>e.index-t.index))}updatePlacementsForInfopane1u(e){let t=[];for(const n of f.cE)t=t.concat(e.get(n)??[]),this.adRegionTupleListMap.set(n,[!1,[],[]]);t=t.sort(((e,t)=>e-t)),this.adRegionTupleListMap.set(f.yp.infopane1u,[!0,t,[]])}removeItemFromPlacementArray(e,t){return null==e?void 0:e.filter((e=>e!==t))}getOrDefault(e,t,n){return e.get(t)??n}updateAdCache(e){if(!this.isFirstSamAdsBatch)return;const t=new Map;this.adRegionTupleListMap.forEach(((n,i)=>{const r=[...(null==e?void 0:e.get(i))??[],...n[1]],o=this.getPlacementsBySectionIndex(r,i);t.set(i,o)})),((e,t)=>{const n=JSON.stringify(e,s);var i,o;n!==(0,r.$o)().getItem(t)&&(null===(i=(0,r.$o)())||void 0===i||i.setItem(t,n),null===(o=(0,r.$o)())||void 0===o||o.setItem(`${t}_date`,JSON.stringify(new Date)))})(t,o)}isAdsMapEmpty(){let e=!0;return this.adRegionTupleListMap.forEach((t=>{t[2].length>0&&(e=!1)})),e}getRegionImg(e){var t,n,i,r,o,a,s;switch(e){case"resriver":case"river":case"riverlock":case"resriverlock":case"triver":case"rightrail":return null===(t=this.config.adTemplateConfig)||void 0===t||null===(t=t.imageSizeConfig)||void 0===t?void 0:t.river;case"infopane":case"resinfopane":case"infopanelock":case"resinfopanelock":return null===(n=this.config.adTemplateConfig)||void 0===n||null===(n=n.imageSizeConfig)||void 0===n?void 0:n.infopane;case"infopane-tab":return null===(i=this.config.adTemplateConfig)||void 0===i||null===(i=i.imageSizeConfig)||void 0===i?void 0:i.infopaneTab;case"infopane1u":return null===(r=this.config.adTemplateConfig)||void 0===r||null===(r=r.imageSizeConfig)||void 0===r?void 0:r.infopane1u;case"rivert":return null===(o=this.config.adTemplateConfig)||void 0===o||null===(o=o.imageSizeConfig)||void 0===o?void 0:o.rivert;case"inarticlecarousel":return null===(a=this.config.adTemplateConfig)||void 0===a||null===(a=a.imageSizeConfig)||void 0===a?void 0:a.inarticlecarousel;case"inarticle":return null===(s=this.config.adTemplateConfig)||void 0===s||null===(s=s.imageSizeConfig)||void 0===s?void 0:s.inarticle;default:return}}refresh(){this.initNativeAdConfig(this.config),this.initAdRegionTupleListMap(),this.cardsIndexList=[],this.nativeAdIndexList=[],this.cmsAdIndexList=[]}updateCardsIndexPersection(e){e.map((e=>{var t;const n=this.cardsIndexList[this.cardsIndexList.length-1]||0;this.cardsIndexList.push(n+((null===(t=e.cards)||void 0===t?void 0:t.length)||0))}))}updateRelativeAdIndexPersection(e){e.forEach((e=>{var t,n;const i=this.nativeAdIndexList[this.nativeAdIndexList.length-1]||0,r=null===(t=e.cards)||void 0===t?void 0:t.filter((e=>"nativead"===e.type));let o=i+(r.length||0);if(this.config.enableDynamicWaterfall&&this.config.enableAdRankTrackers){const e=r.map((e=>e.wpoAdRank)).filter((e=>e));if(null!=e&&e.length){const t=Math.max(...e);t>o&&(o=t)}}this.nativeAdIndexList.push(o);const a=this.cmsAdIndexList[this.cmsAdIndexList.length-1]||0,s=(null===(n=e.cards)||void 0===n?void 0:n.filter((e=>"cmsad"===e.type)).length)||0;this.cmsAdIndexList.push(a+s)}))}overrideNativeAdIndexPersection(e){this.nativeAdIndexList=e}updateAndFilterSamAdResponse(e,t){const{placements:n}=this.nativeAdService.updateSamAdResponse(e,t,this.getIsPrerenderAds());return n.filter((e=>e.items.length))}getAdIndices(e){var t;return(null===(t=(e=>{var t;const n=null===(t=(0,r.$o)())||void 0===t?void 0:t.getItem(e);return a(n)})(o))||void 0===t?void 0:t.get(e))||[]}getSamIndices(e){return this.config.avoidPredictInfopaneAd&&e.toLowerCase().indexOf("infopane")>-1?[]:this.config.shouldUseAdCache?this.getAdIndices(e):[]}getPredictedSamIndices(e){var t;return(null===(t=this.samRequest)||void 0===t||null===(t=t.placements)||void 0===t||null===(t=t.find((t=>t.region===e)))||void 0===t?void 0:t.indices)||[]}getCmsIndices(e){return this.config.avoidPredictInfopaneAd&&e.toLowerCase().indexOf("resinfopane")>-1?[]:this.config.shouldUseAdCache?this.getAdIndices(e):[]}getPredictedCmsIndices(e){var t;return(null===(t=this.cmsRequest)||void 0===t||null===(t=t.placements)||void 0===t||null===(t=t.find((t=>t.region===e)))||void 0===t?void 0:t.indices)||[]}validateSamAdPlacementConfig(e){var t;const n=[],i=new Map;for(const t of e.placements){const e=t.region,r=this.getPredictedSamIndices(e);if(!r||!r.length){n.push(t);continue}const o=r.filter((e=>t.indices.indexOf(e)>=0)),a=t.indices.filter((e=>o.indexOf(e)<0));t.indices=a,a.length&&n.push(t),i.set(e,o)}let r=n;var o;(n.length&&this.config.avoidPredictInfopaneAd&&(r=r.filter((e=>e.region.toLowerCase().indexOf("infopane")<0))),r.length)?(u(JSON.stringify(null===(o=this.samRequest)||void 0===o?void 0:o.placements),JSON.stringify(e.placements),w.iLP),d.M0.addOrUpdateTmplProperty("edge_ntp.adMismatched","1")):d.M0.addOrUpdateTmplProperty("edge_ntp.adMatched","1");if(e.placements=n,null!==(t=this.predictSamResponse)&&void 0!==t&&null!==(t=t.samResponse)&&void 0!==t&&null!==(t=t.placements)&&void 0!==t&&t.length){const e=[];this.predictSamResponse.samResponse.placements.forEach((t=>{const n=t.region&&i.get(t.region);t.index&&n&&n.indexOf(t.index)>-1&&e.push(t)})),this.predictSamResponse.samResponse.placements=e}}validateCmsAdPlacementConfig(e){const t=[],n=new Map;for(const i of e.placements){const e=i.region,r=this.getPredictedCmsIndices(e);if(!r||!r.length){t.push(i);continue}const o=r.filter((e=>i.indices.indexOf(e)>=0)),a=i.indices.filter((e=>o.indexOf(e)<0));i.indices=a,a.length&&t.push(i),n.set(e,o)}let i=t;var r;(t.length&&this.config.avoidPredictInfopaneAd&&(i=i.filter((e=>e.region.toLowerCase().indexOf("infopane")<0))),i.length)&&u(JSON.stringify(null===(r=this.cmsRequest)||void 0===r?void 0:r.placements),JSON.stringify(e),w.RaX);if(e.placements=t,this.predictCmsResponse&&this.predictCmsResponse.length){var o;const e=[];null===(o=this.predictCmsResponse)||void 0===o||o.forEach((t=>{const i=n.get(t.region);i&&i.indexOf(t.regionIndex)>-1&&e.push(t)})),this.predictCmsResponse=e}}getNativeAdId(e,t){return`nativead-${e}-${t}`}getIsPrerenderAds(){return!!(this.config.enablePrerenderAds&&(0,M.TR)()&&(0,y.N)()&&"hidden"===document.visibilityState)}async createMetaTags(e){return new Promise((t=>{e.forEach((e=>{if("infopane"===e.region||"river"===e.region||"infopanelock"===e.region||"riverlock"===e.region){var t;const n=e.items&&(null===(t=e.items[0])||void 0===t?void 0:t.adSelectionReason);if(n){const t=this.getNativeAdId(e.region,e.regionIndex);let i;switch(e.region){case"infopane":case"infopanelock":i=`tab_panel_${t}`;break;case"river":case"riverlock":i=`native_ad_${t}`;break;default:return}try{const e=JSON.parse(n).ads[0].id,t=n.replace(e,i),r=document.head,o=document.createElement("meta");o.name="AdsMetadata",o.content=t,r.appendChild(o)}catch(e){return void(0,C.OO)(e,w.ds2,"Failed to add WhyThisAd meta tag to head")}}}})),t()}))}async loadBuyDirectAd(){await this.nativeAdService.loadBuyDirectAd()}}L.isFilteredRegion={river:!0,resriver:!0,riverlock:!0,resriverlock:!0};const R=(e,t,n=!1)=>{const i="NATIVE_AD_HELPER_INSTANCE";let r=S.Gq.get(i);return r&&!n||(r=new L(e,t),S.Gq.set(i,r)),r}},68575:function(e,t,n){"use strict";n.d(t,{Mw:function(){return a},fB:function(){return s},x$:function(){return r}});var i=n(66415);const r=e=>{const{clientHeight:t,clientWidth:n}=document.documentElement,r=(0,i.b_)(e);if(!r)throw new Error("River element is not defined");const o=r.getBoundingClientRect();return{contentInViewport:{height:t-o.y,width:n},river:o}},o=(e,t,n)=>c(e,t).reduce(((e,t,i)=>e+t+(0===i?0:n)),0),a=(e,t,n,i,a=12,s=0)=>{const{contentInViewport:c}=r(e),d=((e,t,n,i=12)=>n?n.map((n=>{const r=e[null==n?void 0:n.layoutTemplate];return o(r,t,i)})):[])(t,n,i,a);let l=0,u=0;for(let e=0;e<d.length&&!(l>=c.height-s);e++)l+=d[e]+a,u++;return u},s=(e,t,n,i,a=12,s=0)=>{const{contentInViewport:d}=r(e),l=((e,t,n,i=12)=>n?n.map((n=>{if(void 0!==n.templateId){const r=e[n.templateId];return o(r,t,i)}return 0})):[])(t,n,i,a);let u=0,p=0,h=0;for(let e=0;e<l.length;e++){if(u+=l[e]+a,u>=d.height-s){var g;const r=null===(g=i[e])||void 0===g?void 0:g.templateId;if(void 0===r)break;const o=t[r],p=c(o,n);u=u-l[e]-a;for(let e=0;e<p.length&&(u+=p[e]+(0==e?0:a),!(u>=d.height-s));e++)h++;break}p++}return{lastSectionIndex:p,lastRowIndex:h}},c=(e,t)=>{if(!e||!e.rowHeightPx)throw new Error("Invalid layout template");const{rowHeightPx:n}=e;return n[t]??[]}},69734:function(e,t,n){"use strict";n.d(t,{P:function(){return c}});var i=n(84231),r=n(66701),o=n(85205);var a=n(64902);let s=!1;function c(e,t){s||(s=!0,(0,i.x)(e)||t&&t()||requestAnimationFrame((()=>{t&&t()||e.forEach((({experienceType:e,instanceSrc:t})=>{if(e in o.z)r.n.loadExperience(e);else{const n=function(e,t="default",n=e){return{instanceId:e,configRef:{experienceType:n,instanceSrc:t||"default"}}}(e,t);(0,a.Fg)(n)}}))})))}},27933:function(e,t,n){"use strict";n.d(t,{AH:function(){return m},C1:function(){return v},EC:function(){return f},JV:function(){return M},Og:function(){return b},Qz:function(){return I},aR:function(){return A},b:function(){return x},h2:function(){return u},m0:function(){return T},pE:function(){return P},sI:function(){return w},vZ:function(){return k},yy:function(){return E},zX:function(){return S}});var i=n(19233),r=n(10754),o=n(21930),a=n(36926),s=n(82486),c=n(37477),d=n(90351),l=n(13334);const u=1,p=["river","resriver","river_cms","rightrail"],h=e=>t=>{var n;const i={...t,adLabelText:e.adLabelText,isGreyAdsLabelEnabled:e.isGreyAdsLabelEnabled,isWhiteSlug:e.isWhiteSlug,isTransparentSlug:e.isTransparentSlug,isNarrowTitleFooterGap:e.isNarrowTitleFooterGap,isTransparentAdSlugWithBorder:e.isTransparentAdSlugWithBorder,isTransparentAdSlugWithBorderV2:e.isTransparentAdSlugWithBorderV2,isTransparentAdSlugWithBorderV2NonDr:e.isTransparentAdSlugWithBorderV2NonDr,enableAdsColorBleed:e.enableAdsColorBleed,isAdSlugV4NonDr:e.isAdSlugV4NonDr};return"rightrail"===t.region&&null!==(n=e.rightrail)&&void 0!==n&&n.useTransparentAdCard&&(i.shouldUseWhiteGradient=!0),p.includes(t.region)?(i.isProviderInFooter=e.isProviderInFooter,i.isProviderInHeader=e.isProviderInHeader,((e,t)=>{var n;if(null!==(n=t.items)&&void 0!==n&&n.length){if(e.useArticleCardTemplate){const n=Number(t.items[0].imageWidth)||(0,d.Z)(e.adTemplateConfig,"imageSizeConfig.river.w"),i=Number(t.items[0].imageHeight)||(0,d.Z)(e.adTemplateConfig,"imageSizeConfig.river.h");return t.items[0].imageWidth=(225*n/i).toFixed().toString(),t.items[0].imageHeight="225",t.imageWidth=t.items[0].imageWidth,void(t.imageHeight=t.items[0].imageHeight)}t.items[0].imageWidth="300",t.items[0].imageHeight="156"}})(e,i),i):i},g=(e,t)=>{const n=e[t.region]??[];return{...e,[t.region]:n.concat(t)}},m=(e,t)=>t.map(h(e)).reduce(g,{}),f=e=>e.reduce(((e,{region:t,index:n})=>{const i=e.get(t)||[];return i.push(n),e.set(t,i),e}),new Map),v=(e,t)=>e.reduce(((e,n)=>(t(n)?e[0].push(n):e[1].push(n),e)),[[],[]]),y=()=>{const e=(0,r.Ou)()[o.nz+"Complete"];(0,a.hf)(i.qG.RenderReady,e),(0,a.hf)(i.qG.AdRendered,1),(0,a.hf)(i.qG.TimeToRenderAd,e),(0,o.su)(i.qG.TimeToRenderAd,e)},S=(e=!1)=>{var t;const n=(0,r.Ou)().isSSRCompleted&&(null===(t=window.ssrAdData)||void 0===t?void 0:t.length);n&&y(),window.requestAnimationFrame((()=>{setTimeout((()=>{const t=(0,a.v0)(l.Al.IsPrerender&&!e),r=(0,o.O0)(i.qG.RenderReady);r>-1&&r&&(0,o.su)(i.qG.AdRendered,t-r);const s=(0,o.O0)(i.qG.TimeToAdResponse);s>-1&&(0,o.O_)(i.qG.AdProcessed,s,t);const c=(0,o.O0)(e?i.qG.TimeToServeAdBackground:i.qG.TimeToServeAd);c>-1&&(0,o.su)(i.qG.RespToAdCallback,c-s),e?C():n||(0,o.O_)(i.qG.TimeToRenderAd,0,t)}),0)}));const s=(0,a.v0)(l.Al.IsPrerender&&!e);(0,o.su)(i.qG.RenderReady,s);const c=(0,o.O0)(e?i.qG.TimeToServeAdBackground:i.qG.TimeToServeAd);c>-1&&(0,o.su)(i.qG.AdCallbackProcessed,s-c)};function C(){(0,s.lr)().then((()=>{const e=(0,r.Ou)();(0,o.O_)(i.qG.TimeToRenderAd,0,e.TTPR),(0,o.O_)(i.qG.TimeToRequestAd,0,1)}))}const w=()=>{var e;if((0,r.Ou)().isSSRCompleted&&(null===(e=window.ssrAdData)||void 0===e?void 0:e.length))y();else if((0,s.TR)())C();else{const e=(0,a.v0)(l.Al.IsPrerender);(0,o.O_)(i.qG.TimeToRenderAd,0,e)}},b=e=>{var t;return 0===(null===(t=e.placement)||void 0===t||null===(t=t.items)||void 0===t?void 0:t.length)},T=e=>e.type===c.PL.Infopane,k=e=>e.type===c.PL.TabbedInfopaneCard,P=e=>e.type===c.PL.ChannelCarousel||e.type===c.PL.ChannelFilterCard||e.type===c.PL.DynamicFilteredChannel,A=e=>e.type===c.PL.NativeAd||e.type===c.PL.NativeTopAd||e.type===c.PL.FirstPartyAd,I=e=>e.type===c.PL.CmsAd,E=e=>e.type===c.PL.Dense,M=e=>e.type===c.PL.TabbedInfopaneCardTab||e.type===c.PL.TopicFeed,x=e=>e.type===c.PL.BuyDirectAd},74716:function(e,t,n){"use strict";n.d(t,{G8:function(){return u},Jx:function(){return y},TO:function(){return v},Xd:function(){return f},Zn:function(){return g},cP:function(){return l},iM:function(){return m},oE:function(){return d}});var i=n(4055),r=n(67295),o=n(79545),a=n(15778),s=n(8076),c=n(43879);const d=e=>"WeatherHero"==e.type?o.x.weatherHeroExperience:e.type+(e.id??""),l="TTVR.ViewCards",u="TTVR.SDCards",p=new Map([[a.U.infopaneCard,()=>!0],[a.U.sectionHeaderCard,()=>!0],[a.U.topStoriesCard,()=>!0],[a.U.contentCard,e=>{const t=(0,s.Ae)(e)||(0,s.UN)(e);return t&&t.height>=i.B._300x225.height&&t.width>=i.B._300x225.width}],[a.U.weatherHeroExperienceCarouselCard,()=>!0]]),h=[a.U.contentCard,a.U.infopaneCard,a.U.sectionHeaderCard,a.U.topStoriesCard,a.U.weatherHeroExperienceCarouselCard];function g(e){const t=c.J[e.type];if(t&&h.includes(t)){const n=p.get(t);return!!n&&n(e)}return!1}const m={C1:1,C2:2,C3:3,C4:4,C5:5,C6:6};function f(e,t){return 2*e*(m[t]||1)}const v=e=>{switch(e){case r.Nv._1x_1y:return 1;case r.Nv._1x_2y:case r.Nv._2x_1y:return 2;case r.Nv._3x_1y:return 3;case r.Nv._2x_2y:case r.Nv._4x_1y:return 4;default:return 2}},y={contentGroup:o.x.contentGroup,"content-card":o.x.articlePage,horoscopeCard:o.x.horoscopeAnswerCardWC,linkedInCard:o.x.linkedInCard,moneyInfoCard:o.x.moneyInfoCardWC,onThisDayCard:o.x.onThisDayCardWC,qnaCard:o.x.qna,"shopping-carousel":o.x.shoppingCardWC,sportsCard:o.x.sportsCardWC,trafficCard:o.x.trafficCardWC,travelDestination:o.x.travelDestination,trendingNowCard:o.x.trendingNowWC,weather:o.x.weatherCardWC,autosCarousel:o.x.autosCarousel,autosMarketplaceCard:o.x.autosMarketplaceCard,boostAdCard:o.x.boostAdCard,electionsCard:o.x.generalElections,rewardsCard:o.x.rewardsCardWC,gamingCompeteCard:o.x.gamingCompeteCard,gamingInterestGroupCard:o.x.gamingInterestGroupCard,gamingMatchCard:o.x.gamingMatchCard,gamingMediaCarousel:o.x.gamingMediaCarousel,gamingPersonalizationCard:o.x.gamingPersonalizationCard,gamingRedditCard:o.x.gamingRedditCard,gamingRecentlyPlayedCard:o.x.gamingRecentlyPlayedCard,gamingRecommendedCard:o.x.gamingRecommendedCard,gamingRewardsCard:o.x.gamingRewardsCard,gamingStreamCard:o.x.gamingStreamCard,GamingClip:o.x.gamingStreamCard,GamingHighlight:o.x.gamingStreamCard,GamingLiveStream:o.x.gamingStreamCard,GamingVod:o.x.gamingStreamCard,gamingTournamentCard:o.x.gamingTournamentCard,gamingUpcomingCard:o.x.gamingUpcomingCard,gamingVideoCard:o.x.gamingVideoCard,"trending-in-ten-minutes-id":o.x.selectCarousel,"infopane-id":o.x.selectCarousel,"war-in-ukraine-carousel-id":o.x.selectCarousel,"local-news-carousel-id":o.x.selectCarousel,casualGamesCarouselCard:o.x.casualGamesCarouselCard,trendingSearchCard:o.x.trendingSearchCard,mangaCard:o.x.mangaCard,"shopping-prong-card-response":o.x.selectCarousel,winAppCard:o.x.winAppWC,publisherList:o.x.publisherList,promotedAdCard:o.x.promotedAdWC}},54155:function(e,t,n){"use strict";n.d(t,{Jv:function(){return p},QH:function(){return g},Qf:function(){return l},XI:function(){return u},eu:function(){return m},le:function(){return f},s2:function(){return h}});var i=n(74716),r=n(50632),o=n(7476),a=n(23549),s=n(68575);const c={enableDynamicWaterfallWPO:"wf",enableVerticalCarousels:"vc",enableAugments:"aug"},d={0:r.K$.c1,1:r.K$.c2,2:r.K$.c3,3:r.K$.c4,4:r.K$.c5};function l(e,t,n,r){const o=i.iM[e];let a="";let s;a=t?Object.keys(t).slice(0,o).map((e=>`${e}:${t[e].offset}`)).join(","):((e,t="c",n=":0")=>Array.from({length:e},((e,i)=>`${t}${i+1}${n}`)).join(","))(o),s=n?Object.keys(n).slice(0,o).map((e=>`${e}:${n[e].offset}`)).join(","):((e,t="c",n=":-1")=>Array.from({length:e},((e,i)=>`${t}${i+1}${n}`)).join(","))(o);const d={layout:e.toLowerCase(),colstatus:a,colwidth:300,adoffsets:s,l3v:2};if(r){const e=function(e){if(!e)return;const t=[];if(Object.keys(c).forEach((n=>{const i=n;e[i]&&t.push(c[i])})),!t.length)return;return t.join(",")}(r);e&&(d.wpoux=e)}return d}function u(e,t){const n={c1:{offset:0},c2:{offset:0},c3:{offset:0},c4:{offset:0},c5:{offset:0}},i=e[0];for(let o=1;o<e.length;o++){var r;const a=d[o],s=(null==t||null===(r=t[a])||void 0===r?void 0:r.offset)??0;n[a].offset=e[o]-i+s}return n}function p(e,t,n){const i={c1:{offset:-1},c2:{offset:-1},c3:{offset:-1},c4:{offset:-1},c5:{offset:-1}};for(let o=0;o<e.length;o++){const a=d[o];var r;if(-1!=e[o])i[a].offset=e[o];else void 0!==(null==n||null===(r=n[a])||void 0===r?void 0:r.offset)?i[a].offset=-1===n[a].offset?-1:n[a].offset+t[o]:i[a].offset=e[o]}return i}function h(e,t){var n,i;void 0!==e.layout&&void 0!==e.colstatus&&void 0!==e.l3v&&void 0!==e.adoffsets||a.M0.sendAppErrorEvent({...o.wtK,message:"Waterfall feed request missing QSPs",pb:{...o.wtK.pb,customMessage:`feedName: ${e.feedName}, \n                                option2: true, \n                                layout: ${e.layout}, \n                                colstatus: ${e.colstatus}, \n                                l3v: ${e.l3v}, \n                                adoffsets: ${e.adoffsets}, \n                                requestnextPageUrl: ${e.nextPageUrl},\n                                requestServiceUrl: ${e.serviceUrl},\n                                useWebLayoutEndpoint: ${e.useWebLayoutEndpoint},\n                                pageScenario: ${e.pageScenario},\n                                traceIdIndex: ${null==t?void 0:t.traceIdIndex}, \n                                Statics: ${null==t?void 0:t.isStatic}, \n                                debugId: ${null==t?void 0:t.debugId}, \n                                fdHead: ${null==t?void 0:t.serviceContext.fdHead},\n                                responseNextPageUrl: ${null==t?void 0:t.nextPageUrl},\n                                responseNextPageRequest.nextPageUrl: ${null==t||null===(n=t.nextPageRequest)||void 0===n?void 0:n.nextPageUrl},\n                                responseNextPageRequest.serviceUrl: ${null==t||null===(i=t.nextPageRequest)||void 0===i?void 0:i.serviceUrl},\n                                responseSource: ${null==t?void 0:t.responseSource}, \n                                status: ${null==t?void 0:t.status},\n                                responseStatus: ${null==t?void 0:t.responseStatus}`}})}const g=(e,t)=>e.map((e=>e.cards.reduce(((e,n)=>e+(n.height?n.height:t)),0))),m=(e,t,n,i=0)=>{const{contentInViewport:r}=(0,s.x$)(e),o=((e,t)=>e?e.map((e=>{var n;const{colSpan:i,height:r=t}=(null==e||null===(n=e.columns[0])||void 0===n?void 0:n.cards[0])||{},o=g(e.columns,t);if(i&&i>1)for(let e=1;e<=Math.min(i,o.length-1);e++)o[e]+=r;return Math.min(...o)})):[])(t,n);let a=0,c=0;for(let e=0;e<o.length&&!(a>=r.height-i);e++)a+=o[e],c++;return c},f=e=>{var t;return null==e||null===(t=e.id)||void 0===t?void 0:t.startsWith("loadingCardPlaceholder")}},20758:function(e,t,n){"use strict";n.d(t,{uS:function(){return f},jo:function(){return k},U$:function(){return T},$y:function(){return b},Ay:function(){return P},IK:function(){return L},Rc:function(){return x}});var i=n(7476),r=n(88826),o=n(76733);var a=n(13015),s=n(2518);const c="clickOffice365Button",d="clickPersonalizeButton",l="clickSettingsButton",u="clickSettingsCloseButton",p="clickSettingsInformationalButton",h="openEdgeBrowserNewWindow",g={["clickAddTileButton"]:()=>(0,a.xB)("AddTopSiteButton"),["clickMyFeedPivotButton"]:()=>(0,a.xB)("MyFeedPivotButton"),[c]:()=>(0,a.xB)("office365"),[d]:()=>(0,a.xB)("PersonalizeButton"),["clickSettingsAdvancedButton"]:()=>(0,a.xB)("SettingsAdvancedButton"),[l]:()=>(0,a.xB)("SettingsButton"),[u]:()=>(0,a.xB)("settingsCloseButton"),["clickSettingsCustomButton"]:()=>(0,a.xB)("SettingsCustomButton"),["clickSettingsFocusedButton"]:()=>(0,a.xB)("SettingsFocusedButton"),[p]:()=>(0,a.xB)("settingsInformationalButton"),["clickSettingsInspirationalButton"]:()=>(0,a.xB)("SettingsInspirationalButton"),["clickVoiceSearchButton"]:()=>(0,a.xB)("searchBoxVoiceButton"),[h]:async e=>e&&e.text&&(0,s.R)(e.text)?(window.open(e.text,"_blank").focus(),{actionCompleted:!0,status:"Window opened"}):{actionCompleted:!1,status:"No url provided"},["clickWaffleButton"]:()=>(0,a.xB)("waffle"),["focusOnSearchBar"]:()=>(0,a.yC)("searchBoxInput"),["clickRewardsButton"]:()=>(0,a.xB)("rewardsIcon")};var m,f,v=n(85205),y=n(23549),S=n(31558),C=n(67044),w=n(45266);!function(e){e.pinMsnews="pinMsnews",e.tryInformationalMode="tryInformationalMode",e.tryInformationalModeDirect="tryInformationalModeDirect",e.tryInformationalModeProg="tryInformationalModeProg",e.tryPersonalizations="tryPersonalizations",e.focusOnSearchBar="focusOnSearchBar",e.tryOffice365="tryOffice365"}(m||(m={})),function(e){e.setDefaultBrowser="setDefaultBrowser"}(f||(f={}));const b=e=>async()=>{const t=g[h];return t?await t({text:e}):null},T=(e,t)=>{switch(e){case m.tryInformationalMode:return I(t);case m.tryInformationalModeDirect:return M();case m.tryInformationalModeProg:return E(t);case m.tryPersonalizations:return A();case m.tryOffice365:return P()}},k=e=>{if(e===f.setDefaultBrowser)return(()=>{const e=new Promise((e=>{try{(0,S.N)()&&window&&window.chrome&&window.chrome.shellIntegrationPrivate&&"function"==typeof window.chrome.shellIntegrationPrivate.setDefaultBrowser?window.chrome.shellIntegrationPrivate.setDefaultBrowser((t=>{const n=null==t?void 0:t.success;n&&document.dispatchEvent(new CustomEvent("setDefaultBrowserSuccess",{})),e({actionCompleted:n,status:null==t?void 0:t.message})})):(y.M0.sendAppErrorEvent({...i.DKZ,message:"TargetActionLib: window.chrome.shellIntegrationPrivate.setDefaultBrowser chromium API not available"}),e({actionCompleted:!1,status:"set default browser api not available"}))}catch(t){(0,r.OO)(t,i.WQV,"TargetActionLib: Exception executing window.chrome.shellIntegrationPrivate.setDefaultBrowser chromium API to set default browser to Edge"),e({actionCompleted:!1,status:JSON.stringify(t)})}}));return async()=>await e})()},P=()=>async()=>{let e;const t=g[c];return t&&(e=await t({})),o.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e},A=()=>async()=>{let e;const t=g[d];return t&&(e=await t({})),o.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e},I=e=>async()=>{let t;return t=await D(),await(0,a.rT)(e||1e3),t=await R(),t},E=e=>async()=>{let t;t=await D(),await(0,a.rT)(e||1e3),t=await R(),await(0,a.rT)(e||1e3);const n=g[u];return n&&(t=await n({})),t},M=()=>async()=>{const e={actionCompleted:!1},t=await(0,C.oU)(v.z.ChromiumPageSettings);if(!t)return e.status="ChromiumPageSettingsConnector not found",e;const n=t.getCurrentState(),i={...n,originalLayout:n.currentLayout,...w.YZ};return t.updateLayout(i),e.actionCompleted=!0,e.status="Layout mode changed to informational",document.dispatchEvent(new CustomEvent("changeToInformationalSuccess",{})),e},x=()=>async()=>F("always"),L=()=>async()=>F("peek");async function R(){let e;const t=g[p];return t&&(e=await t({})),o.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e}async function D(){let e;const t=g[l];return t&&(e=await t({})),o.k.log(`Action completed: ${e.actionCompleted} status: ${e.status}`),e}async function F(e){const t={actionCompleted:!1},n=await(0,C.oU)(v.z.ChromiumPageSettings);if(!n)return t.status="ChromiumPageSettingsConnector not found",t;const i=n.getCurrentState();if("custom"!==i.currentLayout){const e={...i,originalLayout:i.currentLayout,currentLayout:"custom"};n.updateLayout(e)}return n.updateFeeds(e,i.selectedFeedDisplaySetting),t.actionCompleted=!0,t.status=`Feed toggle changed to ${e}`,t}},13015:function(e,t,n){"use strict";n.d(t,{rT:function(){return c},xB:function(){return a},yC:function(){return s},zq:function(){return d}});var i=n(2518),r=n(66415);const o=e=>(0,i.R)(e)?(0,r.b_)(e):null,a=e=>{const t=o(e);if(!t)return{actionCompleted:!1,status:`TargetId [${e}] was not found.`};const n=(e=>{const t=e&&e.click;return!(!t||"function"!=typeof t||(e.click.call(e),0))})(t);return{actionCompleted:n,status:`Click status: TargetId [${e}] == ${n}`}},s=e=>{const t=o(e);if(!t)return{actionCompleted:!1,status:`TargetId [${e}] was not found.`};const n=(e=>{const t=e&&e.focus;return!(!t||"function"!=typeof t||(e.focus.call(e),0))})(t);return{actionCompleted:n,status:`Focus status: TargetId [${e}] == ${n}`}},c=async e=>{const t=new Promise((t=>{setTimeout(t,e)}));await t},d=()=>{const e={resolve:null,waiting:null};return e.waiting=new Promise((t=>{e.resolve=t})),e}},70280:function(e,t,n){"use strict";n.d(t,{NS:function(){return r},ob:function(){return s},qP:function(){return i},tM:function(){return o},tW:function(){return a}});const i="data-t";var r;!function(e){e.Auto="auto",e.AutoScroll="autoScroll",e.Load="load",e.OutOfFocus="outoffocus",e.Partial="partial",e.Resize="resize",e.Scroll="scroll",e.Swipe="swipe",e.Tap="tap",e.View="view"}(r||(r={}));const o="TelemetryPageViewNotificationEvent",a="AppErrorNotificationEvent",s="IDXId"},12184:function(e,t,n){"use strict";var i,r;n.d(t,{C:function(){return i},z:function(){return r}}),function(e){e[e.Exceptional=0]="Exceptional",e[e.Fallback=1]="Fallback"}(i||(i={})),function(e){e[e.Alert=0]="Alert",e[e.NoAlert=1]="NoAlert",e[e.HighImpact=2]="HighImpact",e[e.Critical=3]="Critical"}(r||(r={}))},82898:function(e,t,n){"use strict";n.d(t,{Aw:function(){return o},c9:function(){return i},hP:function(){return s},uH:function(){return r},wu:function(){return a}});const i={Undefined:0,Header:1,Footer:2,TopNavBar:3,NavBar:4,DropDown:5,Section:6,Carousel:7,Module:8,SearchBox:9,InputBox:10,ActionButton:11,Interaction:12,Headline:13,Legacy_Navigate:14,Entity:15,Legacy_StructuredData:16,Legacy_AppStore:17,Legacy_Launch:18,Legacy_CmsPromotions:19,Legacy_MicrosoftWebStore:20,Legacy_XboxStore:21,Legacy_OfficeStore:22,Legacy_Install:23,Legacy_PartnerLinks:24,Legacy_SponsoredContent:25,Legacy_Follow:26,Legacy_Unfollow:27,Legacy_More:28,Topic:29,Provider:30,Legacy_Close:36,Legacy_Share:37,Legacy_Like:38,Legacy_Dislike:39,Legacy_Unlike:40,Legacy_Undislike:41,Legacy_Mute:42,Legacy_Unmute:43,Legacy_Cancel:44,Legacy_Manage:45,NewStories:46,AutoSuggest:47,Tile:49,TrendingNews:50,AllCoverage:51,Report:52,MsccCookieComplianceBanner:54,CookieWallCookieComplianceBanner:57,FRE:60,VideoPlayer:61,ContentCard:62,SubmitForm:63,TrafficCard:64,WeatherCard:65,TravelDestinationCard:66,FitnessWorkoutVideo:67,BingHealthFitnessCard:68,FamilyCard:69,FitnessCard:70,HealthQnACard:71,HealthTipCard:72,HealthFitnessCarousel:73,CovidCard:74,Audio:75,ShoppingAd:76,ContentGroup:77,AicreationCard:78,Game:79,HealthRiverCard:80,Augment:81,Manga:82,NotiifcationCenter:85},r={Undefined:0,StructuredData:1,AppStore:2,CmsPromotions:3,MicrosoftWebStore:4,XboxStore:5,OfficeStore:6,PartnerLinks:7,SponsoredContent:8,ExternalLink:10,SearchPromo:11,Feed:12,Article:13,Gallery:14,Video:15,Audio:16,Settings:17,DisplayAd:18,OfficeDocument:19,App:20,SearchResult:21,VideoAd:22,Map:23,Comment:24,Profile:25,Coachmark:26,TrendingSearch:27,AutoSuggestSearch:28,SearchHistory:29,TextSearch:30,TopSites:31,SearchLink:32,ImageSearch:33,VoiceSearch:34,Toast:35,Greeting:36,Image:37,Banner:38,Waffle:39,Notification:40,QnaTopic:41,QnaContent:42,Publisher:43,Topic:44,LayoutToggle:45,WebContent:46,FinanceTicker:47,CashbackOffer:48,AiCharacter:49,FoodItem:50,FitnessChallenge:51,Overlay:52,Inspiration:53,DailyDiscovery:54,SegmentAugment:55,Upsell:56,UpsellLearnMore:57,WeatherHero:58,TravelArticleCard:59,UpsellTooltip:60,UpsellGetApp:61,UpsellAppStore:62,UpsellGooglePlay:63},o={Click:"click",Hover:"mouseenter",MouseLeave:"mouseleave",Submit:"submit",View:"view",RightClick:"rightclick",Wheel:"wheel",KeyPress:"keypress",HorizontalSwipe:"hswipe",MiddleClick:"middleclick",VerticalSwipe:"vswipe",Launch:"launch"},a={Undefined:0,Navigate:1,ContextMenu:2,Pin:3,Unpin:4,Rearrange:5,Remove:6,Add:7,Open:8,View:9,Follow:10,Unfollow:11,More:12,Close:13,Share:14,Like:15,Dislike:16,Unlike:17,Undislike:18,Mute:19,Unmute:20,Cancel:21,Launch:22,Install:23,Manage:24,Show:25,MuteCancel:26,Save:27,Hide:28,Unhide:29,Customize:30,Suspend:31,Clear:32,SignIn:33,SignOut:34,UndoSave:35,TurnOn:36,TurnOff:37,Forward:38,Response:39,Report:40,ZoomIn:41,ZoomOut:42,Comment:43,Sort:44,Love:45,Surprised:46,Thinking:47,Sad:48,Angry:49,TextSearch:50,ImageSearch:51,UndoRemove:52,Rename:53,SearchLink:54,VoiceSearch:55,Complete:56,Play:57,Pause:58,Seek:59,Volume:60,ClosedCaptions:61,Fullscreen:62,Restore:63,Replay:64,Copy:65,Reactlike:66,UnReactlike:67,UnLove:68,UnSurprised:69,UnThinking:70,UnSad:71,UnAngry:72,ReportAd:73,Refresh:74,Paginate:75,Click:76,Hover:77,SelectProduct:78,Signup:79,CompleteOrder:80,Model3DInteraction:81,PushNotificationReceive:82,PushNotificationShow:83,PushNotificationClick:84,PushNotificationHmsClick:85,Expand:86,Collapse:87,NoSearchQuerySubmit:88,Feedback:89,QualityChange:90,ProtocolLaunch:91,SydneySummary:92,SydneyTopQuestions:93,SydneyKeyTakeaways:94,SydneyDegreeOverview:95,SydneyFactCheck:96,SydneyMore:97,LeftSwipe:98,RightSwipe:99},s={Empty:0,SearchBox:1,TopSites:2,Suggested:4,ContentFeed:8,WinFRE:16,BingImage:32,ContentBelowTheFold:64,CustomModeOption:128,GreetingEnabled:256,HeadingsOnly:512,StripeLayout:1024,Peek:2048}},23549:function(e,t,n){"use strict";let i;n.d(t,{M0:function(){return a},dK:function(){return o},uZ:function(){return s}});const r=new Promise((e=>{i=e}));let o=()=>r,a=null;function s(e,t=i){a=e,t()}},95244:function(e,t,n){"use strict";var i;n.d(t,{G:function(){return i}}),function(e){e[e.All=0]="All",e[e.Otf=1]="Otf",e[e.OneDS=2]="OneDS",e[e.CTag=3]="CTag",e[e.Comscore=4]="Comscore",e[e.Debug=5]="Debug",e[e.SuperApp=6]="SuperApp",e[e.Automation=7]="Automation"}(i||(i={}))},60844:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var i=n(72626);class r{createPageViewPayload(e){if(!e)return;const t=e&&e.page,n=t&&t.content,r=e&&e.user,o={rnd:(0,i.Xn)(),udc:!0};return t&&(o["pg.n"]=t.name,o["pg.t"]=t.type,o["pg.c"]=t.config,o["pg.p"]=t.product,o.rf=t.referral,o.tp=t.url,o.cvs=t.canvas,t.consentChanged&&(o.ctsa=t.consentChanged)),n&&(o.di=n.domainId,o["st.dpt"]=n.category,o["st.sdpt"]=n.subcategory,o.subcvs=n.vertical),e&&(o.lng=e.locale&&e.locale.mkt,e.request&&(o.rid=e.request.requestId,o.activityId=e.request.activityId),e.browser&&(o["d.imd"]=e.browser.isMobile,o.scr=e.browser.screenSize,o.anoncknm=e.browser.anoncknm)),r&&(o.issso=r.isSso,o.aadState=r.aadState),o}}},62433:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var i=n(72626);class r{createPageViewPayload(e){if(!e)return;let t=e&&e.page&&e.page.url;try{const n=new URL(t),i=e&&e.page&&e.page.config;(8&i||2048&i)&&(n.searchParams.set("content","1"),t=n.href),e.locale&&e.locale.mkt&&(n.searchParams.set("mkt",e.locale.mkt),t=n.href)}catch{}return{rn:(0,i.Xn)(),c1:2,c2:3000001,cs_ucfr:1,c7:t,c8:e&&e.page&&e.page.content&&e.page.content.title,c9:e&&e.page&&e.page.referral,cs_fpid:e&&e.browser&&e.browser.muid,cs_fpit:"o",cs_fpdm:"*null",cs_fpdt:"*null"}}}},67103:function(e,t,n){"use strict";n.d(t,{k:function(){return l}});var i=n(70280),r=n(82898),o=n(65004),a=n(72626),s=n(45555),c=n(30676),d=n(13578);class l{constructor(e=!1){this.enableBatchingForAllEvents=!1,this.enableBatchingEventList={},!0!==e?Array.isArray(e)&&e.forEach((e=>this.enableBatchingEventList[e]=!0)):this.enableBatchingForAllEvents=!0}createPageViewPayload(e){if(e){return this.createEvent("PageView",{...e},o.zU.RealTime)}}createContentViewPayload(e,t,{contentViewType:n,isMeaningfulScroll:r}){if(!t)return;const s=[];e.forEach((e=>{s.push(this.mapTelemetryObject(e))}));let c;(0,a.d5)()&&(c={content:{docHeight:(0,a.d5)()}});const l={...t,...c,compressedObject:s,contentViewType:n};if(n===i.NS.Scroll&&(l.isMeaningfulScroll=r),!(0,d.Z)(s)){return this.createEvent("ContentView",l,o.zU.RealTime)}}createActionPayload(e,t,n,i){if((0,d.Z)(e)||!t)return;let a;n===r.Aw.RightClick?a="rightclick":t&&t.browser&&!0===t.browser.isMobile?a="tap":n===r.Aw.Click&&(a="click");const s=e.content&&e.content.type,l=e.type||(0,c.Y)(s,i);0!==l&&(e.type=l),delete e.action,delete e.behavior,delete e.overrideId,delete e.overrideDestinationUrl,delete e.overrideEmailIdScrubbing;return this.createEvent("UserAction",{actionType:n,behavior:i,object:e,...t,gesture:a},o.zU.RealTime)}createEventPayload(e,t,n){if(!n)return;return this.createEvent(e,{...n,...t},o.zU.RealTime)}createCustomEventPayload(e,t,n){if(!n&&"AppError"!==e||(0,d.Z)(t))return;return this.createEvent(e,{...n,extSchema:t},o.zU.RealTime)}mapTelemetryObject(e){let t;const n=e&&e.content&&e.content.type;(n||e.behavior)&&(t=(0,c.Y)(n,e.behavior));const i={n:e&&e.name,y:e&&e.type||t,l:e&&e.content&&e.content.id,h:e&&e.content&&e.content.headlineIdx,v:e&&e.content&&e.content.vertical,tp:e&&e.content&&e.content.topic,c:e&&e.content&&e.content.category,s:e&&e.content&&e.content.source,f:e&&e.feed&&e.feed.id,ct:e&&e.content&&e.content.type,i:e&&e.placement&&e.placement.id,p:e&&e.placement&&e.placement.parentId,o:e&&e.placement&&e.placement.ordinal,aud:e&&e.content&&e.content.audienceMode,isLocal:e&&e.content&&e.content.isLocal,subscriptionType:e&&e.content&&e.content.subscriptionType,providerType:e&&e.content&&e.content.providerType,zone:e&&e.zone,isMonetized:e&&e.isMonetized,isFeed:e&&e.isFeed};return e.ext&&(i.ext=e.ext),i}createEvent(e,t,n){let i=0;return!a.kP||this.enableBatchingForAllEvents||this.enableBatchingEventList[e]||(i=2),{name:s.id[e],data:t,baseType:s.id.Base,latency:n,sync:i}}}},87552:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var i=n(90351),r=n(25514);const o={n:"name",t:"type",a:"action",b:"behavior",customHandled:"customHandled",d:"overrideDestinationUrl",oe:"overrideEmailIdScrubbing",z:"zone",ism:"isMonetized",isfeed:"isFeed",isci:"isCI","c.hi":"content.headlineIdx","c.auth":"content.author","c.i":"content.id","c.l":"content.isLocal","c.s":"content.source","c.p":"content.parentId","c.t":"content.type","c.tp":"content.topic","c.v":"content.vertical","c.c":"content.category","c.sc":"content.subcategory","c.pn":"content.partnerName","c.pi":"content.partnerId","c.b":"content.brand","c.bi":"content.brandId","c.st":"content.subscriptionType","c.pl.i":"content.placement.id","c.pl.p":"content.placement.parentId","c.pl.o":"content.placement.ordinal","c.pl.l":"content.placement.lineage","c.pl.lo":"content.placement.lineageOrdinal","c.aud":"content.audienceMode","c.pv":"content.providerType","f.i":"feed.id","f.n":"feed.name","f.t":"feed.type",ext:"ext","m.c":"metrics.isContentCI"};class a{static compress(e){const t={},n=Object.keys(o);for(let r=0;r<n.length;r++){const a=n[r],s=(0,i.Z)(e,o[a]);void 0!==s&&(t[a]=s)}const r=(0,i.Z)(e,"content.headline");return r&&(t["c.hl"]=r),t}static decompress(e){if(!e)return;const t={},n=Object.keys(o);for(let a=0;a<n.length;a++){const s=n[a],c=(0,i.Z)(e,s);void 0!==c&&(0,r.Z)(t,o[s],c)}return e["c.hl"]&&(0,r.Z)(t,"content.headline",e["c.hl"]),t}}},45927:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var i,r=n(70280),o=n(23549),a=n(72626),s=n(87552),c=n(78951),d=n(46728);class l{get combinedContract(){if(this.contract){const e=(this.contract.content=this.contract.content||{}).headline;this.contract.content.headline=e||(0,a.tH)(this.element)}return this.hasInheritedProperty?(0,d.Z)({},this.superContract,this.contract,this.internalContract):(0,d.Z)({},this.contract,this.internalContract)}get internalContract(){const{lineage:e,lineageOrdinal:t}=l.getLineage(this)||{},n=l.getInheritedProperties(this),i={placement:{id:this.id,lineage:e,lineageOrdinal:t},...n};return this.parentDOM&&this.parentDOM.id&&0!==this.parentDOM.id&&(i.placement.parentId=this.parentDOM.id,i.placement.ordinal=this.ordinal),i}constructor(e){this.hasInheritedProperty=!1,this.children=[],this.ordinal=0,this.ordinalCount=0,this.contract=e||{},this.ordinalCount=0,this.superContract={}}static addElement(e){if(!e)return;const t=this.parseContract(e);let n=this.get(e);if(n&&n.id?t&&(n.contract=t):(n=new l(t),n.id=this.generateId(),this.set(e,n)),!n)return;let i=e.parentElement;!i&&e.parentNode&&e.parentNode.host&&(i=e.parentNode.host);let o=i&&(0,a.pE)(i,`[${r.qP}]`),s=o&&this.get(o);return o&&!s&&((0,a.t0)("telemetrynodeadded",o),s=this.get(o)),n===s&&(o=o&&o.closest(`[${r.qP}]`),s=o&&this.get(o)),n&&(n.parentDOM=s&&s!==n?s:l.getRoot()),this.inheritProperty(n),this.needUpdate=!0,n}static inheritProperty(e){if(!o.M0||!o.M0.config||o.M0.config.inheritByTraversingDOM||!e||!e.contract)return;const t=e.parentDOM&&e.parentDOM.contract,n=e.parentDOM&&e.parentDOM.superContract,i=e.contract,r=e.superContract;o.M0.config.inheritExt&&(t&&t.ext||n&&n.ext)&&(e.hasInheritedProperty=!0,r.ext={...n&&n.ext,...t&&t.ext,...i.ext})}getShouldTrackPartialContentUpdate(){if(!this.element)return!0;if(this.element.hasAttribute("data-nopartialcontentview"))return!1;var e;void 0===this.memoizedParentShouldTrackPartialContentUpdate&&(this.memoizedParentShouldTrackPartialContentUpdate=(null===(e=this.parentDOM)||void 0===e?void 0:e.getShouldTrackPartialContentUpdate())??!0);return this.memoizedParentShouldTrackPartialContentUpdate}static isObject(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}static renderObject(e){return e.render()}static renderContract(e){return c.D.render(e)}static setAttribute(e,t,n){if(!e||!e.dataset)return;const i=this.renderContract(t||n&&n.contract);i&&(e.dataset.t=i[r.qP])}static get(e){const t=this.elementMap.get(e);if(!t)return t;const n=this.parseContract(e);return t&&n&&(t.contract=n),t}static getLineage(e,t=">",n=!1){try{if(e&&e.parentDOM&&e.parentDOM!==l.root){const i=this.getLineage(e.parentDOM,t,n),{lineage:r,lineageOrdinal:o}=i||{};return{lineage:r+t+e.contract.name,lineageOrdinal:(o?o+t:"")+e.ordinal}}return e&&e.parentDOM&&e.parentDOM===l.root&&n?{lineage:e.contract.name,lineageOrdinal:`${e.ordinal}`}:{lineage:e&&e.contract.name}}catch(t){if(o.M0&&o.M0.config&&o.M0.config.logElementForLineageFailure){const{id:t,tagName:n}=e&&e.element||{};o.M0.sendAppErrorEvent({id:20203,severity:1,message:"Error while parsing lineage",pb:{customMessage:JSON.stringify({elementId:t,elementTag:n})}})}}}static getInheritedProperties(e){if(!o.M0||!o.M0.config||!e)return;const{inheritByTraversingDOM:t=!1,inheritPropertyList:n=[],memoizeInheritedProperties:i}=o.M0.config,r=t&&n;return r?i?this.getInheritedPropertiesWithMemoize(e,r):this.getInheritedPropertiesWithoutMemoize(e,r):void 0}static getInheritedPropertiesWithoutMemoize(e,t){let n=e;const i={};for(;n&&n!==l.root;){for(const e of t){const t=n.contract&&n.contract[e];void 0!==t&&(void 0===i[e]?i[e]=t:this.isObject(i[e])&&(i[e]={...t,...i[e]}))}n=n.parentDOM}return i}static getInheritedPropertiesWithMemoize(e,t){if(e.memoizedProperties)return e.memoizedProperties;const n={};for(const i of t){n[i]=e.contract[i];let t=e&&e.parentDOM;for(;t&&t!==l.root;){const e=t.memoizedProperties?t.memoizedProperties[i]:t.contract[i];if(void 0!==e&&(void 0===n[i]?n[i]=e:this.isObject(n[i])&&(n[i]={...e,...n[i]})),t.memoizedProperties)break;t=t.parentDOM}}return e.memoizedProperties=n,n}static getRoot(){return l.root}static getTelemetryObject(e){const t=this.get(e);if(t&&t.contract)return new c.D(t.contract)}static parseContract(e){try{const t=e&&e.getAttribute&&e.getAttribute(r.qP);return t?this.parseAttribute(t):void 0}catch{}}static parseAttribute(e){try{const t=e&&JSON.parse(e);return this.parseMetadata(t)}catch{}}static parseMetadata(e){try{return e&&s.v.decompress(e)}catch{}}static set(e,t){t.element=e,this.elementMap.set(e,t)}static updateLayout(){if(!this.needUpdate)return;this.needUpdate=!1,this.root.ordinalCount=0;const e=(0,a.Ux)(document.documentElement);for(const t of e){let e=this.get(t);e&&e.parentDOM||((0,a.t0)("telemetrynodeadded",t),e=this.get(t)),e&&(e.ordinal=e.parentDOM?++e.parentDOM.ordinalCount:0,e.ordinalCount=0)}}static generateId(){return++this.lastId}}(i=l).elementMap=new WeakMap,i.root=new i({name:"root"}),i.lastId=0,i.needUpdate=!1},74706:function(e,t,n){"use strict";n.d(t,{o:function(){return z}});var i=n(70280),r=n(95244),o=n(82898);var a=n(72626);class s{constructor(e,t){this.contentViewCallback=e,this.overrideScrollOffset=t,this.scrollChanged=!0,this.sizeChanged=!0,this.newScrollLeft=null,this.newScrollTop=null,this.firstScrolledMargin=10,this.forceScrollFiring=!1,this.viewportEventIntervalDelayMs=200,this.viewportLeft=0,this.viewportTop=0,this.viewportWidth=0,this.viewportHeight=0,this.userInteracted=!1,this.eventTimerId=0,this.eventTimeoutMS=1e3,this.scrollPerformanceTrackers={},this.syntheticTelemetryScrollCallback=(e,t)=>{e&&(this.userInteracted=!0,this.updateMechanism=i.NS.Scroll,this.scrollChanged=!0,this.triggerCallback(),t(e),this.forceScrollFiring=!0)},this.viewportOffset=0}initListener(e){const t=this.throttle(this.update.bind(this),this.viewportEventIntervalDelayMs);t(),this.scrollContainer=e,this.attachEvent("resize",(e=>{this.userInteracted=!0,this.updateMechanism=i.NS.Resize,this.sizeChanged=!0,this.triggerCallback(),t(e)})),this.attachEvent("scroll",(e=>{e&&!e.preventDefaultScroll&&(this.userInteracted=!0,this.updateMechanism=i.NS.Scroll,this.scrollChanged=!0,this.triggerCallback(),t(e))})),a.kP&&window.addEventListener("telemetryscroll",(e=>{this.syntheticTelemetryScrollCallback(e,t)}))}resetViewportOffset(){this.viewportOffset=this.overrideScrollOffset?this.overrideScrollOffset():(0,a.qC)(this.scrollContainer)}triggerCallback(){this.dispatchEvent("telemetryviewportupdated",this.updateMechanism)}dispatchEvent(e,t){const n=new CustomEvent(e,{detail:{mech:t}});dispatchEvent(n)}throttle(e,t=1e3){let n=0,i=!1;return r=>{if(i)return;const o=(new Date).getTime(),a=o-n;a>t?(n=o,e(r)):(i=!0,setTimeout((()=>{i=!1,e()}),t-a))}}update(e){let t=this.sizeChanged,n=this.scrollChanged;const i=this.viewportWidth,r=this.viewportHeight,o=this.viewportLeft,a=this.viewportTop;this.updateCurrentViewportValues(),t=t&&(r!==this.viewportHeight||i!==this.viewportWidth),n=n&&(o!==this.viewportLeft||a!==this.viewportTop),(this.forceScrollFiring||t||n)&&(this.scheduleViewportEvent(e),this.forceScrollFiring=!1)}updateCurrentViewportValues(){this.scrollChanged&&(this.viewportLeft=this.newScrollLeft||this.getScrollLeft(),this.viewportTop=this.newScrollTop||this.getScrollTop(),this.newScrollLeft=this.newScrollTop=null,!this.firstScroll&&this.viewportTop>this.firstScrolledMargin&&(this.firstScroll=!0)),this.sizeChanged&&(this.viewportWidth=window.innerWidth||document.documentElement.clientWidth,this.viewportHeight=window.innerHeight||document.documentElement.clientHeight),this.scrollChanged=this.sizeChanged=!1}scheduleViewportEvent(e){if(this.userInteracted&&(c(e)&&(this.lastScrollStarted||(this.lastScrollStarted=e&&e.timeStamp||performance.now()),this.scrollPerformanceTrackers.endOfFeedTimeTracker&&this.scrollPerformanceTrackers.endOfFeedTimeTracker.startOrContinue(e),this.scrollPerformanceTrackers.appResponsivenessTracker&&this.scrollPerformanceTrackers.appResponsivenessTracker.startOrContinue(e)),this.eventLastScheduleTime=+new Date,!this.eventTimerId)){const t=()=>{this.eventTimerId=this.userInteracted=!1;const n=Date.now()-this.eventLastScheduleTime;if(n>this.eventTimeoutMS)if(c(e)){const e=performance.now()-this.lastScrollStarted;let t,n,i;this.lastScrollStarted=void 0,this.scrollPerformanceTrackers.scrollInputTracker&&(t=this.scrollPerformanceTrackers.scrollInputTracker.getPendingPotentialInputType(),n=this.scrollPerformanceTrackers.scrollInputTracker.getAndResetPotentialMissedScrollInput(),i=this.scrollPerformanceTrackers.scrollInputTracker.getScrollInstanceData());const r={scrollInputType:t,potentialMissedScrollInput:n,scrollDuration:e,endOfFeedTime:this.scrollPerformanceTrackers.endOfFeedTimeTracker&&this.scrollPerformanceTrackers.endOfFeedTimeTracker.stop(),calculateAri:this.scrollPerformanceTrackers.appResponsivenessTracker&&this.scrollPerformanceTrackers.appResponsivenessTracker.stop(),scrollInstanceData:i};this.contentViewCallback(this.updateMechanism,this.isMeaningfulScroll(),r)}else this.contentViewCallback(this.updateMechanism,this.isMeaningfulScroll());else this.eventTimerId=setTimeout(t,this.eventTimeoutMS-n)};this.eventTimerId=setTimeout(t,this.eventTimeoutMS)}}isMeaningfulScroll(){if(this.updateMechanism!==i.NS.Scroll)return!1;const e=this.overrideScrollOffset?this.overrideScrollOffset():(0,a.qC)(this.scrollContainer),t=(0,a.P6)(this.scrollContainer);return(e>this.viewportOffset&&e-this.viewportOffset>t/2||e<this.viewportOffset&&this.viewportOffset-e>t/2)&&(this.viewportOffset=e,!0)}getScrollTop(){if(this.scrollContainer)return this.scrollContainer.scrollTop;if("undefined"!=typeof pageYOffset)return pageYOffset;{const e=document.body;let t=document.documentElement;return t=t.clientHeight?t:e,t.scrollTop}}getScrollLeft(){if(void 0!==window.pageXOffset)return window.pageXOffset;{const e=document.body;let t=document.documentElement;return t=t.clientWidth?t:e,t.scrollLeft}}attachEvent(e,t){window.addEventListener(e,t,!1),this.scrollContainer&&this.scrollContainer.addEventListener(e,t,!1)}initScrollPerformanceTrackers(e){const{endOfFeedTimeTracker:t,appResponsivenessTracker:n,scrollInputTracker:i}=e;t&&(this.scrollPerformanceTrackers.endOfFeedTimeTracker=t),n&&(this.scrollPerformanceTrackers.appResponsivenessTracker=n),i&&(this.scrollPerformanceTrackers.scrollInputTracker=i,i.start())}}function c(e){return e&&(e.type===i.NS.Scroll||"telemetryscroll"===e.type)}let d,l=new Promise((e=>d=e));const u=new Map;function p(){u.clear()}const h=e=>Math.floor(101*Math.random())<=e;let g,m=new Promise((e=>g=e)),f=0;var v,y=n(45555),S=n(45927);class C{constructor(){this.clickSearchDepth=20,this.contextMenuEventCallback=e=>{const t=this.getClickTarget(e);this.handleClickEvent(t,o.Aw.RightClick,o.wu.ContextMenu)},this.clickEventCallback=e=>{const t=this.getClickTarget(e);1===e.button?this.handleClickEvent(t,o.Aw.MiddleClick,o.wu.Navigate):this.handleClickEvent(t)},this.auxClickEventCallback=e=>{if(1===e.button){const t=this.getClickTarget(e);this.handleClickEvent(t,o.Aw.MiddleClick,o.wu.Navigate)}}}observe(e=window,t){e.addEventListener("click",this.clickEventCallback),e.addEventListener("auxclick",this.auxClickEventCallback),t||e.addEventListener("contextmenu",this.contextMenuEventCallback)}unobserve(e,t){e.removeEventListener("click",this.clickEventCallback),e.removeEventListener("auxclick",this.auxClickEventCallback),t||e.removeEventListener("contextmenu",this.contextMenuEventCallback)}handleClickEvent(e,t,n){const i=this.getTelemetryClickTarget(e);if(!i)return;i&&i.hasAttribute("data-customhandled")||this.dispatchEvent("telemetryclick",i,t,n)}dispatchEvent(e,t,n,i){const r=new CustomEvent(e,{detail:{element:t,action:n,behavior:i}});dispatchEvent(r)}getTelemetryClickTarget(e){let t=e;for(let e=0;e<this.clickSearchDepth&&t&&!this.validTarget(t);e++)t.assignedSlot?t=t.assignedSlot:t.parentElement?t=t.parentElement:t.parentNode&&t.parentNode.host&&(t=t.parentNode.host);if(this.validTarget(t))return t}getClickTarget(e){if(!e.composedPath||"function"!=typeof e.composedPath)return e.target;{const t=e.composedPath();if(t.length>2&&"hasAttribute"in t[0]&&!t[0].hasAttribute(i.qP)&&"[object ShadowRoot]"===Object.prototype.toString.call(t[1])&&"hasAttribute"in t[2]&&t[2].hasAttribute(i.qP))return t[2];if(t.length>0)return t[0]}}validTarget(e){const t=e instanceof Element;if(!e||!t)return!1;const n=S.u.get(e);let i;return i=n?n.contract:S.u.parseContract(e),"BUTTON"===e.nodeName||e.hasAttribute("href")||e.getAttribute&&"button"===e.getAttribute("role")||i&&i.type===o.c9.DropDown||i&&i.type===o.c9.ActionButton||i&&i.behavior&&e.tagName.includes("-")||e.form}}class w{static start(){this.startTime=Date.now(),this.isPause=!1,this.isPauseV2=!1,this.started=!0}static pause(){this.started&&!this.isPause&&(this.isPause=!0,this.dwellTimeElapse+=Date.now()-this.startTime)}static pauseV2(){this.started&&!this.isPauseV2&&(this.isPauseV2=!0,this.dwellTimeElapseV2+=Date.now()-this.startTime)}static getDwellTime(){if(this.isPause){return this.dwellTimeElapse}if(0!==this.startTime&&this.started){return this.dwellTimeElapse+(Date.now()-this.startTime)}return 0}static getDwellTimeV2(){if(this.isPauseV2){return this.dwellTimeElapseV2}if(0!==this.startTime&&this.started){return this.dwellTimeElapseV2+(Date.now()-this.startTime)}return 0}static setDwellTime(e,t){this.startTime=e,this.dwellTimeElapse=t}static setDwellTimeV2(e,t){this.startTime=e,this.dwellTimeElapseV2=t}static reset(){this.dwellTimeElapse=0,this.dwellTimeElapseV2=0,this.startTime=0,this.isPause=!1,this.isPauseV2=!1,this.started=!1}static getIsActive(){return this.started&&!this.isPause}}(v=w).started=!1,v.startTime=0,v.dwellTimeElapse=0,v.dwellTimeElapseV2=0,v.isPause=!1,v.isPauseV2=!1;class b{constructor(){this.filterNodeList=["script"],this.mutationObserver=new MutationObserver(this.mutationCallback.bind(this)),this.processAddedSubtreeAndDispatchEvent(document.documentElement);const e=HTMLElement.prototype.attachShadow;if(!e)return;const t=this;HTMLElement.prototype.attachShadow=function(n){const i=e.call(this,n);return this.shadowRoot&&t.observe(this.shadowRoot),i}}observe(e){e!==window&&this.mutationObserver.observe(e,{attributes:!0,childList:!0,characterData:!1,subtree:!0,attributeFilter:["data-t"]})}unobserve(e){}mutationCallback(e){setTimeout((()=>{this.processMutationRecord(e)}),10)}processMutationRecord(e){for(let t=0;t<e.length;t++){const n=e[t],i=n.addedNodes;i&&i.length>0?this.processMutatedNodes(Array.from(i)):"attributes"===n.type&&this.processMutatedNodes([n.target])}}processMutatedNodes(e){e&&e.forEach((e=>{(0,a.He)(e)?this.processAddedSubtreeAndDispatchEvent(e):e.nodeType!==Node.ELEMENT_NODE||this.filterNodeList.includes(e.tagName&&e.tagName.toLowerCase())||this.processAddedSubtreeAndDispatchEvent(e)}))}processAddedSubtreeAndDispatchEvent(e){(0,a.jT)(e)&&(0,a.t0)("telemetrynodeadded",e);const t=this.processSubtree(e);for(let e=0;e<t.length;e++)(0,a.t0)("telemetrynodeadded",t[e])}processSubtree(e){if(!e)return;let t;return t=(0,a.He)(e)?e.shadowRoot.querySelectorAll("[data-t]"):e.querySelectorAll("[data-t]"),t}}var T=n(78951);var k=n(46728);class P{get requestId(){return this.requestIdInternal}get combinedContract(){this.eventIndexInternal=this.eventIndexInternal+1,this.tmplString=this.generateStringFromKeyValueObject(this.tmplProps);const e=this.joinIdProps&&Object.keys(this.joinIdProps).length>0?JSON.stringify(this.joinIdProps):void 0,t=Object.keys(this.customProps).length>0?JSON.stringify(this.customProps):void 0;this.customString=t;try{const e=window;void 0!==e&&e.navigator&&void 0!==typeof e.navigator.globalPrivacyControl&&(this.globalPrivacyControl=e.navigator.globalPrivacyControl)}catch{}const n={page:{...this.contract.page,url:(0,a.Mm)((0,a.XW)(this.contract.page.url,this.contract.page.ocid),this.qspToScrubbed),referral:(0,a.Mm)(this.contract.page.referral||a.kP&&document.referrer,this.qspToScrubbed),content:this.contract.page.content?{...this.contract.page.content}:void 0,dwellTime:w.getDwellTime(),dwellTimeV2:this.getDwellTimeV2(),viewType:this.contract.page.viewType||this.viewTypeCallback&&this.viewTypeCallback()},browser:{...this.contract.browser,width:(0,a.wi)(),height:(0,a.P6)(),screenSize:a.kP?[screen.width,screen.height].join("x"):"0x0",clientId:(0,a.i2)(this.activityIdInternal),scrollOffset:"function"==typeof this.overrideScrollOffset&&this.overrideScrollOffset()||(0,a.qC)(),anoncknm:this.anonCookieName,cookieEnabled:a.kP&&navigator.cookieEnabled,globalPrivacyControl:this.globalPrivacyControl,hiddenOnce:this.browserHiddenOnce,muid:(0,a.FL)()||void 0,cookies:(0,a.tV)(this.cookiesToCollect)||void 0},flight:{...this.contract.flight,tmpl:this.tmplString},integration:{...this.contract.integration,joinIds:e},request:{activityId:this.activityIdInternal,requestId:this.requestIdInternal,afdMuid:this.afdMuidInternal,pageGenTime:this.pageGenTime},timestamp:+Date.now(),eventIndex:this.eventIndexInternal,sdk:{name:"peregrine",ver:"1.0.21",schemaVer:"1.0.21"},user:this.contract.user,locale:this.contract.locale,feed:this.contract.feed,gallery:this.contract.gallery,custom:this.customString,build:this.buildNumber,ext:this.contract.ext},i=(0,a.F$)();i&&(n.browser.isWin11=i);const r=(0,a.uV)();return r&&(n.browser.isXBox=r),this.isPvEvent&&(n.debug=this.contract.debug),n}constructor(e,t,n,i,r,o,s,c,d){this.eventIndexInternal=0,this.cookiesToCollect=["TOptOut","OptanonConsent","eupubconsent-v2","wid","app_wid"],this.qspToScrubbed=["tid","upn","q","user","username","email","login_hint"],this.isPvEvent=!1,this.contract=e,this.updateActivityId(t),this.anonCookieName=n,this.enableDwelltimeV2=c,this.buildNumber=i||"",this.afdMuidInternal=s,this.customProps={},this.tmplProps={},this.joinIdProps={},this.eventIndexInternal=0,this.browserHiddenOnce=!1,this.overrideScrollOffset=r,this.viewTypeCallback=o,this.pageGenTime=d,a.kP&&document.addEventListener("visibilitychange",this.browserVisibilityCallback.bind(this))}static mergeContract(e,t){if(!e||!t)return e||t;const n=Object.keys(t),i={...e};for(let e=0;e<n.length;e++){const r=n[e];i[r]={...i[r],...t[r]}}return e.page&&e.page.content&&t.page&&t.page.content&&(i.page.content={...e.page.content,...t.page.content}),e.user&&t.user&&(i.user={...e.user,...t.user}),e.ext&&t.ext&&(i.ext=(0,k.Z)(e.ext,t.ext)),i}update(e,t=!1){e&&(t?this.contract=P.mergeContract(this.contract,e):this.updatedContract=P.mergeContract(this.updatedContract,e))}updateActivityId(e){this.activityIdInternal=e;const t=this.contract&&this.contract.page&&this.contract.page.isStatic&&"true"===this.contract.page.isStatic.toString().toLowerCase()?(0,a.pW)():e;this.updateRequestId(t)}getEventIndexInternal(){return this.eventIndexInternal}updateRequestId(e,t){this.eventIndexInternal=t||0,this.requestIdInternal=e||(0,a.pW)()}updateAfdMuid(e){this.afdMuidInternal=e||""}updateContract(){this.contract=P.mergeContract(this.contract,this.updatedContract),delete this.updatedContract}addOrUpdateCustomProperty(e,t){this.customProps[e]=t}removeCustomProperty(e){e&&delete this.customProps[e]}addOrUpdateTmplProperty(e,t){this.tmplProps[e]=t}removeTmplProperty(e){delete this.tmplProps[e]}addOrUpdateJoinIdProperty(e,t){this.joinIdProps[e]=t}getJoinId(e){return this.joinIdProps[e]}updatePageConfiguration(e){this.update({page:{config:e}})}get JoinIdProps(){return this.joinIdProps}browserVisibilityCallback(){(document.hidden||"hidden"===document.visibilityState)&&(this.browserHiddenOnce=!0)}IsPvEvent(e){this.isPvEvent=e}generateStringFromKeyValueObject(e){const t=[];return e&&Object.keys(e).forEach((n=>{e[n]?t.push(n+":"+e[n]):t.push(n)})),t.length>0?t.join(";"):void 0}getDwellTimeV2(){if(this.enableDwelltimeV2)return w.getDwellTimeV2()}}var A=n(63165),I=n(3232),E=n(14590);class M{get disable(){return this.config.disable}set disable(e){this.config.disable=e}constructor(e){this.config=e}}var x=n(56921),L=n(13578);class R extends M{constructor(e){super(e),this.transporterReady=!1,setTimeout((()=>{this.collectorChannelPlugin=new I.Z,this.appInsightsCore=new A.Z;const t=new E.Z,n={populateBrowserInfo:!1,populateOperatingSystemInfo:!1,enableApplicationInsightsTrace:!1,enableDistributedTracing:!0,enableApplicationInsightsUser:!1,sessionRenewalMs:18e5,sessionExpirationMs:18e5,userConsentCookieName:"OptanonAlertBoxClosed"},i={instrumentationKey:e.key,channels:[[this.collectorChannelPlugin]],extensionConfig:[t],disablePageUnloadEvents:["visibilitychange"]},r=[];if(a.kP||(i.extensionConfig[this.collectorChannelPlugin.identifier]={httpXHROverride:{sendPOST:(t,n,i)=>{delete t.headers["cache-control"],delete t.headers["content-type"];const r={method:"POST",credentials:"include",body:t.data,headers:t.headers};t.data.length>64e3?this.sendRequest(e,t.urlString,r).then((e=>{n(e.status)})).catch((e=>{n(0,{})})):(this.sendRequest(e,t.urlString,{...r,keepalive:!0}).then((e=>{})).catch((e=>{})),n(200,{}))}}}),e.addNoResponse){const e={addNoResponse:!1};i.extensionConfig[this.collectorChannelPlugin.identifier]=e}if(a.kP&&(i.extensionConfig[t.identifier]=n,r.push(t)),e&&e.anonCookieName&&(i.anonCookieName=e.anonCookieName),null!=e&&e.ignoreClientAnidCookies&&(i.cookieCfg={ignoreCookies:["ANON"]}),e.endpoint&&(i.endpointUrl=e.endpoint),this.appInsightsCore.initialize(i,r),e&&e.enableTraceGenerator)try{x.U.getTraceInstance().setTraceObj(this.appInsightsCore)}catch{}this.transporterReady=!0}),100)}sendRequest(e,t,n){return e.abortableFetch?e.abortableFetch(t,e.timeout??1e3,n,void 0,void 0,void 0,!0):fetch(t,n)}transport(e,t=!0,n=0){!e||(0,L.Z)(e)||this.config.disable||(this.transporterReady&&this.appInsightsCore&&this.appInsightsCore.isInitialized&&this.appInsightsCore.isInitialized()&&this.collectorChannelPlugin&&this.collectorChannelPlugin.isInitialized&&this.collectorChannelPlugin.isInitialized()?this.appInsightsCore.track(e):n<50&&setTimeout((()=>this.transport(e,t,n+1)),200))}}class D extends M{constructor(e){super(e)}transport(e){if(!e||!this.config.endpoint||this.config.disable)return;const t=this.generateUrl(this.config.endpoint+"?",e);this.generatePixelBeacon(t)}generatePixelBeacon(e){(new Image).src=e.replace(/&amp;/gi,"&")}generateUrl(e,t){const n=[];let i=e;return Object.keys(t).forEach((e=>{let i=t[e];"object"==typeof i&&i&&(i=JSON.stringify(i)),n.push(this.encodeURIComponent(e)+"="+this.encodeURIComponent(i))})),i=e+n.join("&").replace(/%20/g,"+"),i}encodeURIComponent(e){return null!=e&&encodeURIComponent(e)||""}}let F=null,O={};class B extends M{constructor(e){super(e),F=e&&e.callbackData?e.callbackData.callback:null,O=e&&e.callbackData?e.callbackData.data:null}transport(e){if(!e||this.config.disable)return;let t;try{t=this.flattenObj(e),t.isCoreView=!0,t.platform="app",O&&(t["browser.muid"]=O)}catch(e){return void window.console.error("Error occured while flatterning telemetry payload :",e)}e.name&&F({type:e.eventType,name:e.name,app_id:"0067acd6d05f4168b92f510d33b9ed74",data:{oneds:t}})}flattenObj(e){const t={},n=(e,i)=>{Object.keys(e).forEach((r=>{let o="";o=""===i?`${r}`:`${i}.${r}`,"object"==typeof e[r]&&e[r]?n(e[r],o):t[this.formatKey(o)]=e[r]}))};return n(e,""),t}formatKey(e){return e?"eventType"===e?"type":e.startsWith("data.")?e.substring(5,e.length):e:e}}var N=n(60844);class _ extends M{constructor(e){super(e)}transport(e){e&&!this.config.disable&&this.config.callback(e)}}var U=n(62433),W=n(67103),H=n(65004),$=n(30676);class q extends W.k{createEvent(e,t,n,i=0){return{name:this.getSuperAppOneDSEventName(y.id[e]),eventType:this.getSuperAppOneDSEventType(y.id[e]),data:t,baseType:y.id.Base,latency:n,sync:i}}createContentViewPayload(e,t,n){if(!t)return;const r=[];e.forEach((e=>{r.push(this.mapTelemetryObject(e))}));let o;(0,a.d5)()&&(o={content:{docHeight:(0,a.d5)()}});let s=null;try{s=JSON.stringify(r)}catch(e){s=r}const c={...t,...o,object:s,contentViewType:n.contentViewType};if(n.contentViewType===i.NS.Scroll&&(c.isMeaningfulScroll=n.isMeaningfulScroll),!(0,L.Z)(r)){return this.createEvent("ContentView",c,H.zU.RealTime)}}reConstructLiteTelemetryPayload(e){const t=this.getSuperAppOneDSEventName(e.name),n=this.getSuperAppOneDSEventType(e.name);return Object.assign(e,{name:t,eventType:n,data:{...e.data,name:t,object:{...e.data.object,ext:e.ext}}}),e}mapTelemetryObject(e){let t;const n=e&&e.content&&e.content.type;(n||e.behavior)&&(t=(0,$.Y)(n,e.behavior));const i={...e};return delete i.action,delete i.behavior,delete i.overrideId,i}getSuperAppOneDSEventType(e){switch(e){case y.id.PageView:return"Microsoft.Windows.MsnApps.PageView";case y.id.UserAction:return"Microsoft.Windows.MsnApps.PageAction";case y.id.AppError:return"Microsoft.Windows.MsnApps.Failure";case y.id.AppPerfTrace:return"Microsoft.Windows.MsnApps.ClientPerf";case y.id.ContentView:return"Microsoft.Windows.MsnApps.ContentView";case y.id.LoadTime:case y.id.Unload:return"Microsoft.Windows.MsnApps.AppLifeCycle";case y.id.VideoPlay:return"Microsoft.Windows.MsnApps.VideoPlay";case y.id.TraceInfo:return"Microsoft.Windows.MsnApps.TraceInfo";default:return null}}getSuperAppOneDSEventName(e){switch(e){case y.id.PageView:return"PAGE_VIEW_HP_WEBVIEW";case y.id.UserAction:return"PAGE_ACTION_HP_WEBVIEW_CLICK";case y.id.AppError:return"HP_WEBVIEW_APP_ERROR";case y.id.AdFeedback:return"PAGE_ACTION_HP_WEBVIEW_AD_FEEDBACK";case y.id.AdImpression:return"HP_WEBVIEW_AD_IMPRESSION";case y.id.AppPerfTrace:return"HP_WEBVIEW_APP_PERF_TRACE";case y.id.Base:return"PAGE_VIEW_HP_WEBVIEW_BASE";case y.id.ContentView:return"CONTENT_VIEW_HP_WEBVIEW";case y.id.Feedback:return"PAGE_ACTION_HP_WEBVIEW_FEEDBACK";case y.id.LoadTime:return"HP_WEBVIEW_LOAD_TIME";case y.id.ServerLog:return"HP_WEBVIEW_SERVER_LOG";case y.id.Unload:return"HP_WEBVIEW_UNLOAD";case y.id.VideoAdPlay:return"CONTENT_VIEW_HP_WEBVIEW_VIDEO_AD";case y.id.VideoPlay:return"CONTENT_VIEW_HP_WEBVIEW_VIDEO";case y.id.TraceInfo:return"DIAGNOSTIC_HP_WEBVIEW_TRACEINFO";default:return e}}}class G{static getTrackingSystem(e,t){switch(e.type){case r.G.OneDS:return{transporter:new R(e.transporterConfig),mapper:new W.k(e.transporterConfig.enableEventsBatching),type:e.type};case r.G.CTag:return{transporter:new D(e.transporterConfig),mapper:new N.P,type:e.type};case r.G.Comscore:return{transporter:new D(e.transporterConfig),mapper:new U.O,type:e.type};case r.G.Debug:case r.G.Automation:return{transporter:new _(e.transporterConfig),mapper:e.mapper,type:e.type};case r.G.SuperApp:return{transporter:new B(e.transporterConfig),mapper:new q,type:e.type};default:return{transporter:new R(e.transporterConfig),mapper:new W.k,type:e.type}}}}class V{constructor(){this.trackingSystems=[]}add(e){this.trackingSystems.push(e)}sendPageViewEvent(e,t=r.G.All){this.trackingSystems.forEach((n=>{if((t===r.G.All||t===n.type)&&n.mapper.createPageViewPayload){const t=n.mapper.createPageViewPayload(e);n.transporter.transport(t)}}))}sendContentViewEvent(e,t,n={contentViewType:i.NS.Partial}){this.trackingSystems.forEach((i=>{if(i.mapper.createContentViewPayload){const r=i.mapper.createContentViewPayload(e,t,n);i.transporter.transport(r)}}))}sendActionEvent(e,t,n,i){this.trackingSystems.forEach((r=>{if(r.mapper.createActionPayload){const o=r.mapper.createActionPayload(e,t,n,i);r.transporter.transport(o)}}))}sendEventPayload(e,t,n){this.trackingSystems.forEach((i=>{if(i.mapper.createEventPayload){const r=i.mapper.createEventPayload(e,t,n);i.transporter.transport(r)}}))}sendSSREventPayload(e){this.trackingSystems.forEach((t=>{if(t.mapper.reConstructLiteTelemetryPayload){const n=t.mapper.reConstructLiteTelemetryPayload(e);t.transporter.transport(n)}}))}sendCustomEvent(e,t,n){this.trackingSystems.forEach((i=>{if(i.mapper.createCustomEventPayload){const r=i.mapper.createCustomEventPayload(e,t,n);i.transporter.transport(r)}}))}disable(e=r.G.All){this.trackingSystems.forEach((t=>{e!==r.G.All&&e!==t.type||(t.transporter.disable=!0)}))}enable(e=r.G.All){this.trackingSystems.forEach((t=>{e!==r.G.All&&e!==t.type||(t.transporter.disable=!1)}))}}a.kP&&function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}();class z{constructor(e){this.internalErrors=[],this.eventQueue=[],this.contentUpdateQueue=new Set,this.partialContentUpdateQueue=new Set,this.contentViewTriggerSource=i.NS.Load,this.contentViewTimeout=1e3,this.contentViewTimer=null,this.contentViewDelay=200,this.scheduledContentViewType=null,this.contentViewTimePassed=0,this.contentViewLastExecution=0,this.contentUpdateDebugQueue=new Set,this.intersectionObserverOptions={root:null,rootMargin:"0px",threshold:0},this.traceIdIndex=-1,this.maxScrollLoadTimeEvents=10,this.contentViewBeaconSent=!1,this.pageViewBeaconSent=!1,this.yieldElementsCount=20,this.batchSendScrollLoadTimeEvent=({scrollInputType:e,scrollDuration:t,endOfFeedTime:n,potentialMissedScrollInput:i,calculateAri:r,scrollInstanceData:o})=>{if(this.scrollLoadTimeEventsBatcher)this.scrollLoadTimeEventsBatcher.defer();else{const e=e=>{let t,n,i,r,a=0;if(e.forEach((e=>{null!=e.eoft&&(t=(t||0)+e.eoft),null!=e.ari&&e.duration&&(n=(n||0)+e.ari*e.duration),e.duration&&(a+=e.duration),e.inputType&&(i||(i={}),i[e.inputType]=(i[e.inputType]||0)+1),!r&&e.potentialMissedScrollInput&&(r=e.potentialMissedScrollInput)})),a<=0||null==t&&null==n)return;const s={scrollDuration:Math.round(a)};i&&(s.scrollInputs=i),r&&(s.potentialMissedScrollInput=r),null!=t&&(s.scrollEoft=Math.round(t/a*1e4)),null!=n&&(s.scrollAri=Math.round(n/a*1e4)),o&&o.length&&(s.scrollInstanceData=[...o],o.length=0),this.sendLoadTimeEvent({markers:s})};this.scrollLoadTimeEventsBatcher=function(e,t){const{autoFlushIntervalInMs:n,maxFlushes:i}={...t};let r,o=[],a=0;const s=()=>{(null==i||a<i)&&(a++,o.length&&(e(o),o=[]))},c=()=>{n&&(r&&clearTimeout(r),r=setTimeout(s,n))};return{enqueue:e=>{o.push(e),c()},flush:s,defer:c}}(e,{maxFlushes:this.maxScrollLoadTimeEvents}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.scrollLoadTimeEventsBatcher.flush()})),window.addEventListener("beforeunload",(()=>this.scrollLoadTimeEventsBatcher.flush())),this.subscribeToAppHidden&&this.subscribeToAppHidden((()=>this.scrollLoadTimeEventsBatcher.flush()))}const a=r&&r();this.scrollLoadTimeEventsBatcher.enqueue({eoft:n,ari:a,duration:t,inputType:e,potentialMissedScrollInput:i})};try{this.config=e,this.config.autoCaptureContentView=void 0===e.autoCaptureContentView||e.autoCaptureContentView,this.config.beacons=e.beacons||{},this.config.beacons.PageOutOfFocus=this.config.beacons.PageOutOfFocus||{},this.config.beacons.PageOutOfFocus.disable=void 0===this.config.beacons.PageOutOfFocus.disable||this.config.beacons.PageOutOfFocus.disable,a.kP&&(this.config.disableLayoutEventManager||(this.layoutEventManager=new b,this.layoutEventManager.observe(document.documentElement)),this.clickEventManager=new C,e.hydrationPromise&&e.hydrationPromise instanceof Promise?this.config.hydrationPromise.then((()=>{this.clickEventManager.observe(window,this.config.disableContextMenu)})):this.clickEventManager.observe(window,this.config.disableContextMenu),window.addEventListener("beforeunload",this.unloadEventCallback.bind(this)),window.addEventListener("telemetrynodeadded",(e=>{e&&e.detail&&e.detail.element&&this.viewportIntersectionObserver&&(S.u.addElement(e.detail.element),this.viewportIntersectionObserver.observe(e.detail.element))})),window.addEventListener("telemetrynodremoved",(e=>{e&&e.detail&&e.detail.element&&this.viewportIntersectionObserver&&this.viewportIntersectionObserver.unobserve(e.detail.element)})),window.addEventListener("telemetryclick",this.clickEventHandler.bind(this)),window.addEventListener("focus",this.onFocusCallback.bind(this)),window.addEventListener("blur",this.onBlurCallback.bind(this))),this.trackingSystemList=new V,"boolean"!=typeof e.enableEventsBatching&&(e.enableEventsBatching||(e.enableEventsBatching=[]),e.enableEventsBatching.push("ClientLog")),e.clientLogMaxCount=e.clientLogMaxCount||10,e.trackingSystems.forEach((t=>{t.transporterConfig.abortableFetch=e.abortableFetch,t.transporterConfig.anonCookieName=e.anonCookieName,t.transporterConfig.addNoResponse=e.addNoResponse,t.transporterConfig.ignoreClientAnidCookies=e.ignoreClientAnidCookies,t.transporterConfig.enableTraceGenerator=e.enableTraceGenerator,t.transporterConfig.enableEventsBatching=e.enableEventsBatching,t.transporterConfig.timeout=e.timeout,this.trackingSystemList.add(G.getTrackingSystem(t))}))}catch(e){this.internalErrors.push({message:"Error in Telemetry Lib constructor.",error:e})}}getTrackingSystemList(){return this.trackingSystemList}setContentViewTimeout(e){this.contentViewTimeout=e}resetContentViewTimeout(){this.contentViewTimeout=y.S8}renderTelemetryAttribute(e,t,n){return new T.D(e).render(t)}observeSingleElement(e){}observeElementTree(e){}observeShadowRoot(e){var t;null===(t=this.layoutEventManager)||void 0===t||t.observe(e)}initPage(e,t,i,r,o){this.pageMetadata=new P(e,t,this.config.anonCookieName,i,this.config.overrideScrollOffset,this.config.viewTypeCallback,r,this.config.enableDwelltimeV2,o),a.kP&&("IntersectionObserver"in n.g&&(this.viewportIntersectionObserver=new IntersectionObserver(this.contentVisibilityCallback.bind(this),this.intersectionObserverOptions),this.contentVisibilityCallbackPromise=(0,a.xI)()),this.runContentVisibilityCallbacksPromise=this.config.deferContentViewIntersectionCallbacks?(0,a.xI)():(0,a.xI)(!0),this.viewportEventManager=new s(((e,t,n)=>{this.config.autoCaptureContentView&&(this.autoSendContentViewEvent({contentViewType:e,isMeaningfulScroll:t}),n&&(null!=n.endOfFeedTime||n.calculateAri)&&this.batchSendScrollLoadTimeEvent(n))}),this.config.overrideScrollOffset),window.addEventListener("telemetryviewportupdated",(e=>{e&&e.detail&&e.detail.mech&&(this.contentViewTriggerSource=e.detail.mech)})),this.viewportEventManager.initListener())}sendPageView(e=null,t=!1,n=null,o=r.G.All,s=!1){this.queueEvent("PageView",(()=>{this.config.beacons&&this.config.beacons.PageView&&this.config.beacons.PageView.disable||!this.pageMetadata||(this.config.resetAppErrorCounterOnPageView&&p(),e=e||{},(0,a.lB)(e),this.contentLoaded=!1,this.config.disableAutoCalculateDwellTime||w.reset(),this.pageMetadata.update(e),n?this.pageMetadata.updateActivityId(n):t||this.updateRequestId(),this.pageMetadata.updateContract(),this.viewportEventManager.resetViewportOffset(),this.updatePageMetadata({page:{isMonetized:!1}},!0),this.pageMetadata.IsPvEvent(!0),this.trackingSystemList.sendPageViewEvent(this.pageMetadata.combinedContract,o),this.pageMetadata.IsPvEvent(!1),this.pageViewBeaconSent=!0,!s||o!==r.G.All&&o!==r.G.Comscore||fetch(y.EE),t||(this.contentViewTriggerSource=i.NS.Load,setTimeout((()=>{this.autoSendContentViewEvent({contentViewType:i.NS.Load})}),1e3)),this.dispatchEvent(i.tM,{requestId:this.pageMetadata.requestId}))}))}getRequestId(){return this.pageMetadata.requestId}getCurrentEventIndex(){return this.pageMetadata.getEventIndexInternal()}updateRequestId(e,t){this.pageMetadata.updateRequestId(e,t)}disableTrackingSystem(e=r.G.All){this.trackingSystemList.disable(e)}enableTrackingSystem(e=r.G.All){this.trackingSystemList.enable(e)}disableBeacon(e){this.config.beacons[e]||(this.config.beacons[e]={}),this.config.beacons[e].disable=!0}enableBeacon(e){this.config.beacons[e]||(this.config.beacons[e]={}),this.config.beacons[e].disable=!1}disableAutoUnloadCallback(){this.ignoreAutoUnloadCallback=!0}enableAutoUnloadCallback(){this.ignoreAutoUnloadCallback=!1}updatePageConfiguration(...e){let t;e.forEach((e=>{t|=e})),this.pageMetadata.updatePageConfiguration(t)}updatePageMetadata(e,t=!1){e&&this.pageMetadata.update(e,t)}addOrUpdateCustomProperty(e,t){this.pageMetadata.addOrUpdateCustomProperty(e,t)}removeCustomProperty(e){this.pageMetadata.removeCustomProperty(e)}addOrUpdateJoinIdProperty(e,t){this.pageMetadata.addOrUpdateJoinIdProperty(e,t)}addOrUpdateTmplProperty(e,t){this.pageMetadata.addOrUpdateTmplProperty(e,t)}removeTmplProperty(e){this.pageMetadata.removeTmplProperty(e)}addOrUpdateTmplString(e){if(!e)return;const t=e.split(";");for(let e=0;e<t.length;e++){const n=t[e].split(":");2===n.length?this.addOrUpdateTmplProperty(n[0],n[1]):1===n.length&&this.addOrUpdateTmplProperty(n[0])}}removeTmplString(e){if(!e)return;const t=e.split(";");for(let e=0;e<t.length;e++){const n=t[e].split(":");n&&n.length&&this.pageMetadata.removeTmplProperty(n[0])}}addOrUpdateIdxId(e,t){if(e){t&&(delete this.pageMetadata.JoinIdProps[i.ob],this.traceIdIndex=-1);const n=this.pageMetadata.getJoinId(i.ob),r=n?`${n},${e}`:e;return this.pageMetadata.addOrUpdateJoinIdProperty(i.ob,r),this.traceIdIndex+=1,this.traceIdIndex}}sendActionEvent(e,t,n,r,s){this.queueEvent("UserAction",(()=>{if(!(this.config.beacons&&this.config.beacons.UserAction&&this.config.beacons.UserAction.disable)&&this.pageMetadata&&e){const c=e;S.u.updateLayout();const d=this.clickEventManager.getTelemetryClickTarget(e);let l;d&&(e=d),l=e.getAttribute&&e.getAttribute(i.qP),e.parentElement&&!l&&(l=(e=e.parentElement).getAttribute&&e.getAttribute(i.qP));let u=S.u.get(e);if(!u){const e=S.u.parseAttribute(l);e&&(u=new S.u(e))}if(this.pageMetadata&&u){s&&((0,a.Vr)(c,this.pageMetadata.contract.page.ocid),(0,a.Zf)(c,this.pageMetadata.contract.page.partnerTrackingCode),(0,a.uK)(c,this.pageMetadata.requestId),(0,a.wC)(c,this.pageMetadata.getEventIndexInternal()+1)),this.config.destinationUrlHash&&(0,a.t_)(c,this.config.destinationUrlHash);const i=e.getAttribute("action")||e.form&&e.form.getAttribute("action"),d=t||u.contract.action,l=void 0===n?u.contract.behavior:n;let p=u.contract.overrideDestinationUrl||(0,a.jv)(r)&&r||e.getAttribute("href")||i;if(this.config.customProtocolOverride&&((0,a.zo)(c,this.config.customProtocolOverride,p),e.hasAttribute("originalhref")&&(p=e.getAttribute("originalhref"))),p&&!p.startsWith("mailto:")?!0===u.contract.overrideEmailIdScrubbing||(0,a.uj)(p)?u.contract.destinationUrl=p:(u.contract.destinationUrl="",this.sendAppErrorEvent({id:54301,severity:0,message:"Email found in the destination url",pb:u.combinedContract})):u.contract.destinationUrl="",d===o.Aw.RightClick&&l===o.wu.ContextMenu&&!(u&&u.contract&&u.contract.destinationUrl))return;this.trackingSystemList.sendActionEvent(u.combinedContract,this.pageMetadata.combinedContract,null==d?o.Aw.Click:d,null==l?o.wu.Navigate:l),u.contract&&u.contract.triggerPageView&&l===o.wu.Navigate&&this.sendPageView(null,!1)}}}))}scheduleContentViewEvent(e=i.NS.Partial,t){if(!a.kP)return;const n=(new Date).getTime();this.contentViewTimePassed=n-this.contentViewLastExecution,this.contentViewTimePassed<=this.contentViewDelay&&e!==i.NS.Partial||(this.contentViewLastExecution=n,this.contentViewTimer&&this.scheduledContentViewType===e&&window.clearTimeout(this.contentViewTimer),this.contentViewTimer=window.setTimeout((()=>this.autoSendContentViewEvent({contentViewType:e})),t||this.contentViewTimeout),this.scheduledContentViewType=e)}sendContentViewEvent(e,t=i.NS.Partial,n=!0){this.queueEvent("ContentView",(()=>{if(this.config.beacons&&this.config.beacons.ContentView&&this.config.beacons.ContentView.disable||!this.pageMetadata)return;S.u.updateLayout();const i=(0,a.Ux)(e),r=[];if(i&&i.length>0){for(let e=0;e<i.length;e++){const t=i[e],o=S.u.get(t);o&&(!n||this.contentUpdateQueue.has(t)||this.partialContentUpdateQueue.has(t))&&(this.setIsMonetizedFlag(o.combinedContract),r.push(o.combinedContract))}this.trackingSystemList.sendContentViewEvent(r,this.pageMetadata.combinedContract,{contentViewType:t})}this.contentLoaded||(this.contentLoaded=!0,this.pageMetadata.addOrUpdateTmplProperty("dwellTimeContentLoaded","true"),this.startAutoDwellTime())}))}sendAppErrorEvent(e,t=!0){if(!this.config.ignoreAppErrorCounter&&function(e){if(!e||!e.id)return!0;u.has(e.id)||u.set(e.id,0);const t=u.get(e.id)+1;return u.set(e.id,t),3===e.severity&&t>25||3!==e.severity&&t>10}(e))return console.error(JSON.stringify(e)),void console.error(`App errors throttled for Id: ${e.id}`);if(!function(e){const{pb:t,severity:n=1}=e;return 3===n||(!(t&&t.shouldSupressWarnings)||1!==n)}(e))return console.error(JSON.stringify(e)),void console.error(`This App error Id: ${e.id} will not be sent!`);if(!function(e){if(!e)return!1;const{pb:t,severity:n=1}=e;if(t&&t.shouldSampleErrorsForTreatement1)switch(n){case 0:return h(10);case 1:return h(1);default:return!0}if(t&&t.shouldSampleErrorsForTreatement2)switch(n){case 0:return h(10);case 1:return h(1);case 2:return h(50);default:return!0}return!0}(e)&&!this.config.shouldNotSampleErrors)return console.error(JSON.stringify(e)),void console.error(`This App error Id: ${e.id} will not be sent due to app error sampling!`);if(!(this.config.beacons&&this.config.beacons.AppError&&this.config.beacons.AppError.disable)&&this.pageMetadata)if(function(e){const{pb:t,severity:n=1}=e;return 3!==n&&!(!t||!t.shouldDelayUntilLoadTime)}(e)){const n={...e,pb:{...e.pb,delayed:1}};l.then((()=>{this.queueAppErrorEvent(n,t)}))}else this.queueAppErrorEvent(e,t)}sendLoadTimeEvent(e){const t=this.config.enableCustomDiagnostic?"LoadTimeDiag":"LoadTime";this.sendEvent(t,e),d(),g()}sendFeedbackEvent(e){this.sendEvent("Feedback",e)}sendAdImpressionEvent(e){this.sendEvent("AdImpression",e)}sendAdFeedbackEvent(e){this.sendEvent("AdFeedback",e)}sendVideoPlayEvent(e,t,n=!1){if(this.config.beacons&&this.config.beacons.VideoPlay&&this.config.beacons.VideoPlay.disable)return;const i=n?"VideoAdPlay":"VideoPlay";t&&S.u.updateLayout();const r=t?S.u.get(t):void 0,o=r?r.combinedContract:{};if(e){const t={...o,...e};this.trackingSystemList.sendEventPayload(i,{object:t},this.pageMetadata.combinedContract)}else t&&this.pageMetadata&&r&&this.trackingSystemList.sendEventPayload(i,{object:o},this.pageMetadata.combinedContract)}sendGamePlayEvent(e,t){if(!(this.config.beacons&&this.config.beacons.GamePlay&&this.config.beacons.GamePlay.disable))if(e)this.trackingSystemList.sendEventPayload("GamePlay",{object:e},this.pageMetadata.combinedContract);else if(t){S.u.updateLayout();const e=S.u.get(t);this.pageMetadata&&e&&this.trackingSystemList.sendEventPayload("GamePlay",{object:e.combinedContract},this.pageMetadata.combinedContract)}}sendAudioPlayEvent(e,t){if(!(this.config.beacons&&this.config.beacons.AudioPlay&&this.config.beacons.AudioPlay.disable))if(e)this.trackingSystemList.sendEventPayload("AudioPlay",{object:e},this.pageMetadata.combinedContract);else if(t){S.u.updateLayout();const e=S.u.get(t);this.pageMetadata&&e&&this.trackingSystemList.sendEventPayload("AudioPlay",{object:e.combinedContract},this.pageMetadata.combinedContract)}}sendServerLogEvent(e){this.sendEvent("ServerLog",e)}sendAppPerfTraceEvent(e){this.sendEvent("AppPerfTrace",e)}sendAuthEvent(e){this.sendEvent("Auth",e)}sendHeartBeatEvent(e){this.sendEvent("HeartBeat",e)}sendClientLogEvent(e){if(this.config.enableSendClientLogEvent){var t;if(null===(t=this.pageMetadata)||void 0===t||null===(t=t.contract)||void 0===t||null===(t=t.featureFlags)||void 0===t||!t.throttleClientLogs)return void this.sendEvent("ClientLog",e);if(!a.kP)return void this.sendEvent("ClientLog",e);n=this.config.clientLogMaxCount,f++,f>n||m.then((()=>{this.sendEvent("ClientLog",e)}))}var n}sendPageOutOfFocusEvent(e){this.queueEvent("PageOutOfFocus",(()=>{this.config.beacons&&this.config.beacons.PageOutOfFocus&&this.config.beacons.PageOutOfFocus.disable||!this.pageMetadata||this.trackingSystemList.sendEventPayload("PageOutOfFocus",null,this.pageMetadata.combinedContract)}))}sendUnloadEvent(){this.queueEvent("Unload",(()=>{this.config.beacons&&this.config.beacons.Unload&&this.config.beacons.Unload.disable||!this.pageMetadata||this.trackingSystemList.sendEventPayload("Unload",null,this.pageMetadata.combinedContract)}))}sendTraceInfoEvent(e){this.queueEvent("TraceInfo",(()=>{this.config.beacons&&this.config.beacons.TraceInfo&&this.config.beacons.TraceInfo.disable||!this.pageMetadata||this.sendEvent("TraceInfo",e)}))}getPageMetadata(){return this.pageMetadata}flush(e=!0,t,n){const i=e=>!(t&&t!==e.eventType||n&&n===e.eventType);for(const e of this.eventQueue)"function"==typeof e.callback&&i(e)&&e.callback();this.eventQueue=this.eventQueue.filter((e=>!i(e))),this.config.useEventQueue=!e}empty(){this.eventQueue=[]}enableEventQueue(){this.config.useEventQueue=!0}disableEventQueue(){this.config.useEventQueue=!1}addEventTypeToForceQueueList(e){this.config.forceUseEventQueueList||(this.config.forceUseEventQueueList=[]),this.config.forceUseEventQueueList.push(e)}removeEventTypeFromForceQueueList(e){this.config.forceUseEventQueueList&&(this.config.forceUseEventQueueList=this.config.forceUseEventQueueList.filter((t=>t!==e)))}startDwellTime(){w.start()}pauseDwellTime(){w.pause()}pauseDwellTimeV2(){w.pauseV2()}resetDwellTime(){w.reset()}isDwellTimeActive(){return w.getIsActive()}setDwellTime(e,t){w.setDwellTime(e,t)}setDwellTimeV2(e,t){w.setDwellTimeV2(e,t)}getDwellTime(){return w.getDwellTime()}clickEventHandler(e){if(e&&e.detail&&e.detail.element&&this.pageMetadata){const t=e.detail.element;this.sendActionEvent(t,e.detail.action,e.detail.behavior,void 0,!0),t.attributes&&t.attributes.href&&t.attributes.href.value&&t.attributes.href.value.startsWith&&"function"==typeof t.attributes.href.value.startsWith&&t.attributes.href.value.startsWith("mailto:")&&(this.ignoreUnload=!0)}}queueAppErrorEvent(e,t=!0){var n,r;let o="AppError";!this.config.enableCustomDiagnostic||null!==(n=(r=this.config).shouldAppErrorEscapeCustomDiagnostic)&&void 0!==n&&n.call(r,e)||(o="AppErrorDiag"),this.queueEvent(o,(()=>{if(this.trackingSystemList.sendCustomEvent(o,e,this.pageMetadata.combinedContract),t){const t=new Date+": "+ +new Date+" "+JSON.stringify(e);console.error(t)}this.dispatchEvent(i.tW,{error:e})}))}unloadEventCallback(){this.ignoreAutoUnloadCallback||this.config.beacons&&this.config.beacons.Unload&&this.config.beacons.Unload.disable||(this.pageMetadata&&!this.ignoreUnload&&this.sendUnloadEvent(),this.ignoreUnload=!1)}setIsMonetizedFlag(e){e&&e.isMonetized&&this.updatePageMetadata({page:{isMonetized:!0}},!0)}autoSendContentViewEvent(e){this.queueEvent("ContentView",(()=>{if(this.pageMetadata){let t;if(S.u.updateLayout(),e.contentViewType!==i.NS.Partial&&this.contentUpdateQueue&&this.contentUpdateQueue.size>0?t=this.contentUpdateQueue:this.partialContentUpdateQueue&&this.partialContentUpdateQueue.size>0&&(t=this.partialContentUpdateQueue),t){const n=[...t].map((t=>{const n=S.u.get(t);if(n&&(e.contentViewType!==i.NS.Partial||!n.isCaptured))return n.isCaptured=!0,this.setIsMonetizedFlag(n.combinedContract),n.combinedContract})).filter((e=>e));this.trackingSystemList.sendContentViewEvent(n,this.pageMetadata.combinedContract,e),this.contentViewBeaconSent=!0,this.partialContentUpdateQueue.clear(),this.contentViewTriggerSource=null}this.contentLoaded||(this.contentLoaded=!0,this.pageMetadata.addOrUpdateTmplProperty("dwellTimeContentLoaded","true"),this.startAutoDwellTime())}}))}runContentVisibilityCallbacks(){var e;null===(e=this.runContentVisibilityCallbacksPromise)||void 0===e||e.resolve()}yieldAsync(){return new Promise((e=>setTimeout(e,0)))}contentVisibilityCallback(e){var t;const n=async t=>{for(let i=0;i<e.length;i++){t&&i>0&&i%this.yieldElementsCount==0&&await this.yieldAsync();const a=e[i];var n,r,o;if(a.isIntersecting)this.contentUpdateQueue.add(a.target),this.contentViewTriggerSource||this.config.enableNoPartialContentView&&!((null===(n=S.u.get(a.target))||void 0===n||null===(r=(o=n).getShouldTrackPartialContentUpdate)||void 0===r?void 0:r.call(o))??1)||this.partialContentUpdateQueue.add(a.target);else this.contentUpdateQueue.delete(a.target),this.partialContentUpdateQueue.delete(a.target);0}!this.contentViewTriggerSource&&this.config.autoCaptureContentView&&this.scheduleContentViewEvent(i.NS.Partial,500),this.contentUpdateQueue.size&&this.contentVisibilityCallbackPromise&&this.contentVisibilityCallbackPromise.resolve()};this.config.deferContentViewIntersectionCallbacks&&null!==(t=this.runContentVisibilityCallbacksPromise)&&void 0!==t&&t.promise?this.runContentVisibilityCallbacksPromise.promise.then((()=>n(!0))):n()}sendEvent(e,t){this.queueEvent(e,(()=>{this.config.beacons&&this.config.beacons[e]&&this.config.beacons[e].disable||!this.pageMetadata||this.trackingSystemList.sendCustomEvent(e,t,this.pageMetadata.combinedContract)}))}queueEvent(e,t){this.config.eventTypeAllowList&&!this.config.eventTypeAllowList.includes(e)||(this.config.useEventQueue||this.config.forceUseEventQueueList&&this.config.forceUseEventQueueList.includes(e)?this.eventQueue.push({eventType:e,callback:t}):t())}dispatchEvent(e,t){a.kP&&setTimeout((()=>dispatchEvent(new CustomEvent(e,{detail:t}))),0)}startAutoDwellTime(){(document.hasFocus()||this.config.startDwellOnPageVisible&&"visible"===document.visibilityState)&&!this.config.disableAutoCalculateDwellTime&&(document.hasFocus()||this.pageMetadata.addOrUpdateTmplProperty("dwellTimeStartedWithoutFocus","true"),w.start(),this.pageMetadata.addOrUpdateTmplProperty("dwellTimeStart","true"))}onFocusCallback(){this.contentLoaded&&!this.config.disableAutoCalculateDwellTime&&(w.start(),this.pageMetadata.addOrUpdateTmplProperty("dwellTimeFocusStart","true"))}waitForContentVisibilityObserverInit(){return this.contentVisibilityCallbackPromise?this.contentVisibilityCallbackPromise.promise:Promise.resolve()}onBlurCallback(){this.sendPageOutOfFocusEvent({}),this.config.disableAutoCalculateDwellTime||(w.pause(),this.pageMetadata.addOrUpdateTmplProperty("dwellTimePause","true"))}isEventInQueue(e){return this.eventQueue.some((t=>t.eventType===e))}getQueuedEventCount(){return this.eventQueue.length}isContentViewBeaconSent(){return this.contentViewBeaconSent}isPageViewBeaconSent(){return this.pageViewBeaconSent}initScrollPerformanceTrackers(e){if(!this.viewportEventManager)return;null!=e&&e.scrollContainer&&this.viewportEventManager.initListener(null==e?void 0:e.scrollContainer),this.subscribeToAppHidden=null==e?void 0:e.subscribeToAppHidden;n.e("scrollPerfMetricTrackers").then(n.bind(n,60281)).then((({createEndOfFeedTimeTracker:t,createAppResponsivenessTracker:n,createScrollInputTracker:i})=>{const r=t({scrollContainer:null==e?void 0:e.scrollContainer,scrollEventName:null==e?void 0:e.scrollEventName}),o=n(),a=(null==e?void 0:e.enableScrollInputTracking)&&i&&i(null==e?void 0:e.enableMissedScrollTracking,null==e?void 0:e.enableSectionScrollTracking,e.scrollContainer);this.viewportEventManager.initScrollPerformanceTrackers({endOfFeedTimeTracker:r,appResponsivenessTracker:o,scrollInputTracker:a})}))}}},78951:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var i=n(70280),r=n(87552);class o{constructor(e,t,n){this.contract=e}static render(e){const t=r.v.compress(e);return{[i.qP]:JSON.stringify(t)}}addChild(e){return new o(e,this)}addOrUpdateChild(e,t){return t?(t.contract=e,t):new o(e,this)}updateContract(e){this.contract=e}render(e){return o.render(this.contract)}getMetadataTag(){return JSON.stringify(this.getMetadata())}getMetadata(){return r.v.compress(this.contract)}}},56921:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var i,r=n(39860),o=n(23549);class a{constructor(){this.getSpanId=(e=!1)=>{if(a.traceCtrxObj&&!e)return a.traceCtrxObj.getSpanId();const t=(0,r.DO)().substring(0,16);return(0,o.dK)().then((()=>{a.setSpanIdFunc(t)}),(()=>{})),t},this.getTraceId=(e=!1)=>{if(a.traceCtrxObj&&!e)return a.traceCtrxObj.getTraceId();const t=(0,r.DO)();return(0,o.dK)().then((()=>{a.setTraceIdFunc(t)}),(()=>{})),t}}setTraceObj(e){a.traceCtrxObj=e&&e.getTraceCtx()}}(i=a).getTraceInstance=()=>(i.traceInstance||(i.traceInstance=new i),i.traceInstance),i.setSpanIdFunc=e=>{const t=e||(0,r.DO)().substring(0,16);try{i.traceCtrxObj.setSpanId(t)}catch(e){}},i.setTraceIdFunc=e=>{const t=e||(0,r.DO)();try{i.traceCtrxObj.setTraceId(t)}catch(e){}}},45555:function(e,t,n){"use strict";n.d(t,{EE:function(){return i},S8:function(){return o},id:function(){return r}});const i="https://www.msn.com/PV.xml",r={UserAction:"MS.News.Web.PageAction",PageView:"MS.News.Web.PageView",ContentView:"MS.News.Web.ContentView",AppError:"MS.News.Web.AppError",AppErrorDiag:"MS.News.Web.AppErrorDiag",LoadTime:"MS.News.Web.LoadTime",LoadTimeDiag:"MS.News.Web.LoadTimeDiag",Unload:"MS.News.Web.Unload",Base:"MS.News.Web.Base",Feedback:"MS.News.Web.Feedback",AdImpression:"MS.News.Web.AdImpression",AdFeedback:"MS.News.Web.AdFeedback",GamePlay:"MS.News.Web.GamePlay",VideoPlay:"MS.News.Web.VideoPlay",VideoAdPlay:"MS.News.Web.VideoAdPlay",AudioPlay:"MS.News.Web.AudioPlay",ServerLog:"MS.News.Web.ServerLog",AppPerfTrace:"MS.News.Web.AppPerfTrace",Auth:"MS.News.Web.Auth",HeartBeat:"MS.News.Web.HeartBeat",ClientLog:"MS.News.Web.ClientLog",PageOutOfFocus:"MS.News.Web.PageOutOfFocus",TraceInfo:"MS.News.Web.TraceInfo"},o=1e3},72626:function(e,t,n){"use strict";n.d(t,{F$:function(){return W},FL:function(){return v},He:function(){return B},Mm:function(){return q},P6:function(){return g},Ux:function(){return F},Vr:function(){return w},XW:function(){return C},Xn:function(){return p},Zf:function(){return b},d5:function(){return f},i2:function(){return y},jT:function(){return N},jv:function(){return _},kP:function(){return S},lB:function(){return V},pE:function(){return R},pW:function(){return u},qC:function(){return m},t0:function(){return U},tH:function(){return E},tV:function(){return $},t_:function(){return P},uK:function(){return T},uV:function(){return H},uj:function(){return G},wC:function(){return k},wi:function(){return h},xI:function(){return z},zo:function(){return A}});let i,r,o,a,s,c,d=(new Date).getTime();try{s="sessionStorage"in window&&window.sessionStorage}catch(e){}try{navigator&&navigator.userAgentData&&"Windows"===navigator.userAgentData.platform&&navigator.userAgentData.getHighEntropyValues&&navigator.userAgentData.getHighEntropyValues(["platformVersion"])&&navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then((e=>{c=e.platformVersion}))}catch(e){}function l(e){const t=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"===e?t:7&t|8).toString(16)}function u(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,l)}function p(){return Date.now()}function h(){return S&&(window.outerWidth||document.documentElement.clientWidth)}function g(e){return e?e.scrollHeight:S&&(window.outerHeight||document.documentElement.clientHeight)}function m(e){if(e)return e.scrollTop||0;return S&&(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop)||0}function f(){return S&&Math.max(document.body.scrollHeight||0,document.documentElement.scrollHeight||0,document.body.offsetHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0,document.documentElement.clientHeight||0)}function v(){const e="undefined"!=typeof document&&document.cookie;if(!S&&!e)return"";const t=new RegExp("\\bMUID\\s*=\\s*([^;]*)","i").exec(e);return t&&t.length>1?t[1]:""}function y(e){return S?(i||""===i||(i=v()||e||""),i):v()}const S=!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv);function C(e,t){return function(e,t){if(t&&e){const n=t.toLowerCase();if(-1==n.indexOf("?ocid=")&&-1==n.indexOf("&ocid=")){const n=-1==t.indexOf("?")?"?":"&";t=`${t}${n}ocid=${encodeURIComponent(e)}`}}return t}(t,e)}function w(e,t){I(e,"ocid",t)}function b(e,t){let n=t;try{const e=new URL(location.href);n=e.searchParams.get("pc")||e.searchParams.get("PC")||e.searchParams.get("pC")||e.searchParams.get("Pc")||n}catch{}I(e,"pc",n||t)}function T(e,t){I(e,"cvid",t,!0)}function k(e,t){I(e,"ei",t.toString(),!0)}function P(e,t){I(e,t,void 0,!1,!0)}function A(e,t,n){try{if(!e||!t||!e.href)return;const i=new URL(e.href);if("mailto:"==i.protocol||"microsoft-edge:"==i.protocol||i.searchParams.has("sc"))return;n&&e.setAttribute("originalhref",n),i.href=`${t}&url=${encodeURIComponent(i.href)}`;const r=Date.now().toString();i.searchParams.has("timestamp")&&i.searchParams.set("timestamp",r),i.searchParams.has("qpc")&&i.searchParams.set("qpc",r),e.href=i.href}catch(e){}}function I(e,t,n,i=!1,r=!1){if(!e||!t)return;let o=e;if("a"!==o.nodeName&&o.closest("a")&&(o=o.closest("a")),!o)return;const{href:a}=o;if(a)try{const e=new URL(a);if(r)return e.hash?-1===e.hash.indexOf(t)&&(e.hash+=`&${t}`):e.hash=t,void(o.href=e.href);(!e.searchParams.get(t)||i)&&n&&(e.host.includes("msn.com")||e.host.includes("msn.cn")||e.host.includes("bing.com"))&&(e.searchParams.set(t,n),o.href=e.href)}catch{}}function E(e,t=""){if(!e)return;const n=e.getAttribute("data-hl")||"";if(!t&&!n){const n=e.querySelector("h4")||e.querySelector("h3"),i=function(e,t,n=2){if(!t)return;let i=t,r=0;for(;i&&i!==e;i=i.parentElement,r++)if(r>n)return;return r}(e,n);n&&i&&i<=2&&(t=x(n))}const i=e instanceof HTMLAnchorElement?e.querySelector(".title"):"";!t&&i&&(t=x(i));const r=e instanceof HTMLAnchorElement?e.getAttribute("title"):"";!t&&r&&(t=r);const o=e instanceof HTMLAnchorElement?e.getAttribute("aria-lable"):"";return!t&&o&&(t=o),"string"!=typeof t&&(t=n||e.getAttribute("data-piitxt")||("FORM"==e.nodeName?"[form submit]":e.getAttribute("title")||L(e,"title","img")||x(e)||e.getAttribute("alt")||L(e,"alt")||"")),null!=t.trim&&(t=t.trim()),t}const M=/(^\s+)|(\s+$)/gm;function x(e){return(e&&(e.textContent||e.innerText)||"").replace(M,"")}function L(e,t,n=""){const i=e.children||[];let r,o=0;for(t=t||"alt";o<i.length;o++)if(r=i[o].getAttribute(t)||L(i[o],t,n),r&&n!=i[o].localName)return r}function R(e,t){if(!e||e===document||e===window)return null;const n=e.closest(t);if(n)return n;const i=D(e);return i&&i.host?R(i.host,t):void 0}function D(e){return e.parentNode?D(e.parentNode):e}function F(e){const t=[];if(!e)return;let n;return n=B(e)?e.shadowRoot.querySelectorAll("*"):e.querySelectorAll("*"),O(Array.from(n),t),t}function O(e,t=[]){for(let n=0;n<e.length;n++){const i=e[n];N(i)&&t.push(i),B(i)&&O(Array.from(i.shadowRoot.querySelectorAll("*")),t)}}function B(e){return!!e.shadowRoot}function N(e){return e.hasAttribute&&e.hasAttribute("data-t")}function _(e){try{new URL(e)}catch(e){return!1}return!0}function U(e,t){const n=new CustomEvent(e,{detail:{element:t}});dispatchEvent(n)}function W(){let e=!1;if(S)try{if(c&&parseInt(c.split(".")[0])>=11&&(e=!0),!e&&window&&window.external&&window.external.getHostEnvironmentValue("os-build")){const t=JSON.parse(window.external.getHostEnvironmentValue("os-build"))["os-build"].split(".");(t[0]>10||10===t[0]&&t[1]>0||t[2]>=22e3)&&(e=!0)}}catch(e){}return o=!0===e||null,o}function H(){let e=!1;const t="os-sku";if(S)try{if(window&&window.external&&window.external.getHostEnvironmentValue(t)){const n=JSON.parse(window.external.getHostEnvironmentValue(t));e=n&&"192"===n[t]}}catch(e){}return a=!0===e||null,a}function $(e){if(!r&&""!==r&&S)try{if(!e||0===e.length)return;const t=document.cookie;if(t){let n="";e.forEach((e=>{const i=new RegExp("\\b"+e+"\\s*=\\s*([^;]*)","i").exec(t),r=i&&i.length>1?i[1]:"";""!==r&&(n+=e+"="+r+";")})),r=n}}catch(e){}return r}function q(e,t){if(!e||""===e)return"";let n=!1,i=null;if(S)try{if(i=new URL(e),!t||0===t.length)return;t.forEach((e=>{i.searchParams.has(e)&&(n=!0),i.searchParams.delete(e)}))}catch(t){return e}return n?i.toString():e}function G(e){if(!e||""===e)return"";let t=null,n=!1;if(S)try{t=new URL(e);const i=new RegExp(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/gi);t.searchParams.forEach((function(e,t){e.match(i)&&(n=!0)}))}catch(e){}return n?"":e}function V(e){const t="sign-in-refreshed-page";S&&s&&s.getItem(t)?(s.removeItem(t),(e.page=e.page||{}).isAutoRefresh=!0):function(e){return!e||!e.page||!0!==e.page.isAutoRefresh&&!1!==e.page.isAutoRefresh}(e)&&((e.page=e.page||{}).isAutoRefresh=!1)}function z(e=!1){let t;const n=new Promise((e=>{t=e}));return e&&t(),{promise:n,resolve:t}}},30676:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var i=n(82898);function r(e,t){const n=function(e){switch(e){case i.uH.AppStore:return 17;case i.uH.StructuredData:return 16;case i.uH.CmsPromotions:return 19;case i.uH.MicrosoftWebStore:return 20;case i.uH.XboxStore:return 21;case i.uH.OfficeStore:return 22;case i.uH.PartnerLinks:return 24;case i.uH.SponsoredContent:return 25;default:return 0}}(e)||function(e){switch(e){case i.wu.Navigate:return 14;case i.wu.Follow:return 26;case i.wu.Unfollow:return 27;case i.wu.More:return 28;case i.wu.Close:return 36;case i.wu.Share:return 37;case i.wu.Like:return 38;case i.wu.Dislike:return 39;case i.wu.Unlike:return 40;case i.wu.Undislike:return 41;case i.wu.Mute:return 42;case i.wu.Unmute:return 43;case i.wu.Cancel:return 44;case i.wu.Manage:return 45;default:return 0}}(t);if(0!==n)return n;if(e===i.uH.App){if(t===i.wu.Install)return 23;if(t===i.wu.Launch)return 18}return 0}},39100:function(e,t,n){"use strict";n.d(t,{D:function(){return m}});var i=n(23549),r=n(48204),o=n(23357),a=n(54297),s=n(78324),c=n(81949),d=n(85205),l=n(76166),u=n(96531);const p="tp";var h=n(31558),g=n(36560);class m extends l.e{constructor(e,t,n,r,o,a,l){super(e,t,n,r,o,a,l);const p=(0,s.l)(),f=p.getSelectedPivot();if(f&&f.telemetryPivotCategory){let e;e.page.pivot=f.telemetryPivotCategory,i.M0.updatePageMetadata(e)}if((0,h.N)()){const e=u._.getInstance().rootReducer.connector(d.z.SharedState);e&&e.getCurrentState().useHistory?(0,g.lY)().addSwitchListener((e=>{window.requestAnimationFrame((()=>m.onPivotSwitch(e)))}),c.I.Telemetry):p.addSwitchListener(m.onPivotSwitch,c.I.Telemetry)}}static onPivotSwitch(e){let t;const n=e.newSelection;if(n&&(i.M0.addOrUpdateCustomProperty(p,n.display),t={feed:{id:n.pivotId,name:n.display,type:"xfeed"===n.telemetryPageName?"category filter":void 0},page:{content:{topic:n.display},pivot:""}},n.telemetryPivotCategory&&(t.page.pivot=n.telemetryPivotCategory),n.telemetryVertical&&(t.page.content.vertical=n.telemetryVertical),n.telemetryPageType&&(t.page.type=n.telemetryPageType),"gaming"===n.pivotId&&(t.feed.id=`gaming/${(0,r.ll)()}`),"following"===n.pivotId&&(t.feed.id=`following/${(0,r.ll)()}`),i.M0.updatePageMetadata(t)),e.oldSelection||m.isPivotManagerSwitched){if(m.isPivotManagerSwitched=!1,n.telemetryPageName)t.page.name=n.telemetryPageName;else if(n.pivotId)switch(n.pivotId){case"productivityHub":t.page.name="entnewshp";break;case"myfeed":case"myFeed":t.page.name="default";break;case"myInterests":t.page.name="cinterests";break;case"gaming":t.page.name="gaming";break;case"play":t.page.name="play";break;case"navigationPage":t.page.name="navigationPage";break;case"following":t.page.name="following",t.feed.id=`following/${o.uD.Manual}`}"gaming"===n.pivotId&&(t.feed.id=`gaming/${o.uD.Manual}`,t.page.isCorePV=!0);const e="IsGamer",r="IsXboxGamer",s="IsPCGamer",c=(0,a.$o)().getItem("userType");return i.M0.addOrUpdateTmplProperty(e,c&&c.includes(e)?"1":"0"),i.M0.addOrUpdateTmplProperty(r,c&&c.includes(r)?"1":"0"),i.M0.addOrUpdateTmplProperty(s,c&&c.includes(s)?"1":"0"),i.M0.updateRequestId(),i.M0.updatePageMetadata(t),void i.M0.sendPageView(null,!0)}}}m.isPivotManagerSwitched=!1},72009:function(e,t,n){"use strict";n.r(t),n.d(t,{TelemetryDataConnector:function(){return i.D},TelemetryDataReducer:function(){return r},ToolingInfo:function(){return o}});var i=n(39100);class r{reduce(e,t){return{}}}const o={experienceConfigSchema:{}}},60189:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(82898);function r(e,t){let n=i.hP.SearchBox;switch(e.selectedFeedDisplaySetting){case"always":n|=i.hP.ContentFeed;break;case"headingsonly":n|=i.hP.HeadingsOnly;break;case"onscroll":n|=i.hP.ContentBelowTheFold;break;case"peek":n|=i.hP.Peek;break;default:n|=i.hP.Empty}return e.imageOfTheDayEnabled&&(n|=i.hP.BingImage),e.greetingEnabled&&t&&(n|=i.hP.GreetingEnabled),"off"!==e.selectedQuickLinksDisplaySetting&&(n|=i.hP.TopSites),"custom"===e.currentLayout&&(n|=i.hP.CustomModeOption),n}},72120:function(e,t,n){"use strict";n.r(t),n.d(t,{TelemetryDataEdgeChromiumConnector:function(){return C},TelemetryDataEdgeChromiumReducer:function(){return w},ToolingInfo:function(){return b},edgeNextGetPageConfiguration:function(){return u.y}});var i=n(59489),r=n(76166),o=n(67044),a=n(31499),s=n(13334),c=n(21789),d=n(95153),l=n(25598),u=n(60189),p=n(82486),h=n(64726),g=n(85205),m=n(23549),f=n(50632),v=n(16614),y=n(19464),S=n(31558);class C extends r.e{constructor(e,t,n,r,o,a,s){super(e,t,n,r,o,a,s),this.fireTelemetryBeacon=!0,this.isMSASignedin=!1,this.edgeChromiumPgltCookieName="pglt",this.cookieExpireInDays=182;const c=new URLSearchParams(window.location.search);this.firstLaunchParam=c.get("firstlaunch"),(0,S.N)()&&(this.setupLayoutTelemetry(),this.getPrimaryAccountInfoAsync().then((e=>{this.isMSASignedin=e.accountType===i.l.MSA})))}async getLayoutStateAsync(){const e=await(0,o.oU)(g.z.ChromiumPageSettings);return await e.getLayoutStateAsync()}async getPrimaryAccountInfoAsync(){const e=await(0,o.oU)(g.z.ChromiumPageSettings);return await e.getPrimaryAccountInfoAsync()}pageSettingTelemetry(e){if("visible"===document.visibilityState){const t=(0,u.y)(e,this.isMSASignedin);m.M0.updatePageConfiguration(t),this.setPgltCookie(String(t)),this.stampTmpl(e)}}initializeTelemetry(e){const t=m.M0.getPageMetadata();if(t&&t.contract&&t.contract.page){const t=(0,u.y)(e,this.isMSASignedin);m.M0.updatePageConfiguration(t),this.setPgltCookie(String(t)),this.stampTmpl(e)}const n=document.createEvent("Event");n.initEvent("trackvaluesupdated",!0,!0),document.dispatchEvent(n)}setupLayoutTelemetry(){this.getLayoutStateAsync().then((e=>{this.currentLayoutState=e,this.initializeTelemetry(e)})),l.J.updateLayout.registerObserver((e=>{const t=e&&e.params;!t||t.length<1||this.pageSettingTelemetry(t[0])})),a.I.layoutAnimationComplete.registerObserver((()=>{this.getLayoutStateAsync().then((e=>{if("1"===this.firstLaunchParam){if(!this.fireTelemetryBeacon)return;this.fireTelemetryBeacon=!1}this.currentLayoutState.backgroundImageTypePolicy===e.backgroundImageTypePolicy&&this.currentLayoutState.currentBackgroundImageType===e.currentBackgroundImageType&&this.currentLayoutState.currentLayout===e.currentLayout&&(0,v.Z)(this.currentLayoutState.customBackgroundImageInfo,e.customBackgroundImageInfo)&&this.currentLayoutState.greetingEnabled===e.greetingEnabled&&this.currentLayoutState.imageOfTheDayEnabled===e.imageOfTheDayEnabled&&this.currentLayoutState.market===e.market&&this.currentLayoutState.quickLinksEnabled===e.quickLinksEnabled&&this.currentLayoutState.selectedFeedDisplaySetting===e.selectedFeedDisplaySetting||(this.currentLayoutState=e,(0,p.TR)()||(0,h.eC)().then((()=>{m.M0.sendPageView(null,!1)})))}))}))}setPgltCookie(e){let t=this.edgeChromiumPgltCookieName;const{apptype:n,pagetype:i}=s.Al.ClientSettings?s.Al.ClientSettings:{apptype:void 0,pagetype:void 0};n&&i&&(t+="-"+s.Al.ClientSettings.apptype+"-"+s.Al.ClientSettings.pagetype),(0,y.sq)(t,e,this.cookieExpireInDays,c.jG.HostPage.topDomain)}stampTmpl(e){this.stampHardware();const t=(0,f.GQ)();if(!t)return;const n=(0,d.Nd)(this.requestContext.data.innerWidth,"innerWidth"),i=(0,d.Nd)(this.requestContext.data.outerWidth,"outerWidth");if(!n||!i)return;let r=0;const o=!(0,d.Nd)(this.requestContext.data.screenTop,"screenTop")&&!(0,d.Nd)(this.requestContext.data.screenY,"screenY")?0:14;e.verticalTabsOpened&&(r=e.verticalTabsCollapsed?48:256);const a=Math.round(1e4*(i-o-r)/innerWidth)/1e4;if(!a)return;const s=Math.round((i-o)/a);if(s&&(m.M0.addOrUpdateTmplProperty("edge.zoom",a+""),m.M0.addOrUpdateTmplProperty("edge_ntp.actualWidth",n+""),m.M0.addOrUpdateTmplProperty("edge_ntp.expectedWidth",s+""),e.verticalTabsOpened)){if(m.M0.addOrUpdateTmplProperty("vertical_tabs.opened","1"),m.M0.addOrUpdateTmplProperty("vertical_tabs.collapsed",e.verticalTabsCollapsed?"1":"0"),s<=n)return;let i=1,r=1;for(let e=t.length-1;e>1;e--){const o=t[e].minViewportWidthPx;if(!o||1!=i&&1!=r)break;1==i&&s>o&&(i=e),1==r&&n>o&&(r=e)}i>r&&(m.M0.addOrUpdateTmplProperty("vertical_tabs.eligiblecol",i+1+""),m.M0.addOrUpdateTmplProperty("vertical_tabs.showncol",r+1+""))}}stampHardware(){if(window&&window.navigator){const e=window.navigator;e.deviceMemory&&m.M0.addOrUpdateTmplProperty("edge.mem",e.deviceMemory+""),e.hardwareConcurrency&&m.M0.addOrUpdateTmplProperty("edge.concurrency",e.hardwareConcurrency+""),e.connection&&e.connection.effectiveType&&m.M0.addOrUpdateTmplProperty("edge.connection",e.connection.effectiveType+"")}}}class w{reduce(e,t){return{}}}const b={experienceConfigSchema:{}}},4578:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i,r=n(55524),o=n(17556);class a{static get setMaxTiles(){return r.Gq.get(this.setMaxTilesKey,(()=>new o.C("setMaxTilesSignature")))}static set setMaxTiles(e){r.Gq.set(this.setMaxTilesKey,e)}static get setActualRowCount(){return r.Gq.get(this.setActualRowCountKey,(()=>new o.C("setActualRowCountSignature")))}static set setActualRowCount(e){r.Gq.set(this.setActualRowCountKey,e)}}(i=a).setMaxTilesKey=Symbol("setMaxTiles"),i.setActualRowCountKey=Symbol("setActualRowCount")},53980:function(e,t,n){"use strict";n.d(t,{L:function(){return P}});var i=n(76166),r=n(67044),o=n(68963),a=n(4578),s=n(50176),c=n(85205),d=n(79545),l=n(84424),u=n(21930),p=n(76733),h=n(87172),g=n(74161),m=n(23549),f=n(64726),v=n(41074),y=n(66415),S=n(84515),C=n(48278),w=n(12912),b=n(26488),T=n(94409),k=n(23234);class P extends i.e{constructor(e,t,n,i,a,y,S){super(e,t,n,i,a,y,S);const C=(0,r.K0)(c.z.ChromiumPageSettings);h.U.getPreferenceSetting(s.lx).then((e=>{const t=null==e?void 0:e.value;!1===(null==t?void 0:t.quickLinkSettingsChanged)&&(0,f.eC)().then((()=>{null===m.M0||void 0===m.M0||m.M0.addOrUpdateTmplProperty("tscollapsed_to_off","1")}))}));try{(0,o.Uo)(c.z.ChromiumPageSettings,(async e=>{e.isLoadCompleted&&(0,l.NU)(e).then((e=>{e&&(C.updateQuickLinksDisplayOption("off",g.dE.WPO_CLOSE),this.triggerWpoOpenTopSitesCoachMark(),(0,r.oU)(c.z.ExperienceTrackerEdgeNextData).then((e=>{window.setTimeout((()=>{(0,u.o_)(d.x.topSitesEdgeNextWC,!0),v.g.updateVisuallyReadyTiming.getActionSender(e).send({experienceType:d.x.topSitesEdgeNextWC,endTime:performance.now()})}))})),(0,f.eC)().then((()=>{null===m.M0||void 0===m.M0||m.M0.addOrUpdateTmplProperty("tscollapsed_to_off","1")})))}))}))}catch(e){p.k.log(e)}(0,l.bC)(y.enableWpoOpenTopSites,y.enableWpoOpenTopSitesAll).then((e=>{e&&C.updateQuickLinksDisplayOption("onerow",g.dE.WPO_OPEN)}))}updateMaxTiles(e){a.I.setMaxTiles.getActionSender(this).send(e)}updateActualRowCount(e){window.setTimeout((()=>{a.I.setActualRowCount.getActionSender(this).send(e)}),0)}async triggerWpoOpenTopSitesCoachMark(){var e,t;const n=await(0,y.h_)(S._.settingsButton),i={id:C.B.TopSitesCloseByWpo,group:"Promotional",placementSource:"Internal",surfaceModel:{surfaceType:"Coachmark",size:b.dm.Large,dismissAfterSeconds:10,position:{coachmarkAnchor:n,anchoringPosition:b.RC.Below,hasPointer:!0,pointerPosition:b.Jt.Opposite}},contentModel:{title:(null===(e=this.config)||void 0===e||null===(e=e.localizedStrings)||void 0===e||null===(e=e.WpoCloseTopSitesCoachMark)||void 0===e?void 0:e.title)??"",description:(null===(t=this.config)||void 0===t||null===(t=t.localizedStrings)||void 0===t||null===(t=t.WpoCloseTopSitesCoachMark)||void 0===t?void 0:t.description)??"",contentType:T.J.CallToAction}},r=[(0,k.l)("Viewed",1)];window.requestAnimationFrame((()=>window.setTimeout((()=>{var e;return null===(e=(0,w.$0)())||void 0===e?void 0:e.sendInternalPlacement(i,r)}))))}}},8679:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var i=n(99551),r=n(4578);class o{reduce(e,t){if(!e)return{actualRowCount:void 0,maxTiles:8};if(!t)return e;let n;return i.G.handleAction(t,r.I.setActualRowCount,(t=>{t!=e.actualRowCount&&(n={...e,actualRowCount:t})})),i.G.handleAction(t,r.I.setMaxTiles,(t=>{t!=e.maxTiles&&(n={...e,maxTiles:t})})),n||e}}},7486:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var i,r=n(17556);class o{}(i=o).followedTopics=new r.C("FollowedTopics"),i.followedTopicsFailed=new r.C("FollowedTopicsFailedSignature"),i.recommendedTopics=new r.C("RecommendedTopics"),i.recommendedTopicsFailed=new r.C("RecommendedTopicsFailed"),i.hiddenTopics=new r.C("HiddenTopics"),i.hiddenTopicsFailed=new r.C("HiddenTopicsFailed"),i.topic=new r.C("Topic"),i.topicFailed=new r.C("TopicsFailed"),i.topics=new r.C("Topics"),i.topicList=new r.C("TopicList"),i.topicsFailed=new r.C("TopicsFailed"),i.topicGroup=new r.C("TopicGroup"),i.topicGroupFailed=new r.C("TopicGroupFailed"),i.updateTopicFollowedState=new r.C("UpdateTopicFollowedState"),i.updateTopicFollowedStateFailed=new r.C("UpdateTopicFollowedStateFailed"),i.updateTopicHiddenState=new r.C("UpdateTopicHiddenState"),i.updateTopicHiddenStateFailed=new r.C("UpdateTopicHiddenStateFailed")},18787:function(e,t,n){"use strict";n.d(t,{K:function(){return m}});var i=n(21789),r=n(23549),o=n(29597),a=n(54297),s=n(88826),c=n(7476),d=n(31558);const l="TS_QUERIES";class u{constructor(e){this.config=e}buildURL(){return""}parseResponse(e){return[]}formatData(e){return e&&Array.isArray(e)?e.map((e=>{const t={query:e};return this.config.landingPageBaseUrl&&(t.href=this.config.landingPageBaseUrl+encodeURIComponent(e)+"&form="+this.config.formCode+"&refig="+r.M0.getRequestId()),t})):[]}async fetchTrendingSearches(){let e,t=[];if(!this.config||!this.config.apiEndpoint)return t;const n={};try{var i,a;const s=this.buildURL(),c={credentials:"same-origin",method:"GET",mode:"cors"},d=this.config.apiTimeout||1e4,l=await(0,o.Sm)(decodeURIComponent(s),d,c);if(n.tIdInHeader=null===(i=l.headers)||void 0===i?void 0:i.has("bingapis-traceid"),n.traceId=null===(a=l.headers)||void 0===a?void 0:a.get("bingapis-traceid"),!l||!l.ok){if(404===l.status)return r.M0.addOrUpdateTmplProperty("tsResponse","0"),t;throw new Error("Error response: "+l.status)}e=await l.json()}catch(e){return(0,s.H)(c.QWk,`${e}`,"",n),t}try{if(!e)throw new Error("Invalid format of response.");if(t=this.parseResponse(e),!t||!Array.isArray(t))throw new Error("Invalid format of response.");return 0===t.length&&(r.M0.addOrUpdateTmplProperty("tsResponse","0"),(0,s.H)(c.wMp,"Empty trending search content","",n)),t.slice(0,this.config.cacheCount||5)}catch(e){(0,s.H)(c.yHB,`${e}`,"",n)}return t}async getTrendingSearches(){r.M0.addOrUpdateTmplProperty("trendingsearch","1");let e=[];if((0,d.N)())try{const e=(0,a.$o)().getItem(l);if(e){const t=JSON.parse(e),n=((null==t?void 0:t.cacheTime)||0)+1e3*(this.config.cacheTimeout||60),r=null==t?void 0:t.queries;if((null==t?void 0:t.mkt)===i.jG.CurrentMarket&&r&&r.length&&n>Date.now())return this.formatData(r)}}catch(e){(0,s.H)(c.yHB,`${e}`)}if(e=await this.fetchTrendingSearches(),(0,d.N)())if(e&&e.length){const t={cacheTime:Date.now(),mkt:i.jG.CurrentMarket,queries:e};(0,a.$o)().setItem(l,JSON.stringify(t))}else(0,a.$o)().removeItem(l);return this.formatData(e)}}class p extends u{buildURL(){return this.config.apiEndpoint+"?qry=&ascv=json&pt="+this.config.partnerEndpoint+"&features="+this.config.features+"&mkt="+i.jG.CurrentMarket+"&cvid="+r.M0.getRequestId()}parseResponse(e){return e.suggestions&&Array.isArray(e.suggestions)?e.suggestions.filter((e=>!!e.q&&"PN"==e.t)).map((e=>e.q)):[]}}class h extends u{buildURL(){return this.config.apiEndpoint+"?apikey="+this.config.apikey+"&market="+i.jG.CurrentMarket+"&fdhead="+this.config.features}parseResponse(e){var t;const n=JSON.parse(null===(t=e[0])||void 0===t?void 0:t.data);return(null==n?void 0:n.map((e=>null==e?void 0:e.Query)))||[]}}class g extends u{buildURL(){let e=this.config.apiEndpoint+"?appid="+this.config.appId+"&features="+this.config.features+"&mkt="+i.jG.CurrentMarket;return this.config.cc&&(e+="&cc="+this.config.cc),this.config.strictMode&&(e+="&IsStrictMode=1"),e}parseResponse(e){var t;return(null===(t=e.value)||void 0===t?void 0:t.map((e=>{var t;return null===(t=e.query)||void 0===t?void 0:t.text})))||[]}}function m(e){let t;switch(e.apiVersion){case 3:t=new p(e);break;case 2:t=new g(e);break;default:t=new h(e)}return t}},49915:function(e,t,n){"use strict";var i;n.d(t,{SH:function(){return p},$A:function(){return c},ku:function(){return a},Ol:function(){return s},jI:function(){return l},jC:function(){return d},Jn:function(){return u}}),function(e){e.DesktopL1="weatherdesktopl1",e.DesktopL2="weatherdesktopl2",e.PWA="weatherpwa",e.EdgeFeatured="edgefeatured",e.WINAPP="weather-app-win",e.XIAOMI="xiaomi",e.XIAOMI_ANDROID_GO="xmweather-gominus1",e.XIAOMI_BROWSER="xmweather-browser",e.SKYPE="onoskype",e.WINDOWS_HEADER_PREFIX="win",e.EDGE_ARTICLE_PREFIX="msnar"}(i||(i={}));new Set(["msedgdhphdr","msedgntphdr","msedgntp","msedgdhp","entnewsntp"]);var r=n(21789),o=n(23357);function a(e){let t;if(e instanceof URL)t=e.searchParams;else if(e instanceof URLSearchParams)t=e;else if("string"==typeof e)try{t=new URL(e).searchParams}catch(e){t=void 0}return s(t,"ocid")}function s(e,t,n){if(e&&t){const i={value:e.get(t)||void 0};if(!i.value&&n&&n.length>0)for(let t=0;t<n.length&&(i.value=e.get(n[t])||void 0,!i.value);++t);if(!i.value){const n=t.toLowerCase();e.forEach((function(e,t){!i.value&&t.toLowerCase()===n&&e&&(i.value=e)}))}return i.value}}function c(e,t,n){if(!e)return null;let i;try{i=e instanceof URL?new URL(e.href):new URL(e)}catch(e){return null}if(i&&(n||i.host.includes("msn.com")||i.host.includes(".msn.cn")))for(const[e,n]of Object.entries(t))e&&n&&i.searchParams.set(e,n);return i.href}function d(e,t){if(!e)return null;let n;try{n=new URL(e instanceof URL?e.href:e)}catch(e){return null}return n&&t&&t.length&&t.forEach((e=>{n.searchParams.delete(e)})),n.href}function l(e){const t=new RegExp("^.*/([Aa][Rr]||[Ss]{2}||[Vv][Ii]||[Vv][Pp])-(?<contentId>[a-zA-Z0-9]{6,8})(([?].*)||#.*)?$");return null!==e.match(t)}function u(e){if("edgeChromium"===r.jG.AppType)return!1;const t=a(e),n=null==t?void 0:t.toLowerCase();return o.Oj.has(n)}n(61303);function p(e,t,n){return c(e,{cvid:t,ocid:n})}},10141:function(e,t,n){"use strict";n.d(t,{ti:function(){return r},v1:function(){return o}});var i=n(47647);function r(){return(0,i.Vx)()}function o(){return(0,i._4)()}},66794:function(e,t,n){"use strict";n.d(t,{Vo:function(){return h},XJ:function(){return p}});var i=n(85594),r=n(88070),o=n(43356),a=n(7124);let s=!1;function c(){d()}const d=(0,a.Z)((()=>h(!1)),300),l=new Set;class u extends i.Pq{constructor(e){super(e),this.options=e}bind(e){this.target=e.targets[this.targetNodeId],s||(addEventListener("resize",c),s=!0),this.initialCalc(),l.add(this)}unbind(){l.delete(this)}async initialCalc(){await(0,o.F_)(),this.recalculate(!1)}async recalculate(e){await(0,r.y)();const t=this.target;if("fixed"!==t.style.position&&t.offsetWidth>0&&t.offsetHeight>0){const n={top:t.offsetTop,left:t.offsetLeft};if(e&&this.lastPosition){const e=this.lastPosition.left-n.left,i=this.lastPosition.top-n.top;if(e||i){const n=`translate(${e}px, ${i}px)`;t.style.transform=n,requestAnimationFrame((()=>{const e="transform .3s ease-out",n=t.style.transition;t.style.transition=n?n+", "+e:e,t.style.transform="translate(0, 0)",setTimeout((()=>{t.style.transition=n,t.style.transform=null}),300)}))}}this.lastPosition=n}}}function p(){return new u({})}function h(e){for(const t of l.values())t.recalculate(e)}i.m0.define(u)},16844:function(e,t,n){"use strict";n.d(t,{Fc:function(){return c},Fl:function(){return s},Nu:function(){return d}});var i=n(85594);const r={},o={};class a extends i.Pq{constructor(e){super(e),this.options=e,this.stickyClassApplied=!1,this.refreshSticky=()=>{const e=r[this.options.breakpointName];if(e<0)return;const t=scrollY>e;if(t!==this.stickyClassApplied){const e=this.options.stickyClassName;t?this.target.classList.add(e):this.target.classList.remove(e),this.stickyClassApplied=t}}}bind(e){this.target=e.targets[this.targetNodeId],this.refreshSticky();const{breakpointName:t}=this.options;let n=o[t];n||(n=new Set,o[t]=n),n.add(this),addEventListener("scroll",this.refreshSticky)}unbind(e){o[this.options.breakpointName].delete(this),removeEventListener("scroll",this.refreshSticky)}}function s(e){return new a(e)}function c(e,t){r[e]=t;const n=o[e];if(n)for(const e of n)e.refreshSticky()}function d(e){return r[e]}i.m0.define(a)},36941:function(e,t,n){"use strict";function i(e,t=!1){if(e){if(t&&e.display)return e.display;if(e.content)return e.content}return e}function r(e){return e.language&&e.market&&(e.language+"-"+(e.script?e.script+"-":"")+e.market).toLowerCase()||""}n.d(t,{H:function(){return i},p:function(){return r}})},32614:function(e,t,n){"use strict";n.d(t,{D3:function(){return l},KL:function(){return g},QG:function(){return m},mL:function(){return y},pG:function(){return p},q3:function(){return h},vc:function(){return u},zz:function(){return f}});var i=n(52681),r=n(12697);let o;const a="//img-s-msn-com.akamaized.net/tenant/amp/entityid/",s="//img-s.msn.cn/tenant/amp/entityid/",c="//prod-streaming-video-msn-com.akamaized.net/",d="//prod-streaming-video.msn.cn/";var l,u;!function(e){e.JPG="jpg",e.PNG="png",e.WEBP="webp"}(l||(l={})),function(e){e[e.None=0]="None",e[e.Letterbox=1]="Letterbox",e[e.Scale=2]="Scale",e[e.Stretch=3]="Stretch",e[e.Crop=4]="Crop",e[e.FocalCrop=5]="FocalCrop",e[e.FacialCrop=6]="FacialCrop"}(u||(u={}));const p=90,h="www.bing.com/th",g=new RegExp(/bing\.(com|net)\/th/);function m(e,t){return`${(0,i.PQ)()?d:c}${e}.${t||"mp4"}`}function f(e,t){return y(((0,i.PQ)()?s:a)+e,t)}const v=Math.ceil(4*Math.random())||4;function y(e,t){if(e&&g.test(e))return function(e,t){try{return S(new URL(e),t).href}catch(n){const i=S(new URL(`https://${e}`),t);return`//${i.host}${i.pathname}${i.search}`}}(e,t);const{focalRegion:n,backgroundColor:i}=t;let{width:a=0,height:s=0,format:c=l.JPG}=t,d="";if(n){const e=w(n.x1,n.x2),t=w(n.y1,n.y2);null!=e&&null!=t&&(d+=`&x=${e}&y=${t}`)}i&&(d+=`&b=${i}`);const u=null==t.mode?6:t.mode;if(6===u&&(d+="&u=t"),t.enableDpiScaling){if(!t.devicePixelRatio)throw new Error("A valid devicePixelRatio value must be provided when DPI scaling is enabled");const e=function(e){if(C()&&o)return o;if(e<1)return null;let t=e;(0,r.Z)(4*t)||(t=Math.ceil(10*t)/10);t>3&&(t=3);C()&&(o=t);return t}(t.devicePixelRatio);e&&(a=Math.round(a*e),s=Math.round(s*e))}return`${e}?w=${a}&h=${s}&q=${t.quality||60}&m=${u}&f=${c}${d}`}function S(e,t){(0,i.PQ)()&&(e.hostname=`ts${v}.cn.mm.bing.net`);const{width:n=0,height:r=0}=t,o=t.quality||p,a=t.crop||0===t.crop?t.crop:1;if(e.searchParams.set("w",`${n}`),e.searchParams.set("h",`${r}`),e.searchParams.set("qlt",`${o}`),e.searchParams.set("c",`${a}`),e.searchParams.set("rs","1"),t.enableDpiScaling){e.searchParams.set("dpr",`${t.devicePixelRatio}`);const n=t.padding||0;e.searchParams.set("p",`${n}`)}return e}function C(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function w(e,t){if(null!=e&&null!=t)return Math.floor((e+t)/2)}},52681:function(e,t,n){"use strict";let i,r;function o(e){i=e}function a(){return i}function s(e){r=e}function c(){return r}n.d(t,{PQ:function(){return a},g8:function(){return c},jW:function(){return s},sV:function(){return o}})},9683:function(e,t,n){"use strict";n.d(t,{o:function(){return d}});var i=n(55524),r=n(31558);class o{constructor(){this.cacheMap=new Map}async has(e){return!!this.cacheMap[e]}async get(e){return this.cacheMap[e]}async set(e,t,n){return this.cacheMap[e]=t,!0}async mSet(e,t){return Object.keys(e).forEach((t=>{this.cacheMap[t]=e[t]})),!0}async del(e){delete this.cacheMap[e]}async itemCount(){return Object.keys(this.cacheMap).length}async reset(){this.cacheMap=new Map}}const a="__ServerCacheUpdateMap__";let s,c;const d=(0,r.N)()?null:{emitUpdate:async function(){if(!i.Gq.has(a))return;const e=i.Gq.get(a),t=[];return e.forEach(((e,n)=>{const r=c.mSet(e,n).then((()=>{const e=i.Gq.get(a);e&&e.delete(n)}));t.push(r)})),Promise.all(t)},initialize:function(e,t=!1){c=e,s=t},reset:async function(){await c.reset()},set:async function(e,t,n){if(s)return function(e,t,n){const r=i.Gq.get(a,(()=>new Map)),o=r.get(n);r.set(n,{...o,[e]:t})}(e,t,n);await c.set(e,t,n)},get:async function(e){return await c.get(e)},has:async function(e){return await c.has(e)},del:async function(e){return await c.del(e)},itemCount:async function(){return await c.itemCount()}};n.g.TEST_ENV&&!(0,r.N)()&&d.initialize(new o)},66759:function(e,t,n){"use strict";n.d(t,{tR:function(){return d},Un:function(){return s}});var i=n(88826),r=n(7476);var o=n(21789);class a{constructor(){this._isTrue=!1,this.onTrueCallbacks={}}isTrue(){return this._isTrue}reset(){this._isTrue=!1,this.onTrueCallbacks={}}sub(e,t){this._isTrue?t&&t():e&&t&&"function"==typeof t&&(this.onTrueCallbacks[e]=t)}unsub(e){e&&this.onTrueCallbacks[e]&&delete this.onTrueCallbacks[e]}setTrue(){if(this._isTrue)return;this._isTrue=!0;Object.keys(this.onTrueCallbacks).forEach((e=>{this.onTrueCallbacks[e]&&this.onTrueCallbacks[e]()})),this.onTrueCallbacks={}}}"object"!=typeof window||!window.chrome||window.chrome.webview,new a,new a;const s=()=>{const{shellFeedsExperienceInfo:e}=d()||{};if(!e)return!1;const{CurrentRequestTargetScope:t}=o.jG,n=t&&t.pageExperiments||[],i=0===e.buttonInteraction,r=e.isWebviewVisible;return n.includes("prg-1sw-wv2bgup")?i:n.includes("prg-1sw-2wv2bgup")?!r:n.includes("prg-1sw-3wv2bgup")?i||!r:!r&&i};const c=function(e){const{CurrentRequestTargetScope:t}=o.jG;if((t&&t.pageExperiments||[]).includes(e))return!0;return!1}("prg-1sw-apiproxy"),d=()=>{if(window.ShellFeedsApp)return c?new Proxy(window.ShellFeedsApp,{get(e,t,n){try{if("isProxy"===t)return!0;if("toJSON"===t)return()=>function(e){const t={},n=Object.getOwnPropertyNames(e);for(const i of n)t[i]=e[i];return JSON.stringify(t)}(e);if("shellFeedsExperienceInfo"===t||"authManager"===t)return new Proxy(e[t]||{},this);const n=t in e?e[t]:void 0;return"function"==typeof n?n.bind(e):n}catch(e){!function(e,t){(0,i.OO)(t||new Error("Property not found"),r.$Yi,"shellFeedsAppApi error",`API: ${e}`)}(t,e)}}}):window.ShellFeedsApp};!function(){try{const{shellFeedsExperienceInfo:e}=d()||{};return!!e&&!1===e.showPinToTaskbarBanner}catch(e){return!1}}()},93570:function(e,t,n){"use strict";n.d(t,{Iq:function(){return c},MD:function(){return a},gL:function(){return s}});var i=n(59967),r=n(19995);const o=new i.v("WidgetLoadTracker");function a(e){o.has(e)||("hidden"!==document.visibilityState?(0,r.c)((()=>o.set(e,!0))):o.set(e,!0))}const s=new i.v("WidgetAppState");var c;!function(e){e[e.IsDarkMode=1]="IsDarkMode",e[e.IsDashboardVisible=2]="IsDashboardVisible",e[e.ActionMenuStrings=3]="ActionMenuStrings",e[e.IsDynamicFeed=4]="IsDynamicFeed",e[e.SessionId=5]="SessionId",e[e.NonPeregrineWidgetTelemetryObject=6]="NonPeregrineWidgetTelemetryObject",e[e.FeedRegionWidgets=7]="FeedRegionWidgets",e[e.RecommendedWidgets=8]="RecommendedWidgets",e[e.DefaultPreviewType=9]="DefaultPreviewType",e[e.IsReauthRequired=10]="IsReauthRequired",e[e.IsWindowShown=11]="IsWindowShown",e[e.FeedRefreshPromise=12]="FeedRefreshPromise",e[e.Suspended=13]="Suspended",e[e.ClientLayoutVersion=14]="ClientLayoutVersion",e[e.IsLSCachedFeedUsed=15]="IsLSCachedFeedUsed",e[e.IsExpandedViewEnabled=16]="IsExpandedViewEnabled",e[e.DelayTtvrPromise=17]="DelayTtvrPromise",e[e.TaskbarLaunchState=18]="TaskbarLaunchState",e[e.IsPreferenceMigrationComplete=19]="IsPreferenceMigrationComplete",e[e.WidgetPinnedPreferences=20]="WidgetPinnedPreferences",e[e.IsFeedsShown=21]="IsFeedsShown",e[e.BoardsNavigationState=22]="BoardsNavigationState",e[e.DisablePinIcon=23]="DisablePinIcon",e[e.AllowedPeregrineWidgets=24]="AllowedPeregrineWidgets"}(c||(c={}))},37922:function(e,t,n){"use strict";n.d(t,{fy:function(){return de},eW:function(){return ce}});var i=n(88826),r=n(7476),o=n(12184),a=n(10754),s=n(90215),c=n(23549),d=n(73298),l=n(81110),u=n(58980),p=n(91730),h=n(62168),g=n(58608),m=n(74161),f=n(67213),v=n(31558),y=n(78672),S=n(55524),C=n(74488),w=n(44672),b=n(65128),T=n(32400),k=n(13334),P=n(20434),A=n(21789),I=n(71778),E=n(92100),M=n(32810),x=n(23357),L=n(29597),R=n(54297),D=JSON.parse('{"nextPageUrl":"","sections":[{"region":"river","subSections":[{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"followCarousel","isLocalContent":false,"galleryItemCount":0,"subCards":[],"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false,"isShowSelectMoreMessage":false}]},{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"InterestManager","isLocalContent":false,"galleryItemCount":0,"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false}]}]}],"isPartial":false}'),F=JSON.parse('{"nextPageUrl":"","sections":[{"region":"river","subSections":[{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"filteredChannels","isLocalContent":false,"galleryItemCount":0,"subCards":[],"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false,"isShowSelectMoreMessage":false}]},{"dataTemplate":"msft-full-wide-one-card-five-col","layoutTemplate":"msft-full-wide-one-card-five-col","cards":[{"type":"InterestManager","isLocalContent":false,"galleryItemCount":0,"subscriptionProductType":"undefined","position":0,"notificationState":"undefined","isWorkNewsContent":false}]}]}],"isPartial":false}'),O=n(37477),B=n(45870),N=n(50136),_=n(36871);class U{constructor(e){this.shouldUseLockAdRegion=!1,this.isLockScreenLandingPage=this.shouldUseLockAdRegion&&(0,y.zp)().includes("ocid=widgetonlockscreen"),this.adRiverRegion=this.isLockScreenLandingPage?"riverlock":"river",this.adInfopaneRegion=this.isLockScreenLandingPage?"infopanelock":"infopane",this.infoPaneCardCount=0,this.riverCardCount=0,this.heroCardCount=0,this.rightrailCardCount=0,this.railCardCount=0,this.denseRiverCardCount=0,this.riverNativeAdRelativeCount=0,this.riverCmsAdRelativeCount=0,this.infopaneCmsAdCount=0,this.sectionIndex=0,this.mapRegionBasedWpoResponseForSuperFeed=(e,t,n,o,a,s)=>{if(!e||!e.sections.length)return{rawAdRegionTupleMap:W()};this.rawAdRegionTupleMap=W();const c={rawAdRegionTupleMap:this.rawAdRegionTupleMap},d=e.serviceContext?e.serviceContext.debugId:e.debugId,l=function(e){if(e.sections[0].region)return e;return{nextPageUrl:e.nextPageUrl,sections:[{region:"river",subSections:e.sections}],previews:e.previews,pageContext:e.pageContext}}(e),{nextPageUrl:u,sections:p,pageContext:h,previews:g}=l,m=this.riverCardCount;let f,v,y=!1;const S=p.findIndex((e=>"cardData"===e.region));let C=p;if(S>-1){f=p[S].cards;const t=H(e,m,"river");v=t.subSections,y=t.rowRendering,C=p.filter((e=>"cardData"!==e.region))}const w=C.findIndex((e=>"hero"===e.region));var b,T,k;return w>-1&&s&&((null==(b=C[w])||null===(T=b.subSections)||void 0===T||null===(T=T[0])||void 0===T?void 0:T.dataTemplate)||(null==b||null===(k=b.subSections)||void 0===k||null===(k=k[0])||void 0===k?void 0:k.layoutTemplate))&&(C.splice(w,1),(0,i.H)(r.GX5,"Invalid hero waterfall data contract",void 0,{...r.GX5.pb,customMessage:`debugId: ${d}, nextPageUrl: ${u}`})),c.nextPageUrl=u,c.pageContext=h,c.previews=g,c.regions=C.map((c=>{const{subSections:l,region:p,requestedColumnCount:h}=c,g=void 0,C=void 0;let w;if(S>-1&&("river"===p||"hero"===p&&s)){if("river"===p){w=[{dataTemplate:g,layoutTemplate:C,cards:f.map((e=>this.convertCardForSuperFeed({...e,placement:void 0},p,d,void 0,t,n,o,a,m))),column:h,columnLayoutList:v}]}else if("hero"===p){const i=this.heroCardCount;w=[{dataTemplate:g,layoutTemplate:C,cards:f.map((e=>this.convertCardForSuperFeed({...e,placement:void 0},p,d,void 0,t,n,o,a,i))),column:h,columnLayoutList:H(e,i,"hero").subSections}]}}else w=null==l?void 0:l.map((({dataTemplate:e,layoutTemplate:s,cards:c,column:l,isTopSection:h})=>{if(c){const i={dataTemplate:e,layoutTemplate:s,cards:c.map((e=>this.convertCardForSuperFeed({...e,placement:void 0},p,d,void 0,t,n,o,a,m))),column:l,isTopSection:h};return this.sectionIndex++,i}"river"===p&&(0,i.H)(r.gEs,"No cards were sent from WPO in river",void 0,{...r.gEs.pb,customMessage:`debugId: ${d}, nextPageUrl: ${u}, column: ${l}, dataTemplate: ${e}, layoutTemplate: ${s}`})})).filter((e=>void 0!==e));return{region:p,requestedColumnCount:h,rowRendering:y,sections:w}})),c.raw1sAdRegionTupleMap=this._raw1sAdRegionTupleMap,c.debugId=d,c},this.backfill1SAdWithNews=e=>{var t,n,o;if(null===(t=e.sections)||void 0===t||!t.length)return;const a=null===(n=e.sections.find((e=>"backup"===e.region)))||void 0===n||null===(n=n.subSections)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.cards,s=null===(o=e.sections.find((e=>"river"===e.region)))||void 0===o||null===(o=o.subSections)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.cards;null==s||s.forEach(((e,t)=>{(e.type===O.PL.NativeAd&&E.c.getQueryParameterByName("mockNo1SNative",window.location.href)||e.type===O.PL.CmsAd&&E.c.getQueryParameterByName("mockNo1SCms",window.location.href))&&(e.data=null),e.type!==O.PL.NativeAd&&e.type!==O.PL.CmsAd||e.data||((0,i.OO)(null,r.paG,`Ad for ${e.type} not found in feed response.`,`cardData: ${JSON.stringify(e)}`),null!=a&&a.length?s[t]=a.shift():(0,i.OO)(null,r.G78,"Empty backup region"))}))},this.shouldUseLockAdRegion=e,this.isLockScreenLandingPage=this.shouldUseLockAdRegion&&(0,y.zp)().includes("ocid=widgetonlockscreen"),this.adRiverRegion=this.isLockScreenLandingPage?"riverlock":"river",this.adInfopaneRegion=this.isLockScreenLandingPage?"infopanelock":"infopane"}get raw1sAdRegionTupleMap(){return this._raw1sAdRegionTupleMap||(this._raw1sAdRegionTupleMap=W()),this._raw1sAdRegionTupleMap}convertCardForSuperFeed(e,t,n,o,a,s=0,c=0,d,l=0){var u;let p;if("river"===t?(this.riverCardCount++,p=this.riverCardCount):"rightrail"===t?(this.rightrailCardCount++,p=this.rightrailCardCount):"Rail"===t?(this.railCardCount++,p=this.railCardCount):"hero"===t&&(this.heroCardCount++,p=this.heroCardCount),void 0!==e.wpoRank&&(e.wpoRank+=l),void 0!==e.wpoId&&(e.wpoId+=l),Object.values(O.PL).includes(e.type)||(0,i.OO)(null,r.nsS,`${e.type} undefined error, it is not in OneServiceMetadataType`),e.subCards){let t=N.uq.NotDenseCard;if(e.type===O.PL.Dense&&o===O.PL.Infopane?t=N.uq.IsInfopaneDenseCard:e.type===O.PL.Dense&&o!==O.PL.Infopane&&(t=N.uq.IsRiverDenseCard),e.type===O.PL.Infopane||e.type===O.PL.GroupedContent||e.type===O.PL.ColdStartArticleFreCard||e.type===O.PL.RewardsDailySet||e.type===O.PL.TabbedInfopaneCard||t!==N.uq.NotDenseCard)return this.convertComplexCardForSuperFeed(e,t,n,a,c);if("TopStories"===e.subType)return this.convertNestedCard(e);if(e.type===O.PL.NewsAnswerModule)return this.convertNewsGroupsCard(e)}if(null!==N.Qu&&void 0!==N.Qu&&null!==(u=N.Qu.current)&&void 0!==u&&u.includes(e.type))return e;if(O.TU.includes(e.type)){let n=p;return"river"===t&&(e.type===O.PL.NativeAd?(this.riverNativeAdRelativeCount++,void 0!==e.wpoAdRank&&(e.wpoAdRank=this.riverNativeAdRelativeCount)):e.type===O.PL.CmsAd&&(this.riverCmsAdRelativeCount>=s?(e.type=O.PL.NativeAd,this.riverNativeAdRelativeCount++,void 0!==e.wpoAdRank&&(e.wpoAdRank=this.riverNativeAdRelativeCount)):(this.riverCmsAdRelativeCount++,void 0!==e.wpoAdRank&&(e.wpoAdRank=this.riverCmsAdRelativeCount))),a&&(n=e.type===O.PL.FirstPartyAd?1:e.type===O.PL.NativeAd?this.riverNativeAdRelativeCount:this.riverCmsAdRelativeCount)),this.convertCardForAds(e,t,n)}try{const{augments:t,type:i,isBreaking:r,locale:o,cardSize:a,category:s,images:c,topics:d=[],dataUrl:l,publishedDateTime:u,id:p,url:h,abstract:g="",title:m="",provider:f={},reasons:v,source:y,feed:S={},actions:C=[],externalVideoFiles:w=[],reactionStatus:b,commentStatus:T,reactionSummary:k,commentSummary:P,sourceId:A,topComments:I,topQuestions:E,highlights:M,colorSamples:x,isLocalContent:L,badges:R,relatedCards:D,recoDocMetadata:F,recoId:B,ri:_,offer:U,subType:W,videoMetadata:H,isWorkNewsContent:z,wpoMetadata:j,panoCaption:K,aiComments:Q,height:J,wpoRank:Y,wpoId:Z,recoReasonTag:X,slides:ee,customTransitionSpeed:te}=e,ne=G(c)||{},ie=d.find((e=>e.feedId===S.id&&e.locale===o)),re=i===O.PL.EventInfopaneShoppingAI?q(h,/[/?]/):q(h);let oe=$(f.logoUrl);!oe&&f.logo&&f.logo.url&&(oe=$(f.logo.url));const ae=C.map((e=>{var t;return(null===N.N||void 0===N.N||null===(t=N.N.current)||void 0===t?void 0:t[e])||e}));return R&&R.some((e=>"followedPublisher"===e.type))&&ae.push("followedPublisher"),{augments:t,id:p,type:i,height:J,wpoRank:Y,wpoId:Z,metadata:{abstract:g,abstractLength:g.length,titleLength:m.length,category:s||re[4],subCategory:re[5],primaryImage:{height:ne.height,width:ne.width},locale:o,feed:{id:S.id},kicker:[S],actions:ae,reactionStatus:b,commentStatus:T,reactionSummary:k,commentSummary:P,topComments:I,topQuestions:E,highlights:M,reasons:v,source:y,relatedCards:D,panoCaption:K,topics:d,recoDocMetadata:F,recoId:B,ri:_,debugId:n,videoFiles:w,videoMetadata:H,wpoMetadata:j,recoReasonTag:X,slides:ee},cardContent:{id:p,type:V(i),title:m,aiComments:Q,uriTitle:re[6],abstract:g,isBreaking:r||0,tags:[ie||{}],provider:{id:f.id,name:f.name,logo:{id:oe},profileId:f.profileId,logoUrl:f.logoUrl,subscribable:!1,lightThemeSVGLogo:f.lightThemeSVGLogo,darkThemeSVGLogo:f.darkThemeSVGLogo},category:{product:s,label:void 0},locale:o,images:[{id:$(ne.url),height:ne.height,width:ne.width,caption:ne.title,focalRegion:ne.focalRegion,attribution:ne.attribution,url:ne.url,colorSamples:ne.colorSamples}],panoCaption:K,videoFiles:w,publishedDateTime:u,kicker:m,sourceHref:l,destinationUrl:h,sourceId:A,colorSamples:x,isLocalContent:L,isWorkNewsContent:z,badges:R,topics:d,customTransitionSpeed:te},dynamicCardSize:a}}catch(t){return e}}convertCardForAds(e,t,n){return e.type===O.PL.NativeAd?("river"===t?e.data?this.raw1sAdRegionTupleMap.get(this.adRiverRegion).push(e.wpoAdRank||n):this.rawAdRegionTupleMap.get(this.adRiverRegion).push(e.wpoAdRank||n):"rightrail"===t?this.rawAdRegionTupleMap.get("rightrail").push(n):"Rail"===t&&this.rawAdRegionTupleMap.get("Rail").push(n),e.data?{type:O.PL.NativeAd,regionIndex:e.wpoAdRank||n,data:e.data,id:e.id,height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}:{type:O.PL.NativeAd,regionIndex:e.wpoAdRank||n,placement:{items:[]},height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}):e.type===O.PL.CmsAd?("river"===t&&(e.data?this.raw1sAdRegionTupleMap.get(`res${this.adRiverRegion}`).push(e.wpoAdRank||n):this.rawAdRegionTupleMap.get(`res${this.adRiverRegion}`).push(e.wpoAdRank||n)),e.data?{type:O.PL.CmsAd,regionIndex:e.wpoAdRank||n,data:e.data,id:e.id,height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}:{type:O.PL.CmsAd,regionIndex:e.wpoAdRank||n,placement:{items:[]},height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}):e.type===O.PL.FirstPartyAd?("river"===t&&(e.data?this.raw1sAdRegionTupleMap.get("triver").push(e.wpoAdRank||n):this.rawAdRegionTupleMap.get("triver").push(e.wpoAdRank||n)),e.data?{type:O.PL.FirstPartyAd,regionIndex:e.wpoAdRank||n,data:e.data,id:e.id,height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}:{type:O.PL.FirstPartyAd,regionIndex:e.wpoAdRank||n,placement:{items:[]},height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}):e.type===O.PL.AmplifyAd||e.type===O.PL.BoostAdsBanner||e.type===O.PL.BoostAdsCoachmark||e.type===O.PL.EventSDCardAmplifyAds||e.type===O.PL.BoostAd?{type:e.type,regionIndex:e.wpoAdRank||n,data:e.data,id:`${e.type}-${e.section}-${n}`,wpoMetadata:e.wpoMetadata,height:e.height,wpoRank:e.wpoRank,wpoAdRank:e.wpoAdRank,wpoId:e.wpoId}:void 0}convertComplexCardForSuperFeed(e,t,n,i,r=0){const{id:o,type:a,title:s,wpoMetadata:c}=e;let d,l;try{d=e.subCards.map((e=>{if(t===N.uq.IsInfopaneDenseCard){if(e.type===O.PL.NativeAd)return this.rawAdRegionTupleMap.get("infopane-tab").push(this.infoPaneCardCount),{type:O.PL.NativeAd,regionIndex:this.infoPaneCardCount,placement:{items:[]}}}else if(t===N.uq.IsRiverDenseCard){if(this.denseRiverCardCount++,e.type===O.PL.NativeAd)return this.rawAdRegionTupleMap.get("dense-river").push(this.denseRiverCardCount),{type:O.PL.NativeAd,regionIndex:this.denseRiverCardCount,placement:{items:[]}}}else{if(this.infoPaneCardCount++,e.type===O.PL.NativeAd)return this.rawAdRegionTupleMap.get(this.adInfopaneRegion).push(this.infoPaneCardCount),{type:O.PL.NativeAd,regionIndex:this.infoPaneCardCount,placement:{items:[]}};if(e.type===O.PL.CmsAd){let t=`res${this.adInfopaneRegion}`;return this.infopaneCmsAdCount>=r&&(e.type=O.PL.NativeAd,t=this.adInfopaneRegion),this.rawAdRegionTupleMap.get(t).push(this.infoPaneCardCount),{type:e.type,regionIndex:this.infoPaneCardCount,placement:{items:[]}}}if(e.type===O.PL.BuyDirectAd){const t="infopane";return this.rawAdRegionTupleMap.get(t).push(this.infoPaneCardCount),{type:e.type,regionIndex:this.infoPaneCardCount,placement:{isBuyDirect:!0,items:[]}}}if(e.type===O.PL.EventInfopaneShoppingAI)try{const t=JSON.parse(e.data),n=(0,_.Z)(t);delete e.data,e={...n,...e}}catch(e){return}}if(e.type===O.PL.Dense||e.type===O.PL.TopicFeed||e.type===O.PL.TabbedInfopaneCardTab){let t=N.uq.IsInfopaneDenseCard;return a!==O.PL.Infopane&&a!==O.PL.TabbedInfopaneCard&&(t=N.uq.IsRiverDenseCard),this.convertComplexCardForSuperFeed(e,t,n,i)}return this.convertCardForSuperFeed(e,"none",n,a,i)}))}finally{var u;d=(null===(u=d)||void 0===u?void 0:u.filter((e=>!!e)))||[],l={id:o,type:a,subItems:d,metadata:{title:s},wpoMetadata:c,height:e.height,wpoRank:e.wpoRank,wpoId:e.wpoId},e.type===O.PL.TopicFeed&&(l={id:o,type:a,subItems:d,metadata:{title:s},wpoMetadata:c,feed:e.feed?e.feed:null,height:e.height,wpoRank:e.wpoRank,wpoId:e.wpoId})}return l}convertNestedCard(e){return e.subCards[0].type=e.type,e.subCards[0].subType=e.subType,e=e.subCards[0]}convertNewsGroupsCard(e){return{id:e.id,type:e.type,subType:e.subType,subCards:e.subCards||[],wpoMetadata:e.wpoMetadata,height:e.height,wpoRank:e.wpoRank,wpoId:e.wpoId}}resetCardCountForSuperFeed(){this.infoPaneCardCount=0,this.riverCardCount=0,this.heroCardCount=0,this.rightrailCardCount=0,this.railCardCount=0,this.denseRiverCardCount=0,this.riverNativeAdRelativeCount=0,this.riverCmsAdRelativeCount=0}}function W(){return new Map([["rightrail",[]],["Rail",[]],["infopane",[]],["infopanelock",[]],["river",[]],["riverlock",[]],["resinfopane",[]],["resinfopanelock",[]],["resriver",[]],["resriverlock",[]],["infopane-tab",[]],["dense-river",[]],["triver",[]]])}const H=(e,t,n)=>{const i=(null==e?void 0:e.sections).find((e=>e.region===n)).subSections,r=[];let o=!1;for(const e of i){var a;if(null!=e&&e.requestedColumnCount)null==e||null===(a=e.subSections)||void 0===a||a.forEach((e=>{e.cards||(e.cards=[]),e.cards.forEach((e=>{if("placeholder"===e.type)return e.placeholderId+=t,void(o=!0);e.wpoId+=t,e.wpoRank+=t}))})),r[e.requestedColumnCount-1]=null==e?void 0:e.subSections}return{subSections:r,rowRendering:o}};function $(e){if(!e)return"";const t=e.split("/");return G(t)&&t[t.length-1].replace(".img","")}function q(e,t="/"){return e?e.split(t):[]}function G(e,t=0){if(e)return e[t]}function V(e){switch(e){case O.PL.Article:return"ArticlePreview";case O.PL.Video:return"VideoPreview";case O.PL.Slideshow:return"SlideshowPreview";case O.PL.WebContent:return"WebContentPreview";default:return""}}var z=n(5674),j=n(45106),K=n(85663),Q=n(82486),J=n(95378),Y=n(19547);const Z=e=>{switch(e){case"weather":return r.HEk;case"sports":return r.KnF;case"finance":return r.ewo;case"traffic":return r.yRT;default:return r.SAl}};var X;!function(e){e.weather="weather",e.traffic="traffic",e.finance="finance",e.sports="sports"}(X||(X={}));const ee=new Map([["weather",new Set([O.PL.WeatherHero])],["traffic",new Set([O.PL.TrafficIncidents,O.PL.TrafficCamerasWithSummary,O.PL.TrafficMap,O.PL.TrafficNews,O.PL.TravelTimesWithSummary,O.PL.TrafficCameras,O.PL.TrafficTransit,O.PL.TrafficSummary,O.PL.TopicFeed])],["sports",new Set([O.PL.SportsHeroFre,O.PL.SportsHeroLeagueTodaysEvents,O.PL.SportsHeroMatch1SeasonStats,O.PL.SportsHeroMatch1Stats,O.PL.SportsHeroMatch2SeasonStats,O.PL.SportsHeroMatch2Stats,O.PL.SportsHeroMatch3SeasonStats,O.PL.SportsHeroMatch3Stats,O.PL.SportsHeroMatchStatistics,O.PL.SportsHeroNews,O.PL.SportsHeroOneVsManyEventResult,O.PL.SportsHeroOneVsOneEventResult,O.PL.SportsHeroSeasonStatistics,O.PL.SportsHeroStandingsRankings,O.PL.SportsHeroTeamStandings,O.PL.SportsHeroTeamStandingWithEvents,O.PL.SportsHeroTeamStandingWithMedals,O.PL.SportsHeroTeamVsTeam,O.PL.SportsHeroTeamVsTeamEventResult,O.PL.SportsHeroVideo])],["finance",new Set([O.PL.FinanceHeroMarket,O.PL.FinanceHeroMovers,O.PL.FinanceHeroSuggested,O.PL.FinanceHeroCrypto,O.PL.FinanceHeroCurrencies,O.PL.FinanceHeroUpcomingEarnings,O.PL.FinanceHeroNews,O.PL.FinanceHeroWatchlistIdeas,O.PL.FinanceHerowlsummary,O.PL.FinanceHeroMarketChart])]]),te=new Map([["hero-section-one-row-1211",{cardCount:4,supportedSegments:["traffic","sports","finance"]}],["hero-section-one-row-11111",{cardCount:5,supportedSegments:["traffic","sports","finance"]}],["msft-full-wide-one-card-five-col",{cardCount:1,supportedSegments:["weather"]}]]),ne="gaming",ie="following",re="filteredChannels",oe="dynamicfilteredchannels",ae=["cbypass","activityId","prerender","timeOut","caller","infopaneCount","edgExpMask","skipRetry","dhp","overlay"];function se(e,t=[]){var n;if(null==e||!e.serviceContext)return;const o=t.filter((e=>k.Al.CurrentFlightSet.has(e))),a=(null===(n=e.serviceContext.fdHead)||void 0===n||null===(n=n.split(","))||void 0===n?void 0:n.map((e=>e.trim())))??[],s=o.filter((e=>!a.includes(e)));s.length>0&&(0,i.H)(r.YVN,"",void 0,{...r.YVN.pb,cetoRef:e.cetoRef,msEdgeRef:e.msEdgeRef,message:`Flight ids ${s.join(",")} missing in wpo fdhead.`})}function ce(){if(!(0,v.N)()||!window.ssrWpoData)return;const e=window.ssrWpoData;se(e,["prg-wpo-bkpncbig","prg-wpo-ntpscssr"]);const{debugId:t,serviceContext:n,dddTmpl:i}=e;return(0,z.Dz)(t,!0),null!=n&&n.serviceActivityId&&c.M0.addOrUpdateIdxId(n.serviceActivityId,!0),c.M0.addOrUpdateTmplString(i),delete window.ssrWpoData,e}class de{constructor(e,t){this.shouldRetryInOtherDomain=!1,this.traceInfo=[],this.shouldResetRightRailPromise=!1,this.wpoRightRailPromise=new B.o,this.shouldResetRailPromise=!1,this.wpoRailPromise=new B.o,this.noContentRetryCount=0,this.maxContentRetryCount=5,this.isPartialResponse=e=>!!(e&&e.serviceContext&&e.serviceContext.preRenderDisabled),this.getAuthTrail=()=>{try{return(0,j.pD)()}catch{(0,i.H)(r.evM,"Error throwed when getCompressedRecords doesn't return anything for NTP")}},this.updateQSParam=(e,t)=>{const n=new RegExp("([?&])"+t+"=.*?(&|$)","i");return e.match(n)?e.replace(n,"&"):e},this.mapperHelper=new U(e.shouldUseLockAdRegion),this.config=e,this.initializeRequest(),this.isXFeed=t}async fetch(e,t,n,o,a){let s=this.config.initialRequest;if(this.shouldResetRightRailPromise&&(this.wpoRightRailPromise=new B.o,this.shouldResetRightRailPromise=!1),this.shouldResetRailPromise&&(this.wpoRailPromise=new B.o,this.shouldResetRailPromise=!1),e&&(e.feedId||e.nextPageUrl||(e.feedId=s.feedId),s={...s,...e}),!s)return(0,i.H)(r.eD0,"default WpoService fetch configuration was invalid"),this.responseStatus=T.F_.InvalidRequest,{status:this.responseStatus,isStatic:this.isStatic,regions:void 0,rawAdRegionTupleMap:new Map([["rightRail",[]],["Rail",[]],["infopane",[]],["river",[]],["resinfopane",[]],["resriver",[]],["infopane-tab",[]]])};const c=await this.fetchRiverSectionFeedLayoutData(s,t,n);return t===d.V.init&&c&&c.serviceContext&&((0,P.l)(c.serviceContext),k.Al.CurrentFlightSet.has("1s-ads-ntpriver")&&se(c,["1s-ads-ntpriver","prg-ad-ridoverride"])),t!==d.V.init||(0,v.N)()||(c?Y.SI.setSSRInitialFeedResponse(c):(0,i.H)(r.y6M,"",void 0,{...r.y6M.pb,requestId:s.requestId})),this.handleResponseMapForSuperFeed(s,c,o,a)}overrideAppErrorSeverity(e){if("hub"===A.jG.AppType&&[r.vas,r.ck_,r.KEP,r.QJe].includes(e))return o.z.Critical}sendAppErrorWithSeverityOverride(e,t){const n=this.overrideAppErrorSeverity(e);n&&(t.severity=n),c.M0.sendAppErrorEvent(t)}handleResponseMapForSuperFeed(e,t,n,o){var a;if(this.isPartialResponse(t))return{status:this.responseStatus,isStatic:!1,rawAdRegionTupleMap:new Map([["rightRail",[]],["Rail",[]],["infopane",[]],["river",[]],["resinfopane",[]],["resriver",[]],["infopane-tab",[]]]),isPartial:t.isPartial,serviceContext:t.serviceContext,previews:t.previews};const s=new Set(["msft-dense-nine-card"]);(null==t||null===(a=t.sections)||void 0===a?void 0:a.length)>0&&"river"===t.sections[0].region&&t.sections[0].subSections.forEach(((e,n)=>{var i;s.has(e.layoutTemplate)&&(t.sections[0].subSections[n].cards=[{type:"densetab",isLocalContent:!1,galleryItemCount:0,subCards:e.cards}]),(null==e||null===(i=e.cards)||void 0===i?void 0:i.length)>0&&e.cards.forEach(((e,i)=>{var r;if((null==e?void 0:e.type)===O.PL.Infopane&&(null==e||null===(r=e.subCards)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.type)===O.PL.TabbedInfopaneCardTab){const r=function(e){const t=[];let n=[];for(let i=0;i<e.length;i++){const r=e[i];if(r.type==O.PL.TabbedInfopaneCardTab)n.push(r);else if(r.type==O.PL.TopicFeed)n.push(r);else{if(n.length>0){const e={type:O.PL.TabbedInfopaneCard,subCards:n};t.push(e),n=[]}t.push(r)}}return t}(null==e?void 0:e.subCards);t.sections[0].subSections[n].cards[i]={...e,subCards:r}}}))}));const c=this.mapperHelper.mapRegionBasedWpoResponseForSuperFeed(t,this.config.useRelativeAdPlacement,n,o,this.config.auctionRidOverride&&!(0,Q.TR)(),this.config.enableHeroWaterfall),{nextPageUrl:d,regions:l,rawAdRegionTupleMap:u,raw1sAdRegionTupleMap:p,previews:h,pageContext:g,debugId:m}=c;let f;this.responseStatus===T.F_.Success?(f={...e,nextPageUrl:d},this.noContentRetryCount=0):this.responseStatus===T.F_.Failed?(f={...e},this.noContentRetryCount=0):this.responseStatus===T.F_.NoContent&&(this.noContentCannotRetry()||(f={...e},this.noContentRetryCount++),(0,i.H)(r.a$Z,"",void 0,{...r.a$Z.pb,isFirstPage:!e.nextPageUrl,url:e.nextPageUrl,requestId:e.requestId,status:this.responseStatus,noContentRetryCount:this.noContentRetryCount})),(0,y.zp)().includes("ocid=widgetonlockscreen")&&(f.segment=null,f.pageOcid=null,f.scenario=null);return{regions:l,nextPageRequest:f,rawAdRegionTupleMap:u,raw1sAdRegionTupleMap:p,status:this.responseStatus,isStatic:this.isStatic,traceIdIndex:t?t.traceIdIndex:void 0,metadata:t?t.metadata:void 0,userType:t?t.userType:void 0,previews:h,pageContext:g,debugId:m,serviceContext:t?t.serviceContext:void 0,responseSource:t?t.responseSource:void 0}}async fetchRiverSectionFeedLayoutData(e,t,n){const o=(null===k.Al||void 0===k.Al?void 0:k.Al.IsPrerender)||this.config.disableWorker||(0,y.zp)().includes("ocid=widgetonlockscreen"),s=t===d.V.init||t===d.V.refresh;if((0,v.N)()&&s){var u;const t=ce();if(t)return t&&t&&t.sections&&t.sections.length>0?this.responseStatus=T.F_.Success:this.responseStatus=T.F_.NoContent,S.Gq.set("__isSSRWpoFeedConsumed__",!0),{...t,responseSource:T.H3.FromSSR};if(!S.Gq.has("__isSSRWpoFeedConsumed__")&&null!==(u=window.ssrLayoutState)&&void 0!==u&&u.selectedFeedDisplaySetting){const t=window.ssrLayoutState.selectedFeedDisplaySetting;["off","onscroll","headingsonly"].includes(t)||(0,i.H)(r.W1B,"",void 0,{...r.W1B.pb,requestId:e.requestId})}}if(t!==d.V.init||this.isXFeed||o||e.feedName===ne&&e.dontUseWorkerForFeed)this.checkWebWorkerUrl=!1;else{this.checkWebWorkerUrl=!1;let t="myfeed";e.feedName===ne&&(t="gaming"),e.feedName===ie&&(t="following");const i=this.config.removeTimeoutWebworker?void 0:1e3;n&&n();const r=await(0,I.ot)({id:t},i),o=r&&r.payload;if(o){const e=m.sj.MultiColumn;if(m.sj.MultiColumn===e&&r.fetched){this.checkWebWorkerUrl=!0,this.responseStatus=T.F_.Success;(0,a.Ou)().isFeedFromWW=1;const e=o.traceId;if(o.traceIdIndex=this.addOrUpdateIdxId(e,s),(0,v.N)()){const e=this.getAuthTrail();(0,f.mY)(o.traceId,o.debugId,e)}return o.tmpl&&c.M0.addOrUpdateTmplString(o.tmpl),p.n.publish(p.j.userIsSignedIn,{isSignedIn:o.isSignedIn,src:"WW-wcp"}),{...o,responseSource:T.H3.FromWW}}}}const h=(0,a.Ou)();if(Y.SI.enableEarlyMainFeedRequest&&t===d.V.init){const t=(0,v.N)()?1e4:void 0,i=await Y.SI.getEarlyWpoFeedData(t);if(h.earlyFeedCall=(0,a.UE)(),this.responseStatus=null==i?void 0:i.responseStatus,i&&i&&i.sections&&i.sections.length>0?(this.responseStatus=T.F_.Success,h.earlyFeedSuccess=(0,a.UE)()):this.responseStatus=T.F_.NoContent,Y.SI.enableEarlyMainFeedRequest=!1,this.responseStatus===T.F_.Success||!(0,v.N)())return h.ssrEarlyFeedUsed=(0,a.UE)(),h.responseSource=T.H3.FromEarlyResponse,{...i,responseSource:T.H3.FromEarlyResponse};if(!e.skipRetry){const t=await this.fetchFromWpoService(e,s,n);if(t)return h.responseSource=T.H3.FromServer,{...t,responseSource:T.H3.FromServer}}}else{const t=await this.fetchFromWpoService(e,s,n);if(t)return h.responseSource=T.H3.FromServer,{...t,responseSource:T.H3.FromServer}}if(this.shouldRetryInOtherDomain){e.domainOverride=l.hM,e.requestPathOverride=l.hZ;const t=await this.fetchFromWpoService(e,s,void 0,!0);if(t)return h.responseSource=T.H3.FromServer,{...t,responseSource:T.H3.FromServer}}return this.getCachedResponse(e)}async fetchFromWpoService(e,t,n,o=!1,d){var p,m;const P=null===k.Al||void 0===k.Al?void 0:k.Al.IsPrerender,O=(0,Q.TR)();!(0,v.N)()&&this.config.requestToOrigin&&(e.domainOverride=l.hM,e.requestPathOverride=l.hZ),this.config.enableResetServiceURL&&(e.domainOverride=l.kJ);const B=!t&&e.paginationTimeoutMs?e.paginationTimeoutMs:e.timeoutMs,N=O&&t?2e3:B,_=A.jG.ShouldUseFdheadQsp?null===(p=A.jG.CurrentRequestTargetScope)||void 0===p||null===(p=p.pageExperiments)||void 0===p?void 0:p.join(","):void 0;let U;(0,v.N)()&&(U=!(window&&window.chrome&&window.chrome.embeddedSearch),c.M0.addOrUpdateTmplProperty("privatew",`${U}`));const W=window&&`${window.innerWidth}x${window.innerHeight}`,H={...e,audienceMode:null===(m=A.jG.CurrentRequestTargetScope)||void 0===m?void 0:m.audienceMode,enableRightRailColumn:e.powerRightRailWithWpo,fdhead:_,isXFeed:this.isXFeed,nextPageUrl:e.useNextPageUrl&&e.nextPageUrl,requestType:h.xd.wpoService,timeoutMs:e.query&&e.customFeedTimeoutMs?e.customFeedTimeoutMs:N,refreshType:O?h.Rx.Bgtask:void 0,isDhp:this.isDhp(),isRetry:o,private:U,viewportSize:W,enableWpoAdPlacements:this.config.auctionRidOverride&&!O,adsTimeout:this.config.auctionRidOverride&&600};if(t&&(0,y.zp)().includes("ocid=widgetonlockscreen")&&(H.pageOcid=E.c.getQueryParameterByName("ocid",(0,y.zp)()),H.segment=E.c.getQueryParameterByName("segment",(0,y.zp)()),H.scenario=E.c.getQueryParameterByName("scenario",(0,y.zp)()),H.timeoutMs=this.config.heroTimeoutMs||1500,H.scenario&&(0,v.N)()&&"Weather"===H.segment)){const e=this.updateQSParam(window.location.href,"scenario");window.history.replaceState({},"",e)}const $=E.c.getQueryParameterByName("ssrFeedTimeOut",window.location.href);!(0,v.N)()&&$&&(H.timeoutMs=parseInt($));const q=await g.q.requestInit(H),G=await g.q.buildServiceRequestURL(H);C.$D.addTelemetryTracingQueryParam(G);const V=decodeURIComponent(G.href);this.requestQueryParams=new M.h(G.search),e.serviceUrl=V;if("1"===E.c.getQueryParameterByName("logwporeq",window.location.href)){const e={};new Headers(null==q?void 0:q.headers).forEach(((t,n)=>{"Cookie"!==n&&(e[n]=t)})),(0,i.H)(r.vif,"",void 0,{...r.vif.pb,headers:JSON.stringify(e),url:V,credentials:q.credentials,referrer:q.referrer})}const j=(0,a.Ou)();let K;if(j.WpoCallStart=Math.round((0,a.UE)()),(0,v.N)()||(j.wpoSSRCallStart=j.WpoCallStart),G.search=this.requestQueryParams.toString(),this.checkWebWorkerUrl){const e=(0,I.Fr)("WebWorkerInitFeedUrl");e&&e.payload&&e.payload!==G.href&&(0,i.H)(r.MUC,"Wpo feed fetch url does not match web worker")}const Y=e.useNextPageUrl&&e.nextPageUrl,X=!Y;let ae,se,ce,de;try{let l;l=(0,v.N)()?(null==e?void 0:e.overrideCSRTimeoutInMs)||1e4:(null==e?void 0:e.overrideSSRTimeoutInMs)||800,n&&n(),de=(()=>{let e=0;const t=X?r.TRT:r.TzH;return setInterval((()=>{e+=1,(0,i.H)(t,`Request didn't finish in ${5e3*e}ms`,void 0,{...t.pb,url:V,isFirstPage:X,activityId:A.jG.ActivityId,isPrerender:O})}),5e3)})();"header"===S.Gq.get("oneSvcUniTunMode")&&q&&q.headers&&(q.headers[x.Yu.uniFeatTun]=await C.$D.getUniFeatTunHeader());const p=(0,w.w)((()=>(0,v.N)()?(0,w.O)(V,q,l,e.skipRetry):(0,L.Sm)(V,l,q,void 0,void 0,!0)),"WpoCardProvider.fetch",l,e.skipRetry);d&&setTimeout((()=>d.set()),0);const h=await p;let g,m,y,b,k,I,M;if(de&&(clearInterval(de),de=null),h){if("1"===E.c.getQueryParameterByName("logwpores",window.location.href)){var le;const e={};null===(le=h.headers)||void 0===le||le.forEach(((t,n)=>e[n]=t)),(0,i.H)(r.v5s,"",void 0,{...r.v5s.pb,headers:JSON.stringify(e),reqHeaders:JSON.stringify(q.headers),ok:h.ok,status:h.statusText,body:h.body})}const{ok:n,status:o,statusText:a,headers:s}=h;if(ae=s&&s.get("ddd-debugid"),se=s&&s.get("x-ceto-ref"),ce=s&&s.get("x-msedge-ref"),S.Gq.set("OneServiceResponseDebugId",ae),e.feedName===ie){const n=new URLSearchParams(G.search),a="activityId",s=n.get(a)||"";if(s&&s!=A.jG.ActivityId&&(0,i.H)(r.jQb,"ActivityId mismatched",void 0,{...r.jQb.pb,clientActivityId:A.jG.ActivityId,serviceSideActivityId:s,debugId:ae}),(204===o||404===o)&&X&&t&&!e.feedId){var ue;const t="skype-desktop-following"===e.ocid?D:F;return 204===o&&null!=t&&null!==(ue=t.sections)&&void 0!==ue&&null!==(ue=ue[0].subSections)&&void 0!==ue&&null!==(ue=ue[0].cards)&&void 0!==ue&&ue[0]&&(t.sections[0].subSections[0].cards[0].isShowSelectMoreMessage=!0),t}}n?e.disableContent||204!==o||(g=X?r.bri:r.e88,b=!1):(g=e.disableContent?r.k28:X?r.vas:r.azB,"outlookchannels"===e.feedName&&500===o&&(g=r.SPE),m=o,y=a,b=!0)}else g=e.disableContent?r.k28:X?r.vas:r.azB,b=!0;if(g){var pe;const e=(0,J.Z)(q,"headers.Authorization"),t=null==h||null===(pe=h.headers)||void 0===pe?void 0:pe.get("ddd-auth-features"),n=null==t?void 0:t.includes("IsBot:1"),i={...g,pb:{...g.pb,url:decodeURIComponent(G.href),requestHeaders:JSON.stringify(e&&e.headers),status:m,statusText:y,isFirstPage:X,activityId:A.jG.ActivityId,isBot:n,isInitializedAsPrerenderPage:P,isPrerender:O,isRetriedRequest:o,debugId:ae}};if(this.sendAppErrorWithSeverityOverride(g,i),b)return void(this.responseStatus=T.F_.Failed);if(!(0,v.N)()&&g===r.bri)return void(this.responseStatus=T.F_.NoContent)}const B=h.headers&&h.headers.get("X-Statics-Fallback");if(h.headers){if(B){const e=O?r.V_e:r.vCG;(0,i.H)(e,"Fell back to static content on the feeds call",void 0,{...r.vCG.pb,url:decodeURIComponent(G.href),isFirstPage:X,activityId:A.jG.ActivityId,isPrerender:O,isInitializedAsPrerenderPage:P,debugId:ae,isRetriedRequest:o}),this.isStatic=!0}if(e.feedName!==re&&e.feedName!==oe){c.M0.addOrUpdateCustomProperty("debugId",ae);const e=h.headers.get(x.rD.traceId);if(k=this.addOrUpdateIdxId(e,t),(0,z.Dz)(ae,!1),(0,v.N)()){const t=this.getAuthTrail();(0,f.mY)(e,ae,t)}}I=h.headers.get(x.rD.userType)}if(!Y){const e=j.WpoCallStart,t=j.WpoResponseBack=Math.round((0,a.UE)());j["FeedRequest.FG"]=t-e,(0,s.QP)({name:"FeedRequest.FG",startTime:e,endTime:t})}if(![r.bri,r.e88,r.RSD].includes(g)){var he,ge;const n=(0,v.N)()&&(0,a.UE)();if(K=await h.json(),K&&K.serviceContext&&K.serviceContext.tmpl&&(M=K.serviceContext.tmpl,c.M0.addOrUpdateTmplString(M)),n&&j&&(j.FeedResponseJsonReadTime=Math.round((0,a.UE)()-n)),null!==(he=K)&&void 0!==he&&he.swCacheEnabled){var me;(0,i.H)(r.Y6E,"Service Worker Cached Data Triggered",void 0,{...r.Y6E.pb,url:decodeURIComponent(G.href),isFirstPage:X,activityId:A.jG.ActivityId,isPrerender:O,isInitializedAsPrerenderPage:P,debugId:ae,isRetriedRequest:o,cacheAgeSeconds:K.cacheAgeSeconds});let e=null,t="";switch(null===(me=K)||void 0===me?void 0:me.cacheTriggeredReason){case r.RDJ.id:e=r.RDJ,t="Service Worker Triggered due to fetch error: "+K.cacheTriggeredErrorMessage;break;case r.Nyv.id:e=r.Nyv,t="Service Worker Triggered due to wpo service error";break;case r.Vm4.id:e=r.Vm4,t="Service Worker Triggered due to Status 204 no content";break;case r.npe.id:e=r.npe,t="Service Worker Triggered due to static content loaded";break;case r.Q0t.id:e=r.Q0t,t="Service Worker Triggered due to wpo service returns empty section";break;case r.dAd.id:e=r.dAd,t="Service Worker Triggered due to static fallback returns empty section";break;case r.zo9.id:e=r.zo9,t="Service Worker Triggered due to network timeout"}e&&(0,i.H)(e,t,void 0,{...e.pb,url:decodeURIComponent(G.href),isFirstPage:X,activityId:A.jG.ActivityId,isPrerender:O,isInitializedAsPrerenderPage:P,debugId:ae,isRetriedRequest:o,cacheAgeSeconds:K.cacheAgeSeconds})}if(K.traceIdIndex=k,K.userType=I,K.debugId=ae,K.cetoRef=se,K.msEdgeRef=ce,K.dddTmpl=M,e.feedName===ie&&200===h.status&&X&&t){const t="skype-desktop-following"===e.ocid?D:F;if(!(K.sections&&K.sections.some((e=>"river"===e.region)))&&K.sections&&t&&t.sections&&t.sections.length){const e=K.sections.filter((e=>"overlay"===e.region));e&&e.length&&K.sections.push(t.sections[0])}}if(e.feedName===ne&&200===h.status&&X&&t&&(0,v.N)()&&null!==(ge=K.serviceContext)&&void 0!==ge&&ge.tmpl&&!(0,R.$o)().getObject(u.d.GamingFeedEngagement))try{const e=Math.floor((new Date).getTime()/1e3),t=K.serviceContext.tmpl.split(";"),n={};for(let e=0;e<t.length;e++)t[e].includes("gamingFeedEngagementCount30D")&&t[e].split(",").forEach((e=>{const t=e.split(":"),[i,r]=t,o=r?Number.parseInt(r,10):null;"gamingFeedEngagementSum7D"!==i&&"gamingFeedEngagementCount7D"!==i&&"gamingFeedEngagementSum30D"!==i&&"gamingFeedEngagementCount30D"!==i||null===o||(n[i]=o)}));n.lastUpdated=e;const i=5;Object.keys(n).length===i&&(0,R.$o)().setObject(u.d.GamingFeedEngagement,n)}catch(e){}if(!(e.feedName===ie||e.feedName===re||e.feedName===oe||e.disableContent||this.isPartialResponse(K)||K.sections&&K.sections.length>0)){const e=B?r.hqX:r.Fh_;(0,i.H)(e,"Empty Section on the feed call",void 0,{...e.pb,url:decodeURIComponent(G.href),isFirstPage:X,activityId:A.jG.ActivityId,isPrerender:O,isInitializedAsPrerenderPage:P,debugId:ae,isRetriedRequest:o})}}}catch(t){de&&(clearInterval(de),de=null);const n=["Service Request Timed out","Fetch for https://"],i=["TypeError: Failed to fetch"];let a;const s=(0,b.fK)();if(this.shouldRetryInOtherDomain=X&&!e.domainOverride&&!s&&!(!(0,v.N)()&&this.config.requestToOrigin),n.some((e=>{var n;return null==t||null===(n=t.message)||void 0===n?void 0:n.includes(e)}))){const e=O?r.LLm:r.KEP;a=X?e:r.VPR,a===r.KEP&&this.shouldRetryInOtherDomain&&!o&&(a=r.YLV)}else a=i.some((e=>{var n;return null==t||null===(n=t.message)||void 0===n?void 0:n.includes(e)}))?this.shouldRetryInOtherDomain?r.iB1:r.ck_:this.shouldRetryInOtherDomain?r.CDI:r.QJe;const c=(0,J.Z)(q,"headers.Authorization"),d={...a,message:"Error while fetching WpoService response",pb:{...a.pb,customMessage:`Error: ${t}`,url:decodeURIComponent(G.href),requestHeaders:JSON.stringify(c.headers),isFirstPage:X,activityId:A.jG.ActivityId,isPrerender:O,isInitializedAsPrerenderPage:P,domainOverride:e.domainOverride??"",isRetry:this.shouldRetryInOtherDomain,debugId:ae,isRetriedRequest:o,isRetryBackupDomainFlight:s}};return this.sendAppErrorWithSeverityOverride(a,d),void(this.responseStatus=T.F_.Failed)}if(K&&K&&K.sections&&K.sections.length>0||this.isPartialResponse(K))this.responseStatus=T.F_.Success,!this.isStatic&&t&&"default"===e.feedName&&(0,y.zp)().includes("ocid=widgetonlockscreen")&&((e,t)=>{var n;const o=(E.c.getQueryParameterByName("segment",(0,y.zp)())||"").toLowerCase(),a=e.sections.find((e=>"hero"===e.region));if(a&&null!==(n=a.subSections)&&void 0!==n&&n.length)try{var s,c;const t=a.subSections[0].layoutTemplate,n=te.get(t),d=n.supportedSegments.includes(o),l=n.cardCount===(null===(s=a.subSections[0].cards)||void 0===s?void 0:s.length),u=ee.get(o);let p=!0;n.cardCount,null===(c=a.subSections[0].cards)||void 0===c||c.map((e=>{u.has(e.type)||(p=!1)})),d&&l&&p||(0,i.H)(r.jty,"Invalid Hero Response",void 0,{...r.jty.pb,templateName:t,cardsInResponse:JSON.stringify(a.subSections[0].cards.map((e=>e.type))),debugId:e.debugId,isValidTemplateForThisSegment:d,isCorrectCardCount:l,isValidCardTypes:p})}catch(t){(0,i.H)(r.jty,"Invalid Hero Response",t.message,{...r.jty.pb,debugId:e.debugId})}else{const n=e.sections.find((e=>"river"===e.region))?"Missing hero section in WPO response.":"Missing hero and river section in WPO response.",r=Z(o);(0,i.H)(r,"Missing Hero Region",`${n} Debug id: ${e.debugId}`,{...r.pb,requestUrl:t,statusCode:e.statusCode})}})(K,V);else if(this.responseStatus=T.F_.NoContent,!(0,v.N)())return;return"1"===E.c.getQueryParameterByName("testHero",window.location.href)&&K.sections.forEach((e=>{var t;"hero"===e.region&&null!==(t=e.subSections)&&void 0!==t&&t.length&&(e.subSections[0].dataTemplate="msft-full-wide-one-card-five-col",e.subSections[0].layoutTemplate="msft-full-wide-one-card-five-col")})),!this.config.auctionRidOverride||(0,Q.TR)()||(0,v.N)()||this.mapperHelper.backfill1SAdWithNews(K),K}async getCachedResponse(e){if((e.skipRetry||e.enableCachedResponseFallback)&&(0,v.N)()&&window.caches&&e.serviceUrl&&e.serviceWorkerCachePrefix)try{const n=(await caches.keys()).find((t=>t.startsWith(e.serviceWorkerCachePrefix)));if(!n)return;const o=await caches.open(n);if(!o)return;const a=this.normalizeUrl(e.serviceUrl),s=await o.keys()||[],c=s.filter((e=>e.url&&this.normalizeUrl(e.url)===a));for(const e of c)try{const n=await o.match(e.url),a=await n.json();if(a){var t;const e=Date.parse(null===(t=n.headers)||void 0===t?void 0:t.get("date")),o=isNaN(e)?"":(Date.now()-e)/1e3;return(0,i.H)(r.Smg,"",void 0,{...r.Smg.pb,cacheAgeSeconds:o}),{...a,responseSource:T.H3.FromCache}}}catch(e){}(0,i.H)(r.Rgo,"",void 0,{...r.Rgo.pb,numCachedRequests:s.length,numMatches:c.length,serviceUrl:e.serviceUrl})}catch(t){(0,i.H)(r.Rgo,"An error occurred while retrieving a cached response. "+t.message,void 0,{...r.Rgo.pb,isFirstPage:!e.nextPageUrl,url:e.serviceUrl,requestId:e.requestId,stack:t.stack})}}normalizeUrl(e){try{const t=new URL(e);ae.forEach((e=>t.searchParams.delete(e)));return decodeURIComponent(t.toString()).replace("/serviceak/","/service/").replace("api.msn.com/","assets.msn.com/").replace("api.msn.cn/","assets.msn.cn/")}catch(e){return""}}clearCache(){this.mapperHelper.resetCardCountForSuperFeed()}initializeRequest(){const{initialRequest:e}=this.config;null!==e&&(0,K.isNullOrUndefined)(e.useNextPageUrl)&&(e.useNextPageUrl=!0)}addOrUpdateIdxId(e,t){return c.M0.addOrUpdateIdxId(e,t)}getResponseStatus(){return this.responseStatus}_requestQueryParams(){return this.requestQueryParams}isDhp(){var e;return(null===(e=window.location.search)||void 0===e?void 0:e.indexOf("startpage=1"))>-1}noContentCannotRetry(){return this.noContentRetryCount>=this.maxContentRetryCount}}},32400:function(e,t,n){"use strict";var i,r,o;n.d(t,{F_:function(){return i},H3:function(){return r}}),function(e){e[e.InvalidRequest=0]="InvalidRequest",e[e.Success=1]="Success",e[e.NoContent=2]="NoContent",e[e.Failed=3]="Failed"}(i||(i={})),function(e){e[e.FromSSR=0]="FromSSR",e[e.FromCache=1]="FromCache",e[e.FromWW=2]="FromWW",e[e.FromEarlyResponse=3]="FromEarlyResponse",e[e.FromServer=4]="FromServer"}(r||(r={})),function(e){e.river="river",e.rightRail="rightrail",e.Rail="Rail"}(o||(o={}))},50136:function(e,t,n){"use strict";n.d(t,{N:function(){return a},Qu:function(){return s},uq:function(){return i}});var i,r=n(55524),o=n(37477);!function(e){e[e.IsInfopaneDenseCard=0]="IsInfopaneDenseCard",e[e.IsRiverDenseCard=1]="IsRiverDenseCard",e[e.NotDenseCard=2]="NotDenseCard"}(i||(i={}));const a=(0,r.TG)({liked:"like",unliked:"unlike",saved:"save"}),s=(0,r.TG)([o.PL.AutosCarousel,o.PL.AutosEntityList,o.PL.AutosGarageCard,o.PL.BeaconProviderUpsell,o.PL.BingDailyQuizCard,o.PL.BingHealthCovid19StatsCard,o.PL.BingHealthFitnessCard,o.PL.BingThisOrThatCard,o.PL.BingVideoCarousel,o.PL.CasualGamesCarousel,o.PL.ChannelCarousel,o.PL.ChannelFilterCard,o.PL.CommunityCard,o.PL.CommuteCard,o.PL.CompanyNewsCard,o.PL.DailyTriviaCard,o.PL.DigestCard,o.PL.DonationNpoCard,o.PL.DynamicFilteredChannel,o.PL.EdgeShoppingCard,o.PL.Elections,o.PL.EntertainmentPremierCard,o.PL.EsportsCasualGames,o.PL.EsportsLiveStream,o.PL.EsportsTournament,o.PL.EventSDCardElectionMIT1,o.PL.EventSDCardElectionMIT2,o.PL.EventSDCardElectionMIT3,o.PL.EventSDCardOscarsPrm,o.PL.EventSDCardShopping,o.PL.EventSDCardSportsMIT1,o.PL.EventSDCardSportsMIT2,o.PL.EventSDCardSportsMIT3,o.PL.EventSDCardWorldCup,o.PL.EventSDCardWorldCup2,o.PL.FinanceHeroMarket,o.PL.FinanceHeroMarketChart,o.PL.FinanceHeroNews,o.PL.FinanceHeroMovers,o.PL.FinanceHerowlsummary,o.PL.FinanceHeroSuggested,o.PL.FinanceHeroWatchlistIdeas,o.PL.FinanceHeroUpcomingEarnings,o.PL.FinanceHeroCurrencies,o.PL.FinanceHeroCrypto,o.PL.GamingClip,o.PL.GamingClipsCarousel,o.PL.GamingCompete,o.PL.GamingGamerModeUpsellCard,o.PL.GamingHighlight,o.PL.GamingHighlightClipsCarousel,o.PL.GamingHighlightsCarousel,o.PL.GamingInterestGroup,o.PL.GamingLiveStream,o.PL.GamingLiveStreamCarousel,o.PL.GamingMatch,o.PL.GamingRecentlyPlayed,o.PL.GamingRecommendedGames,o.PL.GamingReddit,o.PL.GamingRewards,o.PL.GamingTournament,o.PL.GamingUpcomingGames,o.PL.GamingVideoCarousel,o.PL.GamingVod,o.PL.GroceryCouponSdCard,o.PL.HealthTipCard,o.PL.Horoscope,o.PL.HotListCard,o.PL.IndustryNewsCard,o.PL.Inspiration,o.PL.InterestManagementCard,o.PL.LeadGenCard,o.PL.LearningNasaCard,o.PL.LearningTriviaCard,o.PL.LinkedInCard,o.PL.LocalNewsFeed,o.PL.Lottery,o.PL.MangaCard,o.PL.Marketplace,o.PL.MarketplaceEvent,o.PL.MicrosoftFeedCard,o.PL.MobileRewardsCard,o.PL.MobileShoppingCard,o.PL.MobileShoppingCard2,o.PL.MobileShoppingCard3,o.PL.MobileShoppingCard4,o.PL.MoneyCrypto,o.PL.MoneyInfo,o.PL.MoneyMarketBrief,o.PL.MoneyPreWL,o.PL.MoneyTopicStripe,o.PL.MyBriefRiverCard,o.PL.OnThisDay,o.PL.PrayerTimesCard,o.PL.PrismCarouselCard,o.PL.Qna,o.PL.RealEstateCard,o.PL.RealEstateCarousel,o.PL.Recipes,o.PL.RecommendedInterests,o.PL.RecommendedSearchCarousel,o.PL.Rewards,o.PL.RewardsDailyCheckinCard,o.PL.RewardsDailySet,o.PL.RichCalendarCard,o.PL.DailyGreetingCard,o.PL.SectionHeader,o.PL.ShoppingProng2c,o.PL.ShoppingBWMCard,o.PL.ShoppingBWMCarousel,o.PL.ShoppingCard,o.PL.ShoppingCarousel,o.PL.ShoppingCarousel2,o.PL.ShoppingRiver,o.PL.SportsHeroFre,o.PL.SportsHeroLeagueTodaysEvents,o.PL.SportsHeroMatch1SeasonStats,o.PL.SportsHeroMatch1Stats,o.PL.SportsHeroMatch2SeasonStats,o.PL.SportsHeroMatch2Stats,o.PL.SportsHeroMatch3SeasonStats,o.PL.SportsHeroMatch3Stats,o.PL.SportsHeroMatchStatistics,o.PL.SportsHeroNews,o.PL.SportsHeroOneVsManyEventResult,o.PL.SportsHeroOneVsOneEventResult,o.PL.SportsHeroSeasonStatistics,o.PL.SportsHeroStandingsRankings,o.PL.SportsHeroTeamStandings,o.PL.SportsHeroTeamStandingWithEvents,o.PL.SportsHeroTeamStandingWithMedals,o.PL.SportsHeroTeamVsTeam,o.PL.SportsHeroTeamVsTeamEventResult,o.PL.SportsHeroVideo,o.PL.SportsMatch,o.PL.SportsOlympics,o.PL.SportsTopicStripe,o.PL.StockQuote,o.PL.SuperListCard,o.PL.TabbedInfopaneCard,o.PL.TopStories,o.PL.TopicFeed,o.PL.TrafficDelays,o.PL.TrafficIncidents,o.PL.TrafficCameras,o.PL.TrafficCamerasWithSummary,o.PL.TravelTimesWithSummary,o.PL.TrafficMap,o.PL.TrafficNews,o.PL.TrafficInfo,o.PL.Transit,o.PL.TrafficTransit,o.PL.TrafficSummary,o.PL.TravelDestinationCard,o.PL.TravelDestinationCarouselCard,o.PL.TravelInspirationCard,o.PL.Trending,o.PL.TrendingInTenMinutes,o.PL.TrendingSearchCard,o.PL.TrendingTopics,o.PL.Upsell,o.PL.UserInterestNTPProvider,o.PL.UserInterestProvider,o.PL.UserInterestTopic,o.PL.UserInterestTopicAndProvider,o.PL.VideoShoppingCard,o.PL.VideoShoppingCarouselCard,o.PL.WatchVideoCard,o.PL.WeatherSummary,o.PL.WeatherHero,o.PL.WidgetsNotificationsCard,o.PL.quizcard])},59887:function(e,t,n){"use strict";function i(e,t){const{audienceMode:n="",locale:i={},pageType:r=""}=t||{},o=i.content??i,{language:a,market:s}=o;return`wpo_data_ ${n}_${a}_${s}_${r}_${e}`}n.d(t,{_:function(){return i}})},53629:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var i=n(88672),r=n(59887),o=n(21789),a=n(54297);const s=new class{constructor(){this.localStorage=new Map,this.wpoTreatmentTypeMap=new Map,this.isLoaded=new Map}getWpoTreatments(e){const t=(0,r._)(o.jG.AppType,o.jG.CurrentRequestTargetScope);if(!this.isLoaded.get(t)||e){this.wpoTreatmentTypeMap.set(t,new Map);const e=this.wpoTreatmentTypeMap.get(t);for(const t in i._h)if(isNaN(Number(t))){const n=i._h[t];null==e||e.set(n,[])}const{treatments:r}=(0,a.$o)().getObject(t)||{};if(this.localStorage.set(t,r||[]),r)for(let t=0;t<r.length;t++){var n;const i=null===(n=r[t])||void 0===n?void 0:n.type;var s;if(i)null==e||null===(s=e.get(i))||void 0===s||s.push(r[t])}this.isLoaded.set(t,!0)}return this.localStorage.get(t)}getWpoTreatmentsWithType(e,t){var n;const i=(0,r._)(o.jG.AppType,o.jG.CurrentRequestTargetScope);return this.isLoaded.get(i)&&!t||this.getWpoTreatments(t),null===(n=this.wpoTreatmentTypeMap.get(i))||void 0===n?void 0:n.get(e)}}},88672:function(e,t,n){"use strict";var i;n.d(t,{_h:function(){return i}}),function(e){e.eventGleam="eventGleam",e.topSites="topsites",e.layoutPromotion="layoutPromotion",e.topSitesPromotion="topsitesPromotion",e.topsitesCollapse="topsitesCollapse",e.recommendedsitesCollapse="recommendedsitesCollapse",e.bellCoachMark="bellCoachMark",e.backupRegionStatus="backupRegionStatus",e.searchBoxCollapse="searchBoxCollapse",e.followedTopics="followedTopics",e.feedContextualFeedback="feedContextualFeedback",e.animationControl="animationControl",e.pinProngCoachMark="pinProngCoachMark",e.shorelineTrigger="shorelineTrigger",e.topNavPivotsPromotion="pivotNav",e.topicExplore="topicExplore",e.uxMessage="uxMessage"}(i||(i={}))},59044:function(e,t,n){"use strict";n.d(t,{u:function(){return p}});var i=n(33940),r=n(7476),o=n(23549),a=n(55524),s=n(291),c=n(99452),d=n(45870),l=n(5674);class u{constructor(){this.wpoNotificationPreviewData=new d.o,this.notificationMiniCardDismissed=!1,this.dismissNotificationMiniCard=e=>{this.notificationMiniCardDismissed=!0,null===o.M0||void 0===o.M0||o.M0.addOrUpdateTmplProperty("NotificationMiniCardDismissed",e)}}static getInstance(){return a.Gq.get("__WpoPreview__",(()=>new u))}storeWpoNotificationPreviewData(e){if(!e)return;if(this.wpoNotificationPreviewData.wasSet())return;const t={};try{for(const i of(null===(n=e.previews)||void 0===n?void 0:n.simplePreviews)||[]){var n;for(const e of i.cards)for(const n of e.elements)switch(n.id){case"Icon":t.icon=n.url;break;case"Title":t.title=n.text;break;case"Tooltip":t.tooltip=n.text;break;case"Summary":t.summary=n.text;break;case"Detail":t.detail=n.text}i.previewType&&(t.previewType=i.previewType),i.url&&(t.url=i.url)}const a=Object.keys(t).length;if(0===a)return;if(a>0&&7!==a){var i;const n="Invalid notification preview data.",o=`Parsed data: ${JSON.stringify(t)}. ReceivedPreviewData: ${JSON.stringify(null===(i=e.previews)||void 0===i?void 0:i.simplePreviews).substring(0,32768)}.`;return void this.logAppError(r.clq,n,o)}this.wpoNotificationPreviewData.set(t),null===o.M0||void 0===o.M0||o.M0.addOrUpdateTmplProperty("previewDataReady","1")}catch(t){var a;const n=`Failed to parse notification preview data.Error:${t}`,i=`ReceivedPreviewData: ${JSON.stringify(null===(a=e.previews)||void 0===a?void 0:a.simplePreviews).substring(0,32768)}`;this.logAppError(r.l0m,n,i)}}subscribe(e){this.wpoNotificationPreviewData.getResultAsync().then(e)}logAppError(e,t,n=""){o.M0.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:n,debugId:(0,l.N)()}})}}(0,i.gn)([c.LO],u.prototype,"notificationMiniCardDismissed",void 0);const p=(0,s.h)(u)},19547:function(e,t,n){"use strict";n.d(t,{C5:function(){return S},SI:function(){return b}});var i=n(7476),r=n(10754),o=n(88826),a=n(88672),s=n(59967),c=n(54297),d=n(74161),l=n(36867),u=n(87172),p=n(59887),h=n(23549),g=n(55524),m=n(291),f=n(45870),v=n(67044),y=n(85205);const S={Request:"Wpo.Treatments.Request",Response:"Wpo.Treatments.Response",StoreInit:"Wpo.Treatments.StoreInit",Parsed:"Wpo.Treatments.Parsed",Stored:"Wpo.Treatments.Stored"},C="ssr-feed-data";class w{constructor(){this.wpoOptimizationsReady=new Promise((e=>this.wpoOptimizationsResolver=e)),this.wpoFeedDataCache=new s.v("WpoFeedDataCache"),this.enableEarlyMainFeedRequest=!1,this.earlyFeedResponsePromiseV2=new f.o,this.usePromiseForEarlyFeed=!1}static getInstance(){return g.Gq.get("__WpoServiceClient__",(()=>new w))}onWPOFeedReady(e){this.wpoFeedDataCache.subscribe(C,e)}setSSRInitialFeedResponse(e){this.wpoFeedDataCache.set(C,e)}resetFeedDataCache(){this.wpoFeedDataCache.clear()}addWpoOptimizationDataToLocalStorage(e,t,n,o=!1,s=!1,g,m){const f=(0,p._)(t,n);if(this.optimizationDataReceived)return;if(setTimeout((()=>{window.dispatchEvent(new CustomEvent("wpoOptimizationAdded"))}),0),!e||!e.optimizationItems)return h.M0.addOrUpdateTmplProperty("nopct","1"),void(g&&"wpo"===g.source&&this.removeWPOUserChoiceFromPSL());if(!e.optimizationItems.length)return this.logAppError(i.lGs,"WPO Optimization data is empty in feed response ",`isFocusedMode:${o}`),(0,c.$o)().removeItem(f),void(g&&"wpo"===g.source&&this.removeWPOUserChoiceFromPSL());const C=(0,r.Ou)();C[S.StoreInit]=Math.round(performance.now());try{const t=this.parseOptimizationItems(e.optimizationItems),n={treatments:t};C[S.Parsed]=Math.round(performance.now()),(0,c.$o)().setObject(f,n);const i=t.filter((e=>(null==e?void 0:e.type)===a._h.eventGleam));h.M0.addOrUpdateTmplProperty("recEvt",null!=i&&i.length?"1":"0"),C[S.Stored]=Math.round(performance.now()),this.optimizationDataReceived=!0;const r=t.filter((e=>{var t;return((null==e?void 0:e.type)===a._h.topSites||(null==e?void 0:e.type)===a._h.topsitesCollapse)&&(null==e||null===(t=e.properties)||void 0===t?void 0:t.topSitesCollapsibleControlConfig)}));var w,b;if(window.isSSREnabled&&null==g)if(null!=r&&r.length&&null!==(w=r[0])&&void 0!==w&&null!==(w=w.properties)&&void 0!==w&&null!==(w=w.topSitesCollapsibleControlConfig)&&void 0!==w&&w.collapsibleControlIsDefaultCollapsed){const e={setting:d.nc.tscollapsed,source:"wpo",timestamp:(new Date).getTime(),value:d.QO.WPO_BEFORE_CLOSE};l.L.savePreferenceSetting(d.nc.tscollapsed,e)}if("wpo"===(null==g?void 0:g.source)&&0==(null==r?void 0:r.length)&&this.removeWPOUserChoiceFromPSL(),m&&window.isSSREnabled&&(null==g?void 0:g.value)===d.QO.WPO_CLOSED)null!=r&&null!==(b=r[0])&&void 0!==b&&null!==(b=b.properties)&&void 0!==b&&null!==(b=b.topSitesCollapsibleControlConfig)&&void 0!==b&&b.expandForAllLayout&&(l.L.savePreferenceSetting(d.nc.tscollapsed,{setting:d.nc.tscollapsed,source:"addWpoOptimizationDataToLocalStorage",timestamp:(new Date).getTime(),value:d.QO.WPO_BEFORE_OPEN}),window.addEventListener("beforeunload",(()=>{(0,v.K0)(y.z.ChromiumPageSettings).onlyUpdateQuickLinksDisplaySetting(1)}),{once:!0}));if(s){var T;const e=t.filter((e=>{var t;return(null==e?void 0:e.type)===a._h.layoutPromotion&&"PageContentLayout"===(null==e||null===(t=e.properties)||void 0===t?void 0:t.layoutType)}));if(null==e||!e.length||null===(T=e[0])||void 0===T||!T.properties)return void u.U.savePreferenceSetting(d.Xm.layoutPromotion,null);h.M0.addOrUpdateTmplProperty("layoutpromoreceived","1"),u.U.savePreferenceSetting(d.Xm.layoutPromotion,e[0].properties)}}catch(t){const n=`Failed to store wpo response to LS.Error:${t}`,r=`WpoServiceResponse: ${JSON.stringify(e)}. key: ${f}`;this.logAppError(i.pOl,n,r)}}setShouldUsePromiseForEarlyFeed(e){this.usePromiseForEarlyFeed||(this.usePromiseForEarlyFeed=e)}storeEarlyWpoFeedData(e){this.usePromiseForEarlyFeed?this.earlyFeedResponsePromiseV2.set(e):this.wpoFeedDataCache.set("feed-ready",e)}getEarlyWpoFeedData(e){if(this.usePromiseForEarlyFeed){let t;const n=new Promise((n=>{t=setTimeout((()=>{const t=`Getting early main feed v2 timeout in ${e}ms`;this.logAppError(i.$HJ,t),n(void 0)}),e||1e4)}));return Promise.race([this.earlyFeedResponsePromiseV2.getResultAsync(),n]).finally((()=>clearTimeout(t)))}return new Promise((t=>{let n;const r=e=>{n&&clearTimeout(n),this.wpoFeedDataCache.unsubscribe("feed-ready",r),this.wpoFeedDataCache.delete("feed-ready"),t(e)};e&&(n=setTimeout((()=>{this.wpoFeedDataCache.unsubscribe("feed-ready",r),this.wpoFeedDataCache.delete("feed-ready");const n=`Getting early main feed timeout in ${e}ms`;this.logAppError(i.$HJ,n),t(void 0)}),e)),this.wpoFeedDataCache.subscribe("feed-ready",r)}))}storeWpoOptimizationData(e){if(e)if(this.wpoOptimizations&&this.wpoOptimizations.length>0)this.wpoOptimizationsResolver();else{try{this.wpoOptimizations=this.parseOptimizationItems(e.pageContext&&e.pageContext.optimizationItems)}catch(t){const n=`Failed to store wpo response to Memory.Error:${t}`,r=`WpoServiceResponse: ${JSON.stringify(e)}.`;this.logAppError(i.yPw,n,r)}this.wpoOptimizationsResolver()}}isShorelineTriggerEnabled(e){var t;const n=this.parseOptimizationItems(e.pageContext&&e.pageContext.optimizationItems).filter((e=>(null==e?void 0:e.type)===a._h.shorelineTrigger)),i=!(null==n||null===(t=n[0])||void 0===t||null===(t=t.properties)||void 0===t||!t.trigger);return i&&h.M0.addOrUpdateTmplProperty("shoreline_trigger","1"),i}getWpoOptimizationData(e){if(e){let t;const n=new Promise((n=>{t=setTimeout((()=>{h.M0.addOrUpdateTmplProperty("wpoPromoTimeout",e.toString()),n()}),e)}));return Promise.race([n,this.wpoOptimizationsReady]).then((()=>(clearTimeout(t),this.wpoOptimizations)))}return this.wpoOptimizationsReady.then((()=>this.wpoOptimizations))}tryToGetWpoOptimizationData(){return this.wpoOptimizations}logAppError(e,t,n=""){h.M0.sendAppErrorEvent({...e,message:t,pb:{...e.pb,customMessage:n}})}parseOptimizationItems(e){if(!e||!e.length)return[];return e.map(((e,t)=>{if(e.type&&e.type.trim().length)if(Object.values(a._h).includes(e.type)||this.logAppError(i.OE6,`Unknown Type in WPO optimization items. Type: ${e.type}, Index: ${t}`),e.data){if(e.type&&e.data){let n;try{if(n=JSON.parse(e.data),!Object.entries(n).length)return void this.logAppError(i.OnJ,`Parsed WPO Optimization item but it is empty. Type: ${e.type}, Index: ${t}`)}catch(n){return void(0,o.OO)(n,i.X1V,`${n}. Type: ${e.type}, Index: ${t}`)}if(n)return{type:e.type,properties:n}}}else this.logAppError(i.uSS,`Unable to find data in WPO optimization item. Type: ${e.type}, Index: ${t}`);else this.logAppError(i._wC,`Type not found in WPO optimization items. Index: ${t}`)})).filter(Boolean)}isOptimizationDataReceived(){return this.optimizationDataReceived}removeWPOUserChoiceFromPSL(){l.L.deleteKeyValueFromPSL(d.nc.tscollapsed)}}const b=(0,m.h)(w)},93624:function(){},88642:function(){},3204:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var i=n(33940),r=n(99452),o=n(7476),a=n(69425);class s{constructor(e,t){this.props=e,this.cb=t}connectedCallback(e){const{source:t}=e;this.props.forEach((e=>{r.y$.getNotifier(t).subscribe(this,e)})),this.handleChange(t)}disconnectedCallback(e){const{source:t}=e;this.props.forEach((e=>{r.y$.getNotifier(t).unsubscribe(this,e)})),t.$fastController.removeStyles(this.styles)}handleChange(e){this.styles=this.cb(e),e.$fastController.addStyles(this.styles)}}(0,i.gn)([(0,a.Et)(o.a4J,"CssInjectionBehavior.Bind")],s.prototype,"connectedCallback",null),(0,i.gn)([(0,a.Et)(o.a4J,"CssInjectionBehavior.Unbind")],s.prototype,"disconnectedCallback",null),(0,i.gn)([(0,a.Et)(o.a4J,"CssInjectionBehaviorHandleChange")],s.prototype,"handleChange",null)},90752:function(e,t,n){"use strict";n.d(t,{g:function(){return s}});var i=n(33940),r=n(99452),o=n(7476),a=n(69425);class s{constructor(e){this.propertyName=e}connectedCallback(e){r.y$.getNotifier(e.source).subscribe(this,this.propertyName)}disconnectedCallback(e){this.styles&&e.source.$fastController.removeStyles(this.styles)}handleChange(e,t){this.styles&&e.$fastController.removeStyles(this.styles),this.styles=e[t],e.$fastController.addStyles(this.styles)}}(0,i.gn)([(0,a.Et)(o.a4J,"PropertyBehavior.Bind")],s.prototype,"connectedCallback",null),(0,i.gn)([(0,a.Et)(o.a4J,"PropertyBehavior.Unbind")],s.prototype,"disconnectedCallback",null),(0,i.gn)([(0,a.Et)(o.a4J,"PropertyBehavior.HandleChange")],s.prototype,"handleChange",null)},1152:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var i=n(28904),r=n(92100);function o(){const e="localhost.msn.com"===window.location.hostname,t=!!r.c.getParamsWithItems(decodeURIComponent(window.location.search)).find((e=>"spalink"===e.key&&e.value.toLowerCase().endsWith("/debug")));if(e||t){const e=i.H.prototype.setAttribute;i.H.prototype.setAttribute=function(t,n){if("object"==typeof n||"function"==typeof n||"symbol"==typeof n){const e=`Attribute "${t}" was expected to be string. Received type: ${typeof n}. This is likely a mistake.`;console.warn(e,this);const i=document.createElement("div");i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.right="0",i.style.bottom="0",i.style.backgroundColor="rgba(255, 0, 0, 0.5)",i.style.zIndex="9999",i.style.pointerEvents="none",i.innerText=e,this.shadowRoot?this.shadowRoot.appendChild(i):this.appendChild(i)}return e.call(this,t,n)}}}},54175:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var i=n(99452),r=n(28904);const o={handleChange(e){e.$fastController.isConnected?e.connected&&e.connected():e.disconnected&&e.disconnected()}};function a(e){return class extends e{constructor(...e){super(...e),i.y$.getNotifier(this.$fastController).subscribe(o,"isConnected")}}}a(r.H)}}]);